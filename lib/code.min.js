!function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){var c=b.util.type(a);switch(c){case"Object":var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.util.clone(a[e]));return d;case"Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;var f=e[a],g={};for(var h in f)if(f.hasOwnProperty(h)){if(h==c)for(var i in d)d.hasOwnProperty(i)&&(g[i]=d[i]);g[h]=f[h]}return e[a]=g},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,c){for(var d,e=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0;d=e[f++];)b.highlightElement(d,a===!0,c)},highlightElement:function(d,e,f){for(var g,h,i=d;i&&!a.test(i.className);)i=i.parentNode;if(i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),h){d.className=d.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=d.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);var j=d.textContent;if(j){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var k={element:d,language:g,grammar:h,code:j};if(b.hooks.run("before-highlight",k),e&&self.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=c.stringify(JSON.parse(a.data),g),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),k.element.innerHTML=k.highlightedCode,f&&f.call(d),b.hooks.run("after-highlight",k)}}},highlight:function(a,d,e){return c.stringify(b.tokenize(a,d),e)},tokenize:function(a,c){var d=b.Token,e=[a],f=c.rest;if(f){for(var g in f)c[g]=f[g];delete c.rest}a:for(var g in c)if(c.hasOwnProperty(g)&&c[g]){var h=c[g],i=h.inside,j=!!h.lookbehind||0;h=h.pattern||h;for(var k=0;k<e.length;k++){var l=e[k];if(e.length>a.length)break a;if(!(l instanceof d)){h.lastIndex=0;var m=h.exec(l);if(m){j&&(j=m[1].length);var n=m.index-1+j,m=m[0].slice(j),o=m.length,p=n+o,q=l.slice(0,n+1),r=l.slice(p+1),s=[k,1];q&&s.push(q);var t=new d(g,i?b.tokenize(m,i):m);s.push(t),r&&s.push(r),Array.prototype.splice.apply(e,s)}}}}return e},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var e,f=0;e=d[f++];)e(c)}}},c=b.Token=function(a,b){this.type=a,this.content=b};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};"comment"==f.type&&(f.attributes.spellcheck="true"),b.hooks.run("wrap",f);var g="";for(var h in f.attributes)g+=h+'="'+(f.attributes[h]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+g+">"+f.content+"</"+f.tag+">"},!self.document)return self.addEventListener("message",function(a){var c=JSON.parse(a.data),d=c.language,e=c.code;self.postMessage(JSON.stringify(b.tokenize(e,b.languages[d]))),self.close()},!1),void 0;var d=document.getElementsByTagName("script");d=d[d.length-1],d&&(b.filename=d.src,document.addEventListener&&!d.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll))}(),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),function(){"use strict";Prism.languages.gorillascript=Prism.languages.extend("javascript",{keyword:/\b(yield\*?|(throw|return)\??|((all)?keys|label|require|async|fulfilled|rejected|delay)!|(to-|from-|some-|every-)?promise!)|\b(as|break|continue|return|(for|while|until)(\s+(first|every|some|filter|reduce))?|if|else|unless|switch|then|case|default|catch|finally|try|return(if|ing|unless)?|new|class|extends|private|public|protected|def|super|require|promisefor|async(if|for|unless|until|while)?|import|export|returnif|returning|returnunless|mutable|macro|const|static|var|do|of|let|enum|namespace|package|true|false|null|undefined|void|GLOBAL|this|prototype|arguments|from|__(?:FILE|LINE|COLUMN|DATEMSEC|VERSION)__)(?!-)\b/g,operator:/\b((has|owns)key|bit(and|or|xor|not|lshift|u?rshift)|and|or|xor|min|max|instanceof(some)?|typeof\!?|is(nt)?(?!\-)|in|to|til|by|not|xor|delete)(?!\-)\b|\b((and|or|min|max)=|is-(array|boolean|function|null|number|object|string|undefined|void)!|post-(dec|inc)!)|!~?=|={1,2}|:=|::|&amp;|~=|\-(>|(?![\w]))|~?[\+\*\/%\^\\]=?|~?%%|\?=?|(&lt;){2,3}|(&gt;){2,3}|&lt;=&gt;|\|&gt;|&lt;\||@|\.{3}|\-&gt;|(&lt;|&gt;)=?/g,number:/\b-?(0x[\da-f_]+(\.[\da-f_]+)?|0b[01_]+(\.[\da-f_]+)?|0o[0-7_]+(\.[\da-f_]+)?|\d{1,2}r[\w\d_]+(\.[\w\d_]+)?|\d[_\d]*(\.[\d_]*)?(_[\w\d_]*)?|NaN|Infinity)\b/g,string:{pattern:/r"(\\?.)*?"[gimy]*|r'(\\?.)*?'[gimy]*|"(\\?.)*?"|'(\\?.)*?'|\\\w[\w\d_]*(-\w[\w\d_]*)*\b/g,inside:{interpolation:/\$(\w[\d\w]*(\-\w[\d\w]*)*|\(.*?\))/g}},punctuation:/[{}[\];(),.:]/g,ident:/\b\w[\d\w]*(\-\w[\d\w]*)*(?!['"])\b/g}),Prism.languages.insertBefore("gorillascript","operator",{property:/[\.@]\w[\d\w]*(\-\w[\d\w]*)*\b|\w[\d\w]*(\-\w[\d\w]*)*\s*:/g}),Prism.languages.insertBefore("gorillascript","ident",{primordial:/\b(Object|String|Number|Boolean|Function|Array|Math|JSON|Date|RegExp|Error|RangeError|ReferenceError|SyntaxError|TypeError|URIError|escape|unescape|parse(Int|\-int|Float|\-float)|is\-?NaN|is(F|\-f)inite|decode\-?URI((C|\-c)omponent)?|encode\-?URI((C|\-c)omponent)?|Set|Map|WeakMap)\b/g})}.call(this),function(a){var b=function(a){function b(c){var d=Object.prototype.hasOwnProperty;if(d.call(b._cache,c))return b._cache[c];if(d.call(b,c)){var e=b[c];return delete b[c],b._cache[c]=e.call({})}return a?a(c):void 0}return b._cache={},b["./utils"]=function(){var a={exports:this},c=this;return function(a){"use strict";function d(a,b){return w(b)<1?"":1===b?a:1&w(b)?A(a)+A(d(a,w(b)-1)):d(A(a)+A(a),w(b)/2)}function e(a,b,c){return A(d(c,w(b)-w(a.length)))+A(a)}function f(a,b,c){return A(a)+A(d(c,w(b)-w(a.length)))}function g(a){if("string"!=typeof a)throw TypeError("Expected value to be a String, got "+D(a));return H?H(a):-1===a.indexOf("'")?"'"+A(JSON.stringify(a).slice(1,-1))+"'":JSON.stringify(a)}function h(a){var b,c,d,e,f;for(f=[],b=B(a),c=0,d=b.length;d>c;++c)e=b[c],s(e,f)||f.push(e);return f}function i(a){var b,c;return b=K.join(a,"package.json"),G.existsSync(b)?b:(c=K.normalize(K.join(a,"..")),c!==a?i(c):void 0)}function j(a){var b,c;if("string"!=typeof a||!G||!K)return"";try{b=i(K.dirname(a))}catch(d){}if(!b)return"";try{c=JSON.parse(G.readFileSync(b)).version}catch(d){}return"string"==typeof c?c:""}function k(a){var b;return b=o(),G.exists(a,b.fulfill),b.promise}function l(a,b){return J.sync(a,b,!0)}function m(a,b,c){return N.sync(a,b,c,!0)}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;n="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},o=function(){function a(){function b(a,b){var f;c&&(f=c,c=null,d=a,e=b,f.length&&L(function(){var a,b;for(b=0,a=f.length;a>b;++b)f[b]()}))}var c,d,e;return d=!1,e=null,c=[],{promise:{then:function(b,f,g){function h(){var a,c;try{a=d?f:b,"function"==typeof a?(c=a(e),c&&"function"==typeof c.then?c.then(j,l,g):j(c)):(d?l:j)(e)}catch(h){l(h)}}var i,j,k,l;return g!==!0&&(g=void 0),i=a(),k=i.promise,j=i.fulfill,l=i.reject,c?c.push(h):g?h():L(h),k},sync:function(){var a,b;switch(b=0,a=0,this.then(function(c){return b=1,a=c},function(c){return b=2,a=c},!0),b){case 0:throw Error("Promise did not execute synchronously");case 1:return a;case 2:throw a;default:throw Error("Unknown state")}}},fulfill:function(a){b(!1,a)},reject:function(a){b(!0,a)}}}return a.fulfilled=function(b){var c;return c=a(),c.fulfill(b),c.promise},a.rejected=function(b){var c;return c=a(),c.reject(b),c.promise},a}(),p=function(a,b){function c(c,f){var g;try{g=a[c](f)}catch(h){return o.rejected(h)}return g.done?o.fulfilled(g.value):g.value.then(d,e,b)}function d(a){return c("send",a)}function e(a){return c("throw",a)}if("object"!=typeof a||null===a)throw TypeError("Expected generator to be an Object, got "+D(a));if("function"!=typeof a.send)throw TypeError("Expected generator.send to be a Function, got "+D(a.send));if("function"!=typeof a["throw"])throw TypeError("Expected generator.throw to be a Function, got "+D(a["throw"]));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+D(b));return d(void 0)},q=function(a,b){function c(){var c,f,g,h,i;for(f=e,g=a-1;g>=0;--g)i=null!=(c=arguments[g])?c:d,h=f.get(i),null==h&&(h=0===g?b.apply(this,arguments):M(),f.set(i,h)),f=h;return f}var d,e,f;return e=M(),d={},f=c(),f.generic=c,f},r=function(){function a(){return!0}function b(a){return"string"==typeof a}function c(a){return"number"==typeof a}function d(a){return"function"==typeof a}function e(a){return"boolean"==typeof a}return function(f){if(null==f)return a;switch(f){case String:return b;case Number:return c;case Function:return d;case Boolean:return e;case Array:return t;case Object:return u;default:return function(a){return a instanceof f}}}}(),s="function"==typeof Array.prototype.indexOf?function(){var a;return a=Array.prototype.indexOf,function(b,c){return-1!==a.call(c,b)}}():function(a,b){var c,d;for(d=+b.length,c=-1;++c<d;)if(a===b[c]&&c in b)return!0;return!1},t="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),u=function(a){return"object"==typeof a&&null!==a},v=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+D(a));return a.displayName||a.name||""},w=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+D(a));return a},x=Object.prototype.hasOwnProperty,y=function(a,b){var c;if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+D(b));return"function"==typeof a?(c=function(){return p(a.apply(this,arguments))},c.sync=function(){return p(a.apply(this,arguments),!0).sync()},c):p(a,b)},z=Array.prototype.slice,A=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+D(a))},B=function(a){if(null==a)throw TypeError("Expected an object, got "+D(a));return t(a)?a:"string"==typeof a?a.split(""):z.call(a)},C=function(a,b,c){var d;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+D(a));return d=o(),a.apply(b,B(c).concat([function(a,b){null!=a?d.reject(a):d.fulfill(b)}])),d.promise},D=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),L="function"==typeof a.setImmediate?a.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var a;return a=process.nextTick,function(b){var c;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+D(b));return c=z.call(arguments,1),c.length?a(function(){b.apply(void 0,B(c))}):a(b)}}():function(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+D(a));return b=z.call(arguments,1),b.length?setTimeout(function(){a.apply(void 0,B(b))},0):setTimeout(a,0)},M="function"==typeof a.WeakMap?a.WeakMap:M=function(){function a(){var b;return b=this instanceof a?this:n(e),b._keys=[],b._values=[],b._chilly=[],b._uid=c(),b}function b(){return Math.random().toString(36).slice(2)}function c(){return A(b())+"-"+A((new Date).getTime())+"-"+A(b())+"-"+A(b())}function d(a){var b,c;c=this._uid,x.call(a,c)&&(b=this._chilly,-1===b.indexOf(a)&&(b.push(a),this._keys.push(a),this._values.push(a[c])))}var e,f,g;return e=a.prototype,a.displayName="WeakMap",g=Object.isExtensible||function(){return!0},e.get=function(a){var b,c;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");return g(a)?x.call(a,b=this._uid)?a[b]:void 0:(d.call(this,a),c=this._keys.indexOf(a),-1===c?void 0:this._values[c])},e.has=function(a){if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");return g(a)?x.call(a,this._uid):(d.call(this,a),-1!==this._keys.indexOf(a))},f="function"==typeof Object.defineProperty?Object.defineProperty:function(a,b,c){a[b]=c.value},e.set=function(a,b){var c,e;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");g(a)?f(a,this._uid,{configurable:!0,writable:!0,enumerable:!1,value:b}):(d.call(this,a),e=this._keys,c=e.indexOf(a),-1===c&&(c=e.length,e[c]=a),this._values[c]=b)},e["delete"]=function(a){var b,c;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");g(a)?delete a[this._uid]:(d.call(this,a),c=this._keys,b=c.indexOf(a),-1!==b&&(c.splice(b,1),this._values.splice(b,1)))},a}(),null!=(E=b("util"))&&(H=E.inspect),K=b("path"),G=b("fs"),F=q(2,function(a,b){var c,d;return c=r(a),d=r(b),function(){function e(){var a;return a=this instanceof e?this:n(f),a.weakmap=M(),a}var f;return f=e.prototype,e.displayName="Cache<"+(null!=a?v(a):"")+", "+(null!=b?v(b):"")+">",f.get=function(b){if(!c(b))throw TypeError("Expected key to be a "+v(a)+", got "+D(b));return this.weakmap.get(b)},f.getOrAdd=function(e,f){var g,h;if(!c(e))throw TypeError("Expected key to be a "+v(a)+", got "+D(e));if("function"!=typeof f)throw TypeError("Expected factory to be a Function, got "+D(f));if(h=this.weakmap,g=h.get(e),void 0===g){if(g=f(e),!d(g))throw Error("Expected factory result to be a "+v(b)+", got "+D(g));h.set(e,g)}return g},e}()}),I=function(){var a;return a={Object:!0,String:!0,Number:!0,Boolean:!0,Function:!0,Array:!0,Math:!0,JSON:!0,Date:!0,RegExp:!0,Error:!0,RangeError:!0,ReferenceError:!0,SyntaxError:!0,TypeError:!0,URIError:!0,escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0},function(b){if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+D(b));return x.call(a,b)}}(),J=y(function(a,b,c){function d(){l=14}function e(d){for(;;)switch(l){case 0:null==b&&(b=511&~w(process.umask())),m="",h=B(a.split(/[\/\\]/g)),i=0,j=h.length,++l;case 1:l=j>i?2:13;break;case 2:q=h[i],n=K.resolve(K.join(m,q)),l=c?3:4;break;case 3:p=G.existsSync(n),l=6;break;case 4:return++l,{done:!1,value:k(n)};case 5:p=d,++l;case 6:l=p?11:7;break;case 7:l=c?8:9;break;case 8:G.mkdirSync(n,b),l=11;break;case 9:return l=11,{done:!1,value:C(G.mkdir,G,[n,b])};case 10:throw Error("Unable to create directory '"+A(n)+"' (Error code: "+A(o.code)+")");case 11:m=n,++l;case 12:++i,l=1;break;case 13:++l;case 14:return{done:!0,value:void 0};default:throw Error("Unknown state: "+l)}}function f(a){if(!(l>=7&&9>=l))throw d(),a;o=a,l=10}function g(a){for(;;)try{return e(a)}catch(b){f(b)}}var h,i,j,g,l,e,f,m,n,o,p,q;return l=0,{close:d,iterator:function(){return this},next:function(){return g(void 0)},send:g,"throw":function(a){return f(a),g(void 0)}}}),N=y(function(a,b,c,d){function e(){i=4}function f(){for(;;)switch(i){case 0:i=d?1:2;break;case 1:l(K.dirname(a)),G.writeFileSync(a,b,c),i=4;break;case 2:return++i,{done:!1,value:J(K.dirname(a))};case 3:return++i,{done:!1,value:C(G.writeFile,G,[a,b,c])};case 4:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function g(a){throw e(),a}function h(a){try{return f(a)}catch(b){g(b)}}var h,i,f,g;return i=0,{close:e,iterator:function(){return this},next:function(){return h(void 0)},send:h,"throw":function(a){return g(a),h(void 0)}}}),c.stringRepeat=d,c.padLeft=e,c.padRight=f,c.Cache=F,c.quote=g,c.unique=h,c.getPackageVersion=j,c.isPrimordial=I,c.mkdirp=J,c.mkdirpSync=l,c.writeFileWithMkdirp=N,c.writeFileWithMkdirpSync=m}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b["./jsutils"]=function(){var a={exports:this},c=this;return function(){"use strict";var a,d,e,f,g,h,i,j,k,l,m,n,o,p;a=function(a,b){var c;if(null==a)throw TypeError("Expected parent to be an object, got "+m(a));if(c=a[b],"function"!=typeof c)throw Error("Trying to bind child '"+String(b)+"' which is not a function");return function(){return c.apply(a,arguments)}},d="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},e="function"==typeof Array.prototype.indexOf?function(){var a;return a=Array.prototype.indexOf,function(b,c){return-1!==a.call(c,b)}}():function(a,b){var c,d;for(d=+b.length,c=-1;++c<d;)if(a===b[c]&&c in b)return!0;return!1},f="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),g=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>=a},h=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+m(a));return a},i=Object.prototype.hasOwnProperty,j=Array.prototype.slice,k=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+m(a))},l=function(a){if(null==a)throw TypeError("Expected an object, got "+m(a));return f(a)?a:"string"==typeof a?a.split(""):j.call(a)},m=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),o=b("./utils").padLeft,n=function(){var a,b,c;return a=/^[a-zA-Z_\$][a-zA-Z_\$0-9]*$/,b=/^[a-zA-Z_\$\u00a0-\uffff][a-zA-Z_\$0-9\u00a0-\uffff]*$/,c=["arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","eval","false","finally","for","function","if","implements","import","in","Infinity","instanceof","interface","let","NaN","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],function(d,f){var g;if("string"!=typeof d)throw TypeError("Expected name to be a String, got "+m(d));if(null==f)f=!1;else if("boolean"!=typeof f)throw TypeError("Expected allowUnicode to be a Boolean, got "+m(f));return g=f?b:a,g.test(d)&&!e(d,c)}}(),p=function(){function b(a,b,c){var d;for(null==c&&(c="  "),d=0,h(b);b>d;++d)a(c)}function c(a){var b;return b=d(a),b.indent=h(a.indent)+1,b}function e(a){var b,c,d;if(null==a)return!1;if(a instanceof RegExp)return e(a.source);if(a instanceof Date)return!1;if(f(a))switch(a.length){case 0:return!1;case 1:return e(a[0]);default:return!0}else switch(typeof a){case"string":return h(a.length)>=j;case"number":case"boolean":return!1;case"object":b=-1;for(c in a)if(i.call(a,c)&&(++b,d=a[c],b>=1||e(c)||e(d)))return!0;return!1;default:return!0}}var j,q,r;return j=50,q=7,r={"null":function(a,b){b("null")},undefined:function(a,b){b("void 0")},number:function(a,b){b(0===a?1/h(a)<0?"-0":"0":isFinite(a)?String(a):a!==a?"0/0":h(a)>0?"1/0":"-1/0")},regexp:function(a,b){b("/"),b(a.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),b("/"),a.global&&b("g"),a.ignoreCase&&b("i"),a.multiline&&b("m")},string:function(){function a(a){switch(a){case"\b":return"\\b";case"	":return"\\t";case"\n":return"\\n";case"\f":return"\\f";case"\r":return"\\r";case"\n":return"\\n";case'"':return'\\"';case"'":return"\\'";case"\\":return"\\\\";default:return"\\u"+k(o(a.charCodeAt(0).toString(16),4,"0"))}}function b(b){return'"'+k(b.replace(e,a))+'"'}function c(b){return"'"+k(b.replace(f,a))+"'"}function d(a,b){return g(a.length,b.length)?a:b}var e,f;return e=/[\u0000-\u001f"\\\u0080-\uffff]/g,f=/[\u0000-\u001f'\\\u0080-\uffff]/g,function(a,e){return e(-1===a.indexOf('"')?b(a):-1===a.indexOf("'")?c(a):d(b(a),c(a)))}}(),"boolean":function(a,b){return b(a?"true":"false")},date:function(a,b){return b("new Date("),b(String(a.getTime())),b(")")},array:function(a,d,f){var g,i,j,k,m,n,o;if(k="indent"in f,0===a.length)return d("[]");if(k&&h(a.length)>1&&(h(a.length)>=q||function(){var b,c,d,f,g;for(f=!1,b=l(a),c=0,d=b.length;d>c;++c)if(g=b[c],e(g)){f=!0;break}return f}())){for(d("[\n"),j=c(f),g=l(a),m=0,o=g.length;o>m;++m)n=g[m],b(d,j.indent),p(n,d,j),o-1>m&&d(","),d("\n");return b(d,f.indent),d("]")}for(d("["),g=l(a),m=0,i=g.length;i>m;++m)n=g[m],m>0&&(d(","),k&&d(" ")),p(n,d,f);return d("]")},object:function(){function a(a,b,c){var d;n(a)?b(a):(d=Number(a),d===d&&String(d)===a?b(a):p(a,b,c))}return function(d,f,g){var h,j,k,m,n,o,r,s,t,u;h=[];for(r in d)i.call(d,r)&&(u=d[r],h.push({key:r,value:u}));if(t=h,n="indent"in g,0===t.length)return f("{}");if(n&&t.length>1&&(t.length>=q||function(){var a,b,c,d,f,g,h;for(f=!1,a=l(t),b=0,c=a.length;c>b;++b)if(d=a[b],g=d.key,h=d.value,e(g)||e(h)){f=!0;break}return f}())){for(f("{\n"),m=c(g),o=0,s=t.length;s>o;++o)k=t[o],r=k.key,u=k.value,b(f,m.indent),a(r,f,m),f(": "),p(u,f,m),s-1>o&&f(","),f("\n");return b(f,g.indent),f("}")}for(f("{"),o=0,j=t.length;j>o;++o)k=t[o],r=k.key,u=k.value,o>0&&(f(","),n&&f(" ")),a(r,f,g),f(":"),n&&f(" "),p(u,f,g);return f("}")}}()},function(b,c,d){var e,g,h;if(null==c)c=null;else if("function"!=typeof c)throw TypeError("Expected sb to be one of Function or null, got "+m(c));if(null==d&&(d={}),null==c)return g=[],p(b,a(g,"push"),d),g.join("");if(null===b)r["null"](b,c,d);else if(f(b))r.array(b,c,d);else if(b instanceof RegExp)r.regexp(b,c,d);else if(b instanceof Date)r.date(b,c,d);else{if(i.call(r,e=typeof b)&&(h=r[e]),"function"!=typeof h)throw Error("Cannot convert "+m(b)+" to JS source");h(b,c,d)}}}(),c.toJSSource=p,c.isAcceptableIdent=n}.call(this),a.exports},b["./types"]=function(){var a={exports:this};return function(){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c=function(a,b){var c;if(a===b)return 0;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a?-1:1},d="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},e="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),f=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>=a},g=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+o(a));return a.displayName||a.name||""},h=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+o(a));return a},i=Object.prototype.hasOwnProperty,j=Array.prototype.slice,k=function(a){if("string"!=typeof a)throw TypeError("Expected a string, got "+o(a));return a},l=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+o(a))},m=function(a){throw a},n=function(a){if(null==a)throw TypeError("Expected an object, got "+o(a));return e(a)?a:"string"==typeof a?a.split(""):j.call(a)},o=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),r=b("util"),null!=r&&(p=r.inspect),a.exports=q=function(){function a(){var b;throw b=this instanceof a?this:d(A),TypeError("Type should not be instantiated")}function b(a,b){var c,d,e;for(c=n(a),d=c.length;d--;)if(e=c[d],e.equals(b))return!0;return!1}function q(a,b){var c,d,e,f,g,i,j,k;if(a===b)return a;for(k=[],d=a.length,f=b.length,i=0,j=0;i<h(d)&&j<h(f);)c=a[i],e=b[j],g=c.compare(e),0===g?(k.push(c),++i,++j):h(g)<0?(k.push(c),++i):(k.push(e),++j);for(;i<h(d);++i)k.push(a[i]);for(;j<h(f);++j)k.push(b[j]);switch(k.length){case d:return a;case f:return b;default:return k}}function r(a,b){var c,d,e,f,g,i,j,k;if(a===b)return a;for(d=a.length,f=b.length,k=[],i=0,j=0;i<h(d)&&j<h(f);)c=a[i],e=b[j],g=c.compare(e),0===g?(k.push(c),++i,++j):h(g)<0?++i:++j;switch(k.length){case d:return a;case f:return b;default:return k}}function s(a,b){var c,d,e,f,g,i,j;if(a===b)return[];if(j=[],d=a.length,0===d)return j;if(e=b.length,0===e)return a;for(g=0,i=0;g<h(d)&&i<h(e);)c=a[g],f=c.compare(b[i]),0===f?(++g,++i):h(f)<0?(j.push(c),++g):++i;for(;g<h(d);++g)j.push(a[g]);return j.length===d?a:j}function t(a,b){var c,d,e,g;if(a===b)return!0;if(c=a.length,0===c)return!0;if(d=b.length,f(c,d)){for(e=0,g=0;g<h(d);)if(a[e].equals(b[g])){if(++e,e>=h(c))return!0;++g}else++g;return!1}return!1}function u(a,b){var c,d,e,f,g;if(c=a.length,a===b&&h(c)>0)return!0;for(d=b.length,f=0,g=0;f<h(c)&&g<h(d);){if(e=a[f].compare(b[g]),0===e)return!0;h(e)<0?++f:++g}return!1}function v(a,b){var d,e,f;if(a!==b){if(f=a.length,d=c(f,b.length))return d;for(e=0,h(f);f>e;++e)if(d=a[e].compare(b[e]))return d}return 0}function w(a,b){var c,d;if(a!==b){if(d=a.length,d!==b.length)return!1;for(c=0,h(d);d>c;++c)if(!a[c].equals(b[c]))return!1}return!0}function x(a,b){return a.compare(b)}function y(a,b){switch(a.length){case 0:return J;case 1:return a[0];default:return b&&a.sort(x),N(a)}}function z(a){var b;if("string"==typeof a)return z({type:"simple",name:a});if(b=a.type,"string"!=typeof b)throw TypeError("Unspecified type");if(i.call(F,b))return F[b](a);throw TypeError("Unknown serialization type: "+l(b))}var A,B,C,D,E,F,G,H,I,J,K,L,M,N;return A=a.prototype,a.displayName="Type",A.isSubsetOf=function(){throw Error("Not implemented: "+g(this.constructor)+".isSubsetOf()")},A.isSupersetOf=function(a){return a.isSubsetOf(this)},A.overlaps=function(){throw Error("Not implemented: "+g(this.constructor)+".overlaps()")},A.compare=function(){throw Error("Not implemented: "+g(this.constructor)+".compare()")},A.equals=function(){throw Error("Not implemented: "+g(this.constructor)+".equals()")},A.union=function(){throw Error("Not implemented: "+g(this.constructor)+".union()")},A.intersect=function(){throw Error("Not implemented: "+g(this.constructor)+".intersect()")},A.complement=function(){var a;return null==(a=this._complement)?this._complement=E(this):a},A.array=function(){var b;return null==(b=this._array)?this._array=a.generic(D,this):b},A["function"]=function(){var b,c;return c=j.call(arguments),null==(b=this._function)?this._function=a.generic.apply(a,[G,this].concat(n(c))):b},F={},a.fromJSON=z,I=function(){var a;return a=-1,function(){return++a,a}}(),M=function(a){function b(a){var c;if(c=this instanceof b?this:d(e),"string"!=typeof a)throw TypeError("Expected name to be a String, got "+o(a));return c.name=a,c.id=I(),c}var e,f;return f=a.prototype,e=b.prototype=d(f),e.constructor=b,b.displayName="SimpleType","function"==typeof a.extended&&a.extended(b),e.toString=function(){return this.name},e.equals=function(a){return this===a},e.compare=function(a){return this===a?0:a instanceof b?c(this.name,a.name)||c(this.id,a.id):c("SimpleType",a.constructor.displayName)},e.union=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this===c?this:y([this,c],!0):c.union(this)},e.intersect=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this===c?this:J:c.intersect(this)},e.isSubsetOf=function(c){var d,e,f,h;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof b)return this===c;if(c instanceof N){for(f=!1,d=n(c.types),e=d.length;e--;)if(h=d[e],this===h){f=!0;break}return f}return c instanceof E?!this.isSubsetOf(c.untype):c===B},e.overlaps=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this===c:c.overlaps(this)},e.inspect=function(){var b;return b=this,function(){var c,d,e;c=!0;for(d in a)if(i.call(a,d)&&(c=!1,e=a[d],e===b))return"Type."+d;return"Type.make("+l(p(b.name))+")"}()},e.toJSON=function(){var b;return b=this,function(){var c,d,e;c=!0;for(d in a)if(i.call(a,d)&&(c=!1,e=a[d],e===b))return d;throw Error("Cannot serialize custom type: "+String(b))}()},F.simple=function(b){var c;return c=b.name,i.call(a,c)&&a[c]||m(Error("Unknown type: "+String(c)))},b}(a),a.make=function(a){return M(a)},H=function(a){function b(c,f){var h,i,j;if(j=this instanceof b?this:d(k),!(c instanceof M))throw TypeError("Expected base to be a "+g(M)+", got "+o(c));if(j.base=c,!e(f))throw TypeError("Expected args to be an Array, got "+o(f));for(h=f.length;h--;)if(!(f[h]instanceof a))throw TypeError("Expected "+("args["+h+"]")+" to be a "+g(a)+", got "+o(f[h]));if(0===f.length)throw Error("Must provide at least one generic type argument");if(j.id=I(),j.args=f.slice(),j.base===D&&1===f.length){if(null!=(i=f[0]._array))return i;f[0]._array=j}else if(j.base===G&&1===f.length){if(null!=(i=f[0]._function))return i;f[0]._function=j}return j}function j(a,b){return f(a.id,b.id)?(b.base=a.base,b.args=a.args,b.id=a.id,void 0):j(b,a)}var k,l;return l=a.prototype,k=b.prototype=d(l),k.constructor=b,b.displayName="GenericType","function"==typeof a.extended&&a.extended(b),k.toString=function(){var a,b,c,d,e,f;if(null==(c=this._name)){if(this.base===D&&1===this.args.length)return this._name=this.args[0]===B?"[]":"["+String(this.args[0])+"]";if(this.base===G&&1===this.args.length)return this._name=this.args[0]===B?"->":"-> "+String(this.args[0]);for(f=[],f.push(String(this.base)),f.push("<"),a=n(this.args),e=0,b=a.length;b>e;++e)d=a[e],e>0&&(f.push(","),d!==B&&this.args[e-1]!==B&&f.push(" ")),d!==B&&f.push(String(d));return f.push(">"),this._name=f.join("")}return c},k.equals=function(a){return a===this?!0:a instanceof b?this.id===a.id?!0:this.base===a.base&&w(this.args,a.args)?(j(this,a),!0):!1:!1},k.compare=function(a){var d,e;return a===this?0:a instanceof b?this.id===a.id?0:(d=this.base.compare(a.base))?d:(e=v(this.args,a.args),e||j(this,a),e):c("GenericType",a.constructor.displayName)},k.union=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this.equals(c)?this:this.isSubsetOf(c)?c:c.isSubsetOf(this)?this:y([this,c],!0):c instanceof M?y([this,c],!0):c.union(this)},k.intersect=function(c){var d,e,f,i,j,k,l,m,n,p;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof b){if(this.base!==c.base)return J;if(this.equals(c))return this;if(e=this.args,p=c.args,k=e.length,k!==p.length)return J;for(j=!0,i=!0,m=[],f=0,h(k);k>f;++f)d=e[f],n=p[f],l=e[f].intersect(p[f]),j&&d!==l&&(j=!1),i&&n!==l&&(i=!1),m.push(l);
return j?this:i?c:b(this.base,m)}return c instanceof M?J:c.intersect(this)},k.isSubsetOf=function(c){var d,e,f,i,j,k,l,m;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof b){if(this.base!==c.base)return!1;if(this.equals(c))return!0;if(i=this.args,l=c.args,k=i.length,k!==l.length)return!1;for(j=0,h(k);k>j;++j)if(!i[j].isSubsetOf(l[j]))return!1;return!0}if(c instanceof N){for(f=!1,d=n(c.types),e=d.length;e--;)if(m=d[e],this.isSubsetOf(m)){f=!0;break}return f}return c instanceof E?!this.isSubsetOf(c.untype):c===B},k.overlaps=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this.base!==c.base?!1:this.args.length===c.args.length:c instanceof M?!1:c.overlaps(this)},k.inspect=function(a){var b,c,d,e,f;for(null!=a&&(a=h(a)-1),f=["Type.generic("],f.push(p(this.base,null,a)),b=n(this.args),c=0,d=b.length;d>c;++c)e=b[c],f.push(", "),f.push(p(e,null,a));return f.push(")"),f.join("")},k.toJSON=function(){var b;return b=this,function(){var c,d,e;c=!0;for(d in a)if(i.call(a,d)&&(c=!1,e=a[d],e===b))return d;return{type:"generic",base:b.base,args:b.args}}()},F.generic=function(c){var d,e,f;return e=c.base,d=c.args,f=a.fromJSON(e),f===D&&1===d.length?a.fromJSON(d[0]).array():f===G&&1===d.length?a.fromJSON(d[0])["function"]():b(f,function(){var b,c,e,f,g;for(b=[],c=n(d),e=0,f=c.length;f>e;++e)g=c[e],b.push(a.fromJSON(g));return b}())},b}(a),a.generic=function(b){var c;return c=j.call(arguments,1),H("string"==typeof b?a.make(b):b,c)},L=function(a){function b(e){var f,g,h,l;if(f=this instanceof b?this:d(j),"object"!=typeof e||null===e)throw TypeError("Expected data to be an Object, got "+o(e));h=[];for(g in e)if(i.call(e,g)){if(l=e[g],!(l instanceof a))throw TypeError("Expected data["+k(JSON.stringify(g))+"] to be a Type, got "+o(l));l!==B&&h.push([g,l])}return h.sort(function(a,b){return c(a[0],b[0])}),0===h.length&&null!=a.object?a.object:(f.pairs=h,f.id=I(),f)}function e(a,b){return f(a.id,b.id)?(b.pairs=a.pairs,b.id=a.id,void 0):e(b,a)}var j,m;return m=a.prototype,j=b.prototype=d(m),j.constructor=b,b.displayName="ObjectType","function"==typeof a.extended&&a.extended(b),j.toString=function(){var a,b;return b=this,null==(a=this._name)?this._name="{"+l(function(){var a,c,d,e,f,g,h;for(a=[],c=n(b.pairs),d=0,e=c.length;e>d;++d)f=c[d],g=f[0],h=f[1],a.push(l(g)+": "+String(h));return a}().join(", "))+"}":a},j.equals=function(a){var c,d,f,g,h,i,j;if(a===this)return!0;if(a instanceof b){if(j=this.pairs,h=a.pairs,j===h)return!0;if(j.length!==h.length)return!1;for(c=n(j),f=0,d=c.length;d>f;++f)if(i=c[f],g=h[f],i[0]!==g[0]||!i[1].equals(g[1]))return!1;return e(this,a),!0}return!1},j.compare=function(a){var d,f,g,h,i,j,k,l;if(this===a)return 0;if(a instanceof b){if(l=this.pairs,j=a.pairs,l===j)return 0;if(g=c(l.length,j.length))return g;for(d=n(l),h=0,f=d.length;f>h;++h)if(k=d[h],i=j[h],g=c(k[0],i[0])||k[1].compare(i[1]))return g;return e(this,a),0}return c("ObjectType",a.constructor.displayName)},j.union=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?this.equals(c)?this:this.isSubsetOf(c)?c:c.isSubsetOf(this)?this:y([this,c],!0):c instanceof M||c instanceof H?y([this,c],!0):c.union(this)},j.intersect=function(c){var d,e,f,h,j,k,l;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof b){if(this.equals(c))return this;if(this.isSubsetOf(c))return this;if(c.isSubsetOf(this))return c;for(k={},d=n(this.pairs),e=0,f=d.length;f>e;++e)h=d[e],j=h[0],l=h[1],k[j]=l;for(d=n(c.pairs),e=0,f=d.length;f>e;++e)h=d[e],j=h[0],l=h[1],k[j]=i.call(k,j)?k[j].intersect(l):l;return b(k)}return c instanceof M||c instanceof H?J:c.intersect(this)},j.isSubsetOf=function(c){var d,i,j,k,l,m,p,q,r,s,t,u,v;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof b){if(this===c||c===a.object)return!0;if(this===a.object)return!1;if(u=this.pairs,r=c.pairs,u===c.pairs)return!0;for(m=0,p=u.length,d=n(r),i=0,j=d.length;j>i;++i)for(k=d[i],q=k[0],s=k[1];m<=h(p);++m){if(m===p)return!1;if(t=u[m],t[0]===q){if(t[1].isSubsetOf(s)){++m;break}return!1}if(!f(t[0],q))return!1}return m===p&&e(this,c),!0}if(c instanceof N){for(l=!1,d=n(c.types),i=d.length;i--;)if(v=d[i],this.isSubsetOf(v)){l=!0;break}return l}return c instanceof E?!this.isSubsetOf(c.untype):c===B},j.overlaps=function(c){if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof b?!0:c instanceof M||c instanceof H?!1:c.overlaps(this)},j.value=function(b){var c,d,e,f;if("string"!=typeof b)throw TypeError("Expected key to be a String, got "+o(b));for(c=n(this.pairs),d=c.length;d--;){if(e=c[d],f=e[0],f===b)return e[1];if(b>f)return a.any}return a.any},j.inspect=function(b){var c,d,e,f,g,i,j;if(this===a.object)return"Type.object";for(i={},c=n(this.pairs),d=0,e=c.length;e>d;++d)f=c[d],g=f[0],j=f[1],i[g]=j;return"Type.makeObject("+l(p(i,null,null!=b?h(b)-1:null))+")"},j.toJSON=function(){var a,b,c,d,e,f,g;if(0===this.pairs.length)return"object";for(f={},a=n(this.pairs),b=0,c=a.length;c>b;++b)d=a[b],e=d[0],g=d[1],f[e]=g;return{type:"object",pairs:f}},F.object=function(c){var d,e,f,g;f=c.pairs,d={};for(e in f)i.call(f,e)&&(g=f[e],d[e]=a.fromJSON(g));return b(d)},b}(a),a.makeObject=function(a){return L(a)},N=function(a){function j(b){var c,f;if(f=this instanceof j?this:d(s),!e(b))throw TypeError("Expected types to be an Array, got "+o(b));for(c=b.length;c--;)if(!(b[c]instanceof a))throw TypeError("Expected "+("types["+c+"]")+" to be a "+g(a)+", got "+o(b[c]));if(f.types=b,b.length<=1)throw Error("Must provide at least 2 types to UnionType");return f.id=I(),f}function k(a,b){return f(a.id,b.id)?(b.types=a.types,b.id=a.id):k(b,a)}var m,s;return m=a.prototype,s=j.prototype=d(m),s.constructor=j,j.displayName="UnionType","function"==typeof a.extended&&a.extended(j),s.toString=function(){var a;return null==(a=this._name)?this._name="("+l(this.types.join("|"))+")":a},s.equals=function(a){return a===this?!0:a instanceof j?this.id===a.id?!0:this.types===a.types||w(this.types,a.types)?(k(this,a),!0):!1:!1},s.compare=function(a){var b;return a===this?0:a instanceof j?this.id===a.id?0:this.types===a.types?(k(this,a),0):(b=v(this.types,a.types),0===b&&k(this,a),b):c("UnionType",a.constructor.displayName)},s.union=function(b){var c,d,e,f,h,i;if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));if(b instanceof M||b instanceof H)return i=q(this.types,[b]),i===this.types?this:y(i);if(b instanceof L){if(b===a.object){for(f=[b],c=n(this.types),d=0,e=c.length;e>d;++d)if(h=c[d],h instanceof L){if(h===a.object)return this}else f.push(h);return y(f)}for(f=[b],c=n(this.types),d=0,e=c.length;e>d;++d)if(h=c[d],h instanceof L){if(b.isSubsetOf(h))return this;h.isSubsetOf(b)||f.push(h)}else f.push(h);return y(f)}return b instanceof j?(i=q(this.types,b.types),i===this.types?this:i===b.types?b:y(i)):b.union(this)},s.intersect=function(b){var c;if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));return b instanceof M||b instanceof H||b instanceof L?y(r(this.types,[b])):b instanceof j?(c=r(this.types,b.types),c===this.types?this:c===b.types?b:y(c)):b.intersect(this)},s.isSubsetOf=function(b){if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));return b instanceof j?t(this.types,b.types):b instanceof E?!this.overlaps(b.untype):b===B},s.overlaps=function(c){var d,e,f,h;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));if(c instanceof M)return b(this.types,c);if(c instanceof H||c instanceof L){for(f=!1,d=n(this.types),e=d.length;e--;)if(h=d[e],h.overlaps(c)){f=!0;break}return f}return c instanceof j?u(this.types,c.types):c.overlaps(this)},s.inspect=function(a){var b;return b=this,"("+l(function(){var c,d,e,f,g;for(c=[],d=n(b.types),e=0,f=d.length;f>e;++e)g=d[e],c.push(p(g,null,null!=a?h(a)-1:null));return c}().join(").union("))+")"},s.toJSON=function(){var b;return b=this,function(){var c,d,e;c=!0;for(d in a)if(i.call(a,d)&&(c=!1,e=a[d],e===b))return d;return{type:"union",types:b.types}}()},F.union=function(b){var c,d,e,f,g;for(g=b.types,e=a.none,c=n(g),d=c.length;d--;)f=c[d],e=e.union(a.fromJSON(f));return e},j}(a),E=function(a){function e(b){var c;if(c=this instanceof e?this:d(k),!(b instanceof a))throw TypeError("Expected untype to be a "+g(a)+", got "+o(b));return c.untype=b,c.id=I(),c}function h(a,b){return f(a.id,b.id)?(b.id=a.id,b.untype=a.untype):h(b,a)}function j(a){return a instanceof N?a.types:[a]}var k,m;return m=a.prototype,k=e.prototype=d(m),k.constructor=e,e.displayName="ComplementType","function"==typeof a.extended&&a.extended(e),k.toString=function(){var a;return null==(a=this._name)?this._name="any \\ "+String(this.untype):a},k.equals=function(a){return this===a?!0:a instanceof e?this.id===a.id?!0:this.untype.equals(a.untype)?(h(this,a),!0):!1:!1},k.compare=function(a){var b;return this===a?0:a instanceof e?this.id===a.id?0:(b=this.untype.compare(a.untype),0===b&&h(this,a),b):c("ComplementType",a.constructor.displayName)},k.union=function(b){var c,d;if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));return b instanceof M||b instanceof H||b instanceof L?(c=j(this.untype),d=s(c,[b]),d===c?this:y(d).complement()):b instanceof N?(c=j(this.untype),d=s(c,b.types),d===c?this:y(d).complement()):b instanceof e?this.untype.intersect(b.untype).complement():b.union(this)},k.intersect=function(c){var d;if(!(c instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(c));return c instanceof M||c instanceof H||c instanceof L?b(j(this.untype),c)?J:c:c instanceof N?(d=s(c.types,j(this.untype)),d===c.types?c:y(d)):c instanceof e?this.untype.union(c.untype).complement():c.intersect(this)},k.isSubsetOf=function(b){if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));return b instanceof e?b.untype.isSubsetOf(this.untype):b===B},k.overlaps=function(b){var c,d,f,h;if(!(b instanceof a))throw TypeError("Expected other to be a "+g(a)+", got "+o(b));if(b instanceof M||b instanceof H)return!this.untype.overlaps(b);if(b instanceof L){for(d=!0,c=j(this.untype),f=c.length;f--;)if(h=c[f],h instanceof L&&b.isSubsetOf(h)){d=!1;break}return d}return b instanceof N?s(b.types,j(this.untype)).length>0:b instanceof e?!0:b.overlaps(this)},k.complement=function(){return this.untype},k.inspect=function(a){return l(this.untype.inspect(a))+".complement()"},k.toJSON=function(){var b;return b=this,function(){var c,d,e;c=!0;for(d in a)if(i.call(a,d)&&(c=!1,e=a[d],e===b))return d;return{type:"complement",untype:b.complement()}}()},F.complement=function(b){var c;return c=b.untype,a.fromJSON(c).complement()},e}(a),B=a.any=new(C=function(a){function b(){var a;if(a=this instanceof b?this:d(e),B)throw Error("Cannot instantiate more than once");return a}var e,f;return f=a.prototype,e=b.prototype=d(f),e.constructor=b,b.displayName="AnyType","function"==typeof a.extended&&a.extended(b),e.toString=function(){return"any"},e.equals=function(a){return this===a},e.compare=function(a){return this===a?0:c("AnyType",a.constructor.displayName)},e.union=function(){return this},e.intersect=function(a){return a},e.isSubsetOf=function(a){return this===a},e.overlaps=function(){return!0},e.complement=function(){return J},e.inspect=function(){return"Type.any"},e.toJSON=function(){return"any"},F.any=function(){return B},b}(a)),J=a.none=new(K=function(a){function b(){var a;if(a=this instanceof b?this:d(e),J)throw Error("Cannot instantiate more than once");return a}var e,f;return f=a.prototype,e=b.prototype=d(f),e.constructor=b,b.displayName="NoneType","function"==typeof a.extended&&a.extended(b),e.toString=function(){return"none"},e.equals=function(a){return this===a},e.compare=function(a){return this===a?0:c("NoneType",a.constructor.displayName)},e.union=function(a){return a},e.intersect=function(){return this},e.isSubsetOf=function(){return!0},e.overlaps=function(){return!1},e.complement=function(){return B},e.inspect=function(){return"Type.none"},e.toJSON=function(){return"none"},F.none=function(){return J},b}(a)),D=a.arrayBase=a.make("Array"),G=a.functionBase=a.make("Function"),a.undefined=a.make("undefined"),a["null"]=a.make("null"),a.boolean=a.make("Boolean"),a.string=a.make("String"),a.stringArray=a.string.array(),a.number=a.make("Number"),a.numberArray=a.number.array(),a.array=B.array(),a.args=a.make("Arguments"),a.object=a.makeObject({}),a["function"]=B["function"](),a.regexp=a.make("RegExp"),a.date=a.make("Date"),a.error=a.make("Error"),a.promise=a.makeObject({then:a.any["function"](a["function"],a["function"])}),a.numeric=a.number.union(a.undefined).union(a["null"]).union(a.boolean),a.stringOrNumber=a.string.union(a.number),a.arrayLike=a.array.union(a.args),a.undefinedOrNull=a.undefined.union(a["null"]),a.notUndefinedOrNull=a.undefinedOrNull.complement(),a.primitive=a.undefinedOrNull.union(a.boolean).union(a.string).union(a.number),a.nonPrimitive=a.primitive.complement(),a.alwaysFalsy=a.undefinedOrNull,a.potentiallyTruthy=a.alwaysFalsy.complement(),a.potentiallyFalsy=a.alwaysFalsy.union(a.number).union(a.string).union(a.boolean),a.alwaysTruthy=a.potentiallyFalsy.complement(),a}()}.call(this),a.exports},b["./jsast"]=function(){var a={exports:this},c=this;return function(){"use strict";function a(a){var b;return b=t(a),b.indent=A(b.indent)+1,b}function d(a){function b(c){var d,e,f;f=String(c),e=f.split(/(?:\r\n?|[\n\u2028\u2029])/g),1===e.length?b.column=A(b.column)+A(e[0].length):(d=e.length,b.line=A(b.line)+(A(d)-1),b.column=A(e[A(d)-1].length)+1),a(f)}return b.line=1,b.column=1,b.indent=function(c){a($(c)),b.column=A(b.column)+A(c)},b}function e(a){var b;return b=d(a)}function f(){var a,b;return a=[],b=d(function(b){a.push(b)}),b.toString=function(){var b;switch(a.length){case 0:return"";case 1:return a[0];default:return b=a.join(""),a.splice(0,a.length,b),b}},b}function g(a,b,c){var d;if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+F(a));if("number"!=typeof b)throw TypeError("Expected column to be a Number, got "+F(b));if(null==c)c=void 0;else if("string"!=typeof c&&"number"!=typeof c)throw TypeError("Expected file to be one of String or Number or undefined, got "+F(c));if(d={line:a,column:b},c){if("string"!=typeof c)throw TypeError("Must provide a valid string for file");d.file=c}return d}function h(a,b){var c,d,e,f,g,h,i;if(!w(a))throw TypeError("Expected array to be an Array, got "+F(a));if("function"!=typeof b)throw TypeError("Expected walker to be a Function, got "+F(b));for(f=!1,c=[],d=0,e=a.length;e>d;++d)g=a[d],h=b(g),null==h&&(h=g.walk(b)),g!==h&&(f=!0),c.push(h);return i=c,f?i:a}function i(a){return null!=a?A(a)-1:null}function j(a,b){var c,d,e,f,g,h,j,k,l,m,n;for(h=C.call(arguments,3),j=i(a),k=!1,d=h.length;d--&&(g=h[d],!g||g instanceof gb||w(g)&&0===g.length);)h.pop();for(c=[],d=0,e=h.length;e>d;++d)g=h[d],c.push(db(g,null,j));for(n=c,f=!1,d=0,e=n.length;e>d;++d)if(m=n[d],n.length>50||-1!==m.indexOf("\n")){f=!0;break}if(l=f){for(c=[],d=0,e=n.length;e>d;++d)m=n[d],c.push("  "+D(m.split("\n").join("\n  ")));return n=c,D(b)+"(\n"+D(n.join(",\n"))+")"}return D(b)+"("+D(n.join(", "))+")"}function k(a,b,c){var d,e,f,g,h;if(!w(a))throw TypeError("Expected array to be an Array, got "+F(a));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected keepTrailing to be a Boolean, got "+F(c));if(0===a.length)return a;for(h=[],g=-1,e=0,d=a.length;d>e;++e)f=a[e],g=f instanceof gb?e:-1,h.push(l(f,b));return c||-1===g||h.splice(g,1/0),h}function l(a,b){return w(a)?k(a):a instanceof gb?b:a}function m(a,b){if(b instanceof fb)throw Error("Cannot convert "+F(b)+" to a Const");return b instanceof RegExp?jb(a,b.source,b.flags):Q(a,b)}function n(a){if("number"!=typeof a)throw TypeError("Expected value to be a Number, got "+F(a));return 0>a||0===a&&0>1/a}function o(a,b){var c,d,e,f,g;for(e=[],c=E(a),d=c.length;d--;){if(f=c[d],v(f.name,e))throw Error("Duplicate parameter: "+D(f.name));e.push(f.name)}for(c=E(b),d=c.length;d--;){if(g=c[d],v(g,e))throw Error("Duplicate variable: "+D(g));e.push(g)}}function p(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;for(m=a.minify,g=E(c),h=0,i=g.length;i>h;++h)k=g[h],m||b.indent(a.indent),b(rb(k)),b(";"),f=!1,m||(b(a.linefeed||"\n"),f=!0);if(A(d.length)>0){for(j=0,m||(b.indent(a.indent),j=4+2*A(a.indent)),b("var "),g=E(d.sort(function(a,b){return s(a.toLowerCase(),b.toLowerCase())||s(a,b)})),l=0,i=g.length;i>l;++l)o=g[l],n=qb(d[l]),l>0&&(m?b(","):j+2+n.length<80?(b(", "),j+=2):(b(","),b(a.linefeed||"\n"),b.indent(a.indent),b("    "),j=4+2*A(a.indent))),b(n),j+=n.length;b(";"),f=!1,m||(b(a.linefeed||"\n"),f=!0)}e.isNoop()||(m||b.indent(a.indent),e.compileAsStatement(a,f,b),m||b(a.linefeed||"\n"))}function q(b,c,d,e,f,g,h){var i,j,k,l,m;for(c("function"),l=b.minify,l&&null==d||c(" "),null!=d&&d.compile(b,2,!1,c),c("("),i=E(e),k=0,j=i.length;j>k;++k)m=i[k],k>0&&(c(","),l||c(" ")),m.compile(b,2,!1,c);return c(")"),l||c(" "),c("{"),(g.length||f.length||!h.isNoop())&&(l||c(b.linefeed||"\n"),p(a(b),c,f,g,h,!l),l||c.indent(b.indent)),c("}")}function r(a){var b,c,d,e,f;if(null==a)return[];if(w(a)){for(b=[],c=E(a),d=0,e=c.length;e>d;++d)f=c[d],b.push(Y(f));return b}throw Error("Expected an array, got "+F(a))}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb;s=function(a,b){var c;if(a===b)return 0;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a?-1:1},t="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},u=function(a,b){var c;for(c in b)B.call(b,c)&&(a[c]=b[c]);return a},v="function"==typeof Array.prototype.indexOf?function(){var a;return a=Array.prototype.indexOf,function(b,c){return-1!==a.call(c,b)}}():function(a,b){var c,d;for(d=+b.length,c=-1;++c<d;)if(a===b[c]&&c in b)return!0;return!1},w="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),x=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a},y=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>=a},z=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+F(a));return a.displayName||a.name||""},A=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+F(a));return a},B=Object.prototype.hasOwnProperty,C=Array.prototype.slice,D=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+F(a))},E=function(a){if(null==a)throw TypeError("Expected an object, got "+F(a));return w(a)?a:"string"==typeof a?a.split(""):C.call(a)},F=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),vb=b("util"),null!=vb&&(db=vb.inspect),ib=b("./utils").padLeft,G=b("./jsutils"),eb=G.isAcceptableIdent,rb=G.toJSSource,$=function(){var a;return a=[""],function(b){var c,d;if(A(b)>=a.length)for(d=a[a.length-1],c=a.length,A(b);b>=c;++c)d=D(d)+"  ",a.push(d);return a[b]}}(),c.Node=fb=function(){function a(){var c;throw c=this instanceof a?this:t(b),Error("Node cannot be instantiated directly")}var b;return b=a.prototype,a.displayName="Node",b.toString=function(a){var b;return null==a&&(a={}),b=f(),this.compileAsStatement(u({indent:0,bare:!0},a),!0,b),b.toString()},b.compile=function(){throw Error("Not implemented: "+z(this.constructor)+".compile()")},b.maybeToStatement=function(){return"function"==typeof this.toStatement?this.toStatement():this},b.isConst=function(){return!1},b.isNoop=function(){return!1},b.constValue=function(){throw Error(D(this.constructor.name)+" has no const value")},b.isLarge=function(){return!0},b.isSmall=function(){return!this.isLarge()},b.mutateLast=function(){return this},b.exitType=function(){return null},b.last=function(){return this},b.toJSON=function(){return[this.constructor.name,this.pos.line,this.pos.column,this.pos.file||0].concat(E(this._toJSON()))},b._toJSON=function(){return[]},a}(),c.Expression=V=function(a){function b(){var a;throw a=this instanceof b?this:t(c),Error("Expression cannot be instantiated directly")}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Expression","function"==typeof a.extended&&a.extended(b),c.compileAsBlock=function(a,b,c,d){this.compile(a,b,c,d)},c.compileAsStatement=function(a,b,c){"function"==typeof this.toStatement?this.toStatement().compileAsStatement(a,b,c):(this.compile(a,1,b,c),c(";"))},c.isLarge=function(){return!1},c.mutateLast=function(a){return a(this)},b}(fb),c.Statement=mb=function(a){function b(){var a;throw a=this instanceof b?this:t(d),Error("Expression cannot be instantiated directly")}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Statement","function"==typeof a.extended&&a.extended(b),d.compileAsStatement=function(a,b,c){return this.compile(a,1,b,c)},b}(fb),c.Access=function(a,b){var c,d,e,f,g;for(f=C.call(arguments,2),g=b,c=0,d=f.length;d>c;++c)e=f[c],g=J(a,g,".",e);return g},c.Arguments=H=function(a){function b(a){var d;if(d=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));return d.pos=a,d}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Arguments","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column,this.pos.file),d("arguments")},c.compileAsBlock=function(a,b,c,d){gb(this.pos).compileAsBlock(a,b,c,d)},c.walk=function(){return this},c.isNoop=function(){return!0},c.inspect=function(a){return j(a,"Arguments",this.pos)},b.fromJSON=function(a,c,d){return b(g(a,c,d))},b}(V),c.Arr=I=function(b){function c(a,d){var e,g;if(g=this instanceof c?this:t(f),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(g.pos=a,null==d)d=[];else{if(!w(d))throw TypeError("Expected elements to be an Array, got "+F(d));for(e=d.length;e--;)if(!(d[e]instanceof b))throw TypeError("Expected "+("elements["+e+"]")+" to be a "+z(b)+", got "+F(d[e]))}return g.elements=d,g}function d(b,c,d,e,f){var g,h,i,j,k;for(h=a(c),g=E(b),i=0,k=g.length;k>i;++i)j=g[i],f(c.linefeed||"\n"),f.indent(h.indent),j.compile(h,3,!1,f),k-1>i&&f(",");f(c.linefeed||"\n"),f.indent(c.indent)}function e(a,b,c,d,e){var f,g,h,i;for(f=E(a),h=0,g=f.length;g>h;++h)i=f[h],h>0&&(e(","),b.minify||e(" ")),i.compile(b,3,!1,e)}var f,i;return i=b.prototype,f=c.prototype=t(i),f.constructor=c,c.displayName="Arr","function"==typeof b.extended&&b.extended(c),f.compile=function(a,b,c,f){var g,h;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(g=a.sourceMap)&&g.add(f.line,f.column,this.pos.line,this.pos.column),f("["),h=!a.minify&&this.shouldCompileLarge()?d:e,h(this.elements,a,b,c,f),f("]"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},f.compileAsBlock=function(a,b,c,d){return L(this.pos,this.elements).compileAsBlock(a,b,c,d)},f.compileAsStatement=function(a,b,c){M(this.pos,this.elements).compile(a,1,b,c)},f.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},f.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},f.isLarge=function(){var a,b;return b=this,null==(a=this._isLarge)?this._isLarge=A(this.elements.length)>4||function(){var a,c,d,e;for(d=!1,a=E(b.elements),c=a.length;c--;)if(e=a[c],!e.isSmall()){d=!0;break}return d}():a},f.isNoop=function(){var a,b,c,d,e;if(null==(d=this._isNoop)){for(b=!0,a=E(this.elements),c=a.length;c--;)if(e=a[c],!e.isNoop()){b=!1;break}return this._isNoop=b}return d},f.walk=function(a){var b;return b=h(this.elements,a),this.elements!==b?c(this.pos,b):this},f.inspect=function(a){return j(a,"Arr",this.pos,this.elements)},f._toJSON=function(){return k(this.elements,0)},c.fromJSON=function(a,b,d){var e;return e=C.call(arguments,3),c(g(a,b,d),r(e))},c}(V),c.Assign=function(a,b,c){return J(a,b,"=",c)},c.BinaryChain=function(a,b){var c,d,e,f,g,h,i,j;if(f=C.call(arguments,2),"+"===b)for(h=f.length-2;h>=0;--h)i=f[h],j=f[h+1],("string"==typeof i||i instanceof Q&&"string"==typeof i.value)&&("string"==typeof j||j instanceof Q&&"string"==typeof j.value)&&f.splice(h,2,D("string"==typeof i?i:i.value)+D("string"==typeof j?j:j.value));for(g=f[0],c=1,d=f.length;d>c;++c)e=f[c],g=J(a,g,b,e);return g},c.And=function(a){var b,c,d,e;if(c=C.call(arguments,1),0===c.length)return Q(a,!0);for(d=c[0],e=1,b=c.length;b>e;++e)d=J(a,d,"&&",c[e]);return d},c.Or=function(a){var b,c,d,e;if(c=C.call(arguments,1),0===c.length)return Q(a,!1);for(d=c[0],e=1,b=c.length;b>e;++e)d=J(a,d,"||",c[e]);return d},c.Binary=J=function(a){function b(c,d,f,g){var h;if(h=this instanceof b?this:t(e),"object"!=typeof c||null===c)throw TypeError("Expected pos to be an Object, got "+F(c));if(h.pos=c,null==d&&(d=gb(c)),"string"!=typeof f)throw TypeError("Expected op to be a String, got "+F(f));if(h.op=f,null==g&&(g=gb(c)),!B.call(k,f))throw Error("Unknown binary operator: "+D(rb(f)));return d instanceof a||(d=m(c,d)),g instanceof a||(g=m(c,g)),h.left=d,h.right=g,h}function c(a,b,c,d,e,f,g){var h,i,j;h=c instanceof Q&&"string"==typeof c.value&&eb(c.value),j=A(e)>18,j&&g("("),b instanceof Q&&"number"==typeof b.value?(i=rb(b.value),n(b.value)||!isFinite(b.value)?(g("("),g(i),g(")")):(g(i),h&&-1===i.indexOf("e")&&-1===i.indexOf(".")&&g("."))):b.isConst()&&void 0===b.constValue()?(g("("),(b instanceof Q?b:Q(b.pos,void 0)).compile(d,2,!1,g),g(")")):b.compile(d,18,f,g),h?(g("."),g(c.value)):(g("["),c.compile(d,2,!1,g),g("]")),j&&g(")")}function d(a,c,d,e,f,g,h){var j,l,m,n;l=k[a],j=i[l],n="paren"===j?!x(f,l):!y(f,l),n&&h("("),c.compile(e,"right"===j&&c instanceof b&&k[c.op]===l?A(l)+1:l,g&&!n,h),m=!e.minify||/^\w/.test(a),m&&h(" "),h(a),m&&h(" "),d.compile(e,"left"===j&&d instanceof b&&k[d.op]===l?A(l)+1:l,!1,h),n&&h(")")}var e,f,h,i,k;return f=a.prototype,e=b.prototype=t(f),e.constructor=b,b.displayName="Binary","function"==typeof a.extended&&a.extended(b),e.compile=function(a,b,e,f){var g,h;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(g=a.sourceMap)&&g.add(f.line,f.column,this.pos.line,this.pos.column),h="."===this.op?c:d,h(this.op,this.left,this.right,a,b,e,f),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},e.compileAsBlock=function(a,b,c,d){var e;B.call(h,this.op)||"."===(e=this.op)||"&&"===e||"||"===e?f.compileAsBlock.call(this,a,b,c,d):L(this.pos,[this.left,this.right]).compileAsBlock(a,b,c,d)},e.compileAsStatement=function(a,b,c){var d,e,g;d=this,e=this.left,g=this.op,B.call(h,g)?f.compileAsStatement.call(this,a,b,c):"&&"===this.op?cb(this.pos,this.left,this.right).compileAsStatement(a,b,c):"||"===this.op?cb(this.pos,ub(this.pos,"!",this.left),this.right).compileAsStatement(a,b,c):"."===g?f.compileAsStatement.call(this,a,b,c):M(this.pos,[this.left,this.right]).compileAsStatement(a,b,c)},h={"=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"<<=":!0,">>=":!0,">>>=":!0,"&=":!0,"^=":!0,"|=":!0},k={".":18,"*":15,"/":15,"%":15,"+":14,"-":14,"<<":13,">>":13,">>>":13,"<":12,"<=":12,">":12,">=":12,"in":12,"instanceof":12,"==":11,"!=":11,"===":11,"!==":11,"&":9,"^":10,"|":8,"&&":7,"||":6,"=":4,"+=":4,"-=":4,"*=":4,"/=":4,"%=":4,"<<=":4,">>=":4,">>>=":4,"&=":4,"^=":4,"|=":4},i={11:"paren",12:"paren",14:"left",15:"left",9:"none",8:"none",10:"none",13:"left",4:"right"},e.isLarge=function(){var a;return null==(a=this._isLarge)?this._isLarge=!this.left.isSmall()||!this.right.isSmall():a},e.isSmall=function(){var a;return null==(a=this._isSmall)?this._isSmall=this.left.isSmall()&&this.right.isSmall():a},e.isNoop=function(){var a;return null==(a=this._isNoop)?this._isNoop=!B.call(h,this.op)&&"."!==this.op&&this.left.isNoop()&&this.right.isNoop():a},e.walk=function(a){var c,d,e,f;return d=!1,e=null!=(c=a(this.left))?c:this.left.walk(a),f=null!=(c=a(this.right))?c:this.right.walk(a),this.left!==e||this.right!==f?b(this.pos,e,this.op,f):this},e.inspect=function(a){return j(a,"Binary",this.pos,this.left,this.op,this.right)},e._toJSON=function(){var a;return a=[l(this.left,0),this.op],l(this.right)&&a.push.apply(a,E(this.right.toJSON())),a},b.fromJSON=function(a,c,d,e,f){var h;return h=C.call(arguments,5),b(g(a,c,d),Y(e),f,Y(h))},b}(V),c.BlockStatement=M=function(b){function c(a,b,e){var f,g,h,i,j,k,l;if(i=this instanceof c?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(i.pos=a,null==b)b=[];else{if(!w(b))throw TypeError("Expected body to be an Array, got "+F(b));for(f=b.length;f--;)if(!(b[f]instanceof fb))throw TypeError("Expected "+("body["+f+"]")+" to be a "+z(fb)+", got "+F(b[f]))}if(null==e)e=null;else if(!(e instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(e));for(i.label=e,k=[],g=0,h=b.length;h>g&&(j=b[g],l=j.maybeToStatement(),!(l instanceof c)||l.label||l.pos.file!==a.file&&l.pos.file?l instanceof gb||k.push(l):k.push.apply(k,E(l.body)),null==l.exitType());++g);switch(k.length){case 0:return gb(a);case 1:return a.file&&!k[0].pos.file&&(k[0].pos.file=a.file),k[0]}return i.body=k,i}var d,e;return e=b.prototype,d=c.prototype=t(e),d.constructor=c,c.displayName="BlockStatement","function"==typeof b.extended&&b.extended(c),d.compile=function(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p;if(1!==c)throw Error("Cannot compile a statement except on the Block level");for(f=[],g=E(this.body),h=0,i=g.length;i>h;++h)o=g[h],o.isNoop()||f.push(o);for(p=f,null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(j=b.sourceMap)&&j.add(e.line,e.column,this.pos.line,this.pos.column),k=null!=this.label?a(b):b,n=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),d=!1,e(":"),n||e(" "),e("{"),n||(e(b.linefeed||"\n"),e.indent(k.indent),d=!0)),l=0,i=p.length;i>l;++l)m=p[l],l>0&&!n&&(e(b.linefeed||"\n"),e.indent(k.indent),d=!0),m.compileAsStatement(k,d,e),d=!1;null!=this.label&&(n||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}")),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},d.walk=function(a){var b,c,d;return c=h(this.body,a),d=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,this.body!==c||this.label!==d?K(this.pos,c,d):this},d.mutateLast=function(a,b){var c,d,e;return d=this.last(),e=d.mutateLast(a,b),d!==e?(c=C.call(this.body,0,-1),c.push(e),K(this.pos,c)):this},d.exitType=function(){return this.last().exitType()},d.last=function(){var a;return(a=this.body)[A(a.length)-1]},d.isNoop=function(){var a,b,c,d,e;if(null==(d=this._isNoop)){for(b=!0,a=E(this.body),c=a.length;c--;)if(e=a[c],!e.isNoop()){b=!1;break}return this._isNoop=b}return d},d.inspect=function(a){return j(a,"BlockStatement",this.pos,this.body,this.label)},d._toJSON=function(){return[this.label||0].concat(E(this.body))},c.fromJSON=function(a,b,d,e){var f;return f=C.call(arguments,4),c(g(a,b,d),r(f),e?Y(e):null)},c}(mb),c.BlockExpression=L=function(a){function b(d,e){var f,g,h,i,j,k;if(g=this instanceof b?this:t(c),"object"!=typeof d||null===d)throw TypeError("Expected pos to be an Object, got "+F(d));if(g.pos=d,null==e)e=[];else{if(!w(e))throw TypeError("Expected body to be an Array, got "+F(e));
for(f=e.length;f--;)if(!(e[f]instanceof a))throw TypeError("Expected "+("body["+f+"]")+" to be a "+z(a)+", got "+F(e[f]))}for(k=[],h=0,j=e.length;j>h;++h)i=e[h],h!==j-1&&!i instanceof gb||(i instanceof b&&(i.pos.file===d.file||!i.pos.file)?(k.push.apply(k,E(i.body)),j-1>h&&k[k.length-1]instanceof gb&&k.pop()):i instanceof gb||k.push(i));switch(k.length){case 0:return gb(d);case 1:return d.file&&!k[0].pos.file&&(k[0].pos.file=d.file),k[0]}return g.body=k,g}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="BlockExpression","function"==typeof a.extended&&a.extended(b),c.toStatement=function(){return M(this.pos,this.body)},c.compile=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if(1===b)this.toStatement().compile(a,b,c,d);else{for(e=[],f=E(this.body),i=0,k=f.length;k>i;++i)l=f[i],l.isNoop()&&i!==k-1||e.push(l);for(m=e,null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(h=a.sourceMap)&&h.add(d.line,d.column,this.pos.line,this.pos.column),n=A(b)>2&&m.length>1,n&&d("("),i=0,g=m.length;g>i;++i)j=m[i],i>0&&(d(","),a.minify||d(" ")),j.compile(a,n?3:b,!1,d);n&&d(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()}},c.compileAsBlock=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if(1===b)this.compile(a,b,c,d);else{for(e=[],f=E(this.body),i=0,k=f.length;k>i;++i)l=f[i],l.isNoop()||e.push(l);for(m=e,null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(h=a.sourceMap)&&h.add(d.line,d.column,this.pos.line,this.pos.column),n=A(b)>2&&m.length>1,n&&d("("),i=0,g=m.length;g>i;++i)j=m[i],i>0&&d(", "),j.compileAsBlock(a,n?3:b,!1,d);n&&d(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()}},c.isLarge=function(){var a,b;return b=this,null==(a=this._isLarge)?this._isLarge=A(this.body.length)>4||function(){var a,c,d,e;for(d=!1,a=E(b.body),c=a.length;c--;)if(e=a[c],e.isLarge()){d=!0;break}return d}():a},c.isSmall=function(){return!1},c.isNoop=function(){var a,b,c,d,e;if(null==(d=this._isNoop)){for(b=!0,a=E(this.body),c=a.length;c--;)if(e=a[c],!e.isNoop()){b=!1;break}return this._isNoop=b}return d},c.walk=M.prototype.walk,c.last=function(){var a;return(a=this.body)[A(a.length)-1]},c.inspect=function(a){return j(a,"BlockExpression",this.pos,this.body)},c._toJSON=function(){return this.body},b.fromJSON=function(a,c,d){var e;return e=C.call(arguments,3),b(g(a,c,d),r(e))},b}(V),K=c.Block=function(a,b,c){var d;if(null==b)b=[];else{if(!w(b))throw TypeError("Expected body to be an Array, got "+F(b));for(d=b.length;d--;)if(!(b[d]instanceof fb))throw TypeError("Expected "+("body["+d+"]")+" to be a "+z(fb)+", got "+F(b[d]))}if(null==c)c=null;else if(!(c instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(c));return 0===b.length?gb(a):null==c&&function(){var a,c,d;for(a=!0,c=b.length;c--;)if(d=b[c],!(d instanceof V)){a=!1;break}return a}()?L(a,b):M(a,b,c)},c.Break=N=function(a){function b(a,d){var e;if(e=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,null==d)d=null;else if(!(d instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(d));return e.label=d,e}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Break","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;if(1!==b)throw Error("Cannot compile a statement except on the Block level");null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),d("break"),null!=this.label&&(d(" "),this.label.compile(a,2,!1,d)),d(";"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile(this.pos.file)},c.walk=function(){return this},c.exitType=function(){return"break"},c.walk=function(a){var c,d;return d=null!=this.label?null!=(c=a(this.label))?c:this.label.walk(a):this.label,d!==this.label?b(this.pos,d):this},c.inspect=function(a){return j(a,"Break",this.pos,this.label)},c.isLarge=function(){return!1},c._toJSON=function(){return null!=this.label?[this.label]:[]},b.fromJSON=function(a,c,d,e){return b(g(a,c,d),e?Y(e):null)},b}(mb),c.Call=O=function(b){function c(a,d,e,g){var h,i;if(i=this instanceof c?this:t(f),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(i.pos=a,null==d)d=gb(a);else if(!(d instanceof b))throw TypeError("Expected func to be a "+z(b)+", got "+F(d));if(i.func=d,null==e)e=[];else{if(!w(e))throw TypeError("Expected args to be an Array, got "+F(e));for(h=e.length;h--;)if(!(e[h]instanceof b))throw TypeError("Expected "+("args["+h+"]")+" to be a "+z(b)+", got "+F(e[h]))}if(i.args=e,null==g)g=!1;else if("boolean"!=typeof g)throw TypeError("Expected isNew to be a Boolean, got "+F(g));return i.isNew=g,i}function d(b,c,d,e,f){var g,h,i,j,k;for(f("("),h=a(c),g=E(b),i=0,k=g.length;k>i;++i)j=g[i],f(c.linefeed||"\n"),f.indent(h.indent),j.compile(h,3,!1,f),k-1>i&&f(",");f(c.linefeed||"\n"),f.indent(c.indent),f(")")}function e(a,b,c,d,e){var f,g,h,i;for(e("("),f=E(a),i=0,g=f.length;g>i;++i)h=f[i],i>0&&(e(","),b.minify||e(" ")),h.compile(b,3,!1,e);e(")")}var f,i;return i=b.prototype,f=c.prototype=t(i),f.constructor=c,c.displayName="Call","function"==typeof b.extended&&b.extended(c),f.compile=function(a,b,c,f){var g,h,i;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(g=a.sourceMap)&&g.add(f.line,f.column,this.pos.line,this.pos.column),i=A(b)>18||!this.isNew&&(this.func instanceof Z||this.func instanceof J&&"."===this.func.op&&this.func.left instanceof Z),i&&f("("),this.isNew&&f("new "),this.func.compile(a,this.isNew?19:18,c&&!i&&!this.isNew,f),h=!a.minify&&this.shouldCompileLarge()?d:e,h(this.args,a,b,c,f),i&&f(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},f.shouldCompileLarge=function(){var a,b,c,d,e;if(A(this.args.length)>4)return!0;for(d=!1,a=E(this.args),c=a.length,b=c-2;b>=0;--b)if(e=a[b],!e.isSmall()){d=!0;break}return d},f.hasLargeArgs=function(){var a,b,c,d,e;if(null==(c=this._hasLargeArgs)){if(A(this.args.length)>4)return this._hasLargeArgs=!0;for(d=!1,a=E(this.args),b=a.length;b--;)if(e=a[b],!e.isSmall()){d=!0;break}return this._hasLargeArgs=d}return c},f.isLarge=function(){return this.func.isLarge()||this.hasLargeArgs()},f.isSmall=function(){var a;if(null!=(a=this._isSmall))return a;if(!this.func.isSmall())return this._isSmall=!1;switch(this.args.length){case 0:return this._isSmall=!0;case 1:return this._isSmall=this.args[0].isSmall();default:return this._isSmall=!1}},f.walk=function(a){var b,d,e;return e=null!=(b=a(this.func))?b:this.func.walk(a),d=h(this.args,a),this.func!==e||this.args!==d?c(this.pos,e,d,this.isNew):this},f.inspect=function(a){return j(a,"Call",this.pos,this.func,this.args,this.isNew)},f._toJSON=function(){return[l(this.func,0),this.isNew?1:0].concat(E(k(this.args,0)))},c.fromJSON=function(a,b,d,e,f){var h;return h=C.call(arguments,5),c(g(a,b,d),Y(e),r(h),!!f)},c}(V),c.Comment=P=function(a){function b(a,d){var e;if(e=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,"string"!=typeof d)throw TypeError("Expected text to be a String, got "+F(d));if(e.text=d,"/*"!==d.substring(0,2))throw Error("Expected text to start with '/*'");if("*/"!==d.slice(-2))throw Error("Expected text to end with '*/'");return e}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Comment","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e,f,g,h,i;for(i=this.text.split("\n"),e=E(i),g=0,f=e.length;f>g;++g)h=e[g],g>0&&(d(a.linefeed||"\n"),a.minify||d.indent(a.indent)),d(h)},c.isConst=function(){return!0},c.constValue=function(){},c.isNoop=function(){return!1},c.walk=function(){return this},c.inspect=function(){return j("Comment",this.pos,this.text)},c._toJSON=function(){return[this.text]},b.fromJSON=function(a,c,d,e){return b(g(a,c,d),e)},b}(mb),c.Const=Q=function(a){function b(a,d){var e;if(e=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,null!=d&&"boolean"!=typeof d&&"number"!=typeof d&&"string"!=typeof d)throw TypeError("Expected value to be one of undefined or null or Boolean or Number or String, got "+F(d));return e.value=d,e}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Const","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e,f,g;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),f=this.value,void 0===f&&null!=a.undefinedName?d(a.undefinedName):(g=A(b)>=17&&(void 0===f||"number"==typeof f&&!isFinite(f)),g&&d("("),d(rb(f)),g&&d(")")),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},c.compileAsBlock=function(a,b,c,d){gb(this.pos).compileAsBlock(a,b,c,d)},c.isConst=function(){return!0},c.isNoop=b.prototype.isConst,c.constValue=function(){return this.value},c.walk=function(){return this},c.inspect=function(a){return"Const("+D(db(this.value,null,i(a)))+")"},c._toJSON=function(){return"number"!=typeof this.value||isFinite(this.value)?0===this.value&&n(this.value)?[0,2]:void 0===this.value?[]:[this.value]:[A(this.value)>0?1:A(this.value)<0?-1:0,1]},b.fromJSON=function(a,c,d,e,f){return b(g(a,c,d),1===f?A(e)/0:0===e&&2===f?-0:e)},b}(V),c.Continue=R=function(a){function b(a,d){var e;if(e=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,null==d)d=null;else if(!(d instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(d));return e.label=d,e}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Continue","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;if(1!==b)throw Error("Cannot compile a statement except on the Block level");return null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),d("continue"),null!=this.label&&(d(" "),this.label.compile(a,2,!1,d)),d(";"),null!=a.sourceMap&&this.pos.file?a.sourceMap.popFile():void 0},c.walk=function(){return this},c.exitType=function(){return"continue"},c.isLarge=function(){return!1},c.walk=function(a){var c,d;return d=null!=this.label?null!=(c=a(this.label))?c:this.label.walk(a):this.label,d!==this.label?b(this.pop,d):this},c.inspect=function(a){return j(a,"Continue",this.pos,this.label)},c._toJSON=function(){return null!=this.label?[this.label]:[]},b.fromJSON=function(a,c,d,e){return b(g(a,c,d),e?Y(e):null)},b}(mb),c.Debugger=S=function(a){function b(a){var d;if(d=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));return d.pos=a,d}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Debugger","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;if(1!==b)throw Error("Cannot compile a statement except on the Block level");return null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column,this.pos.file),d("debugger;")},c.walk=function(){return this},c.isLarge=function(){return!1},c.inspect=function(a){return j(a,"Debugger",this.pos)},b.fromJSON=function(a,c,d){return b(g(a,c,d))},b}(mb),c.DoWhile=T=function(b){function c(a,b,e,f){var g;if(g=this instanceof c?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(g.pos=a,null==b)b=gb(a);else if(!(b instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(b));if(null==e)e=gb(a);else if(!(e instanceof V))throw TypeError("Expected test to be a "+z(V)+", got "+F(e));if(g.test=e,null==f)f=null;else if(!(f instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(f));return g.label=f,g.body=b.maybeToStatement(),e.isConst()&&!e.constValue()?K(a,[g.body],f):g}var d,e;return e=b.prototype,d=c.prototype=t(e),d.constructor=c,c.displayName="DoWhile","function"==typeof b.extended&&b.extended(c),d.compile=function(b,c,d,e){var f,g;if(1!==c)throw Error("Cannot compile a statement except on the Block level");null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(f=b.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),g=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),d=!1,e(":"),g||e(" ")),e("do"),this.body.isNoop()?e(";"):(g||e(" "),e("{"),g||(e(b.linefeed||"\n"),e.indent(A(b.indent)+1),d=!0),this.body.compileAsStatement(a(b),d,e),d=!1,g||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}")),g||e(" "),e("while"),g||e(" "),e("("),this.test.compile(b,2,!1,e),e(");"),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},d.walk=function(a){var b,d,e,f;return d=null!=(b=a(this.body))?b:this.body.walk(a),f=null!=(b=a(this.test))?b:this.test.walk(a),e=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,d!==this.body||f!==this.test||e!==this.label?c(this.pos,d,f,e):this},d.inspect=function(a){return j(a,"DoWhile",this.pos,this.body,this.test,this.label)},d._toJSON=function(){return[this.label||0,l(this.test,0),l(this.body,0)]},c.fromJSON=function(a,b,d,e,f,h){return c(g(a,b,d),Y(h),Y(f),e?Y(e):null)},c}(mb),c.Eval=U=function(a){function b(d,e){var f;if(f=this instanceof b?this:t(c),"object"!=typeof d||null===d)throw TypeError("Expected pos to be an Object, got "+F(d));return f.pos=d,null==e&&(e=gb(d)),e instanceof a||(e=m(d,e)),f.code=e,f}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Eval","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),this.code instanceof Q?d(String(this.code.value)):(d("eval("),this.code.compile(a,3,!1,d),d(")")),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},c.walk=function(a){var c,d;return d=null!=(c=a(this.code))?c:this.code.walk(a),d!==this.code?b(this.pops,d):this},c.inspect=function(a){return j(a,"Eval",this.pos,this.code)},c._toJSON=function(){return[l(this.code,0)]},b.fromJSON=function(a,c,d,e){return b(g(a,c,d),Y(e))},b}(V),c.For=W=function(b){function c(a,b,e,f,g,h){var i;if(i=this instanceof c?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(i.pos=a,null==b)b=gb(a);else if(!(b instanceof V))throw TypeError("Expected init to be a "+z(V)+", got "+F(b));if(i.init=b,null==e&&(e=Q(a,!0)),null==f)f=gb(a);else if(!(f instanceof V))throw TypeError("Expected step to be a "+z(V)+", got "+F(f));if(i.step=f,!(g instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(g));if(null==h)h=null;else if(!(h instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(h));return i.label=h,e instanceof V||(e=m(a,e)),e.isConst()&&!e.constValue()?b:(i.test=e,i.body=g.maybeToStatement(),i)}var d,e;return e=b.prototype,d=c.prototype=t(e),d.constructor=c,c.displayName="For","function"==typeof b.extended&&b.extended(c),d.compile=function(b,c,d,e){var f,g,h;if(1!==c)throw Error("Cannot compile a statement except on the Block level");h=this.test.isConst()&&"boolean"!=typeof this.test.constValue()?Q(this.pos,!!this.test.constValue()):this.test,null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(f=b.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),g=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),e(":"),g||e(" ")),this.init.isNoop()&&this.step.isNoop()?(e("while"),g||e(" "),e("("),h.compile(b,2,!1,e)):(e("for"),g||e(" "),e("("),this.init.isNoop()||this.init.compileAsBlock(b,2,!1,e),e(";"),g||e(" "),h.isConst()&&h.constValue()||h.compile(b,2,!1,e),e(";"),g||e(" "),this.step.isNoop()||this.step.compileAsBlock(b,2,!1,e)),e(")"),this.body.isNoop()?e(";"):(g||e(" "),e("{"),g||(e(b.linefeed||"\n"),e.indent(A(b.indent)+1)),this.body.compileAsStatement(a(b),!g,e),g||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}")),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},d.walk=function(a){var b,d,e,f,g,h;return e=null!=(b=a(this.init))?b:this.init.walk(a),h=null!=(b=a(this.test))?b:this.test.walk(a),g=null!=(b=a(this.step))?b:this.step.walk(a),d=null!=(b=a(this.body))?b:this.body.walk(a),f=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,e!==this.init||h!==this.test||g!==this.step||d!==this.body||f!==this.label?c(this.pos,e,h,g,d,f):this},d.inspect=function(a){return j(a,"For",this.pos,this.init,this.test,this.step,this.body,this.label)},d._toJSON=function(){var a;return a=[this.label||0,l(this.init,0),l(this.test,0),l(this.step,0)],l(this.body)&&a.push.apply(a,E(this.body.toJSON())),a},c.fromJSON=function(a,b,d,e,f,h,i){var j;return j=C.call(arguments,7),c(g(a,b,d),Y(f),Y(h),Y(i),Y(j),e?Y(e):null)},c}(mb),c.ForIn=X=function(b){function c(a,b,e,f,g){var h;if(h=this instanceof c?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(h.pos=a,!(b instanceof _))throw TypeError("Expected key to be a "+z(_)+", got "+F(b));if(h.key=b,null==e)e=gb(line,column);else if(!(e instanceof V))throw TypeError("Expected object to be a "+z(V)+", got "+F(e));if(h.object=e,null==f)f=gb(line,column);else if(!(f instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(f));if(null==g)g=null;else if(!(g instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(g));return h.label=g,h.body=f.maybeToStatement(),h}var d,e;return e=b.prototype,d=c.prototype=t(e),d.constructor=c,c.displayName="ForIn","function"==typeof b.extended&&b.extended(c),d.compile=function(b,c,d,e){var f,g;if(1!==c)throw Error("Cannot compile a statement except on the Block level");null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(f=b.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),g=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),e(":"),g||e(" ")),e("for"),g||e(" "),e("("),this.key.compile(b,2,!1,e),e(" in "),this.object.compile(b,2,!1,e),e(")"),this.body.isNoop()?e(";"):(g||e(" "),e("{"),g||(e(b.linefeed||"\n"),e.indent(A(b.indent)+1)),this.body.compileAsStatement(a(b),!g,e),g||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}")),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},d.walk=function(a){var b,d,e,f,g;return e=null!=(b=a(this.key))?b:this.key.walk(a),g=null!=(b=a(this.object))?b:this.object.walk(a),d=null!=(b=a(this.body))?b:this.body.walk(a),f=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,e!==this.key||g!==this.object||d!==this.body||f!==this.label?c(this.pos,e,g,d):this},d.inspect=function(a){return j(a,"ForIn",this.pos,this.key,this.object,this.body,this.label)},d._toJSON=function(){var a;return a=[this.label||0,this.key,l(this.object,0)],l(this.body)&&a.push.apply(a,E(this.body.toJSON())),a},c.fromJSON=function(a,b,d,e,f,h){var i;return i=C.call(arguments,6),c(g(a,b,d),Y(f),Y(h),Y(i),e?Y(e):null)},c}(mb),qb=function(){function a(a){return"\\u"+D(ib(a.charCodeAt(0).toString(16),4,"0"))}return function(b){if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+F(b));return b.replace(/[\u0000-\u001f\u0080-\uffff]/g,a)}}(),c.Func=Z=function(a){function b(a,c,e,f,g,h){var i,j,k,l;if(l=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(l.pos=a,null==c)c=null;else if(!(c instanceof _))throw TypeError("Expected name to be one of null or "+z(_)+", got "+F(c));if(l.name=c,null==e)e=[];else{if(!w(e))throw TypeError("Expected params to be an Array, got "+F(e));for(i=e.length;i--;)if(!(e[i]instanceof _))throw TypeError("Expected "+("params["+i+"]")+" to be a "+z(_)+", got "+F(e[i]))}if(l.params=e,null==f)f=[];else{if(!w(f))throw TypeError("Expected variables to be an Array, got "+F(f));for(j=f.length;j--;)if("string"!=typeof f[j])throw TypeError("Expected "+("variables["+j+"]")+" to be a String, got "+F(f[j]))}if(l.variables=f,null==g)g=gb(line,column);else if(!(g instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(g));if(l.body=g,null==h)h=[];else{if(!w(h))throw TypeError("Expected declarations to be an Array, got "+F(h));for(k=h.length;k--;)if("string"!=typeof h[k])throw TypeError("Expected "+("declarations["+k+"]")+" to be a String, got "+F(h[k]))}return l.declarations=h,o(e,f),l}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Func","function"==typeof a.extended&&a.extended(b),d.compile=function(a,b,c,d){var e,f;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),f=c&&!this.name,f&&d("("),q(a,d,this.name,this.params,this.declarations,this.variables,this.body),f&&d(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},d.compileAsStatement=function(a,b,c){this.compile(a,1,b,c),b&&this.name||c(";")},d.isLarge=function(){return!0},d.isNoop=function(){return null==this.name},d.walk=function(a){var c,d,e,f;return e=this.name?null!=(c=a(this.name))?c:this.name.walk(a):this.name,f=h(this.params,a),d=this.body.walk(a),e!==this.name||f!==this.params||d!==this.body?b(this.pos,e,f,this.variables,d,this.declarations,this.meta):this},d.inspect=function(a){return j(a,"Func",this.pos,this.name,this.params,this.variables,this.body,this.declarations,this.meta)},d._toJSON=function(){var a;return a=[this.name||0,k(this.params,0),k(this.variables,0),k(this.declarations,0)],l(this.body)&&a.push.apply(a,E(this.body.toJSON())),a},b.fromJSON=function(a,c,d,e,f,h,i){var j;return j=C.call(arguments,7),b(g(a,c,d),e?Y(e):void 0,r(f),h,Y(j),i)},b}(V),c.Ident=_=function(a){function b(a,c,e){var f;if(f=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(f.pos=a,"string"!=typeof c)throw TypeError("Expected name to be a String, got "+F(c));if(f.name=c,null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected allowUnacceptable to be a Boolean, got "+F(e));if(!e&&!eb(c,!0))throw Error("Not an acceptable identifier name: "+c);return f}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Ident","function"==typeof a.extended&&a.extended(b),d.compile=function(a,b,c,d){var e;null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column,this.pos.file),d(qb(this.name))},d.compileAsBlock=function(a,b,c,d){gb(this.pos).compileAsBlock(a,b,c,d)},d.walk=function(){return this},d.inspect=function(a){return j(a,"Ident",this.pos,this.name)},d.isNoop=function(){return!0},d._toJSON=function(){return[this.name]},b.fromJSON=function(a,c,d,e){return b(g(a,c,d),e)},b}(V),c.IfStatement=cb=function(b){function c(a,b,e,f,g){var h;if(h=this instanceof c?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(h.pos=a,null==b)b=gb(a);else if(!(b instanceof V))throw TypeError("Expected test to be a "+z(V)+", got "+F(b));if(null==e)e=gb(a);else if(!(e instanceof fb))throw TypeError("Expected whenTrue to be a "+z(fb)+", got "+F(e));if(null==f)f=gb(a);else if(!(f instanceof fb))throw TypeError("Expected whenFalse to be a "+z(fb)+", got "+F(f));if(null==g)g=null;else if(!(g instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(g));return h.label=g,b instanceof ub&&"!"===b.op&&b.node instanceof ub&&"!"===b.node.op&&(b=b.node.node),b.isConst()?b.constValue()?K(a,[e],g):K(a,[f],g):(e=e.maybeToStatement(),f=f.maybeToStatement(),e instanceof gb?f instanceof gb?b.maybeToStatement():c.call(h,a,ub(b.pos,"!",b),f,e,g):(f instanceof gb&&e instanceof c&&e.whenFalse instanceof gb&&null==e.label?(h.test=J(a,b,"&&",e.test),h.whenTrue=e.whenTrue,h.whenFalse=f):(h.test=b,h.whenTrue=e,h.whenFalse=f),h))}var d,e;return e=b.prototype,d=c.prototype=t(e),d.constructor=c,c.displayName="IfStatement","function"==typeof b.extended&&b.extended(c),d.compile=function(b,d,e,f){var g,h,i,j;if(1!==d)throw Error("Cannot compile a statement except on the Block level");this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsStatement(b,!0,f):c(this.pos,ub(this.test.pos,"!",this.test),this.whenFalse,this.whenTrue,this.label).compile(b,d,e,f):(null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(g=b.sourceMap)&&g.add(f.line,f.column,this.pos.line,this.pos.column),i=b.minify,null!=this.label&&(this.label.compile(b,d,e,f),f(":"),i||f(" ")),f("if"),i||f(" "),f("("),this.test.compile(b,2,!1,f),f(")"),i||f(" "),f("{"),h=a(b),i||(f(b.linefeed||"\n"),f.indent(h.indent)),this.whenTrue.compileAsStatement(h,!i,f),i||(f(b.linefeed||"\n"),f.indent(b.indent)),f("}"),j=this.whenFalse,j.isNoop()||(i||f(" "),f("else"),j instanceof c&&null==j.label?(f(" "),j.compile(b,d,!1,f)):(i||f(" "),f("{"),i||(f(b.linefeed||"\n"),f.indent(h.indent)),j.compileAsStatement(h,!i,f),i||(f(b.linefeed||"\n"),f.indent(b.indent)),f("}"))),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile())},d.walk=function(a){var b,c,d,e,f;return d=null!=(b=a(this.test))?b:this.test.walk(a),f=null!=(b=a(this.whenTrue))?b:this.whenTrue.walk(a),e=null!=(b=a(this.whenFalse))?b:this.whenFalse.walk(a),c=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,d!==this.test||f!==this.whenTrue||e!==this.whenFalse||c!==this.label?ab(this.pos,d,f,e,c):this},d.mutateLast=function(a,b){var c,d;return d=this.whenTrue.mutateLast(a,b),c=this.whenFalse.mutateLast(a,b),d!==this.whenTrue||c!==this.whenFalse?ab(this.pos,this.test,d,c,this.label):this},d.exitType=function(){var a,b;return void 0===this._exitType?(b=this.whenTrue.exitType(),a=this.whenFalse.exitType(),this._exitType=b===a?b:null):this._exitType},d.isNoop=function(){var a;return null==(a=this._isNoop)?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():a},d.inspect=function(a){return j(a,"IfStatement",this.pos,this.test,this.whenTrue,this.whenFalse)},d._toJSON=function(){var a;return a=[this.label||0,l(this.test,0),l(this.whenTrue,0)],l(this.whenFalse)&&a.push.apply(a,E(this.whenFalse.toJSON())),a},c.fromJSON=function(a,b,d,e,f,h){var i;return i=C.call(arguments,6),c(g(a,b,d),Y(f),Y(h),Y(i),e?Y(e):null)},c}(mb),c.IfExpression=bb=function(b){function c(a,d,e,f){var g;if(g=this instanceof c?this:t(h),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(g.pos=a,null==d)d=gb(a);else if(!(d instanceof b))throw TypeError("Expected test to be a "+z(b)+", got "+F(d));return null==e&&(e=gb(a)),null==f&&(f=gb(a)),e instanceof b||(e=m(a,e)),f instanceof b||(f=m(a,f)),d instanceof ub&&"!"===d.op&&d.node instanceof ub&&"!"===d.node.op&&(d=d.node.node),d.isConst()?d.constValue()?e:f:(f instanceof gb&&e instanceof c&&e.whenFalse instanceof gb?(g.test=J(a,d,"&&",e.test),g.whenTrue=e.whenTrue,g.whenFalse=f):(g.test=d,g.whenTrue=e,g.whenFalse=f),g)}function d(a,b,c,d,e,f){var g;g=d.minify,a.compile(d,5,e,f),f(g?"?":" ? "),b.compile(d,5,!1,f),f(g?":":" : "),c.compile(d,5,!1,f)}function e(b,d,f,g,h,i){var j,k,l,m;j=a(g),l=b instanceof c,l&&i("("),b.compile(j,l?2:5,h&&!l,i),l&&i(")"),k=d.isLarge(),k?(i(g.linefeed||"\n"),i.indent(j.indent),i("? ")):i(" ? "),m=d instanceof c,m&&i("("),d.compile(j,m?2:5,!1,i),m&&i(")"),i(g.linefeed||"\n"),i.indent(j.indent),i(": "),f instanceof c?e(f.test,f.whenTrue,f.whenFalse,g,!1,i):f.compile(j,5,!1,i)}var f,h;return f=b.prototype,h=c.prototype=t(f),h.constructor=c,c.displayName="IfExpression","function"==typeof b.extended&&b.extended(c),h.toStatement=function(){return cb(this.pos,this.test,this.whenTrue,this.whenFalse)},h.compile=function(a,b,c,f){var g,h,i;1===b?this.toStatement().compile(a,b,c,f):(null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(g=a.sourceMap)&&g.add(f.line,f.column,this.pos.line,this.pos.column),i=A(b)>5,i&&f("("),h=a.minify||!this.whenTrue.isLarge()&&!this.whenFalse.isLarge()?d:e,h(this.test,this.whenTrue,this.whenFalse,a,!i&&c,f),i&&f(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile())},h.compileAsBlock=function(a,b,c,d){this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsBlock(a,b,c,d):J(this.pos,this.test,"||",this.whenFalse).compileAsBlock(a,b,c,d):this.whenFalse.isNoop()?J(this.pos,this.test,"&&",this.whenTrue).compileAsBlock(a,b,c,d):this.compile(a,b,c,d)},h.isLarge=function(){var a;return null==(a=this._isLarge)?this._isLarge=!this.test.isSmall()||!this.whenTrue.isSmall()||!this.whenFalse.isSmall():a},h.isSmall=function(){return!1},h.isNoop=function(){var a;return null==(a=this._isNoop)?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():a},h.walk=cb.prototype.walk,h.inspect=function(a){return j(a,"IfExpression",this.pos,this.test,this.whenTrue,this.whenFalse)},h._toJSON=function(){var a;return a=[l(this.test,0),l(this.whenTrue,0)],l(this.whenFalse)&&a.push.apply(a,E(this.whenFalse.toJSON())),a},c.fromJSON=function(a,b,d,e,f){var h;return h=C.call(arguments,5),c(g(a,b,d),Y(e),Y(f),Y(h))},c}(V),ab=c.If=function(a,b,c,d,e){if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));return c instanceof mb||d instanceof mb||null!=e?cb(a,b,c,d,e):bb(a,b,c,d)},c.Noop=gb=function(a){function b(a){var c;if(c=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));return c.pos=a,c}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Noop","function"==typeof a.extended&&a.extended(b),d.compileAsStatement=function(){},d.compile=function(a,b,c,d){A(b)>1&&Q(this.pos,void 0).compile(a,b,c,d)},d.isConst=function(){return!0},d.isNoop=b.prototype.isConst,d.constValue=function(){},d.walk=function(){return this},d.mutateLast=function(a,b){return(null!=b?b.noop:void 0)?a(this):this},d.inspect=function(a){return j(a,"Noop",this.pos)},b.fromJSON=function(a,c,d){return b(g(a,c,d))},b}(V),c.Obj=hb=function(b){function c(a,b){var e,f;if(f=this instanceof c?this:t(n),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(f.pos=a,null==b)b=[];else{if(!w(b))throw TypeError("Expected elements to be an Array, got "+F(b));for(e=b.length;e--;)if(!(b[e]instanceof o))throw TypeError("Expected "+("elements["+e+"]")+" to be a "+z(o)+", got "+F(b[e]))}return f.elements=b,d(b),f}function d(a){var b,c,d,e,f;for(e=[],b=E(a),c=b.length;c--;){if(f=b[c],d=f.key,v(d,e))throw Error("Found duplicate key: "+D(rb(d)));e.push(d)}}function e(a){var b;return eb(a)?a:(b=Number(a),b===b&&String(b)===a?a:rb(a))}function f(b,c,d){var f,g,h,i,j,k;for(g=a(c),f=E(b),i=0,k=f.length;k>i;++i)h=f[i],d(c.linefeed||"\n"),d.indent(g.indent),j=h.key,d(e(j)),d(": "),h.value.compile(g,3,!1,d),k-1>i&&d(",");d(c.linefeed||"\n"),d.indent(c.indent)}function i(a,b,c){var d,f,g,h,i,j;if(a.length){for(j=b.minify,j||c(" "),d=E(a),h=0,f=d.length;f>h;++h)g=d[h],h>0&&(c(","),j||c(" ")),i=g.key,c(e(i)),c(":"),j||c(" "),g.value.compile(b,3,!1,c);j||c(" ")}}var k,n,o;return k=b.prototype,n=c.prototype=t(k),n.constructor=c,c.displayName="Obj","function"==typeof b.extended&&b.extended(c),n.compile=function(a,b,c,d){var e,g,h;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),h=c,h&&d("("),d("{"),g=!a.minify&&this.shouldCompileLarge()?f:i,g(this.elements,a,d),d("}"),h&&d(")"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},n.compileAsBlock=function(a,b,c,d){var e;e=this,L(this.pos,function(){var a,b,c,d,f;for(a=[],b=E(e.elements),c=0,d=b.length;d>c;++c)f=b[c],a.push(f.value);return a}()).compileAsBlock(a,b,c,d)},n.compileAsStatement=function(a,b,c){var d;d=this,M(this.pos,function(){var a,b,c,e,f;for(a=[],b=E(d.elements),c=0,e=b.length;e>c;++c)f=b[c],a.push(f.value);
return a}()).compileAsStatement(a,b,c)},n.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},n.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},n.isLarge=function(){var a,b;return b=this,null==(a=this._isLarge)?this._isLarge=A(this.elements.length)>4||function(){var a,c,d,e;for(d=!1,a=E(b.elements),c=a.length;c--;)if(e=a[c],!e.isSmall()){d=!0;break}return d}():a},n.isNoop=function(){var a,b,c,d,e;if(null==(d=this._isNoop)){for(b=!0,a=E(this.elements),c=a.length;c--;)if(e=a[c],!e.isNoop()){b=!1;break}return this._isNoop=b}return d},n.walk=function(a){var b;return b=h(this.elements,a),b!==this.elements?c(this.pos,b):this},n.inspect=function(a){return j(a,"Obj",this.pos,this.elements)},n._toJSON=function(){var a,b,c,d,e,f;for(f=[],a=E(this.elements),b=0,c=a.length;c>b;++b)d=a[b],e=d.pos,f.push(e.line,e.column,e.file,d.key,l(d.value));return f},c.fromJSON=function(a,b,d){var e,f,h,i,j,k,l,m,n;for(f=C.call(arguments,3),m=[],h=0,e=f.length;e>h;h+=5)l=f[h],j=f[h+1],k=f[h+2],i=f[h+3],n=f[h+4],m.push(o(g(l,j,k),i,Y(n)));return c(g(a,b,d),m)},c.Pair=o=function(){function a(d,e,f){var g;if(g=this instanceof a?this:t(c),"object"!=typeof d||null===d)throw TypeError("Expected pos to be an Object, got "+F(d));if(g.pos=d,"string"!=typeof e)throw TypeError("Expected key to be a String, got "+F(e));return g.key=e,null==f&&(f=gb(line,column)),f instanceof b||(f=m(d,f)),g.value=f,g}var c;return c=a.prototype,a.displayName="ObjPair",c.isSmall=function(){return this.value.isSmall()},c.isLarge=function(){return this.value.isLarge()},c.isNoop=function(){return this.value.isNoop()},c.walk=function(b){var c,d;return d=null!=(c=b(this.value))?c:this.value.walk(b),d!==this.value?a(this.pos,this.key,d):this},c.inspect=function(a){return j(a,"Pair",this.pos,this.key,this.value)},a}(),c}(V),c.Regex=jb=function(a){function b(a,c,e){var f;if(f=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(f.pos=a,"string"!=typeof c)throw TypeError("Expected source to be a String, got "+F(c));if(f.source=c,null==e)e="";else if("string"!=typeof e)throw TypeError("Expected flags to be a String, got "+F(e));return f.flags=e,f}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Regex","function"==typeof a.extended&&a.extended(b),d.compile=function(a,b,c,d){var e;null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column,this.pos.file),d("/"),d(this.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),d("/"),d(this.flags)},d.compileAsBlock=function(a,b,c,d){gb(this.pos).compileAsBlock(a,b,c,d)},d.isNoop=function(){return!0},d.walk=function(){return this},d.inspect=function(a){return j(a,"Regex",this.pos,this.source,this.flags)},d._toJSON=function(){return[this.source,this.flags]},b.fromJSON=function(a,c,d,e,f){return b(g(a,c,d),e,f)},b}(V),c.Return=kb=function(a){function b(a,d){var e;if(e=this instanceof b?this:t(c),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,null==d)d=gb(a);else if(!(d instanceof V))throw TypeError("Expected node to be a "+z(V)+", got "+F(d));return e.node=d,"function"==typeof d.toStatement?d.toStatement().mutateLast(function(c){return b(a,c)},{noop:!0}):e}var c,d;return d=a.prototype,c=b.prototype=t(d),c.constructor=b,b.displayName="Return","function"==typeof a.extended&&a.extended(b),c.compile=function(a,b,c,d){var e;null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),d("return"),this.node.isConst()&&void 0===this.node.constValue()||(d(" "),this.node.compile(a,2,!1,d)),d(";"),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},c.walk=function(a){var c,d;return d=null!=(c=a(this.node))?c:this.node.walk(a),d!==this.node?b(this.pos,d):this},c.exitType=function(){return"return"},c.isSmall=function(){return this.node.isSmall()},c.isLarge=function(){return this.node.isLarge()},c.inspect=function(a){return j(a,"Return",this.pos,this.node)},c.mutateLast=function(a,c){var d;return(null!=c?c["return"]:void 0)?(d=this.node.mutateLast(a,c),d!==this.node?b(this.pos,d):this):this},c._toJSON=function(){return l(this.node)?this.node.toJSON():[]},b.fromJSON=function(a,c,d){var e;return e=C.call(arguments,3),b(g(a,c,d),Y(e))},b}(mb),c.Root=lb=function(){function a(b,d,e,f){var g,h,i;if(i=this instanceof a?this:t(c),"object"!=typeof b||null===b)throw TypeError("Expected pos to be an Object, got "+F(b));if(i.pos=b,null==d)d=gb(b);else if(!(d instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(d));if(i.body=d,null==e)e=[];else{if(!w(e))throw TypeError("Expected variables to be an Array, got "+F(e));for(g=e.length;g--;)if("string"!=typeof e[g])throw TypeError("Expected "+("variables["+g+"]")+" to be a String, got "+F(e[g]))}if(i.variables=e,null==f)f=[];else{if(!w(f))throw TypeError("Expected declarations to be an Array, got "+F(f));for(h=f.length;h--;)if("string"!=typeof f[h])throw TypeError("Expected "+("declarations["+h+"]")+" to be a String, got "+F(f[h]))}return i.declarations=f,o([],e),i}var c;return c=a.prototype,a.displayName="Root",c.compile=function(a){var c,d,g,h,i,j,k,l,m,n,o,q,r,s;return null==a&&(a={}),a.indent||(a.indent=0),a.uglify||"function"!=typeof a.writer||(s=a.writer),n=s?e(s):f(),o=(new Date).getTime(),null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(c=a.sourceMap)&&c.add(n.line,n.column,this.pos.line,this.pos.column),p(a,n,this.declarations,this.variables,this.body,!0),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile(),g=(new Date).getTime(),"function"==typeof a.progress&&a.progress("compile",A(g)-A(o)),h=0,null==s&&(d=n.toString(),a.uglify&&(i=b("fs"),null!=a.sourceMap&&(m=b("path"),l=b("os"),q=m.join(l.tmpDir(),"gs-"+4294967296*Math.random()+".map"),i.writeFileSync(q,a.sourceMap.toString(),"utf8")),r=b("uglify-js"),null!=(c=r.AST_Node)&&(k=c.warn_function),"function"==typeof k&&(r.AST_Node.warn_function=function(){}),j=r.minify(d,{fromString:!0,inSourceMap:q,outSourceMap:null!=(c=a.sourceMap)?c.generatedFile:void 0}),null!=k&&(r.AST_Node.warn_function=k),null!=q&&i.unlinkSync(q),d=j.code,h=(new Date).getTime(),"function"==typeof a.progress&&a.progress("uglify",h-A(g)),null!=a.sourceMap&&(a.sourceMap=j.map)),"function"==typeof a.writer&&(a.writer(d),d="")),{compileTime:A(g)-A(o),uglifyTime:a.uglify?h-A(g):void 0,code:d||""}},c.toString=function(a){return null==a&&(a={}),this.compile(a).code},c.isLarge=function(){return!0},c.walk=function(b){var c;return c=this.body.walk(b),c!==this.body?a(this.pos,c,this.variables,this.declarations):this},c.mutateLast=function(b,c){var d;return d=this.body.mutateLast(b,c),d!==this.body?a(this.pos,d,this.variables,this.declarations):this},c.exitType=function(){return this.last().exitType()},c.last=function(){var a;return(a=this.body)[A(a.length)-1]},c.inspect=function(a){return j(a,"Root",this.pos,this.body,this.variables,this.declarations)},c._toJSON=function(){var a;return a=[k(this.variables,0),k(this.declarations,0)],l(this.body)&&a.push.apply(a,E(this.body.toJSON())),a},a.fromJSON=function(b,c,d,e,f){var h;return h=C.call(arguments,5),a(g(b,c,d),Y(h),e,f)},a}(),c.This=ob=function(a){function b(a){var c;if(c=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));return c.pos=a,c}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="This","function"==typeof a.extended&&a.extended(b),d.compile=function(a,b,c,d){var e;null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column,this.pos.file),d("this")},d.compileAsBlock=function(a,b,c,d){gb(this.pos).compileAsBlock(a,b,c,d)},d.isNoop=function(){return!0},d.walk=function(){return this},d.inspect=function(a){return j(a,"This",this.pos)},b.fromJSON=function(a,c,d){return b(g(a,c,d))},b}(V),c.Throw=pb=function(a){function b(a,c){var e;if(e=this instanceof b?this:t(d),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(e.pos=a,null==c)c=gb(line,column);else if(!(c instanceof V))throw TypeError("Expected node to be a "+z(V)+", got "+F(c));return e.node=c,"function"==typeof c.toStatement?c.toStatement().mutateLast(function(a){return b(e.pos,a)},{noop:!0}):e}var c,d;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Throw","function"==typeof a.extended&&a.extended(b),d.compile=function(a,b,c,d){var e;return null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(e=a.sourceMap)&&e.add(d.line,d.column,this.pos.line,this.pos.column),d("throw "),this.node.compile(a,2,!1,d),d(";"),null!=a.sourceMap&&this.pos.file?a.sourceMap.popFile():void 0},d.walk=function(a){var c,d;return d=null!=(c=a(this.node))?c:this.node.walk(a),d!==this.node?b(this.pos,d):this},d.exitType=function(){return"throw"},d.isSmall=function(){return this.node.isSmall()},d.isLarge=function(){return this.node.isLarge()},d.inspect=function(a){return j(a,"Throw",this.pos,this.node)},d._toJSON=function(){return l(this.node)?this.node.toJSON():[]},b.fromJSON=function(a,c,d){var e;return e=C.call(arguments,3),b(g(a,c,d),Y(e))},b}(mb),c.Switch=nb=function(b){function c(a,b,d,g,h){var i,j;if(j=this instanceof c?this:t(e),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(j.pos=a,null==b&&(b=gb(a)),null==d)d=[];else{if(!w(d))throw TypeError("Expected cases to be an Array, got "+F(d));for(i=d.length;i--;)if(!(d[i]instanceof f))throw TypeError("Expected "+("cases["+i+"]")+" to be a "+z(f)+", got "+F(d[i]))}if(j.cases=d,null==g)g=gb(a);else if(!(g instanceof fb))throw TypeError("Expected defaultCase to be a "+z(fb)+", got "+F(g));if(null==h)h=null;else if(!(h instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(h));return j.label=h,b instanceof V||(b=m(a,b)),j.node=b,j.defaultCase=g.maybeToStatement(),j}var d,e,f;return d=b.prototype,e=c.prototype=t(d),e.constructor=c,c.displayName="Switch","function"==typeof b.extended&&b.extended(c),e.compile=function(b,c,d,e){var f,g,h,i,j,k,l;if(1!==c)throw Error("Cannot compile a statement except on the Block level");for(null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(i=b.sourceMap)&&i.add(e.line,e.column,this.pos.line,this.pos.column),l=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),e(":"),l||e(" ")),e("switch"),l||e(" "),e("("),this.node.compile(b,2,!1,e),e(")"),l||e(" "),e("{"),k=a(b),f=E(this.cases),g=0,h=f.length;h>g;++g)j=f[g],l||(e(b.linefeed||"\n"),e.indent(b.indent)),e("case "),j.node.compile(b,2,!1,e),e(":"),j.body.isNoop()||(j.node.isSmall()&&j.body.isSmall()?(l||e(" "),j.body.compileAsStatement(b,!0,e)):(l||(e(b.linefeed||"\n"),e.indent(k.indent)),j.body.compileAsStatement(k,!0,e)));this.defaultCase.isNoop()||(l||(e(b.linefeed||"\n"),e.indent(b.indent)),e("default:"),this.defaultCase.isSmall()?(l||e(" "),this.defaultCase.compileAsStatement(b,!0,e)):(l||(e(b.linefeed||"\n"),e.indent(k.indent)),this.defaultCase.compileAsStatement(k,!0,e))),l||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}"),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},e.walk=function(a){var b,d,e,f,g;return g=null!=(b=a(this.node))?b:this.node.walk(a),d=h(this.cases,a),e=null!=(b=a(this.defaultCase))?b:this.defaultCase.walk(a),f=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,g!==this.node||d!==this.cases||e!==this.defaultCase||f!==this.label?c(this.pos,g,d,e,f):this},e.inspect=function(a){return this.inspectHelper(a,"Switch",this.pos,this.node,this.cases,this.defaultCase,this.label)},e._toJSON=function(){var a,b,c,d,e;for(e=[this.label||0,l(this.node,0)],a=E(this.cases),b=0,c=a.length;c>b;++b)d=a[b],e.push(d.pos.line,d.pos.column,d.pos.file,l(d.node,0),l(d.body,0));return this.defaultCase instanceof gb||e.push(l(this.defaultCase,0)),e},c.fromJSON=function(a,b,d,e,h){var i,j,k,l,m,n,o,p,q,r;switch(i=C.call(arguments,5),q=i.length,q%5){case 0:break;case 1:--q,o=i[q];break;default:throw Error("Unknown number of arguments passed to fromJSON")}for(r=[],p=0;q>p;p+=5)m=i[p],k=i[p+1],l=i[p+2],n=i[p+3],j=i[p+4],r.push(f(g(m,k,l),Y(n),Y(j)));return c(g(a,b,d),Y(h),r,Y(o),e?Y(e):null)},c.Case=f=function(){function a(c,d,e){var f;if(f=this instanceof a?this:t(b),"object"!=typeof c||null===c)throw TypeError("Expected pos to be an Object, got "+F(c));if(f.pos=c,null==d&&(d=gb(c)),null==e)e=gb(c);else if(!(e instanceof fb))throw TypeError("Expected body to be a "+z(fb)+", got "+F(e));return d instanceof V||(d=m(c,d)),f.node=d,f.body=e.maybeToStatement(),f}var b;return b=a.prototype,a.displayName="SwitchCase",b.isLarge=function(){return!0},b.isSmall=function(){return!1},b.walk=function(b){var c,d,e;return e=null!=(c=b(this.node))?c:this.node.walk(b),d=null!=(c=b(this.body))?c:this.body.walk(b),e!==this.node||d!==this.body?a(this.pos,e,d):this},b.inspect=function(a){return j(a,"Case",this.pos,this.node,this.body)},a}(),c}(mb),c.TryCatch=sb=function(b){function c(a,b,d,f,g){var h;if(h=this instanceof c?this:t(e),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(h.pos=a,null==b)b=gb(a);else if(!(b instanceof fb))throw TypeError("Expected tryBody to be a "+z(fb)+", got "+F(b));if(!(d instanceof _))throw TypeError("Expected catchIdent to be a "+z(_)+", got "+F(d));if(h.catchIdent=d,null==f)f=gb(a);else if(!(f instanceof fb))throw TypeError("Expected catchBody to be a "+z(fb)+", got "+F(f));if(null==g)g=null;else if(!(g instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(g));return h.label=g,h.tryBody=b.maybeToStatement(),h.tryBody.isNoop()?h.tryBody:(h.catchBody=f.maybeToStatement(),h)}var d,e;return d=b.prototype,e=c.prototype=t(d),e.constructor=c,c.displayName="TryCatch","function"==typeof b.extended&&b.extended(c),e.compile=function(b,c,d,e){var f,g,h;if(1!==c)throw Error("Cannot compile a statement except on the Block level");null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(f=b.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),h=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),e(":"),h||e(" ")),h?e("try{"):(e("try {"),e(b.linefeed||"\n")),g=a(b),h||e.indent(g.indent),this.tryBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent)),e(h?"}catch(":"} catch ("),this.catchIdent.compile(b,2,!1,e),e(h?"){":") {"),this.catchBody.isNoop()||(h||(e(b.linefeed||"\n"),e.indent(g.indent)),this.catchBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent))),e("}"),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},e.walk=function(a){var b,d,e,f,g;return g=null!=(b=a(this.tryBody))?b:this.tryBody.walk(a),e=null!=(b=a(this.catchIdent))?b:this.catchIdent.walk(a),d=null!=(b=a(this.catchBody))?b:this.catchBody.walk(a),f=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,g!==this.tryBody||e!==this.catchIdent||d!==this.catchBody||f!==this.label?c(this.pos,g,e,d,f):this},e.inspect=function(a){return j(a,"TryCatch",this.pos,this.tryBody,this.catchIdent,this.catchBody,this.label)},e._toJSON=function(){var a;return a=[this.label||0,l(this.tryBody,0),this.catchIdent],l(this.catchBody)&&a.push.apply(a,E(this.catchBody.toJSON())),a},c.fromJSON=function(a,b,d,e,f,h){var i;return i=C.call(arguments,6),c(g(a,b,d),Y(f),Y(h),Y(i),e?Y(e):null)},c}(mb),c.TryFinally=tb=function(b){function c(a,b,d,f){var g;if(g=this instanceof c?this:t(e),"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+F(a));if(g.pos=a,null==b)b=gb(a);else if(!(b instanceof fb))throw TypeError("Expected tryBody to be a "+z(fb)+", got "+F(b));if(null==d)d=gb(a);else if(!(d instanceof fb))throw TypeError("Expected finallyBody to be a "+z(fb)+", got "+F(d));if(null==f)f=null;else if(!(f instanceof _))throw TypeError("Expected label to be one of "+(z(_)+" or null")+", got "+F(f));if(g.label=f,g.tryBody=b.maybeToStatement(),g.finallyBody=d.maybeToStatement(),null==f){if(g.tryBody.isNoop())return g.finallyBody;if(g.finallyBody.isNoop())return g.tryBody}return g}var d,e;return d=b.prototype,e=c.prototype=t(d),e.constructor=c,c.displayName="TryFinally","function"==typeof b.extended&&b.extended(c),e.compile=function(b,c,d,e){var f,g,h;if(1!==c)throw Error("Cannot compile a statement except on the Block level");null!=b.sourceMap&&this.pos.file&&b.sourceMap.pushFile(this.pos.file),null!=(f=b.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),h=b.minify,null!=this.label&&(this.label.compile(b,c,d,e),e(":"),h||e(" ")),h?e("try{"):(e("try {"),e(b.linefeed||"\n")),g=a(b),h||e.indent(g.indent),this.tryBody instanceof sb&&null==this.tryBody.label?(this.tryBody.tryBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent)),e(h?"}catch(":"} catch ("),this.tryBody.catchIdent.compile(b,2,!1,e),e(h?"){":") {"),this.tryBody.catchBody.isNoop()||(h||(e(b.linefeed||"\n"),e.indent(g.indent)),this.tryBody.catchBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent)))):(this.tryBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent))),h?e("}finally{"):(e("} finally {"),e(b.linefeed||"\n")),h||e.indent(g.indent),this.finallyBody.compileAsStatement(g,!0,e),h||(e(b.linefeed||"\n"),e.indent(b.indent)),e("}"),null!=b.sourceMap&&this.pos.file&&b.sourceMap.popFile()},e.walk=function(a){var b,d,e,f;return f=null!=(b=a(this.tryBody))?b:this.tryBody.walk(a),d=null!=(b=a(this.finallyBody))?b:this.finallyBody.walk(a),e=null!=this.label?null!=(b=a(this.label))?b:this.label.walk(a):this.label,f!==this.tryBody||d!==this.finallyBody||e!==this.label?c(this.pos,f,d,e):this},e.inspect=function(a){return j(a,"TryFinally",this.pos,this.tryBody,this.finallyBody,this.label)},e._toJSON=function(){var a;return a=[this.label||0,l(this.tryBody,0)],l(this.finallyBody)&&a.push.apply(a,E(this.finallyBody.toJSON())),a},c.fromJSON=function(a,b,d,e,f){var h;return h=C.call(arguments,5),c(g(a,b,d),Y(f),Y(h),e?Y(e):null)},c}(mb),c.Unary=ub=function(a){function b(c,e,g){var h;if(h=this instanceof b?this:t(d),"object"!=typeof c||null===c)throw TypeError("Expected pos to be an Object, got "+F(c));if(h.pos=c,"string"!=typeof e)throw TypeError("Expected op to be a String, got "+F(e));if(h.op=e,null==g&&(g=gb(c)),!v(e,f))throw Error("Unknown unary operator: "+e);if(g instanceof a||(g=m(line,column,g)),!("delete"!==e||g instanceof J&&"."===g.op))throw Error("Cannot use delete operator on a non-access");return h.node=g,h}var c,d,e,f;return c=a.prototype,d=b.prototype=t(c),d.constructor=b,b.displayName="Unary","function"==typeof a.extended&&a.extended(b),d.compile=function(a,c,d,e){var f,g;g=this.op,null!=a.sourceMap&&this.pos.file&&a.sourceMap.pushFile(this.pos.file),null!=(f=a.sourceMap)&&f.add(e.line,e.column,this.pos.line,this.pos.column),"++post"===g||"--post"===g?(this.node.compile(a,16,!1,e),e(g.substring(0,2))):(e(g),("typeof"===g||"void"===g||"delete"===g||("+"===g||"-"===g||"++"===g||"--"===g)&&(this.node instanceof b&&("+"===g||"-"===g||"++"===g||"--"===g)||this.node instanceof Q&&"number"==typeof this.node.value&&n(this.node.value)))&&e(" "),this.node.compile(a,16,!1,e)),null!=a.sourceMap&&this.pos.file&&a.sourceMap.popFile()},d.compileAsBlock=function(a,b,c,d){var f;f=this.op,B.call(e,f)?this.compile(a,b,c,d):this.node.compileAsBlock(a,b,c,d)},d.compileAsStatement=function(a,b,d){var f;f=this.op,B.call(e,f)?c.compileAsStatement.call(this,a,b,d):this.node.compileAsStatement(a,b,d)},f=["++","--","++post","--post","!","~","+","-","typeof","void","delete"],e={"++":!0,"--":!0,"++post":!0,"--post":!0,"delete":!0},d.isLarge=function(){return this.node.isLarge()},d.isSmall=function(){return this.node.isSmall()},d.isNoop=function(){var a;return null==(a=this._isNoop)?this._isNoop=!B.call(e,this.op)&&this.node.isNoop():a},d.walk=function(a){var c,d;return d=null!=(c=a(this.node))?c:this.node.walk(a),d!==this.node?b(this.pos,this.op,d):this},d.inspect=function(a){return j(a,"Unary",this.pos,this.op,this.node)},d._toJSON=function(){var a;return a=[this.op],l(this.node)&&a.push.apply(a,E(this.node.toJSON())),a},b.fromJSON=function(a,c,d,e){var f;return f=C.call(arguments,4),b(g(a,c,d),e,Y(f))},b}(V),wb=c.While=function(a,b,c,d){return W(a,null,b,null,c,d)},Y=c.fromJSON=function(a){var b,d;if(!a)return gb(g(0,0));if(w(a)){if(0===a.length)return gb(g(0,0));if(d=a[0],A(a.length)<1||"string"!=typeof d)throw Error("Expected an array with a string as its first item");if(!B.call(c,d))throw Error("Unknown node type: "+D(a.type));return(b=c[d]).fromJSON.apply(b,E(C.call(a,1)))}if("object"==typeof a&&null!==a){if("string"!=typeof a.type)throw Error("Expected an object with a string 'type' key");if(!B.call(c,a.type))throw Error("Unknown node type: "+D(a.type));return c[a.type].fromJSON(a)}throw TypeError("Must provide an object or array to deserialize")}}.call(this),a.exports},b["./parser"]=function(){var a={exports:this};return function(c){"use strict";function d(a){return a}function e(a){return function(){return a}}function f(a,b,c){var d,e,f;if(!ob(a))throw TypeError("Expected codes to be an Array, got "+Bb(a));for(null==b&&(b=[]),null==c&&(c=0),e=a.length,d=nb(c),0>d&&(d+=e);e>d;++d)f=a[d],b.push(de(f));return b}function g(a){if(!ob(a))throw TypeError("Expected codes to be an Array, got "+Bb(a));return f(a).join("")}function h(a){var b,c,d,e,f,g,h;for(h=eb(null),b=Ab(a),d=0,e=b.length;e>d;++d)if(g=b[d],"number"==typeof g)h[g]=!0;else for(f=ub(g[0]),c=ub(g[1]);c>=f;++f)h[f]=!0;return h}function i(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+Bb(a));return a.stack=Error().stack,a}function j(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+Bb(a));if("number"!=typeof b)throw TypeError("Expected expected to be a Number, got "+Bb(b));return i(function(c,d){if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));return c.source.charCodeAt(d)===b?wc(d+1,b):c.fail(a,d)})}function k(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+Bb(a));if("object"!=typeof b||null===b)throw TypeError("Expected expected to be an Object, got "+Bb(b));return i(function(c,d){var e;if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));return e=c.source.charCodeAt(d),b[e]?wc(d+1,e):c.fail(a,d)})}function l(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));if(arguments.length>1)throw Error("Expected only two arguments");return"function"==typeof a.mutator&&"function"==typeof a.rule?l(a.rule):Kf(function(a){return!!a},a)}function m(a,b){var c;if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));if(arguments.length>2)throw Error("Expected only two arguments");return c={},"function"==typeof b?Kf(function(a,d,e){return a===c?b(d,e):a},i(function(b,d){if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));return a(b,d)||wc(d,c)})):i(function(c,d){if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));return a(c,d)||wc(d,b)})}function n(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));return function(b,c){var d;if("number"!=typeof c)throw TypeError("Expected index to be a Number, got "+Bb(c));if(d=a(b,c)){if(!(d instanceof wc))throw TypeError("Expected result to be a Box, got "+Bb(d));return wc(c)}}}function p(a,b){return wc(b)}function q(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));if(arguments.length>1)throw Error("Expected only one argument");return i(function(b,c){if("number"!=typeof c)throw TypeError("Expected index to be a Number, got "+Bb(c));return a(b,c)?void 0:wc(c)})}function r(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));if(arguments.length>1)throw Error("Expected only one argument");return i(function(b,c){if("number"!=typeof c)throw TypeError("Expected index to be a Number, got "+Bb(c));return a(b,c)?void 0:s(b,c)})}function s(a,b){var c,d;return d=a.source,b>=d.length?a.fail("any",b):(c=d.charCodeAt(b),13===c&&10===d.charCodeAt(+b+1)&&(++b,c=10),wc(+b+1,c))}function t(a,b){var c,d;if(d=a.source,c=d.charCodeAt(b),13===c)10===d.charCodeAt(+b+1)&&(++b,c=10);else if(10!==c&&8232!==c&&8233!==c)return;return wc(+b+1,c)}function u(a,b){return b>=a.source.length?wc(b):void 0}function v(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));return gh(rh,["this",a])}function w(a,b){return a.options.noindent?Sd(a,b):wc(b)}function x(a,b){var c;if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));if("string"!=typeof b)throw TypeError("Expected text to be a String, got "+Bb(b));return c=JSON.stringify(b),function(d,e){var f;return f=a(d,e),f&&f.value===b?f:d.fail(c,e)}}function y(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+Bb(a));return b=eb(null),function(c){if("string"!=typeof c)throw TypeError("Expected key to be a String, got "+Bb(c));return vb.call(b,c)?b[c]:b[c]=a(c)}}function z(a,b){return a.options.noindent?void 0:wc(b)}function A(a,b){var c;return c=cd(a,b),a.options.noindent||c.value===a.indent.peek()?c:void 0}function B(a,b){var c,d,e;if(a.options.noindent)throw Error("Can't use Advance if in noindent mode");return c=cd(a,b),d=c.value,e=a.indent,sb(d,e.peek())?void 0:(e.push(d),wc(b,d))}function C(a,b){var c;return c=cd(a,b),a.indent.push(c.value),wc(b,c.value)}function D(a){if("number"!=typeof a)throw TypeError("Expected n to be a Number, got "+Bb(a));return function(b,c){var d;return d=b.indent,d.push(+d.peek()+a),wc(c,0)}}function E(a,b){var c;if(c=a.indent,c.canPop())return c.pop(),wc(b);throw Eg("Unexpected dedent",a,b)}function F(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));return function(b,c){var d,e,f,g;g=b.indent,e=g.count();try{return a(b,c)}finally{for(f=ub(e),d=ub(g.count());d>f;++f)g.pop()}}}function G(a){var b;if("function"!=typeof a)throw TypeError("Expected digit to be a Function, got "+Bb(a));return b=fh(ng(a),ng(ni,!0)),Kf(function(a){var b,c,d,e,g;for(g=[],b=Ab(a),c=0,d=b.length;d>c;++c)e=b[c],f(e,g);return g.join("")})(b)}function H(a,b,c,d){var e,f,g,h,i;if("string"!=typeof a)throw TypeError("Expected integer to be a String, got "+Bb(a));if("string"!=typeof b)throw TypeError("Expected fraction to be a String, got "+Bb(b));if("number"!=typeof c)throw TypeError("Expected radix to be a Number, got "+Bb(c));if(null==d)d=0;else if("number"!=typeof d)throw TypeError("Expected exponent to be a Number, got "+Bb(d));if(0!==d%1)throw RangeError("Expected exponent to be an integer, got "+d);for(;d>0;)a+=zb(b.charAt(0)||"0"),b=b.substring(1),--d;for(;0>d;)b=zb(a.slice(-1))+b,a=a.slice(0,-1),++d;for(h=0,e=0,f=a.length;f>e;++e)g=a.charAt(e),h=h*c+parseInt(g,c);if(b)for(i=0,f=b.length;f>i;++i)g=b.charAt(i),h+=parseInt(g,c)/Math.pow(c,i+1);return h}function I(a,b,c){var d,e;if("number"!=typeof a)throw TypeError("Expected radix to be a Number, got "+Bb(a));if("function"!=typeof b)throw TypeError("Expected separator to be a Function, got "+Bb(b));if("function"!=typeof c)throw TypeError("Expected digit to be a Function, got "+Bb(c));return e=G(c),d=gh(yi,["separator",b],kh,["integer",e],["fraction",m(gh(Gf,Hg,Gf,["this",e]),"")],Gf),Kf(function(b,c,d,e){var f,g,h,i;if(h=b.separator,g=b.integer,f=b.fraction,i=H(g,f,a),!isFinite(i))throw Eg("Unable to parse number "+zb(Ug(c.source.substring(d,e))),c,d);return c.Const(d,i)})(d)}function J(a,b,c){var d,e,f,h,i,j;for(j=[],h=[],d=Ab(a),e=0,f=d.length;f>e;++e)i=d[e],"number"==typeof i?h.push(i):i instanceof _f||(j.push(b.Const(c,g(h))),h=[],j.push(i));return h.length>0&&j.push(b.Const(c,g(h))),j}function K(a,b){var c,d,e,f,g;for(d=0,e=a.indent.peek(),f=b;d<ub(e)&&(c=sh(a,f));){if(f=c.index,g=Ne[c.value],!g)throw Error("Unexpected indent char: "+yb(JSON.stringify(c.value)));d+=+g}if(d>ub(e))throw Eg("Mixed tabs and spaces in string literal",a,f);return d===e||t(a,f)?wc(f,d):void 0}function L(a,b,c){var d,e,f,g,h,i,j,k,l;for(j=[a.first],(0===j[0].length||1===j[0].length&&""===j[0][0])&&j.shift(),g=1,d=ub(a.numEmptyLines);d>g;++g)j.push([""]);for(j.push.apply(j,Ab(a.rest)),h=j.length,h>0&&(0===j[h-1].length||1===j[h-1].length&&""===j[h-1][0])&&(j.pop(),--h),l=[],g=0,e=j.length;e>g;++g)i=j[g],g>0&&l.push("\n"),l.push.apply(l,Ab(i));for(f=l.length-2;f>=0;--f)"string"==typeof l[f]&&"string"==typeof l[f+1]&&l.splice(f,2,""+l[f]+l[f+1]);for(f=0,e=l.length;e>f;++f)k=l[f],"string"==typeof k&&(l[f]=b.Const(c,k));return l}function M(a,b){var c;if("function"!=typeof a)throw TypeError("Expected quote to be a Function, got "+Bb(a));if("function"!=typeof b)throw TypeError("Expected line to be a Function, got "+Bb(b));return c=gh(a,kh,["first",b],["numEmptyLines",zi(gh(rh,["this",t]),!0)],["rest",m(F(gh(C,["this",m(fh(gh(K,["this",b]),t),function(){return[]})],m(t),E)),function(){return[]})],a),Kf(function(a,b,c){var d,e,f,g,h,i;for(d=[],e=Ab(L(a,b,c)),f=0,g=e.length;g>f;++f)h=e[f],h.isConstValue("")||d.push(h);return i=d,0===i.length?b.Const(c,""):1===i.length&&i[0].isConstType("string")?i[0]:b.string(c,i)})(c)}function N(a,b){var c,d,e,f,g,h;if(f=Lf(a,b),f&&(h=a.getConst(f.value))){if(a.inAst.peek())return wc(f.index,a.MacroConst(b,f.value));for(c=h.value,d=f.index;"object"==typeof c&&null!==c;){if(g=Zc(a,d),!g)throw Eg("Constant '"+zb(f.value)+"' cannot appear without being accessed upon.",a,b);if(!g.value.isConst())throw Eg("Constant '"+zb(f.value)+"' must only be accessed with constant keys.",a,d);if(e=g.value.constValue(),!vb.call(c,e))throw Eg("Unknown key "+yb(JSON.stringify(String(e)))+" in constant.",a,d);c=c[e],d=g.index}return wc(d,a.Const(b,c))}}function O(a,b){var c;return c=N(a,b),c&&null==c.value.value?c:void 0}function P(a,b,c){var d;if(!(a instanceof Qf))throw TypeError("Expected node to be a "+tb(Qf)+", got "+Bb(a));return d=b.getMacroByLabel("mutateFunction"),d?d.func({op:"",node:a},b,c):a}function Q(a,b){var c,d,e,f,g;for(g=0,c=Ab(a),d=0,e=c.length;e>d;++d)if(f=c[d],f instanceof zg&&f.spread&&(++g,g>1))throw Eg("Cannot have more than one spread parameter",b,f.index);return a}function R(a){var b;if(!ob(a))throw TypeError("Expected array to be an Array, got "+Bb(a));for(;a.length&&(b=a[a.length-1],b instanceof _f);)a.pop();return a}function S(a,b){function c(b,c){return function(d,e){return g.func({left:d,op:b,right:c},a,e)}}var d,e,f,g,h,i;for(d=Ab(a.assignOperators()),e=d.length;e--;)if(g=d[e],i=g.rule,f=i(a,b),f&&(h=ae(a,f.index)))return wc(h.index,c(f.value,h.value))}function T(a,b){var c,d;return c=ze(a,b),c&&(d=S(a,c.index))?wc(d.index,d.value(c.value,b)):void 0}function U(a,b){var c,d,e,f,g,h,i;for(c=Ab(a.allBinaryOperators()),d=c.length;d--;)if(i=c[d],g=!1,e=b,i.invertible&&(f=Df(a,b),f.value&&(g=!0),e=f.index),h=i.rule(a,e))return wc(h.index,{op:h.value,operator:i,inverted:g})}function V(a,b){return a.disallowSpaceBeforeAccess.peek()?wc(b):Rd(a,b)}function W(a,b){return a.disallowSpaceBeforeAccess.peek()?wc(b):rh(a,b)}function X(a,b){var c,d,e,f,g;for(c=Ab(a),d=0,e=c.length;e>d;++d)g=c[d],g instanceof Kh&&(f=g.ident,f instanceof Fe&&b.add(f,!0,ci.any))}function Y(a){if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));return a.replace(/\s+/g," ")}function Z(a,b){var c,d,e,f,h,i;for(h=a.source,f=h.length,e=b,d=[];f>e&&!(Hd(a,e)||Jd(a,e)||Id(a,e));++e)c=h.charCodeAt(e),13===c&&10===h.charCodeAt(e+1)&&(c=10,++e),d.push(c);return e!==b?(i=g(d),a.options.embeddedUnpretty&&(i=Y(i)),wc(e,a.EmbedWrite(b,a.Const(b,i),!1))):void 0}function $(a,b){var c,d,e,f,g;if(g=Id(a,b)){for(e=g.index,f=a.source.length;f>e;){if(d=Cd(a,e)){e=d.index;
break}if(c=s(a,e),!c)break;if(e===c.index)throw Error("Infinite loop detected");e=c.index}return wc(e,a.Nothing(b))}}function _(a,b,c){var d,e,f,g,h,i,j,k,l;for(k=[],d=Ab(a),h=0,f=d.length;f>h;++h)for(i=d[h],e=Ab(i),j=0,g=e.length;g>j;++j){if(l=e[j],!(l instanceof Qf))throw TypeError("Expected lines["+h+"]["+j+"] to be a Node, got "+Bb(l));l instanceof pc&&null==i.label?k.push.apply(k,Ab(l.nodes)):l instanceof _f||k.push(l)}switch(k.length){case 0:return b.Nothing(c);case 1:return k[0];default:return b.Block(c,k)}}function ab(){return jf({Logic:Pg(cf),Expression:Zd,Assignment:T,ExpressionOrAssignment:_d,ExpressionOrAssignmentOrBody:ae,FunctionDeclaration:fe,Statement:yh,Body:qc,BodyNoEnd:rc,GeneratorBody:ke,GeneratorBodyNoEnd:le,End:w,Identifier:we,SimpleAssignable:Ae,Parameter:vg,InvocationArguments:Te,ObjectLiteral:Ub,ArrayLiteral:Tb,DedentedBody:id,ObjectKey:dg,Type:gi,NoSpace:Uf,ColonEqual:Pc},lf,vi,mg,gh)}var bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe,pe,qe,re,se,te,ue,ve,we,xe,ye,ze,Ae,Be,Ce,De,Ee,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe,Pe,Qe,Re,Se,Te,Ue,Ve,We,Xe,Ye,Ze,$e,_e,af,bf,cf,df,ef,ff,gf,hf,jf,kf,lf,mf,nf,of,pf,qf,rf,sf,tf,uf,vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Ff,Gf,Hf,If,Jf,Kf,Lf,Mf,Nf,Of,Pf,Qf,Rf,Sf,Tf,Uf,Vf,Wf,Xf,Yf,Zf,$f,_f,ag,bg,cg,dg,eg,fg,gg,hg,ig,jg,kg,lg,mg,ng,og,pg,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,_g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh,Mh,Nh,Oh,Ph,Qh,Rh,Sh,Th,Uh,Vh,Wh,Xh,Yh,Zh,$h,_h,ai,bi,ci,di,ei,fi,gi,hi,ii,ji,ki,li,mi,ni,oi,pi,qi,ri,si,ti,ui,vi,wi,xi,yi,zi,Ai;bb=function(){var a;return a={iterator:function(){return this},next:function(){var a,b;return b=ub(this.index)+1,a=this.array,b>=ub(a.length)?{done:!0,value:void 0}:(this.index=b,{done:!1,value:a[b]})}},function(b){var c;if(!ob(b))throw TypeError("Expected array to be an Array, got "+Bb(b));return c=eb(a),c.array=b,c.index=-1,c}}(),cb=function(a,b){var c;if(null==a)throw TypeError("Expected parent to be an object, got "+Bb(a));if(c=a[b],"function"!=typeof c)throw Error("Trying to bind child '"+String(b)+"' which is not a function");return function(){return c.apply(a,arguments)}},db=function(a,b){var c;if(a===b)return 0;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a?-1:1},eb="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},fb=function(a,b){var c;if("number"!=typeof a)throw TypeError("Expected numArgs to be a Number, got "+Bb(a));if("function"!=typeof b)throw TypeError("Expected f to be a Function, got "+Bb(b));return a>1?(c=function(d){var e;return ub(d.length)>=a?b.apply(this,d):e=function(){return 0===arguments.length?e:c.call(this,d.concat(xb.call(arguments)))}},c([])):b},gb=function(){function a(){function b(a,b){var f;c&&(f=c,c=null,d=a,e=b,f.length&&hh(function(){var a,b;for(b=0,a=f.length;a>b;++b)f[b]()}))}var c,d,e;return d=!1,e=null,c=[],{promise:{then:function(b,f,g){function h(){var a,c;try{a=d?f:b,"function"==typeof a?(c=a(e),c&&"function"==typeof c.then?c.then(j,l,g):j(c)):(d?l:j)(e)}catch(h){l(h)}}var i,j,k,l;return g!==!0&&(g=void 0),i=a(),k=i.promise,j=i.fulfill,l=i.reject,c?c.push(h):g?h():hh(h),k},sync:function(){var a,b;switch(b=0,a=0,this.then(function(c){return b=1,a=c},function(c){return b=2,a=c},!0),b){case 0:throw Error("Promise did not execute synchronously");case 1:return a;case 2:throw a;default:throw Error("Unknown state")}}},fulfill:function(a){b(!1,a)},reject:function(a){b(!0,a)}}}return a.fulfilled=function(b){var c;return c=a(),c.fulfill(b),c.promise},a.rejected=function(b){var c;return c=a(),c.reject(b),c.promise},a}(),hb=function(a,b){function c(c,f){var g;try{g=a[c](f)}catch(h){return gb.rejected(h)}return g.done?gb.fulfilled(g.value):g.value.then(d,e,b)}function d(a){return c("send",a)}function e(a){return c("throw",a)}if("object"!=typeof a||null===a)throw TypeError("Expected generator to be an Object, got "+Bb(a));if("function"!=typeof a.send)throw TypeError("Expected generator.send to be a Function, got "+Bb(a.send));if("function"!=typeof a["throw"])throw TypeError("Expected generator.throw to be a Function, got "+Bb(a["throw"]));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+Bb(b));return d(void 0)},ib=function(a,b){function c(){var c,f,g,h,i;for(f=e,g=a-1;g>=0;--g)i=null!=(c=arguments[g])?c:d,h=f.get(i),null==h&&(h=0===g?b.apply(this,arguments):ti(),f.set(i,h)),f=h;return f}var d,e,f;return e=ti(),d={},f=c(),f.generic=c,f},jb=function(){function a(){return!0}function b(a){return"string"==typeof a}function c(a){return"number"==typeof a}function d(a){return"function"==typeof a}function e(a){return"boolean"==typeof a}return function(f){if(null==f)return a;switch(f){case String:return b;case Number:return c;case Function:return d;case Boolean:return e;case Array:return ob;case Object:return pb;default:return function(a){return a instanceof f}}}}(),kb=function(a,b){var c;for(c in b)vb.call(b,c)&&(a[c]=b[c]);return a},lb="function"==typeof Array.prototype.indexOf?function(){var a;return a=Array.prototype.indexOf,function(b,c){return-1!==a.call(c,b)}}():function(a,b){var c,d;for(d=+b.length,c=-1;++c<d;)if(a===b[c]&&c in b)return!0;return!1},mb=function(a,b){var c,d,e,f;if("number"==typeof b){if(b!==b){for(c=Ab(a),e=c.length;e--;)if(d=c[e],d!==d)return e;return-1}if(0===b){for(f=1/b,c=Ab(a),e=c.length;e--;)if(d=c[e],0===d&&1/d===f)return e;return-1}}return a.indexOf(b)},nb=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+Bb(a));if(0!==a%1)throw TypeError("Expected an integer, got "+a);return a},ob="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),pb=function(a){return"object"==typeof a&&null!==a},qb=function(a){if(null==a)throw TypeError("Expected iterable to be an Object, got "+Bb(a));if(ob(a))return bb(a);if("function"==typeof a.iterator)return a.iterator();if("function"==typeof a.next)return a;throw Error("Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "+Bb(a))},rb=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a},sb=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>=a},tb=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+Bb(a));return a.displayName||a.name||""},ub=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+Bb(a));return a},vb=Object.prototype.hasOwnProperty,wb=function(a,b){var c;if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+Bb(b));return"function"==typeof a?(c=function(){return hb(a.apply(this,arguments))},c.sync=function(){return hb(a.apply(this,arguments),!0).sync()},c):hb(a,b)},xb=Array.prototype.slice,yb=function(a){if("string"!=typeof a)throw TypeError("Expected a string, got "+Bb(a));return a},zb=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+Bb(a))},Ab=function(a){if(null==a)throw TypeError("Expected an object, got "+Bb(a));return ob(a)?a:"string"==typeof a?a.split(""):xb.call(a)},Bb=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),vf="function"==typeof c.Map?c.Map:vf=function(){function a(c){var d,e,f,g;if(f=this instanceof a?this:eb(b),f._keys=[],f._values=[],null!=c)try{for(e=qb(c);d=e.next(),!d.done;)g=d.value,f.set(g[0],g[1])}finally{try{e.close()}catch(h){}}return f}var b;return b=a.prototype,a.displayName="Map",b.get=function(a){var b;return b=mb(this._keys,a),-1===b?void 0:this._values[b]},b.has=function(a){return-1!==mb(this._keys,a)},b.set=function(a,b){var c,d;d=this._keys,c=mb(d,a),-1===c&&(c=d.length,d[c]=a),this._values[c]=b},b["delete"]=function(a){var b,c;return c=this._keys,b=mb(c,a),-1===b?!1:(c.splice(b,1),this._values.splice(b,1))},b.keys=function(){function a(){g=3}function b(){for(;;)switch(g){case 0:e=Ab(h._keys),f=e.length,++g;case 1:g=f--?2:3;break;case 2:return i=e[f],g=1,{done:!1,value:i};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,f,d,g,b,h,c,i;return h=this,g=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.values=function(){function a(){g=3}function b(){for(;;)switch(g){case 0:e=Ab(h._values),f=e.length,++g;case 1:g=f--?2:3;break;case 2:return i=e[f],g=1,{done:!1,value:i};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,f,d,g,b,h,c,i;return h=this,g=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.items=function(){function a(){f=3}function b(){for(;;)switch(f){case 0:j=g._values,e=Ab(g._keys),h=e.length,++f;case 1:f=h--?2:3;break;case 2:return i=e[h],f=1,{done:!1,value:[i,j[h]]};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,d,f,b,g,c,h,i,j;return g=this,f=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.iterator=a.prototype.items,a}(),hh="function"==typeof c.setImmediate?c.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var a;return a=process.nextTick,function(b){var c;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+Bb(b));return c=xb.call(arguments,1),c.length?a(function(){b.apply(void 0,Ab(c))}):a(b)}}():function(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+Bb(a));return b=xb.call(arguments,1),b.length?setTimeout(function(){a.apply(void 0,Ab(b))},0):setTimeout(a,0)},ti="function"==typeof c.WeakMap?c.WeakMap:ti=function(){function a(){var b;return b=this instanceof a?this:eb(e),b._keys=[],b._values=[],b._chilly=[],b._uid=c(),b}function b(){return Math.random().toString(36).slice(2)}function c(){return zb(b())+"-"+zb((new Date).getTime())+"-"+zb(b())+"-"+zb(b())}function d(a){var b,c;c=this._uid,vb.call(a,c)&&(b=this._chilly,-1===b.indexOf(a)&&(b.push(a),this._keys.push(a),this._values.push(a[c])))}var e,f,g;return e=a.prototype,a.displayName="WeakMap",g=Object.isExtensible||function(){return!0},e.get=function(a){var b,c;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");return g(a)?vb.call(a,b=this._uid)?a[b]:void 0:(d.call(this,a),c=this._keys.indexOf(a),-1===c?void 0:this._values[c])},e.has=function(a){if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");return g(a)?vb.call(a,this._uid):(d.call(this,a),-1!==this._keys.indexOf(a))},f="function"==typeof Object.defineProperty?Object.defineProperty:function(a,b,c){a[b]=c.value},e.set=function(a,b){var c,e;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");g(a)?f(a,this._uid,{configurable:!0,writable:!0,enumerable:!1,value:b}):(d.call(this,a),e=this._keys,c=e.indexOf(a),-1===c&&(c=e.length,e[c]=a),this._values[c]=b)},e["delete"]=function(a){var b,c;if(Object(a)!==a)throw TypeError("Invalid value used as weak map key");g(a)?delete a[this._uid]:(d.call(this,a),c=this._keys,b=c.indexOf(a),-1!==b&&(c.splice(b,1),this._values.splice(b,1)))},a}(),Qf=b("./parser-nodes"),bh=b("./parser-scope"),gf=b("./parser-macrocontext"),jf=b("./parser-macroholder"),ci=b("./types"),Bh=b("./utils").stringRepeat,Rb=b("./parser-utils").addParamToScope,Lb=b("./utils"),Ug=Lb.quote,pi=Lb.unique,ne=Lb.getPackageVersion,Qb=Qf.Access,Pb=Qf.AccessMulti,Vb=Qf.Args,Yb=Qf.Array,ac=Qf.Assign,lc=Qf.Binary,pc=Qf.Block,yc=Qf.Break,Ac=Qf.Call,Vc=Qf.Comment,$c=Qf.Const,ad=Qf.Continue,fd=Qf.Debugger,od=Qf.Def,Od=Qf.EmbedWrite,Xd=Qf.Eval,ce=Qf.For,be=Qf.ForIn,ie=Qf.Function,Fe=Qf.Ident,Ge=Qf.If,df=Qf.MacroAccess,ff=Qf.MacroConst,_f=Qf.Nothing,gg=Qf.Object,zg=Qf.Param,Xg=Qf.Regexp,Zg=Qf.Return,_g=Qf.Root,uh=Qf.Spread,Dh=Qf.Super,Eh=Qf.Switch,Ih=Qf.SyntaxChoice,Jh=Qf.SyntaxMany,Kh=Qf.SyntaxParam,Lh=Qf.SyntaxSequence,Nh=Qf.This,Rh=Qf.Throw,Sh=Qf.Tmp,Th=Qf.TmpWrapper,ai=Qf.TryCatch,bi=Qf.TryFinally,di=Qf.TypeFunction,ei=Qf.TypeGeneric,fi=Qf.TypeObject,hi=Qf.TypeUnion,ii=Qf.Unary,si=Qf.Var,xi=Qf.Yield,Eg=function(a){function b(c,e,f){var g,h,i;if(g=this instanceof b?this:eb(d),null==c)c="";else if("string"!=typeof c)throw TypeError("Expected message to be a String, got "+Bb(c));if(g.message=c,null==e)e=null;else if(!(e instanceof Dg))throw TypeError("Expected parser to be one of "+(tb(Dg)+" or null")+", got "+Bb(e));if(null==f)f=0;else if("number"!=typeof f)throw TypeError("Expected index to be a Number, got "+Bb(f));if(g.index=f,c&&!e)throw TypeError("Expected parser to be a Parser, got "+Bb(e));return e?(g.source=e.source,g.filename=e.options.filename,i=e.getPosition(f),g.line=i.line,g.column=i.column,g.message=c+(" at "+(g.filename?zb(g.filename)+":":"")+zb(g.line)+":"+zb(g.column))):(g.line=0,g.column=0),h=a.call(g,g.message),"function"==typeof a.captureStackTrace?a.captureStackTrace(g,b):"stack"in h&&(g.stack=h.stack),g}var c,d;return c=a.prototype,d=b.prototype=eb(c),d.constructor=b,b.displayName="ParserError","function"==typeof a.extended&&a.extended(b),d.name="ParserError",b}(Error),hf=function(a){function b(c,e,f){var g,h,i,j;if(g=this instanceof b?this:eb(d),null==c)c="";else if(!(c instanceof a)&&"string"!=typeof c)throw TypeError("Expected inner to be one of "+(tb(a)+" or String")+", got "+Bb(c));if(null==e)e=null;else if(!(e instanceof Dg))throw TypeError("Expected parser to be one of "+(tb(Dg)+" or null")+", got "+Bb(e));if(null==f)f=0;else if("number"!=typeof f)throw TypeError("Expected index to be a Number, got "+Bb(f));if(g.index=f,c&&!e)throw TypeError("Expected parser to be a Parser, got "+Bb(e));return e?(g.source=e.source,g.filename=e.options.filename,j=e.getPosition(f),g.line=j.line,g.column=j.column,i=[],c instanceof a?("Error"!==Bb(c)&&(i.push(Bb(c)),i.push(": ")),i.push(String(c.message))):i.push(String(c)),i.push(" at "),g.filename&&(i.push(String(g.filename)),i.push(":")),g._message=i.join(""),i.push(g.line),i.push(":"),i.push(g.column),g.message=i.join("")):(g.line=0,g.column=0,g._message="",g.message=""),h=a.call(g,g.message),"function"==typeof a.captureStackTrace?a.captureStackTrace(g,b):"stack"in h&&(g.stack=h.stack),c instanceof a&&(g.inner=c),g}var c,d;return c=a.prototype,d=b.prototype=eb(c),d.constructor=b,b.displayName="MacroError","function"==typeof a.extended&&a.extended(b),d.name="MacroError",d.setPosition=function(a,b){if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+Bb(a));if("number"!=typeof b)throw TypeError("Expected column to be a Number, got "+Bb(b))},b}(Error),wc=function(){function a(c,d){var e;if(e=this instanceof a?this:eb(b),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+Bb(c));if(e.index=c,e.value=d,0!==c%1||0>c)throw RangeError("Expected index to be a non-negative integer, got "+c);return e}var b;return b=a.prototype,a.displayName="Box",a}(),qi=vf(),zc=function(){var a;return a=-1,function(b){function c(a,e){var f,g,h,i,j,k,l,m;if(h=a.cache,i=a.indent.peek(),j=null!=(f=h[i])?f:h[i]=[],k=null!=(f=j[g=e%16])?f:j[g]=[],l=k[d],l&&l.start===e)return qi["delete"](c),l.result;if(m=b(a,e),a.indent.peek()!==i)throw Error("Changed indent during cache process: from "+zb(i)+" to "+zb(_indent.peek(o)));if(m&&!(m instanceof wc))throw Error("Expected result to be a Box, got "+Bb(m));return k[d]={start:e,result:m},m}var d;if("function"!=typeof b)throw TypeError("Expected rule to be a Function, got "+Bb(b));if(arguments.length>1)throw Error("Expected only one argument");return d=++a,qi.set(c,Error().stack),c}}(),wi=-1,de=function(){var a;return a=String.fromCharCode,function(b){return b>65535?""+a((b-65536>>10)+55296)+a((b-65536)%1024+56320):a(b)}}(),tf=ib(1,function(a){var b;return b=jb(a),function(c,d){if("string"!=typeof c)throw TypeError("Expected name to be a String, got "+Bb(c));if(!b(d))throw TypeError("Expected value to be a "+tb(a)+", got "+Bb(d));return function(a){if("function"!=typeof a)throw TypeError("Expected rule to be a Function, got "+Bb(a));return function(b,e){var f;f=b[c],f.push(d);try{return a(b,e)}finally{f.pop()}}}}}),Kf=fb(2,function(a,b){function c(c,d){var e;if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));if(e=b(c,d)){if(!(e instanceof wc))throw TypeError("Expected result to be a Box, got "+Bb(e));return wc(e.index,a(e.value,c,d,e.index))}}if("function"!=typeof b)throw TypeError("Expected rule to be a Function, got "+Bb(b));if(arguments.length>2)throw Error("Expected only two arguments");return a===d?b:("function"!=typeof a&&(a=e(a)),c.rule=b,c.mutator=a,i(c))}),Jf=ib(1,function(a){var b;return b=jb(a),function(c,e,f,g){var h;if("function"!=typeof c)throw TypeError("Expected rule to be a Function, got "+Bb(c));if(null==e)e=0;else if("number"!=typeof e)throw TypeError("Expected minimum to be a Number, got "+Bb(e));if(null==f)f=1/0;else if("number"!=typeof f)throw TypeError("Expected maximum to be a Number, got "+Bb(f));if(null==g)g=!1;else if("boolean"!=typeof g)throw TypeError("Expected ignoreValue to be a Boolean, got "+Bb(g));if(arguments.length>5)throw Error("Expected only five arguments");if(0!==e%1||0>e)throw RangeError("Expected minimum to be a non-negative integer, got "+e);if(f!==1/0&&0!==f%1||e>f)throw RangeError("Expected maximum to be Infinity or an integer of at least "+e+", got "+f);return h=d,g?i(function(d,g){var h,i,j;if("number"!=typeof g)throw TypeError("Expected index to be a Number, got "+Bb(g));for(h=0;f>h;){if(i=c(d,g),!i){if(e>h)return;break}if(!(i instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(i));if(!b(i.value))throw TypeError("Expected item.value to be a "+tb(a)+", got "+Bb(i.value));if(++h,j=i.index,j===g)throw Error("Infinite loop detected");g=j}return wc(g,h)}):h===d?i(function(d,g){var h,i,j,k;if("number"!=typeof g)throw TypeError("Expected index to be a Number, got "+Bb(g));for(k=[],h=0;f>h;){if(i=c(d,g),!i){if(e>h)return;break}if(!(i instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(i));if(!b(i.value))throw TypeError("Expected item.value to be a "+tb(a)+", got "+Bb(i.value));if(k[h]=i.value,++h,j=i.index,j===g)throw Error("Infinite loop detected");g=j}return wc(g,k)}):i(Kf(function(a,b){var c,d,e,f,g;for(c=[],d=Ab(a),e=0,f=d.length;f>e;++e)g=d[e],c.push(h(g.value,b,g.startIndex,g.endIndex));return c},function(d,g){var h,i,j,k;if("number"!=typeof g)throw TypeError("Expected index to be a Number, got "+Bb(g));for(k=[],h=0;f>h;){if(i=c(d,g),!i){if(e>h)return;break}if(!(i instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(i));if(!b(i.value))throw TypeError("Expected item.value to be a "+tb(a)+", got "+Bb(i.value));if(j=i.index,k[h]={startIndex:g,endIndex:j,value:i.value},j===g)throw Error("Infinite loop detected");g=j,++h}return wc(g,k)}))}}),zi=ib(1,function(a){return function(b,c){return Jf.generic(a)(b,0,1/0,c)}}),ng=ib(1,function(a){return function(b,c){return Jf.generic(a)(b,1,1/0,c)}}),mg=ib(1,function(a){var b;return b=jb(a),function(){var c,d,e,f,g,h,j,k,l,m,n;if(m=xb.call(arguments),!ob(m))throw TypeError("Expected rules to be an Array, got "+Bb(m));for(d=m.length;d--;)if("function"!=typeof m[d])throw TypeError("Expected "+("rules["+d+"]")+" to be a Function, got "+Bb(m[d]));switch(m.length){case 0:throw Error("Expected rules to be non-empty");case 1:return m[0];default:for(j=[],e=0,g=m.length;g>e;++e)if(l=m[e],l.oneOf)for(c=Ab(l.oneOf),f=0,h=c.length;h>f;++f)n=c[f],j.push(n);else j.push(l);return k=function(c,d){var e,f,g,h;if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));for(f=0,e=j.length;e>f;++f)if(h=j[f],g=h(c,d)){if(!(g instanceof wc))throw TypeError("Expected rules["+f+"] to return a Box, got "+Bb(g));if(!b(g.value))throw TypeError("Expected rules["+f+"]'s return value to be a "+tb(a)+", got "+Bb(g.value));return g}},k.oneOf=j,i(k)}}}),Ai=ib(1,function(a){return function(){var b;return b=xb.call(arguments),zi.generic(a)(mg.generic(a).apply(void 0,Ab(b)))}}),og=ib(1,function(a){return function(){var b;return b=xb.call(arguments),ng.generic(a)(mg.generic(a).apply(void 0,Ab(b)))}}),kh={},gh=ib(1,function(a){var b;return b=jb(a),function(){var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r;if(h=xb.call(arguments),0===h.length)throw Error("Expected items to be non-empty");if(1===h.length)if(ob(h[0])){if("this"===h[0][0])return h[0][1]}else if("function"==typeof h[0])return o=h[0],function(a,b){var c;if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));if(c=o(a,b)){if(!(c instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(c));return wc(c.index)}};for(p=[],l=[],k=[],m=[],r=-1,e=!1,q=1/0,d=!1,f=0,c=h.length;c>f;++f){if(g=h[f],j=void 0,o=void 0,ob(g)){if(2!==g.length)throw Error("Found an array with "+zb(g.length)+" length at index #"+f);if("string"!=typeof g[0])throw TypeError("Array in index #"+f+" has an improper key: "+Bb(g[0]));if("function"!=typeof g[1])throw TypeError("Array in index #"+f+" has an improper rule: "+Bb(g[1]));if(j=g[0],lb(j,k))throw Error("Can only have one "+yb(JSON.stringify(j))+" key in sequential");k.push(j),o=g[1],"this"===j?r=p.length:e=!0}else{if("function"!=typeof g){if(g===kh){if(q!==1/0)throw Error("Can only have one SHORT_CIRCUIT per sequential");q=f;continue}throw TypeError("Found a non-array, non-function in index #"+f+": "+Bb(g))}o=g}m.push(null),p.push(o),l.push(j)}if(-1!==r){if(e)throw Error("Cannot specify both the 'this' key and another key");return d?(n=m[r],i(Kf(function(a,b){return n(a.value,b,a.startIndex,a.endIndex)},function(c,d){var e,f,g,h,i,j;if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));for(j=0,f=0,e=p.length;e>f;++f){if(i=p[f],g=i(c,d),!g){if(q>f)return;throw kh}if(!(g instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(g));f===r&&(h={value:g.value,startIndex:d,endIndex:g.index}),d=g.index}if(!b(h))throw TypeError("Expected result to be a "+tb(a)+", got "+Bb(h));return wc(d,h)}))):i(function(c,d){var e,f,g,h,i;if("number"!=typeof d)throw TypeError("Expected index to be a Number, got "+Bb(d));for(f=0,e=p.length;e>f;++f){if(i=p[f],g=i(c,d),!g){if(q>f)return;throw kh}if(!(g instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(g));d=g.index,f===r&&(h=g.value)}if(!b(h))throw TypeError("Expected result to be a "+tb(a)+", got "+Bb(h));return wc(d,h)})}if(e)return d?i(Kf(function(a,b){var c,d,e,f,g,h;for(h={},d=0,c=k.length;c>d;++d)f=k[d],f&&(e=a[f],g=m[d],h[f]=g?g(e.value,b,e.startIndex,e.endIndex):e.value);return h},function(a,b){var c,d,e,f,g,h,i;if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));for(h={},e={},d=0,c=p.length;c>d;++d){if(i=p[d],f=i(a,b),!f){if(q>d)return;throw kh}if(!(f instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(f));g=l[d],g&&(h[g]={value:f.value,startIndex:b,endIndex:f.index}),b=f.index}return wc(b,h)})):i(function(a,b){var c,d,e,f,g,h;if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));for(h={},c=0,f=p.length;f>c;++c){if(g=p[c],d=g(a,b),!d){if(q>c)return;throw kh}if(!(d instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(d));b=d.index,e=l[c],e&&(h[e]=d.value)}return wc(b,h)});if(d)throw Error("Cannot use a mutator on a sequential without keys");return i(function(a,b){var c,d,e,f;if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));for(d=0,c=p.length;c>d;++d){if(f=p[d],e=f(a,b),!e){if(q>d)return;throw kh}if(!(e instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(e));b=e.index}return wc(b)})}}),Xc=ib(1,function(a){var b;return b=jb(a),function(c,d){if("function"!=typeof c)throw TypeError("Expected headRule to be a Function, got "+Bb(c));if("function"!=typeof d)throw TypeError("Expected tailRule to be a Function, got "+Bb(d));if(arguments.length>2)throw Error("Expected only two arguments");return i(function(e,f){var g,h,i,j,k;if("number"!=typeof f)throw TypeError("Expected index to be a Number, got "+Bb(f));if(h=c(e,f)){if(!(h instanceof wc))throw TypeError("Expected head to be a Box, got "+Bb(h));if(!b(h.value))throw TypeError("Expected head.value to be a "+tb(a)+", got "+Bb(h.value));if(k=d(e,h.index)){if(!(k instanceof wc))throw TypeError("Expected tail to be a Box, got "+Bb(k));if(!ob(k.value))throw TypeError("Expected tail.value to be a Box, got "+Bb(k.value));for(g=Ab(k.value),i=g.length;i--;)if(j=g[i],!b(j))throw TypeError("Expected tail.value["+i+"] to be a "+tb(a)+", got "+Bb(j));return wc(k.index,[h.value].concat(k.value))}}})}}),Wc=ib(1,function(a){var b;return b=jb(a),function(c,d){if("function"!=typeof c)throw TypeError("Expected leftRule to be a Function, got "+Bb(c));if("function"!=typeof d)throw TypeError("Expected rightRule to be a Function, got "+Bb(d));if(arguments.length>2)throw Error("Expected only two arguments");return i(function(e,f){var g,h,i,j,k;if("number"!=typeof f)throw TypeError("Expected index to be a Number, got "+Bb(f));if(j=c(e,f)){if(!(j instanceof wc))throw TypeError("Expected left to be a Box, got "+Bb(j));if(!ob(j.value))throw TypeError("Expected left.value to be a Box, got "+Bb(j.value));for(g=Ab(j.value),h=g.length;h--;)if(i=g[h],!b(i))throw TypeError("Expected left.value["+h+"] to be a "+tb(a)+", got "+Bb(i));if(k=d(e,j.index)){if(!(k instanceof wc))throw TypeError("Expected right to be a Box, got "+Bb(k));if(!ob(k.value))throw TypeError("Expected right.value to be a Box, got "+Bb(k.value));for(g=Ab(k.value),h=g.length;h--;)if(i=g[h],!b(i))throw TypeError("Expected right.value["+h+"] to be a "+tb(a)+", got "+Bb(i));return wc(k.index,j.value.concat(k.value))}}})}}),fh=ib(1,function(a){var b;return b=jb(a),function(c,d,e){if("function"!=typeof c)throw TypeError("Expected itemRule to be a Function, got "+Bb(c));if(null==d)d=p;else if("function"!=typeof d)throw TypeError("Expected separatorRule to be a Function, got "+Bb(d));if(null==e)e=c;else if("function"!=typeof e)throw TypeError("Expected tailRule to be a Function, got "+Bb(e));if(arguments.length>3)throw Error("Expected only three arguments");return i(function(f,g){var h,i,j,k,l,m,n;if("number"!=typeof g)throw TypeError("Expected index to be a Number, got "+Bb(g));if(i=c(f,g)){if(!(i instanceof wc))throw TypeError("Expected head to be a Box, got "+Bb(i));if(!b(i.value))throw TypeError("Expected head.value to be a "+tb(a)+", got "+Bb(i.value));for(h=i.index,m=[i.value],j=0;n=d(f,h),n;++j){if(!(n instanceof wc))throw TypeError("Expected separator to be a Box, got "+Bb(n));if(k=e(f,n.index),!k)break;if(!(k instanceof wc))throw TypeError("Expected item to be a Box, got "+Bb(k));if(!b(k.value))throw TypeError("Expected head.value to be a "+tb(a)+", got "+Bb(k.value));if(l=k.index,l===h)throw Error("Infinite loop detected");h=l,m.push(k.value)}return wc(h,m)}})}}),sh=k("space",h([9,11,12,32,160,5760,6158,[8192,8202],8239,8287,12288,65263])),th=zc(zi(sh,!0)),yi=j('"0"',48),gd=k("[0-9]",h([[48,57]])),Hg=j('"."',46),Mc=j('":"',58),ud=zc((Lb=gh(Mc,Mc),Kf("::")(Lb))),Kg=j('"|"',124),Td=j('"="',61),If=j('"-"',45),Lg=j('"+"',43),Mg=k("[+\\-]",h([43,45])),$e=k("letter",h([[65,90],[97,122],170,181,186,[192,214],[216,246],[248,705],[710,721],[736,740],748,750,[880,884],886,887,[890,893],902,[904,906],908,[910,929],[931,1013],[1015,1153],[1162,1317],[1329,1366],1369,[1377,1415],[1488,1514],[1520,1522],[1569,1610],1646,1647,[1649,1747],1749,1765,1766,1774,1775,[1786,1788],1791,1808,[1810,1839],[1869,1957],1969,[1994,2026],2036,2037,2042,[2048,2069],2074,2084,2088,[2308,2361],2365,2384,[2392,2401],2417,2418,[2425,2431],[2437,2444],2447,2448,[2451,2472],[2474,2480],2482,[2486,2489],2493,2510,2524,2525,[2527,2529],2544,2545,[2565,2570],2575,2576,[2579,2600],[2602,2608],2610,2611,2613,2614,2616,2617,[2649,2652],2654,[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],2738,2739,[2741,2745],2749,2768,2784,2785,[2821,2828],2831,2832,[2835,2856],[2858,2864],2866,2867,[2869,2873],2877,2908,2909,[2911,2913],2929,2947,[2949,2954],[2958,2960],[2962,2965],2969,2970,2972,2974,2975,2979,2980,[2984,2986],[2990,3001],3024,[3077,3084],[3086,3088],[3090,3112],[3114,3123],[3125,3129],3133,3160,3161,3168,3169,[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],3261,3294,3296,3297,[3333,3340],[3342,3344],[3346,3368],[3370,3385],3389,3424,3425,[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632],3634,3635,[3648,3654],3713,3714,3716,3719,3720,3722,3725,[3732,3735],[3737,3743],[3745,3747],3749,3751,3754,3755,[3757,3760],3762,3763,3773,[3776,3780],3782,3804,3805,3840,[3904,3911],[3913,3948],[3976,3979],[4096,4138],4159,[4176,4181],[4186,4189],4193,4197,4198,[4206,4208],[4213,4225],4238,[4256,4293],[4304,4346],4348,[4352,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5024,5108],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],6103,6108,[6176,6263],[6272,6312],6314,[6320,6389],[6400,6428],[6480,6509],[6512,6516],[6528,6571],[6593,6599],[6656,6678],[6688,6740],6823,[6917,6963],[6981,6987],[7043,7072],7086,7087,[7168,7203],[7245,7247],[7258,7293],[7401,7404],[7406,7409],[7424,7615],[7680,7957],[7960,7965],[7968,8005],[8008,8013],[8016,8023],8025,8027,8029,[8031,8061],[8064,8116],[8118,8124],8126,[8130,8132],[8134,8140],[8144,8147],[8150,8155],[8160,8172],[8178,8180],[8182,8188],8305,8319,[8336,8340],8450,8455,[8458,8467],8469,[8473,8477],8484,8486,8488,[8490,8493],[8495,8505],[8508,8511],[8517,8521],8526,8579,8580,[11264,11310],[11312,11358],[11360,11492],[11499,11502],[11520,11557],[11568,11621],11631,[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],11823,12293,12294,[12337,12341],12347,12348,[12353,12438],[12445,12447],[12449,12538],[12540,12543],[12549,12589],[12593,12686],[12704,12727],[12784,12799],[13312,19893],[19968,40907],[40960,42124],[42192,42237],[42240,42508],[42512,42527],42538,42539,[42560,42591],[42594,42606],[42623,42647],[42656,42725],[42775,42783],[42786,42888],42891,42892,[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],43259,[43274,43301],[43312,43334],[43360,43388],[43396,43442],43471,[43520,43560],[43584,43586],[43588,43595],[43616,43638],43642,[43648,43695],43697,43701,43702,[43705,43709],43712,43714,[43739,43741],[43968,44002],[44032,55203],[55216,55238],[55243,55291],[63744,64045],[64048,64109],[64112,64217],[64256,64262],[64275,64279],64285,[64287,64296],[64298,64310],[64312,64316],64318,64320,64321,64323,64324,[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65262],[65264,65276],[65313,65338],[65345,65370],[65382,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500]])),bg=k("number",h([[48,57],178,179,185,[188,190],[1632,1641],[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2548,2553],[2662,2671],[2790,2799],[2918,2927],[3046,3058],[3174,3183],[3192,3198],[3302,3311],[3430,3445],[3664,3673],[3792,3801],[3872,3891],[4160,4169],[4240,4249],[4969,4988],[5870,5872],[6112,6121],[6128,6137],[6160,6169],[6470,6479],[6608,6618],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],8304,[8308,8313],[8320,8329],[8528,8578],[8581,8585],[9312,9371],[9450,9471],[10102,10131],11517,12295,[12321,12329],[12344,12346],[12690,12693],[12832,12841],[12881,12895],[12928,12937],[12977,12991],[42528,42537],[42726,42735],[43056,43061],[43216,43225],[43264,43273],[43472,43481],[43600,43609],[44016,44025],[65296,65305]])),ni=j('"_"',95),sd=j('"$"',36),fc=j('"@"',64),se=j('"#"',35),Gg=j('"%"',37),Vd=j('"="',61),Hh=k("symbolic",h([33,35,37,38,42,43,45,47,[60,63],92,94,96,124,126,127,[128,159],[161,169],[171,177],180,[182,184],187,191,215,247,[706,709],[722,735],[741,747],749,[751,879],885,888,889,[894,901],903,907,909,930,1014,[1154,1161],[1318,1328],1367,1368,[1370,1376],[1416,1487],[1515,1519],[1523,1568],[1611,1631],[1642,1645],1648,1748,[1750,1764],[1767,1773],1789,1790,[1792,1807],1809,[1840,1868],[1958,1968],[1970,1983],[2027,2035],[2038,2041],[2043,2047],[2070,2073],[2075,2083],[2085,2087],[2089,2307],[2362,2364],[2366,2383],[2385,2391],[2402,2405],2416,[2419,2424],[2432,2436],2445,2446,2449,2450,2473,2481,[2483,2485],[2490,2492],[2494,2509],[2511,2523],2526,[2530,2533],2546,2547,[2554,2564],[2571,2574],2577,2578,2601,2609,2612,2615,[2618,2648],2653,[2655,2661],2672,2673,[2677,2692],2702,2706,2729,2737,2740,[2746,2748],[2750,2767],[2769,2783],[2786,2789],[2800,2820],2829,2830,2833,2834,2857,2865,2868,[2874,2876],[2878,2907],2910,[2914,2917],2928,[2930,2946],2948,[2955,2957],2961,[2966,2968],2971,2973,[2976,2978],[2981,2983],[2987,2989],[3002,3023],[3025,3045],[3059,3076],3085,3089,3113,3124,[3130,3132],[3134,3159],[3162,3167],[3170,3173],[3184,3191],[3199,3204],3213,3217,3241,3252,[3258,3260],[3262,3293],3295,[3298,3301],[3312,3332],3341,3345,3369,[3386,3388],[3390,3423],[3426,3429],[3446,3449],[3456,3460],[3479,3481],3506,3516,3518,3519,[3527,3584],3633,[3636,3647],[3655,3663],[3674,3712],3715,3717,3718,3721,3723,3724,[3726,3731],3736,3744,3748,3750,3752,3753,3756,3761,[3764,3772],3774,3775,3781,[3783,3791],3802,3803,[3806,3839],[3841,3871],[3892,3903],3912,[3949,3975],[3980,4095],[4139,4158],[4170,4175],[4182,4185],[4190,4192],[4194,4196],[4199,4205],[4209,4212],[4226,4237],4239,[4250,4255],[4294,4303],4347,[4349,4351],4681,4686,4687,4695,4697,4702,4703,4745,4750,4751,4785,4790,4791,4799,4801,4806,4807,4823,4881,4886,4887,[4955,4968],[4989,4991],[5008,5023],[5109,5120],5741,5742,[5787,5791],[5867,5869],[5873,5887],5901,[5906,5919],[5938,5951],[5970,5983],5997,[6001,6015],[6068,6102],[6104,6107],[6109,6111],[6122,6127],[6138,6157],6159,[6170,6175],[6264,6271],6313,[6315,6319],[6390,6399],[6429,6469],6510,6511,[6517,6527],[6572,6592],[6600,6607],[6619,6655],[6679,6687],[6741,6783],[6794,6799],[6810,6822],[6824,6916],[6964,6980],[6988,6991],[7002,7042],[7073,7085],[7098,7167],[7204,7231],[7242,7244],[7294,7400],7405,[7410,7423],[7616,7679],7958,7959,7966,7967,8006,8007,8014,8015,8024,8026,8028,8030,8062,8063,8117,8125,[8127,8129],8133,[8141,8143],8148,8149,[8156,8159],[8173,8177],8181,[8189,8191],[8203,8231],[8234,8238],[8240,8286],[8288,8303],8306,8307,[8314,8318],[8330,8335],[8341,8449],[8451,8454],8456,8457,8468,[8470,8472],[8478,8483],8485,8487,8489,8494,8506,8507,[8512,8516],[8522,8525],8527,[8586,9311],[9372,9449],[9472,10101],[10132,11263],11311,11359,[11493,11498],[11503,11516],11518,11519,[11558,11567],[11622,11630],[11632,11647],[11671,11679],11687,11695,11703,11711,11719,11727,11735,[11743,11822],[11824,12287],[12289,12292],[12296,12320],[12330,12336],12342,12343,[12349,12352],[12439,12444],12448,12539,[12544,12548],[12590,12592],[12687,12689],[12694,12703],[12728,12783],[12800,12831],[12842,12880],[12896,12927],[12938,12976],[12992,13311],[19894,19967],[40908,40959],[42125,42191],42238,42239,[42509,42511],[42540,42559],42592,42593,[42607,42622],[42648,42655],[42736,42774],42784,42785,42889,42890,[42893,43002],43010,43014,43019,[43043,43055],[43062,43071],[43124,43137],[43188,43215],[43226,43249],[43256,43258],[43260,43263],[43302,43311],[43335,43359],[43389,43395],[43443,43470],[43482,43519],[43561,43583],43587,[43596,43599],[43610,43615],[43639,43641],[43643,43647],43696,[43698,43700],43703,43704,43710,43711,43713,[43715,43738],[43742,43967],[44003,44015],[44026,44031],[55204,55215],[55239,55242],[55292,63743],64046,64047,64110,64111,[64218,64255],[64263,64274],[64280,64284],64286,64297,64311,64317,64319,64322,64325,[64434,64466],[64830,64847],64912,64913,[64968,65007],[65020,65135],65141,[65277,65295],[65306,65312],[65339,65344],[65371,65381],[65471,65473],65480,65481,65488,65489,65496,65497,[65501,65535]])),vd=j("'\"'",34),mh=j('"\'"',39),Vh=zc(Jf(vd,3,3,!0)),Zh=zc(Jf(mh,3,3,!0)),dh=j('";"',59),cc=j('"*"',42),Bc=j('"^"',94),tg=j('"["',91),qg=j('"{"',123),Hc=j('"}"',125),gc=j('"\\\\"',92),Sc=j('","',44),Fc=mg(t,u,function(a,b){return Bd(a,b)||Dd(a,b)
}),Bf=zc(function(){function a(a,b){var c,d,e;if(e=a.source,47===e.charCodeAt(b)&&47===e.charCodeAt(+b+1))for(d=e.length,b-=-2;;++b)if(b>=d||13===(c=e.charCodeAt(b))||10===c||8232===c||8233===c)return wc(b)}function b(a,b){var c,d,e;if(d=a.source,e=b,47===d.charCodeAt(b)&&42===d.charCodeAt(+b+1)&&33!==d.charCodeAt(+b+2))for(c=d.length,b-=-2;;++b){if(b>=c)throw Eg("Multi-line comment never ends",a,e);if(42===d.charCodeAt(b)&&47===d.charCodeAt(+b+1))return rh(a,+b+2)}}return m(mg(a,b))}()),rh=zc(gh(th,Bf)),Uf=zc(q(sh)),Pd=zc(v(t)),Qd=zc(zi(Pd,!0)),ph=zc(ng(Pd,!0)),Rd=gh(Qd,rh),Vf=q(Pd),rg=zc(v(j('"("',40))),Jc=zc(v(j('")"',41))),sg=zc(v(tg)),Kc=zc(v(j('"]"',93))),pg=zc(v(qg)),Gc=zc(v(Hc)),Ud=v(Vd),Fg=zc(v(Gg)),rd=zc(v(sd)),Rc=zc(v(Sc)),zf=zc(m(Rc)),Tc=mg(gh(["this",Rc],Qd),ph),Af=zc(m(Tc)),Nb=gh(ph,A),qh=zc(function(a,b){return a.options.noindent?Qd(a,b):Nb(a,b)}),Uc=zc(mg(gh(Rc,m(qh)),qh)),Yd=zc(j('"!"',33)),Cf=zc(m(Yd)),yf=zc(m(fc)),Lc=zc(gh(rh,["this",Mc],q(Mc))),Qc=zc(gh(Lc,rh,["this",t])),Wf=zc(q(Lc)),Xf=zc(function(a,b){var c;if(c=a.options,c.noindent){if(Qc(a,b))return wc(b);if(c.embedded&&(Nc(a,b)||Oc(a,b)))return wc(b)}return Wf(a,b)}),Pf=zc(mg($e,ni,sd)),Mf=zc(mg(Pf,bg)),Of=zc(ng(Mf)),$f=zc(function(a,b){return wc(b,a.Nothing(b))}),Zd=function(a,b){return Zd(a,b)},yh=function(a,b){return yh(a,b)},qc=function(a,b){return qc(a,b)},rc=function(a,b){return rc(a,b)},cf=function(a,b){return cf(a,b)},Jb=zc((Lb=fh(Xc(Pf,zi(Mf)),If,Of),Kf(function(a){var b,c,d,e,g;for(g=f(a[0]),b=Ab(a),c=1,d=b.length;d>c;++c)e=b[c],g.push(de(e[0]).toUpperCase()),f(e,g,1);return g.join("")})(Lb))),Lf=zc(v(Jb)),Ob=zc((Lb=ng(Hh),Kf(g)(Lb))),Fh=zc(v(Ob)),Pc=zc(v((Lb=gh(Mc,Vd),Kf(":=")(Lb)))),Nf=zc(v(mg((Lb=v(og(Jb,Ob)),Kf(function(a){return a.join("")})(Lb)),Pc))),kf=zc(v(gh(["this",Nf],Xf))),mf=fh.generic(String)(kf,Rc),ri=zc(function(a,b){var c,d,e;if(d=kf(a,b),d&&(c=a.getMacroByName(d.value))){if(e=c(a,b),!e)throw kh;return e}}),ui=y(function(a){if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));return x(Lf,a)}),Gh=y(function(a){if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));return x(Fh,a)}),lf=y(function(a){if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));return x(kf,a)}),vi=y(function(a){var b,c,d,e,f,g;if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));for(g=[rh],b=Ab(a.split(/([a-z]+)/gi)),e=0,c=b.length;c>e;++e)f=b[e],f&&g.push(x(0===e%2?Ob:Jb,f));return d=gh.apply(void 0,Ab(g)),Kf(a)(d)}),Kb=eb(null),Kb[9]=4,Kb[32]=1,Ne=Kb,Lb=zi(sh),cd=Kf(function(a){var b,c,d,e,f;for(e=0,b=Ab(a),c=b.length;c--;){if(d=b[c],f=Ne[d],!f)throw Error("Unexpected indent char: "+yb(JSON.stringify(d)));e+=ub(f)}return e})(Lb),Mh=zc((Lb=ui("this"),Kf(function(a,b,c){return b.This(c)})(Lb))),Qh=zc((Lb=v(fc),Kf(function(a,b,c){return b.This(c)})(Lb))),Wb=zc((Lb=ui("arguments"),Kf(function(a,b,c){return b.Args(c)})(Lb))),Oh=zc(mg.generic(Nh)(Mh,Qh)),Ph=mg.generic(Nh)(gh(["this",Mh],Hg),gh(["this",Qh],m(Hg))),oe=function(){var a,b;return a=["as","AST","arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","import","Infinity","instanceof","in","let","macro","mutable","NaN","new","not","null","package","private","protected","public","return","static","super","switch","then","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],b=Ab(a).concat(["end"]).sort(),function(c){return c&&c.noindent?b:a}}(),wh=zc(v((Lb=gh(Hg,Hg,Hg),Kf("...")(Lb)))),Ff=zc(m(wh)),vh=zc((Lb=gh(["spread",Ff],["node",Zd]),Kf(function(a,b,c){var d,e;return e=a.spread,d=a.node,"..."===e?b.Spread(c,d):d})(Lb))),Sb=tf.generic(Boolean)("disallowSpaceBeforeAccess",!1),Ic=zc(gh(Uf,rg,rh,["this",Sb(Wc.generic(Qf)(m(gh(["this",fh.generic(Qf)(vh,Rc)],zf),function(){return[]}),m(F(gh.generic(Array)(ph,C,["this",m(gh(A,["this",fh.generic(Qf)(vh,Uc)]),function(){return[]})],Qd,Af,E)),function(){return[]})))],Jc)),qd=tf.generic(Boolean)("disallowSpaceBeforeAccess",!0),ji=zc(qd(gh(mg(gh(sh,rh),n(t)),["this",Wc.generic(Qf)(fh.generic(Qf)(vh,Rc),mg.generic(Array)(gh(z,Rc,ph,["this",F(gh(B,A,["this",fh.generic(Qf)(vh,Uc)],zf,E))]),Kf(function(){return[]})(zf)))]))),Te=zc(mg(Ic,ji)),we=zc(mg((Lb=gh(function(a,b){return a.inAst.peek()?wc(b):void 0},rd,Uf,["this",Te]),Kf(function(a,b,c){return b.Call(c,b.Ident(c,"$"),a)})(Lb)),function(a,b){var c;return c=Lf(a,b),!c||lb(c.value,oe(a.options))||a.hasMacroOrOperator(c.value||a.scope.peek().hasConst(c.value))?a.fail("identifier",b):wc(c.index,a.Ident(b,c.value))})),Gf=zc(zi(ni,!0)),hd=zc(function(){var a,b,c;return c=G(gd),a=gh(["integer",c],["fraction",m(gh(Gf,Hg,Gf,["this",c]),"")],["exponent",m((b=gh(k("[Ee]",h([69,101])),["sign",m(Mg)],["digits",c]),Kf(function(a){var b,c,d;return c=a.e,d=a.sign,b=a.digits,(d?de(d):"")+zb(b)})(b)),"")],m(gh(ni,m(Of)))),Kf(function(a,b,c,d){var e,f,g,h;if(g=a.integer,f=a.fraction,e=a.exponent,h=H(g,f,10,e?parseInt(e,10):0),!isFinite(h))throw Eg("Unable to parse number "+zb(Ug(b.source.substring(c,d))),b,c);return b.Const(c,h)})(a)}()),te=k("[0-9A-Fa-f]",h([[48,57],[65,70],[97,102]])),ve=zc(I(16,k("[Xx]",h([88,120])),te)),kg=k("[0-7]",h([[48,55]])),lg=zc(I(8,k("[Oo]",h([79,111])),te)),kc=k("[01]",h([48,49])),mc=zc(I(2,k("[Bb]",h([66,98])),te)),Vg=zc(function(){function a(a){var c,d,e,f,g,h,i;if(null==(d=b[a])){switch(a){case 2:e=kc;break;case 8:e=kg;break;case 10:e=gd;break;case 16:e=te;break;default:for(i=eb(null),f=0,c=ub(a)>10?ub(a):10;c>f;++f)i[f+48]=!0;for(f=0,c=(ub(a)>36?ub(a):36)-10;c>f;++f)i[f+65]=!0,i[f+97]=!0;h=["[0-"],h.push(String.fromCharCode((ub(a)>9?ub(a):9)+48)),ub(a)>=10&&(g=(ub(a)>36?ub(a):36)-10,h.push("A-"),h.push(String.fromCharCode(g+65)),h.push("a-"),h.push(String.fromCharCode(g+97))),h.push("]"),e=k(h.join(""),i)}return b[a]=G(e)}return d}var b,c,d;return b=[],d=Jf(gd,1,2),c=k("[Rr]",h([82,114])),function(b,e){var f,h,i,j,k,l,m,n,o,p,q;if(l=d(b,e),l&&(n=g(l.value),o=c(b,l.index))){if(m=parseInt(n,10),!isFinite(m))throw Eg("Unable to parse radix "+zb(Ug(n)),b,e);if(2>m)throw Eg("Radix must be at least 2, got "+m,b,e);if(m>36)throw Eg("Radix must be at most 36, got "+m,b,e);if(h=a(m),j=h(b,o.index),!j)throw b.fail("integer after radix",o.index),kh;if(f=Gf(b,j.index).index,k=Hg(b,f),k&&(i=h(b,Gf(b,k.index).index),i&&(q=H(j.value,i.value,m),f=i.index)),null==q&&(q=H(j.value,"",m)),!isFinite(q))throw Eg("Unable to parse number "+zb(Ug(b.source.substring(e,f))),b,e);return p=Gf(b,f),wc(p.index,b.Const(e,q))}}}()),cg=zc(v(mg(ve,lg,mc,Vg,hd))),xe=zc(function(a,b){var c;return c=Lf(a,b),c?wc(c.index,a.Const(b,c.value)):void 0}),ye=zc(mg(xe,cg)),Lb=gh(j('"x"',120),kh,["this",Jf(te,2,2)]),ue=Kf(function(a){return parseInt(g(a),16)})(Lb),oi=gh(j('"u"',117),kh,["this",mg((Lb=Jf(te,4,4),Kf(function(a){return parseInt(g(a),16)})(Lb)),(Lb=gh(qg,["this",Jf(te,1,6)],Hc),Kf(function(a,b,c){var d,e;if(d=g(a),e=parseInt(d,16),e>1114111)throw Eg("Unicode escape sequence too large: '\\u{"+d+"}'",b,c);return e})(Lb)))]),lh=function(){var a,b;return a=eb(null),a[98]=8,a[102]=12,a[114]=13,a[110]=10,a[116]=9,a[118]=11,b=a,mg(Kf(0)(yi),Kf(function(a){return b[a]||a})(s))}(),hc=gh(gc,kh,["this",mg(ue,oi,lh)]),Pe=tf.generic(String)("position","expression"),Se=tf.generic(String)("position","statement"),_b=Pe(function(a,b){return T(a,b)}),_d=zc(mg(_b,Zd)),ae=zc(mg(_d,qc)),zh=gh(sd,Uf,kh,["this",mg(we,gh(rg,["this",Sb(mg(Zd,$f))],Jc))]),nh=zc((Lb=gh(mh,kh,["this",Ai(hc,r(mg(mh,t)))],mh),Kf(function(a,b,c){return b.Const(c,g(a))})(Lb))),yd=Ai(hc,zh,r(mg(vd,t))),xd=zc((Lb=gh(vd,kh,["this",yd],vd),Kf(function(a,b,c){var d,e,f,g,h,i;for(d=[],e=Ab(J(a,b,c)),f=0,g=e.length;g>f;++f)h=e[f],h.isConstValue("")||d.push(h);return i=d,0===i.length?b.Const(c,""):1===i.length&&i[0].isConstType("string")?i[0]:b.string(c,i)})(Lb))),wd=zc((Lb=gh(Gg,vd,kh,["this",yd],vd),Kf(function(a,b,c){var d;return d=J(a,b,c),b.Array(c,d)})(Lb))),Uh="function"==typeof String.prototype.trimRight?function(a){return a.trimRight()}:function(a){return a.replace(/\s+$/,"")},Lb=Ai(hc,r(mg(Zh,t))),$h=Kf(function(a){return[Uh(g(a))]})(Lb),Lb=Ai(hc,zh,r(mg(Vh,t))),Xh=Kf(function(a){var b,c,d,e,f,h;for(h=[],e=[],b=Ab(a),c=0,d=b.length;d>c;++c)f=b[c],"number"==typeof f?e.push(f):f instanceof _f||(e.length>0&&(h.push(g(e)),e=[]),h.push(f));return e.length>0&&h.push(Uh(g(e))),h})(Lb),_h=zc(M(Zh,$h)),Yh=zc(M(Vh,Xh)),Wh=zc((Lb=gh(Gg,Vh,kh,["first",Xh],["numEmptyLines",zi(gh(rh,["this",t]),!0)],["rest",m(F(gh(C,["this",m(gh(K,["this",fh(Xh,gh(t,K))]),function(){return[]})],m(t),E)),function(){return[]})],Vh),Kf(function(a,b,c){var d;return d=L(a,b,c),b.Array(c,d)})(Lb))),ic=zc(gh(gc,Uf,["this",xe])),Ah=zc(v(mg(ic,_h,Yh,Wh,nh,xd,wd))),Wg=function(){var a,b,c,d,e,f,h;return c=j('"r"',114),a=zi(Mf),f=Kf(g)(a),d={},a=gh(se,zi(r(t),!0)),e=Kf(d)(a),a=mg(sh,t),h=Kf(d)(a),v((a=gh(c,["text",mg(gh(Vh,kh,["this",Ai((b=gh(gc,sd),Kf(36)(b)),h,e,zh,r(Vh))],Vh),gh(Zh,kh,["this",Ai(h,e,r(Zh))],Zh),gh(vd,kh,["this",Ai((b=gh(vd,vd),Kf(34)(b)),(b=gh(gc,sd),Kf(36)(b)),zh,r(mg(vd,t,sd)))],vd),gh(mh,kh,["this",Ai((b=gh(mh,mh),Kf(39)(b)),r(mg(mh,t)))],mh))],["flags",f]),Kf(function(a,b,c){var e,f,h,i,j,k,l,m,n,o;for(o=a.text,k=a.flags,n=[],i=[],e=Ab(o),f=0,h=e.length;h>f;++f)l=e[f],"number"==typeof l?i.push(l):l===d||l instanceof _f||(i.length>0&&(n.push(b.Const(c,g(i))),i=[]),n.push(l));if(i.length>0&&n.push(b.Const(c,g(i))),o=0===n.length?b.Const(c,""):1===n.length&&n[0].isConstType("string")?n[0]:b.string(c,n),o.isConst())try{RegExp(String(o.constValue()))}catch(p){throw Eg(p.message,b,c)}for(m=[],e=Ab(k),f=0,h=e.length;h>f;++f){if(j=e[f],lb(j,m))throw Eg("Invalid regular expression: flag "+zb(Ug(j))+" occurred more than once",b,c);if("g"!==j&&"i"!==j&&"m"!==j&&"y"!==j)throw Eg("Invalid regular expression: unknown flag "+zb(Ug(j)),b,c);m.push(j)}return b.Regexp(c,o,k)})(a)))}(),Zc=mg(gh(Hg,["this",ye]),gh(tg,["this",Sb(Zd)],Kc)),Yc=zc(mg(N,cg,Ah,Wg)),bf=zc(mg(Oh,Wb,Yc)),Df=zc(m(ui("not"))),Ef=zc(m(j('"?"',63))),ke=tf.generic(Boolean)("inGenerator",!0)(qc),le=tf.generic(Boolean)("inGenerator",!0)(rc),Ze=j('"<"',60),Ye=v(Ze),re=j('">"',62),qe=v(re),ge=zc(gh(rh,If,re)),Fb=mg.generic(Qf)(gh(ge,["this",mg(yh,$f)]),qc,yh),ee=tf.generic(Boolean)("inGenerator",!1)(Fb),me=tf.generic(Boolean)("inGenerator",!0)(Fb),Ce=mg(we,(Lb=gh(["parent",Ph],["child",ye]),Kf(function(a,b,c){var d,e;return e=a.parent,d=a.child,b.Access(c,e,d)})(Lb)),(Lb=gh(["parent",Oh],ud,["child",ye]),Kf(function(a,b,c){var d,e;return e=a.parent,d=a.child,b.Access(c,b.Access(c,e,b.Const(c,"prototype")),d)})(Lb)),(Lb=gh(["parent",Oh],["isProto",m(ud)],tg,["child",Sb(Zd)],Kc),Kf(function(a,b,c){var d,e,f;return f=a.parent,e=a.isProto,d=a.child,b.Access(c,e?b.Access(c,f,b.Const(c,"prototype")):f,d)})(Lb))),Ig=zc(mg(Hg,ud)),Lb=mg(gh(["type",Ig],["child",ye]),gh(["type",m(ud)],tg,["child",Sb(Zd)],Kc)),Be=Kf(function(a,b,c){var d,e,f;return f=a.type,d=a.child,e="::"===f,function(a,b,f){return b.Access(f,e?b.Access(f,a,b.Const(c,"prototype")):a,d)}})(Lb),Ae=zc((Lb=gh(["head",Ce],["tail",zi(Be)]),Kf(function(a,b,c){var d,e,f,g,h;for(g=a.head,d=Ab(a.tail),e=0,f=d.length;f>e;++e)h=d[e],g=h(g,b,c);return g})(Lb))),ze=zc(function(a,b){var c,d;return(c=Ue(a,b))?(d=c.value,d instanceof Fe||d instanceof Qb?c:void 0):void 0}),Qe=tf.generic(Boolean)("inFunctionTypeParams",!0),ag=tf.generic(Boolean)("inFunctionTypeParams",!1),gi=function(a,b){return gi(a,b)},$b=zc((Lb=gh(sg,["this",m(Sb(gi))],Kc),Kf(function(a,b,c){var d;return d=b.Ident(c,"Array"),a?b.TypeGeneric(c,d,[a]):d})(Lb))),jg=gh(["key",function(a,b){return _c(a,b)}],Lc,["value",gi]),ig=zc((Lb=gh(pg,["this",Sb(m(fh(jg,Tc),function(){return[]}))],zf,Gc),Kf(function(a,b,c){var d,e,f,g,h,i;if(0===a.length)return b.Ident(c,"Object");for(h=[],d=Ab(a),e=0,f=d.length;f>e;++e){if(g=d[e].key,!g.isConst())throw Eg("Expected a constant key, got "+Bb(g),b,g.index);if(i=String(g.constValue()),lb(i,h))throw Eg("Duplicate object key: "+zb(Ug(i)),b,g.index);h.push(i)}return b.TypeObject(c,a)})(Lb))),Lb=gh(mg(gh(rg,Sb(fh(gi,Tc)),Jc),Qe(gi),$f),ge,["this",m(gi)]),je=Kf(function(a,b,c){var d;return d=b.Ident(c,"Function"),a?b.TypeGeneric(c,d,[a]):d})(Lb),Tf=mg(function(a,b){return a.inFunctionTypeParams.peek()?void 0:je(a,b)},gh(rg,["this",Sb(ag(function(a,b){return gi(a,b)}))],Jc),$b,ig,O,(Lb=gh(["base",Ae],["args",m(gh(j('"<"',60),kh,["this",fh(function(a,b){return gi(a,b)},Rc)],rh,j('">"',62)),function(){return[]})]),Kf(function(a,b,c){var d,e;return e=a.base,d=a.args,d.length?b.TypeGeneric(c,e,d):e})(Lb))),Jg=zc(v(Kg)),gi=zc((Lb=fh(Tf,Jg),Kf(function(a,b,c){var d,e,f;for(a=a.slice(),d=Ab(a),e=d.length;e--;)f=d[e],f instanceof hi&&a.splice.apply(a,[e,1].concat(Ab(f.types)));return 1===a.length?a[0]:b.TypeUnion(c,a)})(Lb))),xf=m(gh(ui("as"),kh,["this",gi])),xc=zc(gh(sg,["this",Sb(_d)],Kc)),_c=mg(Ah,Kf(function(a,b,c){return b.Const(c,String(a.constValue()))})(cg),xe),dg=zc(mg(xc,_c)),eg=zc(gh(["this",dg],Lc,q(Td),function(a,b){if(a.options.noindent){if(Pd(a,b))return;if(a.options.embedded&&(Bd(a,b)||Dd(a,b)))return}return wc(b)})),De=mg(we,(Lb=gh(["parent",Ph],["child",xe]),Kf(function(a,b,c){var d,e;return e=a.parent,d=a.child,b.Access(c,e,d)})(Lb))),Lb=gh(["isMutable",l(m(ui("mutable")))],["spread",l(Ff)],["ident",De],["asType",xf],["defaultValue",m(gh(Ud,["this",Zd]))]),Ee=Kf(function(a,b,c){var d,e,f,g,h;if(g=a.isMutable,h=a.spread,f=a.ident,d=a.asType,e=a.defaultValue,h&&e)throw Eg("Cannot specify a default value for a spread parameter",b,c);return b.Param(c,f,e,h,g,d)})(Lb),vg=function(a,b){return vg(a,b)},Lb=gh(sg,Qd,["this",Sb(function(a,b){return xg(a,b)})],Qd,Kc),Zb=Kf(function(a,b,c){return b.Array(c,a)})(Lb),ug=gh(["key",eg],["value",vg]),Lb=gh(["this",Ee],Wf),Ag=Kf(function(a,b,c){var d,e;if(d=a.ident,d instanceof Fe)e=b.Const(c,d.name);else{if(!(d instanceof Qb))throw Error("Unknown object key type: "+zb(a.type));e=d.child}return{key:e,value:a}})(Lb),Xe=m(mg(ug,Ag)),Lb=gh(pg,Qd,["this",Sb(fh(Xe,Tc))],Qd,Gc),hg=Kf(function(a,b,c){return b.object(c,function(){var b,c,d,e,f;for(b=[],c=Ab(a),d=0,e=c.length;e>d;++d)f=c[d],f&&b.push(f);return b}())})(Lb),vg=mg(Ee,Zb,hg),wg=mg(vg,$f),xg=Sb((Lb=fh(wg,Tc),Kf(function(a,b){return Q(R(a),b)})(Lb))),Lb=gh(rg,kh,Qd,["this",xg],Qd,Jc),yg=Kf(function(){function a(b,c,d){var e,f,g,h,i,j,k,l;if(!(b instanceof Qf))throw TypeError("Expected param to be a "+tb(Qf)+", got "+Bb(b));if(!ob(d))throw TypeError("Expected names to be an Array, got "+Bb(d));if(b instanceof zg){if(j=b.ident,j instanceof Fe)k=j.name;else{if(!(j instanceof Qb))throw Error("Unknown param ident type: "+Bb(b));if(h=j.child,!h.isConstType("string"))throw Error("Expected constant access");k=h.constValue()}if(lb(k,d))throw Eg("Duplicate parameter name: "+zb(Ug(k)),c,j.index);d.push(k)}else if(b instanceof Yb)for(e=Ab(b.elements),f=0,g=e.length;g>f;++f)i=e[f],a(i,c,d);else if(b instanceof gg)for(e=Ab(b.pairs),f=0,g=e.length;g>f;++f)l=e[f],a(l.value,c,d);else if(!b instanceof _f)throw Error("Unknown param type: "+Bb(b))}return function(b,c){var d,e,f,g,h;for(g=[],d=Ab(b),e=0,f=d.length;f>e;++e)h=d[e],a(h,c,g);return b}}())(Lb),Yg=tf.generic(Boolean)("requireParameterSequence",!0),td=tf.generic(Boolean)("requireParameterSequence",!1),Gb=function(){function a(a){return a?me:ee}var b,c,d,e,f,g;return d=mg(Yd,fc,cc,Bc),b=zi(d),e=Kf(function(a,b,c){var d,e,f,g,h,i;for(h={autoReturn:!0,bound:!1,generator:!1,curry:!1},i=[],d=Ab(a),e=0,f=d.length;f>e;++e){if(g=d[e],lb(g,i))throw Eg("Function flag "+zb(Ug(de(g)))+" specified more than once",b,c);switch(i.push(g),g){case 33:h.autoReturn=!1;break;case 64:h.bound=!0;break;case 42:h.generator=!0;break;case 94:h.curry=!0;break;default:throw Error("Unknown function flag: "+zb(Ug(de(g))))}}return h})(b),f=m(gh(Ze,["this",fh(we,Rc)],qe),function(){return[]}),g=m(yg,function(){return[]}),c=Qe(xf),Sb(function(b,d){var h,i,j,k,l,m,n,o,p,q,r,s,t;if(o=f(b,d),t=b.pushScope(!0),r=b.requireParameterSequence.peek()?yg:g,q=r(b,o.index),!q)return b.popScope(),void 0;for(h=Ab(q.value),i=h.length;i--;)p=h[i],Rb(t,p);return l=e(b,q.index),m=l.value,j=c(b,l.index),(k=a(l.value.generator)(b,j.index))?(n=b.Function(d,q.value,k.value,m.autoReturn,m.bound,m.curry,j.value,m.generator,o.value),s=P(n,b,d),b.popScope(),wc(k.index,s)):(b.popScope(),void 0)})}(),fe=Yg(Gb),he=zc(gh(rh,se,["this",td(Gb)])),Pg=tf.generic(Boolean)("preventUnclosedObjectLiteral",!0),Xb=zc(Pg((Lb=gh(sg,rh,["this",Sb(Wc(m(gh(["this",fh(vh,Rc)],zf),function(){return[]}),m(F(gh(ph,C,["this",m(gh(A,["this",fh(vh,Uc)]),function(){return[]})],Qd,Af)),function(){return[]})))],Kc),Kf(function(a,b,c){return b.Array(c,a)})(Lb)))),ih=zc((Lb=gh(Fg,n(tg),kh,["this",Xb]),Kf(function(a,b,c){var d;if(d=b.getMacroByLabel("constructSet"),!d)throw Error("Cannot use literal set until the construct-set macro has been defined");return d.func({op:"",node:a},b,c)})(Lb))),Sf=zc(function(a,b){return a.options.noindent?Vf(a,b):wc(b)}),zd=gh(["key",eg],Sf,["value",Zd]),pe=zc(mg(ui("get"),ui("set"))),Rg=zc(gh(["property",mg(ui("property"),pe)],rh,["key",eg],Sf,kh,["value",Zd])),Sg=zc(mg(Rg,zd)),Hf=gh(["property",m(pe)],["key",dg],Wf,["value",fe]),Tg=mg(Sg,Hf),li=zc((Lb=fh(Sg,Rc),Kf(function(a,b,c){return b.object(c,a)})(Lb))),oh=mg((Lb=gh(["this",ze],Wf),Kf(function(a,b,c){var d;if(a instanceof Qb)d=a.child;else{if(!(a instanceof Fe))throw Eg("Unknown ident type: "+Bb(a),b,c);d=b.Const(c,a.name)}return{key:d,value:a}})(Lb)),(Lb=gh(["this",Yc],Wf),Kf(function(a,b,c){var d;return d=a.isConst()&&!a.isConstType("string")?b.Const(c,String(a.value)):a,{key:d,value:a}})(Lb)),(Lb=gh(["this",Mh],Wf),Kf(function(a,b,c){return{key:b.Const(c,"this"),value:a}})(Lb)),(Lb=gh(["this",Wb],Wf),Kf(function(a,b,c){return{key:b.Const(c,"arguments"),value:a}})(Lb)),(Lb=gh(["this",xc],Wf),Kf(function(a){return{key:a,value:a}})(Lb))),We=zc(mg(Tg,(Lb=gh(rh,["flag",m(Mg)],["key",oh]),Kf(function(a,b,c){var d,e;return d=a.flag,e=a.key,d?{key:e.key,value:b.Const(c,43===d)}:e})(Lb)),(Lb=gh(rh,["bool",Mg],["key",xe]),Kf(function(a,b,c){var d,e;return d=a.bool,e=a.key,{key:e,value:b.Const(c,43===d)}})(Lb)))),fg=zc(Sb((Lb=gh(pg,rh,["prototype",m(gh(ui("extends"),["this",Pg(cf)],rh,mg(Rc,n(t),n(Gc))))],["pairs",Wc(m(gh(["this",fh(We,Rc)],zf),function(){return[]}),m(F(gh(ph,C,["this",m(gh(A,["this",fh(We,Uc)]),function(){return[]})],E)),function(){return[]}))],Qd,Af,Qd,Gc),Kf(function(a,b,c){return b.object(c,a.pairs,a.prototype)})(Lb)))),wf=zc((Lb=gh(Fg,qg,kh,rh,["this",Sb(Wc(m(gh(["this",fh(zd,Rc)],zf),function(){return[]}),m(F(gh(ph,C,["this",m(gh(A,["this",fh(zd,Uc)]),function(){return[]})],E)),function(){return[]})))],Qd,Af,Qd,Gc),Kf(function(a,b,c){var d;if(d=b.macros.getByLabel("constructMap"),!d)throw Error("Cannot use literal map until the construct-map macro has been defined");return d.func({op:"",node:b.object(c,a)},b,c)})(Lb))),ed=function(){function a(a,b,c){var d,e,f,g,h;return f=a.rule(b,c),f&&(d=Jc(b,f.index))?(e=b.Ident(c,"x"),h=b.pushScope(!0),h.add(e,!1,ci.any),g=P(b.Function(c,[b.Param(c,e)],a.func({op:f.value,node:e},b,c),!0),b,c),b.popScope(),wc(d.index,g)):void 0}function b(a,b,c){var d,e,f,g,h,i,j,k;return f=!1,a.invertible&&(e=Df(b,c),e.value&&(f=!0),c=e.index),h=a.rule(b,c),h&&(d=Jc(b,h.index))?(g=b.Ident(c,"x"),j=b.Ident(c,"y"),k=b.pushScope(!0),k.add(g,!1,ci.any),k.add(j,!1,ci.any),i=P(b.Function(c,[b.Param(c,g),b.Param(c,j)],a.func({left:g,inverted:f,op:h.value,right:j},b,c),!0,!1,!0),b,c),b.popScope(),wc(d.index,i)):void 0}return function(c,d){var e,f,g,h;for(e=Ab(c.allBinaryOperators()),f=e.length;f--;)if(h=e[f],null!=(g=b(h,c,d)))return g;for(e=Ab(c.prefixUnaryOperators()),f=e.length;f--;)if(h=e[f],null!=(g=a(h,c,d)))return g;for(e=Ab(c.postfixUnaryOperators()),f=e.length;f--;)if(h=e[f],null!=(g=a(h,c,d)))return g}}(),Bg=zc(Sb(gh(rg,["this",mg.generic(Qf)(gh(["this",_b],Jc),(Lb=gh(["left",Zd],["operator",m(U)],Jc),Kf(function(a,b,c){var d,e,f,g,h;return d=a.left,(e=a.operator)?(h=b.pushScope(!0),g=b.makeTmp(c,"x"),f=P(b.Function(c,[b.Param(c,g)],e.operator.func({left:d.rescope(h),inverted:e.inverted,op:e.op,right:g},b,c),!0),b,c),b.popScope(),f):d})(Lb)),ed,(Lb=gh(["operator",U],["right",Zd],Jc),Kf(function(a,b,c){var d,e,f,g,h,i,j,k;return j=a.right,d=a.operator,g=d.op,h=d.operator,e=d.inverted,k=b.pushScope(!0),f=b.makeTmp(c,"x"),i=P(b.Function(c,[b.Param(c,f)],h.func({left:f,inverted:e,op:g,right:j.rescope(k)},b,c),!0),b,c),b.popScope(),i})(Lb)),(Lb=gh(["this",ng(function(a,b){return Ve(a,b)})],Jc),Kf(function(a,b,c){var d,e,f;return f=b.pushScope(!0),d=b.makeTmp(c,"o"),e=P(b.Function(c,[b.Param(c,d)],bd(!1,{type:"normal",existential:!1,node:d},a,b,c).rescope(f),!0,!1),b,c),b.popScope(),e})(Lb)))]))),dd=zc(function(a,b){var c;return a.asterixAsArrayLength.peek()&&(c=cc(a,b))?wc(c.index,a.Ident(b,"__currentArrayLength")):void 0}),Me=zc((Lb=fh(Sg,Uc),Kf(function(a,b,c){return b.object(c,a)})(Lb))),mi=zc(function(a,b){return a.preventUnclosedObjectLiteral.peek()?void 0:wc(b)}),Le=zc(gh(mi,z,rh,t,Qd,["this",F(gh(B,A,["this",Me],E))])),ki=gh(cc,rh,["this",mg(F(gh(D(2),["this",mg(Me,function(a,b){return Ke(a,b)},vh)])),vh)]),Ke=zc((Lb=fh(ki,gh(zf,qh)),Kf(function(a,b,c){return b.Array(c,a)})(Lb))),Je=zc(gh(mi,z,rh,t,Qd,["this",F(gh(B,A,["this",Ke],E))])),He=tf.generic(Boolean)("inAst",!0),Oe=tf.generic(Boolean)("inEvilAst",!0),dc=gh(ui("ASTE"),kh,function(a,b){if(a.inMacro.peek()){if(a.inAst.peek())throw Eg("Can only use ASTE inside of another AST",a,b);return wc(b)}throw Eg("Can only use ASTE inside of a macro",a,b)},["this",function(){var a,b;return b=He(_d),a=Oe(b),function(c,d){var e;return e=Yd(c,d),e?a(c,e.index):b(c,d)}}()]),ec=gh(ui("AST"),kh,function(a,b){if(a.inMacro.peek()){if(a.inAst.peek())throw Eg("Can only use AST inside of another AST",a,b);return wc(b)}throw Eg("Can only use AST inside of a macro",a,b)},["this",function(){var a,b;return b=He(mg(qc,yh)),a=Oe(b),function(c,d){var e;return e=Yd(c,d),e?a(c,e.index):b(c,d)}}()]),bc=zc((Lb=mg(dc,ec),Kf(function(a,b,c){return gf.constifyObject(a,c,b.scope.peek())})(Lb))),Qg=zc(mg.generic(Qf)(li,bf,Xb,fg,ih,wf,bc,Bg,he,ri,we,dd,Le,Je)),bd=function(){function a(a,c,d,e,f){var g;if(rb(e,f.length)){if(g=f[e],!vb.call(b,g.type))throw Error("Unknown call-chain link: "+zb(g.type));return b[g.type](a,c,d,g,e,f)}return d}var b;return b={access:function(){var b;return b={multi:function(a,b,c){return function(d){var e,f,g,h;return f=d,h=[],d.cacheable&&(g=a.makeTmp(b,"ref",d.type(a)),h.push(g.id),f=a.Assign(b,g,"=",d.doWrap(a)),d=g),e=a.Array(b,function(){var e,g,h,i,j;for(e=[],g=Ab(c.elements),j=0,h=g.length;h>j;++j)i=g[j],e.push(a.Access(b,0===j?f:d,i));return e}()),h.length?a.TmpWrapper(b,e,h):e}}},function(c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q;if(i=f.bind?function(a,b){return c.Call(d,c.Ident(d,"__bind"),[a,b])}:function(a,b){return c.Access(d,a,b)},f.owns)return q=[],o=e,e.cacheable&&(p=c.makeTmp(d,"ref",e.type(c)),q.push(p.id),o=c.Assign(d,p,"=",e.doWrap(c)),e=p),j=f.child,n=j,j.cacheable&&(p=c.makeTmp(d,"ref",j.type(c)),q.push(p.id),n=c.Assign(d,p,"=",j.doWrap(c)),j=p),m=c.If(d,function(){var a,b;if(b=c.getMacroByLabel("ownership"),!b)throw Error("Cannot use ownership access until the ownership operator has been defined");if(f.existential){if(a=c.getMacroByLabel("existential"),!a)throw Error("Cannot use existential access until the existential operator has been defined");return c.Binary(d,a.func({op:"",node:o},c,d),"&&",b.func({left:e,op:"",right:n},c,d))}return b.func({left:o,op:"",right:n},c,d)}(),a(c,d,i(e,j),ub(g)+1,h)),q.length?c.TmpWrapper(d,m,q):m;switch(f.type){case"access":l=function(a){return i(a,f.child)};break;case"accessIndex":if(!vb.call(b,f.child.type))throw Error("Unknown index type: "+zb(f.child.type));l=b[f.child.type](c,d,f.child);break;default:throw Error("Unknown link type: "+zb(f.type))}if(f.existential){if(q=[],o=e,e.cacheable&&(p=c.makeTmp(d,"ref",e.type(c)),q.push(p.id),o=c.Assign(d,p,"=",e.doWrap(c)),e=p),k=c.getMacroByLabel("existential"),!k)throw Error("Cannot use existential access until the existential operator has been defined");return m=c.If(d,k.func({op:"",node:o},c,d),a(c,d,l(e),ub(g)+1,h)),q.length?c.TmpWrapper(d,m,q):m}return a(c,d,l(e),ub(g)+1,h)}}(),call:function(b,c,d,e,f,g){var h,i,j,k,l,m,n,o;return e.existential?(o=[],l=d,d instanceof Qb&&!e.isApply&&!e.isNew?(i=d.parent,h=d.child,m=i,k=h,i.cacheable&&(n=b.makeTmp(c,"ref",i.type(b)),o.push(n.id),m=b.Assign(c,n,"=",i.doWrap(b)),i=n),h.cacheable&&(n=b.makeTmp(c,"ref",h.type(b)),o.push(n.id),k=b.Assign(c,n,"=",h.doWrap(b)),h=n),(i!==m||h!==k)&&(l=b.Access(c,m,k),d=b.Access(c,i,h))):d.cacheable&&(n=b.makeTmp(c,"ref",d.type(b)),o.push(n.id),l=b.Assign(c,n,"=",d.doWrap(b)),d=n),j=b.If(c,b.Binary(c,b.Unary(c,"typeof",l),"===",b.Const(c,"function")),a(b,c,b.Call(c,d,e.args,e.isNew,e.isApply),ub(f)+1,g)),o.length?b.TmpWrapper(c,j,o):j):a(b,c,b.Call(c,d,e.args,e.isNew,e.isApply),ub(f)+1,g)}},b.accessIndex=b.access,function(b,c,d,e,f){var g,h,i,j,k,l;if(0===d.length&&!b&&"normal"===c.type)return c.node;for(k=[],"thisAccess"===c.type&&k.push({type:"access",child:c.child,existential:c.existential}),g=Ab(d),h=0,i=g.length;i>h;++h)switch(l=g[h],l.type){case"protoAccess":case"protoAccessIndex":k.push({type:"access",child:e.Const(f,"prototype"),existential:l.existential}),k.push(((j=kb({},l)).type="protoAccess"===l.type?"access":"accessIndex",j));break;case"access":case"accessIndex":k.push(l);break;case"call":if(b&&l.isApply)throw Eg("Cannot call with both new and @ at the same time",e,f);k.push(((j=kb({},l)).isNew=b,j)),b=!1;break;case"generic":k.push({type:"access",child:e.Const(f,"generic"),existential:!1}),k.push({type:"call",args:l.args,existential:!1});break;default:throw Error("Unknown link type: "+zb(l.type))}return b&&k.push({type:"call",args:[],existential:!1,isNew:!0,isApply:!1}),a(e,f,c.node,0,k)}}(),Ve=mg((Lb=gh(Ze,["this",fh(function(a,b){return jc(a,b)},Rc)],qe),Kf(function(a){return{type:"generic",args:a}})(Lb)),(Lb=gh(["existential",Ef],["owns",Cf],["bind",yf],V,["type",Ig],["child",ye]),Kf(function(a){return{type:"::"===a.type?"protoAccess":"access",child:a.child,existential:a.existential,owns:a.owns,bind:a.bind}})(Lb)),(Lb=gh(["existential",Ef],["owns",Cf],["bind",yf],["type",m(ud)],tg,["child",Sb((Mb=fh(tf.generic(Boolean)("asterixAsArrayLength",!0)(Zd),Tc),Kf(function(a){return ub(a.length)>1?{type:"multi",elements:a}:{type:"single",node:a[0]}})(Mb)))],Kc),Kf(function(a,b,c){if("single"===a.child.type)return{type:"::"===a.type?"protoAccess":"access",child:a.child.node,existential:a.existential,owns:a.owns,bind:a.bind};if(a.owns)throw Eg("Cannot use ! when using a multiple or slicing index",b,c);if(a.bind)throw Eg("Cannot use @ when using a multiple or slicing index",b,c);return{type:"::"===a.type?"protoAccessIndex":"accessIndex",child:a.child,existential:a.existential}})(Lb)),(Lb=gh(["existential",l(Ef)],["isApply",l(yf)],["args",Te]),Kf(function(a){return{type:"call",args:a.args,existential:a.existential,isNew:!1,isApply:a.isApply}})(Lb))),Lb=gh(["isNew",l(m(ui("new")))],["head",mg((Mb=gh(["node",Qh],["existential",Ef],["owns",Cf],["bind",yf],["child",ye]),Kf(function(a){return kb({type:"thisAccess"},a)})(Mb)),Kf(function(a){if(!(a instanceof Qf))throw TypeError("Expected node to be a "+tb(Qf)+", got "+Bb(a));return{type:"normal",node:a}})(Qg))],["tail",zi(Ve)]),jc=Kf(function(a,b,c){var d,e,f;return e=a.isNew,d=a.head,f=a.tail,bd(e,kb({},d),f,b,c)})(Lb),Ch=zc((Lb=gh(ui("super"),kh,["child",m(mg(gh(Qd,rh,Hg,["this",ye]),gh(tg,["this",Sb(Zd)],Kc)))],["args",Te]),Kf(function(a,b,c){var d,e;return e=a.child,d=a.args,b.Super(c,e,d)})(Lb))),Wd=zc((Lb=gh(ui("eval"),kh,["this",Te]),Kf(function(a,b,c){if(1!==a.length)throw Eg("Expected only one argument to eval, got "+zb(a.length),b,c);return b.Eval(c,a[0])})(Lb))),Ue=zc(mg(function(a,b){var c,d,e;if(e=a.inAst,e.peek()&&(d=rd(a,rh(a,b).index))){e.push(!1);try{if(c=Te(a,d.index),!c)return;return wc(c.index,a.Call(b,a.Ident(b,"$"),c.value))}finally{e.pop()}}},jc,Ch,Wd)),Ie=tf.generic(Boolean)("inCascade",!0),Dc=zc(gh(q(wh),Hg,n(Hg),["accesses",zi(Ve)],["assignment",m(Ie(S))])),Ec=function(a,b){return Ec(a,b)},Ec=zc(gh(["main",Dc],["subcascades",m(F(gh(ph,B,A,["this",fh(Ec,qh)],E)),function(){return[]})])),Cc=zc((Lb=gh(["head",Ue],["tail",mg(function(a,b){return a.inCascade.peek()?wc(b,[]):void 0},Wc(zi(gh(W,["this",Kf(function(a){return{main:a,subcascades:[]}})(Dc)])),m(gh(z,function(a,b){return a.disallowSpaceBeforeAccess.peek()?void 0:wc(b)},ph,["this",F(gh(B,A,["this",fh(Ec,qh)],E))]),function(){return[]})))]),Kf(function(a,b,c){var d,e,f,g;if(e=a.head,g=a.tail,g.length){if(f=b.getMacroByLabel("cascade"),!f)throw Eg("Cannot use cascades until the cascade macro has been defined",b,c);return d=function(a,c,e){var g;return g=this,c.length?f.func({op:"",node:b.Cascade(e,a,function(){var a,f,h,i,j;for(a=[],f=Ab(c),i=0,j=f.length,h=function(a){var c,f,g,h;return c=a.main,f=c.accesses,g=c.assignment,h=a.subcascades,function(a){var c,i;return c=bd(!1,{type:"normal",node:a},f,b,e),i=null!=g?g(c,e):c,h?d(i,h,e):i}};j>i;++i)a.push(h.call(g,f[i]));return a}())},b,e):a},d(e,g,c)}return e})(Lb))),Ng=zc(function(a,b){var c,d,e,f,g,h,i;if(f=Cc(a,b)){for(e=!0;e;)for(e=!1,c=Ab(a.postfixUnaryOperators()),d=c.length;d--;)if(h=c[d],i=h.rule,g=i(a,f.index)){f=wc(g.index,h.func({op:g.value,node:f.value},a,b)),e=!0;break}return f}}),Og=zc(function(a,b){var c,d,e,f,g,h;for(c=Ab(a.prefixUnaryOperators()),d=c.length;d--;)if(g=c[d],h=g.rule,f=h(a,b),f&&(e=Og(a,f.index)))return wc(e.index,g.func({op:f.value,node:e.value},a,b));return Ng(a,b)}),nc=function(){var a;return a=[],function(b){return a[b]||(a[b]=zc(function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(r=a.binaryOperators(b),!r)return Og(a,c);if(n=nc(+b+1),i=n(a,c)){for(d=Ab(r),e=d.length;e--;){for(q=d[e],v=q.rule,w=[],h=i.index;;){if(k=!1,q.invertible&&(j=Df(a,h),j.value&&(k=!0),h=j.index),p=v(a,h),!p)break;if(o=n(a,p.index),!o)break;if(h=o.index,w.push({inverted:k,op:p.value,node:o.value}),q.maximum&&w.length>=ub(q.maximum))break}if(w.length){if(q.rightToLeft){for(u=w[w.length-1].node,l=w.length;l--;)s=w[l],u=q.func({left:0===l?i.value:w[l-1].node,inverted:s.inverted,op:s.op,right:u},a,c);t=u}else{for(m=i.value,f=0,g=w.length;g>f;++f)s=w[f],m=q.func({left:m,inverted:s.inverted,op:s.op,right:s.node},a,c);t=m}return wc(h,t)}}return i}}))}}(),cf=zc(nc(0)),$d=zc(mg(ri,cf)),Zd=zc(Pe($d)),_e=zc(gh(th,["this",function(a,b){var c,d,e,g,h,i,j,k,l,m,n;if(n=a.source,47===n.charCodeAt(b)&&42===n.charCodeAt(+b+1)&&33===n.charCodeAt(+b+2))for(k=[47,42,33],l=[k],j=n.length,e=+b+3;;++e){if(e>=j)throw Eg("Multi-line license comment never ends",a,b);if(d=n.charCodeAt(e),42===d&&47===n.charCodeAt(e+1)){for(k.push(42,47),m=[],g=0,c=l.length;c>g;++g)i=l[g],g>0&&m.push("\n"),f(i,m);return wc(e+2,a.Comment(b,m.join("")))}if(13===d||10===d||8232===d||8233===d){if(13===d&&10===data.charCodeAt(e+1)&&++e,l.push(k=[]),h=K(a,e+1),!h)throw Eg("Improper indent in multi-line license comment",a,e+1);e=h.index-1}else k.push(d)}}],rh)),sf=Sb((Lb=gh(["type",mg(we,Ah,(Mb=gh(rg,Qd,["this",function(a,b){return rf(a,b)}],Qd,Af,Jc),Kf(function(a,b,c){return b.SyntaxSequence(c,a)})(Mb)),(Mb=gh(rg,Qd,["this",function(a,b){return pf(a,b)}],Qd,Jc),Kf(function(a,b,c){return b.SyntaxChoice(c,a)})(Mb)))],["multiplier",m(mg(Gh("?"),Gh("*"),Gh("+")))]),Kf(function(a,b,c){var d,e;return e=a.type,d=a.multiplier,d?b.SyntaxMany(c,e,d):e})(Lb))),qf=mg(Ah,(Lb=gh(["ident",mg(Oh,we)],["type",m(gh(ui("as"),["this",sf]))]),Kf(function(a,b,c){var d,e;return d=a.ident,e=a.type,b.SyntaxParam(c,d,e)})(Lb))),rf=fh(qf,Rc),pf=fh(sf,Jg),nf=m((Lb=gh(ui("with"),["this",li]),Kf(function(a,b,c){if(a=a.reduce(b),!a.isLiteral())throw Eg("Macro options must be a literal object without any logic, invocation, or anything else",b,c);return a.literalValue()})(Lb)),function(){return{}}),of=gh(A,ui("syntax"),kh,function(a,b){var c,d,e,f;if(f=a.pushScope(!0),e=rf(a,b),!e)throw kh;if(d=nf(a,e.index),a.startMacroSyntax(b,e.value,d.value),X(e,f),f.add(a.Ident(b,"macroName"),!0,ci.string),c=ee(a,d.index),!c)throw kh;
return a.macroSyntax(b,"syntax",e.value,d.value,c.value),a.popScope(),wc(c.index)},rh,Fc),ef=mg(gh(function(a,b){return a.options.noindent?Lc(a,b):wc(b)},rh,t,Qd,F(gh(function(a,b){return a.options.noindent?C(a,b):B(a,b)},fh(of,ph),E)),w),function(a,b){var c,d,e,f,g,h,i;if(i=a.pushScope(!0),h=yg(a,b),!h)throw kh;for(c=Ab(h.value),d=c.length;d--;)g=c[d],Rb(i,g,!0);if(f=nf(a,h.index),e=ee(a,f.index),!e)throw kh;return a.macroSyntax(b,"call",h.value,f.value,e.value),a.popScope(),wc(e.index,a.Nothing(b))}),Re=tf.generic(Boolean)("inMacro",!0),Eb=gh(ui("macro"),["this",Re(function(a,b){var c,d;return(d=mf(a,b))?(a.enterMacro(b,d.value),c=ef(a,d.index),a.exitMacro(),wc(c.index,a.Nothing(b))):void 0})]),nd=function(){var a;return a=gh(ui("define"),ui("syntax"),kh,["name",we],Ud,["value",rf]),Re(function(b,c){var d,e;return(e=a(b,c))?(d=ee(b,e.index),b.defineSyntax(c,e.value.name.name,e.value.value,null!=d?d.value:void 0),wc(d?d.index:e.index,b.Nothing(c))):void 0})}(),Lb=gh(ui("define"),ui("helper"),kh,["name",we],["value",mg(gh(Ud,["this",Zd]),fe)]),kd=Kf(function(a,b,c){var d,e;return d=a.name,e=a.value,b.defineHelper(c,d,e),b.Nothing(c)})(Lb),md=function(){var a;return a=gh(ui("define"),ui("operator"),kh,["type",mg(ui("binary"),ui("assign"),ui("unary"))],["ops",fh(Nf,Rc)],["options",nf]),Re(function(b,c){var d,e,f,g,h,i,j,k;if(k=a(b,c)){switch(d=k.value,j=d.type,f=d.ops,g=d.options,i=b.pushScope(!0),j){case"binary":case"assign":i.add(b.Ident(c,"left"),!0,ci.any),i.add(b.Ident(c,"op"),!0,ci.string),i.add(b.Ident(c,"right"),!0,ci.any);break;case"unary":i.add(b.Ident(c,"op"),!0,ci.string),i.add(b.Ident(c,"node"),!0,ci.any)}if(e=ee(b,k.index),!e)throw kh;switch(j){case"binary":h=b.defineBinaryOperator(c,f,g,e.value);break;case"assign":h=b.defineAssignOperator(c,f,g,e.value);break;case"unary":h=b.defineUnaryOperator(c,f,g,e.value);break;default:throw Error()}return b.popScope(),wc(e.index,b.Nothing(c))}})}(),ld=zc(mg.generic(_f)(Eb,nd,kd,md)),Lb=gh(ui("const"),kh,["name",Lf],Ud,["value",Zd]),jd=Kf(function(a,b,c){var d,e;if(d=a.name,e=a.value,e=b.macroExpandAll(e.reduce(b)),!e.isLiteral())throw Eg("const value must be a literal.",this,c);return b.defineConst(c,d,e.literalValue()),b.Nothing(c)})(Lb),yh=zc(gh(["this",Se(mg.generic(Qf)(_e,ld,jd,T,$d))],rh)),uf=function(){function a(a){var b,c,d,e;if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+Bb(a));for(e=a.length,b=[],d=0;e>d;++d)b.push(a.charCodeAt(d));return c=b,function(b,d){var f,g;for(g=b.source,f=0;e>f;++f)if(g.charCodeAt(ub(d)+f)!==c[f])return;return wc(+d+e,a)}}function b(b){return c[b]||(c[b]=a(b))}var c;return c=eb(null),function(a,c){if("string"!=typeof a)throw TypeError("Expected key to be a String, got "+Bb(a));return function(d,e){var f;return f=d.options[a],"string"!=typeof f&&(f=c),b(f)(d,e)}}}(),Id=zc(uf("embeddedOpenComment","<%--")),Cd=uf("embeddedCloseComment","--%>"),Hd=zc(uf("embeddedOpen","<%")),Bd=zc(gh(Qd,rh,mg(u,uf("embeddedClose","%>")))),Jd=zc(uf("embeddedOpenWrite","<%=")),Dd=zc(gh(Qd,rh,mg(u,uf("embeddedCloseWrite","%>")))),Nc=zc(gh(Lc,Bd)),Oc=zc(gh(Lc,Dd)),Yf=zc(q(Id)),Zf=zc(q(Jd)),pd=tf.generic(Boolean)("allowEmbeddedText",!1),Nd=pd((Lb=gh(Yf,Jd,["this",Zd],Dd),Kf(function(a,b,c){return b.EmbedWrite(c,a,!0)})(Lb))),Fd=mg($,Nd,Z),Ed=zc((Lb=gh(function(a,b){return a.options.embedded&&a.allowEmbeddedText.peek()&&b<a.source.length?wc(b):void 0},Bd,["this",zi(Fd)],mg(u,gh(Yf,Zf,Hd))),Kf(function(a,b,c){return b.Block(c,a)})(Lb))),ch=zc(v(dh)),eh=zc(zi(ch,!0)),af=zc(function(){var a;return a=gh(eh,["this",yh]),function(b,c){var d,e,f,g,h,i;if(f=A(b,c)){for(d=c,h=[],g=!1;;)if(i=Ed(b,d)){if(!(i.value instanceof Qf))throw TypeError("Expected EmbeddedLiteralText to return a Node, got "+Bb(i.value));g=!1,h.push(i.value),d=i.index}else{if(i=g?a(b,d):yh(b,d),!i)break;if(!(i.value instanceof Qf))throw TypeError("Expected "+(g?"Semicolons":"")+"Statement to return a Node, got "+Bb(i.value));g=!0,h.push(i.value),d=i.index}if(0!==h.length)return e=eh(b,d),e&&(d=e.index),wc(d,h)}}}()),$g=wb(function(a,b){function c(){g=9}function d(){for(;;)switch(g){case 0:a.clearCache(),i=af(a,b),g=i?1:9;break;case 1:k=[i.value],h=i.index,++g;case 2:++g;case 3:a.clearCache(),g=a.options.sync?5:4;break;case 4:return++g,{done:!1,value:gb.fulfilled(void 0)};case 5:l=ph(a,h),g=l?6:8;break;case 6:j=af(a,l.index),g=j?7:8;break;case 7:h=j.index,k.push(j.value),g=2;break;case 8:return a.clearCache(),++g,{done:!0,value:wc(h,_(k,a,b))};case 9:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function e(a){throw c(),a}function f(a){try{return d(a)}catch(b){e(b)}}var f,g,d,e,h,i,j,k,l;return g=0,{close:c,iterator:function(){return this},next:function(){return f(void 0)},send:f,"throw":function(a){return e(a),f(void 0)}}}),Db=Kf(_,fh(af,ph)),oc=mg(gh(A,["this",mg.generic(Qf)(Me,Ke)]),Db),Ad=gh(Zf,Yf,Hd,["this",Db],Bd),Gd=mg(Fd,Ad),Ld=wb(function(a,b){function c(){g=7}function d(){for(;;)switch(g){case 0:j=[],h=b,++g;case 1:++g;case 2:a.clearCache(),g=a.options.sync?4:3;break;case 3:return++g,{done:!1,value:gb.fulfilled(void 0)};case 4:i=Gd(a,h),g=i?5:6;break;case 5:if(j.push(i.value),h===i.index)throw Error("Infinite loop detected");h=i.index,g=1;break;case 6:return a.clearCache(),++g,{done:!0,value:wc(h,a.Block(b,j))};case 7:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function e(a){throw c(),a}function f(a){try{return d(a)}catch(b){e(b)}}var f,g,d,e,h,i,j;return g=0,{close:c,iterator:function(){return this},next:function(){return f(void 0)},send:f,"throw":function(a){return e(a),f(void 0)}}}),Sd=gh(Qd,rh,m(eh),ui("end")),uc=F(gh(rh,t,Qd,B,["this",oc],E)),tc=gh(function(a,b){return Qc(a,b)||a.options.embedded&&(Nc(a,b)||Oc(a,b))?wc(b):void 0},Lc,Qd,["this",function(a,b){var c;c=a.indent,c.push(+c.peek()+1);try{return oc(a,b)}finally{c.pop()}}]),sc=gh(["this",tc],Sd),qc=zc(function(a,b){var c,d;return d=a.pushScope(!0),c=a.options.noindent?sc(a,b):uc(a,b),a.popScope(),c}),rc=zc(function(a,b){var c,d;return d=a.pushScope(!0),c=a.options.noindent?tc(a,b):uc(a,b),a.popScope(),c}),vc=m(j('"﻿"',65279)),jh=m(gh(se,Yd,zi(r(t)))),ah=wb(function(a){function b(){f=8}function c(b){for(;;)switch(f){case 0:if(!(a instanceof Dg))throw TypeError("Expected parser to be a "+tb(Dg)+", got "+Bb(a));g=vc(a,0),l=jh(a,g.index),h=Qd(a,l.index),f=u(a,h.index)?1:2;break;case 1:return f=8,{done:!0,value:wc(h.index,a.Root(h.index,a.options.filename,a.Nothing(h.index)))};case 2:a.clearCache(),f=a.options.sync?3:4;break;case 3:k=$g.sync(a,h.index),f=6;break;case 4:return++f,{done:!1,value:$g(a,h.index)};case 5:k=b,++f;case 6:a.clearCache(),f=k?7:8;break;case 7:return i=Qd(a,k.index),j=rh(a,i.index),a.clearCache(),++f,{done:!0,value:wc(j.index,a.Root(h.index,a.options.filename,k.value))};case 8:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function d(a){throw b(),a}function e(a){try{return c(a)}catch(b){d(b)}}var e,f,c,d,g,h,i,j,k,l;return f=0,{close:b,iterator:function(){return this},next:function(){return e(void 0)},send:e,"throw":function(a){return d(a),e(void 0)}}}),Md=wb(function(a){function b(){f=6}function c(b){for(;;)switch(f){case 0:if(!(a instanceof Dg))throw TypeError("Expected parser to be a "+tb(Dg)+", got "+Bb(a));g=vc(a,0),i=jh(a,g.index),a.clearCache(),f=a.options.sync?1:2;break;case 1:h=Ld.sync(a,i.index),f=4;break;case 2:return++f,{done:!1,value:Ld(a,i.index)};case 3:h=b,++f;case 4:a.clearCache(),f=h?5:6;break;case 5:return++f,{done:!0,value:wc(h.index,a.Root(0,a.options.filename,h.value,!0,a.inGenerator.peek()))};case 6:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function d(a){throw b(),a}function e(a){try{return c(a)}catch(b){d(b)}}var e,f,c,d,g,h,i;return f=0,{close:b,iterator:function(){return this},next:function(){return e(void 0)},send:e,"throw":function(a){return d(a),e(void 0)}}}),Kd=wb(function(a){function b(){f=5}function c(b){for(;;)switch(f){case 0:if(!(a instanceof Dg))throw TypeError("Expected parser to be a "+tb(Dg)+", got "+Bb(a));a.inGenerator.push(!0),f=a.options.sync?1:2;break;case 1:g=Md.sync(a),f=4;break;case 2:return++f,{done:!1,value:Md(a)};case 3:g=b,++f;case 4:return a.inGenerator.pop(),++f,{done:!0,value:g};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function d(a){throw b(),a}function e(a){try{return c(a)}catch(b){d(b)}}var e,f,c,d,g;return f=0,{close:b,iterator:function(){return this},next:function(){return e(void 0)},send:e,"throw":function(a){return d(a),e(void 0)}}}),Ub=zc(mg(li,fg,Le)),Tb=zc(mg(Xb,Je)),id=zc(v(mg(gh(t,Qd,["this",oc]),gh(function(a,b){return a.options.embedded?wc(b):void 0},n(Bd),Qd,["this",oc]),$f))),xh=ib(1,function(a){var b;return b=jb(a),function(){function c(e){var f;if(f=this instanceof c?this:eb(d),!b(e))throw TypeError("Expected initial to be a "+tb(a)+", got "+Bb(e));return f.initial=e,f.data=[],f}var d;return d=c.prototype,c.displayName="Stack<"+(null!=a?tb(a):"")+">",d.count=function(){return this.data.length},d.push=function(c){if(!b(c))throw TypeError("Expected value to be a "+tb(a)+", got "+Bb(c));this.data.push(c)},d.pop=function(){var a;if(a=this.data,0===a.length)throw Error("Cannot pop");return a.pop()},d.canPop=function(){return ub(this.data.length)>0},d.peek=function(){var a,b;return a=this.data,b=a.length,0===b?this.initial:a[ub(b)-1]},c}()}),Dg=function(){function a(b,c,d){var e;if(e=this instanceof a?this:eb(q),null==b)b="";else if("string"!=typeof b)throw TypeError("Expected source to be a String, got "+Bb(b));if(e.source=b,null==c)c=ab();else if(!(c instanceof jf))throw TypeError("Expected macros to be a "+tb(jf)+", got "+Bb(c));if(e.macros=c,null==d)d={};else if("object"!=typeof d||null===d)throw TypeError("Expected options to be an Object, got "+Bb(d));return e.options=d,e.indent=xh.generic(Number)(0),e.position=xh.generic(String)("statement"),e.inAst=xh.generic(Boolean)(!1),e.inGenerator=xh.generic(Boolean)(!1),e.inFunctionTypeParams=xh.generic(Boolean)(!1),e.preventUnclosedObjectLiteral=xh.generic(Boolean)(!1),e.allowEmbeddedText=xh.generic(Boolean)(!0),e.inMacro=xh.generic(Boolean)(!1),e.inAst=xh.generic(Boolean)(!1),e.inEvilAst=xh.generic(Boolean)(!1),e.asterixAsArrayLength=xh.generic(Boolean)(!1),e.disallowSpaceBeforeAccess=xh.generic(Boolean)(!1),e.inCascade=xh.generic(Boolean)(!1),e.requireParameterSequence=xh.generic(Boolean)(!1),e.scope=xh.generic(bh)(bh(null,!0)),e.failureMessages=[],e.failureIndex=-1,e.calculateLineInfo(),e.cache=[],e.currentTmpId=-1,e}function c(a){return function(b){var c,d,e,f;if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));for(e=0,f=a.length;e!==f;)if(d=Math.floor((e+f)/2),c=a[d],c>b)f=d;else{if(!(b>c)){e=d;break}if(e===d)break;e=d}return{line:e+1,column:b-ub(a[e])+1}}}function d(a){var b;switch(b=pi(a).sort(function(a,b){return db(a.toLowerCase(),b.toLowerCase())}),b.length){case 0:return"End of input";case 1:return b[0];case 2:return zb(b[0])+" or "+zb(b[1]);default:return zb(xb.call(b,0,-1).join(", "))+", or "+zb(b[ub(b.length)-1])}}function e(a,b){var c,d,f,g,h,i,j,k;if(ob(b)){for(c=[],d=Ab(b),f=0,g=d.length;g>f;++f)h=d[f],c.push(e(a,h));return c}if(b instanceof Qf)return b.reduce(a);if("object"==typeof b&&null!==b){j={};for(i in b)vb.call(b,i)&&(k=b[i],j[i]=e(a,k));return j}return b}function f(a,b,c){return this.Root(a,void 0,this.Return(a,this.Function(a,[b,this.Param(a,this.Ident(a,"__wrap"),void 0,!1,!0,void 0),this.Param(a,this.Ident(a,"__node"),void 0,!1,!0,void 0),this.Param(a,this.Ident(a,"__const"),void 0,!1,!0,void 0)],c,!0,!1),!1))}function g(a){if(a instanceof Fe)return["ident",a.name];if(a instanceof Lh)return["sequence"].concat(Ab(n(h(a.params))));if(a instanceof Ih)return["choice"].concat(function(){var b,c,d,e,f;for(b=[],c=Ab(a.choices),d=0,e=c.length;e>d;++d)f=c[d],b.push(g(f));return b}());if(a.isConst())return["const",a.constValue()];if(a instanceof Jh)return["many",a.multiplier].concat(Ab(g(a.inner)));throw Error("Unknown param type: "+Bb(a))}function h(a){return k(function(){var b,c,d,e,f,h,i;for(b=[],c=Ab(a),d=0,e=c.length;e>d;++d)if(h=c[d],h.isConst())b.push(["const",h.constValue()]);else{if(!(h instanceof Kh))throw Error();if(f=h.ident,f instanceof Fe)i=["ident",f.name];else{if(!(f instanceof Nh))throw Error();i=["this"]}h.asType&&i.push.apply(i,Ab(g(h.asType))),b.push(i)}return b}())}function i(a){var b,c,d,e,f,g;if(b=this,a instanceof Fe)return f=a.name,d=this.macros,d.hasSyntax(f)?d.getSyntax(f):function(a,b){return d.getSyntax(f).call(this,a,b)};if(a instanceof Lh)return j.call(this,a.params);if(a instanceof Ih)return mg.apply(void 0,function(){var c,d,e,f,g;for(c=[],d=Ab(a.choices),e=0,f=d.length;f>e;++e)g=d[e],c.push(i.call(b,g));return c}());if(a.isConst())return g=a.constValue(),"string"!=typeof g&&this.error("Expected a constant string parameter, got "+Bb(g)),vb.call(y,g)&&y[g]||vi(g);if(!(a instanceof Jh))return this.error("Unexpected type: "+Bb(a));switch(e=a.multiplier,c=i.call(this,a.inner),e){case"*":return zi(c);case"+":return ng(c);case"?":return mg(c,$f);default:throw Error("Unknown syntax multiplier: "+zb(e))}}function j(a){var b,c,d,e,f,g,h,j,k,l;for(j=[],b=Ab(a),c=0,d=b.length;d>c;++c)if(h=b[c],h.isConst())k=h.constValue(),"string"!=typeof k&&this.error("Expected a constant string parameter, got "+Bb(k)),j.push(vb.call(y,k)&&y[k]||vi(k));else if(h instanceof Kh){if(f=h.ident,f instanceof Fe)g=f.name;else{if(!(f instanceof Nh))throw Error("Don't know how to handle ident type: "+Bb(f));g="this"}l=null!=(e=h.asType)?e:Fe(0,h.scope,"Expression"),j.push([g,i.call(this,l)])}else this.error("Unexpected parameter type: "+Bb(h));return gh.apply(void 0,Ab(j))}function k(a){if(!ob(a))throw TypeError("Expected operators to be an Array, got "+Bb(a));return 0===a.length?void 0:1!==a.length||ob(a[0])?a:a[0]}function l(a){var b,c;if("object"!=typeof a||null===a)throw TypeError("Expected options to be an Object, got "+Bb(a));for(b in a)if(vb.call(a,b))return c=a[b],a}function m(a){if("object"!=typeof a||null===a)throw TypeError("Expected stateOptions to be an Object, got "+Bb(a));return a.serializeMacros?{minify:!0}:{}}function n(a){return null==a?[]:ob(a)?a:[a]}function o(a){var b,c,d,e,f,g,h,i;if(ob(a)){for(b=[],c=Ab(a),d=0,e=c.length;e>d;++d)f=c[d],f instanceof _f?b.push(void 0):b.push(o(f));return b}if(a instanceof Qf)return a;if("object"!=typeof a||null===a||a instanceof RegExp)return a;h={};for(g in a)vb.call(a,g)&&(i=a[g],i instanceof _f||(h[g]=o(i)));return h}function p(a,b,c,d,e,f,g){function h(a,d,e){var f,h,i,j,k,l,n;if(d.inAst.peek()||!d.expandingMacros)return d.MacroAccess(e,g,d.getLine(e),o(a),d.position.peek(),d.inGenerator.peek(),d.inEvilAst.peek());if(k=d.pushScope(!1),h=gf(d,e,d.position.peek(),d.inGenerator.peek(),d.inEvilAst.peek()),"assignOperator"===b&&h.isIdent(a.left)){if(!h.hasVariable(a.left))throw d.buildError("Trying to assign with "+zb(a.op)+" to unknown variable '"+zb(h.name(a.left))+"'",a.left);if(!h.isVariableMutable(a.left)&&!d.inEvilAst.peek())throw d.buildError("Trying to assign with "+zb(a.op)+" to immutable variable '"+zb(h.name(a.left))+"'",a.left)}try{j=c.call(h,o(a),cb(h,"wrap"),cb(h,"node"),cb(h,"getConst"))}catch(p){throw p instanceof ReferenceError?p:p instanceof hf?(i=d.getPosition(e),p.setPosition(i.line,i.column),p):hf(p,d,e)}return d.popScope(),j instanceof Qf?(f=d.getLine(e),n=function(a){return a instanceof df&&(a.callLine=f),a.walk(n)},j=n(j.reduce(m)),l=h.getTmps(),l.unsaved.length?d.TmpWrapper(e,j,l.unsaved):j):j}var i,j,k,l,m,n,p,q;if(m=this,"function"!=typeof c)throw TypeError("Expected handler to be a Function, got "+Bb(c));switch(q=this.macros,this.currentMacro){case s:return g=q.addBinaryOperator(e,h,f,g);case r:return g=q.addAssignOperator(e,h,f,g);case A:return g=q.addUnaryOperator(e,h,f,g);case t:if(!d)throw Error("Expected rule to exist");return q.addSyntax(f.name,Kf(h)(d)),g=q.addMacro(h,g,null!=f.type&&vb.call(ci,l=f.type)?ci[l]:void 0);default:if(!d)throw Error("Expected rule to exist");for(i=Ab(q.getOrAddByNames(this.currentMacro)),j=0,k=i.length;k>j;++j)p=i[j],null!=this.pendingMacroId&&p.data.pop(),p.data.push(zc((l=gh(["macroName",p.token],["macroData",d]),Kf(h)(l))));if(null!=this.pendingMacroId){if(null!=g)throw Error("Cannot provide the macro id if there is a pending macro id");return n=this.pendingMacroId,this.pendingMacroId=null,q.replaceMacro(n,h,null!=f.type&&vb.call(ci,l=f.type)?ci[l]:void 0),g=n}return g=q.addMacro(h,g,null!=f.type&&vb.call(ci,l=f.type)?ci[l]:void 0)}}var q,r,s,t,u,v,x,y,z,A;return q=a.prototype,a.displayName="Parser",q.buildError=function(a,b){var c;if("string"!=typeof a)throw TypeError("Expected message to be a String, got "+Bb(a));if("number"!=typeof b&&!(b instanceof Qf))throw TypeError("Expected node to be one of Number or "+tb(Qf)+", got "+Bb(b));return c="number"==typeof b?b:b.index,hf(a,this,c)},q.makeTmp=function(a,b,c){if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+Bb(b));if(null==c)c=ci.any;else if(!(c instanceof ci))throw TypeError("Expected type to be a "+tb(ci)+", got "+Bb(c));return this.Tmp(a,this.currentTmpId=ub(this.currentTmpId)+1,b,c)},q.calculateLineInfo=function(){var a,b,d,e,f;for(e=/(?:\r\n?|[\n\u2028\u2029])/g,f=this.source,b=this.lineInfo=[],a=0,b.push(0);;){if(d=e.exec(f),!d)break;a=ub(d.index)+ub(d[0].length),b.push(a)}this.getPosition=c(b)},q.indexFromPosition=function(a,b){var c;if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+Bb(a));if("number"!=typeof b)throw TypeError("Expected column to be a Number, got "+Bb(b));return c=this.lineInfo[a-1],null!=c?ub(c)+b-1:0},q.getPosition=function(a){if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));throw Error("line-info not initialized")},q.getLine=function(a){if(null==a)a=this.index;else if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));return this.getPosition(a).line},q.getColumn=function(a){if(null==a)a=this.index;else if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));return this.getPosition(a).column},q.fail=function(a,b){if("string"!=typeof a)throw TypeError("Expected message to be a String, got "+Bb(a));if("number"!=typeof b)throw TypeError("Expected index to be a Number, got "+Bb(b));b>ub(this.failureIndex)&&(this.failureMessages=[],this.failureIndex=b),b>=ub(this.failureIndex)&&this.failureMessages.push(a)},q.getFailure=function(a){var b,c;if(null==a)a=this.failureIndex;else if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));return c=this.source,b=a<ub(c.length)?JSON.stringify(c.substring(a,a+20)):"end-of-input",Eg("Expected "+zb(d(this.failureMessages))+", but "+yb(b)+" found",this,a)},q.pushScope=function(a,b){var c;if(null==a)a=!1;else if("boolean"!=typeof a)throw TypeError("Expected isTop to be a Boolean, got "+Bb(a));if(null==b)b=null;else if(!(b instanceof bh))throw TypeError("Expected parent to be one of "+(tb(bh)+" or null")+", got "+Bb(b));return c=(b||this.scope.peek()).clone(a),this.scope.push(c),c},q.popScope=function(){this.scope.pop()},q.getPackageVersion=function(){var a;return null==(a=this._packageVersion)?this._packageVersion=ne(this.options.filename):a},q.hasMacroOrOperator=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+Bb(a));return this.macros.hasMacroOrOperator(a)},q.assignOperators=function(){return this.macros.assignOperators},q.allBinaryOperators=function(){return this.macros.allBinaryOperators()},q.binaryOperators=function(a){return this.macros.binaryOperators[a]},q.prefixUnaryOperators=function(){return this.macros.prefixUnaryOperators},q.postfixUnaryOperators=function(){return this.macros.postfixUnaryOperators},q.getMacroByName=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+Bb(a));return this.macros.getByName(a)},q.getMacroByLabel=function(a){if("string"!=typeof a)throw TypeError("Expected label to be a String, got "+Bb(a));return this.macros.getByLabel(a)},q.enterMacro=function(a,b){if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));if(!b)throw Error("Must provide a macro name");if(this.currentMacro)throw Eg("Attempting to define a macro "+zb(Ug(String(b)))+" inside a macro "+zb(Ug(String(this.currentMacro))),this,a);this.currentMacro=b},q.exitMacro=function(){if(!this.currentMacro)throw Error("Attempting to exit a macro when not in one");this.currentMacro=null},q.defineHelper=function(a,c,d){var e,f,g,h,i,j;if(!(c instanceof Fe))throw TypeError("Expected name to be a "+tb(Fe)+", got "+Bb(c));if(!(d instanceof Qf))throw TypeError("Expected value to be a "+tb(Qf)+", got "+Bb(d));i=b("./jstranslator"),h=this.macroExpandAll(d).reduce(this),j=h.type(this),e=i.defineHelper(this.macros,this.getPosition,c,h,j),g=e.helper,f=e.dependencies,this.options.serializeMacros&&this.macros.addSerializedHelper(c.name,g,j,f)},y={",":Rc,";":ch,":":Lc,":=":Pc,"":$f,"\n":qh,"<":Ye,">":qe,"(":rg,")":Jc,"[":sg,"]":Kc,"{":pg,"}":Gc,end:w},v=function(){var a;return a={ident:function(a,b){return Fe(0,a,b)},sequence:function(a){var b;return b=xb.call(arguments,1),Lh(0,a,u(b,a))},choice:function(a){var b;return b=xb.call(arguments,1),Ih(0,a,function(){var c,d,e,f;for(c=[],d=0,e=b.length;e>d;++d)f=b[d],c.push(v(f,a));return c}())},"const":function(a,b){return $c(0,a,b)},many:function(a,b){var c;return c=xb.call(arguments,2),Jh(0,a,v(c,a),b)}},function(b,c){var d;if(null==b)b=[];else if(!ob(b))throw TypeError("Expected asType to be an Array, got "+Bb(b));if(0!==b.length){if(d=b[0],vb.call(a,d))return a[d].apply(a,[c].concat(Ab(xb.call(b,1))));throw Error("Unknown as-type: "+String(d))}}}(),u=function(){var a;return a={"const":function(a,b){return $c(0,a,b)},ident:function(a,b){var c;return c=xb.call(arguments,2),Kh(0,a,Fe(0,a,b),v(c,a))},"this":function(a){var b;return b=xb.call(arguments,1),Kh(0,a,Nh(0,a),v(b,a))}},function(b,c){var d,e,f,g,h,i;if(!(c instanceof bh))throw TypeError("Expected scope to be a "+tb(bh)+", got "+Bb(c));for(d=[],e=Ab(n(b)),f=0,g=e.length;g>f;++f){if(h=e[f],i=h[0],!vb.call(a,i))throw Error("Unknown param type: "+String(i));d.push(a[i].apply(a,[c].concat(Ab(xb.call(h,1)))))}return d}}(),z={syntax:function(a,b,c,d,g,i){var n,o,p,q,r,s,t,u,v,w,x,y;if(n=this,s=this.Ident(a,"macroFullData"),p=this.Param(a,s,void 0,!1,!1,void 0),t=this.Ident(a,"macroName"),v=this.scope.peek(),v.add(t,!1,ci.string),r=this.Ident(a,"macroData"),v.add(r,!1,ci.object),c=this.Block(a,[this.Var(a,t,!1),this.Assign(a,t,"=",this.Access(a,s,this.Const(a,"macroName"))),this.Var(a,r,!1),this.Assign(a,r,"=",this.Access(a,s,this.Const(a,"macroData")))].concat(function(){var c,d,e,f,g;for(c=[],d=Ab(b),e=0,f=d.length;f>e;++e)g=d[e],g instanceof Kh&&(v.add(g.ident,!0,ci.any),c.push(n.Block(a,[n.Var(a,g.ident,!0),n.Assign(a,g.ident,"=",n.Access(a,r,n.Const(a,g.ident.name)))])));return c}(),[c])),u=f.call(this,a,p,c),y=i(this.macroExpandAll(u).reduce(this),this.macros,this.getPosition,{"return":!0}),o=y.node.toString(m(g)),g.serializeMacros&&(w=o),q=Function(o)(),"function"!=typeof q)throw Error("Error creating function for macro: "+String(this.currentMacro));return x=this,{handler:function(a){var b;return b=xb.call(arguments,1),q.apply(this,[e(x,a)].concat(Ab(b))).reduce(x)},rule:j.call(this,b),serialization:null!=w?{type:"syntax",code:w,options:l(d),params:h(b),names:k(this.currentMacro)}:void 0}},defineSyntax:function(a,b,c,d,g,i){var k,n,o,p;return k=this,p=this,n=null!=c?function(){var h,j,l,n,q,r,s;if(n=k.Ident(a,"macroData"),j=k.Param(a,n,void 0,!1,!1,void 0),r=k.scope.peek(),c=k.Block(a,function(){var c,d,e,f,g;for(c=[],d=Ab(b),e=0,f=d.length;f>e;++e)g=d[e],g instanceof Kh&&(r.add(g.ident,!0,ci.any),c.push(k.Block(a,[k.Var(a,g.ident,!0),k.Assign(a,g.ident,"=",k.Access(a,n,k.Const(a,g.ident.name)))])));return c}().concat([c])),q=f.call(k,a,j,c),s=i(k.macroExpandAll(q).reduce(p),k.macros,k.getPosition,{"return":!0}),h=s.node.toString(m(g)),g.serializeMacros&&(o=h),l=Function(h)(),"function"!=typeof l)throw Error("Error creating function for syntax: "+zb(d.name));return function(a){var b;return b=xb.call(arguments,1),e(p,l.apply(this,[e(p,a)].concat(Ab(b))))}}():function(a){var b;return b=xb.call(arguments,1),e(p,a)},{handler:n,rule:j.call(this,b),serialization:g.serializeMacros?{type:"defineSyntax",code:o,options:l(d),params:h(b)}:void 0}},call:function(a,b,c,d,g,h){var i,j,n,o,p,q,r,s,t,u,v,w;if(i=this,q=this.Ident(a,"macroFullData"),n=this.Param(a,q,void 0,!1,!1,void 0),t=this.scope.peek(),r=this.Ident(a,"macroName"),t.add(r,!1,ci.string),p=this.Ident(a,"macroData"),t.add(p,!1,ci.object),c=this.Block(a,[this.Var(a,r,!1),this.Assign(a,r,"=",this.Access(a,q,this.Const(a,"macroName"))),this.Var(a,p,!1),this.Assign(a,p,"=",this.Access(a,q,this.Const(a,"macroData")))].concat(function(){var c,d,e,f,g;for(c=[],d=Ab(b),f=0,e=d.length;e>f;++f)g=d[f],g instanceof zg&&(t.add(g.ident,!0,ci.any),c.push(i.Block(a,[i.Var(a,g.ident,!0),i.Assign(a,g.ident,"=",i.Access(a,p,i.Const(a,f)))])));return c}(),[c])),s=f.call(this,a,n,c),w=h(this.macroExpandAll(s).reduce(this),this.macros,this.getPosition,{"return":!0}),j=w.node.toString(m(g)),g.serializeMacros&&(u=j),o=Function(j)(),"function"!=typeof o)throw Error("Error creating function for macro: "+zb(this.currentMacro));return v=this,o=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(v,b)].concat(Ab(c))).reduce(v)}}(o),{handler:o,rule:Te,serialization:null!=u?{type:"call",code:u,options:l(d),names:k(this.currentMacro)}:void 0}},binaryOperator:function(a,b,c,d,g,h){var i,j,n,o,p,q,r,s,t,u;if(i=this,p=this.Ident(a,"macroData"),n=this.Param(a,p,void 0,!1,!1,void 0),r=this.scope.peek(),c=this.Block(a,function(){var b,c,d,e,f,g;for(b=[],c=["left","op","right"],d=0,e=c.length;e>d;++d)g=c[d],f=i.Ident(a,g),r.add(f,!0,ci.any),b.push(i.Block(a,[i.Var(a,f,!0),i.Assign(a,f,"=",i.Access(a,p,i.Const(a,g)))]));return b}().concat([c])),q=f.call(this,a,n,c),u=h(this.macroExpandAll(q).reduce(this),this.macros,this.getPosition,{"return":!0}),j=u.node.toString(m(g)),g.serializeMacros&&(s=j),o=Function(j)(),"function"!=typeof o)throw Error("Error creating function for binary operator "+zb(b.join(", ")));return t=this,o=d.invertible?function(a){return function(b){var c,d;return c=xb.call(arguments,1),d=a.apply(this,[e(t,b)].concat(Ab(c))),b.inverted?ii(d.index,d.scope,"!",d).reduce(t):d.reduce(t)}}(o):function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(t,b)].concat(Ab(c))).reduce(t)}}(o),{handler:o,rule:void 0,serialization:null!=s?{type:"binaryOperator",code:s,operators:k(b),options:l(d)}:void 0}},assignOperator:function(a,b,c,d,g,h){var i,j,n,o,p,q,r,s,t,u;if(i=this,p=this.Ident(a,"macroData"),n=this.Param(a,p,void 0,!1,!1,void 0),r=this.scope.peek(),c=this.Block(a,function(){var b,c,d,e,f,g;for(b=[],c=["left","op","right"],d=0,e=c.length;e>d;++d)g=c[d],f=i.Ident(a,g),r.add(f,!0,ci.any),b.push(i.Block(a,[i.Var(a,f,!0),i.Assign(a,f,"=",i.Access(a,p,i.Const(a,g)))]));return b}().concat([c])),q=f.call(this,a,n,c),u=h(this.macroExpandAll(q).reduce(this),this.macros,this.getPosition,{"return":!0}),j=u.node.toString(m(g)),g.serializeMacros&&(s=j),o=Function(j)(),"function"!=typeof o)throw Error("Error creating function for assign operator "+zb(b.join(", ")));return t=this,o=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(t,b)].concat(Ab(c))).reduce(t)}}(o),{handler:o,rule:void 0,serialization:null!=s?{type:"assignOperator",code:s,operators:k(b),options:l(d)}:void 0}},unaryOperator:function(a,b,c,d,g,h){var i,j,n,o,p,q,r,s,t,u;if(i=this,p=this.Ident(a,"macroData"),n=this.Param(a,p,void 0,!1,!1,void 0),r=this.scope.peek(),c=this.Block(a,function(){var b,c,d,e,f,g;for(b=[],c=["op","node"],d=0,e=c.length;e>d;++d)g=c[d],f=i.Ident(a,g),r.add(f,!0,ci.any),b.push(i.Block(a,[i.Var(a,f,!0),i.Assign(a,f,"=",i.Access(a,p,i.Const(a,g)))]));return b}().concat([c])),q=f.call(this,a,n,c),u=h(this.macroExpandAll(q).reduce(this),this.macros,this.getPosition,{"return":!0}),j=u.node.toString(m(g)),g.serializeMacros&&(s=j),o=Function(j)(),"function"!=typeof o)throw Error("Error creating function for unary operator "+zb(b.join(", ")));return t=this,o=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(t,b)].concat(Ab(c))).reduce(t)}}(o),{handler:o,rule:void 0,serialization:null!=s?{type:"unaryOperator",code:s,operators:k(b),options:l(d)}:void 0}}},x={syntax:function(a){var b,c,d,f,g,h,i,k;if(b=this,c=a.code,i=a.params,g=a.names,h=a.options,null==h&&(h={}),f=a.id,g=n(g),d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for macro "+zb(name));return k=this,d=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(k,b)].concat(Ab(c))).reduce(k)}}(d),this.enterMacro(0,g),p.call(this,0,"syntax",d,j.call(this,u(i,this.scope.peek())),null,h,f),this.exitMacro()},call:function(a){var b,c,d,f,g,h,i;if(b=this,c=a.code,g=a.names,h=a.options,null==h&&(h={}),f=a.id,g=n(g),d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for macro "+zb(name));return i=this,d=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(i,b)].concat(Ab(c))).reduce(i)}}(d),this.enterMacro(0,g),p.call(this,0,"call",d,Te,null,h,f),this.exitMacro()},defineSyntax:function(a){var b,c,d,f,g,h,i;if(b=this,c=a.code,h=a.params,g=a.options,null==g&&(g={}),f=a.id,this.macros.hasSyntax(g.name))throw Error("Cannot override already-defined syntax: "+zb(g.name));if(i=this,null!=c){if(d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for macro syntax "+zb(g.name));d=function(a){return function(b){var c;return c=xb.call(arguments,1),e(i,a.apply(this,[e(i,b)].concat(Ab(c))))}}(d)}else d=function(a){return e(i,a)};return this.enterMacro(0,t),p.call(this,0,"defineSyntax",d,j.call(this,u(h,this.scope.peek())),null,g,f),this.exitMacro()},binaryOperator:function(a){var b,c,d,f,g,h,i;if(b=this,c=a.code,g=a.operators,h=a.options,null==h&&(h={}),f=a.id,g=n(g),d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for binary operator "+zb(g.join(", ")));return i=this,d=h.invertible?function(a){return function(b){var c,d;return c=xb.call(arguments,1),d=a.apply(this,[e(i,b)].concat(Ab(c))),b.inverted?ii(d.index,d.scope,"!",d).reduce(i):d.reduce(i)}}(d):function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(i,b)].concat(Ab(c))).reduce(i)}}(d),this.enterMacro(0,s),p.call(this,0,"binaryOperator",d,void 0,g,h,f),this.exitMacro()},assignOperator:function(a){var b,c,d,f,g,h,i;if(b=this,c=a.code,g=a.operators,h=a.options,null==h&&(h={}),f=a.id,g=n(g),d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for assign operator "+zb(g.join(", ")));return i=this,d=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(i,b)].concat(Ab(c))).reduce(i)}}(d),this.enterMacro(0,r),p.call(this,0,"assignOperator",d,void 0,g,h,f),this.exitMacro()},unaryOperator:function(a){var b,c,d,f,g,h,i;if(b=this,c=a.code,g=a.operators,h=a.options,null==h&&(h={}),f=a.id,g=n(g),d=Function(c)(),"function"!=typeof d)throw Error("Error deserializing function for unary operator "+zb(g.join(", ")));i=this,d=function(a){return function(b){var c;return c=xb.call(arguments,1),a.apply(this,[e(i,b)].concat(Ab(c))).reduce(i)}}(d),this.enterMacro(0,A),p.call(this,0,"unaryOperator",d,void 0,g,h,f),this.exitMacro()}},q.startMacroSyntax=function(a,b,c){function d(a,b,c){if(b.inAst.peek()||!b.expandingMacros)return b.MacroAccess(c,k,b.getLine(c),o(a),b.position.peek(),b.inGenerator.peek(),b.inEvilAst.peek());throw Error("Cannot use macro until fully defined")}var e,f,g,h,i,k,l,m;if(!ob(b))throw TypeError("Expected params to be an Array, got "+Bb(b));if(null==c&&(c={}),!this.currentMacro)throw Error("Attempting to specify a macro syntax when not in a macro");
for(m=j.call(this,b),l=this.macros,e=Ab(l.getOrAddByNames(this.currentMacro)),f=0,g=e.length;g>f;++f)i=e[f],i.data.push((h=gh(["macroName",i.token],["macroData",m]),Kf(d)(h)));return k=l.addMacro(d,void 0,null!=c.type&&vb.call(ci,h=c.type)?ci[h]:void 0),this.pendingMacroId=k,b},q.macroSyntax=function(a,c,d,e,f){var g,h,i,j,k;if(!ob(d))throw TypeError("Expected params to be an Array, got "+Bb(d));if(!vb.call(z,c))throw Error("Unknown macro-syntax type: "+zb(c));this.currentMacro||this.error("Attempting to specify a macro syntax when not in a macro"),g=z[c].call(this,a,d,f,e,this.options,b("./jstranslator")),h=g.handler,j=g.rule,k=g.serialization,i=p.call(this,a,c,h,j,d,e),null!=k&&(k.id=i,this.macros.addMacroSerialization(k))},s={},q.defineBinaryOperator=function(a,b,c,d){var e;if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));if(!ob(b))throw TypeError("Expected operators to be an Array, got "+Bb(b));for(e=b.length;e--;)if("string"!=typeof b[e])throw TypeError("Expected "+("operators["+e+"]")+" to be a String, got "+Bb(b[e]));if("object"!=typeof c||null===c)throw TypeError("Expected options to be an Object, got "+Bb(c));if(!(d instanceof Qf))throw TypeError("Expected body to be a "+tb(Qf)+", got "+Bb(d));return this.enterMacro(a,s),this.macroSyntax(a,"binaryOperator",b,c,d),this.exitMacro()},r={},q.defineAssignOperator=function(a,b,c,d){var e;if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));if(!ob(b))throw TypeError("Expected operators to be an Array, got "+Bb(b));for(e=b.length;e--;)if("string"!=typeof b[e])throw TypeError("Expected "+("operators["+e+"]")+" to be a String, got "+Bb(b[e]));if("object"!=typeof c||null===c)throw TypeError("Expected options to be an Object, got "+Bb(c));if(!(d instanceof Qf))throw TypeError("Expected body to be a "+tb(Qf)+", got "+Bb(d));return this.enterMacro(a,r),this.macroSyntax(a,"assignOperator",b,c,d),this.exitMacro()},A={},q.defineUnaryOperator=function(a,b,c,d){var e;if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+Bb(a));if(!ob(b))throw TypeError("Expected operators to be an Array, got "+Bb(b));for(e=b.length;e--;)if("string"!=typeof b[e])throw TypeError("Expected "+("operators["+e+"]")+" to be a String, got "+Bb(b[e]));if("object"!=typeof c||null===c)throw TypeError("Expected options to be an Object, got "+Bb(c));if(!(d instanceof Qf))throw TypeError("Expected body to be a "+tb(Qf)+", got "+Bb(d));return this.enterMacro(a,A),this.macroSyntax(a,"unaryOperator",b,c,d),this.exitMacro()},t={},q.defineSyntax=function(a,b,c,d){return this.enterMacro(a,t),this.macroSyntax(a,"defineSyntax",c,{name:b},d),this.exitMacro()},q.defineConst=function(a,b,c){var d;if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+Bb(b));d=this.scope.peek(),d===this.scope.initial&&(this.macros.addConst(b,c),this.options.serializeMacros&&this.macros.addSerializedConst(b)),d.addConst(b,c)},q.getConst=function(a,b){var c,d;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+Bb(a));if(null==b)b=this.scope.peek();else if(!(b instanceof bh))throw TypeError("Expected scope to be a "+tb(bh)+", got "+Bb(b));return null!=(c=b.constValue(a))?c:(d=this.macros.consts,vb.call(d,a)?{value:d[a]}:void 0)},q.deserializeMacros=function(a){var b,c,d,e,f,g,h;for(h in x)if(vb.call(x,h))for(f=x[h],b=Ab(null!=(e=vb.call(a,h)?a[h]:void 0)?e:[]),c=0,d=b.length;d>c;++c)g=b[c],f.call(this,g)},q.macroExpand1=function(a){var b,c,d,e,f,g;if(null!=a._macroExpanded)return a._macroExpanded;if(a instanceof df){for(e=[];a instanceof df;){e.push(a),this.position.push(a.position),this.inGenerator.push(a.inGenerator),this.inEvilAst.push(a.inEvilAst),this.scope.push(a.scope),f=this.expandingMacros,this.expandingMacros=!0,g=void 0;try{g=this.macros.getById(a.id)(a.data,this,a.index)}catch(h){throw h instanceof hf&&h.setPosition(a.callLine,0),h}finally{this.scope.pop(),this.position.pop(),this.inGenerator.pop(),this.inEvilAst.pop(),this.expandingMacros=f}a=a.doWrapped?g.doWrap(this):g}for(b=0,c=e.length;c>b;++b)d=e[b],d._macroExpanded=a;return a}return a._macroExpanded=a},q.macroExpandAllAsync=function(a,b){function c(a,b){var f,g,h;if(ub((new Date).getTime())-ub(e)>5)return hh(function(){return e=(new Date).getTime(),c(a,b)});if(null!=a._macroExpandAlled)return b(null,a._macroExpandAlled);if(a instanceof df){try{h=d.macroExpand1(a)}catch(i){return b(i)}return h instanceof Qf?c(h,(g=!1,function(c,d){if(g)throw Error("Attempted to call function more than once");return g=!0,null!=c?b(c):b(null,h._macroExpandAlled=h._macroExpanded=d._macroExpandAlled=d._macroExpanded=a._macroExpandAlled=a._macroExpanded=d)})):b(null,a._macroExpandAlled=a._macroExpanded=h)}return a.walkAsync(c,(f=!1,function(c,d){if(f)throw Error("Attempted to call function more than once");return f=!0,null!=c?b(c):b(null,d._macroExpandAlled=d._macroExpanded=a._macroExpandAlled=a._macroExpanded=d)}))}var d,e;return d=this,e=(new Date).getTime(),c(a,b)},q.macroExpandAll=function(a){function b(a){var d,e;return null!=a._macroExpandAlled?a._macroExpandAlled:a instanceof df?(d=c.macroExpand1(a),d instanceof Qf?(e=b(d),d._macroExpandAlled=d._macroExpanded=e._macroExpandAlled=e._macroExpanded=a._macroExpandAlled=a._macroExpanded=e):a._macroExpandAlled=a._macroExpanded=d):(e=a.walk(b),e._macroExpandAlled=e._macroExpanded=a._macroExpandAlled=a._macroExpanded=e)}var c;return c=this,b(a)},q.macroExpandAllPromise=function(a){var b;return this.options.sync?gb.fulfilled(this.macroExpandAll(a)):(b=gb(),this.macroExpandAllAsync(a,function(a,c){return a?b.reject(a):b.fulfill(c)}),b.promise)},q.clearCache=function(){this.cache=[]},a.addNodeFactory=function(b,c){a.prototype[b]=function(a){var b;return b=xb.call(arguments,1),c.apply(void 0,[a,this.scope.peek()].concat(Ab(b)))}},a}(),Cg=wb(function(a,b,c){function d(){h=8}function e(d){for(;;)switch(h){case 0:if("string"!=typeof a)throw TypeError("Expected source to be a String, got "+Bb(a));if(null==b)b=null;else if(!(b instanceof jf))throw TypeError("Expected macros to be one of "+(tb(jf)+" or null")+", got "+Bb(b));if(null==c)c={};else if("object"!=typeof c||null===c)throw TypeError("Expected options to be an Object, got "+Bb(c));n=Dg(a,null!=b?b.clone():void 0,c),q=c.embeddedGenerator?Kd:c.embedded?Md:ah,r=(new Date).getTime(),p=void 0,++h;case 1:h=c.sync?2:3;break;case 2:p=q.sync(n),h=6;break;case 3:return++h,{done:!1,value:q(n)};case 4:p=d,h=6;break;case 5:if(i!==kh)throw i;++h;case 6:if(n.clearCache(),k=(new Date).getTime(),"function"==typeof c.progress&&c.progress("parse",ub(k)-ub(r)),!p||ub(p.index)<a.length)throw n.getFailure(null!=p?p.index:void 0);return++h,{done:!1,value:n.macroExpandAllPromise(p.value)};case 7:return m=d,j=(new Date).getTime(),"function"==typeof c.progress&&c.progress("macroExpand",ub(j)-ub(k)),o=m.reduce(n),l=(new Date).getTime(),"function"==typeof c.progress&&c.progress("reduce",ub(l)-ub(j)),++h,{done:!0,value:{result:o,macros:n.macros,getPosition:n.getPosition,parseTime:ub(k)-ub(r),macroExpandTime:ub(j)-ub(k),reduceTime:ub(l)-ub(j),time:ub(l)-ub(r)}};case 8:return{done:!0,value:void 0};default:throw Error("Unknown state: "+h)}}function f(a){if(!(h>=1&&4>=h))throw d(),a;i=a,h=5}function g(a){for(;;)try{return e(a)}catch(b){f(b)}}var g,h,e,f,i,j,k,l,m,n,o,p,q,r;return h=0,{close:d,iterator:function(){return this},next:function(){return g(void 0)},send:g,"throw":function(a){return f(a),g(void 0)}}}),Cg.ParserError=Eg,Cg.MacroError=hf,Cg.Node=Qf,Cg.MacroHolder=jf,Cg.unusedCaches=qi,Cg.deserializePrelude=function(a){var b,c;return b="string"==typeof a?JSON.parse(a):a,c=Dg(),c.macros.deserialize(b,c,{}),{result:_f(0,c.scope.peek()),macros:c.macros}},Cg.getReservedWords=function(a,b){return null==b&&(b={}),pi(Ab(oe(b)).concat(Ab(null!=a&&"function"==typeof a.getMacroAndOperatorNames&&a.getMacroAndOperatorNames()||[])))},a.exports=Cg;for(Cb=["Access","AccessMulti","Args","Array","Assign","Binary","Block","Break","Call","Cascade","Comment","Const","Continue","Debugger","Def","EmbedWrite","Eval","For","ForIn","Function","Ident","If","MacroAccess","MacroConst","Nothing","Object","Param","Regexp","Return","Root","Spread","Super","Switch","SyntaxChoice","SyntaxMany","SyntaxParam","SyntaxSequence","This","Throw","Tmp","TmpWrapper","TryCatch","TryFinally","TypeFunction","TypeGeneric","TypeObject","TypeUnion","Unary","Var","Yield"],Hb=0,Ib=Cb.length;Ib>Hb;++Hb)Rf=Cb[Hb],Dg.addNodeFactory(Rf,Qf[Rf]);Dg.prototype.string=Qf.string,Dg.prototype.arrayParam=Dg.prototype.array,Dg.prototype.object=Qf.object,Dg.prototype.objectParam=Qf.objectParam}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b["./parser-utils"]=function(){var a={exports:this},c=this;return function(){"use strict";function a(a,b,c){var d,e,f,g,h,i,j;for(j=[],g=!1,d=l(a),e=0,f=d.length;f>e;++e)h=d[e],i=b(h,c),j.push(i),h!==i&&(g=!0);return g?j:a}function d(a,b){var c,d,e,g;return c=arguments.length-1,c>2?d=k.call(arguments,2,c):(c=2,d=[]),e=arguments[c],g=!1,f(1,h(a.length),!0,function(c,e){var f,h;return h=a[c],b.apply(void 0,[h].concat(l(d),[(f=!1,function(a,b){if(f)throw Error("Attempted to call function more than once");return f=!0,null!=a?e(a):(h!==b&&(g=!0),e(null,b))})]))},function(b,c){return"undefined"!=typeof b&&null!==b?e(b):e(null,g?c:a)})}function e(a,c,d){var f,g,h,i,j,k;if(j=b("./parser-nodes"),c instanceof j.Param)if((h=c.ident)instanceof j.Ident||h instanceof j.Tmp)a.add(c.ident,d||c.isMutable,c.asType?n(c.asType):c.spread?o.array:o.any);else{if(!(c.ident instanceof j.Access))throw Error("Unknown param ident: "+m(c.ident));if(!(c.ident.child instanceof j.Const)||"string"!=typeof c.ident.child.value)throw Error("Expected constant access: "+m(c.ident.child));a.add(j.Ident(c.index,c.scope,c.ident.child.value),d||c.isMutable,c.asType?n(c.asType):c.spread?o.array:o.any)}else if(c instanceof j.Array)for(f=l(c.elements),g=f.length;g--;)i=f[g],e(a,i,d);else if(c instanceof j.Object)for(f=l(c.pairs),g=f.length;g--;)k=f[g],e(a,k.value,d);else if(!(c instanceof j.Nothing))throw Error("Unknown param node type: "+m(c))}var f,g,h,i,j,k,l,m,n,o;f=function(a,b,c,d,e){function f(a,b){j||(--n,null!=a&&null==h&&(h=a),c&&null==h&&arguments.length>1&&l.push(b),o||g())}function g(){for(;!j&&null==h&&a>n&&++k<b;)++n,o=!0,d(k,i(f)),o=!1;j||null==h&&0!==n||(j=!0,null!=h?e(h):e(null,l))}var h,j,k,l,n,o;if("number"!=typeof a)throw TypeError("Expected limit to be a Number, got "+m(a));if("number"!=typeof b)throw TypeError("Expected length to be a Number, got "+m(b));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected hasResult to be a Boolean, got "+m(c));if("function"!=typeof d)throw TypeError("Expected onValue to be a Function, got "+m(d));if("function"!=typeof e)throw TypeError("Expected onComplete to be a Function, got "+m(e));return l=c?[]:null,0>=b?e(null,l):((1>a||a!==a)&&(a=1/0),h=null,n=0,o=!1,j=!1,k=-1,g(),void 0)},g="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),h=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+m(a));return a},i=function(){function a(){throw Error("Attempted to call function more than once")}function b(){}return function(c,d){if("function"!=typeof c)throw TypeError("Expected func to be a Function, got "+m(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected silentFail to be a Boolean, got "+m(d));return function(){var e;return e=c,c=d?b:a,e.apply(this,arguments)}}}(),j=Object.prototype.hasOwnProperty,k=Array.prototype.slice,l=function(a){if(null==a)throw TypeError("Expected an object, got "+m(a));return g(a)?a:"string"==typeof a?a.split(""):k.call(a)},m=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),o=b("./types"),n=function(){var a;return a={Boolean:o.boolean,String:o.string,Number:o.number,Array:o.array,Object:o.object,Function:o["function"],RegExp:o.regexp,Date:o.date,Error:o.error,RangeError:o.error,ReferenceError:o.error,SyntaxError:o.error,TypeError:o.error,URIError:o.error},function(c){var d,e,f,g,h,i,k,p,q,r,s,t,u,v;if(t=b("./parser-nodes"),!(c instanceof t))throw TypeError("Expected a Node, got "+m(c));if(c instanceof t.Ident)return(j.call(a,h=c.name)?a[h]:void 0)||o.any;if(c instanceof t.Const)return null===c.value?o["null"]:void 0===c.value?o.undefined:o.any;if(c instanceof t.TypeGeneric){for(p=n(c.basetype),d=[],e=l(c.args),f=0,g=e.length;g>f;++f)i=e[f],d.push(n(i));return k=d,p===o.array||p===o["function"]?o.generic.apply(o,[p.base].concat(l(k))):p!==o.any?o.generic.apply(o,[p].concat(l(k))):o.any}if(c instanceof t.TypeUnion){for(q=o.none,d=l(c.types),f=d.length;f--;)u=d[f],q=q.union(n(u));return q}if(c instanceof t.TypeObject){for(r={},d=l(c.pairs),f=0,g=d.length;g>f;++f)h=d[f],s=h.key,v=h.value,s instanceof t.Const&&(r[s.value]=n(v));return o.makeObject(r)}return o.any}}(),c.nodeToType=n,c.map=a,c.mapAsync=d,c.addParamToScope=e}.call(this),a.exports},b["./parser-scope"]=function(){var a={exports:this};return function(){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;c="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},d=function(a,b){var c;for(c in b)g.call(b,c)&&(a[c]=b[c]);return a},e="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),f=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+j(a));return a.displayName||a.name||""},g=Object.prototype.hasOwnProperty,h=Array.prototype.slice,i=function(a){if(null==a)throw TypeError("Expected an object, got "+j(a));return e(a)?a:"string"==typeof a?a.split(""):h.call(a)},j=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),q=b("./types"),m=b("./parser-nodes"),l=m.Ident,p=m.Tmp,o=function(a){function b(d){var f,g;if(f=this instanceof b?this:c(e),null==d)d="Scope already destroyed";else if("string"!=typeof d)throw TypeError("Expected message to be a String, got "+j(d));return f.message=d,g=a.call(f,f.message),"function"==typeof a.captureStackTrace?a.captureStackTrace(f,b):"stack"in g&&(f.stack=g.stack),f}var d,e;return d=a.prototype,e=b.prototype=c(d),e.constructor=b,b.displayName="ScopeDestroyedError","function"==typeof a.extended&&a.extended(b),e.name="ScopeDestroyedError",b}(Error),n=function(){function a(b,d){var e;if(e=this instanceof a?this:c(r),null==b)b=null;else if(!(b instanceof a))throw TypeError("Expected parent to be one of "+(f(a)+" or null")+", got "+j(b));if(e.parent=b,null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected isTop to be a Boolean, got "+j(d));if(e.isTop=d,!b&&!d)throw Error("Must either provide a parent or is-top = true");return e.destroyed=!1,e.children=[],e.variables={},e.consts={},e.tmps={},d||b.children.push(e),e}function e(a){var b;for(b in a)if(g.call(a,b))return!1;return!0}function h(a,b){var c,d,e,f,j,k;if(k=a.variables,g.call(k,b))return k[b];for(c=i(a.children),d=0,e=c.length;e>d;++d)if(j=c[d],null!=(f=h(j,b)))return f}function k(a,b){var c,d,e,f,h,j;if(j=a.tmps,g.call(j,b))return j[b];for(c=i(a.children),d=0,e=c.length;e>d;++d)if(h=c[d],null!=(f=k(h,b)))return f}function m(a,b){var c,d,e,f,g;for(e=a,f=b instanceof p,g=0;e;){if(++g,g>1e3)throw Error("Infinite loop detected");if(e=e.top(),f){if(null!=(c=k(e,b.id)))return c}else if(null!=(d=h(e,b.name)))return d;e=e.parent}}function n(a,b){var c,d,e,f,h,j;if(j=a.consts,g.call(j,b))return{value:j[b]};for(c=i(a.children),d=0,e=c.length;e>d;++d)if(h=c[d],null!=(f=n(h,b)))return f}var r;return r=a.prototype,a.displayName="Scope",r._allVariables=function(){var a,b,c,e,f;for(f=d({},this.variables),a=i(this.children),b=0,c=a.length;c>b;++b)e=a[b],d(f,e._allVariables());return f},r._allTmps=function(){var a,b,c,e,f;for(f=d({},this.tmps),a=i(this.children),b=0,c=a.length;c>b;++b)e=a[b],d(f,e._allTmps());return f},r._allConsts=function(){var a,b,c,e,f;for(f=d({},this.consts),a=i(this.children),b=0,c=a.length;c>b;++b)e=a[b],d(f,e._allConsts());return f},r.inspect=function(){var a,c,d,f,g;return this.isTop?(c=b("util").inspect,g=this._allVariables(),f=this._allTmps(),a=this._allConsts(),d=[],d.push("Scope("),e(g)&&e(f)&&e(a)||d.push(c(g)),e(f)&&e(a)||(d.push(", "),d.push(c(f))),e(a)||(d.push(", "),d.push(c(a))),d.push(")"),this.parent&&(d.push(" -> "),d.push(this.parent.inspect())),d.join("")):this.top().inspect()},r.destroy=function(){var a,b,c,d,e;if(this.destroyed)throw o();for(a=i(this.children),b=a.length;b--;)c=a[b],c.destroy();if(!this.isTop){if(e=this.parent.children,d=e.lastIndexOf(this),-1===d)throw Error("Not found in parents' children");e.splice(d,1)}},r.clone=function(b){if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected isTop to be a Boolean, got "+j(b));if(this.destroyed)throw o();return a(this,b)},r.reparent=function(b){var c,d,e;if(null==b)b=null;else if(!(b instanceof a))throw TypeError("Expected parent to be one of "+(f(a)+" or null")+", got "+j(b));if(this.destroyed)throw o();if(!b&&!this.isTop)throw Error("Must either provide a parent or is-top = true");if(d=this.parent,b!==d){if(b===this)throw Error("Cannot parent to self");if(b&&b.parent===this)throw Error("Trying to become your own grandpa");if(this.parent=b,!this.isTop){if(e=d.children,c=e.lastIndexOf(this),-1===c)throw Error("Not found in old parents' children");e.splice(c,1),b.children.push(this)}}},r.top=function(){if(this.destroyed)throw o();return this.isTop?this:this.parent.top()},r.add=function(a,b,c){if(!(a instanceof l||a instanceof p))throw TypeError("Expected ident to be one of "+(f(l)+" or "+f(p))+", got "+j(a));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected isMutable to be a Boolean, got "+j(b));if(!(c instanceof q))throw TypeError("Expected type to be a "+f(q)+", got "+j(c));if(this.destroyed)throw o();a instanceof p?this.tmps[a.id]={isMutable:b,type:c}:this.variables[a.name]={isMutable:b,type:c}},r.addConst=function(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+j(a));this.consts[a]=b},r.has=function(a){if(!(a instanceof l||a instanceof p))throw TypeError("Expected ident to be one of "+(f(l)+" or "+f(p))+", got "+j(a));if(this.destroyed)throw o();return null!=m(this,a)},r.isMutable=function(a){var b;if(!(a instanceof l||a instanceof p))throw TypeError("Expected ident to be one of "+(f(l)+" or "+f(p))+", got "+j(a));if(this.destroyed)throw o();return(null!=(b=m(this,a))?b.isMutable:void 0)||!1},r.type=function(a){var b;if(!(a instanceof l||a instanceof p))throw TypeError("Expected ident to be one of "+(f(l)+" or "+f(p))+", got "+j(a));if(this.destroyed)throw o();return(null!=(b=m(this,a))?b.type:void 0)||q.any},r.constValue=function(a){var b,c,d;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+j(a));if(this.destroyed)throw o();for(c=this,d=0;c;){if(++d,d>1e3)throw Error("Infinite loop detected");if(c=c.top(),null!=(b=n(c,a)))return b;c=c.parent}},a}(),a.exports=n,(k=a.exports).ScopeDestroyedError=o}.call(this),a.exports},b["./parser-nodes"]=function(){var a={exports:this};return function(c){"use strict";function d(a,b,c){var d,e,f,g,h,i,j;for(j=[],g=!1,d=r(a),e=0,f=d.length;f>e;++e)h=d[e],i=b(h,c),j.push(i),h!==i&&(g=!0);return g?j:a}function e(a,b){var c,d,e,f,g,h,i,k,l,n,o;for(h=p.call(arguments,3),i=null!=a?m(a)-1:null,k=!1,d=h.length;d--&&(g=h[d],!g||g instanceof X||j(g)&&0===g.length);)h.pop();for(c=[],d=0,e=h.length;e>d;++d)g=h[d],c.push(Q(g,null,i));for(o=c,f=!1,d=0,e=o.length;e>d;++d)if(n=o[d],o.length>50||-1!==n.indexOf("\n")){f=!0;break}if(l=f){for(c=[],d=0,e=o.length;e>d;++d)n=o[d],c.push("  "+q(n.split("\n").join("\n  ")));return o=c,q(b)+"(\n"+q(o.join(",\n"))+")"}return q(b)+"("+q(o.join(", "))+")"}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb;f=function(a,b,c,d,e){function f(a,b){i||(--l,null!=a&&null==h&&(h=a),c&&null==h&&arguments.length>1&&k.push(b),m||g())}function g(){for(;!i&&null==h&&a>l&&++j<b;)++l,m=!0,d(j,n(f)),m=!1;i||null==h&&0!==l||(i=!0,null!=h?e(h):e(null,k))}var h,i,j,k,l,m;if("number"!=typeof a)throw TypeError("Expected limit to be a Number, got "+s(a));if("number"!=typeof b)throw TypeError("Expected length to be a Number, got "+s(b));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected hasResult to be a Boolean, got "+s(c));if("function"!=typeof d)throw TypeError("Expected onValue to be a Function, got "+s(d));if("function"!=typeof e)throw TypeError("Expected onComplete to be a Function, got "+s(e));return k=c?[]:null,0>=b?e(null,k):((1>a||a!==a)&&(a=1/0),h=null,l=0,m=!1,i=!1,j=-1,g(),void 0)},g="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},h=function(a,b){var c;if("number"!=typeof a)throw TypeError("Expected numArgs to be a Number, got "+s(a));if("function"!=typeof b)throw TypeError("Expected f to be a Function, got "+s(b));return a>1?(c=function(d){var e;return m(d.length)>=a?b.apply(this,d):e=function(){return 0===arguments.length?e:c.call(this,d.concat(p.call(arguments)))}},c([])):b},i="function"==typeof Array.prototype.indexOf?function(){var a;return a=Array.prototype.indexOf,function(b,c){return-1!==a.call(c,b)}}():function(a,b){var c,d;for(d=+b.length,c=-1;++c<d;)if(a===b[c]&&c in b)return!0;return!1},j="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),k="function"==typeof Object.keys?Object.keys:function(a){var b,c;c=[];for(b in a)o.call(a,b)&&c.push(b);return c},l=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+s(a));return a.displayName||a.name||""},m=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+s(a));return a},n=function(){function a(){throw Error("Attempted to call function more than once")}function b(){}return function(c,d){if("function"!=typeof c)throw TypeError("Expected func to be a Function, got "+s(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected silentFail to be a Boolean, got "+s(d));return function(){var e;return e=c,c=d?b:a,e.apply(this,arguments)}}}(),o=Object.prototype.hasOwnProperty,p=Array.prototype.slice,q=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+s(a))},r=function(a){if(null==a)throw TypeError("Expected an object, got "+s(a));return j(a)?a:"string"==typeof a?a.split(""):p.call(a)},s=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),pb=b("./types"),t=b("./parser-utils"),W=t.nodeToType,d=t.map,U=t.mapAsync,t=b("./utils"),$=t.quote,R=t.isPrimordial,null!=(t=b("util"))&&(Q=t.inspect),V=function(){function a(){var c;throw c=this instanceof a?this:g(b),Error("Node should not be instantiated directly")}var b;return b=a.prototype,a.displayName="Node",b.type=function(){return pb.any},b.walk=function(){return this},b.walkAsync=function(a,b){return b(null,this)},b.cacheable=!0,b.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return A(this.index,this.scope,[this],a)},b._reduce=function(a){return this.walk(function(b){return b.reduce(a)})},b.reduce=function(a){var b;return null!=this._reduced?this._reduced:(b=this._reduce(a),this._reduced=b===this?this:b.reduce(a))},b.isConst=function(){return!1},b.constValue=function(){throw Error("Not a const: "+s(this))},b.isConstType=function(){return!1},b.isConstValue=function(){return!1},b.isLiteral=function(){return this.isConst()},b.literalValue=function(){return this.constValue()},b.isNoop=function(a){return this.reduce(a)._isNoop(a)},b._isNoop=function(){return!1},b.isStatement=function(){return!1},b.rescope=function(a){function b(d){var e,f;return e=d.scope,e===a?d:e===c?d.rescope(a):(f=e.parent,f===c&&e.reparent(a),d.walk(b))}var c;return this.scope===a?this:(c=this.scope,this.scope=a,this.walk(b))},b.doWrap=function(a){var b,c;return this.isStatement()?(b=a.pushScope(!0,this.scope),c=C(this.index,this.scope,N(this.index,this.scope,[],this.rescope(b),!0,!0),[]),a.popScope(),c):this},a}(),V.Access=v=function(a){function b(d,e,f,h){var i;if(i=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected parent to be a "+l(a)+", got "+s(f));if(!(h instanceof a))throw TypeError("Expected child to be a "+l(a)+", got "+s(h));return i.index=d,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.parent=f,i.child=h,i}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="AccessNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Access",b.argNames=["parent","child"],c.type=function(a){var b,c;return c=this,null==(b=this._type)?this._type=function(){var b,d,e,f,g;if(g=c.parent.type(a),f=g.isSubsetOf(pb.string),f||g.isSubsetOf(pb.arrayLike)){if(b=a.macroExpand1(c.child).reduce(a),b.isConst()){if(e=b.constValue(),"length"===e)return pb.number;if("number"==typeof e)return m(e)>=0&&0===m(e)%1?f?pb.string.union(pb.undefined):g.subtype?g.subtype.union(pb.undefined):pb.any:pb.undefined}else if(d=b.type(a),d.isSubsetOf(pb.number))return f?pb.string.union(pb.undefined):g.subtype?g.subtype.union(pb.undefined):pb.any}else if(g.isSubsetOf(pb.object)&&"function"==typeof g.value&&(b=a.macroExpand1(c.child).reduce(a),b.isConst()))return g.value(String(b.constValue()));return pb.any}():b},c._reduce=function(a){function c(d){var e;return d instanceof O&&"__currentArrayLength"===d.name?(n.cacheable&&null==f&&(f=a.makeTmp(d.index,"ref",n.type(a)),f.scope=d.scope),b(d.index,d.scope,null!=f?f:n,F(d.index,d.scope,"length"))):d instanceof b?(e=c(d.parent),e!==d.parent?b(d.index,d.scope,e,d.child).walk(c):d.walk(c)):d.walk(c)}var d,e,f,g,h,i,j,k,l,n,o,p,q,r;return n=this.parent.reduce(a).doWrap(a),f=null,g=c(this.child.reduce(a).doWrap(a)),null!=f?mb(this.index,this.scope,b(this.index,this.scope,y(this.index,this.scope,f,"=",n),g),[f.id]):n.isConst()&&g.isConst()&&(o=n.constValue(),h=g.constValue(),h in Object(o)&&(r=o[h],null===r||r instanceof RegExp||"string"==(d=typeof r)||"number"===d||"boolean"===d||"undefined"===d))?F(this.index,this.scope,r):g instanceof C&&g.func instanceof O&&"__range"===g.func.name?(d=g.args,p=d[0],i=d[1],q=d[2],l=d[3],k=!q.isConst()||1!==q.constValue(),k||(l.isConst()?l.constValue()&&(i=i.isConst()&&"number"==typeof i.constValue()?F(i.index,i.scope,m(i.constValue())+1||1/0):z(i.index,i.scope,z(i.index,i.scope,i,"+",F(l.index,l.scope,1)),"||",F(i.index,i.scope,1/0))):i=P(i.index,i.scope,l,z(i.index,i.scope,z(i.index,i.scope,i,"+",F(l.index,l.scope,1)),"||",F(i.index,i.scope,1/0)),i)),e=[n],j=!i.isConst()||void 0!==(d=i.constValue())&&d!==1/0,(!p.isConst()||0!==p.constValue()||j||k)&&e.push(p),(j||k)&&e.push(i),k&&(e.push(q),(!l.isConst()||l.constValue())&&e.push(l)),C(this.index,this.scope,O(this.index,this.scope,k?"__sliceStep":"__slice"),e,!1,!k).reduce(a)):n!==this.parent||g!==this.child?b(this.index,this.scope,n,g):this},c._isNoop=function(a){var b;return null==(b=this.__isNoop)?this.__isNoop=this.parent.isNoop(a)&&this.child.isNoop(a):b},c.inspect=function(a){return e(a,"AccessNode",this.index,this.parent,this.child)},c.walk=function(a){var c,d;return d=a(this.parent),c=a(this.child),d!==this.parent||c!==this.child?b(this.index,this.scope,d,c):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.parent,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):a(e.child,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.parent||d!==e.child?b(e.index,e.scope,g,d):e)}))}))},b}(V),V.AccessMulti=u=function(a){function b(d,e,f,h){var i,k;if(k=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected parent to be a "+l(a)+", got "+s(f));if(!j(h))throw TypeError("Expected elements to be an Array, got "+s(h));for(i=h.length;i--;)if(!(h[i]instanceof a))throw TypeError("Expected "+("elements["+i+"]")+" to be a "+l(a)+", got "+s(h[i]));return k.index=d,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.parent=f,k.elements=h,k}var c,f;return f=a.prototype,c=b.prototype=g(f),c.constructor=b,b.displayName="AccessMultiNode","function"==typeof a.extended&&a.extended(b),b.cappedName="AccessMulti",b.argNames=["parent","elements"],c.type=function(){return pb.array},c._reduce=function(a){var b,c,d,e,f,g;return b=this,c=this.parent.reduce(a),e=c,g=[],c.cacheable&&(f=a.makeTmp(a.indexFromPosition(this.index),"ref",c.type(a)),f.scope=this.scope,g.push(f.id),e=y(this.index,this.scope,f,"=",c.doWrap(a)),c=f),d=x(this.index,this.scope,function(){var d,f,g,h,i;for(d=[],f=r(b.elements),i=0,g=f.length;g>i;++i)h=f[i],d.push(v(b.index,b.scope,0===i?e:c,h.reduce(a)));return d}()),g.length?mb(this.index,this.scope,d,g):d},c.inspect=function(a){return e(a,"AccessMultiNode",this.index,this.parent,this.elements)},c.walk=function(a){var c,e;return e=a(this.parent),c=d(this.elements,a),e!==this.parent||c!==this.elements?b(this.index,this.scope,e,c):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.parent,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):U(e.elements,a,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.parent||d!==e.elements?b(e.index,e.scope,g,d):e)}))}))},b}(V),V.Args=w=function(a){function b(a,d){var e;if(e=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));return e.index=a,e.scope=d,e._reduced=void 0,e._macroExpanded=void 0,e._macroExpandAlled=void 0,e}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="ArgsNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Args",b.argNames=[],c.type=function(){return pb.args},c.cacheable=!1,c._isNoop=function(){return!0},c.inspect=function(a){return e(a,"ArgsNode",this.index)},b}(V),V.Array=x=function(a){function b(d,e,f){var h,i;if(i=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!j(f))throw TypeError("Expected elements to be an Array, got "+s(f));for(h=f.length;h--;)if(!(f[h]instanceof a))throw TypeError("Expected "+("elements["+h+"]")+" to be a "+l(a)+", got "+s(f[h]));return i.index=d,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.elements=f,i}var c,f;return f=a.prototype,c=b.prototype=g(f),c.constructor=b,b.displayName="ArrayNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Array",b.argNames=["elements"],c.type=function(){return pb.array},c._reduce=function(a){var c;return c=d(this.elements,function(b){return b.reduce(a).doWrap(a)}),c!==this.elements?b(this.index,this.scope,c):this},c._isNoop=function(a){var b,c,d,e,f,g;if(null==(f=this.__isNoop)){for(c=!0,b=r(this.elements),d=0,e=b.length;e>d;++d)if(g=b[d],!g.isNoop(a)){c=!1;break}return this.__isNoop=c}return f},c.isLiteral=function(){var a,b,c,d,e,f;if(null==(e=this._isLiteral)){for(b=!0,a=r(this.elements),c=0,d=a.length;d>c;++c)if(f=a[c],!f.isLiteral()){b=!1;break}return this._isLiteral=b
}return e},c.literalValue=function(){var a,b,c,d,e;for(a=[],b=r(this.elements),c=0,d=b.length;d>c;++c)e=b[c],a.push(e.literalValue());return a},c.inspect=function(a){return e(a,"ArrayNode",this.index,this.elements)},c.walk=function(a){var c;return c=d(this.elements,a),c!==this.elements?b(this.index,this.scope,c):this},c.walkAsync=function(a,c){var d,e;return e=this,U(this.elements,a,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.elements?b(e.index,e.scope,f):e)}))},b}(V),V.Assign=y=function(a){function b(d,e,f,h,i){var j;if(j=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected left to be a "+l(a)+", got "+s(f));if("string"!=typeof h)throw TypeError("Expected op to be a String, got "+s(h));if(!(i instanceof a))throw TypeError("Expected right to be a "+l(a)+", got "+s(i));return j.index=d,j.scope=e,j._reduced=void 0,j._macroExpanded=void 0,j._macroExpandAlled=void 0,j.left=f,j.op=h,j.right=i,j}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="AssignNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Assign",b.argNames=["left","op","right"],c.type=function(){var a;return a={"=":function(a,b){return b},"+=":function(a,b){return a.isSubsetOf(pb.numeric)&&b.isSubsetOf(pb.numeric)?pb.number:a.overlaps(pb.numeric)&&b.overlaps(pb.numeric)?pb.stringOrNumber:pb.string},"-=":pb.number,"*=":pb.number,"/=":pb.number,"%=":pb.number,"<<=":pb.number,">>=":pb.number,">>>=":pb.number,"&=":pb.number,"^=":pb.number,"|=":pb.number},function(b){var c,d,e;return null==(c=this._type)?(o.call(a,d=this.op)&&(e=a[d]),this._type=e?"function"==typeof e?e(this.left.type(b),this.right.type(b)):e:pb.any):c}}(),c._reduce=function(a){var c,d;return c=this.left.reduce(a),d=this.right.reduce(a).doWrap(a),c!==this.left||d!==this.right?b(this.index,this.scope,c,this.op,d):this},c.inspect=function(a){return e(a,"AssignNode",this.index,this.left,this.op,this.right)},c.walk=function(a){var c,d;return c=a(this.left),d=a(this.right),c!==this.left||d!==this.right?b(this.index,this.scope,c,this.op,d):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.left,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):a(e.right,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.left||d!==e.right?b(e.index,e.scope,g,e.op,d):e)}))}))},b}(V),V.Binary=z=function(a){function b(d,e,f,h,i){var j;if(j=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected left to be a "+l(a)+", got "+s(f));if("string"!=typeof h)throw TypeError("Expected op to be a String, got "+s(h));if(!(i instanceof a))throw TypeError("Expected right to be a "+l(a)+", got "+s(i));return j.index=d,j.scope=e,j._reduced=void 0,j._macroExpanded=void 0,j._macroExpandAlled=void 0,j.left=f,j.op=h,j.right=i,j}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="BinaryNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Binary",b.argNames=["left","op","right"],c.type=function(){var a;return a={"*":pb.number,"/":pb.number,"%":pb.number,"+":function(a,b){return a.isSubsetOf(pb.numeric)&&b.isSubsetOf(pb.numeric)?pb.number:a.overlaps(pb.numeric)&&b.overlaps(pb.numeric)?pb.stringOrNumber:pb.string},"-":pb.number,"<<":pb.number,">>":pb.number,">>>":pb.number,"<":pb.boolean,"<=":pb.boolean,">":pb.boolean,">=":pb.boolean,"in":pb.boolean,"instanceof":pb.boolean,"==":pb.boolean,"!=":pb.boolean,"===":pb.boolean,"!==":pb.boolean,"&":pb.number,"^":pb.number,"|":pb.number,"&&":function(a,b){return a.intersect(pb.potentiallyFalsy).union(b)},"||":function(a,b){return a.intersect(pb.potentiallyTruthy).union(b)}},function(b){var c,d,e;return null==(c=this._type)?(o.call(a,d=this.op)&&(e=a[d]),this._type=e?"function"==typeof e?e(this.left.type(b),this.right.type(b)):e:pb.any):c}}(),c._reduce=function(){function a(a,b){var c;return(c=a.constValue())!==c?A(this.index,this.scope,[b,a]):void 0}function c(a,b){var c;return(c=b.constValue())!==c?A(this.index,this.scope,[a,b]):void 0}var d,e,f,g;return d={"*":h(2,function(a,b){return a*b}),"/":h(2,function(a,b){return a/b}),"%":h(2,function(a,b){return a%b}),"+":function(){function a(a){var b;return null===a||"number"==(b=typeof a)||"boolean"===b||"undefined"===b}return function(b,c){return a(b)&&a(c)?b- -c:""+b+c}}(),"-":h(2,function(a,b){return a-b}),"<<":h(2,function(a,b){return a<<b}),">>":h(2,function(a,b){return a>>b}),">>>":h(2,function(a,b){return a>>>b}),"<":h(2,function(a,b){return b>a}),"<=":h(2,function(a,b){return b>=a}),">":h(2,function(a,b){return a>b}),">=":h(2,function(a,b){return a>=b}),"==":h(2,function(a,b){return a==b}),"!=":h(2,function(a,b){return a!=b}),"===":h(2,function(a,b){return a===b}),"!==":h(2,function(a,b){return a!==b}),"&":h(2,function(a,b){return a&b}),"^":h(2,function(a,b){return a^b}),"|":h(2,function(a,b){return a|b}),"&&":h(2,function(a,b){return a&&b}),"||":h(2,function(a,b){return a||b})},e={"*":function(a,b){var c;return 1===a.constValue()?ub(this.index,this.scope,"+",b):-1===a.constValue()?ub(this.index,this.scope,"-",b):(c=a.constValue())!==c?A(this.index,this.scope,[b,a]):void 0},"/":a,"%":a,"+":function(a,c,d){var e;return 0===a.constValue()&&c.type(d).isSubsetOf(pb.number)?ub(this.index,this.scope,"+",c):""===a.constValue()&&c.type(d).isSubsetOf(pb.string)?c:"string"==typeof a.constValue()&&c instanceof b&&"+"===c.op&&c.left.isConst()&&"string"==typeof c.left.constValue()?b(this.index,this.scope,F(a.index,this.scope,q(a.constValue())+q(c.left.constValue())),"+",c.right):(e=a.constValue())!==e?A(this.index,this.scope,[c,a]):void 0},"-":function(a,b){var c;return 0===a.constValue()?ub(this.index,this.scope,"-",b):(c=a.constValue())!==c?A(this.index,this.scope,[b,a]):void 0},"<<":a,">>":a,">>>":a,"&":a,"|":a,"^":a,"&&":function(a,b){return a.constValue()?b:a},"||":function(a,b){return a.constValue()?a:b}},g={"*":function(a,b){var c;return 1===b.constValue()?ub(this.index,this.scope,"+",a):-1===b.constValue()?ub(this.index,this.scope,"-",a):(c=b.constValue())!==c?A(this.index,this.scope,[a,b]):void 0},"/":function(a,b){var c;return 1===b.constValue()?ub(this.index,this.scope,"+",a):-1===b.constValue()?ub(this.index,this.scope,"-",a):(c=b.constValue())!==c?A(this.index,this.scope,[a,b]):void 0},"%":c,"+":function(a,c,d){var e;return 0===c.constValue()&&a.type(d).isSubsetOf(pb.number)?ub(this.index,this.scope,"+",a):"number"==typeof c.constValue()&&m(c.constValue())<0&&a.type(d).isSubsetOf(pb.number)?b(this.index,this.scope,a,"-",F(c.index,this.scope,-m(c.constValue()))):""===c.constValue()&&a.type(d).isSubsetOf(pb.string)?a:"string"==typeof c.constValue()&&a instanceof b&&"+"===a.op&&a.right.isConst()&&"string"==typeof a.right.constValue()?b(this.index,this.scope,a.left,"+",F(a.right.index,this.scope,q(a.right.constValue())+q(c.constValue()))):(e=c.constValue())!==e?A(this.index,this.scope,[a,c]):void 0},"-":function(a,c,d){var e;return 0===c.constValue()?ub(this.index,this.scope,"+",a):"number"==typeof c.constValue()&&m(c.constValue())<0&&a.type(d).isSubsetOf(pb.number)?b(this.index,this.scope,a,"+",F(c.index,this.scope,-m(c.constValue()))):(e=c.constValue())!==e?A(this.index,this.scope,[a,c]):void 0},"<<":c,">>":c,">>>":c,"&":c,"|":c,"^":c},f={"&&":function(a,c,d){var e,f,g;if(g=a.type(d),g.isSubsetOf(pb.alwaysTruthy))return A(this.index,this.scope,[a,c]);if(g.isSubsetOf(pb.alwaysFalsy))return a;if(a instanceof b&&"&&"===a.op){if(a.right.isConst()?e=!!a.right.constValue():(f=a.right.type(d),e=f.isSubsetOf(pb.alwaysTruthy)?!0:f.isSubsetOf(pb.alwaysFalsy)?!1:null),e===!0)return b(this.index,this.scope,a.left,"&&",A(a.right.index,this.scope,[a.right,c]));if(e===!1)return a}},"||":function(a,c,d){var e,f,g,h,i;if(i=a.type(d),i.isSubsetOf(pb.alwaysTruthy))return a;if(i.isSubsetOf(pb.alwaysFalsy))return A(this.index,this.scope,[a,c]);if(a instanceof b&&"||"===a.op){if(a.right.isConst()?f=!!a.right.constValue():(h=a.right.type(d),f=h.isSubsetOf(pb.alwaysTruthy)?!0:h.isSubsetOf(pb.alwaysFalsy)?!1:null),f===!0)return a;if(f===!1)return b(this.index,this.scope,a.left,"||",A(a.right.index,this.scope,[a.right,c]))}else if(a instanceof P&&a.whenFalse.isConst()&&!a.whenFalse.constValue()){for(e=a.test,g=a.whenTrue;g instanceof P&&g.whenFalse.isConst()&&!g.whenFalse.constValue();)e=b(a.index,a.scope,e,"&&",g.test),g=g.whenTrue;return b(this.index,this.scope,b(a.index,a.scope,e,"&&",g),"||",c)}}},function(a){var c,h,i,j;if(h=this.left.reduce(a).doWrap(a),j=this.right.reduce(a).doWrap(a),i=this.op,h.isConst()){if(j.isConst()&&o.call(d,i))return F(this.index,this.scope,d[i](h.constValue(),j.constValue()));if(o.call(e,i)&&null!=(c=e[i].call(this,h,j,a)))return c}return j.isConst()&&o.call(g,i)&&null!=(c=g[i].call(this,h,j,a))?c:o.call(f,i)&&null!=(c=f[i].call(this,h,j,a))?c:h!==this.left||j!==this.right?b(this.index,this.scope,h,i,j):this}}(),c._isNoop=function(a){var b;return null==(b=this.__isNoop)?this.__isNoop=this.left.isNoop(a)&&this.right.isNoop(a):b},c.inspect=function(a){return e(a,"BinaryNode",this.index,this.left,this.op,this.right)},c.walk=function(a){var c,d;return c=a(this.left),d=a(this.right),c!==this.left||d!==this.right?b(this.index,this.scope,c,this.op,d):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.left,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):a(e.right,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.left||d!==e.right?b(e.index,e.scope,g,e.op,d):e)}))}))},b}(V),V.Block=A=function(a){function b(d,e,f,h){var i,k;if(k=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!j(f))throw TypeError("Expected nodes to be an Array, got "+s(f));for(i=f.length;i--;)if(!(f[i]instanceof a))throw TypeError("Expected "+("nodes["+i+"]")+" to be a "+l(a)+", got "+s(f[i]));if(null==h)h=null;else if(!(h instanceof O||h instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(h));return k.index=d,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.nodes=f,k.label=h,k}var c,f;return f=a.prototype,c=b.prototype=g(f),c.constructor=b,b.displayName="BlockNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Block",b.argNames=["nodes","label"],c.type=function(a){var b;return b=this.nodes,0===b.length?pb.undefined:b[m(b.length)-1].type(a)},c.withLabel=function(a,c){var d,e;if(e=this,null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));if(null==this.label){if(1===this.nodes.length)return this.nodes[0].withLabel(a,c);if(m(this.nodes.length)>1&&(d=this.nodes)[m(d.length)-1]instanceof L&&function(){var a,b,c,d,f,g;for(c=!0,a=r(e.nodes),d=0,f=a.length,b=-1,b+=f,b>f&&(b=f);b>d;++d)if(g=a[d],!(g instanceof y||g instanceof vb)){c=!1;break}return c}())return b(this.index,this.scope,p.call(this.nodes,0,-1).concat([(d=this.nodes)[m(d.length)-1].withLabel(a,c)]))}return b(this.index,this.scope,this.nodes,a)},c._reduce=function(a){var c,d,e,f,g,h,i,j;for(e=!1,d=[],c=r(this.nodes),f=0,h=c.length;h>f;++f)if(i=c[f],j=i.reduce(a),j instanceof b&&null==j.label)d.push.apply(d,r(j.nodes)),e=!0;else if(j instanceof X)e=!0;else{if(j instanceof B||j instanceof G||j instanceof kb||j instanceof ab){d.push(j),(j!==i||h-1>f)&&(e=!0);break}d.push(j),j!==i&&(e=!0)}return g=null!=this.label?this.label.reduce(a):this.label,0===d.length?X(this.index,this.scope):null==g&&1===d.length?d[0]:e||g!==this.label?b(this.index,this.scope,d,g):this},c.isStatement=function(){var a,b,c,d;for(c=!1,a=r(this.nodes),b=a.length;b--;)if(d=a[b],d.isStatement()){c=!0;break}return c},c._isNoop=function(a){var b,c,d,e,f;if(null==(e=this.__isNoop)){for(c=!0,b=r(this.nodes),d=b.length;d--;)if(f=b[d],!f.isNoop(a)){c=!1;break}return this.__isNoop=c}return e},c.inspect=function(a){return e(a,"BlockNode",this.index,this.nodes,this.label)},c.walk=function(c){var e,f;return f=d(this.nodes,c),e=this.label instanceof a?c(this.label):this.label,f!==this.nodes||e!==this.label?b(this.index,this.scope,f,e):this},c.walkAsync=function(c,d){var e,f;return f=this,U(this.nodes,c,(e=!1,function(g,h){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.nodes||a!==f.label?b(f.index,f.scope,h,a):f)})}))},b}(V),V.Break=B=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if(null==e)e=null;else if(!(e instanceof O||e instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.label=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="BreakNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Break",b.argNames=["label"],c.type=function(){return pb.undefined},c.isStatement=function(){return!0},c.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,a)},c.inspect=function(a){return e(a,"BreakNode",this.index,this.label)},c.walk=function(c){var d;return d=this.label instanceof a?c(this.label):this.label,d!==this.label?b(this.index,this.scope,d):this},c.walkAsync=function(c,d){var e;return e=this,(this.label instanceof a?function(a){var b;return c(e.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(e.label)})(function(a){return d(null,a!==e.label?b(e.index,e.scope,a):e)})},b}(V),V.Call=C=function(a){function b(c,d,e,h,i,k){var m,n;if(n=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(e instanceof a))throw TypeError("Expected func to be a "+l(a)+", got "+s(e));if(!j(h))throw TypeError("Expected args to be an Array, got "+s(h));for(m=h.length;m--;)if(!(h[m]instanceof a))throw TypeError("Expected "+("args["+m+"]")+" to be a "+l(a)+", got "+s(h[m]));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected isNew to be a Boolean, got "+s(i));if(null==k)k=!1;else if("boolean"!=typeof k)throw TypeError("Expected isApply to be a Boolean, got "+s(k));return n.index=c,n.scope=d,n._reduced=void 0,n._macroExpanded=void 0,n._macroExpandAlled=void 0,n.func=e,n.args=h,n.isNew=i,n.isApply=k,n}var f,h;return h=a.prototype,f=b.prototype=g(h),f.constructor=b,b.displayName="CallNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Call",b.argNames=["func","args","isNew","isApply"],f.type=function(){var a,b,c;return a={Object:pb.object,String:pb.string,Number:pb.number,Boolean:pb.boolean,Function:pb["function"],Array:pb.array,Date:pb.string,RegExp:pb.regexp,Error:pb.error,RangeError:pb.error,ReferenceError:pb.error,SyntaxError:pb.error,TypeError:pb.error,URIError:pb.error,escape:pb.string,unescape:pb.string,parseInt:pb.number,parseFloat:pb.number,isNaN:pb.boolean,isFinite:pb.boolean,decodeURI:pb.string,decodeURIComponent:pb.string,encodeURI:pb.string,encodeURIComponent:pb.string},c={Object:{getPrototypeOf:pb.object,getOwnPropertyDescriptor:pb.object,getOwnPropertyNames:pb.string.array(),create:pb.object,defineProperty:pb.object,defineProperties:pb.object,seal:pb.object,freeze:pb.object,preventExtensions:pb.object,isSealed:pb.boolean,isFrozen:pb.boolean,isExtensible:pb.boolean,keys:pb.string.array()},String:{fromCharCode:pb.string},Number:{isFinite:pb.boolean,isNaN:pb.boolean},Array:{isArray:pb.boolean},Math:{abs:pb.number,acos:pb.number,asin:pb.number,atan:pb.number,atan2:pb.number,ceil:pb.number,cos:pb.number,exp:pb.number,floor:pb.number,log:pb.number,max:pb.number,min:pb.number,pow:pb.number,random:pb.number,round:pb.number,sin:pb.number,sqrt:pb.number,tan:pb.number},JSON:{stringify:pb.string.union(pb.undefined),parse:pb.string.union(pb.number).union(pb.boolean).union(pb["null"]).union(pb.array).union(pb.object)},Date:{UTC:pb.number,now:pb.number}},b={String:{toString:pb.string,valueOf:pb.string,charAt:pb.string,charCodeAt:pb.number,concat:pb.string,indexOf:pb.number,lastIndexOf:pb.number,localeCompare:pb.number,match:pb.array.union(pb["null"]),replace:pb.string,search:pb.number,slice:pb.string,split:pb.string.array(),substring:pb.string,toLowerCase:pb.string,toLocaleLowerCase:pb.string,toUpperCase:pb.string,toLocaleUpperCase:pb.string,trim:pb.string},Boolean:{toString:pb.string,valueOf:pb.boolean},Number:{toString:pb.string,valueOf:pb.number,toLocaleString:pb.string,toFixed:pb.string,toExponential:pb.string,toPrecision:pb.string},Date:{toString:pb.string,toDateString:pb.string,toTimeString:pb.string,toLocaleString:pb.string,toLocaleDateString:pb.string,toLocaleTimeString:pb.string,valueOf:pb.number,getTime:pb.number,getFullYear:pb.number,getUTCFullYear:pb.number,getMonth:pb.number,getUTCMonth:pb.number,getDate:pb.number,getUTCDate:pb.number,getDay:pb.number,getUTCDay:pb.number,getHours:pb.number,getUTCHours:pb.number,getMinutes:pb.number,getUTCMinutes:pb.number,getSeconds:pb.number,getUTCSeconds:pb.number,getMilliseconds:pb.number,getUTCMilliseconds:pb.number,getTimezoneOffset:pb.number,setTime:pb.number,setMilliseconds:pb.number,setUTCMilliseconds:pb.number,setSeconds:pb.number,setUTCSeconds:pb.number,setMinutes:pb.number,setUTCMinutes:pb.number,setHours:pb.number,setUTCHours:pb.number,setDate:pb.number,setUTCDate:pb.number,setMonth:pb.number,setUTCMonth:pb.number,setFullYear:pb.number,setUTCFullYear:pb.number,toUTCString:pb.string,toISOString:pb.string,toJSON:pb.string},RegExp:{exec:pb.array.union(pb["null"]),test:pb.boolean,toString:pb.string},Error:{toString:pb.string}},function(b){var d,e;return e=this,null==(d=this._type)?this._type=function(){var d,f,g,h,i,j,k,l,m,n;if(j=e.func,k=j.type(b),k.isSubsetOf(pb["function"]))return k.args[0];if(j instanceof O){if(l=j.name,o.call(a,l))return a[l];if((null!=b?b.macros.hasHelper(l):void 0)&&(k=b.macros.helperType(l),k.isSubsetOf(pb["function"])))return k.args[0]}else if(j instanceof v&&(m=j.parent,i=j.child,i instanceof F))if("call"===(d=i.value)||"apply"===d){if(n=m.type(b),n.isSubsetOf(pb["function"]))return n.args[0]}else if(m instanceof O&&o.call(c,d=m.name)&&o.call(f=c[d],g=i.value)&&null!=(h=f[g]))return h;return pb.any}():d}}(),f._reduce=function(){var a,e;return a={escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0,String:!0,Boolean:!0,Number:!0,RegExp:!0},e={String:{fromCharCode:!0},Number:{isFinite:!0,isNaN:!0},Math:{abs:!0,acos:!0,asin:!0,atan:!0,atan2:!0,ceil:!0,cos:!0,exp:!0,floor:!0,log:!0,max:!0,min:!0,pow:!0,round:!0,sin:!0,sqrt:!0,tan:!0},JSON:{parse:!0,stringify:!0}},function(f){var g,h,i,j,k,l,m,n,p,q,s,t,u,w,x,y;if(u=this.func.reduce(f).doWrap(f),p=d(this.args,function(a){return a.reduce(f).doWrap(f)}),!this.isNew&&!this.isApply){for(s=[],m=!0,g=r(p),h=0,i=g.length;i>h;++h){if(n=g[h],!n.isConst()){m=!1;break}s.push(n.constValue())}if(m)if(u instanceof O){if(o.call(a,u.name))try{return y=c[u.name].apply(void 0,r(s)),F(this.index,this.scope,y)}catch(z){}}else if(u instanceof v&&u.child.isConst())if(w=u.parent,q=u.child,t=q.constValue(),w.isConst()){if(x=w.constValue(),"function"==typeof x[t])try{return y=x[t].apply(x,r(s)),F(this.index,this.scope,y)}catch(z){}}else if(w instanceof O&&(o.call(e,j=w.name)&&o.call(k=e[j],l=q.value)?k[l]:void 0))try{return y=(j=c[w.name])[t].apply(j,r(s)),F(this.index,this.scope,y)}catch(z){}}return u!==this.func||p!==this.args?b(this.index,this.scope,u,p,this.isNew,this.isApply):this}}(),f.inspect=function(a){return e(a,"CallNode",this.index,this.func,this.args,this.isNew,this.isApply)},f.walk=function(a){var c,e;return e=a(this.func),c=d(this.args,a),e!==this.func||c!==this.args?b(this.index,this.scope,e,c,this.isNew,this.isApply):this},f.walkAsync=function(a,c){var d,e;return e=this,a(this.func,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):U(e.args,a,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.func||d!==e.args?b(e.index,e.scope,g,d,e.isNew,e.isApply):e)}))}))},b}(V),V.Cascade=D=function(a){function b(d,e,f,h){var i;if(i=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));if(!j(h))throw TypeError("Expected cascades to be an Array, got "+s(h));return i.index=d,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.node=f,i.cascades=h,i}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="CascadeNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Cascade",b.argNames=["node","cascades"],c.inspect=function(a){return e(a,"CascadeNode",this.index,this.node,this.cascades)},c.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c,this.cascades):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f,e.cascades):e)}))},b}(V),V.Comment=E=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.text=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="CommentNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Comment",b.argNames=["text"],c.type=function(){return pb.undefined},c.cacheable=!1,c.isConst=function(){return!0},c.constValue=function(){},c._isNoop=function(){return!0},c.inspect=function(a){return e(a,"CommentNode",this.index,this.text)},c.walk=function(){return this},c.walkAsync=function(a,b){return b(null,this)},b}(V),V.Const=F=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if(null!=e&&"number"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e)throw TypeError("Expected value to be one of Number or String or Boolean or undefined or null, got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.value=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="ConstNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Const",b.argNames=["value"],c.type=function(){var a;if(a=this.value,null===a)return pb["null"];switch(typeof a){case"number":return pb.number;case"string":return pb.string;case"boolean":return pb.boolean;case"undefined":return pb.undefined;default:throw Error("Unknown type for "+String(a))}},c.cacheable=!1,c.isConst=function(){return!0},c.constValue=function(){return this.value},c.isConstType=function(a){return a===typeof this.value},c.isConstValue=function(a){return a===this.value},c._isNoop=function(){return!0},c.inspect=function(a){return"ConstNode("+q(Q(this.value,null,null!=a?m(a)-1:null))+")"},c.walk=function(){return this},c.walkAsync=function(a,b){return b(null,this)},b}(V),V.Continue=G=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if(null==e)e=null;else if(!(e instanceof O||e instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.label=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="ContinueNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Continue",b.argNames=["label"],c.type=function(){return pb.undefined},c.isStatement=function(){return!0},c.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,a)},c.inspect=function(a){return e(a,"ContinueNode",this.index,this.label)},c.walk=function(c){var d;return d=this.label instanceof a?c(this.label):this.label,d!==this.label?b(this.index,this.scope,d):this},c.walkAsync=function(c,d){var e;return e=this,(this.label instanceof a?function(a){var b;return c(e.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(e.label)})(function(a){return d(null,a!==e.label?b(e.index,e.scope,a):e)})},b}(V),V.Debugger=H=function(a){function b(a,d){var e;if(e=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));return e.index=a,e.scope=d,e._reduced=void 0,e._macroExpanded=void 0,e._macroExpandAlled=void 0,e}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="DebuggerNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Debugger",b.argNames=[],c.type=function(){return pb.undefined},c.isStatement=function(){return!0},c.inspect=function(a){return e(a,"DebuggerNode",this.index)},b}(V),V.Def=I=function(a){function b(d,e,f,h){var i;if(i=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected left to be a "+l(a)+", got "+s(f));if(null==h)h=void 0;else if(!(h instanceof a))throw TypeError("Expected right to be one of "+(l(a)+" or undefined")+", got "+s(h));return i.index=d,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.left=f,i.right=h,i}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="DefNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Def",b.argNames=["left","right"],c.type=function(a){return null!=this.right?this.right.type(a):pb.any},c.inspect=function(a){return e(a,"DefNode",this.index,this.left,this.right)},c.walk=function(c){var d,e;return d=c(this.left),e=this.right instanceof a?c(this.right):this.right,d!==this.left||e!==this.right?b(this.index,this.scope,d,e):this},c.walkAsync=function(c,d){var e,f;return f=this,c(this.left,(e=!1,function(g,h){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):(f.right instanceof a?function(a){var b;return c(f.right,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.right)})(function(a){return d(null,h!==f.left||a!==f.right?b(f.index,f.scope,h,a):f)})}))},b}(V),V.EmbedWrite=J=function(a){function b(d,e,f,h){var i;if(i=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected text to be a "+l(a)+", got "+s(f));if(null==h)h=!1;else if("boolean"!=typeof h)throw TypeError("Expected escape to be a Boolean, got "+s(h));return i.index=d,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.text=f,i.escape=h,i}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="EmbedWriteNode","function"==typeof a.extended&&a.extended(b),b.cappedName="EmbedWrite",b.argNames=["text","escape"],c.inspect=function(a){return e(a,"EmbedWriteNode",this.index,this.text,this.escape)},c.walk=function(a){var c;return c=a(this.text),c!==this.text?b(this.index,this.scope,c,this.escape):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.text,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.text?b(e.index,e.scope,f,e.escape):e)}))},b}(V),V.Eval=K=function(a){function b(d,e,f){var h;if(h=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected code to be a "+l(a)+", got "+s(f));return h.index=d,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.code=f,h}var c,d,f;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="EvalNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Eval",b.argNames=["code"],f={"true":function(){return F(this.index,this.scope,!0)},"false":function(){return F(this.index,this.scope,!1)},"void 0":function(){return F(this.index,this.scope,void 0)},"null":function(){return F(this.index,this.scope,null)}},c._reduce=function(a){var c,d,e;return d=this.code.reduce(a).doWrap(),d.isConst()&&d.isConstType("string")&&(o.call(f,c=d.constValue())&&(e=f[c]),e)?e.call(this):d!==this.code?b(this.index,this.scope,d):this},c.inspect=function(a){return e(a,"EvalNode",this.index,this.code)},c.walk=function(a){var c;return c=a(this.code),c!==this.code?b(this.index,this.scope,c):this},c.walkAsync=function(a,c){var d,e;return e=this,a(this.code,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.code?b(e.index,e.scope,f):e)}))},b}(V),V.For=M=function(a){function b(d,e,f,h,i,j,k){var m;if(m=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(null==f)f=X(0,e);else if(!(f instanceof a))throw TypeError("Expected init to be a "+l(a)+", got "+s(f));if(null==h)h=F(0,e,!0);else if(!(h instanceof a))throw TypeError("Expected test to be a "+l(a)+", got "+s(h));if(null==i)i=X(0,e);else if(!(i instanceof a))throw TypeError("Expected step to be a "+l(a)+", got "+s(i));if(!(j instanceof a))throw TypeError("Expected body to be a "+l(a)+", got "+s(j));if(null==k)k=null;else if(!(k instanceof O||k instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(k));return m.index=d,m.scope=e,m._reduced=void 0,m._macroExpanded=void 0,m._macroExpandAlled=void 0,m.init=f,m.test=h,m.step=i,m.body=j,m.label=k,m}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="ForNode","function"==typeof a.extended&&a.extended(b),b.cappedName="For",b.argNames=["init","test","step","body","label"],c.type=function(){return pb.undefined},c.isStatement=function(){return!0},c.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.init,this.test,this.step,this.body,a)},c.inspect=function(a){return e(a,"ForNode",this.index,this.init,this.test,this.step,this.body,this.label)},c.walk=function(c){var d,e,f,g,h;return e=c(this.init),h=c(this.test),g=c(this.step),d=c(this.body),f=this.label instanceof a?c(this.label):this.label,e!==this.init||h!==this.test||g!==this.step||d!==this.body||f!==this.label?b(this.index,this.scope,e,h,g,d,f):this},c.walkAsync=function(c,d){var e,f;return f=this,c(this.init,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.test,(i=!1,function(e,g){var j;if(i)throw Error("Attempted to call function more than once");
return i=!0,null!=e?d(e):c(f.step,(j=!1,function(e,i){var k;if(j)throw Error("Attempted to call function more than once");return j=!0,null!=e?d(e):c(f.body,(k=!1,function(e,j){if(k)throw Error("Attempted to call function more than once");return k=!0,null!=e?d(e):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.init||g!==f.test||i!==f.step||j!==f.body||a!==f.label?b(f.index,f.scope,h,g,i,j,a):f)})}))}))}))}))},b}(V),V.ForIn=L=function(a){function b(d,e,f,h,i,j){var k;if(k=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected key to be a "+l(a)+", got "+s(f));if(!(h instanceof a))throw TypeError("Expected object to be a "+l(a)+", got "+s(h));if(!(i instanceof a))throw TypeError("Expected body to be a "+l(a)+", got "+s(i));if(null==j)j=null;else if(!(j instanceof O||j instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(j));return k.index=d,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.key=f,k.object=h,k.body=i,k.label=j,k}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="ForInNode","function"==typeof a.extended&&a.extended(b),b.cappedName="ForIn",b.argNames=["key","object","body","label"],c.type=function(){return pb.undefined},c.isStatement=function(){return!0},c.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.key,this.object,this.body,a)},c.inspect=function(a){return e(a,"ForInNode",this.index,this.key,this.object,this.body,this.label)},c.walk=function(c){var d,e,f,g;return e=c(this.key),g=c(this.object),d=c(this.body),f=this.label instanceof a?c(this.label):this.label,e!==this.key||g!==this.object||d!==this.body||f!==this.label?b(this.index,this.scope,e,g,d,f):this},c.walkAsync=function(c,d){var e,f;return f=this,c(this.key,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.object,(i=!1,function(e,g){var j;if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?d(e):c(f.body,(j=!1,function(e,i){if(j)throw Error("Attempted to call function more than once");return j=!0,null!=e?d(e):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.key||g!==f.object||i!==f.body||a!==f.label?b(f.index,f.scope,h,g,i,a):f)})}))}))}))},b}(V),V.Function=N=function(a){function b(d,e,f,h,i,k,m,n,o,p){var q,r,t;if(t=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!j(f))throw TypeError("Expected params to be an Array, got "+s(f));for(q=f.length;q--;)if(!(f[q]instanceof a))throw TypeError("Expected "+("params["+q+"]")+" to be a "+l(a)+", got "+s(f[q]));if(!(h instanceof a))throw TypeError("Expected body to be a "+l(a)+", got "+s(h));if(null==i)i=!0;else if("boolean"!=typeof i)throw TypeError("Expected autoReturn to be a Boolean, got "+s(i));if(null==k)k=!1;else if(!(k instanceof a)&&"boolean"!=typeof k)throw TypeError("Expected bound to be one of "+(l(a)+" or Boolean")+", got "+s(k));if(null==m)m=!1;else if("boolean"!=typeof m)throw TypeError("Expected curry to be a Boolean, got "+s(m));if(null==n)n=void 0;else if(!(n instanceof a))throw TypeError("Expected asType to be one of "+(l(a)+" or undefined")+", got "+s(n));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected generator to be a Boolean, got "+s(o));if(null==p)p=[];else{if(!j(p))throw TypeError("Expected generic to be an Array, got "+s(p));for(r=p.length;r--;)if(!(p[r]instanceof O))throw TypeError("Expected "+("generic["+r+"]")+" to be a "+l(O)+", got "+s(p[r]))}return t.index=d,t.scope=e,t._reduced=void 0,t._macroExpanded=void 0,t._macroExpandAlled=void 0,t.params=f,t.body=h,t.autoReturn=i,t.bound=k,t.curry=m,t.asType=n,t.generator=o,t.generic=p,t}var c,f;return f=a.prototype,c=b.prototype=g(f),c.constructor=b,b.displayName="FunctionNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Function",b.argNames=["params","body","autoReturn","bound","curry","asType","generator","generic"],c.type=function(a){var c,d,e;return null==(c=this._type)?null!=this.asType?this._type=W(this.asType)["function"]():(d=this.autoReturn?this.body.type(a):pb.undefined,e=function(c){var f;return c instanceof ab?(d=d.union(c.type(a)),c):c instanceof b?c:c instanceof S?(("return"===(f=c.data.macroName)||"return?"===f)&&(d=c.data.macroData.node?d.union(c.data.macroData.node.type(a)):d.union(pb.undefined)),c.walk(e)):c.walk(e)},e(this.body),this._type=d["function"]()):c},c._isNoop=function(){return!0},c.inspect=function(a){return e(a,"FunctionNode",this.index,this.params,this.body,this.autoReturn,this.bound,this.curry,this.asType,this.generator,this.generic)},c.walk=function(c){var e,f,g,h;return h=d(this.params,c),f=c(this.body),g=this.bound instanceof a?c(this.bound):this.bound,e=this.asType instanceof a?c(this.asType):this.asType,h!==this.params||f!==this.body||g!==this.bound||e!==this.asType?b(this.index,this.scope,h,f,this.autoReturn,g,this.curry,e,this.generator,this.generic):this},c.walkAsync=function(c,d){var e,f;return f=this,U(this.params,c,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.body,(i=!1,function(e,g){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?d(e):(f.bound instanceof a?function(a){var b;return c(f.bound,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.bound)})(function(e){return(f.asType instanceof a?function(a){var b;return c(f.asType,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.asType)})(function(a){return d(null,h!==f.params||g!==f.body||e!==f.bound||a!==f.asType?b(f.index,f.scope,h,g,f.autoReturn,e,f.curry,a,f.generator,f.generic):f)})})}))}))},b}(V),V.Ident=O=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.name=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="IdentNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Ident",b.argNames=["name"],c.cacheable=!1,c.type=function(a){return"__currentArrayLength"===this.name?pb.number:a?this.scope.type(this):pb.any},c._isNoop=function(){return!0},c.isPrimordial=function(){return R(this.name)},c.inspect=function(a){return e(a,"IdentNode",this.index,this.name)},c.walk=function(){return this},c.walkAsync=function(a,b){return b(null,this)},b}(V),V.If=P=function(a){function b(d,e,f,h,i,j){var k;if(k=this instanceof b?this:g(c),"number"!=typeof d)throw TypeError("Expected index to be a Number, got "+s(d));if(!(f instanceof a))throw TypeError("Expected test to be a "+l(a)+", got "+s(f));if(!(h instanceof a))throw TypeError("Expected whenTrue to be a "+l(a)+", got "+s(h));if(null==i)i=X(0,e);else if(!(i instanceof a))throw TypeError("Expected whenFalse to be a "+l(a)+", got "+s(i));if(null==j)j=null;else if(!(j instanceof O||j instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(j));return k.index=d,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.test=f,k.whenTrue=h,k.whenFalse=i,k.label=j,k}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="IfNode","function"==typeof a.extended&&a.extended(b),b.cappedName="If",b.argNames=["test","whenTrue","whenFalse","label"],c.type=function(a){var b;return null==(b=this._type)?this._type=this.whenTrue.type(a).union(this.whenFalse.type(a)):b},c.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.test,this.whenTrue,this.whenFalse,a)},c._reduce=function(a){var c,d,e,f,g;return d=this.test.reduce(a),g=this.whenTrue.reduce(a),f=this.whenFalse.reduce(a),c=null!=this.label?this.label.reduce(a):this.label,d.isConst()?A(this.index,this.scope,[d.constValue()?g:f],c).reduce(a):(e=d.type(a),e.isSubsetOf(pb.alwaysTruthy)?A(this.index,this.scope,[d,g],c).reduce(a):e.isSubsetOf(pb.alwaysFalsy)?A(this.index,this.scope,[d,f],c).reduce(a):d!==this.test||g!==this.whenTrue||f!==this.whenFalse||c!==this.label?b(this.index,this.scope,d,g,f,c):this)},c.isStatement=function(){var a;return null==(a=this._isStatement)?this._isStatement=this.whenTrue.isStatement()||this.whenFalse.isStatement():a},c.doWrap=function(a){var c,d;return d=this.whenTrue.doWrap(a),c=this.whenFalse.doWrap(a),d!==this.whenTrue||c!==this.whenFalse?b(this.index,this.scope,this.test,d,c,this.label):this},c._isNoop=function(a){var b;return null==(b=this.__isNoop)?this.__isNoop=this.test.isNoop(a)&&this.whenTrue.isNoop(a)&&this.whenFalse.isNoop(a):b},c.inspect=function(a){return e(a,"IfNode",this.index,this.test,this.whenTrue,this.whenFalse,this.label)},c.walk=function(c){var d,e,f,g;return e=c(this.test),g=c(this.whenTrue),f=c(this.whenFalse),d=this.label instanceof a?c(this.label):this.label,e!==this.test||g!==this.whenTrue||f!==this.whenFalse||d!==this.label?b(this.index,this.scope,e,g,f,d):this},c.walkAsync=function(c,d){var e,f;return f=this,c(this.test,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.whenTrue,(i=!1,function(e,g){var j;if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?d(e):c(f.whenFalse,(j=!1,function(e,i){if(j)throw Error("Attempted to call function more than once");return j=!0,null!=e?d(e):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.test||g!==f.whenTrue||i!==f.whenFalse||a!==f.label?b(f.index,f.scope,h,g,i,a):f)})}))}))}))},b}(V),V.MacroAccess=S=function(a){function b(a,d,e,f,h,i,j,k,l){var m;if(m=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if("number"!=typeof e)throw TypeError("Expected id to be a Number, got "+s(e));if("number"!=typeof f)throw TypeError("Expected callLine to be a Number, got "+s(f));if("object"!=typeof h||null===h)throw TypeError("Expected data to be an Object, got "+s(h));if("string"!=typeof i)throw TypeError("Expected position to be a String, got "+s(i));if(null==j)j=!1;else if("boolean"!=typeof j)throw TypeError("Expected inGenerator to be a Boolean, got "+s(j));if(null==k)k=!1;else if("boolean"!=typeof k)throw TypeError("Expected inEvilAst to be a Boolean, got "+s(k));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected doWrapped to be a Boolean, got "+s(l));return m.index=a,m.scope=d,m._reduced=void 0,m._macroExpanded=void 0,m._macroExpandAlled=void 0,m.id=e,m.callLine=f,m.data=h,m.position=i,m.inGenerator=j,m.inEvilAst=k,m.doWrapped=l,m}var c,h;return h=a.prototype,c=b.prototype=g(h),c.constructor=b,b.displayName="MacroAccessNode","function"==typeof a.extended&&a.extended(b),b.cappedName="MacroAccess",b.argNames=["id","callLine","data","position","inGenerator","inEvilAst","doWrapped"],c.type=function(a){var b,c;return null==(b=this._type)?(c=a.macros.getTypeById(this.id),this._type=null!=c?"string"==typeof c?this.data[c].type(a):c:a.macroExpand1(this).type(a)):b},c.withLabel=function(a,b){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b.macroExpand1(this).withLabel(a,b)},c.walk=function(){function c(a,b){var c,d,f,g,h;g={},c=!1;for(d in a)o.call(a,d)&&(h=a[d],f=e(h,b),f!==h&&(c=!0),g[d]=f);return c?g:a}function e(b,f){return b instanceof a?f(b):j(b)?d(b,function(a){return e(a,f)}):"object"==typeof b&&null!==b?c(b,f):b}return function(a){var c;return c=e(this.data,a),c!==this.data?b(this.index,this.scope,this.id,this.callLine,c,this.position,this.inGenerator,this.inEvilAst,this.doWrapped):this}}(),c.walkAsync=function(){function c(a,b,c){var e,g,h;return g=!1,h={},e=k(a),f(1,e.length,!1,function(c,f){var i,j,k;return j=e[c],k=a[j],d(item,b,(i=!1,function(a,b){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=a?f(a):(item!==b&&(g=!0),h[j]=b,f(null))}))},function(b){return"undefined"!=typeof b&&null!==b?c(b):c(null,g?h:a)})}function d(b,e,f){return b instanceof a?e(b,f):j(b)?U(b,function(a,b){return d(a,e,b)},f):"object"==typeof b&&null!==b?c(b,e,f):f(null,b)}return function(a,c){var e,f;return f=this,d(this.data,a,(e=!1,function(a,d){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=a?c(a):c(null,d!==f.data?b(f.index,f.scope,f.id,f.callLine,d,f.position,f.inGenerator,f.inEvilAst,f.doWrapped):f)}))}}(),c._isNoop=function(a){return a.macroExpand1(this).isNoop(a)},c.doWrap=function(){return this.doWrapped?this:b(this.index,this.scope,this.id,this.callLine,this.data,this.position,this.inGenerator,this.inEvilAst,!0)},c.inspect=function(a){return e(a,"MacroAccessNode",this.index,this.id,this.callLine,this.data,this.position,this.inGenerator,this.inEvilAst,this.doWrapped)},b}(V),V.MacroConst=T=function(a){function b(a,d,e){var f;if(f=this instanceof b?this:g(c),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+s(e));return f.index=a,f.scope=d,f._reduced=void 0,f._macroExpanded=void 0,f._macroExpandAlled=void 0,f.name=e,f}var c,d;return d=a.prototype,c=b.prototype=g(d),c.constructor=b,b.displayName="MacroConstNode","function"==typeof a.extended&&a.extended(b),b.cappedName="MacroConst",b.argNames=["name"],c.type=function(a){var b,c,d;if(null!=(b=this._type))return b;if(c=a.getConst(this.name),!c)return this._type=pb.any;if(d=c.value,null===d)return this._type=pb["null"];switch(typeof d){case"number":return this._type=pb.number;case"string":return this._type=pb.string;case"boolean":return this._type=pb.boolean;case"undefined":return this._type=pb.undefined;default:throw Error("Unknown type for "+String(c.value))}},c._isNoop=function(){return!0},c.toConst=function(a){var b;return F(this.index,this.scope,null!=(b=a.getConst(this.name))?b.value:void 0)},c.inspect=function(a){return e(a,"MacroConstNode",this.index,this.name)},c.walk=function(){return this},c.walkAsync=function(a,b){return b(null,this)},b}(V),V.Nothing=X=function(a){function b(a,c){var e;if(e=this instanceof b?this:g(d),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));return e.index=a,e.scope=c,e._reduced=void 0,e._macroExpanded=void 0,e._macroExpandAlled=void 0,e}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="NothingNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Nothing",b.argNames=[],d.type=function(){return pb.undefined},d.cacheable=!1,d.isConst=function(){return!0},d.constValue=function(){},d.isConstType=function(a){return"undefined"===a},d.isConstValue=function(a){return void 0===a},d._isNoop=function(){return!0},d.inspect=function(a){return e(a,"NothingNode",this.index)},b}(V),V.Object=Y=function(a){function b(c,d,e,h){var i,k;if(k=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!j(e))throw TypeError("Expected pairs to be an Array, got "+s(e));for(i=e.length;i--;){if("object"!=typeof e[i]||null===e[i])throw TypeError("Expected "+("pairs["+i+"]")+" to be an Object, got "+s(e[i]));if(!(e[i].key instanceof a))throw TypeError("Expected "+("pairs["+i+"].key")+" to be a "+l(a)+", got "+s(e[i].key));if(!(e[i].value instanceof a))throw TypeError("Expected "+("pairs["+i+"].value")+" to be a "+l(a)+", got "+s(e[i].value));if(null==e[i].property)e[i].property=void 0;else if("string"!=typeof e[i].property)throw TypeError("Expected "+("pairs["+i+"].property")+" to be one of String or undefined, got "+s(e[i].property))}if(null==h)h=void 0;else if(!(h instanceof a))throw TypeError("Expected prototype to be one of "+(l(a)+" or undefined")+", got "+s(h));return k.index=c,k.scope=d,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.pairs=e,k.prototype=h,k}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="ObjectNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Object",b.argNames=["pairs","prototype"],f.type=function(a){var b,c,d,e,f,g,h,i;if(null==(e=this._type)){for(g={},b=r(this.pairs),c=0,d=b.length;d>c;++c)f=b[c],h=f.key,i=f.value,h.isConst()&&(g[h.constValue()]=i.type(a));return this._type=pb.makeObject(g)}return e},f.walk=function(){function a(a,b){var c,d;return c=b(a.key),d=b(a.value),c!==a.key||d!==a.value?{key:c,value:d,property:a.property}:a}return function(c){var e,f;return e=d(this.pairs,a,c),f=null!=this.prototype?c(this.prototype):this.prototype,e!==this.pairs||f!==this.prototype?b(this.index,this.scope,e,f):this}}(),f.walkAsync=function(){function a(a,b,c){var d;return b(a.key,(d=!1,function(e,f){var g;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=e?c(e):b(a.value,(g=!1,function(b,d){if(g)throw Error("Attempted to call function more than once");return g=!0,null!=b?c(b):c(null,f!==a.key||d!==a.value?{key:f,value:d,property:a.property}:a)}))}))}return function(c,d){var e,f;return f=this,U(this.pairs,a,c,(e=!1,function(a,g){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=a?d(a):(null!=f.prototype?function(a){var b;return c(f.prototype,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.prototype)})(function(a){return d(null,g!==f.pairs||a!==f.prototype?b(f.index,f.scope,g,a):f)})}))}}(),f._reduce=function(){function a(a,b){var c,d;return c=a.key.reduce(b),d=a.value.reduce(b).doWrap(b),c!==a.key||d!==a.value?{key:c,value:d,property:a.property}:a}return function(c){var e,f;return e=d(this.pairs,a,c),f=null!=this.prototype?this.prototype.reduce(c):this.prototype,e!==this.pairs||f!==this.prototype?b(this.index,this.scope,e,f):this}}(),f._isNoop=function(a){var b,c,d,e,f,g,h,i;if(null==(f=this.__isNoop)){for(c=!0,b=r(this.pairs),d=0,e=b.length;e>d;++d)if(g=b[d],h=g.key,i=g.value,!h.isNoop(a)||!i.isNoop(a)){c=!1;break}return this.__isNoop=c}return f},f.isLiteral=function(){var a,b;return b=this,null==(a=this._isLiteral)?this._isLiteral=null==this.prototype&&function(){var a,c,d,e,f,g,h;for(c=!0,a=r(b.pairs),d=0,e=a.length;e>d;++d)if(f=a[d],g=f.key,h=f.value,!g.isLiteral()||!h.isLiteral()){c=!1;break}return c}():a},f.literalValue=function(){var a,b,c,d,e,f,g;if(null!=this.prototype)throw Error("Cannot convert object with prototype to a literal");for(f={},a=r(this.pairs),b=0,c=a.length;c>b;++b)d=a[b],e=d.key,g=d.value,f[e.literalValue()]=g.literalValue();return f},f.inspect=function(a){return e(a,"ObjectNode",this.index,this.pairs,this.prototype)},b}(V),V.object=function(a,c,d){var e,f,g,h,j,k,l,m,n,o;for(l=[],m=null,e=r(c),f=0,g=e.length;g>f;++f)if(h=e[f],j=h.key,o=h.property,j instanceof F){if(k=String(j.value),("get"===o||"set"===o)&&m&&m.property!==o&&m.key===k){m=null;continue}if(i(k,l))throw n=b("./parser").ParserError,n("Duplicate key "+q($(k))+" in object",this,j.index);l.push(k),m="get"===o||"set"===o?{key:k,property:o}:null}else m=null;return this.Object(a,c,d)},V.objectParam=V.object,V.Param=Z=function(a){function b(c,e,f,h,i,j,k){var m;if(m=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected ident to be a "+l(a)+", got "+s(f));if(null==h)h=void 0;else if(!(h instanceof a))throw TypeError("Expected defaultValue to be one of "+(l(a)+" or undefined")+", got "+s(h));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected spread to be a Boolean, got "+s(i));if(null==j)j=!1;else if("boolean"!=typeof j)throw TypeError("Expected isMutable to be a Boolean, got "+s(j));if(null==k)k=void 0;else if(!(k instanceof a))throw TypeError("Expected asType to be one of "+(l(a)+" or undefined")+", got "+s(k));return m.index=c,m.scope=e,m._reduced=void 0,m._macroExpanded=void 0,m._macroExpandAlled=void 0,m.ident=f,m.defaultValue=h,m.spread=i,m.isMutable=j,m.asType=k,m}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="ParamNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Param",b.argNames=["ident","defaultValue","spread","isMutable","asType"],d.inspect=function(a){return e(a,"ParamNode",this.index,this.ident,this.defaultValue,this.spread,this.isMutable,this.asType)},d.walk=function(c){var d,e,f;return f=c(this.ident),e=this.defaultValue instanceof a?c(this.defaultValue):this.defaultValue,d=this.asType instanceof a?c(this.asType):this.asType,f!==this.ident||e!==this.defaultValue||d!==this.asType?b(this.index,this.scope,f,e,this.spread,this.isMutable,d):this},d.walkAsync=function(c,d){var e,f;return f=this,c(this.ident,(e=!1,function(g,h){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):(f.defaultValue instanceof a?function(a){var b;return c(f.defaultValue,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.defaultValue)})(function(e){return(f.asType instanceof a?function(a){var b;return c(f.asType,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.asType)})(function(a){return d(null,h!==f.ident||e!==f.defaultValue||a!==f.asType?b(f.index,f.scope,h,e,f.spread,f.isMutable,a):f)})})}))},b}(V),V.Regexp=_=function(a){function b(c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected source to be a "+l(a)+", got "+s(f));if("string"!=typeof h)throw TypeError("Expected flags to be a String, got "+s(h));return i.index=c,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.source=f,i.flags=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="RegexpNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Regexp",b.argNames=["source","flags"],d.type=function(){return pb.regexp},d._isNoop=function(a){return this.text.isNoop(a)},d._reduce=function(a){var c;return c=this.source.reduce(a).doWrap(a),c.isConst()?c!==this.source?b(this.index,this.scope,c,this.flags):this:C(this.index,this.scope,O(this.index,this.scope,"RegExp"),[c,F(this.index,this.scope,this.flags)])},d.inspect=function(a){return e(a,"RegexpNode",this.index,this.source,this.flags)},d.walk=function(a){var c;return c=a(this.source),c!==this.source?b(this.index,this.scope,c,this.flags):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.source,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.source?b(e.index,e.scope,f,e.flags):e)}))},b}(V),V.Return=ab=function(a){function b(c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(null==f)f=F(c,e,void 0);else if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));return h.index=c,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.node=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="ReturnNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Return",b.argNames=["node"],d.type=function(a){return this.node.type(a)},d.isStatement=function(){return!0},d._reduce=function(a){var c;return c=this.node.reduce(a).doWrap(a),c!==this.node?b(this.index,this.scope,c):this},d.inspect=function(a){return e(a,"ReturnNode",this.index,this.node)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f):e)}))},b}(V),V.Root=bb=function(a){function b(c,e,f,h,i,j){var k;if(k=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(null==f)f=void 0;else if("string"!=typeof f)throw TypeError("Expected file to be one of String or undefined, got "+s(f));if(!(h instanceof a))throw TypeError("Expected body to be a "+l(a)+", got "+s(h));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected isEmbedded to be a Boolean, got "+s(i));if(null==j)j=!1;else if("boolean"!=typeof j)throw TypeError("Expected isGenerator to be a Boolean, got "+s(j));return k.index=c,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.file=f,k.body=h,k.isEmbedded=i,k.isGenerator=j,k}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="RootNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Root",b.argNames=["file","body","isEmbedded","isGenerator"],d.isStatement=function(){return!0},d.inspect=function(a){return e(a,"RootNode",this.index,this.file,this.body,this.isEmbedded,this.isGenerator)},d.walk=function(a){var c;return c=a(this.body),c!==this.body?b(this.index,this.scope,this.file,c,this.isEmbedded,this.isGenerator):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.body,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.body?b(e.index,e.scope,e.file,f,e.isEmbedded,e.isGenerator):e)}))},b}(V),V.Spread=cb=function(a){function b(c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));return h.index=c,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.node=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="SpreadNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Spread",b.argNames=["node"],d._reduce=function(a){var c;return c=this.node.reduce(a).doWrap(a),c!==this.node?b(this.index,this.scope,c):this},d.inspect=function(a){return e(a,"SpreadNode",this.index,this.node)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f):e)}))},b}(V),V.string=function(a,b){var c,d,e,f,g,h;if(!j(b))throw TypeError("Expected parts to be an Array, got "+s(b));for(c=b.length;c--;)if(!(b[c]instanceof V))throw TypeError("Expected "+("parts["+c+"]")+" to be a "+l(V)+", got "+s(b[c]));if(f=this.getMacroByLabel("stringConcat"),!f)throw Error("Cannot use string interpolation until the string-concat operator has been defined");if(0===b.length)return this.Const(a,"");if(1===b.length)return f.func({left:this.Const(a,""),op:"",right:b[0]},this,a);for(g=b[0],d=1,e=b.length;e>d;++d)h=b[d],g=f.func({left:g,op:"",right:h},this,a);return g},V.Super=db=function(a){function b(c,d,e,h){var i,k;if(k=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(null==e)e=void 0;else if(!(e instanceof a))throw TypeError("Expected child to be one of "+(l(a)+" or undefined")+", got "+s(e));if(!j(h))throw TypeError("Expected args to be an Array, got "+s(h));for(i=h.length;i--;)if(!(h[i]instanceof a))throw TypeError("Expected "+("args["+i+"]")+" to be a "+l(a)+", got "+s(h[i]));return k.index=c,k.scope=d,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.child=e,k.args=h,k}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="SuperNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Super",b.argNames=["child","args"],f._reduce=function(a){var c,e;return e=null!=this.child?this.child.reduce(a).doWrap(a):this.child,c=d(this.args,function(a,b){return a.reduce(b).doWrap(b)},a),e!==this.child||c!==this.args?b(this.index,this.scope,e,c):this},f.inspect=function(a){return e(a,"SuperNode",this.index,this.child,this.args)},f.walk=function(c){var e,f;return f=this.child instanceof a?c(this.child):this.child,e=d(this.args,c),f!==this.child||e!==this.args?b(this.index,this.scope,f,e):this},f.walkAsync=function(c,d){var e;return e=this,(this.child instanceof a?function(a){var b;return c(e.child,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(e.child)})(function(a){var f;return U(e.args,c,(f=!1,function(c,g){if(f)throw Error("Attempted to call function more than once");return f=!0,null!=c?d(c):d(null,a!==e.child||g!==e.args?b(e.index,e.scope,a,g):e)}))})},b}(V),V.Switch=eb=function(a){function b(c,d,e,h,i,k){var m;if(m=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(e instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(e));if(!j(h))throw TypeError("Expected cases to be an Array, got "+s(h));if(null==i)i=void 0;else if(!(i instanceof a))throw TypeError("Expected defaultCase to be one of "+(l(a)+" or undefined")+", got "+s(i));if(null==k)k=null;else if(!(k instanceof O||k instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(k));return m.index=c,m.scope=d,m._reduced=void 0,m._macroExpanded=void 0,m._macroExpandAlled=void 0,m.node=e,m.cases=h,m.defaultCase=i,m.label=k,m}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="SwitchNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Switch",b.argNames=["node","cases","defaultCase","label"],f.type=function(a){var b,c,d,e,f,g;if(null==(e=this._type)){for(g=null!=this.defaultCase?this.defaultCase.type(a):pb.undefined,b=r(this.cases),c=0,d=b.length;d>c;++c)f=b[c],g=f.fallthrough?g:g.union(f.body.type(a));return this._type=g}return e},f.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.node,this.cases,this.defaultCase,a)},f.walk=function(a){var c,e,f,g;return g=a(this.node),c=d(this.cases,function(b){var c,d;return d=a(b.node),c=a(b.body),d!==b.node||c!==b.body?{node:d,body:c,fallthrough:b.fallthrough}:b}),e=this.defaultCase?a(this.defaultCase):this.defaultCase,f=null!=this.label?a(this.label):this.label,g!==this.node||c!==this.cases||e!==this.defaultCase||f!==this.label?b(this.index,this.scope,g,c,e,f):this},f.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):U(e.cases,function(b,c){var d;return a(b.node,(d=!1,function(e,f){var g;
if(d)throw Error("Attempted to call function more than once");return d=!0,null!=e?c(e):a(b.body,(g=!1,function(a,d){if(g)throw Error("Attempted to call function more than once");return g=!0,null!=a?c(a):c(null,f!==b.node||d!==b.body?{node:f,body:d,fallthrough:b.fallthrough}:b)}))}))},(h=!1,function(d,f){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=d?c(d):(null!=e.defaultCase?function(b){var d;return a(e.defaultCase,(d=!1,function(a,e){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):b(e)}))}:function(a){return a(e.defaultCase)})(function(d){return(null!=e.label?function(b){var d;return a(e.label,(d=!1,function(a,e){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):b(e)}))}:function(a){return a(e.label)})(function(a){return c(null,g!==e.node||f!==e.cases||d!==e.defaultCase||a!==e.label?b(e.index,e.scope,g,f,d,a):e)})})}))}))},f.isStatement=function(){return!0},f.inspect=function(a){return e(a,"SwitchNode",this.index,this.node,this.cases,this.defaultCase,this.label)},b}(V),V.SyntaxChoice=fb=function(a){function b(c,d,e){var h,i;if(i=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!j(e))throw TypeError("Expected choices to be an Array, got "+s(e));for(h=e.length;h--;)if(!(e[h]instanceof a))throw TypeError("Expected "+("choices["+h+"]")+" to be a "+l(a)+", got "+s(e[h]));return i.index=c,i.scope=d,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.choices=e,i}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="SyntaxChoiceNode","function"==typeof a.extended&&a.extended(b),b.cappedName="SyntaxChoice",b.argNames=["choices"],f.inspect=function(a){return e(a,"SyntaxChoiceNode",this.index,this.choices)},f.walk=function(a){var c;return c=d(this.choices,a),c!==this.choices?b(this.index,this.scope,c):this},f.walkAsync=function(a,c){var d,e;return e=this,U(this.choices,a,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.choices?b(e.index,e.scope,f):e)}))},b}(V),V.SyntaxMany=gb=function(a){function b(c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected inner to be a "+l(a)+", got "+s(f));if("string"!=typeof h)throw TypeError("Expected multiplier to be a String, got "+s(h));return i.index=c,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.inner=f,i.multiplier=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="SyntaxManyNode","function"==typeof a.extended&&a.extended(b),b.cappedName="SyntaxMany",b.argNames=["inner","multiplier"],d.inspect=function(a){return e(a,"SyntaxManyNode",this.index,this.inner,this.multiplier)},d.walk=function(a){var c;return c=a(this.inner),c!==this.inner?b(this.index,this.scope,c,this.multiplier):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.inner,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.inner?b(e.index,e.scope,f,e.multiplier):e)}))},b}(V),V.SyntaxParam=hb=function(a){function b(c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected ident to be a "+l(a)+", got "+s(f));if(null==h)h=void 0;else if(!(h instanceof a))throw TypeError("Expected asType to be one of "+(l(a)+" or undefined")+", got "+s(h));return i.index=c,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.ident=f,i.asType=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="SyntaxParamNode","function"==typeof a.extended&&a.extended(b),b.cappedName="SyntaxParam",b.argNames=["ident","asType"],d.inspect=function(a){return e(a,"SyntaxParamNode",this.index,this.ident,this.asType)},d.walk=function(c){var d,e;return e=c(this.ident),d=this.asType instanceof a?c(this.asType):this.asType,e!==this.ident||d!==this.asType?b(this.index,this.scope,e,d):this},d.walkAsync=function(c,d){var e,f;return f=this,c(this.ident,(e=!1,function(g,h){if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):(f.asType instanceof a?function(a){var b;return c(f.asType,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.asType)})(function(a){return d(null,h!==f.ident||a!==f.asType?b(f.index,f.scope,h,a):f)})}))},b}(V),V.SyntaxSequence=ib=function(a){function b(c,d,e){var h,i;if(i=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!j(e))throw TypeError("Expected params to be an Array, got "+s(e));for(h=e.length;h--;)if(!(e[h]instanceof a))throw TypeError("Expected "+("params["+h+"]")+" to be a "+l(a)+", got "+s(e[h]));return i.index=c,i.scope=d,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.params=e,i}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="SyntaxSequenceNode","function"==typeof a.extended&&a.extended(b),b.cappedName="SyntaxSequence",b.argNames=["params"],f.inspect=function(a){return e(a,"SyntaxSequenceNode",this.index,this.params)},f.walk=function(a){var c;return c=d(this.params,a),c!==this.params?b(this.index,this.scope,c):this},f.walkAsync=function(a,c){var d,e;return e=this,U(this.params,a,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.params?b(e.index,e.scope,f):e)}))},b}(V),V.This=jb=function(a){function b(a,c){var e;if(e=this instanceof b?this:g(d),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));return e.index=a,e.scope=c,e._reduced=void 0,e._macroExpanded=void 0,e._macroExpandAlled=void 0,e}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="ThisNode","function"==typeof a.extended&&a.extended(b),b.cappedName="This",b.argNames=[],d.cacheable=!1,d._isNoop=function(){return!0},d.inspect=function(a){return e(a,"ThisNode",this.index)},b}(V),V.Throw=kb=function(a){function b(c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));return h.index=c,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.node=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="ThrowNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Throw",b.argNames=["node"],d.type=function(){return pb.none},d.isStatement=function(){return!0},d._reduce=function(a){var c;return c=this.node.reduce(a).doWrap(a),c!==this.node?b(this.index,this.scope,c):this},d.doWrap=function(){return C(this.index,this.scope,O(this.index,this.scope,"__throw"),[this.node])},d.inspect=function(a){return e(a,"ThrowNode",this.index,this.node)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f):e)}))},b}(V),V.Tmp=lb=function(a){function b(a,c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if("number"!=typeof e)throw TypeError("Expected id to be a Number, got "+s(e));if("string"!=typeof f)throw TypeError("Expected name to be a String, got "+s(f));if(null==h)h=pb.any;else if(!(h instanceof pb))throw TypeError("Expected _type to be a "+l(pb)+", got "+s(h));return i.index=a,i.scope=c,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.id=e,i.name=f,i._type=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="TmpNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Tmp",b.argNames=["id","name","_type"],d.cacheable=!1,d.type=function(){return this._type},d._isNoop=function(){return!0},d.inspect=function(a){return e(a,"TmpNode",this.index,this.id,this.name,this._type)},d.walk=function(){return this},d.walkAsync=function(a,b){return b(null,this)},b}(V),V.TmpWrapper=mb=function(a){function b(c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));if(!j(h))throw TypeError("Expected tmps to be an Array, got "+s(h));return i.index=c,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.node=f,i.tmps=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="TmpWrapperNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TmpWrapper",b.argNames=["node","tmps"],d.type=function(a){return this.node.type(a)},d.withLabel=function(a,c){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.node.withLabel(a,c),this.tmps)},d._reduce=function(a){var c;return c=this.node.reduce(a),0===this.tmps.length?c:this.node!==c?b(this.index,this.scope,c,this.tmps):this},d.isStatement=function(){return this.node.isStatement()},d._isNoop=function(a){return this.node.isNoop(a)},d.doWrap=function(a){var c;return c=this.node.doWrap(a),c!==this.node?b(this.index,this.scope,c,this.tmps):this},d.inspect=function(a){return e(a,"TmpWrapperNode",this.index,this.node,this.tmps)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c,this.tmps):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f,e.tmps):e)}))},b}(V),V.TryCatch=nb=function(a){function b(c,e,f,h,i,j){var k;if(k=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected tryBody to be a "+l(a)+", got "+s(f));if(!(h instanceof a))throw TypeError("Expected catchIdent to be a "+l(a)+", got "+s(h));if(!(i instanceof a))throw TypeError("Expected catchBody to be a "+l(a)+", got "+s(i));if(null==j)j=null;else if(!(j instanceof O||j instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(j));return k.index=c,k.scope=e,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.tryBody=f,k.catchIdent=h,k.catchBody=i,k.label=j,k}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="TryCatchNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TryCatch",b.argNames=["tryBody","catchIdent","catchBody","label"],d.type=function(a){var b;return null==(b=this._type)?this._type=this.tryBody.type(a).union(this.catchBody.type(a)):b},d.isStatement=function(){return!0},d._isNoop=function(a){return this.tryBody.isNoop(a)},d.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.tryBody,this.catchIdent,this.catchBody,a)},d.inspect=function(a){return e(a,"TryCatchNode",this.index,this.tryBody,this.catchIdent,this.catchBody,this.label)},d.walk=function(c){var d,e,f,g;return g=c(this.tryBody),e=c(this.catchIdent),d=c(this.catchBody),f=this.label instanceof a?c(this.label):this.label,g!==this.tryBody||e!==this.catchIdent||d!==this.catchBody||f!==this.label?b(this.index,this.scope,g,e,d,f):this},d.walkAsync=function(c,d){var e,f;return f=this,c(this.tryBody,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.catchIdent,(i=!1,function(e,g){var j;if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?d(e):c(f.catchBody,(j=!1,function(e,i){if(j)throw Error("Attempted to call function more than once");return j=!0,null!=e?d(e):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.tryBody||g!==f.catchIdent||i!==f.catchBody||a!==f.label?b(f.index,f.scope,h,g,i,a):f)})}))}))}))},b}(V),V.TryFinally=ob=function(a){function b(c,e,f,h,i){var j;if(j=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected tryBody to be a "+l(a)+", got "+s(f));if(!(h instanceof a))throw TypeError("Expected finallyBody to be a "+l(a)+", got "+s(h));if(null==i)i=null;else if(!(i instanceof O||i instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(i));return j.index=c,j.scope=e,j._reduced=void 0,j._macroExpanded=void 0,j._macroExpandAlled=void 0,j.tryBody=f,j.finallyBody=h,j.label=i,j}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="TryFinallyNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TryFinally",b.argNames=["tryBody","finallyBody","label"],d.type=function(a){return this.tryBody.type(a)},d._reduce=function(a){var c,d,e;return e=this.tryBody.reduce(a),c=this.finallyBody.reduce(a),d=null!=this.label?this.label.reduce(a):this.label,c instanceof X?A(this.index,this.scopeIf([e],d)).reduce(a):e instanceof X?A(this.index,this.scopeIf([c],d)).reduce(a):e!==this.tryBody||c!==this.finallyBody||d!==this.label?b(this.index,this.scope,e,c,d):this},d.isStatement=function(){return!0},d._isNoop=function(a){var b;return null==(b=this.__isNoop)?this.__isNoop=this.tryBody.isNoop(a)&&this.finallyBody.isNoop():b},d.withLabel=function(a){if(null==a)a=null;else if(!(a instanceof O||a instanceof lb))throw TypeError("Expected label to be one of "+(l(O)+" or "+l(lb)+" or null")+", got "+s(a));return b(this.index,this.scope,this.tryBody,this.finallyBody,a)},d.inspect=function(a){return e(a,"TryFinallyNode",this.index,this.tryBody,this.finallyBody,this.label)},d.walk=function(c){var d,e,f;return f=c(this.tryBody),d=c(this.finallyBody),e=this.label instanceof a?c(this.label):this.label,f!==this.tryBody||d!==this.finallyBody||e!==this.label?b(this.index,this.scope,f,d,e):this},d.walkAsync=function(c,d){var e,f;return f=this,c(this.tryBody,(e=!1,function(g,h){var i;if(e)throw Error("Attempted to call function more than once");return e=!0,null!=g?d(g):c(f.finallyBody,(i=!1,function(e,g){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?d(e):(f.label instanceof a?function(a){var b;return c(f.label,(b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,null!=c?d(c):a(e)}))}:function(a){return a(f.label)})(function(a){return d(null,h!==f.tryBody||g!==f.finallyBody||a!==f.label?b(f.index,f.scope,h,g,a):f)})}))}))},b}(V),V.TypeFunction=qb=function(a){function b(c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected returnType to be a "+l(a)+", got "+s(f));return h.index=c,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.returnType=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="TypeFunctionNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TypeFunction",b.argNames=["returnType"],d.inspect=function(a){return e(a,"TypeFunctionNode",this.index,this.returnType)},d.walk=function(a){var c;return c=a(this.returnType),c!==this.returnType?b(this.index,this.scope,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.returnType,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.returnType?b(e.index,e.scope,f):e)}))},b}(V),V.TypeGeneric=rb=function(a){function b(c,d,e,h){var i,k;if(k=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(e instanceof a))throw TypeError("Expected basetype to be a "+l(a)+", got "+s(e));if(!j(h))throw TypeError("Expected args to be an Array, got "+s(h));for(i=h.length;i--;)if(!(h[i]instanceof a))throw TypeError("Expected "+("args["+i+"]")+" to be a "+l(a)+", got "+s(h[i]));return k.index=c,k.scope=d,k._reduced=void 0,k._macroExpanded=void 0,k._macroExpandAlled=void 0,k.basetype=e,k.args=h,k}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="TypeGenericNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TypeGeneric",b.argNames=["basetype","args"],f.inspect=function(a){return e(a,"TypeGenericNode",this.index,this.basetype,this.args)},f.walk=function(a){var c,e;return e=a(this.basetype),c=d(this.args,a),e!==this.basetype||c!==this.args?b(this.index,this.scope,e,c):this},f.walkAsync=function(a,c){var d,e;return e=this,a(this.basetype,(d=!1,function(f,g){var h;if(d)throw Error("Attempted to call function more than once");return d=!0,null!=f?c(f):U(e.args,a,(h=!1,function(a,d){if(h)throw Error("Attempted to call function more than once");return h=!0,null!=a?c(a):c(null,g!==e.basetype||d!==e.args?b(e.index,e.scope,g,d):e)}))}))},b}(V),V.TypeObject=sb=function(a){function b(a,c,d){var e;if(e=this instanceof b?this:g(h),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if(!j(d))throw TypeError("Expected pairs to be an Array, got "+s(d));return e.index=a,e.scope=c,e._reduced=void 0,e._macroExpanded=void 0,e._macroExpandAlled=void 0,e.pairs=d,e}function c(a,b){var c,d;return c=a.key.reduce(b),d=a.value.reduce(b),c!==a.key||d!==a.value?{key:c,value:d}:a}var f,h;return f=a.prototype,h=b.prototype=g(f),h.constructor=b,b.displayName="TypeObjectNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TypeObject",b.argNames=["pairs"],h._reduce=function(a){var e;return e=d(this.pairs,c,a),e!==this.pairs?b(this.index,this.scope,e):this},h.inspect=function(a){return e(a,"TypeObjectNode",this.index,this.pairs)},h.walk=function(){return this},h.walkAsync=function(a,b){return b(null,this)},b}(V),V.TypeUnion=tb=function(a){function b(c,d,e){var h,i;if(i=this instanceof b?this:g(f),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!j(e))throw TypeError("Expected types to be an Array, got "+s(e));for(h=e.length;h--;)if(!(e[h]instanceof a))throw TypeError("Expected "+("types["+h+"]")+" to be a "+l(a)+", got "+s(e[h]));return i.index=c,i.scope=d,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.types=e,i}var c,f;return c=a.prototype,f=b.prototype=g(c),f.constructor=b,b.displayName="TypeUnionNode","function"==typeof a.extended&&a.extended(b),b.cappedName="TypeUnion",b.argNames=["types"],f.inspect=function(a){return e(a,"TypeUnionNode",this.index,this.types)},f.walk=function(a){var c;return c=d(this.types,a),c!==this.types?b(this.index,this.scope,c):this},f.walkAsync=function(a,c){var d,e;return e=this,U(this.types,a,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.types?b(e.index,e.scope,f):e)}))},b}(V),V.Unary=ub=function(a){function b(c,e,f,h){var i;if(i=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if("string"!=typeof f)throw TypeError("Expected op to be a String, got "+s(f));if(!(h instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(h));return i.index=c,i.scope=e,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.op=f,i.node=h,i}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="UnaryNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Unary",b.argNames=["op","node"],d.type=function(){var a;return a={"-":pb.number,"+":pb.number,"--":pb.number,"++":pb.number,"--post":pb.number,"++post":pb.number,"!":pb.boolean,"~":pb.number,"typeof":pb.string,"delete":pb.boolean},function(){var b;return(o.call(a,b=this.op)?a[b]:void 0)||pb.any}}(),d._reduce=function(){var a,c;return a={"-":function(a){return-a},"+":function(a){return+a},"!":function(a){return!a},"~":function(a){return~a},"typeof":function(a){return typeof a}},c={"+":function(a,b){return a.type(b).isSubsetOf(pb.number)?a:void 0},"-":function(a){var c;if(a instanceof b){if("-"===(c=a.op)||"+"===c)return b(this.index,this.scope,"-"===a.op?"+":"-",a.node)}else if(a instanceof z){if("-"===(c=a.op)||"+"===c)return z(this.index,this.scope,a.left,"-"===a.op?"+":"-",a.right);if("*"===(c=a.op)||"/"===c)return z(this.index,this.scope,b(a.left.index,a.left.scope,"-",a.left),a.op,a.right)}},"!":function(){var a;return a={"<":">=","<=":">",">":"<=",">=":"<","==":"!=","!=":"==","===":"!==","!==":"===","&&":function(a,c){return z(this.index,this.scope,b(a.index,a.scope,"!",a),"||",b(c.index,c.scope,"!",c))},"||":function(a,c){return z(this.index,this.scope,b(a.index,a.scope,"!",a),"&&",b(c.index,c.scope,"!",c))}},function(c,d){var e;if(c instanceof b){if("!"===c.op&&c.node.type(d).isSubsetOf(pb.boolean))return c.node}else if(c instanceof z&&o.call(a,c.op))return e=a[c.op],"function"==typeof e?e.call(this,c.left,c.right):z(this.index,this.scope,c.left,e,c.right)}}(),"typeof":function(){var a;return a=pb["null"].union(pb.object).union(pb.arrayLike).union(pb.regexp).union(pb.date).union(pb.error),function(b,c){var d;if(b.isNoop(c)){if(d=b.type(c),d.isSubsetOf(pb.number))return F(this.index,this.scope,"number");if(d.isSubsetOf(pb.string))return F(this.index,this.scope,"string");if(d.isSubsetOf(pb.boolean))return F(this.index,this.scope,"boolean");if(d.isSubsetOf(pb.undefined))return F(this.index,this.scope,"undefined");if(d.isSubsetOf(pb["function"]))return F(this.index,this.scope,"function");if(d.isSubsetOf(a))return F(this.index,this.scope,"object")}}}()},function(d){var e,f,g;return e=this.node.reduce(d).doWrap(d),f=this.op,e.isConst()&&o.call(a,f)?F(this.index,this.scope,a[f](e.constValue())):(o.call(c,f)&&(g=c[f].call(this,e,d)),null!=g?g.reduce(d):e!==this.node?b(this.index,this.scope,f,e):this)}}(),d._isNoop=function(a){var b,c;return null==(b=this.__isNoop)?this.__isNoop="++"!==(c=this.op)&&"--"!==c&&"++post"!==c&&"--post"!==c&&"delete"!==c&&this.node.isNoop(a):b},d.inspect=function(a){return e(a,"UnaryNode",this.index,this.op,this.node)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,this.op,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,e.op,f):e)}))},b}(V),V.Var=vb=function(a){function b(a,c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof a)throw TypeError("Expected index to be a Number, got "+s(a));if(!(e instanceof O||e instanceof lb))throw TypeError("Expected ident to be one of "+(l(O)+" or "+l(lb))+", got "+s(e));if(null==f)f=!1;else if("boolean"!=typeof f)throw TypeError("Expected isMutable to be a Boolean, got "+s(f));return h.index=a,h.scope=c,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.ident=e,h.isMutable=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="VarNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Var",b.argNames=["ident","isMutable"],d.type=function(){return pb.undefined},d._reduce=function(a){var c;return c=this.ident.reduce(a),c!==this.ident?b(this.index,this.scope,c,this.isMutable):this},d.inspect=function(a){return e(a,"VarNode",this.index,this.ident,this.isMutable)},d.walk=function(a){var c;return c=a(this.ident),c!==this.ident?b(this.index,this.scope,c,this.isMutable):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.ident,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.ident?b(e.index,e.scope,f,e.isMutable):e)}))},b}(V),V.Yield=wb=function(a){function b(c,e,f){var h;if(h=this instanceof b?this:g(d),"number"!=typeof c)throw TypeError("Expected index to be a Number, got "+s(c));if(!(f instanceof a))throw TypeError("Expected node to be a "+l(a)+", got "+s(f));return h.index=c,h.scope=e,h._reduced=void 0,h._macroExpanded=void 0,h._macroExpandAlled=void 0,h.node=f,h}var c,d;return c=a.prototype,d=b.prototype=g(c),d.constructor=b,b.displayName="YieldNode","function"==typeof a.extended&&a.extended(b),b.cappedName="Yield",b.argNames=["node"],d.type=function(){return pb.any},d._reduce=function(a){var c;return c=this.node.reduce(a).doWrap(a),c!==this.node?b(this.index,this.scope,c):this},d.inspect=function(a){return e(a,"YieldNode",this.index,this.node)},d.walk=function(a){var c;return c=a(this.node),c!==this.node?b(this.index,this.scope,c):this},d.walkAsync=function(a,c){var d,e;return e=this,a(this.node,(d=!1,function(a,f){if(d)throw Error("Attempted to call function more than once");return d=!0,null!=a?c(a):c(null,f!==e.node?b(e.index,e.scope,f):e)}))},b}(V),a.exports=V}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b["./parser-macroholder"]=function(){var a={exports:this};return function(){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o;c="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},d=function(a,b){var c;for(c in b)i.call(b,c)&&(a[c]=b[c]);return a},e="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),f=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a},g=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+m(a));return a.displayName||a.name||""},h=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+m(a));return a},i=Object.prototype.hasOwnProperty,j=Array.prototype.slice,k=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+m(a))},l=function(a){if(null==a)throw TypeError("Expected an object, got "+m(a));return e(a)?a:"string"==typeof a?a.split(""):j.call(a)},m=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),o=b("./types"),n=function(){function a(b,d,e,f,g){var h;if(h=this instanceof a?this:c(p),"object"!=typeof b||null===b)throw TypeError("Expected syntaxes to be an Object, got "+m(b));if(h.syntaxes=b,"function"!=typeof d)throw TypeError("Expected macroName to be a Function, got "+m(d));if(h.macroName=d,"function"!=typeof e)throw TypeError("Expected wordOrSymbol to be a Function, got "+m(e));if(h.wordOrSymbol=e,"function"!=typeof f)throw TypeError("Expected oneOf to be a Function, got "+m(f));if(h.oneOf=f,"function"!=typeof g)throw TypeError("Expected sequential to be a Function, got "+m(g));return h.sequential=g,h.byName={},h.byId=[],h.byLabel={},h.typeById=[],h.operatorNames={},h.binaryOperators=[],h.assignOperators=[],h.prefixUnaryOperators=[],h.postfixUnaryOperators=[],h.consts={},h.serialization={},h.helpers={},h}function j(a){switch(a){case 0:return{type:0===a&&1/a>0?"+0":"-0"};case 1/0:return{type:"Infinity"};case-1/0:return{type:"-Infinity"};default:return a!==a?{type:"NaN"}:void 0===a?{type:"void"}:a}}function n(a){if("object"!=typeof a||null===a||"string"!=typeof a.type)return a;switch(a.type){case"+0":return 0;case"-0":return-0;case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return 0/0;case"void":return;default:throw Error("Unknown value")}}var p;return p=a.prototype,a.displayName="MacroHolder",p.clone=function(){var b;return b=a(this.syntaxes,this.macroName,this.wordOrSymbol,this.oneOf,this.sequential),b.byName=d({},this.byName),b.byId=this.byId.slice(),b.byLabel=d({},this.byLabel),b.typeById=this.typeById.slice(),b.operatorNames=d({},this.operatorNames),b.binaryOperators=this.binaryOperators.slice(),b.assignOperators=this.assignOperators.slice(),b.prefixUnaryOperators=this.prefixUnaryOperators.slice(),b.postfixUnaryOperators=this.postfixUnaryOperators.slice(),b.consts=d({},this.consts),b.serialization=d({},this.serialization),b.helpers=d({},this.helpers),b.syntaxes=d({},this.syntaxes),b},p.getByName=function(a){var b;return i.call(b=this.byName,a)?b[a]:void 0},p.getOrAddByName=function(a){var b,c,d;return b=this.byName,i.call(b,a)?b[a]:(d=this.macroName(a),c=function(a,b){var d,e,f,g,h;for(d=l(c.data),e=0,f=d.length;f>e;++e)if(h=d[e],g=h(a,b))return g},c.token=d,c.data=[],b[a]=c)},p.getOrAddByNames=function(a){var b,c,d,f,g;if(!e(a))throw TypeError("Expected names to be an Array, got "+m(a));for(c=a.length;c--;)if("string"!=typeof a[c])throw TypeError("Expected "+("names["+c+"]")+" to be a String, got "+m(a[c]));for(b=[],d=0,f=a.length;f>d;++d)g=a[d],b.push(this.getOrAddByName(g));return b},p.setTypeById=function(a,b){if("number"!=typeof a)throw TypeError("Expected id to be a Number, got "+m(a));if(!(b instanceof o))throw TypeError("Expected type to be a "+g(o)+", got "+m(b));this.typeById[a]=b},p.getTypeById=function(a){return this.typeById[a]},p.getById=function(a){var b;return b=this.byId,h(a)>=0&&f(a,b.length)?b[a]:void 0},p.addMacro=function(a,b,c){var d;if(null==b)b=void 0;else if("number"!=typeof b)throw TypeError("Expected macroId to be one of Number or undefined, got "+m(b));if(null==c)c=void 0;else if(!(c instanceof o)&&"string"!=typeof c)throw TypeError("Expected type to be one of "+(g(o)+" or String or undefined")+", got "+m(c));if(d=this.byId,null!=b){if(i.call(d,b))throw Error("Cannot add macro #"+k(b)+", as it already exists");d[b]=a}else d.push(a),b=h(d.length)-1;return null!=c&&(this.typeById[b]=c),b},p.replaceMacro=function(a,b,c){var d;if(null==c)c=void 0;else if(!(c instanceof o))throw TypeError("Expected type to be one of "+(g(o)+" or undefined")+", got "+m(c));d=this.byId,d[a]=b,null!=c&&(this.typeById[a]=c)},p.hasMacroOrOperator=function(a){return i.call(this.byName,a)||i.call(this.operatorNames,a)},p.getMacroAndOperatorNames=function(){var a,b,c;c=[],a=this.byName;for(b in a)i.call(a,b)&&c.push(b);a=this.operatorNames;for(b in a)i.call(a,b)&&c.push(b);return c},p.allBinaryOperators=function(){var a,b,c,d,e,f;if(null==(d=this._allBinaryOperators)){for(f=[],a=l(this.binaryOperators),b=0,c=a.length;c>b;++b)e=a[b],f.push.apply(f,l(e));return this._allBinaryOperators=f}return d},p.addBinaryOperator=function(a,b,c,d){var e,f,g,j,k,m,n,p,q;for(j=this,e=l(a),f=e.length;f--;)p=e[f],this.operatorNames[p]=!0;for(q=Number(c.precedence)||0,n=h(this.binaryOperators.length);q>=n;++n)this.binaryOperators[n]=[];return k=this.binaryOperators[q],m={rule:this.oneOf.apply(this,function(){var b,c,d,e,f;for(b=[],c=l(a),d=0,e=c.length;e>d;++d)f=c[d],b.push(j.wordOrSymbol(f));return b}()),func:b,rightToLeft:!!c.rightToLeft,maximum:c.maximum||0,minimum:c.minimum||0,invertible:!!c.invertible},k.push(m),this._allBinaryOperators=null,c.label&&this.addByLabel(c.label,m),this.addMacro(b,d,"left"===(g=c.type)||"right"===g?c.type:null!=c.type&&i.call(o,g=c.type)?o[g]:void 0)},p.getByLabel=function(a){var b;return i.call(b=this.byLabel,a)?b[a]:void 0},p.addByLabel=function(a,b){if("string"!=typeof a)throw TypeError("Expected label to be a String, got "+m(a));return this.byLabel[a]=b},p.addAssignOperator=function(a,b,c,d){var e,f,g,h,j,k;for(h=this,e=l(a),f=e.length;f--;)k=e[f],this.operatorNames[k]=!0;
return j={rule:this.oneOf.apply(this,function(){var b,c,d,e,f;for(b=[],c=l(a),d=0,e=c.length;e>d;++d)f=c[d],":="===f?b.push(h.syntaxes.ColonEqual):b.push(h.wordOrSymbol(f));return b}()),func:b},this.assignOperators.push(j),c.label&&this.addByLabel(c.label,j),this.addMacro(b,d,"left"===(g=c.type)||"right"===g?c.type:null!=c.type&&i.call(o,g=c.type)?o[g]:void 0)},p.addUnaryOperator=function(a,b,c,d){var e,f,g,h,j,k,m;for(h=this,e=l(a),f=e.length;f--;)k=e[f],this.operatorNames[k]=!0;return m=c.postfix?this.postfixUnaryOperators:this.prefixUnaryOperators,j={rule:this.oneOf.apply(this,function(){var b,d,e,f,g,i;for(b=[],d=l(a),e=0,f=d.length;f>e;++e)g=d[e],i=h.wordOrSymbol(g),/[a-zA-Z]/.test(g)?b.push(i):c.postfix?b.push(h.sequential(h.syntaxes.NoSpace,["this",i])):b.push(h.sequential(["this",i],h.syntaxes.NoSpace));return b}()),func:b,standalone:i.call(!c,"standalone")||!!c.standalone},m.push(j),c.label&&this.addByLabel(c.label,j),this.addMacro(b,d,"node"===c.type?c.type:null!=c.type&&i.call(o,g=c.type)?o[g]:void 0)},p.addSerializedHelper=function(a,b,c,d){var e,f,g;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));g=null!=(e=(f=this.serialization).helpers)?e:f.helpers={},g[a]={helper:b,type:c,dependencies:d}},p.addConst=function(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));this.consts[a]=b},p.addSerializedConst=function(a){var b,c,d;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(!i.call(this.consts,a))throw Error("Unknown const "+a);d=null!=(b=(c=this.serialization).consts)?b:c.consts={},d[a]=j(this.consts[a])},p.addMacroSerialization=function(a){var b,c,e,f,g;if("object"!=typeof a||null===a)throw TypeError("Expected serialization to be an Object, got "+m(a));if("string"!=typeof a.type)throw TypeError("Expected serialization.type to be a String, got "+m(a.type));g=d({},a),delete g.type,f=null!=(b=(c=this.serialization)[e=a.type])?b:c[e]=[],f.push(g)},p.addSyntax=function(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if("function"!=typeof b)throw TypeError("Expected value to be a Function, got "+m(b));if(i.call(this.syntaxes,a))throw Error("Cannot override already-defined syntax: "+a);this.syntaxes[a]=b},p.hasSyntax=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));return i.call(this.syntaxes,a)},p.getSyntax=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(i.call(this.syntaxes,a))return this.syntaxes[a];throw Error("Unknown syntax: "+a)},p.serialize=function(a){var c,e,f,g,h,j,k;if(null==a)a=!1;else if("boolean"!=typeof a)throw TypeError("Expected allowJS to be a Boolean, got "+m(a));if(k=d({},this.serialization),i.call(k,"helpers")&&(g=k.helpers),g)for(j in g)if(i.call(g,j))for(f=g[j],c=l(f.dependencies),h=c.length;h--;)e=c[h],i.call(g,e)||f.dependencies.splice(h,1);return a?b("./jsutils").toJSSource(k):JSON.stringify(k)},p.deserialize=function(a,c){var d,e,f,g,h,j,k,l;f=b("./jsast"),d=null!=(e=i.call(a,"helpers")?a.helpers:void 0)?e:{};for(j in d)i.call(d,j)&&(e=d[j],h=e.helper,k=e.type,g=e.dependencies,this.addHelper(j,f.fromJSON(h),o.fromJSON(k),g));d=null!=(e=i.call(a,"consts")?a.consts:void 0)?e:{};for(j in d)i.call(d,j)&&(l=d[j],this.addConst(j,n(l)));c.deserializeMacros(a)},p.addHelper=function(a,b,c,d){var f;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(!(c instanceof o))throw TypeError("Expected type to be a "+g(o)+", got "+m(c));if(!e(d))throw TypeError("Expected dependencies to be an Array, got "+m(d));for(f=d.length;f--;)if("string"!=typeof d[f])throw TypeError("Expected "+("dependencies["+f+"]")+" to be a String, got "+m(d[f]));if(i.call(this.helpers,a))throw Error("Trying to overwrite helper "+a);return this.helpers[a]={value:b,type:c,dependencies:d}},p.hasHelper=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));return i.call(this.helpers,a)},p.getHelper=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(i.call(this.helpers,a))return this.helpers[a].value;throw Error("No such helper: "+a)},p.helperType=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(i.call(this.helpers,a))return this.helpers[a].type;throw Error("No such helper: "+a)},p.helperDependencies=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(i.call(this.helpers,a))return this.helpers[a].dependencies;throw Error("No such helper: "+a)},a}(),a.exports=n}.call(this),a.exports},b["./parser-macrocontext"]=function(){var a={exports:this};return function(){"use strict";function c(a){return a}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb;d="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},e="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),f=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+m(a));return a.displayName||a.name||""},g=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+m(a));return a},h=Object.prototype.hasOwnProperty,i=Array.prototype.slice,j=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+m(a))},k=function(a){throw a},l=function(a){if(null==a)throw TypeError("Expected an object, got "+m(a));return e(a)?a:"string"==typeof a?a.split(""):i.call(a)},m=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),O=b("./parser-nodes"),ib=b("./types"),W=b("./parser-scope"),n=b("./parser-utils"),P=n.nodeToType,q=n.addParamToScope,N=n.map,p=O.Access,o=O.AccessMulti,r=O.Args,s=O.Array,t=O.Assign,u=O.Binary,v=O.Block,w=O.Break,x=O.Call,y=O.Comment,z=O.Const,A=O.Continue,B=O.Debugger,C=O.Def,D=O.EmbedWrite,E=O.Eval,G=O.For,F=O.ForIn,H=O.Function,I=O.Ident,J=O.If,K=O.MacroAccess,L=O.MacroConst,Q=O.Nothing,R=O.Object,S=O.Param,T=O.Regexp,U=O.Return,V=O.Root,X=O.Spread,Y=O.Super,Z=O.Switch,$=O.SyntaxChoice,_=O.SyntaxMany,ab=O.SyntaxParam,bb=O.SyntaxSequence,cb=O.This,db=O.Throw,eb=O.Tmp,fb=O.TmpWrapper,gb=O.TryCatch,hb=O.TryFinally,jb=O.TypeFunction,kb=O.TypeGeneric,lb=O.TypeObject,mb=O.TypeUnion,nb=O.Unary,ob=O.Var,pb=O.Yield,M=function(){function a(b,c,e,f,g){var h;return h=this instanceof a?this:d(y),h.parser=b,h.index=c,h.position=e,h.inGenerator=f,h.inEvilAst=g,h.unsavedTmps=[],h.savedTmps=[],h}function n(a,b,c){if(!(c instanceof W))throw TypeError("Expected scope to be a "+f(W)+", got "+m(c));if("object"!=typeof a||null===a||a instanceof RegExp)return z(b,c,a);if(e(a))return s(b,c,function(){var d,e,f,g,h;for(d=[],e=l(a),f=0,g=e.length;g>f;++f)h=e[f],d.push(n(h,b,c));return d}());if(a instanceof I&&g(a.name.length)>1&&36===a.name.charCodeAt(0))return x(a.index,c,I(a.index,c,"__wrap"),[I(a.index,c,a.name.substring(1))]);if(a instanceof x&&!a.isNew&&!a.isApply&&a.func instanceof I&&"$"===a.func.name){if(1!==a.args.length||a.args[0]instanceof X)throw Error("Can only use $() in an AST if it has one argument.");return x(a.index,c,I(a.index,c,"__wrap"),[a.args[0]])}if(a instanceof L)return x(a.index,c,I(a.index,c,"__const"),[z(a.index,c,a.name)]);if(a instanceof O){if(a.constructor===O)throw Error("Cannot constify a raw node");return x(a.index,c,I(a.index,c,"__node"),[z(a.index,c,a.constructor.cappedName),z(a.index,c,a.index)].concat(function(){var b,d,e,f,g;for(b=[],d=l(a.constructor.argNames),e=0,f=d.length;f>e;++e)g=d[e],b.push(n(a[g],a.index,c));return b}()))}return R(b,c,function(){var d,e,f;d=[];for(e in a)h.call(a,e)&&(f=a[e],d.push({key:z(b,c,e),value:n(f,b,c)}));return d}())}function o(a,b){var c;if("object"!=typeof a||null===a||a instanceof RegExp)return a;if(!(a instanceof O))throw Error("Unexpected type to walk through: "+m(a));return a instanceof v||null==(c=b(a))?a.walk(function(a){return o(a,b)}):c}var y,B;return y=a.prototype,a.displayName="MacroContext",y.doWrap=function(a){return a instanceof O?a.doWrap(this.parser):a},y.error=function(a,b){if("string"!=typeof a)throw TypeError("Expected message to be a String, got "+m(a));if(null==b)b=null;else if(!(b instanceof O))throw TypeError("Expected node to be one of "+(f(O)+" or null")+", got "+m(b));throw this.parser.buildError(a,b||this.index)},y.scope=function(){return this.parser.scope.peek()},y.line=function(a){var b;return b=a instanceof O?a.index:this.index,this.parser.getPosition(b).line},y.column=function(a){var b;return b=a instanceof O?a.index:this.index,this.parser.getPosition(b).column},y.file=function(){return this.parser.options.filename||""},y.version=function(){return this.parser.getPackageVersion()},y.let=function(a,b,c){if(!(a instanceof eb||a instanceof I))throw TypeError("Expected ident to be one of "+(f(eb)+" or "+f(I))+", got "+m(a));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected isMutable to be a Boolean, got "+m(b));if(null==c)c=ib.any;else if(!(c instanceof ib))throw TypeError("Expected type to be a "+f(ib)+", got "+m(c));return a instanceof I&&b&&c.isSubsetOf(ib.undefinedOrNull)&&(c=ib.any),this.scope().add(a,b,c)},y.hasVariable=function(a){if(!(a instanceof eb||a instanceof I))throw TypeError("Expected ident to be one of "+(f(eb)+" or "+f(I))+", got "+m(a));return this.scope().has(a)},y.isVariableMutable=function(a){if(!(a instanceof eb||a instanceof I))throw TypeError("Expected ident to be one of "+(f(eb)+" or "+f(I))+", got "+m(a));return this.scope().isMutable(a)},y["var"]=function(a,b){if(!(a instanceof I||a instanceof eb))throw TypeError("Expected ident to be one of "+(f(I)+" or "+f(eb))+", got "+m(a));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected isMutable to be a Boolean, got "+m(b));return this.parser.Var(this.index,a,b)},y.def=function(a,b){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected key to be a "+f(O)+", got "+m(a));if(null==b)b=void 0;else if(!(b instanceof O))throw TypeError("Expected value to be one of "+(f(O)+" or undefined")+", got "+m(b));return this.parser.Def(this.index,a,this.doWrap(b))},y.noop=function(){return this.parser.Nothing(this.index)},y.block=function(a,b){var c;if(!e(a))throw TypeError("Expected nodes to be an Array, got "+m(a));for(c=a.length;c--;)if(!(a[c]instanceof O))throw TypeError("Expected "+("nodes["+c+"]")+" to be a "+f(O)+", got "+m(a[c]));if(null==b)b=null;else if(!(b instanceof I||b instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(b));return this.parser.Block(this.index,a,b).reduce(this.parser)},y["if"]=function(a,b,c,d){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected test to be a "+f(O)+", got "+m(a));if(null==b)b=Q(0,this.scope());else if(!(b instanceof O))throw TypeError("Expected whenTrue to be a "+f(O)+", got "+m(b));if(null==c)c=null;else if(!(c instanceof O))throw TypeError("Expected whenFalse to be one of "+(f(O)+" or null")+", got "+m(c));if(null==d)d=null;else if(!(d instanceof I||d instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(d));return this.parser.If(this.index,this.doWrap(a),b,c,d).reduce(this.parser)},y["switch"]=function(a,b,c,d){var g;if(g=this,null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));if(!e(b))throw TypeError("Expected cases to be an Array, got "+m(b));if(null==c)c=null;else if(!(c instanceof O))throw TypeError("Expected defaultCase to be one of "+(f(O)+" or null")+", got "+m(c));if(null==d)d=null;else if(!(d instanceof I||d instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(d));return this.parser.Switch(this.index,this.doWrap(a),function(){var a,c,d,e;for(a=[],c=0,d=b.length;d>c;++c)e=b[c],a.push({node:g.doWrap(e.node),body:e.body,fallthrough:e.fallthrough});return a}(),c,d).reduce(this.parser)},y["for"]=function(a,b,c,d,e){if(null==a)a=null;else if(!(a instanceof O))throw TypeError("Expected init to be one of "+(f(O)+" or null")+", got "+m(a));if(null==b)b=null;else if(!(b instanceof O))throw TypeError("Expected test to be one of "+(f(O)+" or null")+", got "+m(b));if(null==c)c=null;else if(!(c instanceof O))throw TypeError("Expected step to be one of "+(f(O)+" or null")+", got "+m(c));if(null==d)d=Q(0,this.scope());else if(!(d instanceof O))throw TypeError("Expected body to be a "+f(O)+", got "+m(d));if(null==e)e=null;else if(!(e instanceof I||e instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(e));return this.parser.For(this.index,this.doWrap(a),this.doWrap(b),this.doWrap(c),d,e).reduce(this.parser)},y.forIn=function(a,b,c,d){if(!(a instanceof I))throw TypeError("Expected key to be a "+f(I)+", got "+m(a));if(null==b)b=Q(0);else if(!(b instanceof O))throw TypeError("Expected object to be a "+f(O)+", got "+m(b));if(null==c)c=Q(0,this.scope());else if(!(c instanceof O))throw TypeError("Expected body to be a "+f(O)+", got "+m(c));if(null==d)d=null;else if(!(d instanceof I||d instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(d));return this.parser.ForIn(this.index,a,this.doWrap(b),c,d).reduce(this.parser)},y.tryCatch=function(a,b,c,d){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected tryBody to be a "+f(O)+", got "+m(a));if(null==b)b=Q(0,this.scope());else if(!(b instanceof O))throw TypeError("Expected catchIdent to be a "+f(O)+", got "+m(b));if(null==c)c=Q(0,this.scope());else if(!(c instanceof O))throw TypeError("Expected catchBody to be a "+f(O)+", got "+m(c));if(null==d)d=null;else if(!(d instanceof I||d instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(d));return this.parser.TryCatch(this.index,a,b,c,d).reduce(this.parser)},y.tryFinally=function(a,b,c){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected tryBody to be a "+f(O)+", got "+m(a));if(null==b)b=Q(0,this.scope());else if(!(b instanceof O))throw TypeError("Expected finallyBody to be a "+f(O)+", got "+m(b));if(null==c)c=null;else if(!(c instanceof I||c instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(c));return this.parser.TryFinally(this.index,a,b,c).reduce(this.parser)},y.assign=function(a,b,c){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected left to be a "+f(O)+", got "+m(a));if("string"!=typeof b)throw TypeError("Expected op to be a String, got "+m(b));if(null==c)c=Q(0,this.scope());else if(!(c instanceof O))throw TypeError("Expected right to be a "+f(O)+", got "+m(c));return this.parser.Assign(this.index,a,b,this.doWrap(c)).reduce(this.parser)},y.binary=function(a,b,c){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected left to be a "+f(O)+", got "+m(a));if("string"!=typeof b)throw TypeError("Expected op to be a String, got "+m(b));if(null==c)c=Q(0,this.scope());else if(!(c instanceof O))throw TypeError("Expected right to be a "+f(O)+", got "+m(c));return this.parser.Binary(this.index,this.doWrap(a),b,this.doWrap(c)).reduce(this.parser)},y.binaryChain=function(a,b){var c,d,g,h,i,j;if("string"!=typeof a)throw TypeError("Expected op to be a String, got "+m(a));if(!e(b))throw TypeError("Expected nodes to be an Array, got "+m(b));for(c=b.length;c--;)if(!(b[c]instanceof O))throw TypeError("Expected "+("nodes["+c+"]")+" to be a "+f(O)+", got "+m(b[c]));if(0===b.length)throw Error("Expected nodes to at least have a length of 1");for(h=this.doWrap(b[0]),d=1,g=b.length;g>d;++d)j=b[d],h=this.parser.Binary(this.index,h,a,this.doWrap(j));return i=h,i.reduce(this.parser)},y.unary=function(a,b){if("string"!=typeof a)throw TypeError("Expected op to be a String, got "+m(a));if(null==b)b=Q(0,this.scope());else if(!(b instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(b));return this.parser.Unary(this.index,a,this.doWrap(b)).reduce(this.parser)},y["throw"]=function(a){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));return this.parser.Throw(this.index,this.doWrap(a)).reduce(this.parser)},y["return"]=function(a){if(null==a)a=void 0;else if(!(a instanceof O))throw TypeError("Expected node to be one of "+(f(O)+" or undefined")+", got "+m(a));return this.parser.Return(this.index,this.doWrap(a)).reduce(this.parser)},y.yield=function(a){if(null==a)a=Q(0,this.scope());else if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));return this.parser.Yield(this.index,this.doWrap(a)).reduce(this.parser)},y["debugger"]=function(){return this.parser.Debugger(this.index)},y["break"]=function(a){if(null==a)a=null;else if(!(a instanceof I||a instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(a));return this.parser.Break(this.index,a)},y["continue"]=function(a){if(null==a)a=null;else if(!(a instanceof I||a instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(a));return this.parser.Continue(this.index,a)},y.spread=function(a){if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));return this.parser.Spread(this.index,a)},y.real=function(a){return a=this.macroExpand1(a),a instanceof fb?a.node:a},y.rewrap=function(a,b){return b=this.macroExpand1(b),b instanceof fb?a instanceof fb?fb(a.index,a.scope,a,b.tmps.concat(a.tmps)):fb(a.index,a.scope,a,b.tmps.slice()):a},y.eq=function(a,b){return a=this.real(a),b=this.real(b),a instanceof z?b instanceof z&&a.value===b.value:a instanceof I?b instanceof I&&a.name===b.name:!1},y.isLabeledBlock=function(a){return a=this.real(a),a instanceof v||a instanceof J||a instanceof Z||a instanceof G||a instanceof F||a instanceof gb||a instanceof hb?null!=a.label:!1},y.isBreak=function(a){return this.real(a)instanceof w},y.isContinue=function(a){return this.real(a)instanceof A},y.label=function(a){return a=this.real(a),a instanceof w||a instanceof A||a instanceof v||a instanceof J||a instanceof Z||a instanceof G||a instanceof F||a instanceof gb||a instanceof hb?a.label:null},y.withLabel=function(a,b){if(null==b)b=null;else if(!(b instanceof I||b instanceof eb))throw TypeError("Expected label to be one of "+(f(I)+" or "+f(eb)+" or null")+", got "+m(b));return a.withLabel(b,this.parser)},y.macroExpand1=function(a){var b;return a instanceof O?(b=this.parser.macroExpand1(a),b instanceof O?b.reduce(this.parser):b):a},y.macroExpandAll=function(a){var b;return a instanceof O?(b=this.parser.macroExpandAll(a),b instanceof O?b.reduce(this.parser):b):a},y.tmp=function(a,b,c){var d;if(null==a)a="ref";else if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected save to be a Boolean, got "+m(b));if(null==c)c=ib.any;else if("string"==typeof c){if(!((h.call(ib,c)?ib[c]:void 0)instanceof ib))throw Error(j(c)+" is not a known type name");h.call(ib,c)&&(c=ib[c])}else if(!(c instanceof ib))throw Error("Must provide a Type or a string for type, got "+m(c));return d=this.parser.makeTmp(this.index,a,c),(b?this.savedTmps:this.unsavedTmps).push(d.id),d},y.getTmps=function(){return{unsaved:this.unsavedTmps.slice(),saved:this.savedTmps.slice()}},y.isConst=function(a){return void 0===a||a instanceof O&&this.real(a).isConst()},y.value=function(a){var b;if(void 0!==a)return a instanceof O&&(b=this.real(a),b.isConst())?b.constValue():void 0},y["const"]=function(a){return this.parser.Const(this.index,a)},y.isSpread=function(a){return this.real(a)instanceof X},y.spreadSubnode=function(a){return a=this.real(a),a instanceof X?a.node:void 0},y.isNode=function(a){return a instanceof O},y.isIdent=function(a){return this.real(a)instanceof I},y.isPrimordial=function(a){return a=this.real(a),a instanceof I&&a.isPrimordial()},y.isTmp=function(a){return this.real(a)instanceof eb},y.isIdentOrTmp=function(a){var b;return(b=this.real(a))instanceof I||b instanceof eb},y.name=function(a){return a=this.real(a),this.isIdent(a)?a.name:void 0},y.ident=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));return b("./jsutils").isAcceptableIdent(a,!0)?this.parser.Ident(this.index,a):void 0},y.isCall=function(a){return this.real(a)instanceof x},y.callFunc=function(a){return a=this.real(a),a instanceof x?a.func:void 0},y.callArgs=function(a){return a=this.real(a),a instanceof x?a.args:void 0},y.isSuper=function(a){return this.real(a)instanceof Y},y.superChild=function(a){return a=this.real(a),this.isSuper(a)?a.child:void 0},y.superArgs=function(a){return a=this.real(a),this.isSuper(a)?a.args:void 0},y.callIsNew=function(a){return a=this.real(a),a instanceof x?!!a.isNew:!1},y.callIsApply=function(a){return a=this.real(a),a instanceof x?!!a.isApply:!1},y.call=function(a,b,c,d){var g,h;if(h=this,!(a instanceof O))throw TypeError("Expected func to be a "+f(O)+", got "+m(a));if(null==b)b=[];else{if(!e(b))throw TypeError("Expected args to be an Array, got "+m(b));for(g=b.length;g--;)if(!(b[g]instanceof O))throw TypeError("Expected "+("args["+g+"]")+" to be a "+f(O)+", got "+m(b[g]))}if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected isNew to be a Boolean, got "+m(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected isApply to be a Boolean, got "+m(d));if(c&&d)throw Error("Cannot specify both is-new and is-apply");return x(a.index,this.scope(),this.doWrap(a),function(){var a,c,d,e;for(a=[],c=0,d=b.length;d>c;++c)e=b[c],a.push(h.doWrap(e));return a}(),c,d).reduce(this.parser)},y.func=function(a,b,c,d,g,h,i,j){var k,n,o,p,r,s,t,u,v;if(!(b instanceof O))throw TypeError("Expected body to be a "+f(O)+", got "+m(b));if(null==c)c=!0;else if("boolean"!=typeof c)throw TypeError("Expected autoReturn to be a Boolean, got "+m(c));if(null==d)d=!1;else if(!(d instanceof O)&&"boolean"!=typeof d)throw TypeError("Expected bound to be one of "+(f(O)+" or Boolean")+", got "+m(d));if(null==g)g=!1;else if("boolean"!=typeof g)throw TypeError("Expected curry to be a Boolean, got "+m(g));if(null==h)h=void 0;else if(!(h instanceof O))throw TypeError("Expected asType to be one of "+(f(O)+" or undefined")+", got "+m(h));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected generator to be a Boolean, got "+m(i));if(null==j)j=[];else{if(!e(j))throw TypeError("Expected generic to be an Array, got "+m(j));for(o=j.length;o--;)if(!(j[o]instanceof I))throw TypeError("Expected "+("generic["+o+"]")+" to be a "+f(I)+", got "+m(j[o]))}for(v=this.parser.pushScope(!0),k=[],n=l(a),p=0,r=n.length;r>p;++p)u=n[p],t=u.rescope(v),q(v,t),k.push(t);return a=k,s=H(b.index,v.parent,a,b.rescope(v),c,d,g,h,i,j).reduce(this.parser),this.parser.popScope(),s},y.isFunc=function(a){return this.real(a)instanceof H},y.funcBody=function(a){return a=this.real(a),this.isFunc(a)?a.body:void 0},y.funcParams=function(a){return a=this.real(a),this.isFunc(a)?a.params:void 0},y.funcIsAutoReturn=function(a){return a=this.real(a),this.isFunc(a)?!!a.autoReturn:void 0},y.funcIsBound=function(a){return a=this.real(a),this.isFunc(a)?!(!a.bound||a.bound instanceof O):void 0},y.funcIsCurried=function(a){return a=this.real(a),this.isFunc(a)?!!a.curry:void 0},y.funcAsType=function(a){return a=this.real(a),this.isFunc(a)?a.asType:void 0},y.funcIsGenerator=function(a){return a=this.real(a),this.isFunc(a)?!!a.generator:void 0},y.funcGeneric=function(a){return a=this.real(a),this.isFunc(a)?a.generic.slice():[]},y.param=function(a,b,c,d,e){if(!(a instanceof O))throw TypeError("Expected ident to be a "+f(O)+", got "+m(a));return S(a.index,a.scope,a,b,c,d,e).reduce(this.parser)},y.isParam=function(a){return this.real(a)instanceof S},y.paramIdent=function(a){return a=this.real(a),this.isParam(a)?a.ident:void 0},y.paramDefaultValue=function(a){return a=this.real(a),this.isParam(a)?a.defaultValue:void 0},y.paramIsSpread=function(a){return a=this.real(a),this.isParam(a)?!!a.spread:void 0},y.paramIsMutable=function(a){return a=this.real(a),this.isParam(a)?!!a.isMutable:void 0},y.paramType=function(a){return a=this.real(a),this.isParam(a)?a.asType:void 0},y.isArray=function(a){return this.real(a)instanceof s},y.elements=function(a){return a=this.real(a),this.isArray(a)?a.elements:void 0},y.arrayHasSpread=function(a){var b,c,d,e,f;if(a=this.real(a),a instanceof s){for(e=!1,b=l(a.elements),c=0,d=b.length;d>c;++c)if(f=b[c],this.real(f)instanceof X){e=!0;break}return e}return!1},y.isObject=function(a){return this.real(a)instanceof R},y.pairs=function(a){return a=this.real(a),this.isObject(a)||this.isTypeObject(a)?a.pairs:void 0},y.isBlock=function(a){return this.real(a)instanceof v},y.nodes=function(a){return a=this.real(a),this.isBlock(a)?a.nodes:void 0},y.array=function(a){var b,c;if(c=this,!e(a))throw TypeError("Expected elements to be an Array, got "+m(a));for(b=a.length;b--;)if(!(a[b]instanceof O))throw TypeError("Expected "+("elements["+b+"]")+" to be a "+f(O)+", got "+m(a[b]));return this.parser.Array(0,function(){var b,d,e,f;for(b=[],d=0,e=a.length;e>d;++d)f=a[d],b.push(c.doWrap(f));return b}()).reduce(this.parser)},y.object=function(a){var b,c;if(c=this,!e(a))throw TypeError("Expected pairs to be an Array, got "+m(a));for(b=a.length;b--;){if("object"!=typeof a[b]||null===a[b])throw TypeError("Expected "+("pairs["+b+"]")+" to be an Object, got "+m(a[b]));if(!(a[b].key instanceof O))throw TypeError("Expected "+("pairs["+b+"].key")+" to be a "+f(O)+", got "+m(a[b].key));if(!(a[b].value instanceof O))throw TypeError("Expected "+("pairs["+b+"].value")+" to be a "+f(O)+", got "+m(a[b].value))}return this.parser.Object(0,function(){var b,d,e,f,g,h,i;for(b=[],d=0,e=a.length;e>d;++d)f=a[d],g=f.key,i=f.value,h=f.property,b.push({key:c.doWrap(g),value:c.doWrap(i)(h)});return b}()).reduce(this.parser)},y.type=function(a){if("string"==typeof a)return h.call(ib,a)&&ib[a]||k(Error("Unknown type "+j(a)));if(a instanceof O)return a.type(this.parser);throw Error("Can only retrieve type from a String or Node, got "+m(a))},y.toType=P,y.isComplex=function(a){return a=this.real(a),!(null==a||a instanceof z||a instanceof I||a instanceof eb||a instanceof cb||a instanceof r||a instanceof v&&0===a.nodes.length)},y.isNoop=function(a){return a=this.real(a),a.isNoop(this.parser)},y.isNothing=function(a){return this.real(a)instanceof Q},y.isTypeArray=function(a){return a=this.real(a),a instanceof kb&&a.basetype instanceof I&&"Array"===a.basetype.name},y.subtype=function(a){return a=this.real(a),a instanceof kb&&a.basetype instanceof I&&"Array"===a.basetype.name?a.args[0]:void 0},y.isTypeGeneric=function(a){return this.real(a)instanceof kb},y.basetype=function(a){return a=this.real(a),a instanceof kb&&a.basetype},y.typeArguments=function(a){return a=this.real(a),a instanceof kb&&a.args},y.isTypeObject=function(a){return this.real(a)instanceof lb},y.isTypeFunction=function(a){return a=this.real(a),a instanceof kb&&a.basetype instanceof I&&"Function"===a.basetype.name},y.returnType=function(a){return a=this.real(a),a instanceof kb&&a.basetype instanceof I&&"Function"===a.basetype.name?a.args[0]:void 0},y.isTypeUnion=function(a){return this.real(a)instanceof mb},y.types=function(a){return a=this.real(a),this.isTypeUnion(a)&&a.types},y.isThis=function(a){return this.real(a)instanceof cb},y.isArguments=function(a){return a=this.real(a),a instanceof r},y.isDef=function(a){return this.real(a)instanceof C},y.isAssign=function(a){return this.real(a)instanceof t},y.isBinary=function(a){return this.real(a)instanceof u},y.isUnary=function(a){return this.real(a)instanceof nb},y.op=function(a){return a=this.real(a),this.isAssign(a)||this.isBinary(a)||this.isUnary(a)?a.op:void 0},y.left=function(a){return a=this.real(a),this.isDef(a)||this.isBinary(a)?a.left:void 0},y.right=function(a){return a=this.real(a),this.isDef(a)||this.isBinary(a)?a.right:void 0},y.unaryNode=function(a){return a=this.real(a),this.isUnary(a)?a.node:void 0},y.isAccess=function(a){return this.real(a)instanceof p},y.parent=function(a){return a=this.real(a),a instanceof p?a.parent:void 0},y.child=function(a){return a=this.real(a),a instanceof p?a.child:void 0},y.isIf=function(a){return this.real(a)instanceof J},y.test=function(a){return a=this.real(a),a instanceof J?a.test:void 0},y.whenTrue=function(a){return a=this.real(a),a instanceof J?a.whenTrue:void 0},y.whenFalse=function(a){return a=this.real(a),a instanceof J?a.whenFalse:void 0},y.cache=function(a,b,c,d){if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));if(null==c)c="ref";else if("string"!=typeof c)throw TypeError("Expected name to be a String, got "+m(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected save to be a Boolean, got "+m(d));return this.maybeCache(a,function(a,c,d){return d&&b.push(a),c},c,d)},y.maybeCache=function(a,b,c,d){var e,g;if(!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));if(null==c)c="ref";else if("string"!=typeof c)throw TypeError("Expected name to be a String, got "+m(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected save to be a Boolean, got "+m(d));return a=this.macroExpand1(a),this.isComplex(a)?(g=a.type(this.parser),e=this.tmp(c,d,g),this.scope().add(e,!1,g),b(this.parser.Block(this.index,[this.parser.Var(this.index,e,!1),this.parser.Assign(this.index,e,"=",this.doWrap(a))]),e,!0)):b(a,a,!1)},y.maybeCacheAccess=function(a,b,c,d,e){var g;if(g=this,!(a instanceof O))throw TypeError("Expected node to be a "+f(O)+", got "+m(a));if(null==c)c="ref";else if("string"!=typeof c)throw TypeError("Expected parentName to be a String, got "+m(c));if(null==d)d="ref";else if("string"!=typeof d)throw TypeError("Expected childName to be a String, got "+m(d));if(null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected save to be a Boolean, got "+m(e));return a=this.macroExpand1(a),this.isAccess(a)?this.maybeCache(this.parent(a),function(c,f,h){return g.maybeCache(g.child(a),function(d,e,i){return h||i?b(g.parser.Access(g.index,c,d),g.parser.Access(g.index,f,e),!0):b(a,a,!1)},d,e)},c,e):b(a,a,!1)},y.empty=function(a){var b,c,d,e;if(null==a)return!0;if(a instanceof O){if(a instanceof v){for(c=!0,b=l(a.nodes),d=b.length;d--;)if(e=b[d],!this.empty(e)){c=!1;break}return c}return a instanceof Q}return!1},a.constifyObject=n,y.wrap=function(a){var b;return e(a)?v(0,this.scope(),a).reduce(this.parser):a instanceof O?a:null==a?Q(0,this.scope()):a instanceof RegExp||"string"==(b=typeof a)||"boolean"===b||"number"===b?z(0,this.scope(),a):a},y.node=function(a,b){var c;return c=i.call(arguments,2),"MacroAccess"===a?this.macro.apply(this,[b].concat(l(c))):O[a].apply(O,[b,this.scope()].concat(l(c))).reduce(this.parser)},y.getConstValue=function(a,b){var c;if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));if(null==b&&(b=!1),c=this.parser.getConst(a),!c&&!b)throw Error("Unknown const '"+a+"'");return null!=c?c.value:void 0},y.getConst=function(a,b){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+m(a));return null==b&&(b=!1),z(0,this.scope(),this.getConstValue(a,b))},y.macro=function(a,b,c,d,e,f,g){return O.MacroAccess(a,this.scope(),b,c,d,e,f||this.parser.inGenerator.peek(),g).reduce(this.parser)},y.walk=function(a,b){if(null!=a&&!(a instanceof O))throw TypeError("Expected node to be one of "+(f(O)+" or undefined or null")+", got "+m(a));
if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+m(b));return null!=a?o(a,b):a},y.hasFunc=function(a){var b,c;if(null!=this._hasFunc)return this._hasFunc;b={},c=function(a){if(a instanceof H)throw b;return a.walk(c)};try{o(this.macroExpandAll(a),c)}catch(d){if(d!==b)throw d;return this._hasFunc=!0}return this._hasFunc=!1},y.isStatement=function(a){return a=this.macroExpand1(a),a instanceof O&&a.isStatement()},y.isType=function(a,b){var c;if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+m(b));if(h.call(ib,b)&&(c=ib[b]),null==c||!(c instanceof ib))throw Error(b+" is not a known type name");return a.type(this.parser).isSubsetOf(c)},y.hasType=function(a,b){var c;if("string"!=typeof b)throw TypeError("Expected name to be a String, got "+m(b));if(h.call(ib,b)&&(c=ib[b]),null==c||!(c instanceof ib))throw Error(b+" is not a known type name");return a.type(this.parser).overlaps(c)},B={Block:function(a,b){var c,d,e;return e=a.nodes,d=e.length,0!==d&&(c=this.mutateLast(e[g(d)-1],b),c!==e[g(d)-1])?v(a.index,a.scope,l(i.call(e,0,-1)).concat([c]),a.label):a},If:function(a,b){var c,d;return d=this.mutateLast(a.whenTrue,b),c=this.mutateLast(a.whenFalse,b),d!==a.whenTrue||c!==a.whenFalse?J(a.index,a.scope,a.test,d,c,a.label):a},Switch:function(a,b){var c,d,e;return c=this,d=N(a.cases,function(a){var d;return a.fallthrough?a:(d=c.mutateLast(a.body,b),d!==a.body?{node:a.node,body:d,fallthrough:a.fallthrough}:a)}),e=this.mutateLast(a.defaultCase||this.noop(),b),d!==a.cases||e!==a.defaultCase?Z(a.index,a.scope,a.node,d,e,a.label):a},TmpWrapper:function(a,b){var c;return c=this.mutateLast(a.node,b),c!==a.node?fb(a.index,a.scope,c,a.tmps):a},MacroAccess:function(a,b){return this.mutateLast(this.macroExpand1(a),b)},TryCatch:function(a,b){var c,d;return d=this.mutateLast(a.tryBody,b),c=this.mutateLast(a.catchBody,b),d!==a.tryBody||c!==a.catchBody?gb(a.index,a.scope,d,a.catchIdent,c,a.label):a},Break:c,Continue:c,Nothing:c,Return:c,Debugger:c,Throw:c},y.mutateLast=function(a,b,c){var d;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+m(b));if("object"!=typeof a||null===a||a instanceof RegExp)return a;if(!(a instanceof O))throw Error("Unexpected type to mutate-last through: "+m(a));return!h.call(B,a.constructor.cappedName)||c&&a instanceof Q?null!=(d=b.call(this,a))?d:a:B[a.constructor.cappedName].call(this,a,b)},y.canMutateLast=function(a){return a instanceof O&&h.call(B,a.constructor.cappedName)},a}(),a.exports=M}.call(this),a.exports},b["./jstranslator"]=function(){var a={exports:this};return function(c){"use strict";function d(a){return!(a instanceof J.Ident||a instanceof J.Const||a instanceof J.This||a instanceof J.Arguments)}function e(a){return a.mutateLast(function(a){return J.Return(a.pos,a)})}function f(a){return a}function g(a){return a?e:f}function h(){function a(b){var c;return d.getOrAdd(b,(c=!1,function(b){var d,e;if(c)throw Error("Attempted to call function more than once");if(c=!0,e=!1,b instanceof T.Yield||b instanceof T.Return)return!0;if(!(b instanceof T.Function)){d={};try{b.walk(function(b){if(a(b))throw d;return b})}catch(f){if(f===d)return!0;throw f}}return!1}))}function b(c){var f;return e.getOrAdd(c,(f=!1,function(c){var e,g;if(f)throw Error("Attempted to call function more than once");if(f=!0,e=d.get(c))return e;if(c instanceof T.Yield||c instanceof T.Return||c instanceof T.Continue)return!0;if(!(c instanceof T.Function)){g={};try{c.walk(function(c){if(c instanceof T.For||c instanceof T.ForIn){if(a(c))throw g}else if(b(c))throw g;return c})}catch(h){if(h===g)return!0;throw h}}return!1}))}function c(h,i){var j;if(!(h instanceof T))throw TypeError("Expected node to be a "+A(T)+", got "+H(h));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected allowReturn to be a Boolean, got "+H(i));return(i?g:f).getOrAdd(h,(j=!1,function(f){var h,k;if(j)throw Error("Attempted to call function more than once");if(j=!0,!i&&(h=g.get(f)))return h;if(h=d.get(f))return h;if(h=e.get(f))return h;if(f instanceof T.Yield||f instanceof T.Continue||f instanceof T.Break||!i&&f instanceof T.Return)return!0;if(!(f instanceof T.Function)){k={};try{f.walk(function(d){if(d instanceof T.For||d instanceof T.ForIn){if(a(d))throw k}else if(d instanceof T.Switch){if(b(d))throw k}else if(c(d,i))throw k;return d})}catch(l){if(l===k)return!0;throw l}}return!1}))}var d,e,f,g;return d=L.generic(T,Boolean)(),e=L.generic(T,Boolean)(),g=L.generic(T,Boolean)(),f=L.generic(T,Boolean)(),c}function i(a){var b,c,d,e,f,g;for(g=[],e=!1,b=G(a),c=0,d=b.length;d>c;++c)f=b[c],f instanceof T.Spread&&f.node instanceof T.Array?(g.push.apply(g,G(f.node.elements)),e=!0):g.push(f);return e?i(g):a}function j(a,b,c){var d;if("number"!=typeof a)throw TypeError("Expected line to be a Number, got "+H(a));if("number"!=typeof b)throw TypeError("Expected column to be a Number, got "+H(b));if(null==c)c=void 0;else if("string"!=typeof c)throw TypeError("Expected file to be one of String or undefined, got "+H(c));return d={line:a,column:b},null!=c&&(d.file=c),d}function k(){}function l(a,b,c,d,e,f){var g,h,j,k,l,n,o,p;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));for(p=[],l=[],p.push(l),g=G(i(b)),j=0,k=g.length;k>j;++j)n=g[j],n instanceof T.Spread?(p.push({tNode:m(n.node,c,"expression",null,f),type:n.node.type()}),l=[],p.push(l)):l.push(m(n,c,"expression",null,f));if(1===p.length)return function(){return J.Arr(a,function(){var a,b,c,d,e;for(a=[],b=G(p[0]),c=0,d=b.length;d>c;++c)e=b[c],a.push(e());return a}())};for(o=p.length,h=function(a,b){return 0===b%2?B(a.length)>0?p[b]=function(){var b,c,d,e,f,g;for(b=[],c=G(a),d=0,e=c.length;e>d;++d)g=c[d],b.push(g());return f=b,J.Arr(f[0].pos,f)}:p.splice(b,1):p[b]=function(){var b;return b=a.tNode(),a.type.isSubsetOf(W.array)?b:(c.addHelper("__toArray"),J.Call(b.pos,J.Ident(b.pos,"__toArray"),[b]))}};o--;)h.call(this,p[o],o);return 1===p.length?function(){var b;return b=p[0](),d&&b instanceof J.Call&&b.func instanceof J.Ident&&"__toArray"===b.func.name?J.Call(a,J.Access(a,J.Ident(a,"__slice"),"call"),b.args):e&&b instanceof J.Call&&b.func instanceof J.Ident&&"__toArray"===b.func.name&&b.args[0]instanceof J.Arguments?b.args[0]:b}:function(){var b,c,d,e,f,g;for(e=p[0](),b=[],c=1,d=p.length;d>c;++c)f=p[c],b.push(f());return g=b,J.Call(a,J.Access(a,e,"concat"),g)}}function m(a,b,c,d,e){var f;if("object"!=typeof a||null===a)throw TypeError("Expected node to be an Object, got "+H(a));if(!(b instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(b));if("string"!=typeof c)throw TypeError("Expected location to be a String, got "+H(c));if("function"!=typeof d&&(d=g(d)),!C.call(V,a.constructor.cappedName))throw Error("Unable to translate unknown node type: "+String(a.constructor.cappedName));if(f=V[a.constructor.cappedName](a,b,c,d,e),"function"!=typeof f)throw Error("Translated non-function: "+H(f));return f}function n(a,b,c,d,e){var f,g,h,i;if(!y(a))throw TypeError("Expected nodes to be an Array, got "+H(a));if(!(b instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(b));if("string"!=typeof c)throw TypeError("Expected location to be a String, got "+H(c));for(f=[],g=0,h=a.length;h>g;++g)i=a[g],f.push(m(a[g],b,c,g===h-1&&d,e));return f}function o(a,b,c,d,e,f){var g,i,j,k,l;return null==f&&(f={}),k=!1,b&&(j=h(),k=!j(e,!0),!k)?(i=M(a,d,j),O(e,d,i.start,null,null,c).goto(a,function(){return i.stop}),l=i.create(),a.file&&((g=l.pos).file||(g.file=a.file)),{wrap:function(a){return a},body:l}):(l=m(e,d,"topStatement",c,f)(),a.file&&((g=l.pos).file||(g.file=a.file)),{wrap:k?(d.addHelper("__generator"),function(b){return J.Call(a,J.Ident(a,"__generator"),[b])}):function(a){return a},body:l})}function p(a){if("function"!=typeof a)throw TypeError("Expected getPosition to be a Function, got "+H(a));return function(b){var c;if(!(b instanceof T))throw TypeError("Expected node to be a "+A(T)+", got "+H(b));return c=a(b.index),j(c.line,c.column,b.file)}}function q(a,b,c){function d(a){var b;for(b=[];;)if(a instanceof J.Comment)b.push(a),a=J.Noop(a.pos);else{if(!(a instanceof J.Block&&a.body[0]instanceof J.Comment))break;b.push(a.body[0]),a=J.Block(a.pos,D.call(a.body,1))}return{comments:b,body:a}}var e,f,g,h,i,k,l,n,q,r,s,t,u,v,w,x,z;if("object"!=typeof a||null===a)throw TypeError("Expected roots to be an Object, got "+H(a));if(!(b instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(b));if(y(a)||(a=[a]),y(c)||(c=[c]),0===a.length&&a.push({type:"Root",line:0,column:0,body:{type:"Nothing",line:0,column:0}}),v=j(0,0),b.options.embedded)for(e=["write","context"],f=0,g=e.length;g>f;++f)u=e[f],s=J.Ident({line:0,column:0},u),b.addVariable(s),b.markAsParam(s);for(h=1===a.length?function(){var d,e,f;if(P=p(c[0]),!(a[0]instanceof T.Root))throw Error("Cannot translate non-Root object");return a[0].isGenerator&&(b=b.clone(!0)),f=P(a[0]),e=o(f,a[0].isGenerator,b.options["return"]||b.options.eval,b,a[0].body),(d=e.body.pos).file||(d.file=f.file),P=null,e}():{wrap:function(a){return a},body:J.Block(v,function(){var e,f,g,h,i,j,k,l,n,o;for(e=[],f=G(a),g=0,h=f.length;h>g;++g){if(l=f[g],P=p(c[0]),!(l instanceof T.Root))throw Error("Cannot translate non-Root object");k=b.clone(!0),i=d(m(l.body,k,"topStatement",b.options["return"]||b.options.eval,[])()),j=i.comments,n=i.body,o=P(l),P=null,e.push(J.Block(o,G(j).concat([J.Call(o,J.Func(o,null,[],k.getVariables(),n))])))}return e}())},z=h.wrap,k=h.body,t=[],b.hasBound&&b.usedThis&&(q=J.Ident(k.pos,"_this"),b.addVariable(q),t.push(J.Assign(k.pos,q,J.This(k.pos)))),b.fillHelperDependencies(),e=G(b.getHelpers()),f=0,g=e.length;g>f;++f)r=e[f],"GLOBAL"!==r&&b.macros.hasHelper(r)&&(s=J.Ident(k.pos,r),b.addVariable(s),t.push(J.Assign(k.pos,s,b.macros.getHelper(r))));return i=[],b.options.eval&&(x=function(a){return a instanceof J.Func?(b.addHelper("GLOBAL"),null!=a.name?J.Block(a.pos,[a,J.Assign(a.pos,J.Access(a.pos,J.Ident(a.pos,"GLOBAL"),a.name.name),a.name)]):a):a instanceof J.Binary&&"="===a.op&&a.left instanceof J.Ident?(b.addHelper("GLOBAL"),J.Assign(a.pos,J.Access(a.pos,J.Ident(a.pos,"GLOBAL"),a.left.name),a.walk(x))):void 0},k=k.walk(x),k=k.mutateLast(function(a){return b.addHelper("GLOBAL"),J.Assign(a.pos,J.Access(a.pos,J.Ident(a.pos,"GLOBAL"),J.Const(a.pos,"_")),a)},{"return":!0})),h=d(k),n=h.comments,w=h.body,b.options.embedded&&(w=J.Block(k.pos,[J.Return(k.pos,z(J.Func(k.pos,null,[J.Ident(k.pos,"write"),J.Ident(k.pos,"context")],[],J.Block(k.pos,[J.If(k.pos,J.Binary(k.pos,J.Ident(k.pos,"context"),"==",J.Const(k.pos,null)),J.Assign(k.pos,J.Ident(k.pos,"context"),J.Obj(k.pos))),w]))))])),b.options.bare?(b.hasHelper("GLOBAL")&&(b.addVariable(J.Ident(k.pos,"GLOBAL")),i.unshift(J.Assign(k.pos,J.Ident(k.pos,"GLOBAL"),b.macros.getHelper("GLOBAL")))),null!=b.options.undefinedName&&b.addVariable(b.options.undefinedName),J.Root(k.pos,J.Block(k.pos,G(n).concat(G(i),G(t),[w])),b.getVariables(),["use strict"])):(l=J.Call(k.pos,J.Access(k.pos,J.Func(k.pos,null,(b.hasHelper("GLOBAL")?[J.Ident(k.pos,"GLOBAL")]:[]).concat(null!=b.options.undefinedName?[J.Ident(k.pos,b.options.undefinedName,!0)]:[]),b.getVariables(),J.Block(k.pos,G(t).concat([w])),["use strict"]),"call"),[J.This(k.pos)].concat(b.hasHelper("GLOBAL")?[b.macros.getHelper("GLOBAL")]:[])),b.options["return"]&&(l=J.Return(k.pos,l)),J.Root(k.pos,J.Block(k.pos,G(n).concat(G(i),[l])),[],[]))}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;r=function(){var a;return a={iterator:function(){return this},next:function(){var a,b;return b=B(this.index)+1,a=this.array,b>=B(a.length)?{done:!0,value:void 0}:(this.index=b,{done:!1,value:a[b]})}},function(b){var c;if(!y(b))throw TypeError("Expected array to be an Array, got "+H(b));return c=t(a),c.array=b,c.index=-1,c}}(),s=function(a,b){var c;if(a===b)return 0;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>a?-1:1},t="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},u=function(a,b){var c;if("number"!=typeof a)throw TypeError("Expected numArgs to be a Number, got "+H(a));if("function"!=typeof b)throw TypeError("Expected f to be a Function, got "+H(b));return a>1?(c=function(d){var e;return B(d.length)>=a?b.apply(this,d):e=function(){return 0===arguments.length?e:c.call(this,d.concat(D.call(arguments)))}},c([])):b},v=function(a){return a},w=function(a,b){var c;for(c in b)C.call(b,c)&&(a[c]=b[c]);return a},x=function(a,b){var c,d,e,f;if("number"==typeof b){if(b!==b){for(c=G(a),e=c.length;e--;)if(d=c[e],d!==d)return e;return-1}if(0===b){for(f=1/b,c=G(a),e=c.length;e--;)if(d=c[e],0===d&&1/d===f)return e;return-1}}return a.indexOf(b)},y="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),z=function(a){if(null==a)throw TypeError("Expected iterable to be an Object, got "+H(a));if(y(a))return r(a);if("function"==typeof a.iterator)return a.iterator();if("function"==typeof a.next)return a;throw Error("Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "+H(a))},A=function(a){if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+H(a));return a.displayName||a.name||""},B=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+H(a));return a},C=Object.prototype.hasOwnProperty,D=Array.prototype.slice,E=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+H(a))},F=function(a){throw a},G=function(a){if(null==a)throw TypeError("Expected an object, got "+H(a));return y(a)?a:"string"==typeof a?a.split(""):D.call(a)},H=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),S="function"==typeof c.Map?c.Map:S=function(){function a(c){var d,e,f,g;if(f=this instanceof a?this:t(b),f._keys=[],f._values=[],null!=c)try{for(e=z(c);d=e.next(),!d.done;)g=d.value,f.set(g[0],g[1])}finally{try{e.close()}catch(h){}}return f}var b;return b=a.prototype,a.displayName="Map",b.get=function(a){var b;return b=x(this._keys,a),-1===b?void 0:this._values[b]},b.has=function(a){return-1!==x(this._keys,a)},b.set=function(a,b){var c,d;d=this._keys,c=x(d,a),-1===c&&(c=d.length,d[c]=a),this._values[c]=b},b["delete"]=function(a){var b,c;return c=this._keys,b=x(c,a),-1===b?!1:(c.splice(b,1),this._values.splice(b,1))},b.keys=function(){function a(){g=3}function b(){for(;;)switch(g){case 0:e=G(h._keys),f=e.length,++g;case 1:g=f--?2:3;break;case 2:return i=e[f],g=1,{done:!1,value:i};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,f,d,g,b,h,c,i;return h=this,g=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.values=function(){function a(){g=3}function b(){for(;;)switch(g){case 0:e=G(h._values),f=e.length,++g;case 1:g=f--?2:3;break;case 2:return i=e[f],g=1,{done:!1,value:i};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,f,d,g,b,h,c,i;return h=this,g=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.items=function(){function a(){f=3}function b(){for(;;)switch(f){case 0:j=g._values,e=G(g._keys),h=e.length,++f;case 1:f=h--?2:3;break;case 2:return i=e[h],f=1,{done:!1,value:[i,j[h]]};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function c(b){throw a(),b}function d(a){try{return b(a)}catch(d){c(d)}}var e,d,f,b,g,c,h,i,j;return g=this,f=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}},b.iterator=a.prototype.items,a}(),J=b("./jsast"),K=J.Node,W=b("./types"),I=b("./parser"),T=I.Node,R=I.MacroHolder,I=b("./utils"),L=I.Cache,Q=I.isPrimordial,U=function(){function a(b,d,f,g,h,i,j){var k;if(k=this instanceof a?this:t(c),null==b&&(b={}),k.options=b,!(d instanceof R))throw TypeError("Expected macros to be a "+A(R)+", got "+H(d));return k.macros=d,null==f&&(f=!1),k.bound=f,null==g&&(g={}),k.usedTmps=g,null==h&&(h={}),k.helperNames=h,null==j&&(j={}),k.tmps=j,k.variables=i?t(i):{},k.hasBound=!1,k.usedThis=!1,k.id=e(),k}function b(a,b){return s(a.toLowerCase(),b.toLowerCase())}var c,e;return c=a.prototype,a.displayName="Scope",e=function(){var a;return a=-1,function(){return++a}}(),c.maybeCache=function(a,b,c){var e,f;if(!(a instanceof J.Expression))throw TypeError("Expected item to be an Expression, got "+H(a));if(null==b)b=W.any;else if(!(b instanceof W))throw TypeError("Expected type to be a "+A(W)+", got "+H(b));if("function"!=typeof c)throw TypeError("Expected func to be a Function, got "+H(c));return d(a)?(e=this.reserveIdent(a.pos,"ref",b),f=c(J.Assign(a.pos,e,a),e,!0),this.releaseIdent(e),f):c(a,a,!1)},c.maybeCacheAccess=function(a,b,c,d,e){var f;if(f=this,!(a instanceof J.Expression))throw TypeError("Expected item to be an Expression, got "+H(a));if(null==c)c="ref";else if("string"!=typeof c)throw TypeError("Expected parentName to be a String, got "+H(c));if(null==d)d="ref";else if("string"!=typeof d)throw TypeError("Expected childName to be a String, got "+H(d));if(null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected save to be a Boolean, got "+H(e));return a instanceof J.Binary&&"."===a.op?this.maybeCache(a.left,W.any,function(c,d,e){return f.maybeCache(a.right,W.any,function(f,g,h){return e||h?b(J.Access(a.pos,c,f),J.Access(a.pos,d,g),!0):b(a,a,!1)})}):b(a,a,!1)},c.reserveIdent=function(a,b,c){var d;if(d=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if(null==b&&(b="ref"),null==c)c=W.any;else if(!(c instanceof W))throw TypeError("Expected type to be a "+A(W)+", got "+H(c));return function(){var e,f,g;for(e=1;;++e)if(g=1===e?"_"+E(b):"_"+E(b)+e,!(g in d.usedTmps))return d.usedTmps[g]=!0,f=J.Ident(a,g),d.addVariable(f,c),f}()},c.reserveParam=function(a){var b;if(b=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));return function(){var c,d;for(c=1;;++c)if(d=1===c?"_p":"_p"+c,!(d in b.usedTmps))return b.usedTmps[d]=!0,J.Ident(a,d)}()},c.getTmp=function(a,b,c,d){var e,f;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if(null==d)d=W.any;else if(!(d instanceof W))throw TypeError("Expected type to be a "+A(W)+", got "+H(d));return f=this.tmps,b in f&&(e=f[b],e instanceof J.Ident)?e:f[b]=this.reserveIdent(a,c||"tmp",d)},c.releaseTmp=function(a){var b,c;C.call(this.tmps,a)&&this.releaseIdent((b=(c=this.tmps)[a],delete c[a],b))},c.releaseTmps=function(){var a,b;a=this.tmps;for(b in a)C.call(a,b)&&this.releaseTmp(b);this.tmps={}},c.releaseIdent=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));if(!C.call(this.usedTmps,a.name))throw Error("Trying to release a non-reserved ident: "+E(a.name));delete this.usedTmps[a.name]},c.markAsParam=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));this.variables[a.name].isParam=!0},c.markAsFunction=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));this.variables[a.name].isFunction=!0},c.addHelper=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+H(a));this.helperNames[a]=!0},c.fillHelperDependencies=function(){var a,b,c,d,e,f,g;for(e=this.helperNames,g={};;){for(f in e)if(C.call(e,f)&&this.macros.hasHelper(f))for(a=G(this.macros.helperDependencies(f)),c=a.length;c--;)d=a[c],C.call(e,d)||(g[d]=!0);b=!0;for(f in g)C.call(g,f)&&(b=!1,this.addHelper(f));if(b)break;e=g,g={}}},c.getHelpers=function(){var a,c,d,e;a=[],c=this.helperNames;for(d in c)C.call(c,d)&&a.push(d);return e=a,e.sort(b)},c.hasHelper=function(a){if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+H(a));return C.call(this.helperNames,a)},c.addVariable=function(a,b,c){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));if(null==b)b=W.any;else if(!(b instanceof W))throw TypeError("Expected type to be a "+A(W)+", got "+H(b));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected isMutable to be a Boolean, got "+H(c));this.variables[a.name]={type:b,isMutable:c}},c.hasVariable=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));return a.name in this.variables&&"object"==typeof this.variables[a.name]&&null!==this.variables[a.name]},c.hasOwnVariable=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));return C.call(this.variables,a.name)},c.isVariableMutable=function(a){var b;if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));return null!=(b=this.variables[a.name])?b.isMutable:void 0},c.removeVariable=function(a){if(!(a instanceof J.Ident))throw TypeError("Expected ident to be an Ident, got "+H(a));delete this.variables[a.name]},c.getVariables=function(){var a,c,d,e,f;a=[],c=this.variables;for(d in c)C.call(c,d)&&(e=c[d],e.isParam||e.isFunction||a.push(d));return f=a,f.sort(b)},c.clone=function(b){return b&&(this.hasBound=!0),a(this.options,this.macros,b,t(this.usedTmps),this.helperNames,this.variables,t(this.tmps))},a}(),N=function(){function a(b){var d;if(d=this instanceof a?this:t(c),!(b instanceof M))throw TypeError("Expected builder to be a "+A(M)+", got "+H(b));return d.builder=b,d.nodes=[],d}function b(b,c){if("object"!=typeof b||null===b)throw TypeError("Expected pos to be an Object, got "+H(b));if(c instanceof a)return J.Const(b,c.caseId());if(c instanceof J.Node)return c;throw TypeError("Expected a GeneratorState or Node, got "+H(c))}var c;return c=a.prototype,a.displayName="GeneratorState",c.hasGeneratorNode=function(a){return this.builder.hasGeneratorNode(a)},c.add=function(a){if("function"!=typeof a)throw TypeError("Expected tNode to be a Function, got "+H(a));return this.nodes.push(a),this},c.branch=function(){var b,c;return c=a(this.builder),this.builder.currentCatch.length&&(b=this.builder.currentCatch)[B(b.length)-1].push(c),this.builder.statesOrder.push(c),c},c.caseId=function(){return this.builder.caseId(this.getRedirect())},c.makeGoto=function(b,c,d){var e;if(e=this,"object"!=typeof b||null===b)throw TypeError("Expected pos to be an Object, got "+H(b));if("function"!=typeof c)throw TypeError("Expected tState to be a Function, got "+H(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected includeBreak to be a Boolean, got "+H(d));return function(){var f,g,h;if(h=c(),h instanceof a)g=J.Const(b,h.caseId());else{if(!(h instanceof J.Node))throw Error("Expected a GeneratorState or Node, got "+H(h));g=h}return g instanceof J.Const&&"number"==typeof g.value&&g.value===B(e.caseId())+1?J.Unary(b,"++",e.builder.stateIdent):(f=J.Assign(b,e.builder.stateIdent,g),d?J.Block(b,[f,J.Break(b)]):f)}},c.yield=function(a,b){var c;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if("function"!=typeof b)throw TypeError("Expected tNode to be a Function, got "+H(b));return c=this.branch(),this.nodes.push(this.makeGoto(a,function(){return c},!1),function(){return J.Return(a,J.Obj(a,[J.Obj.Pair(a,"done",J.Const(a,!1)),J.Obj.Pair(a,"value",b())]))}),c},c["return"]=function(a,b){var c;if(c=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if(null==b)b=null;else if("function"!=typeof b)throw TypeError("Expected tNode to be one of Function or null, got "+H(b));null==b?this.goto(a,function(){return c.builder.stop}):(this.add(this.makeGoto(a,function(){return c.builder.stop},!1)),this.add(function(){var c;return c=b(),c instanceof J.Statement?c:J.Return(a,J.Obj(a,[J.Obj.Pair(a,"done",J.Const(a,!0)),J.Obj.Pair(a,"value",b())]))}))},c.returnOrAdd=function(a,b,c){return a?(this["return"](b,c),this):this.add(c)},c.getRedirect=function(){return this.builder.getRedirect(this)},c.goto=function(a,c,d){var e;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if("function"!=typeof c)throw TypeError("Expected tState to be a Function, got "+H(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected preventRedirect to be a Boolean, got "+H(d));e=this.nodes,0!==e.length||d||this.builder.addRedirect(this,c),e.push(this.makeGoto(a,function(){return b(a,c())},!0))},c.noop=function(a){var b;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));return 0===this.nodes.length?this:(b=this.branch(),this.goto(a,function(){return b}),b)},c.gotoIf=function(a,c,d,e){var f;if(f=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if("function"!=typeof c)throw TypeError("Expected tTest to be a Function, got "+H(c));if("function"!=typeof d)throw TypeError("Expected tWhenTrue to be a Function, got "+H(d));if("function"!=typeof e)throw TypeError("Expected tWhenFalse to be a Function, got "+H(e));this.goto(a,function(){return J.IfExpression(a,c(),b(a,d()),b(a,e()))},!0)},c.pendingFinally=function(a,b){var c,d,e;if(c=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if("function"!=typeof b)throw TypeError("Expected tFinallyBody to be a Function, got "+H(b));return e=this.builder.scope,d=e.reserveIdent(a,"finally",W.undefined["function"]()),e.markAsFunction(d),this.builder.finallies.push(function(){return J.Func(a,d,[],[],b())}),this.nodes.push(function(){return J.Call(a,J.Access(a,c.builder.pendingFinalliesIdent,"push"),[d])}),this},c.runPendingFinally=function(a){var b;if(b=this,"object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));return this.nodes.push(function(){return J.Call(a,J.Call(a,J.Access(a,b.builder.pendingFinalliesIdent,"pop")))}),this},c.enterTryCatch=function(a){var b;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));return b=this.noop(a),this.builder.enterTryCatch(b),b},c.exitTryCatch=function(a,b,c){var d;if("object"!=typeof a||null===a)throw TypeError("Expected pos to be an Object, got "+H(a));if("function"!=typeof b)throw TypeError("Expected tIdent to be a Function, got "+H(b));if("function"!=typeof c)throw TypeError("Expected tPostState to be a Function, got "+H(c));return this.goto(a,c),d=this.noop(a),this.builder.exitTryCatch(d,b),d},a}(),M=function(){function a(b,d,e){var f,g;if(f=this instanceof a?this:t(c),"object"!=typeof b||null===b)throw TypeError("Expected pos to be an Object, got "+H(b));if(f.pos=b,!(d instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(d));if(f.scope=d,"function"!=typeof e)throw TypeError("Expected hasGeneratorNode to be a Function, got "+H(e));return f.hasGeneratorNode=e,f.currentCatch=[],f.redirects=S(),f.start=N(f),f.stop=N(f).add(function(){return J.Return(b,J.Obj(b,[J.Obj.Pair(b,"done",J.Const(b,!0)),J.Obj.Pair(b,"value",J.Const(b,void 0))]))}),f.statesOrder=[f.start],f.stateIdent="undefined"!=typeof stateIdent&&null!==stateIdent?stateIdent:d.reserveIdent(b,"state",W.number),f.pendingFinalliesIdent=d.reserveIdent(b,"finallies",W.undefined["function"]().array()),g=d.clone(!1),f.receivedIdent=g.reserveIdent(b,"received",W.any),g.markAsParam(f.receivedIdent),f.finallies=[],f.catches=[],f}function b(a){var b,c,d,e,f,g,h;for(g=[],h=-1/0,e=-1,b=G(a),c=0,f=b.length;f>c;++c)d=b[c],d!==e+1&&(-1!==e&&g.push({start:h,finish:e}),h=d),e=d;return-1!==e&&g.push({start:h,finish:e}),g}var c;return c=a.prototype,a.displayName="GeneratorBuilder",c.addRedirect=function(a,b){if(!(a instanceof N))throw TypeError("Expected fromState to be a "+A(N)+", got "+H(a));if("function"!=typeof b)throw TypeError("Expected toState to be a Function, got "+H(b));this.redirects.set(a,b)},c.getRedirect=function(a){var b,c;if(!(a instanceof N))throw TypeError("Expected fromState to be a "+A(N)+", got "+H(a));if(c=this.redirects.get(a),null==c)return a;if(c instanceof N)return c;if("function"==typeof c){if(b=c(),!(b instanceof N))throw Error("Expected a GeneratorState, got "+H(c));return b=this.getRedirect(b),this.redirects.set(a,b),b}throw Error("Unknown value in redirects: "+H(c))},c._calculateCaseIds=function(){var a,b,c,d,e,f;for(e=-1,d=this.caseIds=S(),a=G(this.statesOrder),b=0,c=a.length;c>b;++b)f=a[b],this.redirects.has(f)||d.set(f,++e)},c.caseId=function(a){var b;if(!(a instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(a));if(b=this.caseIds,null==b)throw Error("_calculate-case-ids must be called first");if(!b.has(a))throw Error("case-ids does not contain state");return b.get(a)},c.enterTryCatch=function(a){if(!(a instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(a));this.currentCatch.push([a])},c.exitTryCatch=function(a,b){var c,d;if(!(a instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(a));if("function"!=typeof b)throw TypeError("Expected tIdent to be a Function, got "+H(b));if(0===this.currentCatch.length)throw Error("Unable to exit-try-catch without first using enter-try-catch");c=this.currentCatch.pop(),d=c.indexOf(a),-1!==d&&c.splice(d,1),this.catches.push({tryStates:c,tIdent:b,catchState:a})},c.create=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n;if(a=this,this.currentCatch.length)throw Error("Cannot create a generator if there are stray catches");return this.statesOrder.push(this.stop),this._calculateCaseIds(),c=[J.Assign(this.pos,this.stateIdent,J.Const(this.pos,this.start.caseId()))],e=this.scope.reserveIdent(this.pos,"close",W.undefined["function"]()),this.scope.markAsFunction(e),0===this.finallies.length?(this.scope.removeVariable(this.pendingFinalliesIdent),c.push(J.Func(this.pos,e,[],[],J.Block(this.pos,[J.Assign(this.pos,this.stateIdent,this.stop.caseId())])))):(c.push(J.Assign(this.pos,this.pendingFinalliesIdent,J.Arr(this.pos))),c.push.apply(c,function(){var b,c,d,e,f;for(b=[],c=G(a.finallies),d=0,e=c.length;e>d;++d)f=c[d],b.push(f());return b}()),h=this.scope.clone(!1),g=h.reserveIdent(this.pos,"f",W.undefined["function"]().union(W.undefined)),c.push(J.Func(this.pos,e,[],h.getVariables(),J.Block(this.pos,[J.Assign(this.pos,this.stateIdent,this.stop.caseId()),J.Assign(this.pos,g,J.Call(this.pos,J.Access(this.pos,this.pendingFinalliesIdent,"pop"))),J.If(this.pos,g,J.TryFinally(this.pos,J.Call(this.pos,g),J.Call(this.pos,e)))])))),f=this.scope.reserveIdent(this.pos,"e",W.any),d=this.catches,l=this.stateIdent,m=this.scope.reserveIdent(this.pos,"step",W["function"]),i=this.scope.reserveIdent(this.pos,"send",W["function"]),n=this.scope.reserveIdent(this.pos,"throw",W["function"]),c.push(J.Func(this.pos,m,[this.receivedIdent],[],J.While(this.pos,!0,J.Switch(this.pos,l,function(){var b,c,d,e,f,g,h,i,j,k,l;for(b=[],c=G(a.statesOrder),f=0,h=c.length;h>f;++f)if(k=c[f],!a.redirects.has(k)){for(d=[],e=G(k.nodes),g=0,i=e.length;i>g;++g)l=e[g],d.push(l());if(j=d,0===j.length)throw Error("Found state with no nodes in it");b.push(J.Switch.Case(j[0].pos,J.Const(j[0].pos,k.caseId()),J.Block(j[0].pos,j)))}return b}(),J.Throw(this.pos,J.Call(this.pos,J.Ident(this.pos,"Error"),[J.Binary(this.pos,"Unknown state: ","+",l)])))))),c.push(J.Func(this.pos,n,[f],[],function(){var c,g,h,i;for(i=J.Block(a.pos,[J.Call(a.pos,e,[]),J.Throw(a.pos,f)]),c=G(d),h=c.length,g=function(a){var c,d,e,g,h,j,k,m,n;for(h=this,j=a.tIdent(),this.scope.addVariable(j),c=[],d=G(a.tryStates),e=0,g=d.length;g>e;++e)k=d[e],this.redirects.has(k)||c.push(k.caseId());
return m=c,m.sort(u(2,function(a,b){return s(a,b)})),n=b(m),i=J.If(this.pos,J.Or.apply(J,[this.pos].concat(function(){var a,b,c,d,e,f,g;for(a=[],b=G(n),c=0,d=b.length;d>c;++c)e=b[c],g=e.start,f=e.finish,g===-1/0?0===f?a.push(J.Binary(h.pos,l,"===",J.Const(h.pos,0))):a.push(J.Binary(h.pos,l,"<=",J.Const(h.pos,f))):f===g?a.push(J.Binary(h.pos,l,"===",J.Const(h.pos,g))):f===B(g)+1?a.push(J.Or(h.pos,J.Binary(h.pos,l,"===",J.Const(h.pos,g)),J.Binary(h.pos,l,"===",J.Const(h.pos,f)))):a.push(J.And(h.pos,J.Binary(h.pos,l,">=",J.Const(h.pos,g)),J.Binary(h.pos,l,"<=",J.Const(h.pos,f))));return a}())),J.Block(this.pos,[J.Assign(this.pos,j,f),J.Assign(this.pos,l,J.Const(this.pos,a.catchState.caseId()))]),i)};h--;)g.call(a,c[h]);return i}())),j=J.TryCatch(this.pos,J.Return(this.pos,J.Call(this.pos,m,[this.receivedIdent])),f,J.Call(this.pos,n,[f])),k=0===this.finallies.length?j:J.TryFinally(this.pos,j,J.If(this.pos,J.Binary(this.pos,l,"===",this.stop.caseId()),J.Call(this.pos,e,[]))),c.push(J.Func(this.pos,i,[this.receivedIdent],[],d.length?J.While(this.pos,!0,k):k)),c.push(J.Return(this.pos,J.Obj(this.pos,[J.Obj.Pair(this.pos,"close",e),J.Obj.Pair(this.pos,"iterator",J.Func(this.pos,null,[],[],J.Return(this.pos,J.This(this.pos)))),J.Obj.Pair(this.pos,"next",J.Func(this.pos,null,[],[],J.Return(this.pos,J.Call(this.pos,i,[J.Const(this.pos,void 0)])))),J.Obj.Pair(this.pos,"send",i),J.Obj.Pair(this.pos,"throw",J.Func(this.pos,null,[f],[],J.Block(this.pos,[J.Call(this.pos,n,[f]),J.Return(this.pos,J.Call(this.pos,i,[J.Const(this.pos,void 0)]))])))]))),J.Block(this.pos,c)},a}(),P=function(a){if(!(a instanceof T))throw TypeError("Expected node to be a "+A(T)+", got "+H(a));throw Error("get-pos must be overridden")},O=function(){function a(a){var b,c;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+H(a));return a.memoized?a:((b=function(){return a&&(c=a(),a=null),c}).memoized=!0,b)}function b(a){var b;return(b=function(){return a}).memoized=!0,b}function c(b,c,e,f,g){var h,i,j;if(!(e instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(e));if("function"!=typeof f)throw TypeError("Expected tNode to be a Function, got "+H(f));if(null==g)g=k;else if("function"!=typeof g)throw TypeError("Expected cleanup to be a Function, got "+H(g));return"function"==typeof b?(i=a(b),{state:e.add(function(){var a;return a=f(),J.Assign(a.pos,i(),a)}),tNode:i,cleanup:g}):b?(f=a(f),j=a(function(){return c.reserveIdent(f().pos,"tmp",W.any)}),h=a(function(){return f()===e.builder.receivedIdent||d(f())}),{state:e.add(function(){var a;return a=f(),h()?J.Assign(a.pos,j(),a):a}),tNode:function(){return h()?j():f()},cleanup:function(){return g(),h()?c.releaseIdent(j()):void 0}}):{state:e,tNode:f,cleanup:g}}function e(c,d,e,f,g){return null==f&&(f="tmp"),null==g&&(g=W.any),"function"==typeof c?a(c):b(d.reserveIdent(e,f,g))}function f(a,b,c){if("function"!=typeof c)throw TypeError("Expected tTmp to be a Function, got "+H(c));return"function"==typeof a?function(){var d,e;return e=a(),d=c(),e===d?b.releaseIdent(d):void 0}:function(){return b.releaseIdent(c())}}function g(a,b,c,d,g){var i,j,m,n,o,p;if(!(d instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(d));for(p=e(g,c,a,"arr",W.array),o=null,i=G(b),n=0,m=i.length,j=function(e,f){var g;return o||d.hasGeneratorNode(e)?(null==o&&(o=l(a,D.call(b,0,f),c,!0,!1),d=d.add(function(){return J.Assign(a,p(),o())})),e instanceof T.Spread?(g=h(e.node,c,d,!1),d=g.state.add(function(){var a;return a=p(),c.addHelper("__toArray"),J.Call(P(e),J.Access(P(e),a,J.Const(P(e),"push"),J.Const(P(e),"apply")),[a,J.Call(P(e),J.Ident(P(e),"__toArray"),[v(g.tNode(),g.cleanup())])])})):(g=h(e,c,d,!1),d=g.state.add(function(){return J.Call(P(e),J.Access(P(e),p(),J.Const(P(e),"push")),[v(g.tNode(),g.cleanup())])}))):void 0};m>n;++n)j.call(this,i[n],n);return null==o?{state:d,tNode:l(a,b,c,!0,!1),cleanup:k}:{state:d,tNode:p,cleanup:f(g,c,p)}}function h(a,b,d,e){var f;if(!(a instanceof T))throw TypeError("Expected node to be a "+A(T)+", got "+H(a));if(!(b instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(b));if(!(d instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(d));if(null==e)e=!1;else if("boolean"!=typeof e&&"function"!=typeof e)throw TypeError("Expected assignTo to be one of Boolean or Function, got "+H(e));if(f=a.constructor.cappedName,d.hasGeneratorNode(a)){if(C.call(i,f))return i[f](a,b,d,e);throw Error("Unknown expression type: "+H(a))}return c(e,b,d,m(a,b,"expression"))}var i,j;return i={Access:function(a,b,d,e){var f,g;return g=h(a.parent,b,d,!0),f=h(a.child,b,g.state,!1),c(e,b,f.state,function(){var b;return b=J.Access(P(a),g.tNode(),f.tNode()),g.cleanup(),f.cleanup(),b})},Array:function(a,b,c,d){return g(P(a),a.elements,b,c,d)},Assign:function(a,b,d,e){var f,g,i,j,l;return l=a.left,l instanceof T.Access?(i=h(l.parent,b,d,!0),f=h(l.child,b,i.state,!0),g={state:f.state,tNode:function(){return J.Access(P(l),i.tNode(),f.tNode())},cleanup:function(){return i.cleanup(),f.cleanup()}}):g={state:d,tNode:m(a.left,b,"leftExpression"),cleanup:k},j=h(a.right,b,g.state,g.tNode),c(e,b,j.state,j.tNode,function(){return g.cleanup(),j.cleanup()})},Binary:function(){var b;return b={"&&":function(b,c,d,e){var f,g,i,j,k;return f=h(b.left,c,d,e||!0),j=a(f.tNode),f.state.gotoIf(P(b),j,function(){return k},function(){return i}),k=f.state.branch(),g=h(b.right,c,k,j),g.state.goto(P(b),function(){return i}),i=f.state.branch(),{tNode:j,state:i,cleanup:function(){return f.cleanup(),g.cleanup()}}},"||":function(b,c,d,e){var f,g,i,j,k;return f=h(b.left,c,d,e||!0),j=a(f.tNode),f.state.gotoIf(P(b),j,function(){return i},function(){return k}),k=f.state.branch(),g=h(b.right,c,k,j),g.state.goto(P(b),function(){return i}),i=f.state.branch(),{tNode:j,state:i,cleanup:function(){return f.cleanup(),g.cleanup()}}}},function(a,d,e,f){var g,i;return C.call(b,a.op)?b[a.op](a,d,e,f):(g=h(a.left,d,e,!0),i=h(a.right,d,g.state,!1),c(f,d,i.state,function(){return J.Binary(P(a),g.tNode(),(g.cleanup(),a.op),v(i.tNode(),i.cleanup()))}))}}(),Block:function(a,b,c,d){var e,f,g,i,j;for(e=G(a.nodes),f=0,g=e.length;g>f;++f)if(j=e[f],i=h(j,b,c,f===g-1&&d),c=i.state,f===g-1)return i;throw Error("Unreachable state")},Call:function(a,b,d,e){var f,i,j,l,m,n,o,p;return a.func instanceof T.Access?(m=h(a.func.parent,b,d,!0),j=h(a.func.child,b,m.state,!0),l={tNode:function(){return J.Access(P(a),m.tNode(),j.tNode())},cleanup:function(){return m.cleanup(),j.cleanup()},state:j.state}):l=h(a.func,b,d,!0),o=a.isApply,p=a.isNew,f=a.args,!o||0!==f.length&&f[0]instanceof T.Spread?(i=g(P(a),f,b,l.state),c(e,b,i.state,function(){var c,d;return d=l.tNode(),c=i.tNode(),l.cleanup(),i.cleanup(),o?J.Call(P(a),J.Access(P(a),d,"apply"),[J.Access(P(a),c,J.Const(P(a),0)),J.Call(P(a),J.Access(P(a),c,J.Const(P(a),"slice")),[J.Const(P(a),1)])]):p?(b.addHelper("__new"),J.Call(P(a),J.Access(P(a),J.Ident(P(a),"__new"),J.Const(P(a),"apply")),[d,c])):c instanceof J.Arr?J.Call(P(a),J.Access(P(a),d,"call"),[d instanceof J.Binary&&"."===d.op?d.left:J.Const(P(a),void 0)].concat(G(c.elements))):J.Call(P(a),J.Access(P(a),d,"apply"),[d instanceof J.Binary&&"."===d.op?d.left:J.Const(P(a),void 0),c])})):(n=0===f.length?{state:l.state,tNode:function(){return J.Const(P(a),void 0)},cleanup:k}:h(f[0],b,l.state,!0),i=g(P(a),D.call(f,1),b,n.state),c(e,b,i.state,function(){var b,c,d;return c=l.tNode(),d=n.tNode(),b=i.tNode(),l.cleanup(),n.cleanup(),i.cleanup(),b instanceof J.Arr?J.Call(P(a),J.Access(P(a),c,"call"),[d].concat(G(b.elements))):J.Call(P(a),J.Access(P(a),c,"apply"),[d,b])}))},EmbedWrite:function(a,b,d,e){var f;return f=h(a.text,b,d,!1),c(e,b,f.state,function(){return J.Call(P(a),J.Ident(P(a),"write"),[f.tNode()].concat(a.escape?[J.Const(P(a),!0)]:[]))},f.cleanup)},Eval:function(a,b,d,e){var f;return f=h(a.code,b,d,!1),c(e,b,f.state,function(){return J.Eval(P(a),f.tNode(),f.cleanup)})},If:function(a,b,d,g){var i,j,k,l,n,o,p,q,r,s;return n=h(a.test,b,d,d.hasGeneratorNode(a.test)),d=n.state,d.hasGeneratorNode(a.whenTrue)||d.hasGeneratorNode(a.whenFalse)?(d.gotoIf(P(a),function(){var a;return a=n.tNode(),n.cleanup(),a},function(){return s},function(){return r}),o=e(g,b,P(a)),s=d.branch(),k=h(a.whenTrue,b,s,o),k.state.goto(P(a.whenTrue),function(){return l}),r=d.branch(),j=h(a.whenFalse,b,r,o),j.state.goto(P(a.whenFalse),function(){return l}),l=d.branch(),i=f(g,b,o),{state:l,tNode:o,cleanup:function(){return k.cleanup(),j.cleanup(),i()}}):(q=m(a.whenTrue,b,"expression"),p=m(a.whenFalse,b,"expression"),c(g,b,d,function(){return J.If(P(a),n.tNode(),(n.cleanup(),q()),p())}))},Regexp:function(a,b,d,e){var f;return f=h(a.source,b,d,!1),c(e,b,d,function(){var b;return b=f.tNode(),b.isConst()?J.Regex(P(a),String(b.constValue()),a.flags):J.Call(P(a),J.Ident(P(a),"RegExp"),[b,J.Const(P(a),flags)])},f.cleanup)},TmpWrapper:function(a,b,d,e){var f;return f=h(a.node,b,d,!1),c(e,b,f.state,f.tNode,function(){var c,d,e;for(f.cleanup(),c=G(a.tmps),d=c.length;d--;)e=c[d],b.releaseTmp(e)})},Unary:function(a,b,d,e){var f;return f=h(a.node,b,d,!1),c(e,b,f.state,function(){return J.Unary(P(a),a.op,v(f.tNode(),f.cleanup()))})},Yield:function(a,b,d,e){var f;return f=h(a.node,b,d,!1),d=f.state.yield(P(a),f.tNode),c(e,b,d,function(){return d.builder.receivedIdent},f.cleanup)}},j={Block:function(a,b,c,d,e,f){var g,h,i,j,k;if(null!=a.label)throw Error("Not implemented: block with label in generator");for(h=c,g=G(a.nodes),i=0,j=g.length;j>i;++i)k=g[i],h=O(k,b,h,d,e,f&&i===j-1);return h},Break:function(a,b,c,d){if(null!=a.label)throw Error("Not implemented: break with label in a generator");if(null==d)throw Error("break found outside of a loop or switch");return c.goto(P(a),d),c},Continue:function(a,b,c,d,e){if(null!=a.label)throw Error("Not implemented: break with label in a generator");if(null==e)throw Error("continue found outside of a loop");return c.goto(P(a),e),c},For:function(a,b,c){var d,e,f,g,i;if(null!=a.label)throw Error("Not implemented: for with label in generator");return null==a.init||a.init instanceof T.Nothing||(c=O(a.init,b,c)),c.goto(P(a),function(){return i}),i=c.branch(),e=h(a.test,b,i,c.hasGeneratorNode(a.test)),i.gotoIf(P(a.test),function(){var a;return a=e.tNode(),e.cleanup(),a},function(){return d},function(){return f}),d=c.branch(),O(a.body,b,d,function(){return f},function(){return g}).goto(P(a.body),function(){return g||i}),g=null,null==a.step||a.step instanceof T.Nothing||(g=c.branch(),O(a.step,b,g).goto(P(a.step),function(){return i})),f=c.branch()},ForIn:function(b,c,d){var e,f,g,i,j,k,l,n,o,p;if(null!=b.label)throw Error("Not implemented: for-in with label in generator");return p=m(b.key,c,"leftExpression"),g=h(b.object,c,d,!1),d=g.state,j=c.reserveIdent(P(b),"keys",W.string.array()),f=a(function(){var a;if(a=p(),!(a instanceof J.Ident))throw Error("Expected an Ident for a for-in key");return c.addVariable(a,W.string),a}),i=c.reserveIdent(P(b),"i",W.number),k=c.reserveIdent(P(b),"len",W.number),c.addHelper("__allkeys"),d=d.add(function(){return J.Block(P(b),[J.Assign(P(b),j,J.Call(P(b),J.Ident(P(b),"__allkeys"),[v(g.tNode(),g.cleanup())])),J.Assign(P(b),i,0),J.Assign(P(b),k,J.Access(P(b),j,"length"))])}),d.goto(P(b),function(){return o}),o=d.branch(),o.gotoIf(P(b),function(){return J.Binary(P(b),i,"<",k)},function(){return e},function(){return l}),e=o.branch(),d=e.add(function(){return J.Assign(P(b),f(),J.Access(P(b),j,i))}),O(b.body,c,d,function(){return l},function(){return n}).goto(P(b.body),function(){return n}),n=e.branch(),n.add(function(){return J.Unary(P(b),"++",i)}).goto(P(b),function(){return o}),l=n.branch()},If:function(a,b,c,d,e,f){var g,i,j,k,l,n;return i=h(a.test,b,c,c.hasGeneratorNode(a.test)),c=i.state,c.hasGeneratorNode(a.whenTrue)||c.hasGeneratorNode(a.whenFalse)?(c.gotoIf(P(a),function(){var a;return a=i.tNode(),i.cleanup(),a},function(){return n||g},function(){return l||g}),!a.whenTrue||a.whenTrue instanceof T.Nothing||(n=c.branch()),n&&O(a.whenTrue,b,n,d,e,f).goto(P(a.whenTrue),function(){return g}),!a.whenFalse||a.whenFalse instanceof T.Nothing||(l=c.branch()),l&&O(a.whenFalse,b,l,d,e,f).goto(P(a.whenFalse),function(){return g}),g=c.branch()):(k=m(a.whenTrue,b,"statement"),j=m(a.whenFalse,b,"statement"),c.returnOrAdd(f,P(a),function(){return J.If(P(a),i.tNode(),(i.cleanup(),k()),j())}))},Return:function(a,b,c){var d,e;return e=P(a),a.node.isConst()&&void 0===a.node.constValue()?(c["return"](P(a)),c):(d=h(a.node,b,c,!1),c=d.state,c["return"](P(a),function(){var a;return a=d.tNode(),d.cleanup(),a}),c)},Switch:function(a,b,c,d,e,f){var g,i,j,k,l,n,o,p,q,r,s;if(null!=a.label)throw Error("Not implemented: switch with label in generator");for(p=h(a.node,b,c,!1),k=[],s=[],p.state.add(function(){return J.Switch(P(a),p.tNode(),function(){var a,b,c,d;for(a=[],b=0,c=s.length;c>b;++b)d=s[b],a.push(d());return a}(),n())}),p.state.add(function(){return J.Break(P(a))}),g=G(a.cases),q=0,j=g.length,i=function(a,d){var g,h,i,j;if(c.hasGeneratorNode(a.node))throw Error("Cannot use yield in the check of a switch's case");return i=m(a.node,b,"expression"),g=p.state.branch(),k[d]=g,h=O(a.body,b,g,function(){return r},e,f&&!a.fallthrough),h.goto(P(a.node),a.fallthrough?function(){return k[d+1]||r}:function(){return r}),j=g.makeGoto(P(a.node),function(){return g}),s.push(function(){return J.Switch.Case(P(a.node),i(),J.Block(P(a.node),[j(),J.Break(P(a.node))]))})};j>q;++q)i.call(this,g[q],q);return null!=a.defaultCase?(l=p.state.branch(),o=O(a.defaultCase,b,l,function(){return r},e,f),o.goto(P(a.defaultCase),function(){return r}),n=l.makeGoto(P(a.defaultCase),function(){return l})):n=p.state.makeGoto(P(a),function(){return r}),r=c.branch()},Throw:function(a,b,c){var d;return d=h(a.node,b,c,!1),d.state.add(function(){return J.Throw(P(a),v(d.tNode(),d.cleanup()))})},TmpWrapper:function(a,b,c,d,e,f){var g,h,i,j;for(i=O(a.node,b,c,d,e,f),g=G(a.tmps),h=g.length;h--;)j=g[h],b.releaseTmp(j);return i},TryCatch:function(a,b,c,d,e,f){var g;if(null!=a.label)throw Error("Not implemented: try-catch with label in generator");return c=c.enterTryCatch(P(a)),c=O(a.tryBody,b,c,d,e,f),c=c.exitTryCatch(P(a.tryBody),m(a.catchIdent,b,"leftExpression",!1),function(){return g}),c=O(a.catchBody,b,c,d,e,f),c.goto(P(a),function(){return g}),g=c.branch()},TryFinally:function(a,b,c,d,e,f){if(null!=a.label)throw Error("Not implemented: try-finally with label in generator");if(c.hasGeneratorNode(a.finallyBody))throw Error("Cannot use yield in a finally");return c=c.pendingFinally(P(a),m(a.finallyBody,b,"statement")),c=O(a.tryBody,b,c,d,e,f),c.runPendingFinally(P(a))},Yield:function(a,b,c,d,e,f){var g,i;return g=h(a.node,b,c,!1),i=g.state.yield(P(a),function(){var a;return a=g.tNode(),g.cleanup(),a}),f&&i["return"](P(a),function(){return c.builder.receivedIdent}),i}},function(a,b,c,d,e,f){var g,i;if(!(a instanceof T))throw TypeError("Expected node to be a "+A(T)+", got "+H(a));if(!(b instanceof U))throw TypeError("Expected scope to be a "+A(U)+", got "+H(b));if(!(c instanceof N))throw TypeError("Expected state to be a "+A(N)+", got "+H(c));if(c.hasGeneratorNode(a)){if(g=a.constructor.cappedName,C.call(j,g)){if(i=j[g](a,b,c,d,e,f,f),!(i instanceof N))throw Error("Translated non-GeneratorState from "+H(a)+": "+H(i));return i}return i=h(a,b,c),i.state.returnOrAdd(f,P(a),function(){var a;return a=i.tNode(),i.cleanup(),a})}return c.returnOrAdd(f,P(a),m(a,b,"statement",!1))}}(),V={Access:function(a,b,c,d,e){var f,g;return g=m(a.parent,b,"expression",null,e),f=m(a.child,b,"expression",null,e),function(){return d(J.Access(P(a),g(),f()))}},Args:function(a,b,c,d){return function(){return d(J.Arguments(P(a)))}},Array:function(a,b,c,d,e){var f;return f=l(P(a),a.elements,b,!0,!1,e),function(){return d(f())}},Assign:function(a,b,c,d,e){var g,h,i;if(g=a.op,h=m(a.left,b,"leftExpression"),i=m(a.right,b,"expression",null,e),e&&a.left instanceof T.Ident){if("="===g&&e[a.left.name]&&a.right.isConst()&&void 0===a.right.constValue())return function(){return J.Noop(P(a))};e[a.left.name]=!1}return function(){var e,j,k;return j=h(),k=i(),"="===g&&"topStatement"===c&&j instanceof J.Ident&&k instanceof J.Func&&null==k.name&&b.hasOwnVariable(j)&&!b.isVariableMutable(j)?(b.markAsFunction(j),e=J.Func(P(a),j,k.params,k.variables,k.body,k.declarations),d!==f?J.Block(P(a),[e,d(j)]):e):d(J.Binary(P(a),j,g,k))}},Binary:function(a,b,c,d,e){var f,g;return f=m(a.left,b,"expression",null,e),g=m(a.right,b,"expression",null,e),function(){return d(J.Binary(P(a),f(),a.op,g()))}},Block:function(a,b,c,d,e){var f,g;return f=a.label&&m(a.label,b,"label"),g=n(a.nodes,b,c,d,e),function(){return J.Block(P(a),function(){var a,b,c,d,e;for(a=[],b=G(g),c=0,d=b.length;d>c;++c)e=b[c],a.push(e());return a}(),"function"==typeof f?f():void 0)}},Break:function(a,b){var c;return c=a.label&&m(a.label,b,"label"),function(){return J.Break(P(a),"function"==typeof c?c():void 0)}},Call:function(a,b,c,d,e){var f,g,h,i,j,k;return j=m(a.func,b,"expression",null,e),g=a.isApply,h=a.isNew,f=a.args,!g||0!==f.length&&f[0]instanceof T.Spread?(i=l(P(a),f,b,!1,!0,e),function(){var c,e,f,k;return k=j(),f=i(),g?b.maybeCache(f,W.array,(c=!1,function(e,f){if(c)throw Error("Attempted to call function more than once");return c=!0,b.addHelper("__slice"),d(J.Call(P(a),J.Access(P(a),k,"apply"),[J.Access(P(a),e,0),J.Call(P(a),J.Access(P(a),J.Ident(P(a),"__slice"),"call"),[f,J.Const(P(a),1)])]))})):f instanceof J.Arr?d(J.Call(P(a),k,f.elements,h)):h?(b.addHelper("__new"),d(J.Call(P(a),J.Access(P(a),J.Ident(P(a),"__new"),J.Const(P(a),"apply")),[k,f]))):k instanceof J.Binary&&"."===k.op?b.maybeCache(k.left,W["function"],(e=!1,function(b,c){if(e)throw Error("Attempted to call function more than once");return e=!0,d(J.Call(P(a),J.Access(P(a),b,k.right,"apply"),[c,f]))})):d(J.Call(P(a),J.Access(P(a),k,"apply"),[J.Const(P(a),void 0),f]))}):(k=0===f.length?function(){return J.Const(P(a),void 0)}:m(f[0],b,"expression",null,e),i=l(P(a),D.call(f,1),b,!1,!0,e),function(){var b,c,e;return c=j(),e=k(),b=i(),b instanceof J.Arr?d(J.Call(P(a),J.Access(P(a),c,"call"),[e].concat(G(b.elements)))):d(J.Call(P(a),J.Access(P(a),c,"apply"),[e,b]))})},Comment:function(a){return function(){return J.Comment(P(a),a.text)}},Const:function(a,b,c,d){return function(){return d(J.Const(P(a),a.value))}},Continue:function(a,b){var c;return c=a.label&&m(a.label,b,"label"),function(){return J.Continue(P(a),"function"==typeof c?c():void 0)}},Debugger:function(a){return function(){return J.Debugger(P(a))}},Def:function(){throw Error("Cannot have a stray def")},EmbedWrite:function(a,b,c,d,e){var f;return f=m(a.text,b,"expression",null,e),function(){return J.Call(P(a),J.Ident(P(a),"write"),[f()].concat(a.escape?[J.Const(P(a),!0)]:[]))}},Eval:function(a,b,c,d,e){var f;return f=m(a.code,b,"expression",null,e),function(){return d(J.Eval(P(a),f()))}},For:function(a,b,c,d,e){var f,g,h,i,j;return h=a.label&&m(a.label,b,"label"),null!=a.init&&(g=m(a.init,b,"expression",null,e)),null!=a.test&&(j=m(a.test,b,"expression")),null!=a.step&&(i=m(a.step,b,"expression")),f=m(a.body,b,"statement"),function(){return J.For(P(a),"function"==typeof g?g():void 0,"function"==typeof j?j():void 0,"function"==typeof i?i():void 0,f(),"function"==typeof h?h():void 0)}},ForIn:function(a,b,c,d,e){var f,g,h,i;return h=a.label&&m(a.label,b,"label"),g=m(a.key,b,"leftExpression"),i=m(a.object,b,"expression",null,e),f=m(a.body,b,"statement"),function(){var c;if(c=g(),!(c instanceof J.Ident))throw Error("Expected an Ident for a for-in key");return b.addVariable(c,W.string),J.ForIn(P(a),c,i(),f(),"function"==typeof h?h():void 0)}},Function:function(){function a(a){if(!C.call(f,a.constructor.cappedName))throw Error("Unknown type: "+String(a.constructor.cappedName));return f[a.constructor.cappedName](a)}function b(a,b,c){var e;if(e=a.constructor.cappedName,!C.call(d,e))throw Error("Unknown parameter type: "+E(e));return d[e](a,b,c)}var c,d,e,f;return c={Boolean:"boolean",String:"string",Number:"number",Function:"function"},f={Ident:function(a){return C.call(c,a.name)?W[c[a.name]]:W.any},Access:function(){return W.any},TypeUnion:function(a){var b,d,e,f,g;for(f=W.none,b=G(a.types),d=0,e=b.length;e>d;++d)if(g=b[d],g instanceof T.Const)if(null===g.value)f=f.union(W["null"]);else{if(void 0!==g.value)throw Error("Unknown const value for typechecking: "+String(g.value));f=f.union(W.undefined)}else{if(!(g instanceof T.Ident))throw Error("Not implemented: typechecking for non-idents/consts within a type-union");f=f.union(C.call(c,g.name)?W[c[g.name]]:W.any)}return f},TypeFunction:function(){return W["function"]},TypeGeneric:function(b){return"Array"===b.basetype.name?a(b.args[0]).array():"Function"===b.basetype.name?W["function"]:W.any},TypeObject:function(b){var c,d,e,f,g,h,i;for(h={},c=G(b.pairs),d=0,e=c.length;e>d;++d)f=c[d],g=f.key,i=f.value,g instanceof T.Const&&(h[g.value]=a(i));return W.makeObject(h)}},d={Param:function(b,c){var d,e,f,g;if(d=m(b.ident,c,"param")(),e=[],d instanceof J.Binary&&"."===d.op&&d.right instanceof J.Const&&"string"==typeof d.right.value&&(f=J.Ident(d.pos,d.right.value),e.push(J.Binary(d.pos,d,"=",f)),d=f),!(d instanceof J.Ident))throw Error("Expecting param to be an Ident, got "+H(d));return b.asType&&(g=a(b.asType)),c.addVariable(d,g,b.isMutable),c.markAsParam(d),{init:e,ident:d,spread:!!b.spread}}},e=function(){var a;return a={Ident:function(){var a;return a={String:W.string,Number:W.number,Boolean:W.boolean,Function:W["function"],Array:W.array},function(b){if(!C.call(a,b.name))throw Error("Not implemented: custom type "+E(b.name));return a[b.name]}}(),Const:function(a){switch(a.value){case null:return W["null"];case void 0:return W.undefined;default:throw Error("Unexpected const type: "+String(a.value))}},TypeGeneric:function(a,b){var c,d,f,g,h,i,j;for(j=e(a.basetype,b),c=[],d=G(a.args),f=0,g=d.length;g>f;++f)h=d[f],c.push(e(h,b));return i=c,W.generic.apply(W,[j].concat(G(i)))},TypeUnion:function(a){var b,c,d,f,g;for(f=W.none,b=G(a.types),c=0,d=b.length;d>c;++c)g=b[c],f=f.union(e(g));return f}},function(b,c){if(!C.call(a,b.constructor.cappedName))throw Error("Unknown type to translate: "+String(b.constructor.cappedName));return a[b.constructor.cappedName](b,c)}}(),function(a,c,d,e){return function(){var d,f,g,h,i,j,k,l,n,p,q,r,s,t;for(k=c.clone(!!a.bound),r=k,a.generator&&!k.bound&&(k=k.clone(!0)),q=[],j=[],d=G(a.params),i=0,l=d.length;l>i;++i){if(n=d[i],p=b(n,k,!1),p.spread)throw Error("Encountered a spread parameter");q.push(p.ident),j.push.apply(j,G(p.init))}if(s={},f=o(P(a),a.generator,a.autoReturn,k,a.body,s),g=f.body,t=f.wrap,k.releaseTmps(),g=J.Block(P(a.body),G(j).concat([g])),(k.usedThis||a.bound instanceof T)&&(a.bound instanceof T?(h=J.Ident(P(a.body),"_this"),k.addVariable(h),g=J.Block(P(a.body),[J.Assign(P(a.body),h,m(a.bound,c,"expression",null,s)()),g,J.Return(P(a.body),h)])):(k.bound&&(c.usedThis=!0),!k.hasBound&&!a.generator||r.bound||(h=J.Ident(P(a.body),"_this"),k.addVariable(h),g=J.Block(P(a.body),[J.Assign(P(a.body),h,J.This(P(a.body))),g])))),a.curry)throw Error("Expected node to already be curried");return e(t(J.Func(P(a),null,q,k.getVariables(),g,[])))}}}(),Ident:function(a,b,c,d){var e;return e=a.name,b.addHelper(e),function(){var f;return f=J.Ident(P(a),e),!b.options.embedded||Q(e)||"expression"!==c||b.hasVariable(f)||b.macros.hasHelper(e)?d(f):J.Access(P(a),J.Ident(P(a),"context"),J.Const(P(a),e))}},If:function(a,b,c,d,e){var f,g,h,i,j;return f="statement"===c||"topStatement"===c?"statement":c,g=a.label&&m(a.label,b,"label"),h=m(a.test,b,"expression",null,e),j=m(a.whenTrue,b,f,d,e),null!=a.whenFalse&&(i=m(a.whenFalse,b,f,d,e)),function(){return J.If(P(a),h(),j(),"function"==typeof i?i():void 0,"function"==typeof g?g():void 0)}},Nothing:function(a){return function(){return J.Noop(P(a))}},Object:function(a,b,c,d,e){var f,g,h,i,j,k,l,n;for(k=[],n=[],j=[],f=G(a.pairs),g=0,h=f.length;h>g;++g)i=f[g],k.push(m(i.key,b,"expression",null,e)),n.push(m(i.value,b,"expression",null,e)),j.push(i.property);return null!=a.prototype&&(l=m(a.prototype,b,"expression",null,e)),function(){var c,e,f,g,h,i,m,o,p,q,r,s,t,u,v,w;for(e=[],q=[],"function"==typeof l&&(s=l()),g=null!=s?q:e,o=null,h=0,c=k.length;c>h;++h)u=k[h],v=n[h],m=u(),w=v(),r=j[h],m instanceof J.Const&&!r||(g=q),f=g[g.length-1],("get"===r||"set"===r)&&o&&r!==o&&m instanceof J.Const&&f.key instanceof J.Const&&m.value===f.key.value?(f[o]=f.value,f.property=E(o)+E(r),delete f.value,f[r]=w,o=null):(g.push({key:m,value:w,property:r}),("get"===r||"set"===r)&&(o=r));return null!=s?(b.addHelper("__create"),p=J.Call(P(a),J.Ident(P(a),"__create"),[s])):p=J.Obj(P(a),function(){var a,b,c,d,f,g;for(a=[],b=0,c=e.length;c>b;++b)d=e[b],f=d.key,g=d.value,a.push(J.Obj.Pair(f.pos,String(f.value),g));return a}()),0===q.length?d(p):(i=b.reserveIdent(P(a),"o",W.object),t=J.BlockExpression(P(a),[J.Assign(P(a),i,p)].concat(function(){var a,c,d,e,f,g;for(a=[],c=0,d=q.length;d>c;++c)f=q[c],e=f.key,g=f.property,g?(b.addHelper("__defProp"),a.push(J.Call(e.pos,J.Ident(e.pos,"__defProp"),[i,e,"property"===g?f.value:"getset"===g?J.Obj(f.get.pos,[J.Obj.Pair(f.get.pos,"get",f.get),J.Obj.Pair(f.set.pos,"set",f.set),J.Obj.Pair(f.set.pos,"configurable",J.Const(f.set.pos,!0)),J.Obj.Pair(f.set.pos,"enumerable",J.Const(f.set.pos,!0))]):"setget"===g?J.Obj(f.set.pos,[J.Obj.Pair(f.set.pos,"set",f.set),J.Obj.Pair(f.get.pos,"get",f.get),J.Obj.Pair(f.get.pos,"configurable",J.Const(f.get.pos,!0)),J.Obj.Pair(f.get.pos,"enumerable",J.Const(f.get.pos,!0))]):"get"===g?J.Obj(f.value.pos,[J.Obj.Pair(f.value.pos,"get",f.value),J.Obj.Pair(f.value.pos,"configurable",J.Const(f.value.pos,!0)),J.Obj.Pair(f.value.pos,"enumerable",J.Const(f.value.pos,!0))]):"set"===g?J.Obj(f.value.pos,[J.Obj.Pair(f.value.pos,"set",f.value),J.Obj.Pair(f.value.pos,"configurable",J.Const(f.value.pos,!0)),J.Obj.Pair(f.value.pos,"enumerable",J.Const(f.value.pos,!0))]):F(Error("Unknown property type: "+String(g)))]))):a.push(J.Assign(e.pos,J.Access(e.pos,i,e),f.value));return a}(),[i])),b.releaseIdent(i),d(t))}},Regexp:function(a,b,c,d,e){var f;return f=m(a.source,b,"expression",null,e),function(){var b,c;return c=f(),b=a.flags,c.isConst()?d(J.Regex(P(a),String(c.constValue()),b)):d(J.Call(P(a),J.Ident(P(a),"RegExp"),[c,J.Const(P(a),b)]))}},Return:function(a,b,c,d,e){var f;if("statement"!==c&&"topStatement"!==c)throw Error("Expected Return in statement position");return f=m(a.node,b,"expression",null,e),function(){return J.Return(P(a),f())}},Switch:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o;for(n=a.label&&m(a.label,b,"label"),o=m(a.node,b,"expression",null,e),f=[],g=G(a.cases),h=0,i=g.length;i>h;++h)j=g[h],f.push({pos:P(j.node),tNode:m(j.node,b,"expression",null,e),tBody:m(j.body,b,"statement",null,e),fallthrough:j.fallthrough});return k=f,null!=a.defaultCase&&(l=m(a.defaultCase,b,"statement",null,e)),function(){return J.Switch(P(a),o(),function(){var a,b,c,e,f,g;for(a=[],f=0,g=k.length;g>f;++f)b=k[f],e=b.tNode(),c=b.tBody(),(!b.fallthrough||f===g-1&&defaultCase.isNoop())&&(c=J.Block(b.pos,[d(c),J.Break(c.pos)])),a.push(J.Switch.Case(b.pos,e,c));return a}(),null!=l?d(l()):J.Noop(P(a)),"function"==typeof n?n():void 0)}},Super:function(){throw Error("Cannot have a stray super call")},Tmp:function(a,b,c,d){var e;return e=b.getTmp(P(a),a.id,a.name,a.type()),function(){return d(e)}},TmpWrapper:function(a,b,c,d,e){var f,g,h,i;for(i=m(a.node,b,c,d,e),f=G(a.tmps),g=f.length;g--;)h=f[g],b.releaseTmp(h);return i},This:function(a,b,c,d){return function(){return b.usedThis=!0,d(b.bound?J.Ident(P(a),"_this"):J.This(P(a)))}},Throw:function(a,b,c,d,e){var f;return f=m(a.node,b,"expression",null,e),function(){return J.Throw(P(a),f())}},TryCatch:function(a,b,c,d,e){var f,g,h,i,j;return i=a.label&&m(a.label,b,"label"),j=m(a.tryBody,b,"statement",d,e),f=b.clone(!1),h=m(a.catchIdent,f,"leftExpression"),g=m(a.catchBody,f,"statement",d,e),function(){var c,d;return c=h(),c instanceof J.Ident&&(f.addVariable(c),f.markAsParam(c)),d=J.TryCatch(P(a),j(),c,g(),"function"==typeof i?i():void 0),w(b.variables,f.variables),d}},TryFinally:function(a,b,c,d,e){var f,g,h;return g=a.label&&m(a.label,b,"label"),h=m(a.tryBody,b,"statement",d,e),f=m(a.finallyBody,b,"statement",null,e),function(){return J.TryFinally(P(a),h(),f(),"function"==typeof g?g():void 0)}},Unary:function(a,b,c,d,e){var f,g;return e&&("++"===(f=a.op)||"--"===f||"++post"===f||"--post"===f)&&a.node instanceof T.Ident&&(e[a.node.name]=!1),g=m(a.node,b,"expression",null,e),function(){return d(J.Unary(P(a),a.op,g()))}},Var:function(a,b,c,d,e){var f;return e&&a.ident instanceof T.Ident&&!C.call(e,a.ident.name)&&(e[a.ident.name]=!0),f=m(a.ident,b,"leftExpression",d),function(){var c;return c=f(),b.addVariable(c,W.any,a.isMutable),J.Noop(P(a))}}},a.exports=function(a,b,c,d){var e,f,g,h;if(!(b instanceof R))throw TypeError("Expected macros to be a "+A(R)+", got "+H(b));if("function"!=typeof c&&!y(c))throw TypeError("Expected getPosition to be one of Function or Array, got "+H(c));null==d&&(d={}),h=(new Date).getTime();try{g=U(d,b,!1),f=q(a,g,c),g.releaseTmps()}catch(i){if("undefined"!=typeof callback&&null!==callback)return callback(i);throw i}return e=(new Date).getTime(),"function"==typeof d.progress&&d.progress("translate",B(e)-B(h)),{node:f,time:B(e)-B(h)}},a.exports.defineHelper=function(a,b,c,d,e,f){var g,h,i;if(!(a instanceof R))throw TypeError("Expected macros to be a "+A(R)+", got "+H(a));if("function"!=typeof b)throw TypeError("Expected getPosition to be a Function, got "+H(b));if(!(e instanceof W))throw TypeError("Expected type to be a "+A(W)+", got "+H(e));if(i=U({},a,!1),P=p(b),"string"==typeof c)h=J.Ident(j(0,0),c);else{if(!(c instanceof T.Ident))throw TypeError("Expecting name to be a String or Ident, got "+H(c));h=m(c,i,"leftExpression")()}if(!(h instanceof J.Ident))throw Error("Expected name to be an Ident, got "+H(h));if(d instanceof K)g=d;else{if(!(d instanceof T))throw TypeError("Expected value to be a parser or ast Node, got "+H(d));g=m(d,i,"expression")()}return null==f&&(f=i.getHelpers()),a.addHelper(h.name,g,e,f),P=null,{helper:g,dependencies:f}}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b["./gorilla"]=function(){var a={exports:this},c=this;return function(a){"use strict";function d(a){var b,c,d,e,f;for(e={parseTime:0,macroExpandTime:0,reduceTime:0,macros:a[0].macros,result:[]},b=s(a),c=0,d=b.length;d>c;++c)f=b[c],e.parseTime+=m(f.parseTime),e.macroExpandTime+=m(f.macroExpandTime),e.reduceTime+=m(f.reduceTime),e.result.push(f.result);return e}function e(c,d){var e,f,g,h,i,j,k,l,m,o,p,q,s;if("function"==typeof b&&null!=(i=b("vm"))&&(q=i.Script),q){if(p=q.createContext(),p.global=p.root=p.GLOBAL=p,null!=d.sandbox)if(d.sandbox instanceof p.constructor)p=d.sandbox;else{h=d.sandbox;for(l in h)n.call(h,l)&&(s=h[l],p[l]=s)}else for(l in a)n.call(a,l)&&(s=a[l],p[l]=s);if(p.__filename=d.filename||"eval",p.__dirname=B.dirname(p.__filename),!p.module&&!p.require)for(m=b("module"),g=p.module=new m(d.modulename||"eval"),j=p.require=function(a){return m._load(a,g)},g.filename=p.__filename,e=Object.getOwnPropertyNames(b),f=e.length;f--;){o=e[f];try{j[o]=b[o]}catch(t){}}if(d.includeGlobals)for(l in a)!n.call(a,l)||l in p||(p[l]=a[l]);return q.runInContext(c,p)}return k=Function("return "+r(c)),k()}var f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;f=function(){function a(){function b(a,b){var f;c&&(f=c,c=null,d=a,e=b,f.length&&D(function(){var a,b;for(b=0,a=f.length;a>b;++b)f[b]()}))}var c,d,e;return d=!1,e=null,c=[],{promise:{then:function(b,f,g){function h(){var a,c;try{a=d?f:b,"function"==typeof a?(c=a(e),c&&"function"==typeof c.then?c.then(j,l,g):j(c)):(d?l:j)(e)}catch(h){l(h)}}var i,j,k,l;return g!==!0&&(g=void 0),i=a(),k=i.promise,j=i.fulfill,l=i.reject,c?c.push(h):g?h():D(h),k},sync:function(){var a,b;switch(b=0,a=0,this.then(function(c){return b=1,a=c},function(c){return b=2,a=c},!0),b){case 0:throw Error("Promise did not execute synchronously");case 1:return a;case 2:throw a;default:throw Error("Unknown state")
}}},fulfill:function(a){b(!1,a)},reject:function(a){b(!0,a)}}}return a.fulfilled=function(b){var c;return c=a(),c.fulfill(b),c.promise},a.rejected=function(b){var c;return c=a(),c.reject(b),c.promise},a}(),g=function(a){function b(a,b){return b.then(function(b){i[a]=b,0===--h&&c.fulfill(i)},c.reject)}var c,d,e,g,h,i,j;if("object"!=typeof a||null===a)throw TypeError("Expected promises to be an Object, got "+u(a));if(e=k(a),c=f(),i=e?[]:{},h=0,e)for(d=a.length,h=d;d--;)b(d,a[d]);else for(g in a)n.call(a,g)&&(j=a[g],++h,b(g,j));return c.promise},h=function(a,b){function c(c,g){var h;try{h=a[c](g)}catch(i){return f.rejected(i)}return h.done?f.fulfilled(h.value):h.value.then(d,e,b)}function d(a){return c("send",a)}function e(a){return c("throw",a)}if("object"!=typeof a||null===a)throw TypeError("Expected generator to be an Object, got "+u(a));if("function"!=typeof a.send)throw TypeError("Expected generator.send to be a Function, got "+u(a.send));if("function"!=typeof a["throw"])throw TypeError("Expected generator.throw to be a Function, got "+u(a["throw"]));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+u(b));return d(void 0)},j=function(a,b){var c;for(c in b)n.call(b,c)&&(a[c]=b[c]);return a},k="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),l=function(a,b){var c;if(c=typeof a,"number"!==c&&"string"!==c)throw TypeError("Cannot compare a non-number/string: "+c);if(c!==typeof b)throw TypeError("Cannot compare elements of different types: "+c+" vs "+typeof b);return b>=a},m=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+u(a));return a},n=Object.prototype.hasOwnProperty,o=function(a,b){var c;if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected allowSync to be a Boolean, got "+u(b));return"function"==typeof a?(c=function(){return h(a.apply(this,arguments))},c.sync=function(){return h(a.apply(this,arguments),!0).sync()},c):h(a,b)},p=function(a,b,c){function d(a){return++k,c(a).then(function(b){return j[a]=b,--k,e()},function(a){return h=!0,g.reject(a)})}function e(){for(;!h&&a>k&&b>i;++i)d(i);return!h&&i>=b&&0===k?(h=!0,g.fulfill(j)):void 0}var g,h,i,j,k;if("number"!=typeof a)throw TypeError("Expected limit to be a Number, got "+u(a));if("number"!=typeof b)throw TypeError("Expected length to be a Number, got "+u(b));if("function"!=typeof c)throw TypeError("Expected body to be a Function, got "+u(c));return(1>a||a!==a)&&(a=1/0),j=[],h=!1,k=0,g=f(),i=0,D(e),g.promise},q=Array.prototype.slice,r=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+u(a))},s=function(a){if(null==a)throw TypeError("Expected an object, got "+u(a));return k(a)?a:"string"==typeof a?a.split(""):q.call(a)},t=function(a,b,c){var d;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+u(a));return d=f(),a.apply(b,s(c).concat([function(a,b){null!=a?d.reject(a):d.fulfill(b)}])),d.promise},u=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),D="function"==typeof a.setImmediate?a.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var a;return a=process.nextTick,function(b){var c;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+u(b));return c=q.call(arguments,1),c.length?a(function(){b.apply(void 0,s(c))}):a(b)}}():function(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+u(a));return b=q.call(arguments,1),b.length?setTimeout(function(){a.apply(void 0,s(b))},0):setTimeout(a,0)},A=b("./parser"),z=b("os"),x=b("fs"),B=b("path"),E=b("./source-map"),v=b("./utils"),F=v.writeFileWithMkdirp,G=v.writeFileWithMkdirpSync,c.version="0.7.24",c.ParserError=A.ParserError,c.MacroError=A.MacroError,b.extensions?b.extensions[".gs"]=function(a,b){var d;return d=c.compileSync(x.readFileSync(b,"utf8"),{filename:b}),a._compile(d.code,b)}:b.registerExtension&&b.registerExtension(".gs",function(a){return c.compileSync(a,{filename:filename})}),"undefined"!=typeof __filename&&null!==__filename&&(C=x.realpathSync(__filename)),w=function(){function a(a,b){var c,d;if("string"!=typeof a)throw TypeError("Expected lang to be a String, got "+u(a));if(null==b)b=!1;else if("boolean"!=typeof b)throw TypeError("Expected sync to be a Boolean, got "+u(b));return n.call(e,a)&&(d=e[a]),null!=d?b?d:f.fulfilled(d):b?h.sync(a,!0):null==(c=g[a])?g[a]=h(a):c}var b,d,e,g,h;return e={},null!=C&&(d=function(a){return B.join(B.dirname(C),"../src/"+r(a)+"prelude.gs")}),null!=z&&(b=function(a){return B.join(z.tmpDir(),"gs-"+r(a)+"prelude-"+r(c.version)+".cache")}),g={},h=o(function(a,c){function f(){k=30}function h(f){for(;;)switch(k){case 0:if("string"!=typeof a)throw TypeError("Expected lang to be a String, got "+u(a));v=d(a),k=c?1:2;break;case 1:w=x.statSync(v),k=4;break;case 2:return++k,{done:!1,value:t(x.stat,x,[v])};case 3:w=f,++k;case 4:r=b(a),s=void 0,++k;case 5:k=c?6:7;break;case 6:s=x.statSync(r),k=10;break;case 7:return++k,{done:!1,value:t(x.stat,x,[r])};case 8:s=f,k=10;break;case 9:if("ENOENT"!==h.code)throw h;++k;case 10:p=void 0,k=s&&l(w.mtime.getTime(),s.mtime.getTime())?11:19;break;case 11:k=c?12:13;break;case 12:m=x.readFileSync(r,"utf8"),k=15;break;case 13:return++k,{done:!1,value:t(x.readFile,x,[r,"utf8"])};case 14:m=f,++k;case 15:o=!1;try{p=e[a]=A.deserializePrelude(m)}catch(h){if(h instanceof ReferenceError)throw h;console.error("Error deserializing prelude, reloading. "+String(h)),o=!0}k=o?16:19;break;case 16:k=c?17:18;break;case 17:x.unlinkSync(r),k=19;break;case 18:return++k,{done:!1,value:t(x.unlink,x,[r])};case 19:k=null==p?20:29;break;case 20:k=c?21:22;break;case 21:q=x.readFileSync(v,"utf8"),k=24;break;case 22:return++k,{done:!1,value:t(x.readFile,x,[v,"utf8"])};case 23:q=f,++k;case 24:k=c?25:26;break;case 25:p=e[a]=A.sync(q,null,{serializeMacros:!0,sync:!0}),k=28;break;case 26:return++k,{done:!1,value:A(q,null,{serializeMacros:!0})};case 27:e[a]=f,p=e[a],++k;case 28:F(r,p.macros.serialize(),"utf8"),++k;case 29:return delete g[a],++k,{done:!0,value:p};case 30:return{done:!0,value:void 0};default:throw Error("Unknown state: "+k)}}function i(a){if(!(k>=5&&8>=k))throw f(),a;n=a,k=9}function j(a){for(;;)try{return h(a)}catch(b){i(b)}}var j,k,h,i,m,n,o,p,q,r,s,v,w;return k=0,{close:f,iterator:function(){return this},next:function(){return j(void 0)},send:j,"throw":function(a){return i(a),j(void 0)}}}),a.serialized=o(function(c){function d(){h=3}function e(d){for(;;)switch(h){case 0:if("string"!=typeof c)throw TypeError("Expected lang to be a String, got "+u(c));return++h,{done:!1,value:a(c)};case 1:return++h,{done:!1,value:t(x.readFile,x,[b(c),"utf8"])};case 2:return++h,{done:!0,value:d};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+h)}}function f(a){throw d(),a}function g(a){try{return e(a)}catch(b){f(b)}}var g,h,e,f;return h=0,{close:d,iterator:function(){return this},next:function(){return g(void 0)},send:g,"throw":function(a){return f(a),g(void 0)}}}),c.withPrelude=function(a,b){if("string"!=typeof a)throw TypeError("Expected lang to be a String, got "+u(a));if("object"!=typeof b||null===b)throw TypeError("Expected serializedPrelude to be an Object, got "+u(b));return e[a]=A.deserializePrelude(b),this},a}(),c.getSerializedPrelude=w.serialized,c.parse=o(function(a,b){function c(){g=12}function d(c){for(;;)switch(g){case 0:null==b&&(b={}),k=b.sync,g=b.macros?1:2;break;case 1:i=b.macros,g=8;break;case 2:g=b.noPrelude?3:4;break;case 3:i=null,g=8;break;case 4:g=k?5:6;break;case 5:i=w(b.lang||"js",!0).macros,g=8;break;case 6:return++g,{done:!1,value:w(b.lang||"js")};case 7:h=c,i=h.macros,++g;case 8:j={filename:b.filename,noindent:!!b.noindent,sync:!!b.sync,progress:b.progress},b.embedded&&(j.embedded=!!b.embedded,j.embeddedUnpretty=!!b.embeddedUnpretty,j.embeddedGenerator=!!b.embeddedGenerator,j.embeddedOpen=b.embeddedOpen,j.embeddedClose=b.embeddedClose,j.embeddedOpenWrite=b.embeddedOpenWrite,j.embeddedCloseWrite=b.embeddedCloseWrite,j.embeddedOpenComment=b.embeddedOpenComment,j.embeddedCloseComment=b.embeddedCloseComment),g=k?9:10;break;case 9:return g=12,{done:!0,value:A.sync(a,i,j)};case 10:return++g,{done:!1,value:A(a,i,j)};case 11:return++g,{done:!0,value:c};case 12:return{done:!0,value:void 0};default:throw Error("Unknown state: "+g)}}function e(a){throw c(),a}function f(a){try{return d(a)}catch(b){e(b)}}var f,g,d,e,h,i,j,k;return g=0,{close:c,iterator:function(){return this},next:function(){return f(void 0)},send:f,"throw":function(a){return e(a),f(void 0)}}}),c.parseSync=function(a,b){var d;return null==b&&(b={}),c.parse.sync(a,((d=j({},b)).sync=!0,d))},c.getReservedWords=function(a){return null==a&&(a={}),a.noPrelude?A.getReservedWords(null,a):A.getReservedWords(w(a.lang||"js",!0).macros,a)},c.ast=o(function(a,e){function f(){q=15}function g(f){for(;;)switch(q){case 0:null==e&&(e={}),z=(new Date).getTime(),A=e.sync,C="function"==typeof e.translator?e.translator:b("string"==typeof e.translator?e.translator:"./jstranslator"),q=k(a)?1:10;break;case 1:t=[],w=e.progress,y={parse:0,macroExpand:0,reduce:0},"function"==typeof w&&(e.progress=function(a,b){return y[a]=m(y[a])+m(b)}),l=s(a),o=0,p=l.length,++q;case 2:q=p>o?3:9;break;case 3:u=l[o],k(e.filenames)&&(e.filename=e.filenames[i]),n=[],q=A?4:5;break;case 4:r=c.parseSync(u,e),q=7;break;case 5:return++q,{done:!1,value:c.parse(u,e)};case 6:r=f,++q;case 7:n.push(r),t.push.apply(t,n),++q;case 8:++o,q=2;break;case 9:if(e.progress=w,"function"==typeof w)for(l=["parse","macroExpand","reduce"],o=0,p=l.length;p>o;++o)v=l[o],e.progress(v,y[v]);x=d(t),q=14;break;case 10:q=A?11:12;break;case 11:x=c.parseSync(a,e),q=14;break;case 12:return++q,{done:!1,value:c.parse(a,e)};case 13:x=f,++q;case 14:return B=C(x.result,x.macros,x.getPosition,e),++q,{done:!0,value:{node:B.node,parseTime:x.parseTime,macroExpandTime:x.macroExpandTime,reduceTime:x.reduceTime,translateTime:B.time,time:m((new Date).getTime())-m(z)}};case 15:return{done:!0,value:void 0};default:throw Error("Unknown state: "+q)}}function h(a){throw f(),a}function j(a){try{return g(a)}catch(b){h(b)}}var l,n,o,p,j,q,g,h,r,t,u,v,w,x,y,z,A,B,C;return q=0,{close:f,iterator:function(){return this},next:function(){return j(void 0)},send:j,"throw":function(a){return h(a),j(void 0)}}}),c.astSync=function(a,b){var d;return null==b&&(b={}),c.ast.sync(a,((d=j({},b)).sync=!0,d))},c.compile=o(function(a,b){function d(){h=5}function e(d){for(;;)switch(h){case 0:null==b&&(b={}),k=b.sync,j=(new Date).getTime(),h=k?1:2;break;case 1:l=c.astSync(a,b),h=4;break;case 2:return++h,{done:!1,value:c.ast(a,b)};case 3:l=d,++h;case 4:return i=l.node.compile(b),++h,{done:!0,value:{parseTime:l.parseTime,macroExpandTime:l.macroExpandTime,reduceTime:l.reduceTime,translateTime:l.translateTime,compileTime:i.compileTime,uglifyTime:i.uglifyTime,time:m((new Date).getTime())-m(j),code:i.code}};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+h)}}function f(a){throw d(),a}function g(a){try{return e(a)}catch(b){f(b)}}var g,h,e,f,i,j,k,l;return h=0,{close:d,iterator:function(){return this},next:function(){return g(void 0)},send:g,"throw":function(a){return f(a),g(void 0)}}}),c.compileSync=function(a,b){var d;return null==b&&(b={}),c.compile.sync(a,((d=j({},b)).sync=!0,d))},c.compileFile=o(function(a){function d(){v=20}function e(d){for(;;)switch(v){case 0:if(null==a&&(a={}),a=j({},a),R=a.sync,D=a.input,"string"==typeof D)D=[D];else{if(!k(D))throw Error("Expected options.input to be a string or array of strings");if(0===D.length)throw Error("Expected options.input to not be empty")}if(K=a.output,"string"!=typeof K)throw Error("Expected options.output to be a string, got "+u(K));if(O=void 0,a.sourceMap)if("string"==typeof a.sourceMap)O=a.sourceMap,a.sourceMap=E(a.output,"");else{if("string"!=typeof a.sourceMap.file)throw Error("Expected options.sourceMap.file to be a string, got "+u(a.sourceMap.file));if("string"!=typeof a.sourceMap.sourceRoot)throw Error("Expected options.sourceMap.sourceRoot to be a string, got "+u(a.sourceMap.sourceRoot));O=a.sourceMap.file,a.sourceMap=E(a.output,a.sourceMap.sourceRoot)}else a.sourceMap=null;P=[],v=R?1:2;break;case 1:for(i=s(D),n=0,q=i.length;q>n;++n)C=i[n],P.push(x.readFileSync(C,"utf8"));v=4;break;case 2:return++v,{done:!1,value:p(5,m(D.length),o(function(a){function b(){f=2}function c(b){for(;;)switch(f){case 0:return g=D[a],++f,{done:!1,value:t(x.readFile,x,[g,"utf8"])};case 1:return++f,{done:!0,value:b};case 2:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function d(a){throw b(),a}function e(a){try{return c(a)}catch(b){d(b)}}var e,f,c,d,g;return f=0,{close:b,iterator:function(){return this},next:function(){return e(void 0)},send:e,"throw":function(a){return d(a),e(void 0)}}}))};case 3:P=d,++v;case 4:J=P.length>0&&a.progress,M={parse:0,macroExpand:0,reduce:0},"function"==typeof J&&(a.progress=function(a,b){return M[a]=m(M[a])+m(b)}),i=[],A=0,q=P.length,++v;case 5:v=q>A?6:11;break;case 6:N=P[A],Q=Date.now(),a.filename=D[A],v=R?7:8;break;case 7:i.push(c.parseSync(N,a)),v=10;break;case 8:return l=[],++v,{done:!1,value:c.parse(N,a)};case 9:l.push(d),i.push.apply(i,l),++v;case 10:++A,v=5;break;case 11:if(L=i,"function"==typeof J)for(a.progress=J,i=["parse","macroExpand","reduce"],n=0,q=i.length;q>n;++n)I=i[n],a.progress(I,M[I]);a.filenames=D,T=b("./jstranslator"),S=T(function(){var a,b,c,d;for(a=[],b=0,c=L.length;c>b;++b)d=L[b],a.push(d.result);return a}(),L[0].macros,function(){var a,b,c,d;for(a=[],b=0,c=L.length;c>b;++b)d=L[b],a.push(d.getPosition);return a}(),a),y=S.node.compile(a),v=R?13:12;break;case 12:return++v,{done:!1,value:f.fulfilled()};case 13:w=y.code,O&&(H=a.linefeed||"\n",z=r(H)+"/*"+r(H)+"//@ sourceMappingURL="+r(B.relative(B.dirname(a.output),O))+r(H)+"*/"+r(H),w=r(w)+z),v=R?14:15;break;case 14:G(a.output,w,a.encoding||"utf8"),v=16;break;case 15:return++v,{done:!1,value:F(a.output,w,a.encoding||"utf8")};case 16:v=O?17:20;break;case 17:v=R?18:19;break;case 18:G(O,a.sourceMap.toString(),"utf8"),v=20;break;case 19:return++v,{done:!1,value:F(O,a.sourceMap.toString(),"utf8")};case 20:return{done:!0,value:void 0};default:throw Error("Unknown state: "+v)}}function g(a){throw d(),a}function h(a){try{return e(a)}catch(b){g(b)}}var i,l,n,q,h,v,e,g,w,y,z,A,C,D,H,I,J,K,L,M,N,O,P,Q,R,S,T;return v=0,{close:d,iterator:function(){return this},next:function(){return h(void 0)},send:h,"throw":function(a){return g(a),h(void 0)}}}),c.compileFileSync=function(a){var b;return null==a&&(a={}),c.compileFile.sync(((b=j({},a)).sync=!0,b))},c.eval=o(function(a,b){function d(){i=5}function f(d){for(;;)switch(i){case 0:null==b&&(b={}),n=b.sync,b.eval=!0,b["return"]=!1,i=n?1:2;break;case 1:j=c.compileSync(a,b),i=4;break;case 2:return++i,{done:!1,value:c.compile(a,b)};case 3:j=d,++i;case 4:return l=(new Date).getTime(),k=e(j.code,b),"function"==typeof b.progress&&b.progress("eval",m((new Date).getTime())-m(l)),++i,{done:!0,value:k};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function g(a){throw d(),a}function h(a){try{return f(a)}catch(b){g(b)}}var h,i,f,g,j,k,l,n;return i=0,{close:d,iterator:function(){return this},next:function(){return h(void 0)},send:h,"throw":function(a){return g(a),h(void 0)}}}),c.evalSync=function(a,b){var d;return null==b&&(b={}),c.eval.sync(a,((d=j({},b)).sync=!0,d))},c.run=o(function(a,d){function e(){i=12}function f(e){for(;;)switch(i){case 0:null==d&&(d={}),m=d.sync,i="undefined"==typeof process?1:5;break;case 1:i=m?2:3;break;case 2:return i=12,{done:!0,value:c.evalSync(a,d)};case 3:return++i,{done:!1,value:c.eval(a,d)};case 4:return i=12,{done:!0,value:e};case 5:k=b.main,k.filename=process.argv[1]=d.filename?x.realpathSync(d.filename):".",k.moduleCache&&(k.moduleCache={}),process.binding("natives").module&&(l=b("module").Module,k.paths=l._nodeModulePaths(B.dirname(d.filename))),i=".gs"!==B.extname(k.filename)||b.extensions?6:11;break;case 6:i=m?7:8;break;case 7:j=c.compileSync(a,d),i=10;break;case 8:return++i,{done:!1,value:c.compile(a,d)};case 9:j=e,++i;case 10:return i=12,{done:!0,value:k._compile(j.code,k.filename)};case 11:return++i,{done:!0,value:k._compile(a,k.filename)};case 12:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function g(a){throw e(),a}function h(a){try{return f(a)}catch(b){g(b)}}var h,i,f,g,j,k,l,m;return i=0,{close:e,iterator:function(){return this},next:function(){return h(void 0)},send:h,"throw":function(a){return g(a),h(void 0)}}}),c.runSync=function(a,b){var d;return null==b&&(b={}),c.run.sync(a,((d=j({},b)).sync=!0,d))},y=c.init=o(function(a){function b(){f=4}function c(b){for(;;)switch(f){case 0:null==a&&(a={}),f=a.sync?1:2;break;case 1:return f=4,{done:!0,value:w(a.lang||"js",!0)};case 2:return++f,{done:!1,value:w(a.lang||"js")};case 3:return++f,{done:!0,value:b};case 4:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function d(a){throw b(),a}function e(a){try{return c(a)}catch(b){d(b)}}var e,f,c,d;return f=0,{close:b,iterator:function(){return this},next:function(){return e(void 0)},send:e,"throw":function(a){return d(a),e(void 0)}}}),c.initSync=function(a){var b;null==a&&(a={}),y.sync(((b=j({},a)).sync=!0,b))},c.getMtime=o(function(){function a(){k=6}function b(a){for(;;)switch(k){case 0:return n=[],n.push(B.join(B.dirname(C),"../src/jsprelude.gs")),q=B.join(B.dirname(C),"../lib"),++k,{done:!1,value:t(x.readdir,x,[q])};case 1:for(u=a,e=s(u),h=0,i=e.length;i>h;++h)r=e[h],".js"===B.extname(r)&&n.push(B.join(q,r));p=g(function(){var a,b,c,d;for(a=[],b=0,c=n.length;c>b;++b)d=n[b],a.push(t(x.stat,x,[d]));return a}()),++k;case 2:return++k,{done:!1,value:p};case 3:o=a,k=5;break;case 4:return k=6,{done:!0,value:new Date};case 5:for(l=-4503599627370496,e=s(o),h=0,i=e.length;i>h;++h)v=e[h],l=l>m(j=v.mtime.getTime())?l:j;return w=l,++k,{done:!0,value:new Date(w)};case 6:return{done:!0,value:void 0};default:throw Error("Unknown state: "+k)}}function c(b){if(2!==k&&3!==k)throw a(),b;f=b,k=4}function d(a){for(;;)try{return b(a)}catch(d){c(d)}}var e,f,h,i,j,d,k,b,c,l,n,o,p,q,r,u,v,w;return k=0,{close:a,iterator:function(){return this},next:function(){return d(void 0)},send:d,"throw":function(a){return c(a),d(void 0)}}})}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b["./browser"]=function(){var a={exports:this};return function(a){"use strict";var c,d,e,f,g,h,i,j,k,l,m;c=function(a,b,c,d,e){function f(a,b){k||(--n,null!=a&&null==i&&(i=a),c&&null==i&&arguments.length>1&&m.push(b),o||h())}function h(){for(;!k&&null==i&&a>n&&++l<b;)++n,o=!0,d(l,g(f)),o=!1;k||null==i&&0!==n||(k=!0,null!=i?e(i):e(null,m))}var i,k,l,m,n,o;if("number"!=typeof a)throw TypeError("Expected limit to be a Number, got "+j(a));if("number"!=typeof b)throw TypeError("Expected length to be a Number, got "+j(b));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected hasResult to be a Boolean, got "+j(c));if("function"!=typeof d)throw TypeError("Expected onValue to be a Function, got "+j(d));if("function"!=typeof e)throw TypeError("Expected onComplete to be a Function, got "+j(e));return m=c?[]:null,0>=b?e(null,m):((1>a||a!==a)&&(a=1/0),i=null,n=0,o=!1,k=!1,l=-1,h(),void 0)},d=function(a){if("object"!=typeof a||null===a)throw TypeError("Expected promise to be an Object, got "+j(a));if("function"!=typeof a.then)throw TypeError("Expected promise.then to be a Function, got "+j(a.then));return function(b){a.then(function(a){return m(b,null,a)},function(a){return m(b,a)})}},e="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),f=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+j(a));return a},g=function(){function a(){throw Error("Attempted to call function more than once")}function b(){}return function(c,d){if("function"!=typeof c)throw TypeError("Expected func to be a Function, got "+j(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected silentFail to be a Boolean, got "+j(d));return function(){var e;return e=c,c=d?b:a,e.apply(this,arguments)}}}(),h=Array.prototype.slice,i=function(a){if(null==a)throw TypeError("Expected an object, got "+j(a));return e(a)?a:"string"==typeof a?a.split(""):h.call(a)},j=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),m="function"==typeof a.setImmediate?a.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var a;return a=process.nextTick,function(b){var c;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+j(b));return c=h.call(arguments,1),c.length?a(function(){b.apply(void 0,i(c))}):a(b)}}():function(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+j(a));return b=h.call(arguments,1),b.length?setTimeout(function(){a.apply(void 0,i(b))},0):setTimeout(a,0)},k=b("./gorilla"),k.require=b,"undefined"!=typeof window&&null!==window&&(k.load=function(a,b){var c;if("string"!=typeof a)throw TypeError("Expected url to be a String, got "+j(a));if("function"!=typeof b)throw TypeError("Expected callback to be a Function, got "+j(b));if(window.ActiveXObject)c=new window.ActiveXObject("Microsoft.XMLHTTP");else{if(!XMLHttpRequest)throw Error("Unable to create XMLHttpRequest");c=new XMLHttpRequest}return c.open("GET",a,!0),"function"==typeof c.overrideMimeType&&c.overrideMimeType("text/plain"),c.onreadystatechange=function(){var e;return 4===c.readyState?0===(e=c.status)||200===e?d(k.run(c.responseText))(b):b(Error("Could not load "+a)):void 0},c.send(null)},l=function(){var a;return a=document.getElementsByTagName("script"),c(1,f(a.length),!1,function(b,c){var d;return d=a[b],"text/gorillascript"===d.type?d.src?k.load(d.src,c):(k.runSync(d.innerHTML),c()):c()},function(){})},window.addEventListener?addEventListener("DOMContentLoaded",l,!1):attachEvent("onload",l))}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),a.exports},b("./browser"),b("./gorilla").withPrelude("js",{consts:{"true":!0,"false":!1,"null":null,"void":{type:"void"},undefined:{type:"void"},Infinity:{type:"Infinity"},NaN:{type:"NaN"}},syntax:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;body=macroData.body;return __node("Call",200,__node("Function",203,[],__wrap(body),true,true,false,void 0,false,[]),[],false,false);};}.call(this));',params:[["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:0},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["debugger"]();};}.call(this));',params:[["const",""]],names:"debugger",id:14},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var func,ident,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;ident=macroData.ident;func=macroData.func;if(this.isPrimordial(ident)){this.error(["Cannot declare primordial \'",this.name(ident),"\'"].join(""),ident);}this["let"](ident,false,this.type(func));return this.block([this["var"](ident,false),this.assign(ident,"=",func)]);};}.call(this));',params:[["ident","ident","ident","Identifier"],["ident","func","ident","FunctionDeclaration"]],names:"let",id:15},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){return i>=0&&f(dec(i),_this["if"](elseIfs[i].test,elseIfs[i].body,current))||current;};return this["if"](macroName==="unless"&&__node("MacroAccess",2855,3,90,{op:"not",node:__wrap(test)},"expression",false,false,false)||test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["const","then"],["ident","body"],["ident","elseIfs","many","*","sequence",["const","else"],["const","if"],["ident","test","ident","Logic"],["const","then"],["ident","body"]],["ident","elseBody","many","?","sequence",["const","else"],["this"]]],names:["if","unless"],id:16},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){if(i>=0){return f(dec(i),_this["if"](elseIfs[i].type==="unless"?__node("MacroAccess",3327,3,95,{op:"not",node:__wrap(elseIfs[i].test)},"expression",false,false,false):elseIfs[i].test,elseIfs[i].body,current));}else{return current;}};return this["if"](macroName==="unless"?__node("MacroAccess",3460,3,96,{op:"not",node:__wrap(test)},"expression",false,false,false):test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["if","unless"],id:17},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){this.error("continue can only be used in a statement position");}return this["continue"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"continue",id:18},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){this.error("break can only be used in a statement position");}return this["break"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"break",id:19},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,_this,declarable,handle,handleItem,macroData,macroName,numRealElements,value;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;declarable=macroData.declarable;value=macroData.value;function inc(x){return x + 1;};declarable=this.macroExpand1(declarable);if(!declarable){this.error("Unknown declarable: "+String(declarable));}if(declarable.type==="ident"){if(this.isPrimordial(declarable.ident)){this.error("Cannot declare primordial \'"+this.name(declarable.ident)+"\'",declarable.ident);}this["let"](declarable.ident,declarable.isMutable,declarable.asType?this.toType(declarable.asType):this.type(value));return this.block([this["var"](declarable.ident,declarable.isMutable),this.mutateLast(value||this.noop(),function(n){return _this.assign(declarable.ident,"=",n);},true)]);}else if(declarable.type==="array"){numRealElements=function(i,acc){if(i<declarable.elements.length){return numRealElements(inc(i),declarable.elements[i]?inc(acc):acc);}else{return acc;}};if(numRealElements(0,0)<=1){handleItem=function(element,index){return _this.macroExpand1(__node("MacroAccess",8064,38,219,{macroName:"let",macroData:{declarable:__node("MacroAccess",8068,37,219,__node("MacroAccess",8068,31,219,{ident:__wrap(element)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",8079,__wrap(value),__wrap(index))}},"statement",false,false,false));};handle=function(i){if(i<declarable.elements.length){if(declarable.elements[i]){return handleItem(declarable.elements[i],_this["const"](i));}else{return handle(inc(i));}}else{return value;}};return handle(0);}else{return this.maybeCache(value,function(setValue,value){function handleItem(i,element,index,block){block.push(_this.macroExpand1(__node("MacroAccess",8512,38,232,{macroName:"let",macroData:{declarable:__node("MacroAccess",8516,37,232,__node("MacroAccess",8516,31,232,{ident:__wrap(element)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",8527,__wrap(value),__wrap(index))}},"statement",false,false,false)));return handle(inc(i),block);};function handle(i,block){if(i<declarable.elements.length){if(declarable.elements[i]){return handleItem(i,declarable.elements[i],_this["const"](i),block);}else{return handle(inc(i),block);}}else{block.push(value);return _this.block(block);}};return handle(0,[setValue]);});}}else if(declarable.type==="object"){if(declarable.pairs.length===1){handleItem=function(left,key){return _this.macroExpand1(__node("MacroAccess",9072,38,247,{macroName:"let",macroData:{declarable:__node("MacroAccess",9076,37,247,__node("MacroAccess",9076,31,247,{ident:__wrap(left)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",9084,__wrap(value),__wrap(key))}},"statement",false,false,false));};handle=function(pair){return handleItem(pair.value,pair.key);};return handle(this.macroExpand1(declarable.pairs[0]));}else{return this.maybeCache(value,function(setValue,value){function handleItem(i,left,key,block){block.push(_this.macroExpand1(__node("MacroAccess",9371,38,254,{macroName:"let",macroData:{declarable:__node("MacroAccess",9375,37,254,__node("MacroAccess",9375,31,254,{ident:__wrap(left)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",9383,__wrap(value),__wrap(key))}},"statement",false,false,false)));return handle(inc(i),block);};function handlePair(i,pair,block){return handleItem(i,pair.value,pair.key,block);};function handle(i,block){if(i<declarable.pairs.length){return handlePair(i,_this.macroExpand1(declarable.pairs[i]),block);}else{block.push(value);return _this.block(block);}};return handle(0,[setValue]);});}}else{return this.error("Unknown declarable: "+String(declarable+" "+String(declarable!=null&&(_ref=declarable.constructor)!=null?_ref.name:void 0)));}};}.call(this));',params:[["ident","declarable","ident","Declarable"],["const","="],["ident","value","ident","ExpressionOrAssignmentOrBody"]],names:"let",id:38},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(node){return this.mutateLast(node||this.noop(),function(n){return _this["return"](n);},true);}else{return this["return"]();}};}.call(this));',params:[["ident","node","many","?","ident","Expression"]],names:"return",id:39},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",10173,17,280,{macroName:"if",macroData:{test:__node("MacroAccess",10185,20,280,{op:"?",node:__wrap(setN)},"statement",false,false,false),body:__node("MacroAccess",10194,39,281,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"return?",id:40},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",10350,17,288,{macroName:"if",macroData:{test:__wrap(n),body:__node("MacroAccess",10366,39,289,{macroName:"return",macroData:{node:__const("true")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",10452,17,293,{macroName:"if",macroData:{test:__wrap(setN),body:__node("MacroAccess",10474,39,294,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnif",id:41},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",10636,17,301,{macroName:"unless",macroData:{test:__wrap(n),body:__node("MacroAccess",10656,39,302,{macroName:"return",macroData:{node:__const("false")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",10743,17,306,{macroName:"unless",macroData:{test:__wrap(setN),body:__node("MacroAccess",10769,39,307,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnunless",id:42},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,body,f,locals,macroData,macroName,params,values;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;locals=macroData.locals;body=macroData.body;params=[];values=[];if(locals){if(locals.ident){params.push(this.param(locals.ident));values.push(locals.value);}f=function(i){if(__lt(i,locals.rest.length)){if(locals.rest[i].ident){params.push(_this.param(locals.rest[i].ident));values.push(locals.rest[i].value);}return f(__num(i)+1);}};f(0);}return this.call(this.func(params,body,true,true),values);};}.call(this));',params:[["ident","locals","many","?","sequence",["ident","ident","ident","Identifier"],["const","="],["ident","value"],["ident","rest","many","*","sequence",["const",","],["ident","ident","ident","Identifier"],["const","="],["ident","value"]]],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:104},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;body=macroData.body;func=__node("Function",30670,[],__wrap(body),true,false,false,void 0,false,[]);return __node("Call",30687,__wrap(func),[__wrap(node)],false,true);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"with",id:105},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var arr,body,elseBody,every,init,loop,macroData,macroName,reducer,result,runElse,some,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",32135,39,1015,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false);});loop=this["for"](init,test,step,body);return __node("MacroAccess",32210,0,1017,{macroName:"do",macroData:{body:__node("Block",32214,[__wrap(loop),__wrap(elseBody)],null)}},"expression",false,false,false);}else{if(elseBody){this.error("Cannot use a for loop with an else with "+__strnum(reducer),elseBody);}if(reducer==="some"){some=this.tmp("some",false,"boolean");result=[];result.push(__node("MacroAccess",32492,38,1026,{macroName:"let",macroData:{declarable:__node("MacroAccess",32496,37,1026,__node("MacroAccess",32496,31,1026,{ident:__wrap(some)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false));result.push(this["for"](init,test,step,this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",32601,17,1028,{macroName:"if",macroData:{test:__wrap(node),body:__node("Block",32622,[__node("MacroAccess",32622,30,1029,{left:__wrap(some),op:":=",right:__const("true")},"statement",false,false,false),__node("MacroAccess",32650,19,1030,{macroName:"break",macroData:{}},"statement",false,false,false)],null),elseIfs:[]}},"statement",false,false,false);})));result.push(some);if(this.position==="expression"){return __wrap(result);}else{return __wrap(result);}}else if(reducer==="every"){every=this.tmp("every",false,"boolean");result=[];result.push(__node("MacroAccess",32935,38,1039,{macroName:"let",macroData:{declarable:__node("MacroAccess",32939,37,1039,__node("MacroAccess",32939,31,1039,{ident:__wrap(every)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));result.push(this["for"](init,test,step,this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",33044,17,1041,{macroName:"if",macroData:{test:__node("MacroAccess",33058,3,1041,{op:"not",node:__wrap(node)},"statement",false,false,false),body:__node("Block",33069,[__node("MacroAccess",33069,30,1042,{left:__wrap(every),op:":=",right:__const("false")},"statement",false,false,false),__node("MacroAccess",33099,19,1043,{macroName:"break",macroData:{}},"statement",false,false,false)],null),elseIfs:[]}},"statement",false,false,false);})));result.push(every);if(this.position==="expression"){return __wrap(result);}else{return __wrap(result);}}else{return this.error("Unknown reducer: "+__strnum(reducer));}}}else if(elseBody){if(this.position==="expression"){this.error("Cannot use a for loop with an else with as an expression",elseBody);}runElse=this.tmp("else",false,"boolean");body=__node("Block",33515,[__node("MacroAccess",33515,30,1056,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);init=__node("Block",33574,[__node("MacroAccess",33574,30,1059,{left:__wrap(runElse),op:":=",right:__const("true")},"statement",false,false,false),__wrap(init)],null);loop=this["for"](init,test,step,body);return __node("Block",33670,[__wrap(loop),__node("MacroAccess",33684,17,1064,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false)],null);}else if(this.position==="expression"){arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",33877,__node("Access",33877,__wrap(arr),__node("Const",33883,"push")),[__wrap(node)],false,false);});init=__node("Block",33913,[__node("MacroAccess",33913,30,1070,{left:__wrap(arr),op:":=",right:__node("Array",33928,[])},"statement",false,false,false),__wrap(init)],null);loop=this["for"](init,test,step,body);return __node("Block",34002,[__wrap(loop),__wrap(arr)],null);}else{return this["for"](init,test,step,body);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","init","choice",["ident","ExpressionOrAssignment"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","ExpressionOrAssignment"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:106},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,init,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;init=macroData.init;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",34389,30,1084,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});return __node("Block",34417,[__node("MacroAccess",34417,38,1086,{macroName:"let",macroData:{declarable:__node("MacroAccess",34426,37,1086,__node("MacroAccess",34426,31,1086,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",34461,106,1087,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(step),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","init","choice",["ident","Expression"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:107},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,elseBody,macroData,macroName,reducer,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(macroName==="until"){test=__node("MacroAccess",34829,3,1094,{op:"not",node:__wrap(test)},"expression",false,false,false);}if(reducer==="every"){return __node("MacroAccess",34880,106,1097,{macroName:"for",macroData:{reducer:"every",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",34989,106,1102,{macroName:"for",macroData:{reducer:"some",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",35098,106,1107,{macroName:"for",macroData:{reducer:"first",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",35215,106,1112,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",35298,106,1118,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["while","until"],id:108},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(macroName==="until"){test=__node("MacroAccess",35596,3,1125,{op:"not",node:__wrap(test)},"expression",false,false,false);}return __node("MacroAccess",35620,107,1128,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),current:__wrap(current),currentStart:__wrap(currentStart),body:__wrap(body)}},"statement",false,false,false);};}.call(this));',params:[["const","reduce"],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:["while","until"],id:109},{code:'return (function(){"use strict";var __num,__strnum,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,_ref2,args,array,body,elseBody,end,func,hasIndex,hasLength,inclusive,increment,index,init,isString,length,letIndex,letLength,letValue,macroData,macroName,reducer,start,step,test,tmp,value,valueExpr,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;elseBody=macroData.elseBody;value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__toArray"&&!this.callIsApply(array)){array=this.callArgs(array)[0];}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;_ref=this.callArgs(array);start=_ref[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];init=[];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",38123,60,1187,{op:"+",node:__wrap(start)},"expression",false,false,false);}init.push(this.macroExpandAll(__node("MacroAccess",38169,38,1188,{macroName:"let",macroData:{declarable:__node("MacroAccess",38173,37,1188,__node("MacroAccess",38173,31,1188,{isMutable:"mutable",ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)));if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",38387,60,1194,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",38447,60,1196,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",38650,60,1202,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",38712,60,1204,{op:"+",node:__wrap(step)},"expression",false,false,false));}if(this.isComplex(inclusive)){inclusive=this.cache(__wrap(inclusive),init,"incl",false);}if(this.isConst(step)){if(__num(this.value(step))>0){if(this.isConst(end)&&this.value(end)===1/0){test=__const("true");}else{test=__node("MacroAccess",39001,16,1214,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",39020,9,1214,{left:__wrap(value),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39041,9,1214,{left:__wrap(value),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false);}}else if(this.isConst(end)&&this.value(end)===-1/0){test=__const("true");}else{test=__node("MacroAccess",39180,16,1219,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",39199,10,1219,{left:__wrap(value),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39220,10,1219,{left:__wrap(value),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false);}}else{test=__node("MacroAccess",39259,17,1221,{macroName:"if",macroData:{test:__node("MacroAccess",39262,10,1221,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",39272,0)},"expression",false,false,false),body:__node("MacroAccess",39274,16,1222,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",39302,9,1222,{left:__wrap(value),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39323,9,1222,{left:__wrap(value),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39352,16,1224,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",39380,10,1224,{left:__wrap(value),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39401,10,1224,{left:__wrap(value),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)}},"expression",false,false,false);}increment=__node("MacroAccess",39456,52,1226,{left:__wrap(value),op:"~+=",right:__wrap(step)},"expression",false,false,false);if(length){init.push(this.macroExpandAll(__node("MacroAccess",39534,38,1229,{macroName:"let",macroData:{declarable:__node("MacroAccess",39538,37,1229,__node("MacroAccess",39538,31,1229,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",39548,17,1229,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",39563,45,1230,{left:__node("MacroAccess",39574,49,1230,{left:__node("MacroAccess",39574,49,1230,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",39621,45,1232,{left:__node("MacroAccess",39632,49,1232,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)));}if(index){init.push(this.macroExpandAll(__node("MacroAccess",39716,38,1235,{macroName:"let",macroData:{declarable:__node("MacroAccess",39720,37,1235,__node("MacroAccess",39720,31,1235,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",39738,0)}},"statement",false,false,false)));increment=__node("Block",39765,[__wrap(increment),__node("MacroAccess",39786,103,1238,{left:__wrap(index),op:"+=",right:__node("Const",39806,1)},"statement",false,false,false)],null);if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",39906,38,1241,{macroName:"let",macroData:{declarable:__node("MacroAccess",39910,37,1241,__node("MacroAccess",39910,31,1241,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",39920,[__node("Param",39921,__wrap(value),void 0,false,false,void 0),__node("Param",39928,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",39970,__wrap(func),[__node("This",39978),__wrap(value),__wrap(index)],false,true);}}else if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",40098,38,1245,{macroName:"let",macroData:{declarable:__node("MacroAccess",40102,37,1245,__node("MacroAccess",40102,31,1245,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",40112,[__node("Param",40113,__wrap(value),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",40152,__wrap(func),[__node("This",40160),__wrap(value)],false,true);}if(reducer==="every"){return __node("MacroAccess",40219,106,1249,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",40348,106,1254,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",40477,106,1259,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",40652,17,1265,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(value),elseIfs:[]}},"statement",false,false,false);});return __node("MacroAccess",40693,106,1267,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",40825,106,1272,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",40928,106,1278,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}}else{init=[];isString=this.isType(array,"string");hasIndex=index!=null;if(index==null){index=this.tmp("i",false,"number");}hasLength=length!=null;if(length==null){length=this.tmp("len",false,"number");}this.macroExpandAll(__node("MacroAccess",41282,38,1291,{macroName:"let",macroData:{declarable:__node("MacroAccess",41286,37,1291,__node("MacroAccess",41286,31,1291,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",41297,0)}},"statement",false,false,false));array=this.macroExpandAll(array);step=__node("Const",41383,1);start=__node("Const",41416,0);end=__const("Infinity");inclusive=__const("false");if(this.isCall(array)&&this.isIdent(this.callFunc(array))){if(this.name(this.callFunc(array))==="__step"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];step=args[1];if(this.isConst(step)){if(__num(this.value(step))>=0){start=__node("Const",41814,0);end=__const("Infinity");}else{start=__const("Infinity");end=__node("Const",41931,0);}}else{start=void 0;end=void 0;}inclusive=__const("true");}else if(this.name(this.callFunc(array))==="__slice"&&this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];if(this.isConst(end)&&this.value(end)===void 0){end=__const("Infinity");}}else if(this.name(this.callFunc(array))==="__sliceStep"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];step=args[3];inclusive=args[4];}}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Expected step to be a number, got "+__typeof(this.value(step)),step);}else if(__num(this.value(step))%1!==0){this.error("Expected step to be an integer, got "+__strnum(this.value(step)),step);}else if(this.value(step)===0){this.error("Expected step to non-zero",step);}}if(start&&this.isConst(start)&&this.value(start)!==1/0&&(typeof this.value(start)!=="number"||__num(this.value(start))%1!==0)){this.error("Expected start to be an integer, got "+__typeof(this.value(start))+" ("+String(this.value(start))+")",start);}if(end&&this.isConst(end)&&this.value(end)!==1/0&&(typeof this.value(end)!=="number"||__num(this.value(end))%1!==0)){this.error("Expected end to be an integer, got "+__typeof(this.value(end))+" ("+String(this.value(end))+")",end);}if(!isString&&!this.isType(array,"arrayLike")){array=__node("Call",43469,__node("Ident",43469,"__toArray"),[__wrap(array)],false,false);}array=this.cache(array,init,isString?"str":"arr",false);valueExpr=__node("MacroAccess",43597,16,1345,{macroName:"if",macroData:{test:__wrap(isString),body:__node("Call",43616,__node("Access",43616,__wrap(array),__node("Const",43624,"charAt")),[__wrap(index)],false,false),elseIfs:[],elseBody:__node("Access",43644,__wrap(array),__wrap(index))}},"expression",false,false,false);letIndex=this.macroExpandAll(__node("MacroAccess",43703,38,1346,{macroName:"let",macroData:{declarable:__node("MacroAccess",43707,37,1346,__node("MacroAccess",43707,31,1346,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",43725,0)}},"statement",false,false,false));if(value&&value.type==="ident"&&!value.isMutable){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}letValue=this.macroExpandAll(__node("MacroAccess",43890,38,1348,{macroName:"let",macroData:{declarable:__node("MacroAccess",43894,37,1348,__node("MacroAccess",43894,31,1348,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false));letLength=this.macroExpandAll(__node("MacroAccess",43960,38,1349,{macroName:"let",macroData:{declarable:__node("MacroAccess",43964,37,1349,__node("MacroAccess",43964,31,1349,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",43974,60,1349,{op:"+",node:__node("Access",43976,__wrap(array),__node("Const",43983,"length"))},"expression",false,false,false)}},"statement",false,false,false));_ref=this.isConst(step)?__num(this.value(step))>0?(this.isConst(start)?__num(this.value(start))>=0?(init.push(__node("MacroAccess",44165,38,1355,{macroName:"let",macroData:{declarable:__node("MacroAccess",44169,37,1355,__node("MacroAccess",44169,31,1355,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)),init.push(letLength)):(init.push(letLength),init.push(__node("MacroAccess",44308,38,1359,{macroName:"let",macroData:{declarable:__node("MacroAccess",44312,37,1359,__node("MacroAccess",44312,31,1359,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",44329,66,1359,{left:__wrap(length),inverted:false,op:"+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false))):(init.push(letLength),init.push(__node("MacroAccess",44420,38,1362,{macroName:"let",macroData:{declarable:__node("MacroAccess",44424,37,1362,__node("MacroAccess",44424,31,1362,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",44441,__node("Ident",44441,"__int"),[__wrap(start)],false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",44482,16,1363,{macroName:"if",macroData:{test:__node("MacroAccess",44485,9,1363,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",44496,0)},"expression",false,false,false),body:__node("MacroAccess",44504,103,1363,{left:__wrap(index),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false))),this.isConst(end)&&(this.value(end)===1/0||this.isConst(inclusive)&&this.value(inclusive)&&this.value(end)===-1)?[__node("MacroAccess",44668,9,1365,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),__node("MacroAccess",44694,52,1365,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",44801,38,1368,{macroName:"let",macroData:{declarable:__node("MacroAccess",44805,37,1368,__node("MacroAccess",44805,31,1368,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",44820,60,1368,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),!this.isConst(end)?init.push(__node("MacroAccess",44889,16,1370,{macroName:"if",macroData:{test:__node("MacroAccess",44892,9,1370,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",44901,0)},"expression",false,false,false),body:__node("MacroAccess",44909,52,1370,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false)):__num(this.value(end))<0?init.push(__node("MacroAccess",44991,52,1372,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false)):void 0,init.push(__node("MacroAccess",45035,16,1373,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",45056,30,1373,{left:__wrap(tmp),op:":=",right:__node("MacroAccess",45063,2,1373,{left:__node("MacroAccess",45063,66,1373,{left:__wrap(tmp),inverted:false,op:"+",right:__node("Const",45071,1)},"expression",false,false,false),inverted:false,op:"or",right:__const("Infinity")},"expression",false,false,false)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false)),init.push(__node("MacroAccess",45112,86,1374,{left:__wrap(tmp),op:"~min=",right:__wrap(length)},"expression",false,false,false)),[__node("MacroAccess",45149,9,1375,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(tmp)},"expression",false,false,false),__node("MacroAccess",45170,52,1375,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)])):this.value(step)===-1&&(!start||this.isConst(start)&&((_ref2=this.value(start))===-1||_ref2===1/0)&&this.isConst(end)&&this.value(end)===0&&this.isConst(inclusive)&&this.value(inclusive))?(hasLength?(init.push(letLength),init.push(__node("MacroAccess",45467,38,1379,{macroName:"let",macroData:{declarable:__node("MacroAccess",45471,37,1379,__node("MacroAccess",45471,31,1379,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(length)}},"statement",false,false,false))):init.push(__node("MacroAccess",45537,38,1381,{macroName:"let",macroData:{declarable:__node("MacroAccess",45541,37,1381,__node("MacroAccess",45541,31,1381,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",45558,60,1381,{op:"+",node:__node("Access",45560,__wrap(array),__node("Const",45567,"length"))},"expression",false,false,false)}},"statement",false,false,false)),[__node("MacroAccess",45589,13,1382,{op:"postDec!",node:__wrap(index)},"expression",false,false,false),this.noop()]):(!this.isConst(end)||__num(this.value(end))<0?(hasLength=true):void 0,this.isConst(start)?(_ref2=this.value(start))===-1||_ref2===1/0?hasLength?(init.push(letLength),init.push(__node("MacroAccess",45883,38,1390,{macroName:"let",macroData:{declarable:__node("MacroAccess",45887,37,1390,__node("MacroAccess",45887,31,1390,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",45904,49,1390,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",45916,1)},"expression",false,false,false)}},"statement",false,false,false))):init.push(__node("MacroAccess",45966,38,1392,{macroName:"let",macroData:{declarable:__node("MacroAccess",45970,37,1392,__node("MacroAccess",45970,31,1392,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",45987,49,1392,{left:__node("MacroAccess",45987,60,1392,{op:"+",node:__node("Access",45989,__wrap(array),__node("Const",45996,"length"))},"expression",false,false,false),inverted:false,op:"~-",right:__node("Const",46006,1)},"expression",false,false,false)}},"statement",false,false,false)):(init.push(letLength),__num(this.value(start))>=0?init.push(__node("MacroAccess",46125,38,1396,{macroName:"let",macroData:{declarable:__node("MacroAccess",46129,37,1396,__node("MacroAccess",46129,31,1396,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",46146,16,1396,{macroName:"if",macroData:{test:__node("MacroAccess",46149,9,1396,{left:__wrap(start),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),body:__wrap(start),elseIfs:[],elseBody:__node("MacroAccess",46184,49,1396,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",46196,1)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):init.push(__node("MacroAccess",46246,38,1398,{macroName:"let",macroData:{declarable:__node("MacroAccess",46250,37,1398,__node("MacroAccess",46250,31,1398,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",46267,49,1398,{left:__wrap(length),inverted:false,op:"~+",right:__node("MacroAccess",46278,60,1398,{op:"+",node:__wrap(start)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false))):(init.push(letLength),init.push(__node("MacroAccess",46360,38,1401,{macroName:"let",macroData:{declarable:__node("MacroAccess",46364,37,1401,__node("MacroAccess",46364,31,1401,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",46381,60,1401,{op:"+",node:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",46415,16,1402,{macroName:"if",macroData:{test:__node("MacroAccess",46418,9,1402,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",46429,0)},"statement",false,false,false),body:__node("MacroAccess",46437,52,1402,{left:__wrap(index),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",46463,86,1402,{left:__wrap(index),op:"~min=",right:__wrap(length)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",46510,53,1403,{left:__wrap(index),op:"~-=",right:__node("Const",46522,1)},"statement",false,false,false))),this.isConst(end)?__num(this.value(end))>=0?[__node("MacroAccess",46603,16,1406,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",46622,10,1406,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",46643,10,1406,{left:__wrap(index),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",46664,52,1406,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:[__node("MacroAccess",46719,16,1408,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",46738,10,1408,{left:__wrap(index),inverted:false,op:"~>=",right:__node("MacroAccess",46749,66,1408,{left:__wrap(end),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",46769,10,1408,{left:__wrap(index),inverted:false,op:"~>",right:__node("MacroAccess",46779,66,1408,{left:__wrap(end),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",46800,52,1408,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",46907,38,1411,{macroName:"let",macroData:{declarable:__node("MacroAccess",46911,37,1411,__node("MacroAccess",46911,31,1411,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",46926,60,1411,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",46958,16,1412,{macroName:"if",macroData:{test:__node("MacroAccess",46961,9,1412,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",46970,0)},"statement",false,false,false),body:__node("MacroAccess",46978,52,1412,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"statement",false,false,false)),[__node("MacroAccess",47013,16,1413,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",47032,10,1413,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(tmp)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",47053,10,1413,{left:__wrap(index),inverted:false,op:"~>",right:__wrap(tmp)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",47074,52,1413,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)])):(this.isComplex(step)?(step=this.cache(__node("Call",47163,__node("Ident",47163,"__int"),[__node("Call",47170,__node("Ident",47170,"__nonzero"),[__wrap(step)],false,false)],false,false),init,"step",false)):init.unshift(__node("Call",47249,__node("Ident",47249,"__int"),[__node("Call",47256,__node("Ident",47256,"__nonzero"),[__wrap(step)],false,false)],false,false)),init.push(letLength),!start?(init.push(__node("MacroAccess",47347,38,1421,{macroName:"let",macroData:{declarable:__node("MacroAccess",47351,37,1421,__node("MacroAccess",47351,31,1421,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",47368,16,1421,{macroName:"if",macroData:{test:__node("MacroAccess",47371,10,1421,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",47381,0)},"expression",false,false,false),body:__node("Const",47388,0),elseIfs:[],elseBody:__node("MacroAccess",47394,49,1421,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",47406,1)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)),[__node("MacroAccess",47436,16,1423,{macroName:"if",macroData:{test:__node("MacroAccess",47439,10,1423,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",47449,0)},"expression",false,false,false),body:__node("MacroAccess",47455,9,1423,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",47478,10,1423,{left:__wrap(index),inverted:false,op:"~>=",right:__node("Const",47490,0)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",47508,52,1424,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]):(this.isConst(start)?this.value(start)===1/0?init.push(__node("MacroAccess",47649,38,1429,{macroName:"let",macroData:{declarable:__node("MacroAccess",47653,37,1429,__node("MacroAccess",47653,31,1429,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",47670,49,1429,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",47682,1)},"expression",false,false,false)}},"statement",false,false,false)):init.push(__node("MacroAccess",47728,38,1431,{macroName:"let",macroData:{declarable:__node("MacroAccess",47732,37,1431,__node("MacroAccess",47732,31,1431,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",47749,16,1431,{macroName:"if",macroData:{test:__node("MacroAccess",47752,10,1431,{left:__wrap(start),inverted:false,op:"~>=",right:__node("Const",47764,0)},"expression",false,false,false),body:__wrap(start),elseIfs:[],elseBody:__node("MacroAccess",47782,66,1431,{left:__wrap(start),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):(init.push(__node("MacroAccess",47840,38,1433,{macroName:"let",macroData:{declarable:__node("MacroAccess",47844,37,1433,__node("MacroAccess",47844,31,1433,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)),init.push(__node("MacroAccess",47894,16,1434,{macroName:"if",macroData:{test:__node("MacroAccess",47897,9,1434,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",47908,0)},"statement",false,false,false),body:__node("MacroAccess",47916,103,1434,{left:__wrap(index),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[{test:__node("MacroAccess",47942,9,1434,{left:__wrap(step),inverted:false,op:"~<",right:__node("Const",47952,0)},"statement",false,false,false),body:__node("MacroAccess",47960,86,1434,{left:__wrap(index),op:"~min=",right:__wrap(length)},"expression",false,false,false)}]}},"statement",false,false,false))),tmp=this.tmp("end",false,"number"),this.isConst(end)?init.push(__node("MacroAccess",48081,38,1437,{macroName:"let",macroData:{declarable:__node("MacroAccess",48085,37,1437,__node("MacroAccess",48085,31,1437,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",48100,16,1437,{macroName:"if",macroData:{test:__node("MacroAccess",48103,9,1437,{left:__wrap(end),inverted:false,op:"~<",right:__node("Const",48112,0)},"expression",false,false,false),body:__node("MacroAccess",48118,49,1437,{left:__wrap(end),inverted:false,op:"~+",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",48139,83,1437,{left:__wrap(end),inverted:false,op:"max",right:__node("MacroAccess",48150,16,1437,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",48168,49,1437,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",48180,1)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(length)}},"expression",false,false,false)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):(init.push(__node("MacroAccess",48236,38,1439,{macroName:"let",macroData:{declarable:__node("MacroAccess",48240,37,1439,__node("MacroAccess",48240,31,1439,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",48255,60,1439,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",48287,16,1440,{macroName:"if",macroData:{test:__node("MacroAccess",48290,9,1440,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",48299,0)},"statement",false,false,false),body:__node("MacroAccess",48307,103,1440,{left:__wrap(tmp),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[{test:__node("MacroAccess",48331,10,1440,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",48341,0)},"statement",false,false,false),body:__node("MacroAccess",48349,86,1440,{left:__wrap(tmp),op:"~min=",right:__node("MacroAccess",48359,16,1440,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",48378,49,1440,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",48390,1)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(length)}},"expression",false,false,false)},"expression",false,false,false)}],elseBody:__node("MacroAccess",48412,87,1440,{left:__wrap(tmp),op:"~max=",right:__node("MacroAccess",48424,16,1440,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("Const",48443,0),elseIfs:[],elseBody:__node("MacroAccess",48449,61,1440,{op:"-",node:__node("Const",48451,1)},"expression",false,false,false)}},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false))),end=tmp,[__node("MacroAccess",48504,17,1443,{macroName:"if",macroData:{test:__node("MacroAccess",48507,10,1443,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",48517,0)},"expression",false,false,false),body:__node("MacroAccess",48519,16,1444,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",48551,9,1444,{left:__wrap(index),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",48572,9,1444,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",48605,16,1446,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",48637,10,1446,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",48658,9,1446,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)}},"expression",false,false,false),__node("MacroAccess",48690,52,1447,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]));test=_ref[0];increment=_ref[1];if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value&&valueIdent!==value.ident){body=__node("Block",48865,[__node("MacroAccess",48865,38,1454,{macroName:"let",macroData:{declarable:__node("MacroAccess",48880,37,1454,__node("MacroAccess",48880,31,1454,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(hasIndex){init.push(__node("MacroAccess",48965,38,1457,{macroName:"let",macroData:{declarable:__node("MacroAccess",48969,37,1457,__node("MacroAccess",48969,31,1457,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",48979,[__node("Param",48980,__wrap(valueIdent),void 0,false,false,void 0),__node("Param",48993,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",49033,__wrap(func),[__node("This",49041),__wrap(valueExpr),__wrap(index)],false,true);}else{init.push(__node("MacroAccess",49104,38,1460,{macroName:"let",macroData:{declarable:__node("MacroAccess",49108,37,1460,__node("MacroAccess",49108,31,1460,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",49118,[__node("Param",49119,__wrap(valueIdent),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",49164,__wrap(func),[__node("This",49172),__wrap(valueExpr)],false,true);}}else if(valueIdent===value.ident||reducer!=="filter"){body=__node("Block",49274,[__node("MacroAccess",49274,38,1464,{macroName:"let",macroData:{declarable:__node("MacroAccess",49287,37,1464,__node("MacroAccess",49287,31,1464,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false),__wrap(body)],null);}else{body=__node("Block",49356,[__node("MacroAccess",49356,38,1468,{macroName:"let",macroData:{declarable:__node("MacroAccess",49369,37,1468,__node("MacroAccess",49369,31,1468,{ident:__wrap(valueIdent)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false),__node("MacroAccess",49397,38,1469,{macroName:"let",macroData:{declarable:__node("MacroAccess",49410,37,1469,__node("MacroAccess",49410,31,1469,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(reducer==="every"){return __node("MacroAccess",49491,106,1473,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",49620,106,1478,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",49749,106,1483,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",49924,17,1489,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(valueIdent),elseIfs:[]}},"statement",false,false,false);});return __node("MacroAccess",49971,106,1491,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",50102,106,1496,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",50205,106,1502,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:113},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var array,body,current,currentStart,index,length,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;array=macroData.array;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;value=this.macroExpand1(value);body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",50623,30,1509,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});if(index!=null){length=index.length;}if(index!=null){index=index.value;}return __node("Block",50708,[__node("MacroAccess",50708,38,1513,{macroName:"let",macroData:{declarable:__node("MacroAccess",50717,37,1513,__node("MacroAccess",50717,31,1513,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",50752,113,1514,{macroName:"for",macroData:{value:__node("MacroAccess",50761,37,1514,__node("MacroAccess",50761,31,1514,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index),length:__wrap(length)},array:__wrap(array),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:114},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var arr,body,elseBody,func,index,init,key,letIndex,letValue,loop,macroData,macroName,object,own,post,reducer,runElse,type,value,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;elseBody=macroData.elseBody;index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}own=type==="of";init=[];if(own||value){object=this.cache(object,init,"obj",false);}this["let"](key,false,this.type("string"));letValue=value&&this.macroExpandAll(__node("MacroAccess",51465,38,1530,{macroName:"let",macroData:{declarable:__node("MacroAccess",51469,37,1530,__node("MacroAccess",51469,31,1530,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",51478,__wrap(object),__wrap(key))}},"statement",false,false,false));letIndex=index&&this.macroExpandAll(__node("MacroAccess",51544,38,1531,{macroName:"let",macroData:{declarable:__node("MacroAccess",51548,37,1531,__node("MacroAccess",51548,31,1531,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",51565,61,1531,{op:"-",node:__node("Const",51567,1)},"expression",false,false,false)}},"statement",false,false,false));if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value){if(value.type==="ident"){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}}if(value&&valueIdent!==value.ident){body=__node("Block",51802,[__node("MacroAccess",51802,38,1537,{macroName:"let",macroData:{declarable:__node("MacroAccess",51815,37,1537,__node("MacroAccess",51815,31,1537,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(index){init.push(__node("MacroAccess",51891,38,1540,{macroName:"let",macroData:{declarable:__node("MacroAccess",51895,37,1540,__node("MacroAccess",51895,31,1540,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",51905,[__node("Param",51906,__wrap(key),void 0,false,false,void 0),__node("Param",51911,__wrap(valueIdent),void 0,false,false,void 0),__node("Param",51925,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",51965,__wrap(func),[__node("This",51973),__wrap(key),__node("Access",51984,__wrap(object),__wrap(key)),__wrap(index)],false,true);}else if(value){init.push(__node("MacroAccess",52051,38,1543,{macroName:"let",macroData:{declarable:__node("MacroAccess",52055,37,1543,__node("MacroAccess",52055,31,1543,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",52065,[__node("Param",52066,__wrap(key),void 0,false,false,void 0),__node("Param",52071,__wrap(valueIdent),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",52117,__wrap(func),[__node("This",52125),__wrap(key),__node("Access",52136,__wrap(object),__wrap(key))],false,true);}else{init.push(__node("MacroAccess",52186,38,1546,{macroName:"let",macroData:{declarable:__node("MacroAccess",52190,37,1546,__node("MacroAccess",52190,31,1546,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",52200,[__node("Param",52201,__wrap(key),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",52238,__wrap(func),[__node("This",52246),__wrap(key)],false,true);}}else if(value){body=__node("Block",52295,[__wrap(letValue),__wrap(body)],null);}post=[];if(elseBody){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",52433,38,1556,{macroName:"let",macroData:{declarable:__node("MacroAccess",52437,37,1556,__node("MacroAccess",52437,31,1556,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));body=__node("Block",52474,[__node("MacroAccess",52474,30,1558,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);post.push(__node("MacroAccess",52535,17,1561,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(index){init.push(letIndex);body=__node("Block",52637,[__node("MacroAccess",52637,52,1567,{left:__wrap(index),op:"~+=",right:__node("Const",52656,1)},"statement",false,false,false),__wrap(body)],null);}if(own){body=__node("MacroAccess",52704,17,1572,{macroName:"if",macroData:{test:__node("MacroAccess",52714,73,1572,{left:__wrap(object),inverted:false,op:"ownskey",right:__wrap(key)},"statement",false,false,false),body:__wrap(body),elseIfs:[]}},"statement",false,false,false);}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",52858,39,1577,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",52930,0,1579,{macroName:"do",macroData:{body:__node("Block",52934,[__wrap(init),__wrap(loop),__wrap(elseBody)],null)}},"statement",false,false,false);}else{if(elseBody){this.error("Cannot use a for loop with an else with "+__strnum(reducer),elseBody);}if(reducer==="some"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",53191,17,1588,{macroName:"if",macroData:{test:__wrap(node),body:__node("MacroAccess",53212,39,1589,{macroName:"return",macroData:{node:__const("true")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",53299,0,1591,{macroName:"do",macroData:{body:__node("Block",53303,[__wrap(init),__wrap(loop),__const("false")],null)}},"statement",false,false,false);}else if(reducer==="every"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",53454,17,1597,{macroName:"if",macroData:{test:__node("MacroAccess",53468,3,1597,{op:"not",node:__wrap(node)},"statement",false,false,false),body:__node("MacroAccess",53479,39,1598,{macroName:"return",macroData:{node:__const("false")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",53567,0,1600,{macroName:"do",macroData:{body:__node("Block",53571,[__wrap(init),__wrap(loop),__const("true")],null)}},"statement",false,false,false);}else{return this.error("Unknown reducer: "+__strnum(reducer));}}}else if(this.position==="expression"){if(elseBody){this.error("Cannot use a for loop with an else as an expression",elseBody);}arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",53932,__node("Access",53932,__wrap(arr),__node("Const",53938,"push")),[__wrap(node)],false,false);});init.unshift(__node("MacroAccess",53972,38,1611,{macroName:"let",macroData:{declarable:__node("MacroAccess",53976,37,1611,__node("MacroAccess",53976,31,1611,{ident:__wrap(arr)},"statement",false,false,false),"statement",false,false,false),value:__node("Array",53983,[])}},"statement",false,false,false));loop=this.forIn(key,object,body);return __node("Block",54041,[__wrap(init),__wrap(loop),__wrap(arr)],null);}else{loop=this.forIn(key,object,body);return __node("Block",54145,[__wrap(init),__wrap(loop),__wrap(post)],null);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:115},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,index,key,loop,macroData,macroName,object,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",54494,30,1625,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});if(value!=null){index=value.index;}if(value!=null){value=value.value;}if(type==="of"){loop=__node("MacroAccess",54609,115,1629,{macroName:"for",macroData:{key:__wrap(key),value:{value:__node("MacroAccess",54619,37,1629,__node("MacroAccess",54619,31,1629,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:__wrap(index)},type:"of",object:__wrap(object),body:__wrap(body)}},"statement",false,false,false);}else{loop=__node("MacroAccess",54678,115,1632,{macroName:"for",macroData:{key:__wrap(key),value:{value:__node("MacroAccess",54688,37,1632,__node("MacroAccess",54688,31,1632,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:__wrap(index)},type:"ofall",object:__wrap(object),body:__wrap(body)}},"statement",false,false,false);}return __node("Block",54740,[__node("MacroAccess",54740,38,1635,{macroName:"let",macroData:{declarable:__node("MacroAccess",54749,37,1635,__node("MacroAccess",54749,31,1635,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__wrap(loop),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:116},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_f,_i,catchBody,catchIdent,catchPart,current,elseBody,finallyBody,hasElse,init,macroData,macroName,runElse,tryBody,typedCatches;macroName=macroFullData.macroName;macroData=macroFullData.macroData;tryBody=macroData.tryBody;typedCatches=macroData.typedCatches;catchPart=macroData.catchPart;elseBody=macroData.elseBody;finallyBody=macroData.finallyBody;hasElse=!!elseBody;if(typedCatches.length===0&&!catchPart&&!hasElse&&!finallyBody){this.error("Must provide at least a catch, else, or finally to a try block");}if(catchPart!=null){catchIdent=catchPart.ident;}if(catchPart!=null){catchBody=catchPart.body;}if(typedCatches.length!==0){if(!catchIdent){catchIdent=typedCatches[0].ident;}current=catchBody||__node("MacroAccess",69465,11,2043,{op:"throw",node:__wrap(catchIdent)},"statement",false,false,false);for(_arr=__toArray(typedCatches), _i=_arr.length, _f=function(typeCatch){var _this,letErr,typeIdent,types,value;_this=this;typeIdent=typeCatch.ident;if(this.name(typeIdent)!==this.name(catchIdent)){letErr=__node("MacroAccess",69605,38,2046,{macroName:"let",macroData:{declarable:__node("MacroAccess",69609,37,2046,__node("MacroAccess",69609,31,2046,{ident:__wrap(typeIdent)},"statement",false,false,false),"statement",false,false,false),value:__wrap(catchIdent)}},"statement",false,false,false);}else{letErr=this.noop();}if(typeCatch.check.type==="as"){types=this.array((function(){var _arr,_arr2,_i,_len,type;for(_arr=[], _arr2=__toArray(_this.isTypeUnion(typeCatch.check.value)?_this.types(typeCatch.check.value):[typeCatch.check.value]), _i=0, _len=_arr2.length;_i<_len;++_i){type=_arr2[_i];if(_this.isTypeArray(type)){_this.error("Expected a normal type, cannot use an array type",type);}else if(_this.isTypeGeneric(type)){_this.error("Expected a normal type, cannot use a generic type",type);}else if(_this.isTypeFunction(type)){_this.error("Expected a normal type, cannot use a function type",type);}else if(_this.isTypeObject(type)){_this.error("Expected a normal type, cannot use an object type",type);}_arr.push(type);}return _arr;}()));return current=__node("MacroAccess",70372,17,2061,{macroName:"if",macroData:{test:__node("MacroAccess",70386,118,2061,{left:__wrap(catchIdent),inverted:false,op:"instanceofsome",right:__wrap(types)},"statement",false,false,false),body:__node("Block",70422,[__wrap(letErr),__wrap(typeCatch.body)],null),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}else{value=typeCatch.check.value;return current=__node("MacroAccess",70590,17,2069,{macroName:"if",macroData:{test:__node("MacroAccess",70604,5,2069,{left:__wrap(catchIdent),inverted:false,op:"==",right:__wrap(value)},"statement",false,false,false),body:__node("Block",70628,[__wrap(letErr),__wrap(typeCatch.body)],null),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}};_i--;){_f.call(this,_arr[_i]);}catchBody=current;}init=[];if(hasElse){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",70855,38,2078,{macroName:"let",macroData:{declarable:__node("MacroAccess",70859,37,2078,__node("MacroAccess",70859,31,2078,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));if(catchBody){catchBody=__node("Block",70923,[__node("MacroAccess",70923,30,2081,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(catchBody)],null);}else{catchIdent=this.tmp("err");catchBody=__node("Block",71044,[__node("MacroAccess",71044,30,2086,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__node("MacroAccess",71073,11,2087,{op:"throw",node:__wrap(catchIdent)},"statement",false,false,false)],null);}}current=tryBody;if(catchBody){current=this.tryCatch(current,catchIdent||this.tmp("err"),catchBody);}if(hasElse){current=this.tryFinally(current,__node("MacroAccess",71291,17,2094,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(finallyBody){current=this.tryFinally(current,finallyBody);}return __node("Block",71415,[__wrap(init),__wrap(current)],null);};}.call(this));',params:[["ident","tryBody","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","typedCatches","many","*","sequence",["const","\n"],["const","catch"],["ident","ident","ident","Identifier"],["ident","check","choice",["sequence",["ident","type","const","as"],["ident","value","ident","Type"]],["sequence",["ident","type","const","=="],["ident","value","ident","Expression"]]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","catchPart","many","?","sequence",["const","\n"],["const","catch"],["ident","ident","many","?","ident","Identifier"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","finallyBody","many","?","sequence",["const","\n"],["const","finally"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"try",id:119},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,captureValue,elseBody,err,func,index,init,item,iterable,iterator,macroData,macroName,main,post,reducer,runElse,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;iterable=macroData.iterable;body=macroData.body;elseBody=macroData.elseBody;init=[];iterator=this.cache(__node("Call",72592,__node("Ident",72592,"__iter"),[__wrap(iterable)],false,false),init,"iter",false);item=this.tmp("item",false);err=this.tmp("e",true);step=[];if(index){init.push(__node("MacroAccess",72747,38,2142,{macroName:"let",macroData:{declarable:__node("MacroAccess",72751,37,2142,__node("MacroAccess",72751,31,2142,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",72769,0)}},"statement",false,false,false));step.push(__node("MacroAccess",72791,52,2143,{left:__wrap(index),op:"~+=",right:__node("Const",72803,1)},"expression",false,false,false));}captureValue=__node("Block",72836,[__node("MacroAccess",72836,38,2146,{macroName:"let",macroData:{declarable:__node("MacroAccess",72845,37,2146,__node("MacroAccess",72845,31,2146,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",72853,__node("Access",72853,__wrap(iterator),__node("Const",72864,"next")),[],false,false)}},"statement",false,false,false),__node("MacroAccess",72871,17,2147,{macroName:"if",macroData:{test:__node("Access",72879,__wrap(item),__node("Const",72886,"done")),body:__node("MacroAccess",72891,19,2148,{macroName:"break",macroData:{}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",72905,38,2149,{macroName:"let",macroData:{declarable:__node("MacroAccess",72914,37,2149,__node("MacroAccess",72914,31,2149,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",72923,__wrap(item),__node("Const",72930,"value"))}},"statement",false,false,false)],null);post=[];if(elseBody&&!reducer&&this.position!=="expression"){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",73088,38,2154,{macroName:"let",macroData:{declarable:__node("MacroAccess",73092,37,2154,__node("MacroAccess",73092,31,2154,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));body=__node("Block",73129,[__node("MacroAccess",73129,30,2156,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);post.push(__node("MacroAccess",73190,17,2159,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(!index){init.push(__node("MacroAccess",73339,38,2165,{macroName:"let",macroData:{declarable:__node("MacroAccess",73343,37,2165,__node("MacroAccess",73343,31,2165,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",73353,117,2165,{op:"",node:__node("Function",73353,[__node("Param",73354,__wrap(value),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])},"expression",false,false,false)}},"statement",false,false,false));body=__node("Block",73391,[__wrap(captureValue),__node("Call",73416,__wrap(func),[__node("This",73433),__wrap(value)],false,true)],null);}else{init.push(__node("MacroAccess",73479,38,2170,{macroName:"let",macroData:{declarable:__node("MacroAccess",73483,37,2170,__node("MacroAccess",73483,31,2170,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",73493,117,2170,{op:"",node:__node("Function",73493,[__node("Param",73494,__wrap(value),void 0,false,false,void 0),__node("Param",73501,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])},"expression",false,false,false)}},"statement",false,false,false));body=__node("Block",73539,[__wrap(captureValue),__node("Call",73564,__wrap(func),[__node("This",73581),__wrap(value),__wrap(index)],false,true)],null);}}else{body=__node("Block",73630,[__wrap(captureValue),__wrap(body)],null);}if(reducer==="every"){main=__node("MacroAccess",73714,106,2180,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){main=__node("MacroAccess",73827,106,2185,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){main=__node("MacroAccess",73940,106,2190,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",74097,17,2196,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(value),elseIfs:[]}},"statement",false,false,false);});main=__node("MacroAccess",74134,106,2198,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){main=__node("MacroAccess",74249,106,2203,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{main=__node("Block",74336,[__node("MacroAccess",74336,106,2209,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body)}},"statement",false,false,false),__wrap(post)],null);}return __node("MacroAccess",74409,119,2213,{macroName:"try",macroData:{tryBody:__wrap(main),typedCatches:[],finallyBody:__node("MacroAccess",74438,119,2216,{macroName:"try",macroData:{tryBody:__node("Call",74448,__node("Access",74448,__wrap(iterator),__node("Const",74466,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err),body:__const("void")}}},"statement",false,false,false)}},"statement",false,false,false);};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterable","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:120},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,index,iterator,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;iterator=macroData.iterator;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",74757,30,2222,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});return __node("Block",74785,[__node("MacroAccess",74785,38,2224,{macroName:"let",macroData:{declarable:__node("MacroAccess",74794,37,2224,__node("MacroAccess",74794,31,2224,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",74829,120,2225,{macroName:"for",macroData:{value:__wrap(value),index:__wrap(index),iterable:__wrap(iterator),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:121},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_arr2,_i,_i2,_len,_len2,body,case_,caseNode,caseNodes,cases,defaultCase,isFallthrough,lastNode,macroData,macroName,node,nodes,resultCases;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;cases=macroData.cases;defaultCase=macroData.defaultCase;resultCases=[];for(_arr=__toArray(cases), _i=0, _len=_arr.length;_i<_len;++_i){case_=_arr[_i];caseNodes=[case_.nodeHead].concat(case_.nodeTail);body=case_.body;isFallthrough=false;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));isFallthrough=true;}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){body=this.noop();isFallthrough=true;}for(_arr2=__toArray(caseNodes.slice(0,-1)), _i2=0, _len2=_arr2.length;_i2<_len2;++_i2){caseNode=_arr2[_i2];resultCases.push({node:caseNode,body:this.noop(),fallthrough:true});}resultCases.push({node:caseNodes[__num(caseNodes.length)-1],body:body,fallthrough:isFallthrough});}return this["switch"](node,resultCases,defaultCase);};}.call(this));',params:[["ident","node","ident","Logic"],["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","nodeHead","ident","Logic"],["ident","nodeTail","many","*","sequence",["const",","],["this","ident","Logic"]],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:122},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,body,case_,cases,current,defaultCase,fall,isFallthrough,lastNode,macroData,macroName,nodes,result,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;cases=macroData.cases;defaultCase=macroData.defaultCase;current=defaultCase;for(_arr=__toArray(cases), _i=_arr.length;_i--;){case_=_arr[_i];test=case_.test;body=case_.body;isFallthrough=false;result=void 0;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));if(this.isIf(current)){fall=this.tmp("fall",false,"boolean");result=__node("Block",76722,[__node("MacroAccess",76722,38,2271,{macroName:"let",macroData:{declarable:__node("MacroAccess",76739,37,2271,__node("MacroAccess",76739,31,2271,{isMutable:"mutable",ident:__wrap(fall)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false),__node("MacroAccess",76762,17,2272,{macroName:"if",macroData:{test:__wrap(test),body:__node("Block",76785,[__node("MacroAccess",76785,30,2273,{left:__wrap(fall),op:":=",right:__const("true")},"statement",false,false,false),__wrap(body)],null),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",76837,17,2275,{macroName:"if",macroData:{test:__node("MacroAccess",76853,2,2275,{left:__wrap(fall),inverted:false,op:"or",right:__wrap(this.test(current))},"statement",false,false,false),body:__wrap(this.whenTrue(current)),elseIfs:[],elseBody:__wrap(this.whenFalse(current))}},"statement",false,false,false)],null);}else{result=__node("Block",77010,[__node("MacroAccess",77010,17,2281,{macroName:"if",macroData:{test:__wrap(test),body:__wrap(body),elseIfs:[]}},"statement",false,false,false),__wrap(current)],null);}}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){if(this.isIf(current)){result=__node("MacroAccess",77190,17,2286,{macroName:"if",macroData:{test:__node("MacroAccess",77193,2,2286,{left:__wrap(test),inverted:false,op:"or",right:__wrap(this.test(current))},"statement",false,false,false),body:__wrap(this.whenTrue(current)),elseIfs:[],elseBody:__wrap(this.whenFalse(current))}},"statement",false,false,false);}else{result=__node("Block",77344,[__wrap(test),__wrap(current)],null);}}current=result||__node("MacroAccess",77415,17,2295,{macroName:"if",macroData:{test:__wrap(case_.test),body:__wrap(body),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}return current;};}.call(this));',params:[["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","test","ident","Logic"],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:123},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,call,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){this.error("async call expression must be a call",call);}if(body==null){body=this.noop();}if(params){params=[params.head].concat(params.tail);}else{params=[];}func=this.func(params,body,true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",80480,126,2411,{macroName:"once!",macroData:[__node("MacroAccess",80488,117,2411,{op:"mutateFunction!",node:__wrap(func)},"expression",false,false,false)]},"expression",false,false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","params","many","?","sequence",["ident","head","ident","Parameter"],["ident","tail","many","*","sequence",["const",","],["this","ident","Parameter"]]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async",id:127},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,call,callback,error,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;callback=macroData.callback;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){this.error("async! call expression must be a call",call);}if(body==null){body=this.noop();}error=this.tmp("e",false);params=[this.param(error)].concat(params);func=this.func(params,callback==="throw"?__node("Block",80960,[__node("MacroAccess",80960,102,2425,{op:"throw?",node:__wrap(error)},"statement",false,false,false),__wrap(body)],null):__node("Block",81023,[__node("MacroAccess",81023,17,2429,{macroName:"if",macroData:{test:__node("MacroAccess",81035,20,2429,{op:"?",node:__wrap(error)},"statement",false,false,false),body:__node("MacroAccess",81044,39,2430,{macroName:"return",macroData:{node:__node("Call",81062,__wrap(callback),[__wrap(error)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",81175,126,2434,{macroName:"once!",macroData:[__node("MacroAccess",81183,117,2434,{op:"mutateFunction!",node:__wrap(func)},"expression",false,false,false)]},"expression",false,false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","callback","choice",["const","throw"],["ident","Expression"]],["ident","params","many","*","sequence",["const",","],["this","ident","Parameter"]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async!",id:128},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,_len,ident,identName,key,macroData,macroName,name,obj,path,requires,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;if(this.isConst(name)&&typeof this.value(name)!=="string"){this.error("Expected a constant string, got "+__typeof(this.value(name)),name);}if(this.isConst(name)){identName=this.value(name);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);return __node("MacroAccess",81666,38,2447,{macroName:"let",macroData:{declarable:__node("MacroAccess",81670,37,2447,__node("MacroAccess",81670,31,2447,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",81679,__node("Ident",81679,"require"),[__wrap(name)],false,false)}},"statement",false,false,false);}else if(this.isIdent(name)){path=this.name(name);return __node("MacroAccess",81758,38,2450,{macroName:"let",macroData:{declarable:__node("MacroAccess",81762,37,2450,__node("MacroAccess",81762,31,2450,{ident:__wrap(name)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",81770,__node("Ident",81770,"require"),[__wrap(path)],false,false)}},"statement",false,false,false);}else if(this.isObject(name)){requires=[];for(_arr=__toArray(this.pairs(name)), _i=0, _len=_arr.length;_i<_len;++_i){obj=_arr[_i];key=obj.key;value=obj.value;if(!this.isConst(key)){this.error("If providing an object to require!, all keys must be constant strings",key);}identName=this.value(key);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);if(this.isConst(value)){requires.push(__node("MacroAccess",82279,38,2462,{macroName:"let",macroData:{declarable:__node("MacroAccess",82283,37,2462,__node("MacroAccess",82283,31,2462,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",82292,__node("Ident",82292,"require"),[__wrap(value)],false,false)}},"statement",false,false,false));}else if(this.isIdent(value)){path=this.name(value);requires.push(__node("MacroAccess",82400,38,2465,{macroName:"let",macroData:{declarable:__node("MacroAccess",82404,37,2465,__node("MacroAccess",82404,31,2465,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",82413,__node("Ident",82413,"require"),[__wrap(path)],false,false)}},"statement",false,false,false));}else{this.error("If providing an object to require!, all values must be constant strings or idents",value);}}return this.block(requires);}else{return this.error("Expected either a constant string or ident or object",name);}};}.call(this));',params:[["ident","name","ident","Expression"]],names:"require!",id:129},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,arr,body,done,err,first,init,macroData,macroName,next,rest,result,results,step,test,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;_ref=results!=null?results:{};err=_ref.err;result=_ref.result;if(err==null){err=this.tmp("err",true);}if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}if(rest==null){rest=this.noop();}done=this.tmp("done",true,"function");if(!result){if(!step){return __node("Block",85663,[__wrap(init),__node("MacroAccess",85679,15,2576,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",85698,117,2576,{op:"",node:__node("Function",85698,[__node("Param",85699,__wrap(err),void 0,false,false,void 0)],__node("Block",85706,[__node("MacroAccess",85706,17,2577,{macroName:"if",macroData:{test:__node("MacroAccess",85720,20,2577,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",85727,39,2578,{macroName:"return",macroData:{node:__node("Call",85747,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",85760,17,2579,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",85785,39,2580,{macroName:"return",macroData:{node:__node("Call",85805,__wrap(done),[__const("null")],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",85836,15,2582,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",85855,117,2582,{op:"",node:__node("Function",85855,[__node("Param",85856,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",85881,__wrap(next),[],false,false)],null);}else{first=this.tmp("first",true,"boolean");return __node("Block",85970,[__wrap(init),__node("MacroAccess",85986,38,2589,{macroName:"let",macroData:{declarable:__node("MacroAccess",85999,37,2589,__node("MacroAccess",85999,31,2589,{ident:__wrap(first)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",86014,15,2590,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",86033,117,2590,{op:"",node:__node("Function",86033,[__node("Param",86034,__wrap(err),void 0,false,false,void 0)],__node("Block",86041,[__node("MacroAccess",86041,17,2591,{macroName:"if",macroData:{test:__node("MacroAccess",86055,20,2591,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",86062,39,2592,{macroName:"return",macroData:{node:__node("Call",86082,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",86095,17,2593,{macroName:"if",macroData:{test:__wrap(first),body:__node("MacroAccess",86117,30,2594,{left:__wrap(first),op:":=",right:__const("false")},"statement",false,false,false),elseIfs:[],elseBody:__wrap(step)}},"statement",false,false,false),__node("MacroAccess",86184,17,2597,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",86209,39,2598,{macroName:"return",macroData:{node:__node("Call",86229,__wrap(done),[__const("null")],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",86260,15,2600,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",86279,117,2600,{op:"",node:__node("Function",86279,[__node("Param",86280,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",86305,__wrap(next),[],false,false)],null);}}else{first=this.tmp("first",true,"boolean");value=this.tmp("value",true);arr=this.tmp("arr",true);return __node("Block",86456,[__wrap(init),__node("MacroAccess",86470,38,2609,{macroName:"let",macroData:{declarable:__node("MacroAccess",86481,37,2609,__node("MacroAccess",86481,31,2609,{ident:__wrap(first)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",86496,38,2610,{macroName:"let",macroData:{declarable:__node("MacroAccess",86507,37,2610,__node("MacroAccess",86507,31,2610,{ident:__wrap(arr)},"statement",false,false,false),"statement",false,false,false),value:__node("Array",86514,[])}},"statement",false,false,false),__node("MacroAccess",86518,15,2611,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",86535,117,2611,{op:"",node:__node("Function",86535,[__node("Param",86536,__wrap(err),void 0,false,false,void 0),__node("Param",86541,__wrap(value),void 0,false,false,void 0)],__node("Block",86551,[__node("MacroAccess",86551,17,2612,{macroName:"if",macroData:{test:__node("MacroAccess",86563,20,2612,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",86570,39,2613,{macroName:"return",macroData:{node:__node("Call",86588,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",86601,17,2614,{macroName:"if",macroData:{test:__wrap(first),body:__node("MacroAccess",86621,30,2615,{left:__wrap(first),op:":=",right:__const("false")},"statement",false,false,false),elseIfs:[],elseBody:__node("Block",86664,[__wrap(step),__node("MacroAccess",86682,17,2618,{macroName:"if",macroData:{test:__node("MacroAccess",86696,10,2618,{left:__node("Access",86696,__node("Args",86696),__node("Const",86707,"length")),inverted:false,op:"~>",right:__node("Const",86717,1)},"statement",false,false,false),body:__node("Call",86719,__node("Access",86719,__wrap(arr),__node("Const",86738,"push")),[__wrap(value)],false,false),elseIfs:[]}},"statement",false,false,false)],null)}},"statement",false,false,false),__node("MacroAccess",86750,17,2620,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",86773,39,2621,{macroName:"return",macroData:{node:__node("Call",86791,__wrap(done),[__const("null"),__wrap(arr)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",86826,15,2623,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",86843,117,2623,{op:"",node:__node("Function",86843,[__node("Param",86844,__wrap(err),void 0,false,false,void 0),__node("Param",86849,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",86876,__wrap(next),[],false,false)],null);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","init","choice",["ident","Statement"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:130},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,array,body,end,err,hasResult,inclusive,index,init,length,lengthCalc,macroData,macroName,next,parallelism,rest,result,results,start,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;rest=macroData.rest;_ref=results!=null?results:{};err=_ref.err;result=_ref.result;hasResult=!!result;if(err==null){err=this.tmp("err",true);}init=[];if(rest==null){rest=this.noop();}value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(parallelism==null){parallelism=__node("Const",87560,1);}if(index==null){index=this.tmp("i",true,"number");}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;_ref=this.callArgs(array);start=_ref[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",88146,60,2654,{op:"+",node:__wrap(start)},"expression",false,false,false);}if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",88344,60,2660,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",88404,60,2662,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",88607,60,2668,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",88669,60,2670,{op:"+",node:__wrap(step)},"expression",false,false,false));}body=__node("Block",88702,[__node("MacroAccess",88702,38,2673,{macroName:"let",macroData:{declarable:__node("MacroAccess",88713,37,2673,__node("MacroAccess",88713,31,2673,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",88722,49,2673,{left:__node("MacroAccess",88722,45,2673,{left:__wrap(index),inverted:false,op:"~*",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false),__wrap(body)],null);lengthCalc=__node("MacroAccess",88792,17,2676,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",88807,45,2677,{left:__node("MacroAccess",88816,49,2677,{left:__node("MacroAccess",88816,49,2677,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",88861,45,2679,{left:__node("MacroAccess",88870,49,2679,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false);if(!length){length=lengthCalc;}else{init.push(__node("MacroAccess",88977,38,2683,{macroName:"let",macroData:{declarable:__node("MacroAccess",88981,37,2683,__node("MacroAccess",88981,31,2683,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__wrap(lengthCalc)}},"statement",false,false,false));}}else{array=this.cache(array,init,"arr",true);body=__node("Block",89079,[__node("MacroAccess",89079,38,2688,{macroName:"let",macroData:{declarable:__node("MacroAccess",89090,37,2688,__node("MacroAccess",89090,31,2688,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",89099,__wrap(array),__wrap(index))}},"statement",false,false,false),__wrap(body)],null);if(!length){length=__node("MacroAccess",89178,60,2692,{op:"+",node:__node("Access",89180,__wrap(array),__node("Const",89187,"length"))},"expression",false,false,false);}else{init.push(__node("MacroAccess",89226,38,2694,{macroName:"let",macroData:{declarable:__node("MacroAccess",89230,37,2694,__node("MacroAccess",89230,31,2694,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",89240,60,2694,{op:"+",node:__node("Access",89242,__wrap(array),__node("Const",89249,"length"))},"expression",false,false,false)}},"statement",false,false,false));}}return __node("Block",89269,[__wrap(init),__node("Call",89281,__node("Ident",89281,"__async"),[__node("MacroAccess",89295,60,2698,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__wrap(length),__wrap(hasResult),__node("MacroAccess",89341,117,2699,{op:"",node:__node("Function",89341,[__node("Param",89342,__wrap(index),void 0,false,false,void 0),__node("Param",89349,__wrap(next),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"expression",false,false,false),__node("MacroAccess",89375,17,2700,{macroName:"if",macroData:{test:__wrap(hasResult),body:__node("MacroAccess",89401,117,2701,{op:"",node:__node("Function",89401,[__node("Param",89402,__wrap(err),void 0,false,false,void 0),__node("Param",89407,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",89452,117,2703,{op:"",node:__node("Function",89452,[__node("Param",89453,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"expression",false,false,false)],false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:131},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,index,init,key,keys,macroData,macroName,next,object,own,parallelism,rest,result,results,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;rest=macroData.rest;_ref=results!=null?results:{};err=_ref.err;result=_ref.result;own=type==="of";init=[];object=this.cache(object,init,"obj",true);if(rest==null){rest=this.noop();}index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}if(value){body=__node("Block",90137,[__node("MacroAccess",90137,38,2719,{macroName:"let",macroData:{declarable:__node("MacroAccess",90148,37,2719,__node("MacroAccess",90148,31,2719,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",90157,__wrap(object),__wrap(key))}},"statement",false,false,false),__wrap(body)],null);}keys=this.tmp("keys",true,"stringArray");return __node("Block",90246,[__wrap(init),__node("MacroAccess",90258,38,2725,{macroName:"let",macroData:{declarable:__node("MacroAccess",90267,37,2725,__node("MacroAccess",90267,31,2725,{ident:__wrap(keys)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",90275,17,2725,{macroName:"if",macroData:{test:__wrap(own),body:__node("Call",90284,__node("Ident",90284,"__keys"),[__wrap(object)],false,false),elseIfs:[],elseBody:__node("Call",90318,__node("Ident",90318,"__allkeys"),[__wrap(object)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",90344,131,2729,{macroName:"asyncfor",macroData:{parallelism:__wrap(parallelism),results:{err:__wrap(err),result:__wrap(result)},next:__wrap(next),value:__node("MacroAccess",90396,37,2729,__node("MacroAccess",90396,31,2729,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index)},array:__wrap(keys),body:__wrap(body),rest:__wrap(rest)}},"statement",false,false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:132},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,hasResult,index,iterator,macroData,macroName,next,parallelism,rest,result,results,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;iterator=macroData.iterator;body=macroData.body;rest=macroData.rest;_ref=results!=null?results:{};err=_ref.err;result=_ref.result;hasResult=!!result;if(rest==null){rest=this.noop();}if(index==null){index=this.tmp("i",true);}if(err==null){err=this.tmp("err",true);}if(parallelism==null){parallelism=__node("Const",90948,1);}return __node("Call",90963,__node("Ident",90963,"__asyncIter"),[__node("MacroAccess",90977,60,2743,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__node("Call",90991,__node("Ident",90991,"__iter"),[__wrap(iterator)],false,false),__wrap(hasResult),__node("MacroAccess",91031,117,2744,{op:"",node:__node("Function",91031,[__node("Param",91032,__wrap(value),void 0,false,false,void 0),__node("Param",91039,__wrap(index),void 0,false,false,void 0),__node("Param",91047,__wrap(next),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"expression",false,false,false),__node("MacroAccess",91071,17,2745,{macroName:"if",macroData:{test:__wrap(hasResult),body:__node("MacroAccess",91095,117,2746,{op:"",node:__node("Function",91095,[__node("Param",91096,__wrap(err),void 0,false,false,void 0),__node("Param",91101,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",91141,117,2748,{op:"",node:__node("Function",91141,[__node("Param",91142,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"expression",false,false,false)],false,false);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:133},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,macroData,macroName,next,rest,result,results,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;if(macroName==="asyncuntil"){test=__node("MacroAccess",91476,3,2753,{op:"not",node:__wrap(test)},"expression",false,false,false);}if(rest==null){rest=this.noop();}_ref=results!=null?results:{};err=_ref.err;result=_ref.result;return __node("MacroAccess",91562,130,2759,{macroName:"asyncfor",macroData:{results:{err:__wrap(err),result:__wrap(result)},next:__wrap(next),test:__wrap(test),step:__wrap(step),body:__wrap(body),rest:__wrap(rest)}},"statement",false,false,false);};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","Statement"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncwhile","asyncuntil"],id:134},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,body,current,done,elseBody,elseIf,elseIfs,err,i,innerTest,macroData,macroName,rest,result,results,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;done=macroData.done;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;rest=macroData.rest;if(macroName==="asyncunless"){test=__node("MacroAccess",92121,3,2766,{op:"not",node:__wrap(test)},"expression",false,false,false);}_ref=results!=null?results:{};err=_ref.err;result=_ref.result;if(rest==null){rest=this.noop();}if(elseBody){current=__node("MacroAccess",92258,117,2772,{op:"",node:__node("Function",92258,[__node("Param",92259,__wrap(done),void 0,false,false,void 0)],__wrap(elseBody),true,true,false,void 0,false,[])},"expression",false,false,false);}else{current=__node("MacroAccess",92302,117,2774,{op:"",node:__node("Function",92302,[__node("Param",92303,__wrap(done),void 0,false,false,void 0)],__node("Call",92313,__wrap(done),[],false,false),true,true,false,void 0,false,[])},"expression",false,false,false);}i=__num(elseIfs.length)-1;for(;i>=0;--i){elseIf=elseIfs[i];innerTest=elseIf.test;if(elseIf.type==="unless"){innerTest=__node("MacroAccess",92528,3,2781,{op:"not",node:__wrap(innerTest)},"expression",false,false,false);}current=__node("MacroAccess",92565,17,2782,{macroName:"if",macroData:{test:__wrap(innerTest),body:__node("MacroAccess",92590,117,2783,{op:"",node:__node("Function",92590,[__node("Param",92591,__wrap(done),void 0,false,false,void 0)],__wrap(elseIf.body),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}current=__node("MacroAccess",92669,17,2787,{macroName:"if",macroData:{test:__wrap(test),body:__node("MacroAccess",92686,117,2788,{op:"",node:__node("Function",92686,[__node("Param",92687,__wrap(done),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);if(!err&&!result){return __node("Call",92773,__wrap(current),[__node("MacroAccess",92791,117,2794,{op:"",node:__node("Function",92791,[],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}else if(!result){return __node("Call",92835,__wrap(current),[__node("MacroAccess",92853,117,2797,{op:"",node:__node("Function",92853,[__node("Param",92854,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}else{if(err==null){err=this.tmp("err",true);}return __node("Call",92919,__wrap(current),[__node("MacroAccess",92937,117,2801,{op:"",node:__node("Function",92937,[__node("Param",92938,__wrap(err),void 0,false,false,void 0),__node("Param",92943,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","done","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncif","asyncunless"],id:135},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var func,key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;func=macroData.func;return this.def(key,func);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["ident","func","ident","FunctionDeclaration"]],names:"def",id:136},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var key,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;return this.def(key,value);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["const","="],["ident","value","ident","ExpressionOrAssignment"]],names:"def",id:137},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;return this.def(key,void 0);};}.call(this));',params:[["ident","key","ident","ObjectKey"]],names:"def",id:138},{code:'return (function(){"use strict";var __isArray,__owns,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,_len,_ref,_this,assignment,body,constructorCount,ctor,declaration,displayName,generic,genericArg,genericArgs,genericCache,genericParams,hasSuperclass,hasTopLevelConstructor,i,init,instanceofLets,instanceofs,item,key,macroData,macroName,makeClassFunc,makeClassIdent,name,parts,prototype,result,self,sup,superclass,superproto;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;generic=macroData.generic;superclass=macroData.superclass;body=macroData.body;if(generic!=null){genericArgs=[generic.head].concat(__toArray(generic.tail));}else{genericArgs=[];}if(this.isIdent(name)){declaration=name;}else if(this.isAccess(name)){assignment=name;if(this.isConst(this.child(name))&&typeof this.value(this.child(name))==="string"){if((_ref=this.ident(this.value(this.child(name))))!=null){name=_ref;}else{name=this.tmp("class",false,"function");}}else{name=this.tmp("class",false,"function");}}else{name=this.tmp("class",false,"function");}if(this.isIdent(superclass)&&this.name(superclass)==="Object"){superclass=null;}hasSuperclass=!!superclass;sup=superclass&&(this.isIdent(superclass)?superclass:this.tmp("super",false,"function"));init=[];if(!superclass){superproto=__node("Access",94182,__node("Ident",94182,"Object"),__node("Const",94190,"prototype"));}else{superproto=this.tmp(this.isIdent(sup)?__strnum(this.name(sup))+"_prototype":"super_prototype",false,"object");}prototype=this.tmp(this.isIdent(name)?__strnum(this.name(name))+"_prototype":"prototype",false,"object");if(superclass){init.push(__node("MacroAccess",94454,38,2841,{macroName:"let",macroData:{declarable:__node("MacroAccess",94458,37,2841,__node("MacroAccess",94458,31,2841,{ident:__wrap(superproto)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",94472,__wrap(sup),__node("Const",94478,"prototype"))}},"statement",false,false,false));init.push(__node("MacroAccess",94507,38,2842,{macroName:"let",macroData:{declarable:__node("MacroAccess",94511,37,2842,__node("MacroAccess",94511,31,2842,{ident:__wrap(prototype)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",94524,30,2842,{left:__node("Access",94524,__wrap(name),__node("Const",94531,"prototype")),op:":=",right:__node("Object",94543,[],__wrap(superproto))},"expression",false,false,false)}},"statement",false,false,false));init.push(__node("MacroAccess",94588,30,2843,{left:__node("Access",94588,__wrap(prototype),__node("Const",94600,"constructor")),op:":=",right:__wrap(name)},"expression",false,false,false));}else{init.push(__node("MacroAccess",94649,38,2845,{macroName:"let",macroData:{declarable:__node("MacroAccess",94653,37,2845,__node("MacroAccess",94653,31,2845,{ident:__wrap(prototype)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",94666,__wrap(name),__node("Const",94673,"prototype"))}},"statement",false,false,false));}if(this.isIdent(name)){displayName=this["const"](this.name(name));}if(displayName!=null){if(genericArgs.length>0){parts=[displayName,this["const"]("<")];for(i=0, _len=genericArgs.length;i<_len;++i){genericArg=genericArgs[i];if(i>0){parts.push(this["const"](", "));}parts.push(__node("MacroAccess",94988,16,2854,{macroName:"if",macroData:{test:__node("MacroAccess",94991,8,2854,{left:__wrap(genericArg),inverted:false,op:"!~=",right:__const("null")},"expression",false,false,false),body:__node("Call",95018,__node("Ident",95018,"__name"),[__wrap(genericArg)],false,false),elseIfs:[],elseBody:__node("Const",95044,"")}},"expression",false,false,false));}parts.push(this["const"](">"));displayName=this.binaryChain("+",parts);}init.push(__node("MacroAccess",95147,30,2857,{left:__node("Access",95147,__wrap(name),__node("Const",95154,"displayName")),op:":=",right:__wrap(displayName)},"expression",false,false,false));}if(superclass){init.push(__node("If",95226,__node("Binary",95226,__node("Unary",95226,"typeof",__node("Access",95226,__wrap(sup),__node("Const",95232,"extended"))),"===",__node("Const",95226,"function")),__node("Call",95226,__node("Access",95226,__wrap(sup),__node("Const",95232,"extended")),[__wrap(name)],false,false),__node("Nothing",0),null));}function fixSupers(node){return _this.walk(node,function(node){var _arr,_arr2,_i,_len,args,child,superArg;if(_this.isSuper(node)){child=_this.superChild(node);if(child!=null){child=fixSupers(child);}for(_arr=[], _arr2=__toArray(_this.superArgs(node)), _i=0, _len=_arr2.length;_i<_len;++_i){superArg=_arr2[_i];_arr.push(fixSupers(superArg));}args=_arr;return _this.call(child!=null?__node("Access",95574,__wrap(superproto),__wrap(child)):!superclass?__node("Ident",95644,"Object"):__wrap(sup),[__node("This",95704)].concat(args),false,true);}});};body=fixSupers(this.macroExpandAll(body));constructorCount=0;this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){++constructorCount;}}return;});hasTopLevelConstructor=false;if(constructorCount===1){this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"&&_this.isFunc(_this.right(node))&&!_this.funcIsCurried(_this.right(node))){hasTopLevelConstructor=true;}return node;}else{return node;}});}self=this.tmp("this");if(hasTopLevelConstructor){body=this.walk(body,function(node){var constructor,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",96951,16,2914,{macroName:"if",macroData:{test:__node("MacroAccess",96954,74,2914,{left:__node("Eval",96954,__node("Const",96960,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",96989,__node("Const",96995,"this")),elseIfs:[],elseBody:__node("Object",97007,[],__wrap(prototype))}},"statement",false,false,false)),value);init.unshift(__node("MacroAccess",97068,38,2915,{macroName:"let",macroData:{declarable:__node("MacroAccess",97072,37,2915,__node("MacroAccess",97072,31,2915,{ident:__wrap(name)},"statement",false,false,false),"statement",false,false,false),value:__wrap(constructor)}},"statement",false,false,false));return _this.noop();}}else{return node;}});}else if(constructorCount!==0){ctor=this.tmp("ctor",false,"function");result=this.tmp("ref");init.push(__node("Block",97272,[__node("MacroAccess",97272,38,2923,{macroName:"let",macroData:{declarable:__node("MacroAccess",97283,37,2923,__node("MacroAccess",97283,31,2923,{isMutable:"mutable",ident:__wrap(ctor)},"statement",false,false,false),"statement",false,false,false),value:__const("void")}},"statement",false,false,false),__node("MacroAccess",97305,15,2924,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",97322,117,2924,{op:"",node:__node("Function",97322,[],__node("Block",97325,[__node("MacroAccess",97325,38,2925,{macroName:"let",macroData:{declarable:__node("MacroAccess",97338,37,2925,__node("MacroAccess",97338,31,2925,{ident:__wrap(self)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",97346,16,2925,{macroName:"if",macroData:{test:__node("MacroAccess",97349,74,2925,{left:__node("This",97349),inverted:false,op:"instanceof",right:__wrap(name)},"expression",false,false,false),body:__node("This",97376),elseIfs:[],elseBody:__node("Object",97386,[],__wrap(prototype))}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",97421,17,2927,{macroName:"if",macroData:{test:__node("MacroAccess",97433,26,2927,{op:"isFunction!",node:__wrap(ctor)},"statement",false,false,false),body:__node("Block",97453,[__node("MacroAccess",97453,38,2928,{macroName:"let",macroData:{declarable:__node("MacroAccess",97468,37,2928,__node("MacroAccess",97468,31,2928,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",97478,__wrap(ctor),[__wrap(self),__node("Spread",97492,__node("Args",97496))],false,true)}},"statement",false,false,false),__node("MacroAccess",97506,17,2929,{macroName:"if",macroData:{test:__node("MacroAccess",97520,5,2929,{left:__node("Call",97520,__node("Ident",97520,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__node("MacroAccess",97548,39,2930,{macroName:"return",macroData:{node:__wrap(result)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false)],null),elseIfs:[{type:"if",test:__wrap(hasSuperclass),body:__node("Block",97611,[__node("MacroAccess",97611,38,2932,{macroName:"let",macroData:{declarable:__node("MacroAccess",97626,37,2932,__node("MacroAccess",97626,31,2932,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",97636,__wrap(sup),[__wrap(self),__node("Spread",97649,__node("Args",97653))],false,true)}},"statement",false,false,false),__node("MacroAccess",97663,17,2933,{macroName:"if",macroData:{test:__node("MacroAccess",97677,5,2933,{left:__node("Call",97677,__node("Ident",97677,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__node("MacroAccess",97705,39,2934,{macroName:"return",macroData:{node:__wrap(result)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false)],null)}]}},"statement",false,false,false),__wrap(self)],null),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false)],null));body=this.walk(body,function(node){var constructor,firstArg,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);if(_this.isCall(value)&&_this.isIdent(_this.callFunc(value))&&_this.name(_this.callFunc(value))==="__curry"&&_this.callArgs(value).length===2&&_this.isFunc(_this.callArgs(value)[1])){firstArg=_this.callArgs(value)[0];constructor=_this.callArgs(value)[1];constructor=_this.rewrap(_this.func(_this.funcParams(constructor),_this.funcBody(constructor),false,__node("MacroAccess",98390,16,2948,{macroName:"if",macroData:{test:__node("MacroAccess",98393,74,2948,{left:__node("Eval",98393,__node("Const",98399,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",98428,__node("Const",98434,"this")),elseIfs:[],elseBody:__node("Object",98446,[],__wrap(prototype))}},"statement",false,false,false),false),value);return __node("MacroAccess",98519,30,2950,{left:__wrap(ctor),op:":=",right:__node("Call",98528,__node("Ident",98528,"__curry"),[__wrap(firstArg),__wrap(constructor)],false,false)},"expression",false,false,false);}else if(_this.isFunc(value)){constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",98753,16,2956,{macroName:"if",macroData:{test:__node("MacroAccess",98756,74,2956,{left:__node("Eval",98756,__node("Const",98762,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",98791,__node("Const",98797,"this")),elseIfs:[],elseBody:__node("Object",98809,[],__wrap(prototype))}},"statement",false,false,false),_this.funcIsCurried(value)),value);return __node("MacroAccess",98899,30,2958,{left:__wrap(ctor),op:":=",right:__wrap(constructor)},"expression",false,false,false);}else{return __node("MacroAccess",98957,30,2960,{left:__wrap(ctor),op:":=",right:__wrap(value)},"expression",false,false,false);}}}});}else if(!superclass){init.push(__node("MacroAccess",99029,15,2964,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",99048,117,2964,{op:"",node:__node("Function",99048,[],__node("MacroAccess",99053,16,2964,{macroName:"if",macroData:{test:__node("MacroAccess",99056,74,2964,{left:__node("This",99056),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("This",99083),elseIfs:[],elseBody:__node("Object",99093,[],__wrap(prototype))}},"statement",false,false,false),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false));}else{result=this.tmp("ref");init.push(__node("MacroAccess",99181,15,2968,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",99200,117,2968,{op:"",node:__node("Function",99200,[],__node("Block",99203,[__node("MacroAccess",99203,38,2969,{macroName:"let",macroData:{declarable:__node("MacroAccess",99218,37,2969,__node("MacroAccess",99218,31,2969,{ident:__wrap(self)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",99226,16,2969,{macroName:"if",macroData:{test:__node("MacroAccess",99229,74,2969,{left:__node("This",99229),inverted:false,op:"instanceof",right:__wrap(name)},"expression",false,false,false),body:__node("This",99256),elseIfs:[],elseBody:__node("Object",99266,[],__wrap(prototype))}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",99290,38,2970,{macroName:"let",macroData:{declarable:__node("MacroAccess",99305,37,2970,__node("MacroAccess",99305,31,2970,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",99315,__wrap(sup),[__wrap(self),__node("Spread",99328,__node("Args",99332))],false,true)}},"statement",false,false,false),__node("MacroAccess",99342,17,2971,{macroName:"if",macroData:{test:__node("MacroAccess",99356,5,2971,{left:__node("Call",99356,__node("Ident",99356,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__wrap(result),elseIfs:[],elseBody:__wrap(self)}},"statement",false,false,false)],null),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false));}function changeDefs(node){return _this.walk(node,function(node){var _ref,key,value;if(_this.isDef(node)){key=_this.left(node);if((_ref=_this.right(node))!=null){value=_ref;}else{value=__node("MacroAccess",99593,117,2979,{op:"",node:__node("Function",99593,[],__node("MacroAccess",99595,11,2979,{op:"throw",node:__node("Call",99601,__node("Ident",99601,"Error"),[__node("MacroAccess",99608,69,2979,{left:__node("MacroAccess",99608,69,2979,{left:__node("MacroAccess",99608,69,2979,{left:__node("MacroAccess",99608,69,2979,{left:__node("Const",99608,"Not implemented: "),op:"",right:__node("Call",99628,__node("Ident",99628,"__name"),[__node("Access",99635,__node("This",99635),__node("Const",99636,"constructor"))],false,false)},"expression",false,false,false),op:"",right:__node("Const",99608,".")},"expression",false,false,false),op:"",right:__wrap(key)},"expression",false,false,false),op:"",right:__node("Const",99608,"()")},"expression",false,false,false)],false,false)},"statement",false,false,false),true,false,false,void 0,false,[])},"expression",false,false,false);}return changeDefs(__node("MacroAccess",99684,30,2980,{left:__node("Access",99684,__wrap(prototype),__wrap(key)),op:":=",right:__wrap(value)},"expression",false,false,false));}});};body=changeDefs(body);body=this.walk(body,function(node){if(_this.isFunc(node)){if(!_this.funcIsBound(node)){return node;}}else if(_this.isThis(node)){return name;}});result=__node("MacroAccess",99929,104,2990,{macroName:"do",macroData:{locals:{ident:__wrap(sup),value:__wrap(superclass),rest:[]},body:__node("Block",99952,[__wrap(init),__wrap(body),__node("MacroAccess",99976,39,2993,{macroName:"return",macroData:{node:__wrap(name)}},"statement",false,false,false)],null)}},"statement",false,false,false);if(genericArgs.length>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeClassIdent=this.tmp("make",false,"function");instanceofs={};for(_i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",100451,38,3005,{macroName:"let",macroData:{declarable:__node("MacroAccess",100455,37,3005,__node("MacroAccess",100455,31,3005,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",100462,__node("Ident",100462,"__getInstanceof"),[__wrap(genericArg)],false,false)}},"statement",false,false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",100936,__wrap(func),[__wrap(left)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",101102,[__wrap(instanceofLets),__wrap(result)],null);}makeClassFunc=this.func(genericParams,result,true,false);result=__node("Call",101237,__node("Ident",101237,"__genericFunc"),[__wrap(genericArgs.length),__wrap(makeClassFunc)],false,false);}if(declaration!=null){return __node("MacroAccess",101328,38,3029,{macroName:"let",macroData:{declarable:__node("MacroAccess",101332,37,3029,__node("MacroAccess",101332,31,3029,{ident:__wrap(declaration)},"statement",false,false,false),"statement",false,false,false),value:__wrap(result)}},"statement",false,false,false);}else if(assignment!=null){return __node("MacroAccess",101390,30,3031,{left:__wrap(assignment),op:":=",right:__wrap(result)},"expression",false,false,false);}else{return result;}};}.call(this));',params:[["ident","name","many","?","ident","SimpleAssignable"],["ident","generic","many","?","sequence",["const","<"],["ident","head","ident","Identifier"],["ident","tail","many","*","sequence",["const",","],["this","ident","Identifier"]],["const",">"]],["ident","superclass","many","?","sequence",["const","extends"],["this"]],["ident","body","many","?","ident","Body"]],names:"class",id:139},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){this.error("Can only use yield in a generator function");}return this.mutateLast(node||this.noop(),function(n){return _this["yield"](n);},true);};}.call(this));',params:[["ident","node","many","?","ident","Expression"]],names:"yield",id:140},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var err,index,init,item,iterator,length,macroData,macroName,node,received,send;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){this.error("Can only use yield* in a generator function");}init=[];if(this.isType(node,"arrayLike")){index=this.tmp("i",false,"number");init.push(__node("MacroAccess",101860,38,3048,{macroName:"let",macroData:{declarable:__node("MacroAccess",101864,37,3048,__node("MacroAccess",101864,31,3048,{ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",101874,0)}},"statement",false,false,false));length=this.tmp("len",false,"number");node=this.cache(node,init,"arr",false);init.push(__node("MacroAccess",101985,38,3051,{macroName:"let",macroData:{declarable:__node("MacroAccess",101989,37,3051,__node("MacroAccess",101989,31,3051,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",101999,__wrap(node),__node("Const",102006,"length"))}},"statement",false,false,false));return __node("Block",102023,[__node("MacroAccess",102023,106,3053,{macroName:"for",macroData:{init:__wrap(init),test:__node("MacroAccess",102041,9,3053,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"statement",false,false,false),step:__node("MacroAccess",102060,103,3053,{left:__wrap(index),op:"+=",right:__node("Const",102071,1)},"expression",false,false,false),body:__node("MacroAccess",102073,140,3054,{macroName:"yield",macroData:{node:__node("Access",102088,__wrap(node),__wrap(index))}},"statement",false,false,false)}},"statement",false,false,false),__const("void")],null);}else{iterator=this.cache(__node("Call",102157,__node("Ident",102157,"__iter"),[__wrap(node)],false,false),init,"iter",false);err=this.tmp("e",true);send=this.tmp("send");item=this.tmp("item");received=this.tmp("tmp");return __node("Block",102319,[__wrap(init),__node("MacroAccess",102333,38,3064,{macroName:"let",macroData:{declarable:__node("MacroAccess",102344,37,3064,__node("MacroAccess",102344,31,3064,{isMutable:"mutable",ident:__wrap(received)},"statement",false,false,false),"statement",false,false,false),value:__const("void")}},"statement",false,false,false),__node("MacroAccess",102370,38,3065,{macroName:"let",macroData:{declarable:__node("MacroAccess",102381,37,3065,__node("MacroAccess",102381,31,3065,{isMutable:"mutable",ident:__wrap(send)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",102412,108,3067,{macroName:"while",macroData:{test:__const("true"),body:__node("Block",102431,[__node("MacroAccess",102431,38,3068,{macroName:"let",macroData:{declarable:__node("MacroAccess",102444,37,3068,__node("MacroAccess",102444,31,3068,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",102452,16,3068,{macroName:"if",macroData:{test:__wrap(send),body:__node("Call",102466,__node("Access",102466,__wrap(iterator),__node("Const",102477,"send")),[__wrap(received)],false,false),elseIfs:[],elseBody:__node("Call",102497,__node("Access",102497,__wrap(iterator),__node("Const",102508,"throw")),[__wrap(received)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",102525,17,3069,{macroName:"if",macroData:{test:__node("Access",102537,__wrap(item),__node("Const",102544,"done")),body:__node("MacroAccess",102549,19,3070,{macroName:"break",macroData:{}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",102567,119,3071,{macroName:"try",macroData:{tryBody:__node("Block",102581,[__node("MacroAccess",102581,30,3072,{left:__wrap(received),op:":=",right:__node("MacroAccess",102605,140,3072,{macroName:"yield",macroData:{node:__node("Access",102611,__wrap(item),__node("Const",102618,"value"))}},"expression",false,false,false)},"statement",false,false,false),__node("MacroAccess",102624,30,3073,{left:__wrap(send),op:":=",right:__const("true")},"statement",false,false,false)],null),typedCatches:[],catchPart:{ident:__wrap(err),body:__node("Block",102671,[__node("MacroAccess",102671,30,3075,{left:__wrap(received),op:":=",right:__wrap(err)},"statement",false,false,false),__node("MacroAccess",102701,30,3076,{left:__wrap(send),op:":=",right:__const("false")},"statement",false,false,false)],null)}}},"statement",false,false,false)],null)}},"statement",false,false,false),__node("MacroAccess",102728,119,3077,{macroName:"try",macroData:{tryBody:__node("Call",102740,__node("Access",102740,__wrap(iterator),__node("Const",102760,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err),body:__const("void")}}},"statement",false,false,false),__node("Access",102802,__wrap(item),__node("Const",102816,"value"))],null);}};}.call(this));',params:[["ident","node","ident","Expression"]],names:"yield*",id:141},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node,rest;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;rest=macroData.rest;if(rest==null){rest=this.noop();}return __node("Block",102917,[__wrap(rest),__node("MacroAccess",102929,39,3088,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false)],null);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","rest","ident","DedentedBody"]],names:"returning",id:142},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;node=macroData.node;return this.withLabel(node,label);};}.call(this));',params:[["ident","label","ident","Identifier"],["ident","node","choice",["ident","Statement"],["ident","Body"]]],names:"label!",id:145},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node,sync;macroName=macroFullData.macroName;macroData=macroFullData.macroData;sync=macroData.sync;node=macroData.node;if(this.isFunc(node)&&!this.funcIsGenerator(node)){this.error("promise! must be used with a generator function",node);}if(sync&&this.isFunc(node)){this.error("Use .sync() to retrieve asynchronously",sync);}if(!sync||this.isConst(sync)&&!this.value(sync)){return __node("Call",118220,__node("Ident",118220,"__promise"),[__wrap(node)],false,false);}else{return __node("Call",118257,__node("Ident",118257,"__promise"),[__wrap(node),__wrap(sync)],false,false);}};}.call(this));',params:[["ident","sync","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","node","ident","Expression"]],names:"promise!",id:154},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,sync;macroName=macroFullData.macroName;macroData=macroFullData.macroData;sync=macroData.sync;body=macroData.body;func=this.rewrap(this.func([],body,true,true,false,null,true),body);if(!sync||this.isConst(sync)&&!this.value(sync)){return __node("Call",118537,__node("Ident",118537,"__generatorToPromise"),[__node("Call",118561,__wrap(func),[],false,false)],false,false);}else{return __node("Call",118589,__node("Ident",118589,"__generatorToPromise"),[__node("Call",118613,__wrap(func),[],false,false),__wrap(sync)],false,false);}};}.call(this));',params:[["ident","sync","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","body","ident","GeneratorBody"]],names:"promise!",id:155},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,array,body,end,inclusive,index,init,length,lengthCalc,macroData,macroName,parallelism,start,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;init=[];value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(parallelism==null){parallelism=__node("Const",124946,1);}if(index==null){index=this.tmp("i",true,"number");}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;_ref=this.callArgs(array);start=_ref[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",125532,60,3879,{op:"+",node:__wrap(start)},"expression",false,false,false);}if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",125730,60,3885,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",125790,60,3887,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",125993,60,3893,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",126055,60,3895,{op:"+",node:__wrap(step)},"expression",false,false,false));}body=__node("Block",126088,[__node("MacroAccess",126088,38,3898,{macroName:"let",macroData:{declarable:__node("MacroAccess",126099,37,3898,__node("MacroAccess",126099,31,3898,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",126108,49,3898,{left:__node("MacroAccess",126108,45,3898,{left:__wrap(index),inverted:false,op:"~*",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false),__wrap(body)],null);lengthCalc=__node("MacroAccess",126178,17,3901,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",126193,45,3902,{left:__node("MacroAccess",126202,49,3902,{left:__node("MacroAccess",126202,49,3902,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",126247,45,3904,{left:__node("MacroAccess",126256,49,3904,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false);if(!length){length=lengthCalc;}else{init.push(__node("MacroAccess",126363,38,3908,{macroName:"let",macroData:{declarable:__node("MacroAccess",126367,37,3908,__node("MacroAccess",126367,31,3908,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__wrap(lengthCalc)}},"statement",false,false,false));}}else{array=this.cache(array,init,"arr",true);body=__node("Block",126465,[__node("MacroAccess",126465,38,3913,{macroName:"let",macroData:{declarable:__node("MacroAccess",126476,37,3913,__node("MacroAccess",126476,31,3913,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",126485,__wrap(array),__wrap(index))}},"statement",false,false,false),__wrap(body)],null);if(!length){length=__node("MacroAccess",126564,60,3917,{op:"+",node:__node("Access",126566,__wrap(array),__node("Const",126573,"length"))},"expression",false,false,false);}else{init.push(__node("MacroAccess",126612,38,3919,{macroName:"let",macroData:{declarable:__node("MacroAccess",126616,37,3919,__node("MacroAccess",126616,31,3919,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",126626,60,3919,{op:"+",node:__node("Access",126628,__wrap(array),__node("Const",126635,"length"))},"expression",false,false,false)}},"statement",false,false,false));}}return __node("Block",126655,[__wrap(init),__node("Call",126667,__node("Ident",126667,"__promiseLoop"),[__node("MacroAccess",126688,60,3923,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__wrap(length),__node("Call",126711,__node("Ident",126711,"__promise"),[__node("MacroAccess",126723,117,3923,{op:"",node:__node("Function",126723,[__node("Param",126724,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,true,[])},"expression",false,false,false)],false,false)],false,false)],null);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:163},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,index,init,key,keys,macroData,macroName,object,own,parallelism,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;own=type==="of";init=[];object=this.cache(object,init,"obj",true);index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}if(value){body=__node("Block",127202,[__node("MacroAccess",127202,38,3936,{macroName:"let",macroData:{declarable:__node("MacroAccess",127215,37,3936,__node("MacroAccess",127215,31,3936,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",127224,__wrap(object),__wrap(key))}},"statement",false,false,false),__wrap(body)],null);}keys=this.tmp("keys",true,"stringArray");return __node("Block",127319,[__wrap(init),__node("MacroAccess",127333,38,3942,{macroName:"let",macroData:{declarable:__node("MacroAccess",127344,37,3942,__node("MacroAccess",127344,31,3942,{ident:__wrap(keys)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",127352,17,3942,{macroName:"if",macroData:{test:__wrap(own),body:__node("Call",127361,__node("Ident",127361,"__keys"),[__wrap(object)],false,false),elseIfs:[],elseBody:__node("Call",127399,__node("Ident",127399,"__allkeys"),[__wrap(object)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",127427,163,3946,{macroName:"promisefor",macroData:{parallelism:__wrap(parallelism),value:__node("MacroAccess",127459,37,3946,__node("MacroAccess",127459,31,3946,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index)},array:__wrap(keys),body:__wrap(body)}},"statement",false,false,false)],null);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:164},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,index,iterator,macroData,macroName,parallelism,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;value=macroData.value;index=macroData.index;iterator=macroData.iterator;body=macroData.body;if(index==null){index=this.tmp("i",true);}return __node("Call",127685,__node("Ident",127685,"__promiseIter"),[__node("MacroAccess",127706,60,3953,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__node("Call",127720,__node("Ident",127720,"__iter"),[__wrap(iterator)],false,false),__node("Call",127739,__node("Ident",127739,"__promise"),[__node("MacroAccess",127751,117,3953,{op:"",node:__node("Function",127751,[__node("Param",127752,__wrap(value),void 0,false,false,void 0),__node("Param",127759,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,true,[])},"expression",false,false,false)],false,false)],false,false);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:165},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.line());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__LINE__",id:166},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.column());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__COLUMN__",id:167},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.file());};}.call(this));',options:{type:"string"},params:[["const",""]],names:"__FILE__",id:168},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](new Date().getTime());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__DATEMSEC__",id:169},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.version());};}.call(this));',options:{type:"string"},params:[["const",""]],names:"__VERSION__",id:170}],binaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&&",right);};}.call(this));',operators:"and",options:{precedence:1},id:1},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"||",right);};}.call(this));',operators:"or",options:{precedence:1},id:2},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"===",right);};}.call(this));',operators:"==",options:{precedence:2,maximum:1,type:"boolean"},id:5},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",1163,3,43,{op:"not",node:__node("MacroAccess",1169,5,43,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"!=",options:{precedence:2,maximum:1,type:"boolean"},id:6},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"==",right);};}.call(this));',operators:"~=",options:{precedence:2,maximum:1,type:"boolean"},id:7},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",1369,3,49,{op:"not",node:__node("MacroAccess",1375,7,49,{left:__wrap(left),inverted:false,op:"~=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"!~=",options:{precedence:2,maximum:1,type:"boolean"},id:8},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,op==="~<"&&"<"||"<=",right);};}.call(this));',operators:["~<","~<="],options:{precedence:2,maximum:1,type:"boolean"},id:9},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return op==="~>"&&__node("MacroAccess",1694,3,57,{op:"not",node:__node("MacroAccess",1700,9,57,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false)||__node("MacroAccess",1726,3,57,{op:"not",node:__node("MacroAccess",1732,9,57,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:["~>","~>="],options:{precedence:2,maximum:1,type:"boolean"},id:10},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){return this.binary(this.binary(this["const"](""),"+",left),"+",right);}else if(this.isConst(left)&&this.value(left)===""&&this.isType(right,"string")){return right;}else if(this.isConst(right)&&this.value(right)===""&&this.isType(left,"string")){return left;}else{return this.binary(left,"+",right);}};}.call(this));',operators:"~&",options:{precedence:7,type:"string"},id:29},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~\\\\"){return __node("Call",11176,__node("Access",11176,__node("Ident",11176,"Math"),__node("Const",11182,"floor")),[__wrap(this.binary(left,"/",right))],false,false);}else if(op==="~*"){return this.binary(left,"*",right);}else if(op==="~/"){return this.binary(left,"/",right);}else{return this.binary(left,"%",right);}};}.call(this));',operators:["~*","~/","~%","~\\"],options:{precedence:11,type:"number"},id:45},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~+"){if(!this.isType(right,"numeric")){return this.binary(left,"-",__node("MacroAccess",12451,48,365,{op:"~-",node:__wrap(right)},"expression",false,false,false));}else{if(!this.isType(left,"numeric")){left=__node("MacroAccess",12529,48,368,{op:"~+",node:__wrap(left)},"expression",false,false,false);}return this.binary(left,"+",right);}}else{return this.binary(left,"-",right);}};}.call(this));',operators:["~+","~-"],options:{precedence:10,type:"number"},id:49},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,value;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===0){return __node("Block",12777,[__wrap(left),__node("Const",12799,1)],null);}else if(value===0.5){return __node("Call",12843,__node("Access",12843,__node("Ident",12843,"Math"),__node("Const",12849,"sqrt")),[__wrap(left)],false,false);}else if(value===1){return __node("MacroAccess",12900,48,383,{op:"~+",node:__wrap(left)},"expression",false,false,false);}else if(value===2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",12994,45,386,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false);});}else if(value===3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",13099,45,389,{left:__node("MacroAccess",13099,45,389,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false);});}else if(value===-0.5){return __node("MacroAccess",13172,45,391,{left:__node("Const",13173,1),inverted:false,op:"~/",right:__node("Call",13177,__node("Access",13177,__node("Ident",13177,"Math"),__node("Const",13183,"sqrt")),[__wrap(left)],false,false)},"expression",false,false,false);}else if(value===-1){return __node("MacroAccess",13237,45,393,{left:__node("Const",13238,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false);}else if(value===-2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",13336,45,396,{left:__node("Const",13337,1),inverted:false,op:"~/",right:__node("MacroAccess",13343,45,396,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false)},"expression",false,false,false);});}else if(value===-3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",13450,45,399,{left:__node("Const",13451,1),inverted:false,op:"~/",right:__node("MacroAccess",13457,45,399,{left:__node("MacroAccess",13457,45,399,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false)},"expression",false,false,false);});}}return __node("Call",13492,__node("Access",13492,__node("Ident",13492,"Math"),__node("Const",13498,"pow")),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"~^",options:{precedence:12,rightToLeft:!0,type:"number"},id:50},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~bitlshift"){return this.binary(left,"<<",right);}else if(op==="~bitrshift"){return this.binary(left,">>",right);}else{return this.binary(left,">>>",right);}};}.call(this));',operators:["~bitlshift","~bitrshift","~biturshift"],options:{precedence:9,maximum:1,type:"number"},id:54},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",18190,50,560,{left:__node("MacroAccess",18190,60,560,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~^",right:__node("MacroAccess",18200,60,560,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"^",options:{precedence:12,rightToLeft:!0,type:"number"},id:62},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="*"){return __node("MacroAccess",18432,45,568,{left:__node("MacroAccess",18432,60,568,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__node("MacroAccess",18442,60,568,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="/"){return __node("MacroAccess",18479,45,570,{left:__node("MacroAccess",18479,60,570,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~/",right:__node("MacroAccess",18489,60,570,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="%"){return __node("MacroAccess",18526,45,572,{left:__node("MacroAccess",18526,60,572,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~%",right:__node("MacroAccess",18536,60,572,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",18560,45,574,{left:__node("MacroAccess",18560,60,574,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__node("MacroAccess",18570,60,574,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["*","/","%","\\"],options:{precedence:11,type:"number"},id:64},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="+"){return __node("MacroAccess",18744,49,581,{left:__node("MacroAccess",18744,60,581,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~+",right:__node("MacroAccess",18754,60,581,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",18778,49,583,{left:__node("MacroAccess",18778,60,583,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~-",right:__node("MacroAccess",18788,60,583,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["+","-"],options:{precedence:10,type:"number"},id:66},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="bitlshift"){return __node("MacroAccess",18931,54,587,{left:__node("MacroAccess",18931,60,587,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitlshift",right:__node("MacroAccess",18949,60,587,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitrshift"){return __node("MacroAccess",18994,54,589,{left:__node("MacroAccess",18994,60,589,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitrshift",right:__node("MacroAccess",19012,60,589,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",19036,54,591,{left:__node("MacroAccess",19036,60,591,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~biturshift",right:__node("MacroAccess",19055,60,591,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["bitlshift","bitrshift","biturshift"],options:{precedence:9,maximum:1,type:"number"},id:67},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isType(left,"stringOrNumber")){if(!this.hasType(left,"number")){left=__node("Call",19372,__node("Ident",19372,"__str"),[__wrap(left)],false,false);}else{left=__node("Call",19404,__node("Ident",19404,"__strnum"),[__wrap(left)],false,false);}}if(!this.isType(right,"stringOrNumber")){if(!this.hasType(right,"number")){right=__node("Call",19518,__node("Ident",19518,"__str"),[__wrap(right)],false,false);}else{right=__node("Call",19551,__node("Ident",19551,"__strnum"),[__wrap(right)],false,false);}}return __node("MacroAccess",19574,29,608,{left:__wrap(left),inverted:false,op:"~&",right:__wrap(right)},"expression",false,false,false);};}.call(this));',operators:"&",options:{precedence:7,type:"string",label:"stringConcat"},id:69},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",20008,[__wrap(left),__const("false")],null);}else{return __const("false");}}else if(elements.length===1){return __node("MacroAccess",20113,5,628,{left:__wrap(left),inverted:false,op:"==",right:__wrap(elements[0])},"expression",false,false,false);}else{f=function(i,current,left){if(i<elements.length){return f(+i+1,__node("MacroAccess",20233,2,632,{left:__wrap(current),inverted:false,op:"or",right:__node("MacroAccess",20245,5,632,{left:__wrap(left),inverted:false,op:"==",right:__wrap(elements[i])},"expression",false,false,false)},"expression",false,false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){return f(1,__node("MacroAccess",20368,5,636,{left:__wrap(setLeft),inverted:false,op:"==",right:__wrap(elements[0])},"expression",false,false,false),left);});}}else{return __node("Call",20419,__node("Ident",20419,"__in"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"in",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:71},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(right,"in",left);};}.call(this));',operators:"haskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:72},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",20743,__node("Ident",20743,"__owns"),[__wrap(left),__wrap(right)],false,true);};}.call(this));',operators:"ownskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean",label:"ownership"},id:73},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isIdent(right)){if(this.name(right)==="String"){return __node("MacroAccess",20937,23,651,{op:"isString!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Number"){return __node("MacroAccess",21008,24,653,{op:"isNumber!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Boolean"){return __node("MacroAccess",21080,25,655,{op:"isBoolean!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Function"){return __node("MacroAccess",21154,26,657,{op:"isFunction!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Array"){return __node("MacroAccess",21226,27,659,{op:"isArray!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Object"){return __node("MacroAccess",21296,28,661,{op:"isObject!",node:__wrap(left)},"expression",false,false,false);}}return this.binary(left,"instanceof",right);};}.call(this));',operators:"instanceof",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:74},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",21836,__node("Ident",21836,"__cmp"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"<=>",options:{precedence:5,maximum:1,type:"number"},id:75},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",21956,5,682,{left:__node("MacroAccess",21956,64,682,{left:__wrap(left),inverted:false,op:"%",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",21975,0)},"expression",false,false,false);};}.call(this));',operators:"%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:76},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",22076,5,685,{left:__node("MacroAccess",22076,45,685,{left:__wrap(left),inverted:false,op:"~%",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",22096,0)},"expression",false,false,false);};}.call(this));',operators:"~%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:77},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",23226,9,723,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",23266,9,725,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("MacroAccess",23324,9,728,{left:__wrap(left),inverted:false,op:"~<",right:__node("Call",23333,__node("Ident",23333,"__num"),[__wrap(right)],false,false)},"expression",false,false,false);}else{return __node("MacroAccess",23371,9,730,{left:__wrap(left),inverted:false,op:"~<=",right:__node("Call",23381,__node("Ident",23381,"__num"),[__wrap(right)],false,false)},"expression",false,false,false);}}else if(this.isType(left,"string")){if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",23491,9,734,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",23531,9,736,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("MacroAccess",23589,9,739,{left:__wrap(left),inverted:false,op:"~<",right:__node("Call",23598,__node("Ident",23598,"__str"),[__wrap(right)],false,false)},"expression",false,false,false);}else{return __node("MacroAccess",23636,9,741,{left:__wrap(left),inverted:false,op:"~<=",right:__node("Call",23646,__node("Ident",23646,"__str"),[__wrap(right)],false,false)},"expression",false,false,false);}}else if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",23722,9,744,{left:__node("Call",23722,__node("Ident",23722,"__num"),[__wrap(left)],false,false),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",23765,9,746,{left:__node("Call",23765,__node("Ident",23765,"__num"),[__wrap(left)],false,false),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",23851,9,749,{left:__node("Call",23851,__node("Ident",23851,"__str"),[__wrap(left)],false,false),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",23894,9,751,{left:__node("Call",23894,__node("Ident",23894,"__str"),[__wrap(left)],false,false),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("Call",23947,__node("Ident",23947,"__lt"),[__wrap(left),__wrap(right)],false,false);}else{return __node("Call",23983,__node("Ident",23983,"__lte"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:["<","<="],options:{precedence:2,maximum:1,type:"boolean"},id:78},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op===">"){return __node("MacroAccess",24105,3,759,{op:"not",node:__node("MacroAccess",24111,78,759,{left:__wrap(left),inverted:false,op:"<=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",24143,3,761,{op:"not",node:__node("MacroAccess",24149,78,761,{left:__wrap(left),inverted:false,op:"<",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:[">",">="],options:{precedence:2,maximum:1,type:"boolean"},id:79},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",24308,16,766,{macroName:"if",macroData:{test:__node("MacroAccess",24311,9,766,{left:__wrap(setLeft),inverted:false,op:"~<",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"~min",options:{precedence:8},id:80},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",24502,16,771,{macroName:"if",macroData:{test:__node("MacroAccess",24505,10,771,{left:__wrap(setLeft),inverted:false,op:"~>",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"~max",options:{precedence:8},id:81},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",24695,16,776,{macroName:"if",macroData:{test:__node("MacroAccess",24698,78,776,{left:__wrap(setLeft),inverted:false,op:"<",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"min",options:{precedence:8},id:82},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",24887,16,781,{macroName:"if",macroData:{test:__node("MacroAccess",24890,79,781,{left:__wrap(setLeft),inverted:false,op:">",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"max",options:{precedence:8},id:83},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",24990,__node("Ident",24990,"__xor"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"xor",options:{precedence:1},id:84},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",25105,16,788,{macroName:"if",macroData:{test:__node("MacroAccess",25108,20,788,{op:"?",node:__wrap(setLeft)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});};}.call(this));',operators:"?",options:{precedence:1},id:85},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&",right);};}.call(this));',operators:"~bitand",options:{precedence:1,type:"number"},id:92},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"|",right);};}.call(this));',operators:"~bitor",options:{precedence:1,type:"number"},id:93},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"^",right);};}.call(this));',operators:"~bitxor",options:{precedence:1,type:"number"},id:94},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",27453,92,856,{left:__node("MacroAccess",27453,60,856,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitand",right:__node("MacroAccess",27468,60,856,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitand",options:{precedence:1,type:"number"},id:96},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",27547,93,859,{left:__node("MacroAccess",27547,60,859,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitor",right:__node("MacroAccess",27561,60,859,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitor",options:{precedence:1,type:"number"},id:97},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",27641,94,862,{left:__node("MacroAccess",27641,60,862,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitxor",right:__node("MacroAccess",27656,60,862,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitxor",options:{precedence:1,type:"number"},id:98},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",35771,__node("Ident",35771,"__range"),[__wrap(left),__wrap(right),__node("Const",35795,1),__const("true")],false,false);};}.call(this));',operators:"to",options:{maximum:1,precedence:4,type:"array"},id:110},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",35883,__node("Ident",35883,"__range"),[__wrap(left),__wrap(right),__node("Const",35907,1),__const("false")],false,false);};}.call(this));',operators:"til",options:{maximum:1,precedence:4,type:"array"},id:111},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var callArgs,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.hasType(right,"number")){this.error("Must provide a number to the \'by\' operator",right);}if(this.isConst(right)&&this.value(right)===0){this.error("\'by\' step must be non-zero",right);}if(this.isCall(left)&&this.isIdent(this.callFunc(left))&&this.name(this.callFunc(left))==="__range"&&!this.callIsApply(left)){callArgs=this.callArgs(left);return __node("Call",36345,__node("Ident",36345,"__range"),[__wrap(callArgs[0]),__wrap(callArgs[1]),__wrap(right),__wrap(callArgs[3])],false,false);}else{if(this.isConst(right)&&__num(this.value(right))%1!==0){this.error("\'by\' step must be an integer",right);}return __node("Call",36530,__node("Ident",36530,"__step"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"by",options:{maximum:1,precedence:3,type:"array"},id:112},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var element,elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",67894,[__wrap(left),__const("false")],null);}else{return __const("false");}}else if(elements.length===1){element=elements[0];return __node("MacroAccess",68031,74,2018,{left:__wrap(left),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false);}else{f=function(i,current,left){var element;if(__lt(i,elements.length)){element=elements[i];return f(__num(i)+1,__node("MacroAccess",68187,2,2023,{left:__wrap(current),inverted:false,op:"or",right:__node("MacroAccess",68199,74,2023,{left:__wrap(left),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false)},"expression",false,false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){var element;element=elements[0];return f(1,__node("MacroAccess",68358,74,2028,{left:__wrap(setLeft),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false),left);});}}else{return __node("Call",68411,__node("Ident",68411,"__instanceofsome"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"instanceofsome",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:118},{code:'return (function(){"use strict";var __is,__num,__typeof;__is=typeof Object.is==="function"?Object.is:function(x,y){if(x===y){return x!==0||1/x===1/y;}else{return x!==x&&y!==y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _this,left,op,result,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"number")&&this.hasType(right,"number")){if(this.isConst(left)){if(this.isConst(right)){result=__is(this.value(left),this.value(right));return __wrap(result);}else if(typeof this.value(left)==="number"&&isNaN(this.value(left))){return this.maybeCache(right,function(setRight,right){return __node("MacroAccess",103511,6,3108,{left:__wrap(setRight),inverted:false,op:"!=",right:__wrap(right)},"expression",false,false,false);});}else if(this.value(left)===0){return this.maybeCache(right,function(setRight,right){if(1/__num(_this.value(left))<0){return __node("MacroAccess",103672,1,3112,{left:__node("MacroAccess",103672,5,3112,{left:__wrap(setRight),inverted:false,op:"==",right:__node("Const",103687,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",103692,78,3112,{left:__node("MacroAccess",103692,45,3112,{left:__node("Const",103693,1),inverted:false,op:"~/",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"<",right:__node("Const",103707,0)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",103744,1,3114,{left:__node("MacroAccess",103744,5,3114,{left:__wrap(setRight),inverted:false,op:"==",right:__node("Const",103759,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",103764,79,3114,{left:__node("MacroAccess",103764,45,3114,{left:__node("Const",103765,1),inverted:false,op:"~/",right:__wrap(right)},"expression",false,false,false),inverted:false,op:">",right:__node("Const",103779,0)},"expression",false,false,false)},"expression",false,false,false);}});}else{return __node("MacroAccess",103808,5,3116,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}}else if(this.isConst(right)){if(typeof this.value(right)==="number"&&isNaN(this.value(right))){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",103972,6,3120,{left:__wrap(setLeft),inverted:false,op:"!=",right:__wrap(left)},"expression",false,false,false);});}else if(this.value(right)===0){return this.maybeCache(left,function(setLeft,left){if(1/__num(_this.value(right))<0){return __node("MacroAccess",104122,1,3124,{left:__node("MacroAccess",104122,5,3124,{left:__wrap(setLeft),inverted:false,op:"==",right:__node("Const",104136,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",104141,78,3124,{left:__node("MacroAccess",104141,45,3124,{left:__node("Const",104142,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"<",right:__node("Const",104155,0)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",104188,1,3126,{left:__node("MacroAccess",104188,5,3126,{left:__wrap(setLeft),inverted:false,op:"==",right:__node("Const",104202,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",104207,79,3126,{left:__node("MacroAccess",104207,45,3126,{left:__node("Const",104208,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false),inverted:false,op:">",right:__node("Const",104221,0)},"expression",false,false,false)},"expression",false,false,false);}});}else{return __node("MacroAccess",104246,5,3128,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}}else{return __node("Call",104282,__node("Ident",104282,"__is"),[__wrap(left),__wrap(right)],false,false);}}else{return __node("MacroAccess",104317,5,3132,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}};}.call(this));',operators:"is",options:{precedence:2,maximum:1,type:"boolean"},id:143},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",104416,3,3135,{op:"not",node:__node("MacroAccess",104422,143,3135,{left:__wrap(left),inverted:false,op:"is",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"isnt",options:{precedence:2,maximum:1,type:"boolean"},id:144},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",106571,__node("Ident",106571,"__compose"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"<<",options:{precedence:13,type:"function"},id:146},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",106761,[__node("MacroAccess",106761,38,3200,{macroName:"let",macroData:{declarable:__node("MacroAccess",106770,37,3200,__node("MacroAccess",106770,31,3200,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("Call",106784,__node("Ident",106784,"__compose"),[__wrap(right),__wrap(tmp)],false,false)],null);}else{return __node("Call",106828,__node("Ident",106828,"__compose"),[__wrap(right),__wrap(left)],false,false);}};}.call(this));',operators:">>",options:{precedence:13,type:"function",rightToLeft:!0},id:147},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",107285,__wrap(left),[__wrap(right)],false,false);};}.call(this));',operators:"<|",options:{precedence:0,rightToLeft:!0},id:148},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",107426,[__node("MacroAccess",107426,38,3228,{macroName:"let",macroData:{declarable:__node("MacroAccess",107435,37,3228,__node("MacroAccess",107435,31,3228,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("Call",107449,__wrap(right),[__wrap(tmp)],false,false)],null);}else{return __node("Call",107483,__wrap(right),[__wrap(left)],false,false);}};}.call(this));',operators:"|>",options:{precedence:0},id:149},{code:'return (function(){"use strict";var __isArray,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isObject(right)){return this.maybeCache(left,function(setLeft,nextLeft){var _arr,_ref,block,currentLeft,descriptor,i,key,len,pairs,property,value;currentLeft=setLeft;block=[];pairs=_this.pairs(right);for(_arr=__toArray(pairs), i=0, len=_arr.length;i<len;++i){_ref=_arr[i];key=_ref.key;value=_ref.value;property=_ref.property;if(property!=null){if((property==="get"||property==="set")&&i<len-1&&pairs[i+1].property!=null&&_this.eq(key,pairs[i+1].key)&&pairs[i+1].property!==property&&((_ref=pairs[i+1].property)==="get"||_ref==="set")){continue;}if(property==="property"){block.push(__node("Call",108164,__node("Ident",108164,"__defProp"),[__wrap(currentLeft),__wrap(key),__wrap(value)],false,false));}else if(property==="get"||property==="set"){if(i>0&&pairs[i-1].property!=null&&_this.eq(key,pairs[i-1].key)&&pairs[i-1].property!==property&&((_ref=pairs[i-1].property)==="get"||_ref==="set")){descriptor=__node("Object",108441,[{key:__wrap(pairs[i-1].property),value:__wrap(pairs[i-1].value),property:void 0},{key:__wrap(property),value:__wrap(value),property:void 0},{key:__node("Const",108562,"enumerable"),value:__const("true"),property:void 0},{key:__node("Const",108595,"configurable"),value:__const("true"),property:void 0}],void 0);}else{descriptor=__node("Object",108665,[{key:__wrap(property),value:__wrap(value),property:void 0},{key:__node("Const",108720,"enumerable"),value:__const("true"),property:void 0},{key:__node("Const",108753,"configurable"),value:__const("true"),property:void 0}],void 0);}block.push(__node("Call",108814,__node("Ident",108814,"__defProp"),[__wrap(currentLeft),__wrap(key),__wrap(descriptor)],false,false));}else{_this.error("Unknown property: "+__strnum(property),key);}}else{block.push(__node("MacroAccess",108965,30,3269,{left:__node("Access",108965,__wrap(currentLeft),__wrap(key)),op:":=",right:__wrap(value)},"statement",false,false,false));}currentLeft=nextLeft;}block.push(__wrap(currentLeft));return __wrap(block);});}else{return __node("Call",109098,__node("Ident",109098,"__import"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"<<<",options:{precedence:6},id:150},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",109270,[__node("MacroAccess",109270,38,3280,{macroName:"let",macroData:{declarable:__node("MacroAccess",109279,37,3280,__node("MacroAccess",109279,31,3280,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("MacroAccess",109293,150,3281,{left:__wrap(right),inverted:false,op:"<<<",right:__wrap(tmp)},"statement",false,false,false)],null);}else{return __node("MacroAccess",109330,150,3283,{left:__wrap(right),inverted:false,op:"<<<",right:__wrap(left)},"expression",false,false,false);}};}.call(this));',operators:">>>",options:{precedence:6,rightToLeft:!0},id:151}],unaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("!",n);},true);};}.call(this));',operators:"not",options:{type:"boolean"},id:3},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("typeof",n);},true);};}.call(this));',operators:"typeof",options:{type:"string"},id:4},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this["throw"](n);},true);};}.call(this));',operators:"throw",options:{type:"none"},id:11},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.unary("++post",node);};}.call(this));',operators:"postInc!",options:{type:"number"},id:12},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.unary("--post",node);};}.call(this));',operators:"postDec!",options:{type:"number"},id:13},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",3994,1,112,{left:__node("MacroAccess",3994,6,112,{left:__node("MacroAccess",3994,4,112,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"!=",right:__node("Const",4012,"undefined")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",4025,6,112,{left:__wrap(node),inverted:false,op:"!=",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",4055,8,114,{left:__wrap(node),inverted:false,op:"!~=",right:__const("null")},"expression",false,false,false);}};}.call(this));',operators:"?",options:{postfix:!0,type:"boolean",label:"existential"},id:20},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",4202,5,118,{left:__node("MacroAccess",4202,4,118,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4220,"undefined")},"expression",false,false,false);}else{return __node("MacroAccess",4245,5,120,{left:__wrap(node),inverted:false,op:"==",right:__const("void")},"expression",false,false,false);}};}.call(this));',operators:["isVoid!","isUndefined!"],options:{type:"boolean"},id:21},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",4376,1,124,{left:__node("MacroAccess",4376,6,124,{left:__node("MacroAccess",4376,4,124,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"!=",right:__node("Const",4394,"undefined")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",4407,5,124,{left:__wrap(node),inverted:false,op:"==",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",4437,5,126,{left:__wrap(node),inverted:false,op:"==",right:__const("null")},"expression",false,false,false);}};}.call(this));',operators:"isNull!",options:{type:"boolean"},id:22},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",4512,5,129,{left:__node("MacroAccess",4512,4,129,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4530,"string")},"expression",false,false,false);};}.call(this));',operators:"isString!",options:{type:"boolean"},id:23},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",4597,5,132,{left:__node("MacroAccess",4597,4,132,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4615,"number")},"expression",false,false,false);};}.call(this));',operators:"isNumber!",options:{type:"boolean"},id:24},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",4683,5,135,{left:__node("MacroAccess",4683,4,135,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4701,"boolean")},"expression",false,false,false);};}.call(this));',operators:"isBoolean!",options:{type:"boolean"},id:25},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",4771,5,138,{left:__node("MacroAccess",4771,4,138,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4789,"function")},"expression",false,false,false);};}.call(this));',operators:"isFunction!",options:{type:"boolean"},id:26},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.isIdentOrTmp(n)&&!_this.hasVariable(n)&&__node("MacroAccess",4947,1,141,{left:__node("MacroAccess",4947,5,141,{left:__node("MacroAccess",4947,4,141,{op:"typeof",node:__wrap(n)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",4962,"object")},"expression",false,false,false),inverted:false,op:"and",right:__node("Call",4972,__node("Ident",4972,"__isArray"),[__wrap(n)],false,false)},"expression",false,false,false)||__node("Call",4996,__node("Ident",4996,"__isArray"),[__wrap(n)],false,false);},true);};}.call(this));',operators:"isArray!",options:{type:"boolean"},id:27},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return __node("MacroAccess",5119,1,144,{left:__node("MacroAccess",5119,5,144,{left:__node("MacroAccess",5119,4,144,{op:"typeof",node:__wrap(n)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",5134,"object")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",5144,6,144,{left:__wrap(n),inverted:false,op:"!=",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);},true);};}.call(this));',operators:"isObject!",options:{type:"boolean"},id:28},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,negate,node,op,value;_this=this;op=macroData.op;node=macroData.node;if(this.isConst(node)){value=Number(this.value(node));if(op==="~-"){negate=function(x){return -x;};value=negate(value);}return this["const"](value);}else{return this.mutateLast(node||this.noop(),function(n){return _this.unary(op==="~+"?"+":"-",n);},true);}};}.call(this));',operators:["~+","~-"],options:{type:"number"},id:48},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",16440,16,492,{macroName:"if",macroData:{test:__node("MacroAccess",16443,5,492,{left:__node("MacroAccess",16443,4,492,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",16461,"undefined")},"expression",false,false,false),body:__node("Const",16476,"Undefined"),elseIfs:[],elseBody:__node("Call",16492,__node("Ident",16492,"__typeof"),[__wrap(node)],false,false)}},"expression",false,false,false);}else{return this.mutateLast(node||this.noop(),function(n){return __node("Call",16564,__node("Ident",16564,"__typeof"),[__wrap(n)],false,false);},true);}};}.call(this));',operators:"typeof!",options:{type:"string"},id:57},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"number")){return n;}else{return __node("Call",17937,__node("Ident",17937,"__num"),[__wrap(n)],false,false);}},true);};}.call(this));',operators:"+",options:{type:"number"},id:60},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isConst(node)&&typeof this.value(node)==="number"){return this["const"](-this.value(node));}else{return __node("MacroAccess",18090,48,557,{op:"~-",node:__node("MacroAccess",18094,60,557,{op:"+",node:__wrap(node)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:"-",options:{type:"number"},id:61},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",18644,64,577,{left:__wrap(node),inverted:false,op:"/",right:__node("Const",18653,100)},"expression",false,false,false);};}.call(this));',operators:"%",options:{postfix:!0,type:"number"},id:65},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("~",n);},true);};}.call(this));',operators:"~bitnot",options:{type:"number"},id:99},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",27833,99,868,{op:"~bitnot",node:__node("MacroAccess",27841,60,868,{op:"+",node:__wrap(node)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitnot",options:{type:"number"},id:100},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(!this.isAccess(node)){this.error("Can only use delete on an access");}if(this.position==="expression"){return this.maybeCacheAccess(node,function(setNode,node){var del,tmp;tmp=_this.tmp("ref");del=_this.unary("delete",node);return __node("Block",28127,[__node("MacroAccess",28127,38,878,{macroName:"let",macroData:{declarable:__node("MacroAccess",28138,37,878,__node("MacroAccess",28138,31,878,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(setNode)}},"statement",false,false,false),__wrap(del),__wrap(tmp)],null);});}else{return this.unary("delete",node);}};}.call(this));',operators:"delete",options:{standalone:!1},id:101},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.maybeCache(node,function(setNode,node){return __node("MacroAccess",28314,16,886,{macroName:"if",macroData:{test:__node("MacroAccess",28317,20,886,{op:"?",node:__wrap(setNode)},"expression",false,false,false),body:__node("MacroAccess",28333,11,886,{op:"throw",node:__wrap(node)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false);});};}.call(this));',operators:"throw?",options:{type:"undefined"},id:102},{code:'return (function(){"use strict";var __isArray,__num,__owns,__slice,__strnum,__toArray,__typeof,__xor;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());__xor=function(x,y){if(x){return !y&&x;}else{return y||x;}};return function(macroData,__wrap,__node,__const){var _arr,_arr2,_i,_len,_this,body,changed,foundSpread,genericArg,genericArgs,genericCache,genericParams,i,ident,init,initIndex,instanceofLets,instanceofs,item,key,len,makeFunctionFunc,makeFunctionIdent,name,node,op,p,param,params,PRIMORDIAL_TYPES,result,spreadCounter;_this=this;op=macroData.op;node=macroData.node;function article(text){if(/^[aeiou]/i.test(text)){return "an";}else{return "a";}};function withArticle(text){return article(text)+" "+__strnum(text);};PRIMORDIAL_TYPES={Number:true,String:true,Boolean:true,Function:true,Array:true,Object:true};function translateGenericType(type){var _ref,basetype,typeArguments;if(!_this.isTypeGeneric(type)){return type;}else{basetype=_this.basetype(type);if((_ref=_this.name(basetype))==="Array"||_ref==="Function"){return basetype;}else{typeArguments=_this.array((function(){var _arr,_arr2,_i,_len,subtype;for(_arr=[], _arr2=__toArray(_this.typeArguments(type)), _i=0, _len=_arr2.length;_i<_len;++_i){subtype=_arr2[_i];_arr.push(translateGenericType(subtype));}return _arr;}()));return __node("Call",55933,__node("Access",55933,__wrap(basetype),__node("Const",55944,"generic")),[__node("Spread",55952,__wrap(typeArguments))],false,false);}}};function translateTypeCheck(value,valueName,type,hasDefaultValue){var _arr,_arr2,_i,_len,_ref,check,checks,current,genericType,hasBoolean,hasNull,hasVoid,index,key,name,names,pairValue,result,subCheck,t,test,tests,typeNames;if(_this.isIdent(type)){if(__owns.call(PRIMORDIAL_TYPES,_this.name(type))){result=__node("MacroAccess",56138,17,1686,{macroName:"if",macroData:{test:__node("MacroAccess",56150,74,1686,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",56179,11,1687,{op:"throw",node:__node("Call",56196,__node("Ident",56196,"TypeError"),[__node("MacroAccess",56207,69,1687,{left:__node("MacroAccess",56207,69,1687,{left:__node("MacroAccess",56207,69,1687,{left:__node("MacroAccess",56207,69,1687,{left:__node("MacroAccess",56207,69,1687,{left:__node("Const",56207,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",56207," to be ")},"expression",false,false,false),op:"",right:__wrap(withArticle(_this.name(type)))},"expression",false,false,false),op:"",right:__node("Const",56207,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",56276,57,1687,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{result=__node("MacroAccess",56316,17,1690,{macroName:"if",macroData:{test:__node("MacroAccess",56328,74,1690,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",56357,11,1691,{op:"throw",node:__node("Call",56374,__node("Ident",56374,"TypeError"),[__node("MacroAccess",56385,69,1691,{left:__node("MacroAccess",56385,69,1691,{left:__node("MacroAccess",56385,69,1691,{left:__node("MacroAccess",56385,69,1691,{left:__node("MacroAccess",56385,69,1691,{left:__node("Const",56385,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",56385," to be a ")},"expression",false,false,false),op:"",right:__node("Call",56420,__node("Ident",56420,"__name"),[__wrap(type)],false,false)},"expression",false,false,false),op:"",right:__node("Const",56385,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",56441,57,1691,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}if(!hasDefaultValue&&_this.name(type)==="Boolean"){return __node("MacroAccess",56529,17,1693,{macroName:"if",macroData:{test:__node("MacroAccess",56532,3,1693,{op:"not",node:__node("MacroAccess",56536,20,1693,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",56545,30,1694,{left:__wrap(value),op:":=",right:__const("false")},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}else{return result;}}else if(_this.isAccess(type)){return __node("MacroAccess",56667,17,1701,{macroName:"if",macroData:{test:__node("MacroAccess",56677,74,1701,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",56706,11,1702,{op:"throw",node:__node("Call",56721,__node("Ident",56721,"TypeError"),[__node("MacroAccess",56732,69,1702,{left:__node("MacroAccess",56732,69,1702,{left:__node("MacroAccess",56732,69,1702,{left:__node("MacroAccess",56732,69,1702,{left:__node("MacroAccess",56732,69,1702,{left:__node("Const",56732,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",56732," to be ")},"expression",false,false,false),op:"",right:__wrap(withArticle(_this.value(_this.child(type))))},"expression",false,false,false),op:"",right:__node("Const",56732,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",56810,57,1702,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else if(_this.isTypeUnion(type)){hasBoolean=false;hasVoid=false;hasNull=false;names=[];tests=[];for(_arr=__toArray(_this.types(type)), _i=0, _len=_arr.length;_i<_len;++_i){t=_arr[_i];if(_this.isConst(t)){if(_this.value(t)===null){hasNull=true;names.push(_this["const"]("null"));}else if(_this.value(t)===void 0){hasVoid=true;names.push(_this["const"]("undefined"));}else{_this.error("Unknown const for type-checking: "+String(_this.value(t)),t);}}else if(_this.isIdent(t)){if(_this.name(t)==="Boolean"){hasBoolean=true;}if(__owns.call(PRIMORDIAL_TYPES,_this.name(t))){names.push(_this["const"](_this.name(t)));}else{names.push(__node("Call",57613,__node("Ident",57613,"__name"),[__wrap(t)],false,false));}tests.push(__node("MacroAccess",57649,74,1727,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(t)},"expression",false,false,false));}else{_this.error("Not implemented: typechecking for non-idents/consts within a type-union",t);}}if(tests.length){test=_this.binaryChain("&&",tests);}else{test=__const("true");}current=names[0];for(_i=1, _len=names.length;_i<_len;++_i){name=names[_i];current=__node("MacroAccess",57976,69,1736,{left:__node("MacroAccess",57976,69,1736,{left:__wrap(current),op:"",right:__node("Const",57976," or ")},"expression",false,false,false),op:"",right:__wrap(name)},"expression",false,false,false);}typeNames=current;result=__node("MacroAccess",58032,17,1737,{macroName:"if",macroData:{test:__wrap(test),body:__node("MacroAccess",58042,11,1738,{op:"throw",node:__node("Call",58055,__node("Ident",58055,"TypeError"),[__node("MacroAccess",58066,69,1738,{left:__node("MacroAccess",58066,69,1738,{left:__node("MacroAccess",58066,69,1738,{left:__node("MacroAccess",58066,69,1738,{left:__node("MacroAccess",58066,69,1738,{left:__node("Const",58066,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",58066," to be one of ")},"expression",false,false,false),op:"",right:__wrap(typeNames)},"expression",false,false,false),op:"",right:__node("Const",58066,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",58126,57,1738,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);if(!hasDefaultValue){if(hasNull||hasVoid){if(__xor(hasNull,hasVoid)){result=__node("MacroAccess",58268,17,1743,{macroName:"if",macroData:{test:__node("MacroAccess",58271,3,1743,{op:"not",node:__node("MacroAccess",58275,20,1743,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",58284,30,1744,{left:__wrap(value),op:":=",right:__node("MacroAccess",58307,16,1744,{macroName:"if",macroData:{test:__wrap(hasNull),body:__const("null"),elseIfs:[],elseBody:__const("void")}},"expression",false,true,false)},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}else{result=__node("MacroAccess",58420,17,1748,{macroName:"if",macroData:{test:__node("MacroAccess",58423,20,1748,{op:"?",node:__wrap(value)},"statement",false,false,false),body:__wrap(result),elseIfs:[]}},"statement",false,false,false);}}else if(hasBoolean){result=__node("MacroAccess",58506,17,1751,{macroName:"if",macroData:{test:__node("MacroAccess",58509,3,1751,{op:"not",node:__node("MacroAccess",58513,20,1751,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",58522,30,1752,{left:__wrap(value),op:":=",right:__const("false")},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}}return result;}else if(_this.isTypeGeneric(type)){if(_this.name(_this.basetype(type))==="Array"){index=_this.tmp("i",false,"number");subCheck=translateTypeCheck(__node("Access",58769,__wrap(value),__wrap(index)),__node("MacroAccess",58792,69,1759,{left:__node("MacroAccess",58792,69,1759,{left:__node("MacroAccess",58792,69,1759,{left:__wrap(valueName),inverted:false,op:"&",right:__node("Const",58807,"[")},"expression",false,false,false),inverted:false,op:"&",right:__wrap(index)},"expression",false,false,false),inverted:false,op:"&",right:__node("Const",58822,"]")},"expression",false,false,false),_this.typeArguments(type)[0],false);return __node("MacroAccess",58871,17,1760,{macroName:"if",macroData:{test:__node("MacroAccess",58874,3,1760,{op:"not",node:__node("MacroAccess",58878,27,1760,{op:"isArray!",node:__wrap(value)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",58896,11,1761,{op:"throw",node:__node("Call",58911,__node("Ident",58911,"TypeError"),[__node("MacroAccess",58922,69,1761,{left:__node("MacroAccess",58922,69,1761,{left:__node("MacroAccess",58922,69,1761,{left:__node("Const",58922,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",58922," to be an Array, got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",58969,57,1761,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",58999,106,1763,{macroName:"for",macroData:{init:__node("MacroAccess",59014,38,1763,{macroName:"let",macroData:{declarable:__node("MacroAccess",59017,37,1763,__node("MacroAccess",59017,31,1763,{isMutable:"mutable",ident:__wrap(index)},"expression",false,false,false),"expression",false,false,false),value:__node("Access",59034,__wrap(value),__node("Const",59042,"length"))}},"expression",false,false,false),test:__node("MacroAccess",59050,13,1763,{op:"postDec!",node:__wrap(index)},"statement",false,false,false),body:__wrap(subCheck)}},"statement",false,false,false)}},"statement",false,false,false);}else if(_this.name(_this.basetype(type))==="Function"){return translateTypeCheck(value,valueName,_this.basetype(type),hasDefaultValue);}else{genericType=translateGenericType(type);return __node("MacroAccess",59305,17,1770,{macroName:"if",macroData:{test:__node("MacroAccess",59317,74,1770,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(genericType)},"statement",false,false,false),body:__node("MacroAccess",59354,11,1771,{op:"throw",node:__node("Call",59371,__node("Ident",59371,"TypeError"),[__node("MacroAccess",59382,69,1771,{left:__node("MacroAccess",59382,69,1771,{left:__node("MacroAccess",59382,69,1771,{left:__node("MacroAccess",59382,69,1771,{left:__node("MacroAccess",59382,69,1771,{left:__node("Const",59382,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",59382," to be a ")},"expression",false,false,false),op:"",right:__node("Call",59417,__node("Ident",59417,"__name"),[__wrap(genericType)],false,false)},"expression",false,false,false),op:"",right:__node("Const",59382,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",59446,57,1771,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}}else if(_this.isTypeObject(type)){for(_arr=[], _arr2=__toArray(_this.pairs(type)), _i=0, _len=_arr2.length;_i<_len;++_i){_ref=_arr2[_i];key=_ref.key;pairValue=_ref.value;_arr.push(translateTypeCheck(__node("Access",59595,__wrap(value),__wrap(key)),__node("MacroAccess",59616,69,1774,{left:__node("MacroAccess",59616,69,1774,{left:__wrap(valueName),inverted:false,op:"&",right:__node("Const",59631,".")},"expression",false,false,false),inverted:false,op:"&",right:__wrap(key)},"expression",false,false,false),pairValue,false));}checks=_arr;return __node("MacroAccess",59671,17,1775,{macroName:"if",macroData:{test:__node("MacroAccess",59674,3,1775,{op:"not",node:__node("MacroAccess",59678,28,1775,{op:"isObject!",node:__wrap(value)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",59697,11,1776,{op:"throw",node:__node("Call",59710,__node("Ident",59710,"TypeError"),[__node("MacroAccess",59721,69,1776,{left:__node("MacroAccess",59721,69,1776,{left:__node("MacroAccess",59721,69,1776,{left:__node("Const",59721,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",59721," to be an Object, got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",59769,57,1776,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[],elseBody:__wrap(checks)}},"statement",false,false,false);}else{return _this.error("Unknown type to translate: "+__typeof(type),type);}};init=[];changed=false;function translateParam(param,inDestructure){var _arr,_i,_len,arrayIdent,asType,blankIdent,defaultValue,element,elementIdent,elementParam,foundSpread,i,ident,initIndex,key,len,objectIdent,pair,paramIdent,spreadCounter,typeCheck,value,valueIdent;if(_this.isArray(param)){changed=true;arrayIdent=_this.tmp("p",false,"array");foundSpread=-1;for(_arr=__toArray(_this.elements(param)), i=0, len=_arr.length;i<len;++i){element=_arr[i];initIndex=init.length;elementParam=translateParam(element,true);if(elementParam!=null){elementIdent=_this.paramIdent(elementParam);if(!_this.paramIsSpread(elementParam)){if(foundSpread===-1){init.splice(initIndex,0,__node("MacroAccess",60499,38,1796,{macroName:"let",macroData:{declarable:__node("MacroAccess",60503,37,1796,__node("MacroAccess",60503,31,1796,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",60520,__wrap(arrayIdent),__wrap(i))}},"statement",false,false,false));}else{init.splice(initIndex,0,__node("MacroAccess",60599,38,1798,{macroName:"let",macroData:{declarable:__node("MacroAccess",60603,37,1798,__node("MacroAccess",60603,31,1798,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",60620,__wrap(arrayIdent),__node("MacroAccess",60634,66,1798,{left:__wrap(spreadCounter),inverted:false,op:"+",right:__node("MacroAccess",60653,66,1798,{left:__node("MacroAccess",60653,66,1798,{left:__wrap(i),inverted:false,op:"-",right:__wrap(foundSpread)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",60674,1)},"expression",false,false,false)},"expression",false,false,false))}},"statement",false,false,false));}}else{if(foundSpread!==-1){_this.error("Cannot have multiple spread parameters in an array destructure",element);}foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",60924,38,1804,{macroName:"let",macroData:{declarable:__node("MacroAccess",60928,37,1804,__node("MacroAccess",60928,31,1804,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",60945,__node("Ident",60945,"__slice"),[__wrap(arrayIdent),__node("Spread",60968,__node("MacroAccess",60973,16,1804,{macroName:"if",macroData:{test:__node("MacroAccess",60975,5,1804,{left:__wrap(i),inverted:false,op:"==",right:__node("Const",60982,0)},"expression",false,false,false),body:__node("Array",60988,[]),elseIfs:[],elseBody:__node("Array",60996,[__wrap(i)])}},"expression",false,false,false))],false,true)}},"statement",false,false,false));}else{spreadCounter=_this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",61121,[__node("MacroAccess",61121,38,1808,{macroName:"let",macroData:{declarable:__node("MacroAccess",61140,37,1808,__node("MacroAccess",61140,31,1808,{isMutable:"mutable",ident:__wrap(spreadCounter)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",61166,66,1808,{left:__node("Access",61166,__wrap(arrayIdent),__node("Const",61180,"length")),inverted:false,op:"-",right:__node("MacroAccess",61190,66,1808,{left:__node("MacroAccess",61190,66,1808,{left:__wrap(len),inverted:false,op:"-",right:__wrap(i)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",61202,1)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",61205,38,1809,{macroName:"let",macroData:{declarable:__node("MacroAccess",61224,37,1809,__node("MacroAccess",61224,31,1809,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",61241,17,1809,{macroName:"if",macroData:{test:__node("MacroAccess",61244,79,1809,{left:__wrap(spreadCounter),inverted:false,op:">",right:__wrap(i)},"expression",false,false,false),body:__node("Call",61266,__node("Ident",61266,"__slice"),[__wrap(arrayIdent),__wrap(i),__wrap(spreadCounter)],false,true),elseIfs:[],elseBody:__node("Block",61348,[__node("MacroAccess",61348,30,1812,{left:__wrap(spreadCounter),op:":=",right:__wrap(i)},"statement",false,false,false),__node("Array",61388,[])],null)}},"expression",false,false,false)}},"statement",false,false,false)],null));}}}}return _this.rewrap(_this.param(arrayIdent,null,false,false,null),param);}else if(_this.isObject(param)){changed=true;objectIdent=_this.tmp("p",false,"object");for(_arr=__toArray(_this.pairs(param)), _i=0, _len=_arr.length;_i<_len;++_i){pair=_arr[_i];initIndex=init.length;value=translateParam(pair.value,true);if(value!=null){valueIdent=_this.paramIdent(value);key=pair.key;init.splice(initIndex,0,__node("MacroAccess",61842,38,1825,{macroName:"let",macroData:{declarable:__node("MacroAccess",61846,37,1825,__node("MacroAccess",61846,31,1825,{ident:__wrap(valueIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",61861,__wrap(objectIdent),__wrap(key))}},"statement",false,false,false));}}return _this.rewrap(_this.param(objectIdent,null,false,false,null),param);}else if(_this.isParam(param)){defaultValue=_this.paramDefaultValue(param);asType=_this.paramType(param);paramIdent=_this.paramIdent(param);if(defaultValue!=null||asType!=null||!_this.isIdentOrTmp(paramIdent)){changed=true;if(_this.isIdentOrTmp(paramIdent)){ident=paramIdent;}else if(_this.isAccess(paramIdent)){ident=_this.ident(_this.value(_this.child(paramIdent)));}else{ident=_this.error("Not an ident or this-access: "+__typeof(paramIdent)+" "+__strnum(paramIdent.inspect()),paramIdent);}if(asType!=null){typeCheck=translateTypeCheck(ident,_this.name(ident),asType,defaultValue!=null);}else{typeCheck=_this.noop();}init.push(defaultValue!=null?__node("MacroAccess",62699,17,1846,{macroName:"if",macroData:{test:__node("MacroAccess",62713,3,1846,{op:"not",node:__node("MacroAccess",62717,20,1846,{op:"?",node:__wrap(ident)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",62726,30,1847,{left:__wrap(ident),op:":=",right:__wrap(defaultValue)},"statement",false,true,false),elseIfs:[],elseBody:__wrap(typeCheck)}},"statement",false,true,false):typeCheck);if(paramIdent!==ident){init.push(__node("MacroAccess",62897,30,1853,{left:__wrap(paramIdent),op:":=",right:__wrap(ident)},"statement",false,false,false));}return _this.rewrap(_this.param(ident,null,_this.paramIsSpread(param),_this.paramIsMutable(param),null),param);}else{return param;}}else if(_this.isNothing(param)){changed=true;if(inDestructure){return null;}else{blankIdent=_this.tmp("p",false,"object");return _this.rewrap(_this.param(blankIdent,null,false,false,null),param);}}else{return _this.error("Unknown param type: "+__typeof(param),param);}};foundSpread=-1;params=[];for(_arr=__toArray(this.funcParams(node)), i=0, len=_arr.length;i<len;++i){param=_arr[i];initIndex=init.length;p=translateParam(param,false);ident=this.paramIdent(p);if(this.paramIsSpread(p)){if(foundSpread!==-1){this.error("Cannot have two spread parameters",p);}changed=true;foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",63788,38,1881,{macroName:"let",macroData:{declarable:__node("MacroAccess",63801,37,1881,__node("MacroAccess",63801,31,1881,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",63810,__node("Ident",63810,"__slice"),[__node("Args",63820),__node("Spread",63830,__node("MacroAccess",63835,16,1881,{macroName:"if",macroData:{test:__node("MacroAccess",63837,5,1881,{left:__wrap(i),inverted:false,op:"==",right:__node("Const",63844,0)},"expression",false,false,false),body:__node("Array",63850,[]),elseIfs:[],elseBody:__node("Array",63858,[__wrap(i)])}},"expression",false,false,false))],false,true)}},"statement",false,false,false));}else{spreadCounter=this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",63965,[__node("MacroAccess",63965,38,1885,{macroName:"let",macroData:{declarable:__node("MacroAccess",63978,37,1885,__node("MacroAccess",63978,31,1885,{isMutable:"mutable",ident:__wrap(spreadCounter)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",64004,66,1885,{left:__node("Access",64004,__node("Args",64004),__node("Const",64015,"length")),inverted:false,op:"-",right:__node("MacroAccess",64025,66,1885,{left:__node("MacroAccess",64025,66,1885,{left:__wrap(len),inverted:false,op:"-",right:__wrap(i)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",64037,1)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",64040,38,1886,{macroName:"let",macroData:{declarable:__node("MacroAccess",64053,37,1886,__node("MacroAccess",64053,31,1886,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",64062,17,1886,{macroName:"if",macroData:{test:__node("MacroAccess",64065,79,1886,{left:__wrap(spreadCounter),inverted:false,op:">",right:__wrap(i)},"expression",false,false,false),body:__node("Call",64087,__node("Ident",64087,"__slice"),[__node("Args",64108),__wrap(i),__wrap(spreadCounter)],false,true),elseIfs:[],elseBody:__node("Block",64154,[__node("MacroAccess",64154,30,1889,{left:__wrap(spreadCounter),op:":=",right:__wrap(i)},"statement",false,false,false),__node("Array",64188,[])],null)}},"expression",false,false,false)}},"statement",false,false,false)],null));}}else if(foundSpread===-1){params.push(p);}else{init.splice(initIndex,0,__node("MacroAccess",64312,38,1896,{macroName:"let",macroData:{declarable:__node("MacroAccess",64325,37,1896,__node("MacroAccess",64325,31,1896,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",64334,__node("Args",64334),__node("MacroAccess",64345,66,1896,{left:__wrap(spreadCounter),inverted:false,op:"+",right:__node("MacroAccess",64364,66,1896,{left:__node("MacroAccess",64364,66,1896,{left:__wrap(i),inverted:false,op:"-",right:__wrap(foundSpread)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",64385,1)},"expression",false,false,false)},"expression",false,false,false))}},"statement",false,false,false));}}if(init.length||changed||this.funcIsCurried(node)){body=this.funcBody(node);result=this.rewrap(this.func(params,__node("Block",64534,[__wrap(init),__wrap(body)],null),this.funcIsAutoReturn(node)&&!this.isNothing(body),this.funcIsBound(node),false,this.funcAsType(node),this.funcIsGenerator(node),this.funcGeneric(node)),node);}else{result=node;}if(this.funcIsCurried(node)){result=__node("Call",64816,__node("Ident",64816,"__curry"),[__wrap(params.length),__wrap(result)],false,false);}genericArgs=this.funcGeneric(node);if(__num(genericArgs.length)>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _arr2=__toArray(genericArgs), _i=0, _len=_arr2.length;_i<_len;++_i){genericArg=_arr2[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeFunctionIdent=this.tmp("make",false,"function");instanceofs={};for(_arr=__toArray(genericArgs), _i=0, _len=_arr.length;_i<_len;++_i){genericArg=_arr[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",65327,38,1927,{macroName:"let",macroData:{declarable:__node("MacroAccess",65331,37,1927,__node("MacroAccess",65331,31,1927,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",65338,__node("Ident",65338,"__getInstanceof"),[__wrap(genericArg)],false,false)}},"statement",false,false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",65788,__wrap(func),[__wrap(left)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",65944,[__wrap(instanceofLets),__wrap(result)],null);}makeFunctionFunc=this.func(genericParams,result,true,false);result=__node("Call",66074,__node("Ident",66074,"__genericFunc"),[__wrap(genericArgs.length),__wrap(makeFunctionFunc)],false,false);}return result;};}.call(this));',operators:"mutateFunction!",options:{type:"node",label:"mutateFunction"},id:117},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("Call",77664,__node("Ident",77664,"__keys"),[__wrap(node)],false,false);};}.call(this));',operators:"keys!",id:124},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("Call",77820,__node("Ident",77820,"__allkeys"),[__wrap(node)],false,false);};}.call(this));',operators:"allkeys!",id:125},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _arr,_i,_len,element,item,node,op,parts,set;op=macroData.op;node=macroData.node;set=this.tmp("s",false,"object");if(this.isArray(node)&&!this.arrayHasSpread(node)){if(this.elements(node).length===0){return __node("Call",113722,__node("Ident",113722,"Set"),[],false,false);}else{parts=[];for(_arr=__toArray(this.elements(node)), _i=0, _len=_arr.length;_i<_len;++_i){element=_arr[_i];parts.push(__node("Call",113818,__node("Access",113818,__wrap(set),__node("Const",113824,"add")),[__wrap(element)],false,false));}return __node("Block",113847,[__node("MacroAccess",113847,38,3467,{macroName:"let",macroData:{declarable:__node("MacroAccess",113858,37,3467,__node("MacroAccess",113858,31,3467,{ident:__wrap(set)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",113865,__node("Ident",113865,"Set"),[],false,false)}},"statement",false,false,false),__wrap(parts),__wrap(set)],null);}}else{item=this.tmp("x",false,"any");return __node("Block",113951,[__node("MacroAccess",113951,38,3473,{macroName:"let",macroData:{declarable:__node("MacroAccess",113960,37,3473,__node("MacroAccess",113960,31,3473,{ident:__wrap(set)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",113967,__node("Ident",113967,"Set"),[],false,false)}},"statement",false,false,false),__node("MacroAccess",113974,113,3474,{macroName:"for",macroData:{value:__node("MacroAccess",113983,37,3474,__node("MacroAccess",113983,31,3474,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),array:__wrap(node),body:__node("Call",113999,__node("Access",113999,__wrap(set),__node("Const",114012,"add")),[__wrap(item)],false,false)}},"statement",false,false,false),__wrap(set)],null);}};}.call(this));',operators:"set!",options:{type:"object",label:"constructSet"},id:152},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _arr,_i,_len,_ref,key,map,node,op,pairs,parts,property,value;op=macroData.op;node=macroData.node;if(!this.isObject(node)){this.error("map! can only be used on literal objects",node);}pairs=this.pairs(node);if(pairs.length===0){return __node("Call",114250,__node("Ident",114250,"Map"),[],false,false);}else{map=this.tmp("m",false,"object");parts=[];for(_arr=__toArray(pairs), _i=0, _len=_arr.length;_i<_len;++_i){_ref=_arr[_i];key=_ref.key;value=_ref.value;property=_ref.property;if(property!=null){this.error("Cannot use map! on an object with custom properties",key);}parts.push(__node("Call",114474,__node("Access",114474,__wrap(map),__node("Const",114480,"set")),[__wrap(key),__wrap(value)],false,false));}return __node("Block",114505,[__node("MacroAccess",114505,38,3493,{macroName:"let",macroData:{declarable:__node("MacroAccess",114514,37,3493,__node("MacroAccess",114514,31,3493,{ident:__wrap(map)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",114521,__node("Ident",114521,"Map"),[],false,false)}},"statement",false,false,false),__wrap(parts),__wrap(map)],null);}};}.call(this));',operators:"map!",options:{type:"object",label:"constructMap"},id:153},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var node,op,top;op=macroData.op;node=macroData.node;if(!node.cascades||!node.cascades.length){this.error("cascade! can only be used on a CascadeNode, got "+__typeof(node),node);}top=node.node;return this.maybeCache(top,function(setTop,top){var _arr,_arr2,_len,cascade,i,parts;for(_arr=[], _arr2=__toArray(node.cascades), i=0, _len=_arr2.length;i<_len;++i){cascade=_arr2[i];_arr.push(cascade(top));}parts=_arr;return __node("Block",128457,[__wrap(setTop),__wrap(parts),__wrap(top)],null);});};}.call(this));',operators:"cascade!",options:{label:"cascade"},id:171}],helpers:{__throw:{helper:["Func",62,26,0,0,[["Ident",62,27,0,"err"]],[],[],"Throw",62,34,0,"Ident",62,40,0,"err"],type:{type:"generic",base:"functionBase",args:["none"]},dependencies:["__throw"]},GLOBAL:{helper:["IfExpression",146,23,0,["Binary",146,26,0,["Unary",118,9,0,"typeof","Ident",146,39,0,"window"],"!==","Const",118,27,0,"undefined"],["Ident",146,51,0,"window"],"IfExpression",146,23,0,["Binary",146,66,0,["Unary",118,9,0,"typeof","Ident",146,79,0,"global"],"!==","Const",118,27,0,"undefined"],["Ident",146,91,0,"global"],"This",146,103,0],type:"any",dependencies:["GLOBAL"]},__xor:{helper:["Func",148,24,0,0,[["Ident",148,25,0,"x"],["Ident",148,27,0,"y"]],[],[],"IfStatement",149,1,0,0,["Ident",149,5,0,"x"],["Return",150,1,0,"Binary",150,1,0,["Unary",150,1,0,"!","Ident",150,8,0,"y"],"&&","Ident",150,14,0,"x"],"Return",152,1,0,"Binary",152,1,0,["Ident",152,1,0,"y"],"||","Ident",152,9,0,"x"],type:"function",dependencies:["__xor"]},__typeof:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["_toString"],[],"BlockStatement",481,1,0,0,["Binary",481,1,0,["Ident",481,6,0,"_toString"],"=","Binary",481,19,0,["Binary",481,19,0,["Ident",481,19,0,"Object"],".","Const",481,27,0,"prototype"],".","Const",481,37,0,"toString"],["Return",482,4,0,"Func",482,4,0,0,[["Ident",482,5,0,"o"]],[],[],"IfStatement",483,1,0,0,["Binary",120,9,0,["Ident",483,16,0,"o"],"===","Const",1,1,0],["Return",484,7,0,"Const",484,7,0,"Undefined"],"IfStatement",483,1,0,0,["Binary",126,9,0,["Ident",485,21,0,"o"],"===","Const",1,1,0,null],["Return",486,7,0,"Const",486,7,0,"Null"],"Return",488,1,0,"Binary",488,1,0,["Binary",488,8,0,["Binary",488,8,0,["Ident",488,8,0,"o"],".","Const",488,10,0,"constructor"],"&&","Binary",488,25,0,["Binary",488,25,0,["Ident",488,25,0,"o"],".","Const",488,28,0,"constructor"],".","Const",488,40,0,"name"],"||","Call",488,48,0,["Binary",488,48,0,["Call",488,48,0,["Binary",488,48,0,["Ident",488,48,0,"_toString"],".","Const",488,48,0,"call"],0,["Ident",488,61,0,"o"]],".","Const",488,64,0,"slice"],0,["Const",488,70,0,8],["Const",488,72,0,-1]]],0],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__typeof"]},__first:{helper:["Func",496,26,0,0,[["Ident",496,27,0,"x"]],[],[],"Return",496,32,0,"Ident",496,32,0,"x"],type:"function",dependencies:["__first"]},__num:{helper:["Func",523,24,0,0,[["Ident",523,25,0,"num"]],[],[],"IfStatement",524,1,0,0,["Binary",524,5,0,["Unary",132,7,0,"typeof","Ident",524,20,0,"num"],"!==","Const",132,25,0,"number"],["Throw",525,1,0,"Call",525,10,0,["Ident",525,10,0,"TypeError"],0,["Binary",525,21,0,["Const",525,21,0,"Expected a number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",525,57,0,"num"]]],"Return",527,1,0,"Ident",527,1,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__num","__typeof"]},__str:{helper:["Func",529,24,0,0,[["Ident",529,25,0,"str"]],[],[],"IfStatement",530,1,0,0,["Binary",530,5,0,["Unary",129,7,0,"typeof","Ident",530,20,0,"str"],"!==","Const",129,25,0,"string"],["Throw",531,1,0,"Call",531,10,0,["Ident",531,10,0,"TypeError"],0,["Binary",531,21,0,["Const",531,21,0,"Expected a string, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",531,57,0,"str"]]],"Return",533,1,0,"Ident",533,1,0,"str"],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__str","__typeof"]},__strnum:{helper:["Func",535,27,0,0,[["Ident",535,28,0,"strnum"]],["type"],[],"BlockStatement",536,1,0,0,["Binary",536,1,0,["Ident",536,6,0,"type"],"=","Unary",536,13,0,"typeof","Ident",536,20,0,"strnum"],["IfStatement",537,1,0,0,["Binary",537,5,0,["Ident",537,5,0,"type"],"===","Const",537,15,0,"string"],["Return",538,1,0,"Ident",538,1,0,"strnum"],"IfStatement",537,1,0,0,["Binary",539,10,0,["Ident",539,10,0,"type"],"===","Const",539,20,0,"number"],["Return",540,1,0,"Call",540,1,0,["Ident",540,1,0,"String"],0,["Ident",540,12,0,"strnum"]],"Throw",542,1,0,"Call",542,10,0,["Ident",542,10,0,"TypeError"],0,["Binary",542,21,0,["Const",542,21,0,"Expected a string or number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",542,67,0,"strnum"]]]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__strnum","__typeof"]},__owns:{helper:["Binary",643,23,0,["Binary",643,23,0,["Ident",643,23,0,"Object"],".","Const",643,31,0,"prototype"],".","Const",643,41,0,"hasOwnProperty"],type:"any",dependencies:["__owns"]},__cmp:{helper:["Func",664,24,0,0,[["Ident",664,25,0,"left"],["Ident",664,30,0,"right"]],["type"],[],"IfStatement",665,1,0,0,["Binary",665,5,0,["Ident",665,5,0,"left"],"===","Ident",665,13,0,"right"],["Return",666,5,0,"Const",666,5,0,0],"BlockStatement",668,1,0,0,["Binary",668,1,0,["Ident",668,8,0,"type"],"=","Unary",668,15,0,"typeof","Ident",668,22,0,"left"],["IfStatement",669,1,0,0,["Binary",669,7,0,["Binary",43,7,0,["Ident",669,7,0,"type"],"!==","Const",669,17,0,"number"],"&&","Binary",43,7,0,["Ident",669,27,0,"type"],"!==","Const",669,37,0,"string"],["Throw",670,1,0,"Call",670,12,0,["Ident",670,12,0,"TypeError"],0,["Binary",670,23,0,["Const",670,23,0,"Cannot compare a non-number/string: "],"+","Ident",670,64,0,"type"]],"IfStatement",669,1,0,0,["Binary",43,7,0,["Ident",671,12,0,"type"],"!==","Unary",671,20,0,"typeof","Ident",671,27,0,"right"],["Throw",672,1,0,"Call",672,12,0,["Ident",672,12,0,"TypeError"],0,["Binary",672,23,0,["Binary",672,23,0,["Binary",672,23,0,["Const",672,23,0,"Cannot compare elements of different types: "],"+","Ident",672,72,0,"type"],"+","Const",672,81,0," vs "],"+","Unary",672,90,0,"typeof","Ident",672,97,0,"right"]],"IfStatement",669,1,0,0,["Binary",673,12,0,["Ident",673,12,0,"left"],"<","Ident",673,20,0,"right"],["Return",674,1,0,"Const",674,1,0,-1],"Return",676,7,0,"Const",676,7,0,1]],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__cmp"]},__int:{helper:["Func",687,24,0,0,[["Ident",687,25,0,"num"]],[],[],"IfStatement",688,1,0,0,["Binary",688,5,0,["Unary",132,7,0,"typeof","Ident",688,20,0,"num"],"!==","Const",132,25,0,"number"],["Throw",689,1,0,"Call",689,10,0,["Ident",689,10,0,"TypeError"],0,["Binary",689,21,0,["Const",689,21,0,"Expected a number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",689,57,0,"num"]]],"IfStatement",688,1,0,0,["Binary",685,7,0,["Binary",685,7,0,["Ident",690,10,0,"num"],"%","Const",690,23,0,1],"!==","Const",685,27,0,0],["Throw",691,1,0,"Call",691,10,0,["Ident",691,10,0,"TypeError"],0,["Binary",691,21,0,["Const",691,21,0,"Expected an integer, got "],"+","Ident",691,51,0,"num"]],"Return",693,1,0,"Ident",693,1,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__int","__typeof"]},__nonzero:{helper:["Func",695,28,0,0,[["Ident",695,29,0,"num"]],[],[],"IfStatement",696,1,0,0,["Binary",696,5,0,["Ident",696,5,0,"num"],"===","Const",696,13,0,0],["Throw",697,1,0,"Call",697,10,0,["Ident",697,10,0,"RangeError"],0,["Binary",697,22,0,["Const",697,22,0,"Expected non-zero, got "],"+","Ident",697,50,0,"num"]],"Return",699,1,0,"Ident",699,1,0,"num"],type:"function",dependencies:["__nonzero"]},__lt:{helper:["Func",701,23,0,0,[["Ident",701,24,0,"x"],["Ident",701,26,0,"y"]],["type"],[],"BlockStatement",702,1,0,0,["Binary",702,1,0,["Ident",702,6,0,"type"],"=","Unary",702,13,0,"typeof","Ident",702,20,0,"x"],["IfStatement",703,1,0,0,["Binary",632,25,0,["Binary",636,18,0,["Ident",703,5,0,"type"],"!==","Const",703,20,0,"number"],"&&","Binary",632,37,0,["Ident",703,5,0,"type"],"!==","Const",703,29,0,"string"],["Throw",704,1,0,"Call",704,10,0,["Ident",704,10,0,"TypeError"],0,["Binary",704,21,0,["Const",704,21,0,"Cannot compare a non-number/string: "],"+","Ident",704,62,0,"type"]],"IfStatement",703,1,0,0,["Binary",43,7,0,["Ident",705,10,0,"type"],"!==","Unary",705,18,0,"typeof","Ident",705,25,0,"y"],["Throw",706,1,0,"Call",706,10,0,["Ident",706,10,0,"TypeError"],0,["Binary",706,21,0,["Binary",706,21,0,["Binary",706,21,0,["Const",706,21,0,"Cannot compare elements of different types: "],"+","Ident",706,70,0,"type"],"+","Const",706,79,0," vs "],"+","Unary",706,88,0,"typeof","Ident",706,95,0,"y"]],"Return",708,1,0,"Binary",708,1,0,["Ident",708,1,0,"x"],"<","Ident",708,9,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lt"]},__lte:{helper:["Func",710,24,0,0,[["Ident",710,25,0,"x"],["Ident",710,27,0,"y"]],["type"],[],"BlockStatement",711,1,0,0,["Binary",711,1,0,["Ident",711,6,0,"type"],"=","Unary",711,13,0,"typeof","Ident",711,20,0,"x"],["IfStatement",712,1,0,0,["Binary",632,25,0,["Binary",636,18,0,["Ident",712,5,0,"type"],"!==","Const",712,20,0,"number"],"&&","Binary",632,37,0,["Ident",712,5,0,"type"],"!==","Const",712,29,0,"string"],["Throw",713,1,0,"Call",713,10,0,["Ident",713,10,0,"TypeError"],0,["Binary",713,21,0,["Const",713,21,0,"Cannot compare a non-number/string: "],"+","Ident",713,62,0,"type"]],"IfStatement",712,1,0,0,["Binary",43,7,0,["Ident",714,10,0,"type"],"!==","Unary",714,18,0,"typeof","Ident",714,25,0,"y"],["Throw",715,1,0,"Call",715,10,0,["Ident",715,10,0,"TypeError"],0,["Binary",715,21,0,["Binary",715,21,0,["Binary",715,21,0,["Const",715,21,0,"Cannot compare elements of different types: "],"+","Ident",715,70,0,"type"],"+","Const",715,79,0," vs "],"+","Unary",715,88,0,"typeof","Ident",715,95,0,"y"]],"Return",717,1,0,"Binary",717,1,0,["Ident",717,1,0,"x"],"<=","Ident",717,10,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lte"]},__slice:{helper:["Binary",964,24,0,["Binary",964,24,0,["Ident",964,24,0,"Array"],".","Const",964,31,0,"prototype"],".","Const",964,41,0,"slice"],type:"any",dependencies:["__slice"]},__freeze:{helper:["IfExpression",966,25,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",966,41,0,["Ident",966,41,0,"Object"],".","Const",966,49,0,"freeze"],"===","Const",138,25,0,"function"],["Binary",967,1,0,["Ident",967,1,0,"Object"],".","Const",967,10,0,"freeze"],"Func",969,4,0,0,[["Ident",969,5,0,"x"]],[],[],"Return",969,10,0,"Ident",969,10,0,"x"],type:"any",dependencies:["__freeze"]},__freezeFunc:{helper:["Func",971,32,0,0,[["Ident",971,33,0,"x"]],[],[],"BlockStatement",972,1,0,0,["IfStatement",972,1,0,0,["Binary",49,7,0,["Binary",972,5,0,["Ident",972,5,0,"x"],".","Const",972,8,0,"prototype"],"!=","Const",1,1,0,null],["Call",973,1,0,["Ident",973,1,0,"__freeze"],0,["Binary",973,14,0,["Ident",973,14,0,"x"],".","Const",973,16,0,"prototype"]]],["Return",974,1,0,"Call",974,1,0,["Ident",974,1,0,"__freeze"],0,["Ident",974,12,0,"x"]]],type:"function",dependencies:["__freeze","__freezeFunc"]},__isArray:{helper:["IfExpression",976,27,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",976,43,0,["Ident",976,43,0,"Array"],".","Const",976,50,0,"isArray"],"===","Const",138,25,0,"function"],["Binary",977,1,0,["Ident",977,1,0,"Array"],".","Const",977,9,0,"isArray"],"Call",9,9,0,["Func",9,12,0,0,[],["_toString"],[],"BlockStatement",980,1,0,0,["Binary",980,1,0,["Ident",980,8,0,"_toString"],"=","Binary",980,21,0,["Binary",980,21,0,["Ident",980,21,0,"Object"],".","Const",980,29,0,"prototype"],".","Const",980,39,0,"toString"],["Return",981,6,0,"Func",981,6,0,0,[["Ident",981,7,0,"x"]],[],[],"Return",981,23,0,"Binary",981,23,0,["Call",981,23,0,["Binary",981,23,0,["Ident",981,23,0,"_toString"],".","Const",981,23,0,"call"],0,["Ident",981,36,0,"x"]],"===","Const",981,42,0,"[object Array]"]],0],type:"any",dependencies:["__isArray"]},__isObject:{helper:["Func",983,30,0,0,[["Ident",983,31,0,"x"]],[],[],"Return",983,47,0,"Binary",983,47,0,["Binary",983,47,0,["Unary",983,47,0,"typeof","Ident",983,54,0,"x"],"===","Const",983,61,0,"object"],"&&","Binary",43,7,0,["Ident",983,71,0,"x"],"!==","Const",983,76,0,null],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__isObject"]},__toArray:{helper:["Func",985,29,0,0,[["Ident",985,30,0,"x"]],[],[],"IfStatement",986,1,0,0,["Binary",986,5,0,["Ident",986,9,0,"x"],"==","Const",1,1,0,null],["Throw",987,1,0,"Call",987,10,0,["Ident",987,10,0,"TypeError"],0,["Binary",987,21,0,["Const",987,21,0,"Expected an object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",987,58,0,"x"]]],"IfStatement",986,1,0,0,["Call",141,146,0,["Ident",141,146,0,"__isArray"],0,["Ident",988,20,0,"x"]],["Return",989,1,0,"Ident",989,1,0,"x"],"IfStatement",986,1,0,0,["Binary",990,10,0,["Unary",990,10,0,"typeof","Ident",990,17,0,"x"],"===","Const",990,24,0,"string"],["Return",991,1,0,"Call",991,1,0,["Binary",991,1,0,["Ident",991,1,0,"x"],".","Const",991,7,0,"split"],0,["Const",991,13,0,""]],"Return",993,1,0,"Call",993,1,0,["Binary",993,1,0,["Ident",993,1,0,"__slice"],".","Const",993,1,0,"call"],0,["Ident",993,14,0,"x"]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__isArray","__slice","__toArray","__typeof"]},__create:{helper:["IfExpression",995,25,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",995,41,0,["Ident",995,41,0,"Object"],".","Const",995,49,0,"create"],"===","Const",138,25,0,"function"],["Binary",996,1,0,["Ident",996,1,0,"Object"],".","Const",996,10,0,"create"],"Func",998,4,0,0,[["Ident",998,5,0,"x"]],[],[],"BlockStatement",999,1,0,0,["Func",999,1,0,["Ident",999,8,0,"F"],[],[],[]],["Binary",1e3,1,0,["Binary",1e3,1,0,["Ident",1e3,1,0,"F"],".","Const",1e3,7,0,"prototype"],"=","Ident",1e3,19,0,"x"],["Return",1001,1,0,"Call",1001,1,0,["Ident",1001,8,0,"F"],1]],type:"any",dependencies:["__create"]},__pow:{helper:["Binary",1003,22,0,["Ident",1003,22,0,"Math"],".","Const",1003,28,0,"pow"],type:"any",dependencies:["__pow"]},__floor:{helper:["Binary",1004,24,0,["Ident",1004,24,0,"Math"],".","Const",1004,30,0,"floor"],type:"any",dependencies:["__floor"]},__sqrt:{helper:["Binary",1005,23,0,["Ident",1005,23,0,"Math"],".","Const",1005,29,0,"sqrt"],type:"any",dependencies:["__sqrt"]},__log:{helper:["Binary",1006,22,0,["Ident",1006,22,0,"Math"],".","Const",1006,28,0,"log"],type:"any",dependencies:["__log"]},__in:{helper:["IfExpression",1150,21,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",1150,37,0,["Binary",1150,37,0,["Ident",1150,37,0,"Array"],".","Const",1150,44,0,"prototype"],".","Const",1150,54,0,"indexOf"],"===","Const",138,25,0,"function"],["Call",9,9,0,["Func",9,12,0,0,[],["indexOf"],[],"BlockStatement",1152,1,0,0,["Binary",1152,1,0,["Ident",1152,8,0,"indexOf"],"=","Binary",1152,19,0,["Binary",1152,19,0,["Ident",1152,19,0,"Array"],".","Const",1152,26,0,"prototype"],".","Const",1152,36,0,"indexOf"],["Return",1153,6,0,"Func",1153,6,0,0,[["Ident",1153,7,0,"child"],["Ident",1153,13,0,"parent"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",1153,35,0,["Binary",1153,35,0,["Ident",1153,35,0,"indexOf"],".","Const",1153,35,0,"call"],0,["Ident",1153,46,0,"parent"],["Ident",1153,53,0,"child"]],"!==","Const",1153,63,0,-1]],0],"Func",1155,4,0,0,[["Ident",1155,5,0,"child"],["Ident",1155,11,0,"parent"]],["i","len"],[],"BlockStatement",1156,1,0,0,["Binary",1156,1,0,["Ident",1156,8,0,"len"],"=","Unary",1156,14,0,"+","Binary",1156,17,0,["Ident",1156,17,0,"parent"],".","Const",1156,24,0,"length"],["Binary",1157,1,0,["Ident",1157,16,0,"i"],"=","Const",1157,20,0,-1],["For",1118,1,0,0,0,["Binary",723,13,0,["Unary",1158,12,0,"++","Ident",1158,12,0,"i"],"<","Ident",1158,22,0,"len"],0,"IfStatement",1159,1,0,0,["Binary",1159,9,0,["Binary",1159,9,0,["Ident",1159,9,0,"child"],"===","Binary",1159,18,0,["Ident",1159,18,0,"parent"],".","Ident",1159,26,0,"i"],"&&","Binary",1159,32,0,["Ident",1159,46,0,"i"],"in","Ident",1159,32,0,"parent"],["Return",1160,1,0,"Const",1160,15,0,!0]],["Return",1161,1,0,"Const",1161,1,0,!1]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__in"]},__genericFunc:{helper:["Func",1639,33,0,0,[["Ident",1639,34,0,"numArgs"],["Ident",1639,53,0,"make"]],["any","cache","result"],[],"BlockStatement",1640,1,0,0,["Binary",1640,1,0,["Ident",1640,6,0,"cache"],"=","Call",1640,14,0,["Ident",1640,14,0,"WeakMap"],0],["Binary",1641,1,0,["Ident",1641,6,0,"any"],"=","Obj",1641,12,0],["Func",1642,1,0,["Ident",1642,6,0,"generic"],[],["_ref","current","i","item","type"],[],"BlockStatement",1513,1,0,0,["Binary",1513,1,0,["Ident",1643,45,0,"current"],"=","Ident",1643,55,0,"cache"],["For",1278,1,0,0,["Binary",1188,38,0,["Ident",1643,15,0,"i"],"=","Binary",583,9,0,["Ident",1643,20,0,"numArgs"],"-","Const",1643,32,0,1],["Binary",57,55,0,["Ident",1643,15,0,"i"],">=","Const",1643,37,0,0],["Unary",1226,35,0,"--","Ident",1643,15,0,"i"],"BlockStatement",1644,1,0,0,["IfStatement",788,9,0,0,["Binary",49,7,0,["Binary",1644,17,0,["Ident",1644,17,0,"_ref"],"=","Binary",1644,17,0,["Arguments",1644,17,0],".","Ident",1644,28,0,"i"],"!=","Const",1,1,0,null],["Binary",1644,1,0,["Ident",1644,10,0,"type"],"=","Ident",1644,17,0,"_ref"],"Binary",1644,1,0,["Ident",1644,10,0,"type"],"=","Ident",1644,32,0,"any"],["Binary",1645,1,0,["Ident",1645,18,0,"item"],"=","Call",1645,25,0,["Binary",1645,25,0,["Ident",1645,25,0,"current"],".","Const",1645,34,0,"get"],0,["Ident",1645,38,0,"type"]],["IfStatement",1646,1,0,0,["Binary",1646,9,0,["Ident",1646,13,0,"item"],"==","Const",1,1,0,null],["BlockStatement",1647,1,0,0,["IfStatement",1647,16,0,0,["Binary",1647,19,0,["Ident",1647,19,0,"i"],"===","Const",1647,25,0,0],["Binary",1647,1,0,["Ident",1647,1,0,"item"],"=","Call",1648,1,0,["Binary",1648,1,0,["Ident",1648,1,0,"make"],".","Const",1648,1,0,"apply"],0,["This",1648,17,0],["Arguments",1648,26,0]],"Binary",1647,1,0,["Ident",1647,1,0,"item"],"=","Call",1650,1,0,["Ident",1650,1,0,"WeakMap"],0],["Call",1651,1,0,["Binary",1651,1,0,["Ident",1651,1,0,"current"],".","Const",1651,17,0,"set"],0,["Ident",1651,21,0,"type"],["Ident",1651,26,0,"item"]]]],["Binary",1509,59,0,["Ident",1643,45,0,"current"],"=","Ident",1652,1,0,"item"]],["Return",1643,45,0,"Ident",1643,45,0,"current"]],["Binary",1653,1,0,["Ident",1653,6,0,"result"],"=","Call",1653,15,0,["Ident",1653,15,0,"generic"],0],["Binary",1654,1,0,["Binary",1654,1,0,["Ident",1654,1,0,"result"],".","Const",1654,10,0,"generic"],"=","Ident",1654,20,0,"generic"],["Return",1655,1,0,"Ident",1655,1,0,"result"]],type:"function",dependencies:["__genericFunc","__toArray","WeakMap"]},__range:{helper:["Func",1902,1,0,0,[["Ident",1951,27,0,"start"],["Ident",1951,43,0,"end"],["Ident",1951,58,0,"step"],["Ident",1951,74,0,"inclusive"]],["i","result"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",1951,27,0,"start"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected start to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",1951,27,0,"start"]]]],["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",1951,43,0,"end"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected end to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",1951,43,0,"end"]]]],["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",1951,58,0,"step"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected step to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",1951,58,0,"step"]]]],["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",1951,74,0,"inclusive"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",1951,74,0,"inclusive"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",1951,74,0,"inclusive"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected inclusive to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",1951,74,0,"inclusive"]]]],["IfStatement",1952,1,0,0,["Binary",1952,5,0,["Ident",1952,5,0,"step"],"===","Const",1952,14,0,0],["Throw",1953,1,0,"Call",1953,10,0,["Ident",1953,10,0,"RangeError"],0,["Const",1953,22,0,"step cannot be zero"]],"IfStatement",1952,1,0,0,["Unary",1954,10,0,"!","Call",1954,14,0,["Ident",1954,14,0,"isFinite"],0,["Ident",1954,25,0,"start"]],["Throw",1955,1,0,"Call",1955,10,0,["Ident",1955,10,0,"RangeError"],0,["Const",1955,22,0,"start must be finite"]],"IfStatement",1952,1,0,0,["Unary",1956,10,0,"!","Call",1956,14,0,["Ident",1956,14,0,"isFinite"],0,["Ident",1956,25,0,"end"]],["Throw",1957,1,0,"Call",1957,10,0,["Ident",1957,10,0,"RangeError"],0,["Const",1957,22,0,"end must be finite"]]],["Binary",1958,1,0,["Ident",1958,6,0,"result"],"=","Arr",1958,15,0],["Binary",1959,1,0,["Ident",1959,14,0,"i"],"=","Ident",1959,18,0,"start"],["IfStatement",1960,1,0,0,["Binary",57,23,0,["Ident",1960,5,0,"step"],">","Const",1960,14,0,0],["BlockStatement",1961,1,0,0,["For",1118,1,0,0,0,["Binary",1961,10,0,["Ident",1961,10,0,"i"],"<","Ident",1961,15,0,"end"],["Binary",1961,20,0,["Ident",1961,20,0,"i"],"+=","Ident",1961,26,0,"step"],"Call",1962,1,0,["Binary",1962,1,0,["Ident",1962,1,0,"result"],".","Const",1962,14,0,"push"],0,["Ident",1962,19,0,"i"]],["IfStatement",1963,1,0,0,["Binary",1963,7,0,["Ident",1963,7,0,"inclusive"],"&&","Binary",1963,21,0,["Ident",1963,21,0,"i"],"<=","Ident",1963,27,0,"end"],["Call",1964,1,0,["Binary",1964,1,0,["Ident",1964,1,0,"result"],".","Const",1964,14,0,"push"],0,["Ident",1964,19,0,"i"]]]],"BlockStatement",1966,1,0,0,["For",1118,1,0,0,0,["Binary",57,23,0,["Ident",1966,10,0,"i"],">","Ident",1966,15,0,"end"],["Binary",1966,20,0,["Ident",1966,20,0,"i"],"+=","Ident",1966,26,0,"step"],"Call",1967,1,0,["Binary",1967,1,0,["Ident",1967,1,0,"result"],".","Const",1967,14,0,"push"],0,["Ident",1967,19,0,"i"]],["IfStatement",1968,1,0,0,["Binary",1968,7,0,["Ident",1968,7,0,"inclusive"],"&&","Binary",57,55,0,["Ident",1968,21,0,"i"],">=","Ident",1968,27,0,"end"],["Call",1969,1,0,["Binary",1969,1,0,["Ident",1969,1,0,"result"],".","Const",1969,14,0,"push"],0,["Ident",1969,19,0,"i"]]]],["Return",1970,1,0,"Ident",1970,1,0,"result"]],type:{type:"generic",base:"functionBase",args:["numberArray"]},dependencies:["__range","__typeof"]},__step:{helper:["Func",1902,1,0,0,[["Ident",1972,26,0,"array"],["Ident",1972,32,0,"step"]],["i","len","result"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",1972,32,0,"step"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected step to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",1972,32,0,"step"]]]],["IfStatement",1973,1,0,0,["Binary",1973,5,0,["Ident",1973,5,0,"step"],"===","Const",1973,14,0,0],["Throw",1974,1,0,"Call",1974,10,0,["Ident",1974,10,0,"RangeError"],0,["Const",1974,22,0,"step cannot be zero"]],"IfStatement",1973,1,0,0,["Binary",1975,10,0,["Ident",1975,10,0,"step"],"===","Const",1975,19,0,1],["Return",1976,1,0,"Call",1976,1,0,["Ident",1976,1,0,"__toArray"],0,["Ident",1976,16,0,"array"]],"IfStatement",1973,1,0,0,["Binary",1977,10,0,["Ident",1977,10,0,"step"],"===","Const",1977,18,0,-1],["Return",1978,1,0,"Call",1978,1,0,["Binary",1978,1,0,["Call",1978,1,0,["Binary",1978,1,0,["Ident",1978,1,0,"__slice"],".","Const",1978,1,0,"call"],0,["Ident",1978,14,0,"array"]],".","Const",1978,21,0,"reverse"],0],"IfStatement",1973,1,0,0,["Binary",682,7,0,["Binary",572,9,0,["Ident",1979,10,0,"step"],"%","Const",1979,23,0,1],"!==","Const",682,26,0,0],["Throw",1980,1,0,"Call",1980,10,0,["Ident",1980,10,0,"RangeError"],0,["Binary",608,7,0,["Const",1980,22,0,"step must be an integer, got "],"+","Call",1980,54,0,["Ident",1980,54,0,"String"],0,["Ident",1980,61,0,"step"]]],"BlockStatement",1982,1,0,0,["Binary",1982,1,0,["Ident",1982,8,0,"result"],"=","Arr",1982,17,0],["IfStatement",1983,1,0,0,["Binary",759,9,0,["Ident",1983,7,0,"step"],">","Const",1983,15,0,0],["BlockStatement",1984,1,0,0,["Binary",1984,1,0,["Ident",1984,18,0,"i"],"=","Const",1984,23,0,0],["Binary",1985,1,0,["Ident",1985,10,0,"len"],"=","Call",551,11,0,["Ident",551,11,0,"__num"],0,["Binary",1985,18,0,["Ident",1985,18,0,"array"],".","Const",1985,24,0,"length"]],["For",1118,1,0,0,0,["Binary",723,13,0,["Ident",1986,12,0,"i"],"<","Ident",1986,16,0,"len"],["Binary",897,11,0,["Ident",1986,21,0,"i"],"+=","Ident",1986,26,0,"step"],"Call",1987,1,0,["Binary",1987,1,0,["Ident",1987,1,0,"result"],".","Const",1987,16,0,"push"],0,["Binary",1987,21,0,["Ident",1987,21,0,"array"],".","Ident",1987,27,0,"i"]]],"BlockStatement",1989,1,0,0,["Binary",1989,1,0,["Ident",1989,18,0,"i"],"=","Binary",583,9,0,["Call",551,11,0,["Ident",551,11,0,"__num"],0,["Binary",1989,22,0,["Ident",1989,22,0,"array"],".","Const",1989,29,0,"length"]],"-","Const",1989,38,0,1],["For",1118,1,0,0,0,["Binary",761,9,0,["Ident",1990,12,0,"i"],">=","Const",1990,18,0,0],["Binary",897,11,0,["Ident",1990,20,0,"i"],"+=","Ident",1990,25,0,"step"],"Call",1991,1,0,["Binary",1991,1,0,["Ident",1991,1,0,"result"],".","Const",1991,16,0,"push"],0,["Binary",1991,21,0,["Ident",1991,21,0,"array"],".","Ident",1991,27,0,"i"]]],["Return",1992,1,0,"Ident",1992,1,0,"result"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__num","__slice","__step","__toArray","__typeof"]},__sliceStep:{helper:["Func",1994,31,0,0,[["Ident",1994,32,0,"array"],["Ident",1994,38,0,"start"],["Ident",1994,45,0,"end"],["Ident",1994,58,0,"step"],["Ident",1994,64,0,"inclusive"]],["arr"],[],"BlockStatement",1995,1,0,0,["IfStatement",1995,12,0,0,["Binary",1995,15,0,["Ident",1995,15,0,"step"],"<","Const",1995,24,0,0],["Binary",1995,1,0,["Ident",1995,6,0,"arr"],"=","Call",1996,1,0,["Binary",1996,1,0,["Ident",1996,1,0,"__slice"],".","Const",1996,1,0,"call"],0,["Ident",1996,14,0,"array"],["IfExpression",1996,20,0,["Ident",1996,23,0,"inclusive"],["Ident",1996,38,0,"end"],"Binary",1996,47,0,["Unary",368,21,0,"+","Ident",1996,47,0,"end"],"+","Const",1996,55,0,1],["Binary",1996,57,0,["Binary",1996,57,0,["Unary",368,21,0,"+","Ident",1996,57,0,"start"],"+","Const",1996,67,0,1],"||","Const",1996,71,0,1,1]],"Binary",1995,1,0,["Ident",1995,6,0,"arr"],"=","Call",1998,1,0,["Binary",1998,1,0,["Ident",1998,1,0,"__slice"],".","Const",1998,1,0,"call"],0,["Ident",1998,14,0,"array"],["Ident",1998,20,0,"start"],["IfExpression",1998,27,0,["Ident",1998,30,0,"inclusive"],["Binary",1998,45,0,["Binary",1998,45,0,["Unary",368,21,0,"+","Ident",1998,45,0,"end"],"+","Const",1998,53,0,1],"||","Const",1998,57,0,1,1],"Ident",1998,71,0,"end"]],["IfStatement",1999,1,0,0,["Binary",1999,5,0,["Ident",1999,5,0,"step"],"===","Const",1999,14,0,1],["Return",2e3,1,0,"Ident",2e3,1,0,"arr"],"IfStatement",1999,1,0,0,["Binary",2001,10,0,["Ident",2001,10,0,"step"],"===","Const",2001,18,0,-1],["Return",2002,1,0,"Call",2002,1,0,["Binary",2002,1,0,["Ident",2002,1,0,"arr"],".","Const",2002,9,0,"reverse"],0],"Return",2004,1,0,"Call",2004,1,0,["Ident",2004,1,0,"__step"],0,["Ident",2004,12,0,"arr"],["Ident",2004,16,0,"step"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__slice","__sliceStep","__step"]},__arrayToIter:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["proto"],[],"BlockStatement",2104,1,0,0,["Binary",2104,1,0,["Ident",2104,6,0,"proto"],"=","Obj",2104,14,0,2105,5,null,"iterator",["Func",2105,16,0,0,[],[],[],"Return",2105,18,0,"This",2105,18,0],2106,5,null,"next",["Func",2106,12,0,0,[],["array","i"],[],"BlockStatement",2107,1,0,0,["Binary",2107,1,0,["Ident",2107,10,0,"i"],"=","Binary",581,9,0,["Call",551,11,0,["Ident",551,11,0,"__num"],0,["Binary",2107,14,0,["This",2107,14,0],".","Const",2107,16,0,"index"]],"+","Const",2107,24,0,1],["Binary",2108,1,0,["Ident",2108,10,0,"array"],"=","Binary",2108,18,0,["This",2108,18,0],".","Const",2108,20,0,"array"],["IfStatement",2109,1,0,0,["Binary",761,9,0,["Ident",2109,9,0,"i"],">=","Call",728,22,0,["Ident",728,22,0,"__num"],0,["Binary",2109,14,0,["Ident",2109,14,0,"array"],".","Const",2109,21,0,"length"]],["Return",2110,1,0,"Obj",2110,1,0,2110,11,null,"done",["Const",2110,16,0,!0],2110,22,null,"value",["Const",2110,29,0]],"BlockStatement",2112,1,0,0,["Binary",2112,1,0,["Binary",2112,1,0,["This",2112,1,0],".","Const",2112,10,0,"index"],"=","Ident",2112,18,0,"i"],["Return",2113,1,0,"Obj",2113,1,0,2113,11,null,"done",["Const",2113,16,0,!1],2113,23,null,"value",["Binary",2113,30,0,["Ident",2113,30,0,"array"],".","Ident",2113,37,0,"i"]]]]],["Return",1902,1,0,"Func",1902,1,0,0,[["Ident",2115,5,0,"array"]],["_o"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Unary",659,18,0,"!","Call",141,146,0,["Ident",141,146,0,"__isArray"],0,["Ident",2115,5,0,"array"]],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected array to be an Array, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2115,5,0,"array"]]]],["Binary",2116,1,0,["Ident",2116,1,0,"_o"],"=","Call",2116,1,0,["Ident",2116,1,0,"__create"],0,["Ident",2116,14,0,"proto"]],["Binary",2117,7,0,["Binary",2117,7,0,["Ident",2116,1,0,"_o"],".","Const",2117,7,0,"array"],"=","Ident",2117,7,0,"array"],["Binary",2118,7,0,["Binary",2118,7,0,["Ident",2116,1,0,"_o"],".","Const",2118,7,0,"index"],"=","Const",2118,13,0,-1],["Return",2116,1,0,"Ident",2116,1,0,"_o"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{array:"array",index:"number"}}]},dependencies:["__arrayToIter","__create","__isArray","__num","__typeof"]},__iter:{helper:["Func",2121,25,0,0,[["Ident",2121,26,0,"iterable"]],[],[],"IfStatement",2122,1,0,0,["Binary",2122,5,0,["Ident",2122,9,0,"iterable"],"==","Const",1,1,0,null],["Throw",2123,1,0,"Call",2123,10,0,["Ident",2123,10,0,"TypeError"],0,["Binary",608,7,0,["Const",2123,21,0,"Expected iterable to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2123,70,0,"iterable"]]],"IfStatement",2122,1,0,0,["Call",141,146,0,["Ident",141,146,0,"__isArray"],0,["Ident",2124,20,0,"iterable"]],["Return",2125,1,0,"Call",2125,1,0,["Ident",2125,1,0,"__arrayToIter"],0,["Ident",2125,21,0,"iterable"]],"IfStatement",2122,1,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",2126,23,0,["Ident",2126,23,0,"iterable"],".","Const",2126,33,0,"iterator"],"===","Const",138,25,0,"function"],["Return",2127,1,0,"Call",2127,1,0,["Binary",2127,1,0,["Ident",2127,1,0,"iterable"],".","Const",2127,14,0,"iterator"],0],"IfStatement",2122,1,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",2128,23,0,["Ident",2128,23,0,"iterable"],".","Const",2128,33,0,"next"],"===","Const",138,25,0,"function"],["Return",2129,1,0,"Ident",2129,1,0,"iterable"],"Throw",2131,1,0,"Call",2131,10,0,["Ident",2131,10,0,"Error"],0,["Binary",608,7,0,["Const",2131,17,0,"Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2131,142,0,"iterable"]]],type:"function",dependencies:["__arrayToIter","__isArray","__iter","__typeof"]},__keys:{helper:["IfExpression",2300,23,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",2300,39,0,["Ident",2300,39,0,"Object"],".","Const",2300,47,0,"keys"],"===","Const",138,25,0,"function"],["Binary",2301,1,0,["Ident",2301,1,0,"Object"],".","Const",2301,10,0,"keys"],"Func",2303,4,0,0,[["Ident",2303,5,0,"x"]],["key","keys"],[],"BlockStatement",2304,1,0,0,["Binary",2304,1,0,["Ident",2304,8,0,"keys"],"=","Arr",2304,15,0],["ForIn",2305,1,0,0,["Ident",2305,8,0,"key"],["Ident",2305,15,0,"x"],"IfStatement",1572,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",2305,15,0,"x"],["Ident",2305,8,0,"key"]],["Call",2306,1,0,["Binary",2306,1,0,["Ident",2306,1,0,"keys"],".","Const",2306,12,0,"push"],0,["Ident",2306,17,0,"key"]]],["Return",2307,1,0,"Ident",2307,1,0,"keys"]],type:"any",dependencies:["__keys","__owns"]},__allkeys:{helper:["Func",2312,28,0,0,[["Ident",2312,29,0,"x"]],["key","keys"],[],"BlockStatement",2313,1,0,0,["Binary",2313,1,0,["Ident",2313,6,0,"keys"],"=","Arr",2313,13,0],["ForIn",2314,1,0,0,["Ident",2314,6,0,"key"],["Ident",2314,16,0,"x"],"Call",2315,1,0,["Binary",2315,1,0,["Ident",2315,1,0,"keys"],".","Const",2315,10,0,"push"],0,["Ident",2315,15,0,"key"]],["Return",2316,1,0,"Ident",2316,1,0,"keys"]],type:{type:"generic",base:"functionBase",args:["stringArray"]},dependencies:["__allkeys"]},__new:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["newCreators"],[],"BlockStatement",2322,1,0,0,["Binary",2322,1,0,["Ident",2322,6,0,"newCreators"],"=","Arr",2322,21,0],["Return",2323,4,0,"Func",2323,4,0,0,[],["creator","func","i","length"],[],"BlockStatement",2324,1,0,0,["IfStatement",2324,1,0,0,["Binary",2324,7,0,["Unary",138,7,0,"typeof","This",2324,24,0],"!==","Const",138,25,0,"function"],["Throw",2325,1,0,"Call",2325,12,0,["Ident",2325,12,0,"Error"],0,["Binary",608,7,0,["Const",2325,19,0,"Expected this to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["This",2325,65,0]]]],["Binary",2326,1,0,["Ident",2326,8,0,"length"],"=","Binary",2326,17,0,["Arguments",2326,17,0],".","Const",2326,28,0,"length"],["Binary",2327,1,0,["Ident",2327,16,0,"creator"],"=","Binary",2327,26,0,["Ident",2327,26,0,"newCreators"],".","Ident",2327,40,0,"length"],["IfStatement",2328,1,0,0,["Unary",2328,7,0,"!","Ident",2328,11,0,"creator"],["BlockStatement",2329,1,0,0,["Binary",2329,1,0,["Ident",2329,10,0,"func"],"=","Arr",2329,17,0,["Const",2329,19,0,"return new C("]],["For",1278,1,0,0,["BlockExpression",1,1,0,["Binary",1188,38,0,["Ident",2330,10,0,"i"],"=","Const",2330,16,0,0],["Ident",2330,21,0,"length"]],["Binary",1214,57,0,["Ident",2330,10,0,"i"],"<","Ident",2330,21,0,"length"],["Unary",1226,35,0,"++","Ident",2330,10,0,"i"],"BlockStatement",2331,1,0,0,["IfStatement",2331,1,0,0,["Binary",759,9,0,["Ident",2331,11,0,"i"],">","Const",2331,16,0,0],["Call",2332,1,0,["Binary",2332,1,0,["Ident",2332,1,0,"func"],".","Const",2332,16,0,"push"],0,["Const",2332,21,0,", "]]],["Call",2333,1,0,["Binary",2333,1,0,["Ident",2333,1,0,"func"],".","Const",2333,14,0,"push"],0,["Const",2333,19,0,"a["],["Ident",2333,24,0,"i"],["Const",2333,28,0,"]"]]],["Call",2334,1,0,["Binary",2334,1,0,["Ident",2334,1,0,"func"],".","Const",2334,12,0,"push"],0,["Const",2334,17,0,");"]],["Binary",2335,1,0,["Ident",2335,1,0,"creator"],"=","Call",2335,17,0,["Ident",2335,17,0,"Function"],0,["Const",2335,27,0,"C"],["Const",2335,32,0,"a"],["Call",2335,36,0,["Binary",2335,36,0,["Ident",2335,36,0,"func"],".","Const",2335,42,0,"join"],0,["Const",2335,47,0,""]]],["Binary",2336,1,0,["Binary",2336,1,0,["Ident",2336,1,0,"newCreators"],".","Ident",2336,20,0,"length"],"=","Ident",2336,30,0,"creator"]]],["Return",2337,1,0,"Call",2337,1,0,["Ident",2337,1,0,"creator"],0,["This",2337,13,0],["Arguments",2337,18,0]]]],0],type:"function",dependencies:["__new","__typeof"]},__instanceofsome:{helper:["Func",2339,35,0,0,[["Ident",2339,36,0,"value"],["Ident",2339,42,0,"array"]],["_arr","_i","_some","item"],[],"BlockStatement",2340,1,0,0,["Binary",1026,26,0,["Ident",1478,13,0,"_some"],"=","Const",1,1,0,!1],["For",1478,13,0,0,["BlockExpression",1,1,0,["Binary",2340,1,0,["Ident",2340,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Ident",2340,19,0,"array"]],["Binary",1381,26,0,["Ident",2340,1,0,"_i"],"=","Binary",1381,49,0,["Ident",2340,1,0,"_arr"],".","Const",1381,56,0,"length"]],["Unary",1382,16,0,"--post","Ident",2340,1,0,"_i"],0,"BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",2340,11,0,"item"],"=","Binary",1345,75,0,["Ident",2340,1,0,"_arr"],".","Ident",2340,1,0,"_i"],["IfStatement",1028,1,0,0,["Binary",2341,1,0,["Ident",2341,1,0,"value"],"instanceof","Ident",2341,21,0,"item"],["BlockStatement",1029,1,0,0,["Binary",1029,1,0,["Ident",1478,13,0,"_some"],"=","Const",1,1,0,!0],["Break",1030,1,0]]]],["Return",1478,13,0,"Ident",1478,13,0,"_some"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__instanceofsome","__toArray"]},__getInstanceof:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",2344,1,0,0,["Func",2344,1,0,["Ident",2344,6,0,"isAny"],[],[],[],"Return",2344,19,0,"Const",2344,19,0,!0],["Func",2345,1,0,["Ident",2345,6,0,"isStr"],[["Ident",2345,17,0,"x"]],[],[],"Return",129,7,0,"Binary",129,7,0,["Unary",129,7,0,"typeof","Ident",2345,17,0,"x"],"===","Const",129,25,0,"string"],["Func",2346,1,0,["Ident",2346,6,0,"isNum"],[["Ident",2346,17,0,"x"]],[],[],"Return",132,7,0,"Binary",132,7,0,["Unary",132,7,0,"typeof","Ident",2346,17,0,"x"],"===","Const",132,25,0,"number"],["Func",2347,1,0,["Ident",2347,6,0,"isFunc"],[["Ident",2347,18,0,"x"]],[],[],"Return",138,7,0,"Binary",138,7,0,["Unary",138,7,0,"typeof","Ident",2347,18,0,"x"],"===","Const",138,25,0,"function"],["Func",2348,1,0,["Ident",2348,6,0,"isBool"],[["Ident",2348,18,0,"x"]],[],[],"Return",135,7,0,"Binary",135,7,0,["Unary",135,7,0,"typeof","Ident",2348,18,0,"x"],"===","Const",135,25,0,"boolean"],["Return",2349,4,0,"Func",2349,4,0,0,[["Ident",2349,5,0,"ctor"]],[],[],"IfStatement",2350,1,0,0,["Binary",2350,7,0,["Ident",2350,11,0,"ctor"],"==","Const",1,1,0,null],["Return",2351,1,0,"Ident",2351,1,0,"isAny"],"Switch",2353,1,0,0,["Ident",2353,13,0,"ctor"],2354,11,null,["Ident",2354,11,0,"String"],["Return",2354,19,0,"Ident",2354,19,0,"isStr"],2355,11,null,["Ident",2355,11,0,"Number"],["Return",2355,19,0,"Ident",2355,19,0,"isNum"],2356,11,null,["Ident",2356,11,0,"Function"],["Return",2356,21,0,"Ident",2356,21,0,"isFunc"],2357,11,null,["Ident",2357,11,0,"Boolean"],["Return",2357,20,0,"Ident",2357,20,0,"isBool"],2358,11,null,["Ident",2358,11,0,"Array"],["Return",2358,18,0,"Ident",2358,18,0,"__isArray"],2359,11,null,["Ident",2359,11,0,"Object"],["Return",2359,19,0,"Ident",2359,19,0,"__isObject"],["Return",2360,17,0,"Func",2360,17,0,0,[["Ident",2360,17,0,"_x"]],[],[],"Return",2360,17,0,"Binary",2360,17,0,["Ident",2360,17,0,"_x"],"instanceof","Ident",2360,27,0,"ctor"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:["boolean"]}]},dependencies:["__getInstanceof","__isArray","__isObject"]},__name:{helper:["Func",1902,1,0,0,[["Ident",2362,26,0,"func"]],[],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2362,26,0,"func"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected func to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2362,26,0,"func"]]]],["Return",2362,50,0,"Binary",2362,50,0,["Binary",2362,50,0,["Binary",2362,50,0,["Ident",2362,50,0,"func"],".","Const",2362,56,0,"displayName"],"||","Binary",2362,71,0,["Ident",2362,71,0,"func"],".","Const",2362,77,0,"name"],"||","Const",2362,85,0,""]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__name","__typeof"]},__once:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",2365,1,0,0,["Func",2365,1,0,["Ident",2365,6,0,"replacement"],[],[],[],"Throw",2365,23,0,"Call",2365,29,0,["Ident",2365,29,0,"Error"],0,["Const",2365,36,0,"Attempted to call function more than once"]],["Func",2366,1,0,["Ident",2366,6,0,"doNothing"],[],[],[]],["Return",1902,1,0,"Func",1902,1,0,0,[["Ident",2367,12,0,"func"],["Ident",2367,24,0,"silentFail"]],[],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2367,12,0,"func"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected func to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2367,12,0,"func"]]]],["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",2367,24,0,"silentFail"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",2367,24,0,"silentFail"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",2367,24,0,"silentFail"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected silentFail to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2367,24,0,"silentFail"]]]],["Return",2367,53,0,"Func",2367,53,0,0,[],["f"],[],"BlockStatement",2368,1,0,0,["Binary",2368,1,0,["Ident",2368,8,0,"f"],"=","Ident",2368,12,0,"func"],["IfStatement",2369,12,0,0,["Ident",2369,15,0,"silentFail"],["Binary",2369,1,0,["Ident",2369,1,0,"func"],"=","Ident",2369,32,0,"doNothing"],"Binary",2369,1,0,["Ident",2369,1,0,"func"],"=","Ident",2369,48,0,"replacement"],["Return",2370,1,0,"Call",2370,1,0,["Binary",2370,1,0,["Ident",2370,1,0,"f"],".","Const",2370,1,0,"apply"],0,["This",2370,8,0],["Arguments",2370,17,0]]]]],0],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__once","__toArray","__typeof"]},__async:{helper:["Func",1902,1,0,0,[["Ident",2472,34,0,"limit"],["Ident",2472,51,0,"length"],["Ident",2472,69,0,"hasResult"],["Ident",2472,92,0,"onValue"],["Ident",2472,108,0,"onComplete"]],["broken","completed","index","result","slotsUsed","sync"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",2472,34,0,"limit"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected limit to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2472,34,0,"limit"]]]],["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",2472,51,0,"length"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected length to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2472,51,0,"length"]]]],["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",2472,69,0,"hasResult"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",2472,69,0,"hasResult"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",2472,69,0,"hasResult"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected hasResult to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2472,69,0,"hasResult"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2472,92,0,"onValue"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected onValue to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2472,92,0,"onValue"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2472,108,0,"onComplete"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected onComplete to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2472,108,0,"onComplete"]]]],["IfStatement",2473,15,0,0,["Ident",2473,18,0,"hasResult"],["Binary",2473,1,0,["Ident",2473,6,0,"result"],"=","Arr",2473,34,0],"Binary",2473,1,0,["Ident",2473,6,0,"result"],"=","Const",2473,42,0,null],["IfStatement",2474,1,0,0,["Binary",2474,5,0,["Ident",2474,5,0,"length"],"<=","Const",2474,17,0,0],["Return",2475,1,0,"Call",2475,11,0,["Ident",2475,11,0,"onComplete"],0,["Const",2475,24,0,null],["Ident",2475,29,0,"result"]]],["IfStatement",2476,1,0,0,["Binary",2476,5,0,["Binary",2476,5,0,["Ident",2476,5,0,"limit"],"<","Const",2476,15,0,1],"||","Binary",43,7,0,["Ident",2476,19,0,"limit"],"!==","Ident",2476,28,0,"limit"],["Binary",2477,1,0,["Ident",2477,1,0,"limit"],"=","Const",2477,13,0,1,1]],["Binary",2479,1,0,["Ident",2479,14,0,"broken"],"=","Const",2479,23,0,null],["Binary",2480,1,0,["Ident",2480,14,0,"slotsUsed"],"=","Const",2480,28,0,0],["Binary",2481,1,0,["Ident",2481,14,0,"sync"],"=","Const",2481,21,0,!1],["Binary",2482,1,0,["Ident",2482,14,0,"completed"],"=","Const",2482,26,0,!1],["Func",2483,1,0,["Ident",2483,6,0,"onValueCallback"],[["Ident",2483,25,0,"err"],["Ident",2483,29,0,"value"]],[],[],"BlockStatement",2484,1,0,0,["IfStatement",2484,1,0,0,["Ident",2484,7,0,"completed"],["Return",2485,1,0,"Const",2485,1,0]],["Unary",2486,1,0,"--","Ident",2486,1,0,"slotsUsed"],["IfStatement",2487,1,0,0,["Binary",2487,7,0,["Binary",49,7,0,["Ident",2487,7,0,"err"],"!=","Const",1,1,0,null],"&&","Binary",2487,16,0,["Ident",2487,20,0,"broken"],"==","Const",1,1,0,null],["Binary",2488,1,0,["Ident",2488,1,0,"broken"],"=","Ident",2488,16,0,"err"]],["IfStatement",2489,1,0,0,["Binary",2489,7,0,["Binary",2489,7,0,["Ident",2489,7,0,"hasResult"],"&&","Binary",2489,22,0,["Ident",2489,26,0,"broken"],"==","Const",1,1,0,null],"&&","Binary",57,23,0,["Binary",2489,38,0,["Arguments",2489,38,0],".","Const",2489,49,0,"length"],">","Const",2489,59,0,1],["Call",2490,1,0,["Binary",2490,1,0,["Ident",2490,1,0,"result"],".","Const",2490,14,0,"push"],0,["Ident",2490,19,0,"value"]]],["IfStatement",2491,1,0,0,["Unary",2491,7,0,"!","Ident",2491,11,0,"sync"],["Call",2492,1,0,["Ident",2492,1,0,"next"],0]]],["Binary",2493,1,0,["Ident",2493,14,0,"index"],"=","Const",2493,22,0,-1],["Func",2494,1,0,["Ident",2494,6,0,"next"],[],[],[],"BlockStatement",2495,1,0,0,["For",1118,1,0,0,0,["Binary",2495,10,0,["Binary",2495,10,0,["Binary",2495,10,0,["Unary",2495,10,0,"!","Ident",2495,14,0,"completed"],"&&","Binary",2495,28,0,["Ident",2495,32,0,"broken"],"==","Const",1,1,0,null],"&&","Binary",2495,44,0,["Ident",2495,44,0,"slotsUsed"],"<","Ident",2495,58,0,"limit"],"&&","Binary",2495,68,0,["Unary",897,11,0,"++","Ident",2495,70,0,"index"],"<","Ident",2495,84,0,"length"],0,"BlockStatement",2496,1,0,0,["Unary",2496,1,0,"++","Ident",2496,1,0,"slotsUsed"],["Binary",2497,1,0,["Ident",2497,1,0,"sync"],"=","Const",2497,14,0,!0],["Call",2498,1,0,["Ident",2498,1,0,"onValue"],0,["Ident",2498,16,0,"index"],["Call",2398,11,0,["Ident",2398,11,0,"__once"],0,["Ident",2498,29,0,"onValueCallback"]]],["Binary",2499,1,0,["Ident",2499,1,0,"sync"],"=","Const",2499,14,0,!1]],["IfStatement",2500,1,0,0,["Binary",2500,7,0,["Unary",2500,7,0,"!","Ident",2500,11,0,"completed"],"&&","Binary",2500,27,0,["Binary",49,7,0,["Ident",2500,27,0,"broken"],"!=","Const",1,1,0,null],"||","Binary",2500,37,0,["Ident",2500,37,0,"slotsUsed"],"===","Const",2500,52,0,0],["BlockStatement",2501,1,0,0,["Binary",2501,1,0,["Ident",2501,1,0,"completed"],"=","Const",2501,19,0,!0],["IfStatement",2502,1,0,0,["Binary",49,7,0,["Ident",2502,9,0,"broken"],"!=","Const",1,1,0,null],["Call",2503,1,0,["Ident",2503,1,0,"onComplete"],0,["Ident",2503,21,0,"broken"]],"Call",2505,1,0,["Ident",2505,1,0,"onComplete"],0,["Const",2505,21,0,null],["Ident",2505,26,0,"result"]]]]],["Call",2506,1,0,["Ident",2506,1,0,"next"],0]],type:"function",dependencies:["__async","__once","__typeof"]},__asyncIter:{helper:["Func",1902,1,0,0,[["Ident",2508,39,0,"limit"],["Ident",2508,56,0,"iterator"],["Ident",2508,86,0,"hasResult"],["Ident",2508,109,0,"onValue"],["Ident",2508,125,0,"onComplete"]],["broken","close","completed","index","iterStopped","result","slotsUsed","sync"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",2508,39,0,"limit"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected limit to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2508,39,0,"limit"]]]],["IfStatement",1775,10,0,0,["Binary",1775,13,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",2508,56,0,"iterator"],"!==","Const",144,62,0,"object"],"||","Binary",144,72,0,["Ident",2508,56,0,"iterator"],"===","Const",1,1,0,null],["Throw",1776,1,0,"Call",1776,14,0,["Ident",1776,14,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected iterator to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2508,56,0,"iterator"]]],"IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Binary",1774,35,0,["Ident",2508,56,0,"iterator"],".","Const",2508,70,0,"next"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected iterator.next to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Binary",1774,35,0,["Ident",2508,56,0,"iterator"],".","Const",2508,70,0,"next"]]]],["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",2508,86,0,"hasResult"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",2508,86,0,"hasResult"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",2508,86,0,"hasResult"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected hasResult to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2508,86,0,"hasResult"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2508,109,0,"onValue"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected onValue to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2508,109,0,"onValue"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",2508,125,0,"onComplete"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected onComplete to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",2508,125,0,"onComplete"]]]],["IfStatement",2509,1,0,0,["Binary",2509,5,0,["Binary",2509,5,0,["Ident",2509,5,0,"limit"],"<","Const",2509,15,0,1],"||","Binary",43,7,0,["Ident",2509,19,0,"limit"],"!==","Ident",2509,28,0,"limit"],["Binary",2510,1,0,["Ident",2510,1,0,"limit"],"=","Const",2510,13,0,1,1]],["Binary",2511,1,0,["Ident",2511,14,0,"broken"],"=","Const",2511,23,0,null],["Binary",2512,1,0,["Ident",2512,14,0,"slotsUsed"],"=","Const",2512,28,0,0],["Binary",2513,1,0,["Ident",2513,14,0,"sync"],"=","Const",2513,21,0,!1],["IfStatement",2514,15,0,0,["Ident",2514,18,0,"hasResult"],["Binary",2514,1,0,["Ident",2514,6,0,"result"],"=","Arr",2514,34,0],"Binary",2514,1,0,["Ident",2514,6,0,"result"],"=","Const",2514,42,0,null],["Binary",2515,1,0,["Ident",2515,14,0,"completed"],"=","Const",2515,26,0,!1],["Func",2516,1,0,["Ident",2516,6,0,"onValueCallback"],[["Ident",2516,25,0,"err"],["Ident",2516,29,0,"value"]],[],[],"BlockStatement",2517,1,0,0,["IfStatement",2517,1,0,0,["Ident",2517,7,0,"completed"],["Return",2518,1,0,"Const",2518,1,0]],["Unary",2519,1,0,"--","Ident",2519,1,0,"slotsUsed"],["IfStatement",2520,1,0,0,["Binary",2520,7,0,["Binary",49,7,0,["Ident",2520,7,0,"err"],"!=","Const",1,1,0,null],"&&","Binary",2520,16,0,["Ident",2520,20,0,"broken"],"==","Const",1,1,0,null],["Binary",2521,1,0,["Ident",2521,1,0,"broken"],"=","Ident",2521,16,0,"err"]],["IfStatement",2522,1,0,0,["Binary",2522,7,0,["Binary",2522,7,0,["Ident",2522,7,0,"hasResult"],"&&","Binary",2522,22,0,["Ident",2522,26,0,"broken"],"==","Const",1,1,0,null],"&&","Binary",57,23,0,["Binary",2522,38,0,["Arguments",2522,38,0],".","Const",2522,49,0,"length"],">","Const",2522,59,0,1],["Call",2523,1,0,["Binary",2523,1,0,["Ident",2523,1,0,"result"],".","Const",2523,14,0,"push"],0,["Ident",2523,19,0,"value"]]],["IfStatement",2524,1,0,0,["Unary",2524,7,0,"!","Ident",2524,11,0,"sync"],["Call",2525,1,0,["Ident",2525,1,0,"next"],0]]],["Binary",2526,1,0,["Ident",2526,14,0,"index"],"=","Const",2526,22,0,-1],["Binary",2527,1,0,["Ident",2527,14,0,"iterStopped"],"=","Const",2527,29,0,!1],["Binary",2528,1,0,["Ident",2528,14,0,"close"],"=","Func",2528,24,0,0,[],[],[],"BlockStatement",2529,1,0,0,["Binary",2529,1,0,["Ident",2529,1,0,"close"],"=","Func",2529,15,0,0,[],[],[]],["TryCatch",2530,1,0,0,["Return",2531,1,0,"Call",2531,1,0,["Binary",2531,1,0,["Ident",2531,1,0,"iterator"],".","Const",2531,16,0,"close"],0],["Ident",2532,10,0,"e"],"Return",2533,1,0,"Const",2533,1,0]],["Func",2534,1,0,["Ident",2534,6,0,"next"],[],["item"],[],"BlockStatement",2535,1,0,0,["For",1118,1,0,0,0,["Binary",2535,10,0,["Binary",2535,10,0,["Binary",2535,10,0,["Unary",2535,10,0,"!","Ident",2535,14,0,"completed"],"&&","Binary",2535,28,0,["Ident",2535,32,0,"broken"],"==","Const",1,1,0,null],"&&","Binary",2535,44,0,["Ident",2535,44,0,"slotsUsed"],"<","Ident",2535,58,0,"limit"],"&&","Unary",2535,68,0,"!","Ident",2535,72,0,"iterStopped"],0,"BlockStatement",2536,1,0,0,["TryCatch",2536,1,0,0,["Binary",2537,1,0,["Ident",2537,12,0,"item"],"=","Call",2537,19,0,["Binary",2537,19,0,["Ident",2537,19,0,"iterator"],".","Const",2537,29,0,"next"],0],["Ident",2538,12,0,"e"],"BlockStatement",2539,1,0,0,["Binary",2539,1,0,["Ident",2539,1,0,"broken"],"=","Ident",2539,18,0,"e"],["Break",2540,1,0]],["IfStatement",2542,1,0,0,["Binary",2542,9,0,["Ident",2542,9,0,"item"],".","Const",2542,15,0,"done"],["BlockStatement",2543,1,0,0,["Binary",2543,1,0,["Ident",2543,1,0,"iterStopped"],"=","Const",2543,24,0,!0],["Break",2544,1,0]]],["Unary",2546,1,0,"++","Ident",2546,1,0,"slotsUsed"],["Binary",2547,1,0,["Ident",2547,1,0,"sync"],"=","Const",2547,14,0,!0],["TryCatch",2548,1,0,0,["Call",2549,1,0,["Ident",2549,1,0,"onValue"],0,["Binary",2549,18,0,["Ident",2549,18,0,"item"],".","Const",2549,23,0,"value"],["Unary",897,11,0,"++","Ident",2549,31,0,"index"],["Call",2398,11,0,["Ident",2398,11,0,"__once"],0,["Ident",2549,50,0,"onValueCallback"]]],["Ident",2550,12,0,"e"],"BlockStatement",2551,1,0,0,["Call",2551,1,0,["Ident",2551,1,0,"close"],0],["Throw",2552,1,0,"Ident",2552,14,0,"e"]],["Binary",2553,1,0,["Ident",2553,1,0,"sync"],"=","Const",2553,14,0,!1]],["IfStatement",2554,1,0,0,["Binary",2554,7,0,["Unary",2554,7,0,"!","Ident",2554,11,0,"completed"],"&&","Binary",2554,27,0,["Binary",49,7,0,["Ident",2554,27,0,"broken"],"!=","Const",1,1,0,null],"||","Binary",2554,37,0,["Ident",2554,37,0,"slotsUsed"],"===","Const",2554,52,0,0],["BlockStatement",2555,1,0,0,["Binary",2555,1,0,["Ident",2555,1,0,"completed"],"=","Const",2555,19,0,!0],["Call",2556,1,0,["Ident",2556,1,0,"close"],0],["IfStatement",2557,1,0,0,["Binary",49,7,0,["Ident",2557,9,0,"broken"],"!=","Const",1,1,0,null],["Call",2558,1,0,["Ident",2558,1,0,"onComplete"],0,["Ident",2558,21,0,"broken"]],"Call",2560,1,0,["Ident",2560,1,0,"onComplete"],0,["Const",2560,21,0,null],["Ident",2560,26,0,"result"]]]]],["Call",2561,1,0,["Ident",2561,1,0,"next"],0]],type:{type:"generic",base:"functionBase",args:["undefined"]},dependencies:["__asyncIter","__once","__typeof"]},__is:{helper:["IfExpression",3090,21,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3090,37,0,["Ident",3090,37,0,"Object"],".","Const",3090,45,0,"is"],"===","Const",138,25,0,"function"],["Binary",3091,1,0,["Ident",3091,1,0,"Object"],".","Const",3091,10,0,"is"],"Func",3093,4,0,0,[["Ident",3093,5,0,"x"],["Ident",3093,7,0,"y"]],[],[],"IfStatement",3094,1,0,0,["Binary",3094,7,0,["Ident",3094,7,0,"x"],"===","Ident",3094,12,0,"y"],["Return",3095,1,0,"Binary",3095,1,0,["Binary",43,7,0,["Ident",3095,1,0,"x"],"!==","Const",3095,12,0,0],"||","Binary",3095,18,0,["Binary",3095,18,0,["Const",3095,18,0,1],"/","Ident",3095,22,0,"x"],"===","Binary",3095,27,0,["Const",3095,28,0,1],"/","Ident",3095,32,0,"y"],"Return",3097,1,0,"Binary",3097,1,0,["Binary",43,7,0,["Ident",3097,1,0,"x"],"!==","Ident",3097,11,0,"x"],"&&","Binary",43,7,0,["Ident",3097,17,0,"y"],"!==","Ident",3097,22,0,"y"],type:"any",dependencies:["__is"]},__bind:{helper:["Func",3137,25,0,0,[["Ident",3137,26,0,"parent"],["Ident",3137,33,0,"child"]],["func"],[],"BlockStatement",3138,1,0,0,["IfStatement",3138,1,0,0,["Binary",3138,5,0,["Ident",3138,9,0,"parent"],"==","Const",1,1,0,null],["Throw",3139,1,0,"Call",3139,10,0,["Ident",3139,10,0,"TypeError"],0,["Binary",608,7,0,["Const",3139,21,0,"Expected parent to be an object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3139,68,0,"parent"]]]],["Binary",3140,1,0,["Ident",3140,6,0,"func"],"=","Binary",3140,13,0,["Ident",3140,13,0,"parent"],".","Ident",3140,21,0,"child"],["IfStatement",3141,1,0,0,["Binary",3141,5,0,["Unary",138,7,0,"typeof","Ident",3141,22,0,"func"],"!==","Const",138,25,0,"function"],["Throw",3142,1,0,"Call",3142,10,0,["Ident",3142,10,0,"Error"],0,["Binary",608,7,0,["Binary",608,7,0,["Const",3142,17,0,"Trying to bind child '"],"+","Call",3142,42,0,["Ident",3142,42,0,"String"],0,["Ident",3142,49,0,"child"]],"+","Const",3142,17,0,"' which is not a function"]]],["Return",3143,4,0,"Func",3143,4,0,0,[],[],[],"Return",3143,7,0,"Call",3143,7,0,["Binary",3143,7,0,["Ident",3143,7,0,"func"],".","Const",3143,7,0,"apply"],0,["Ident",3143,14,0,"parent"],["Arguments",3143,25,0]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__bind","__toArray","__typeof"]},__defProp:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["defineGetter","defineSetter","fallback","lookupGetter","lookupSetter","supportsAccessors"],[],"BlockStatement",3146,1,0,0,["Binary",3146,1,0,["Ident",3146,6,0,"fallback"],"=","Binary",3146,17,0,["Ident",3146,17,0,"Object"],".","Const",3146,25,0,"defineProperty"],["IfStatement",3147,1,0,0,["Binary",3147,5,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Ident",3147,18,0,"fallback"],"===","Const",138,25,0,"function"],"&&","Call",9,9,0,["Func",9,12,0,0,[],["o"],[],"TryCatch",3148,1,0,0,["BlockStatement",3149,1,0,0,["Binary",3149,1,0,["Ident",3149,12,0,"o"],"=","Obj",3149,16,0],["Call",3150,1,0,["Ident",3150,1,0,"fallback"],0,["Ident",3150,18,0,"o"],["Const",3150,22,0,"sentinel"],["Obj",3150,31,0]],["Return",3151,1,0,"Binary",3151,1,0,["Const",3151,19,0,"sentinel"],"in","Ident",3151,1,0,"o"]],["Ident",3152,12,0,"e"],"Return",3153,1,0,"Const",3153,1,0,!1],0],["Return",3154,1,0,"Ident",3154,1,0,"fallback"],"BlockStatement",3156,1,0,0,["Binary",3156,1,0,["Ident",3156,8,0,"supportsAccessors"],"=","Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Binary",3156,29,0,["Ident",3156,29,0,"Object"],".","Const",3156,37,0,"prototype"],["Const",3156,56,0,"__defineGetter__"]],["Binary",3157,1,0,["Ident",3157,8,0,"lookupGetter"],"=","Binary",3157,24,0,["Ident",3157,24,0,"supportsAccessors"],"&&","Binary",3157,47,0,["Binary",3157,47,0,["Ident",3157,47,0,"Object"],".","Const",3157,47,0,"prototype"],".","Const",3157,56,0,"__lookupGetter__"],["Binary",3158,1,0,["Ident",3158,8,0,"lookupSetter"],"=","Binary",3158,24,0,["Ident",3158,24,0,"supportsAccessors"],"&&","Binary",3158,47,0,["Binary",3158,47,0,["Ident",3158,47,0,"Object"],".","Const",3158,47,0,"prototype"],".","Const",3158,56,0,"__lookupSetter__"],["Binary",3159,1,0,["Ident",3159,8,0,"defineGetter"],"=","Binary",3159,24,0,["Ident",3159,24,0,"supportsAccessors"],"&&","Binary",3159,47,0,["Binary",3159,47,0,["Ident",3159,47,0,"Object"],".","Const",3159,47,0,"prototype"],".","Const",3159,56,0,"__defineGetter__"],["Binary",3160,1,0,["Ident",3160,8,0,"defineSetter"],"=","Binary",3160,24,0,["Ident",3160,24,0,"supportsAccessors"],"&&","Binary",3160,47,0,["Binary",3160,47,0,["Ident",3160,47,0,"Object"],".","Const",3160,47,0,"prototype"],".","Const",3160,56,0,"__defineSetter__"],["Return",1902,1,0,"Func",1902,1,0,0,[["Ident",3161,7,0,"object"],["Ident",3161,23,0,"property"],["Ident",3161,43,0,"descriptor"]],["proto"],[],"BlockStatement",1902,1,0,0,["IfStatement",1737,31,0,0,["Binary",3161,6,0,["Binary",661,18,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3161,7,0,"object"],"!==","Const",144,62,0,"object"],"||","Binary",43,7,0,["Ident",3161,7,0,"object"],"===","Const",1,1,0,null],"&&","Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3161,7,0,"object"],"!==","Const",138,25,0,"function"],["Throw",1738,1,0,"Call",1738,14,0,["Ident",1738,14,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected object to be one of Object or Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3161,7,0,"object"]]]],["IfStatement",1686,1,0,0,["Binary",651,18,0,["Unary",129,7,0,"typeof","Ident",3161,23,0,"property"],"!==","Const",129,25,0,"string"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected property to be a String, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3161,23,0,"property"]]]],["IfStatement",1686,1,0,0,["Binary",661,18,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3161,43,0,"descriptor"],"!==","Const",144,62,0,"object"],"||","Binary",43,7,0,["Ident",3161,43,0,"descriptor"],"===","Const",1,1,0,null],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected descriptor to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3161,43,0,"descriptor"]]]],["IfStatement",3162,1,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Ident",3162,22,0,"fallback"],"===","Const",138,25,0,"function"],["TryCatch",3163,1,0,0,["Return",3164,1,0,"Call",3164,17,0,["Ident",3164,17,0,"fallback"],0,["Ident",3164,27,0,"object"],["Ident",3164,34,0,"property"],["Ident",3164,44,0,"descriptor"]],["Ident",3165,14,0,"e"],"Const",3166,1,0]],["IfStatement",3168,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3168,9,0,"descriptor"],["Const",3168,30,0,"value"]],["IfStatement",3169,1,0,0,["Binary",3169,11,0,["Ident",3169,11,0,"supportsAccessors"],"&&","Call",3169,36,0,["Binary",3169,36,0,["Ident",3169,36,0,"lookupGetter"],".","Const",3169,36,0,"call"],0,["Ident",3169,51,0,"object"],["Binary",3169,58,0,["Ident",3169,58,0,"property"],"||","Call",3169,70,0,["Binary",3169,70,0,["Ident",3169,70,0,"lookupSetter"],".","Const",3169,70,0,"call"],0,["Ident",3169,86,0,"object"],["Ident",3169,93,0,"property"]]],["BlockStatement",3170,1,0,0,["Binary",3170,1,0,["Ident",3170,14,0,"proto"],"=","Binary",3170,22,0,["Ident",3170,22,0,"object"],".","Const",3170,30,0,"__proto__"],["Binary",3171,1,0,["Binary",3171,1,0,["Ident",3171,1,0,"object"],".","Const",3171,18,0,"__proto__"],"=","Binary",3171,30,0,["Ident",3171,30,0,"Object"],".","Const",3171,38,0,"prototype"],["Unary",3172,1,0,"delete","Binary",3172,17,0,["Ident",3172,17,0,"object"],".","Ident",3172,25,0,"property"],["Binary",3173,1,0,["Binary",3173,1,0,["Ident",3173,1,0,"object"],".","Ident",3173,18,0,"property"],"=","Binary",3173,30,0,["Ident",3173,30,0,"descriptor"],".","Const",3173,42,0,"value"],["Binary",3174,1,0,["Binary",3174,1,0,["Ident",3174,1,0,"object"],".","Const",3174,18,0,"__proto__"],"=","Ident",3174,30,0,"proto"]],"Binary",3176,1,0,["Binary",3176,1,0,["Ident",3176,1,0,"object"],".","Ident",3176,18,0,"property"],"=","Binary",3176,30,0,["Ident",3176,30,0,"descriptor"],".","Const",3176,42,0,"value"],"BlockStatement",3178,1,0,0,["IfStatement",3178,1,0,0,["Unary",3178,11,0,"!","Ident",3178,15,0,"supportsAccessors"],["Throw",3179,1,0,"Call",3179,16,0,["Ident",3179,16,0,"Error"],0,["Const",3179,23,0,"Getters and setters cannot be defined on this Javascript engine"]]],["IfStatement",3180,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3180,11,0,"descriptor"],["Const",3180,32,0,"get"]],["Call",3181,1,0,["Binary",3181,1,0,["Ident",3181,1,0,"defineGetter"],".","Const",3181,1,0,"call"],0,["Ident",3181,26,0,"object"],["Ident",3181,33,0,"property"],["Binary",3181,43,0,["Ident",3181,43,0,"descriptor"],".","Const",3181,55,0,"get"]]],["IfStatement",3182,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3182,11,0,"descriptor"],["Const",3182,32,0,"set"]],["Call",3183,1,0,["Binary",3183,1,0,["Ident",3183,1,0,"defineSetter"],".","Const",3183,1,0,"call"],0,["Ident",3183,26,0,"object"],["Ident",3183,33,0,"property"],["Binary",3183,43,0,["Ident",3183,43,0,"descriptor"],".","Const",3183,55,0,"set"]]]],["Return",3184,1,0,"Ident",3184,1,0,"object"]]]],0],type:"any",dependencies:["__defProp","__owns","__typeof"]},__compose:{helper:["Func",1902,1,0,0,[["Ident",3190,29,0,"left"],["Ident",3190,40,0,"right"]],[],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3190,29,0,"left"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected left to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3190,29,0,"left"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3190,40,0,"right"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected right to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3190,40,0,"right"]]]],["Return",3191,4,0,"Func",3191,4,0,0,[],[],[],"Return",3191,6,0,"Call",3191,6,0,["Binary",3191,6,0,["Ident",3191,6,0,"left"],".","Const",3191,6,0,"call"],0,["This",3191,13,0],["Call",3191,18,0,["Binary",3191,18,0,["Ident",3191,18,0,"right"],".","Const",3191,18,0,"apply"],0,["This",3191,26,0],["Arguments",3191,35,0]]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__compose","__toArray","__typeof"]},__curry:{helper:["Func",1902,1,0,0,[["Ident",3205,27,0,"numArgs"],["Ident",3205,46,0,"f"]],["currier"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",3205,27,0,"numArgs"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected numArgs to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3205,27,0,"numArgs"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3205,46,0,"f"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected f to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3205,46,0,"f"]]]],["IfStatement",3206,1,0,0,["Binary",759,9,0,["Ident",3206,5,0,"numArgs"],">","Const",3206,17,0,1],["BlockStatement",3207,1,0,0,["Binary",3207,1,0,["Ident",3207,8,0,"currier"],"=","Func",3207,16,0,0,[["Ident",3207,17,0,"args"]],["ret"],[],"IfStatement",3208,1,0,0,["Binary",761,9,0,["Call",744,11,0,["Ident",744,11,0,"__num"],0,["Binary",3208,9,0,["Ident",3208,9,0,"args"],".","Const",3208,15,0,"length"]],">=","Ident",3208,24,0,"numArgs"],["Return",3209,1,0,"Call",3209,1,0,["Binary",3209,1,0,["Ident",3209,1,0,"f"],".","Const",3209,11,0,"apply"],0,["This",3209,17,0],["Ident",3209,22,0,"args"]],"BlockStatement",3211,1,0,0,["Binary",3211,1,0,["Ident",3211,12,0,"ret"],"=","Func",3211,16,0,0,[],[],[],"IfStatement",3212,1,0,0,["Binary",3212,13,0,["Binary",3212,13,0,["Arguments",3212,13,0],".","Const",3212,24,0,"length"],"===","Const",3212,34,0,0],["Return",3213,1,0,"Ident",3213,1,0,"ret"],"Return",3215,1,0,"Call",3215,1,0,["Binary",3215,1,0,["Ident",3215,1,0,"currier"],".","Const",3215,1,0,"call"],0,["This",3215,22,0],["Call",3215,27,0,["Binary",3215,27,0,["Ident",3215,27,0,"args"],".","Const",3215,33,0,"concat"],0,["Call",3215,40,0,["Binary",3215,40,0,["Ident",3215,40,0,"__slice"],".","Const",3215,40,0,"call"],0,["Arguments",3215,49,0]]]],["Return",3216,1,0,"Ident",3216,1,0,"ret"]],["Return",3217,1,0,"Call",3217,1,0,["Ident",3217,1,0,"currier"],0,["Arr",3217,13,0]]],"Return",3219,1,0,"Ident",3219,1,0,"f"]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__curry","__num","__slice","__typeof"]},__import:{helper:["Func",3233,27,0,0,[["Ident",3233,28,0,"dest"],["Ident",3233,33,0,"source"]],["k"],[],"BlockStatement",3234,1,0,0,["ForIn",3234,1,0,0,["Ident",3234,6,0,"k"],["Ident",3234,11,0,"source"],"IfStatement",1572,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3234,11,0,"source"],["Ident",3234,6,0,"k"]],["Binary",3235,1,0,["Binary",3235,1,0,["Ident",3235,1,0,"dest"],".","Ident",3235,10,0,"k"],"=","Binary",3235,15,0,["Ident",3235,15,0,"source"],".","Ident",3235,23,0,"k"]],["Return",3236,1,0,"Ident",3236,1,0,"dest"]],type:{type:"generic",base:"functionBase",args:["object"]},dependencies:["__import","__owns"]},WeakMap:{helper:["IfExpression",3285,24,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3285,40,0,["Ident",3285,40,0,"GLOBAL"],".","Const",3285,48,0,"WeakMap"],"===","Const",138,25,0,"function"],["Binary",3285,60,0,["Ident",3285,60,0,"GLOBAL"],".","Const",3285,68,0,"WeakMap"],"Binary",3029,10,0,["Ident",3285,86,0,"WeakMap"],"=","Call",2991,1,0,["Func",2991,1,0,0,[],["_WeakMap_prototype","defProp","isExtensible"],[],"BlockStatement",2991,1,0,0,["Func",2915,29,0,["Ident",3285,86,0,"WeakMap"],[],["_this"],[],"BlockStatement",3293,1,0,0,["Binary",3293,1,0,["Ident",3293,1,0,"_this"],"=","IfExpression",2914,18,0,["Binary",2914,21,0,["Eval",2914,21,0,["Const",2914,27,0,"this"]],"instanceof","Ident",3285,86,0,"WeakMap"],["Eval",2914,56,0,["Const",2914,62,0,"this"]],"Call",2914,74,0,["Ident",2914,74,0,"__create"],0,["Ident",3285,80,0,"_WeakMap_prototype"]],["Binary",3293,1,0,["Binary",3293,1,0,["Ident",3293,1,0,"_this"],".","Const",3293,6,0,"_keys"],"=","Arr",3293,14,0],["Binary",3294,1,0,["Binary",3294,1,0,["Ident",3294,1,0,"_this"],".","Const",3294,6,0,"_values"],"=","Arr",3294,16,0],["Binary",3296,1,0,["Binary",3296,1,0,["Ident",3296,1,0,"_this"],".","Const",3296,6,0,"_chilly"],"=","Arr",3296,16,0],["Binary",3297,1,0,["Binary",3297,1,0,["Ident",3297,1,0,"_this"],".","Const",3297,6,0,"_uid"],"=","Call",3297,13,0,["Ident",3297,13,0,"createUid"],0],["Return",3293,1,0,"Ident",3293,1,0,"_this"]],["Binary",2845,20,0,["Ident",3285,80,0,"_WeakMap_prototype"],"=","Binary",2845,37,0,["Ident",3285,86,0,"WeakMap"],".","Const",2845,44,0,"prototype"],["Binary",2857,21,0,["Binary",2857,21,0,["Ident",3285,86,0,"WeakMap"],".","Const",2857,28,0,"displayName"],"=","Const",3285,80,0,"WeakMap"],["Func",3286,1,0,["Ident",3286,6,0,"uidRand"],[],[],[],"Return",3287,1,0,"Call",3287,1,0,["Binary",3287,1,0,["Call",3287,1,0,["Binary",3287,1,0,["Call",3287,1,0,["Binary",3287,1,0,["Ident",3287,1,0,"Math"],".","Const",3287,10,0,"random"],0],".","Const",3287,19,0,"toString"],0,["Const",3287,29,0,36]],".","Const",3287,33,0,"slice"],0,["Const",3287,39,0,2]],["Func",3288,1,0,["Ident",3288,6,0,"createUid"],[],[],[],"Return",608,7,0,"Binary",608,7,0,["Binary",608,7,0,["Binary",608,7,0,["Binary",608,7,0,["Binary",608,7,0,["Binary",608,7,0,["Call",602,11,0,["Ident",602,11,0,"__strnum"],0,["Call",3289,8,0,["Ident",3289,8,0,"uidRand"],0]],"+","Const",3289,5,0,"-"],"+","Call",607,11,0,["Ident",607,11,0,"__strnum"],0,["Call",3289,22,0,["Binary",3289,22,0,["Call",3289,22,0,["Ident",3289,25,0,"Date"],1],".","Const",3289,33,0,"getTime"],0]],"+","Const",3289,5,0,"-"],"+","Call",607,11,0,["Ident",607,11,0,"__strnum"],0,["Call",3289,47,0,["Ident",3289,47,0,"uidRand"],0]],"+","Const",3289,5,0,"-"],"+","Call",607,11,0,["Ident",607,11,0,"__strnum"],0,["Call",3289,61,0,["Ident",3289,61,0,"uidRand"],0]],["Binary",3290,1,0,["Ident",3290,6,0,"isExtensible"],"=","Binary",3290,22,0,["Binary",3290,22,0,["Ident",3290,22,0,"Object"],".","Const",3290,30,0,"isExtensible"],"||","Func",3290,48,0,0,[],[],[],"Return",3290,50,0,"Const",3290,50,0,!0],["Func",3299,1,0,["Ident",3299,6,0,"check"],[["Ident",3299,13,0,"key"]],["chilly","uid"],[],"BlockExpression",3300,1,0,["Binary",3300,1,0,["Ident",3300,8,0,"uid"],"=","Binary",3300,14,0,["This",3300,14,0],".","Const",3300,16,0,"_uid"],["IfExpression",3301,1,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3301,7,0,"key"],["Ident",3301,19,0,"uid"]],["BlockExpression",3302,1,0,["Binary",3302,1,0,["Ident",3302,10,0,"chilly"],"=","Binary",3302,19,0,["This",3302,19,0],".","Const",3302,21,0,"_chilly"],["IfExpression",3303,1,0,["Binary",3303,9,0,["Call",3303,9,0,["Binary",3303,9,0,["Ident",3303,9,0,"chilly"],".","Const",3303,17,0,"indexOf"],0,["Ident",3303,26,0,"key"]],"===","Const",3303,33,0,-1],["BlockExpression",3304,1,0,["Call",3304,1,0,["Binary",3304,1,0,["Ident",3304,1,0,"chilly"],".","Const",3304,16,0,"push"],0,["Ident",3304,21,0,"key"]],["Call",3305,1,0,["Binary",3305,1,0,["Binary",3305,1,0,["This",3305,1,0],".","Const",3305,10,0,"_keys"],".","Const",3305,16,0,"push"],0,["Ident",3305,21,0,"key"]],["Call",3306,1,0,["Binary",3306,1,0,["Binary",3306,1,0,["This",3306,1,0],".","Const",3306,10,0,"_values"],".","Const",3306,18,0,"push"],0,["Binary",3306,23,0,["Ident",3306,23,0,"key"],".","Ident",3306,27,0,"uid"]]]]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3285,80,0,"_WeakMap_prototype"],".","Const",3308,6,0,"get"],"=","Func",3308,10,0,0,[["Ident",3308,11,0,"key"]],["_ref","index"],[],"BlockStatement",3309,1,0,0,["IfStatement",3309,1,0,0,["Binary",43,7,0,["Call",3309,7,0,["Ident",3309,7,0,"Object"],0,["Ident",3309,15,0,"key"]],"!==","Ident",3309,22,0,"key"],["Throw",3310,1,0,"Call",3310,12,0,["Ident",3310,12,0,"TypeError"],0,["Const",3310,23,0,"Invalid value used as weak map key"]]],["IfStatement",3312,1,0,0,["Call",3312,7,0,["Ident",3312,7,0,"isExtensible"],0,["Ident",3312,22,0,"key"]],["IfStatement",3313,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3313,1,0,"key"],["Binary",3313,1,0,["Ident",3313,1,0,"_ref"],"=","Binary",3313,12,0,["This",3313,12,0],".","Const",3313,13,0,"_uid"]],["Return",3313,1,0,"Binary",3313,1,0,["Ident",3313,1,0,"key"],".","Ident",3313,1,0,"_ref"]],"BlockStatement",3315,1,0,0,["Call",3315,1,0,["Binary",3315,1,0,["Ident",3315,1,0,"check"],".","Const",3315,1,0,"call"],0,["This",3315,14,0],["Ident",3315,19,0,"key"]],["Binary",3316,1,0,["Ident",3316,10,0,"index"],"=","Call",3316,18,0,["Binary",3316,18,0,["Binary",3316,18,0,["This",3316,18,0],".","Const",3316,20,0,"_keys"],".","Const",3316,26,0,"indexOf"],0,["Ident",3316,35,0,"key"]],["IfStatement",3317,1,0,0,["Binary",3317,9,0,["Ident",3317,9,0,"index"],"===","Const",3317,18,0,-1],["Return",3318,1,0,"Const",3318,1,0],"Return",3320,1,0,"Binary",3320,1,0,["Binary",3320,1,0,["This",3320,1,0],".","Const",3320,10,0,"_values"],".","Ident",3320,18,0,"index"]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3285,80,0,"_WeakMap_prototype"],".","Const",3322,6,0,"has"],"=","Func",3322,10,0,0,[["Ident",3322,11,0,"key"]],[],[],"BlockStatement",3323,1,0,0,["IfStatement",3323,1,0,0,["Binary",43,7,0,["Call",3323,7,0,["Ident",3323,7,0,"Object"],0,["Ident",3323,15,0,"key"]],"!==","Ident",3323,22,0,"key"],["Throw",3324,1,0,"Call",3324,12,0,["Ident",3324,12,0,"TypeError"],0,["Const",3324,23,0,"Invalid value used as weak map key"]]],["IfStatement",3326,1,0,0,["Call",3326,7,0,["Ident",3326,7,0,"isExtensible"],0,["Ident",3326,22,0,"key"]],["Return",646,7,0,"Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3327,1,0,"key"],["Binary",3327,18,0,["This",3327,18,0],".","Const",3327,20,0,"_uid"]],"BlockStatement",3329,1,0,0,["Call",3329,1,0,["Binary",3329,1,0,["Ident",3329,1,0,"check"],".","Const",3329,1,0,"call"],0,["This",3329,14,0],["Ident",3329,19,0,"key"]],["Return",43,7,0,"Binary",43,7,0,["Call",3330,1,0,["Binary",3330,1,0,["Binary",3330,1,0,["This",3330,1,0],".","Const",3330,8,0,"_keys"],".","Const",3330,14,0,"indexOf"],0,["Ident",3330,23,0,"key"]],"!==","Const",3330,30,0,-1]]],["IfStatement",3332,17,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3332,33,0,["Ident",3332,33,0,"Object"],".","Const",3332,41,0,"defineProperty"],"===","Const",138,25,0,"function"],["Binary",3332,1,0,["Ident",3332,6,0,"defProp"],"=","Binary",3332,61,0,["Ident",3332,61,0,"Object"],".","Const",3332,69,0,"defineProperty"],"Binary",3332,1,0,["Ident",3332,6,0,"defProp"],"=","Func",3332,91,0,0,[["Ident",3332,92,0,"o"],["Ident",3332,94,0,"k"],["Ident",3332,97,0,"d"]],[],[],"Binary",3332,104,0,["Binary",3332,104,0,["Ident",3332,104,0,"o"],".","Ident",3332,107,0,"k"],"=","Binary",3332,112,0,["Ident",3332,112,0,"d"],".","Const",3332,115,0,"value"],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3285,80,0,"_WeakMap_prototype"],".","Const",3333,6,0,"set"],"=","Func",3333,10,0,0,[["Ident",3333,11,0,"key"],["Ident",3333,15,0,"value"]],["index","keys"],[],"BlockStatement",3334,1,0,0,["IfStatement",3334,1,0,0,["Binary",43,7,0,["Call",3334,7,0,["Ident",3334,7,0,"Object"],0,["Ident",3334,15,0,"key"]],"!==","Ident",3334,22,0,"key"],["Throw",3335,1,0,"Call",3335,12,0,["Ident",3335,12,0,"TypeError"],0,["Const",3335,23,0,"Invalid value used as weak map key"]]],["IfStatement",3337,1,0,0,["Call",3337,7,0,["Ident",3337,7,0,"isExtensible"],0,["Ident",3337,22,0,"key"]],["Call",3338,1,0,["Ident",3338,1,0,"defProp"],0,["Ident",3338,16,0,"key"],["Binary",3338,20,0,["This",3338,20,0],".","Const",3338,22,0,"_uid"],["Obj",3338,27,0,3339,10,null,"configurable",["Const",3339,9,0,!0],3340,10,null,"writable",["Const",3340,9,0,!0],3341,10,null,"enumerable",["Const",3341,9,0,!1],3342,9,null,"value",["Ident",3342,9,0,"value"]]],"BlockStatement",3345,1,0,0,["Call",3345,1,0,["Binary",3345,1,0,["Ident",3345,1,0,"check"],".","Const",3345,1,0,"call"],0,["This",3345,14,0],["Ident",3345,19,0,"key"]],["Binary",3346,1,0,["Ident",3346,10,0,"keys"],"=","Binary",3346,17,0,["This",3346,17,0],".","Const",3346,19,0,"_keys"],["Binary",3347,1,0,["Ident",3347,18,0,"index"],"=","Call",3347,26,0,["Binary",3347,26,0,["Ident",3347,26,0,"keys"],".","Const",3347,32,0,"indexOf"],0,["Ident",3347,41,0,"key"]],["IfStatement",3348,1,0,0,["Binary",3348,9,0,["Ident",3348,9,0,"index"],"===","Const",3348,18,0,-1],["BlockStatement",3349,1,0,0,["Binary",3349,1,0,["Ident",3349,1,0,"index"],"=","Binary",3349,17,0,["Ident",3349,17,0,"keys"],".","Const",3349,23,0,"length"],["Binary",3350,1,0,["Binary",3350,1,0,["Ident",3350,1,0,"keys"],".","Ident",3350,14,0,"index"],"=","Ident",3350,23,0,"key"]]],["Binary",3351,1,0,["Binary",3351,1,0,["Binary",3351,1,0,["This",3351,1,0],".","Const",3351,8,0,"_values"],".","Ident",3351,16,0,"index"],"=","Ident",3351,25,0,"value"]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3285,80,0,"_WeakMap_prototype"],".","Const",3353,6,0,"delete"],"=","Func",3353,13,0,0,[["Ident",3353,14,0,"key"]],["index","keys"],[],"BlockStatement",3354,1,0,0,["IfStatement",3354,1,0,0,["Binary",43,7,0,["Call",3354,7,0,["Ident",3354,7,0,"Object"],0,["Ident",3354,15,0,"key"]],"!==","Ident",3354,22,0,"key"],["Throw",3355,1,0,"Call",3355,12,0,["Ident",3355,12,0,"TypeError"],0,["Const",3355,23,0,"Invalid value used as weak map key"]]],["IfStatement",3357,1,0,0,["Call",3357,7,0,["Ident",3357,7,0,"isExtensible"],0,["Ident",3357,22,0,"key"]],["Unary",3358,1,0,"delete","Binary",3358,13,0,["Ident",3358,13,0,"key"],".","Binary",3358,18,0,["This",3358,18,0],".","Const",3358,19,0,"_uid"],"BlockStatement",3360,1,0,0,["Call",3360,1,0,["Binary",3360,1,0,["Ident",3360,1,0,"check"],".","Const",3360,1,0,"call"],0,["This",3360,14,0],["Ident",3360,19,0,"key"]],["Binary",3361,1,0,["Ident",3361,10,0,"keys"],"=","Binary",3361,17,0,["This",3361,17,0],".","Const",3361,19,0,"_keys"],["Binary",3362,1,0,["Ident",3362,18,0,"index"],"=","Call",3362,26,0,["Binary",3362,26,0,["Ident",3362,26,0,"keys"],".","Const",3362,32,0,"indexOf"],0,["Ident",3362,41,0,"key"]],["IfStatement",3363,1,0,0,["Binary",43,7,0,["Ident",3363,9,0,"index"],"!==","Const",3363,18,0,-1],["BlockStatement",3364,1,0,0,["Call",3364,1,0,["Binary",3364,1,0,["Ident",3364,1,0,"keys"],".","Const",3364,14,0,"splice"],0,["Ident",3364,21,0,"index"],["Const",3364,28,0,1]],["Call",3365,1,0,["Binary",3365,1,0,["Binary",3365,1,0,["This",3365,1,0],".","Const",3365,10,0,"_values"],".","Const",3365,18,0,"splice"],0,["Ident",3365,25,0,"index"],["Const",3365,32,0,1]]]]]],["Return",2993,1,0,"Ident",3285,86,0,"WeakMap"]],0],type:"any",dependencies:["__create","__owns","__strnum","GLOBAL","WeakMap"]},__indexOfIdentical:{helper:["Func",3367,39,0,0,[["Ident",3367,40,0,"array"],["Ident",3367,46,0,"item"]],["_arr","check","i","inf"],[],"BlockStatement",3368,1,0,0,["IfStatement",3368,1,0,0,["Binary",3368,5,0,["Unary",3368,5,0,"typeof","Ident",3368,12,0,"item"],"===","Const",3368,22,0,"number"],["IfStatement",3369,1,0,0,["Binary",43,7,0,["Ident",3369,7,0,"item"],"!==","Ident",3369,7,0,"item"],["BlockStatement",3370,1,0,0,["For",1502,1,0,0,["BlockExpression",1,1,0,["Binary",3370,1,0,["Ident",3370,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Ident",3370,22,0,"array"]],["Binary",1381,26,0,["Ident",3370,17,0,"i"],"=","Binary",1381,49,0,["Ident",3370,1,0,"_arr"],".","Const",1381,56,0,"length"]],["Unary",1382,16,0,"--post","Ident",3370,17,0,"i"],0,"BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3370,10,0,"check"],"=","Binary",1345,75,0,["Ident",3370,1,0,"_arr"],".","Ident",3370,17,0,"i"],["IfStatement",3371,1,0,0,["Binary",43,7,0,["Ident",3371,11,0,"check"],"!==","Ident",3371,11,0,"check"],["Return",3372,1,0,"Ident",3372,17,0,"i"]]],["Return",3373,1,0,"Const",3373,13,0,-1]],"IfStatement",3369,1,0,0,["Binary",3374,12,0,["Ident",3374,12,0,"item"],"===","Const",3374,21,0,0],["BlockStatement",3375,1,0,0,["Binary",3375,1,0,["Ident",3375,10,0,"inf"],"=","Binary",3375,16,0,["Const",3375,17,0,1],"/","Ident",3375,21,0,"item"],["For",1502,1,0,0,["BlockExpression",1,1,0,["Binary",3376,1,0,["Ident",3376,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Ident",3376,22,0,"array"]],["Binary",1381,26,0,["Ident",3376,17,0,"i"],"=","Binary",1381,49,0,["Ident",3376,1,0,"_arr"],".","Const",1381,56,0,"length"]],["Unary",1382,16,0,"--post","Ident",3376,17,0,"i"],0,"BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3376,10,0,"check"],"=","Binary",1345,75,0,["Ident",3376,1,0,"_arr"],".","Ident",3376,17,0,"i"],["IfStatement",3377,1,0,0,["Binary",3377,11,0,["Binary",3377,11,0,["Ident",3377,11,0,"check"],"===","Const",3377,21,0,0],"&&","Binary",3377,26,0,["Binary",3377,26,0,["Const",3377,27,0,1],"/","Ident",3377,31,0,"check"],"===","Ident",3377,40,0,"inf"],["Return",3378,1,0,"Ident",3378,17,0,"i"]]],["Return",3379,1,0,"Const",3379,13,0,-1]]]],["Return",3380,1,0,"Call",3380,1,0,["Binary",3380,1,0,["Ident",3380,1,0,"array"],".","Const",3380,9,0,"indexOf"],0,["Ident",3380,18,0,"item"]]],type:"function",dependencies:["__indexOfIdentical","__toArray"]},Map:{helper:["IfExpression",3382,20,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3382,36,0,["Ident",3382,36,0,"GLOBAL"],".","Const",3382,44,0,"Map"],"===","Const",138,25,0,"function"],["Binary",3382,52,0,["Ident",3382,52,0,"GLOBAL"],".","Const",3382,60,0,"Map"],"Binary",3029,10,0,["Ident",3382,74,0,"Map"],"=","Call",2991,1,0,["Func",2991,1,0,0,[],["_Map_prototype"],[],"BlockStatement",2991,1,0,0,["Func",2915,29,0,["Ident",3382,74,0,"Map"],[["Ident",3383,19,0,"iterable"]],["_item","_iter","_this","x"],[],"BlockStatement",3384,1,0,0,["Binary",3384,1,0,["Ident",3384,1,0,"_this"],"=","IfExpression",2914,18,0,["Binary",2914,21,0,["Eval",2914,21,0,["Const",2914,27,0,"this"]],"instanceof","Ident",3382,74,0,"Map"],["Eval",2914,56,0,["Const",2914,62,0,"this"]],"Call",2914,74,0,["Ident",2914,74,0,"__create"],0,["Ident",3382,68,0,"_Map_prototype"]],["Binary",3384,1,0,["Binary",3384,1,0,["Ident",3384,1,0,"_this"],".","Const",3384,6,0,"_keys"],"=","Arr",3384,14,0],["Binary",3385,1,0,["Binary",3385,1,0,["Ident",3385,1,0,"_this"],".","Const",3385,6,0,"_values"],"=","Arr",3385,16,0],["IfStatement",3386,1,0,0,["Binary",49,7,0,["Ident",3386,7,0,"iterable"],"!=","Const",1,1,0,null],["TryFinally",2213,8,0,0,["For",2209,1,0,0,["Binary",3387,1,0,["Ident",3387,1,0,"_iter"],"=","Call",2136,30,0,["Ident",2136,30,0,"__iter"],0,["Ident",3387,17,0,"iterable"]],["Const",1,1,0,!0],0,"BlockStatement",2176,1,0,0,["Binary",2146,1,0,["Ident",3387,1,0,"_item"],"=","Call",2146,18,0,["Binary",2146,18,0,["Ident",3387,1,0,"_iter"],".","Const",2146,29,0,"next"],0],["IfStatement",2147,1,0,0,["Binary",2147,9,0,["Ident",3387,1,0,"_item"],".","Const",2147,16,0,"done"],["Break",2148,1,0]],["Binary",2149,1,0,["Ident",3387,10,0,"x"],"=","Binary",2149,19,0,["Ident",3387,1,0,"_item"],".","Const",2149,26,0,"value"],["Call",3388,1,0,["Binary",3388,1,0,["Ident",3388,1,0,"_this"],".","Const",3388,10,0,"set"],0,["Binary",3388,14,0,["Ident",3388,14,0,"x"],".","Const",3388,16,0,0],["Binary",3388,19,0,["Ident",3388,19,0,"x"],".","Const",3388,22,0,1]]],"TryCatch",2216,1,0,0,["Call",2217,1,0,["Binary",2217,1,0,["Ident",3387,1,0,"_iter"],".","Const",2217,19,0,"close"],0],["Ident",3387,1,0,"_e"],"Const",1,1,0]],["Return",3384,1,0,"Ident",3384,1,0,"_this"]],["Binary",2845,20,0,["Ident",3382,68,0,"_Map_prototype"],"=","Binary",2845,37,0,["Ident",3382,74,0,"Map"],".","Const",2845,44,0,"prototype"],["Binary",2857,21,0,["Binary",2857,21,0,["Ident",3382,74,0,"Map"],".","Const",2857,28,0,"displayName"],"=","Const",3382,68,0,"Map"],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3390,6,0,"get"],"=","Func",3390,10,0,0,[["Ident",3390,11,0,"key"]],["index"],[],"BlockStatement",3391,1,0,0,["Binary",3391,1,0,["Ident",3391,8,0,"index"],"=","Call",3391,16,0,["Ident",3391,16,0,"__indexOfIdentical"],0,["Binary",3391,38,0,["This",3391,38,0],".","Const",3391,39,0,"_keys"],["Ident",3391,45,0,"key"]],["IfStatement",3392,1,0,0,["Binary",3392,7,0,["Ident",3392,7,0,"index"],"===","Const",3392,16,0,-1],["Return",3393,1,0,"Const",3393,1,0],"Return",3395,1,0,"Binary",3395,1,0,["Binary",3395,1,0,["This",3395,1,0],".","Const",3395,8,0,"_values"],".","Ident",3395,16,0,"index"]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3397,6,0,"has"],"=","Func",3397,10,0,0,[["Ident",3397,11,0,"key"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",3398,1,0,["Ident",3398,1,0,"__indexOfIdentical"],0,["Binary",3398,26,0,["This",3398,26,0],".","Const",3398,27,0,"_keys"],["Ident",3398,33,0,"key"]],"!==","Const",3398,41,0,-1],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3400,6,0,"set"],"=","Func",3400,10,0,0,[["Ident",3400,11,0,"key"],["Ident",3400,15,0,"value"]],["index","keys"],[],"BlockExpression",3401,1,0,["Binary",3401,1,0,["Ident",3401,8,0,"keys"],"=","Binary",3401,15,0,["This",3401,15,0],".","Const",3401,17,0,"_keys"],["Binary",3402,1,0,["Ident",3402,16,0,"index"],"=","Call",3402,24,0,["Ident",3402,24,0,"__indexOfIdentical"],0,["Ident",3402,46,0,"keys"],["Ident",3402,51,0,"key"]],["IfExpression",3403,1,0,["Binary",3403,7,0,["Ident",3403,7,0,"index"],"===","Const",3403,16,0,-1],["BlockExpression",3404,1,0,["Binary",3404,1,0,["Ident",3404,1,0,"index"],"=","Binary",3404,15,0,["Ident",3404,15,0,"keys"],".","Const",3404,21,0,"length"],["Binary",3405,1,0,["Binary",3405,1,0,["Ident",3405,1,0,"keys"],".","Ident",3405,12,0,"index"],"=","Ident",3405,21,0,"key"]]],["Binary",3406,1,0,["Binary",3406,1,0,["Binary",3406,1,0,["This",3406,1,0],".","Const",3406,6,0,"_values"],".","Ident",3406,14,0,"index"],"=","Ident",3406,23,0,"value"]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3408,6,0,"delete"],"=","Func",3408,13,0,0,[["Ident",3408,14,0,"key"]],["index","keys"],[],"BlockStatement",3409,1,0,0,["Binary",3409,1,0,["Ident",3409,8,0,"keys"],"=","Binary",3409,15,0,["This",3409,15,0],".","Const",3409,17,0,"_keys"],["Binary",3410,1,0,["Ident",3410,8,0,"index"],"=","Call",3410,16,0,["Ident",3410,16,0,"__indexOfIdentical"],0,["Ident",3410,38,0,"keys"],["Ident",3410,43,0,"key"]],["IfStatement",3411,1,0,0,["Binary",3411,7,0,["Ident",3411,7,0,"index"],"===","Const",3411,16,0,-1],["Return",3412,1,0,"Const",3412,1,0,!1],"BlockStatement",3414,1,0,0,["Call",3414,1,0,["Binary",3414,1,0,["Ident",3414,1,0,"keys"],".","Const",3414,12,0,"splice"],0,["Ident",3414,19,0,"index"],["Const",3414,26,0,1]],["Return",3415,1,0,"Call",3415,1,0,["Binary",3415,1,0,["Binary",3415,1,0,["This",3415,1,0],".","Const",3415,8,0,"_values"],".","Const",3415,16,0,"splice"],0,["Ident",3415,23,0,"index"],["Const",3415,30,0,1]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3417,6,0,"keys"],"=","Func",3417,11,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","key"],[],"BlockStatement",3418,1,0,0,["Binary",3418,1,0,["Ident",3418,1,0,"_this"],"=","This",3418,1,0],["Binary",3417,11,0,["Ident",3417,11,0,"_state"],"=","Const",3417,11,0,0],["Func",3417,11,0,["Ident",3417,11,0,"_close"],[],[],[],"Binary",3417,11,0,["Ident",3417,11,0,"_state"],"=","Const",3417,11,0,3],["Func",3417,11,0,["Ident",3417,11,0,"_step"],[["Ident",3417,11,0,"_received"]],[],[],"For",3417,11,0,0,0,["Const",3417,11,0,!0],0,"Switch",3417,11,0,0,["Ident",3417,11,0,"_state"],1,1,null,["Const",1,1,0,0],["BlockStatement",1,1,0,0,["Binary",3418,1,0,["Ident",3418,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Binary",3418,15,0,["Ident",3418,15,0,"_this"],".","Const",3418,17,0,"_keys"]],["Binary",1381,26,0,["Ident",3418,1,0,"_i"],"=","Binary",1381,49,0,["Ident",3418,1,0,"_arr"],".","Const",1381,56,0,"length"],["Unary",1502,1,0,"++","Ident",3417,11,0,"_state"]],1382,16,null,["Const",1382,16,0,1],["BlockStatement",1382,16,0,0,["Binary",1382,16,0,["Ident",3417,11,0,"_state"],"=","IfExpression",1382,16,0,["Unary",1382,16,0,"--post","Ident",3418,1,0,"_i"],["Const",1382,16,0,2],"Const",1382,16,0,3],["Break",1382,16,0]],1464,1,null,["Const",1464,1,0,2],["BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3418,8,0,"key"],"=","Binary",1345,75,0,["Ident",3418,1,0,"_arr"],".","Ident",3418,1,0,"_i"],["Binary",3419,1,0,["Ident",3417,11,0,"_state"],"=","Const",3419,1,0,1],["Return",3419,1,0,"Obj",3419,1,0,3419,1,null,"done",["Const",3419,1,0,!1],3419,1,null,"value",["Ident",3419,12,0,"key"]]],3417,11,null,["Const",3417,11,0,3],["Return",3417,11,0,"Obj",3417,11,0,3417,11,null,"done",["Const",3417,11,0,!0],3417,11,null,"value",["Const",3417,11,0]],["Throw",3417,11,0,"Call",3417,11,0,["Ident",3417,11,0,"Error"],0,["Binary",3417,11,0,["Const",3417,11,0,"Unknown state: "],"+","Ident",3417,11,0,"_state"]]],["Func",3417,11,0,["Ident",3417,11,0,"_throw"],[["Ident",3417,11,0,"_e"]],[],[],"BlockStatement",3417,11,0,0,["Call",3417,11,0,["Ident",3417,11,0,"_close"],0],["Throw",3417,11,0,"Ident",3417,11,0,"_e"]],["Func",3417,11,0,["Ident",3417,11,0,"_send"],[["Ident",3417,11,0,"_received"]],[],[],"TryCatch",3417,11,0,0,["Return",3417,11,0,"Call",3417,11,0,["Ident",3417,11,0,"_step"],0,["Ident",3417,11,0,"_received"]],["Ident",3417,11,0,"_e"],"Call",3417,11,0,["Ident",3417,11,0,"_throw"],0,["Ident",3417,11,0,"_e"]],["Return",3417,11,0,"Obj",3417,11,0,3417,11,null,"close",["Ident",3417,11,0,"_close"],3417,11,null,"iterator",["Func",3417,11,0,0,[],[],[],"Return",3417,11,0,"This",3417,11,0],3417,11,null,"next",["Func",3417,11,0,0,[],[],[],"Return",3417,11,0,"Call",3417,11,0,["Ident",3417,11,0,"_send"],0,["Const",3417,11,0]],3417,11,null,"send",["Ident",3417,11,0,"_send"],3417,11,null,"throw",["Func",3417,11,0,0,[["Ident",3417,11,0,"_e"]],[],[],"BlockStatement",3417,11,0,0,["Call",3417,11,0,["Ident",3417,11,0,"_throw"],0,["Ident",3417,11,0,"_e"]],["Return",3417,11,0,"Call",3417,11,0,["Ident",3417,11,0,"_send"],0,["Const",3417,11,0]]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3421,6,0,"values"],"=","Func",3421,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","value"],[],"BlockStatement",3422,1,0,0,["Binary",3422,1,0,["Ident",3422,1,0,"_this"],"=","This",3422,1,0],["Binary",3421,13,0,["Ident",3421,13,0,"_state"],"=","Const",3421,13,0,0],["Func",3421,13,0,["Ident",3421,13,0,"_close"],[],[],[],"Binary",3421,13,0,["Ident",3421,13,0,"_state"],"=","Const",3421,13,0,3],["Func",3421,13,0,["Ident",3421,13,0,"_step"],[["Ident",3421,13,0,"_received"]],[],[],"For",3421,13,0,0,0,["Const",3421,13,0,!0],0,"Switch",3421,13,0,0,["Ident",3421,13,0,"_state"],1,1,null,["Const",1,1,0,0],["BlockStatement",1,1,0,0,["Binary",3422,1,0,["Ident",3422,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Binary",3422,17,0,["Ident",3422,17,0,"_this"],".","Const",3422,19,0,"_values"]],["Binary",1381,26,0,["Ident",3422,1,0,"_i"],"=","Binary",1381,49,0,["Ident",3422,1,0,"_arr"],".","Const",1381,56,0,"length"],["Unary",1502,1,0,"++","Ident",3421,13,0,"_state"]],1382,16,null,["Const",1382,16,0,1],["BlockStatement",1382,16,0,0,["Binary",1382,16,0,["Ident",3421,13,0,"_state"],"=","IfExpression",1382,16,0,["Unary",1382,16,0,"--post","Ident",3422,1,0,"_i"],["Const",1382,16,0,2],"Const",1382,16,0,3],["Break",1382,16,0]],1464,1,null,["Const",1464,1,0,2],["BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3422,8,0,"value"],"=","Binary",1345,75,0,["Ident",3422,1,0,"_arr"],".","Ident",3422,1,0,"_i"],["Binary",3423,1,0,["Ident",3421,13,0,"_state"],"=","Const",3423,1,0,1],["Return",3423,1,0,"Obj",3423,1,0,3423,1,null,"done",["Const",3423,1,0,!1],3423,1,null,"value",["Ident",3423,12,0,"value"]]],3421,13,null,["Const",3421,13,0,3],["Return",3421,13,0,"Obj",3421,13,0,3421,13,null,"done",["Const",3421,13,0,!0],3421,13,null,"value",["Const",3421,13,0]],["Throw",3421,13,0,"Call",3421,13,0,["Ident",3421,13,0,"Error"],0,["Binary",3421,13,0,["Const",3421,13,0,"Unknown state: "],"+","Ident",3421,13,0,"_state"]]],["Func",3421,13,0,["Ident",3421,13,0,"_throw"],[["Ident",3421,13,0,"_e"]],[],[],"BlockStatement",3421,13,0,0,["Call",3421,13,0,["Ident",3421,13,0,"_close"],0],["Throw",3421,13,0,"Ident",3421,13,0,"_e"]],["Func",3421,13,0,["Ident",3421,13,0,"_send"],[["Ident",3421,13,0,"_received"]],[],[],"TryCatch",3421,13,0,0,["Return",3421,13,0,"Call",3421,13,0,["Ident",3421,13,0,"_step"],0,["Ident",3421,13,0,"_received"]],["Ident",3421,13,0,"_e"],"Call",3421,13,0,["Ident",3421,13,0,"_throw"],0,["Ident",3421,13,0,"_e"]],["Return",3421,13,0,"Obj",3421,13,0,3421,13,null,"close",["Ident",3421,13,0,"_close"],3421,13,null,"iterator",["Func",3421,13,0,0,[],[],[],"Return",3421,13,0,"This",3421,13,0],3421,13,null,"next",["Func",3421,13,0,0,[],[],[],"Return",3421,13,0,"Call",3421,13,0,["Ident",3421,13,0,"_send"],0,["Const",3421,13,0]],3421,13,null,"send",["Ident",3421,13,0,"_send"],3421,13,null,"throw",["Func",3421,13,0,0,[["Ident",3421,13,0,"_e"]],[],[],"BlockStatement",3421,13,0,0,["Call",3421,13,0,["Ident",3421,13,0,"_throw"],0,["Ident",3421,13,0,"_e"]],["Return",3421,13,0,"Call",3421,13,0,["Ident",3421,13,0,"_send"],0,["Const",3421,13,0]]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3425,6,0,"items"],"=","Func",3425,12,0,0,[],["_arr","_e","_send","_state","_step","_this","_throw","i","key","values"],[],"BlockStatement",3426,1,0,0,["Binary",3426,1,0,["Ident",3426,1,0,"_this"],"=","This",3426,1,0],["Binary",3425,12,0,["Ident",3425,12,0,"_state"],"=","Const",3425,12,0,0],["Func",3425,12,0,["Ident",3425,12,0,"_close"],[],[],[],"Binary",3425,12,0,["Ident",3425,12,0,"_state"],"=","Const",3425,12,0,3],["Func",3425,12,0,["Ident",3425,12,0,"_step"],[["Ident",3425,12,0,"_received"]],[],[],"For",3425,12,0,0,0,["Const",3425,12,0,!0],0,"Switch",3425,12,0,0,["Ident",3425,12,0,"_state"],3426,1,null,["Const",3426,1,0,0],["BlockStatement",3426,1,0,0,["Binary",3426,1,0,["Ident",3426,8,0,"values"],"=","Binary",3426,17,0,["Ident",3426,17,0,"_this"],".","Const",3426,19,0,"_values"],["Binary",3427,1,0,["Ident",3427,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Binary",3427,18,0,["Ident",3427,18,0,"_this"],".","Const",3427,20,0,"_keys"]],["Binary",1381,26,0,["Ident",3427,13,0,"i"],"=","Binary",1381,49,0,["Ident",3427,1,0,"_arr"],".","Const",1381,56,0,"length"],["Unary",1502,1,0,"++","Ident",3425,12,0,"_state"]],1382,16,null,["Const",1382,16,0,1],["BlockStatement",1382,16,0,0,["Binary",1382,16,0,["Ident",3425,12,0,"_state"],"=","IfExpression",1382,16,0,["Unary",1382,16,0,"--post","Ident",3427,13,0,"i"],["Const",1382,16,0,2],"Const",1382,16,0,3],["Break",1382,16,0]],1464,1,null,["Const",1464,1,0,2],["BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3427,8,0,"key"],"=","Binary",1345,75,0,["Ident",3427,1,0,"_arr"],".","Ident",3427,13,0,"i"],["Binary",3428,1,0,["Ident",3425,12,0,"_state"],"=","Const",3428,1,0,1],["Return",3428,1,0,"Obj",3428,1,0,3428,1,null,"done",["Const",3428,1,0,!1],3428,1,null,"value",["Arr",3428,12,0,["Ident",3428,14,0,"key"],["Binary",3428,18,0,["Ident",3428,18,0,"values"],".","Ident",3428,26,0,"i"]]]],3425,12,null,["Const",3425,12,0,3],["Return",3425,12,0,"Obj",3425,12,0,3425,12,null,"done",["Const",3425,12,0,!0],3425,12,null,"value",["Const",3425,12,0]],["Throw",3425,12,0,"Call",3425,12,0,["Ident",3425,12,0,"Error"],0,["Binary",3425,12,0,["Const",3425,12,0,"Unknown state: "],"+","Ident",3425,12,0,"_state"]]],["Func",3425,12,0,["Ident",3425,12,0,"_throw"],[["Ident",3425,12,0,"_e"]],[],[],"BlockStatement",3425,12,0,0,["Call",3425,12,0,["Ident",3425,12,0,"_close"],0],["Throw",3425,12,0,"Ident",3425,12,0,"_e"]],["Func",3425,12,0,["Ident",3425,12,0,"_send"],[["Ident",3425,12,0,"_received"]],[],[],"TryCatch",3425,12,0,0,["Return",3425,12,0,"Call",3425,12,0,["Ident",3425,12,0,"_step"],0,["Ident",3425,12,0,"_received"]],["Ident",3425,12,0,"_e"],"Call",3425,12,0,["Ident",3425,12,0,"_throw"],0,["Ident",3425,12,0,"_e"]],["Return",3425,12,0,"Obj",3425,12,0,3425,12,null,"close",["Ident",3425,12,0,"_close"],3425,12,null,"iterator",["Func",3425,12,0,0,[],[],[],"Return",3425,12,0,"This",3425,12,0],3425,12,null,"next",["Func",3425,12,0,0,[],[],[],"Return",3425,12,0,"Call",3425,12,0,["Ident",3425,12,0,"_send"],0,["Const",3425,12,0]],3425,12,null,"send",["Ident",3425,12,0,"_send"],3425,12,null,"throw",["Func",3425,12,0,0,[["Ident",3425,12,0,"_e"]],[],[],"BlockStatement",3425,12,0,0,["Call",3425,12,0,["Ident",3425,12,0,"_throw"],0,["Ident",3425,12,0,"_e"]],["Return",3425,12,0,"Call",3425,12,0,["Ident",3425,12,0,"_send"],0,["Const",3425,12,0]]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3382,68,0,"_Map_prototype"],".","Const",3429,6,0,"iterator"],"=","Binary",3429,17,0,["Binary",3429,17,0,["Ident",3429,17,0,"Map"],".","Const",3429,17,0,"prototype"],".","Const",3429,23,0,"items"],["Return",2993,1,0,"Ident",3382,74,0,"Map"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Map"]},Set:{helper:["IfExpression",3431,20,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3431,36,0,["Ident",3431,36,0,"GLOBAL"],".","Const",3431,44,0,"Set"],"===","Const",138,25,0,"function"],["Binary",3431,52,0,["Ident",3431,52,0,"GLOBAL"],".","Const",3431,60,0,"Set"],"Binary",3029,10,0,["Ident",3431,74,0,"Set"],"=","Call",2991,1,0,["Func",2991,1,0,0,[],["_Set_prototype"],[],"BlockStatement",2991,1,0,0,["Func",2915,29,0,["Ident",3431,74,0,"Set"],[["Ident",3432,19,0,"iterable"]],["_item","_iter","_this","item"],[],"BlockStatement",3433,1,0,0,["Binary",3433,1,0,["Ident",3433,1,0,"_this"],"=","IfExpression",2914,18,0,["Binary",2914,21,0,["Eval",2914,21,0,["Const",2914,27,0,"this"]],"instanceof","Ident",3431,74,0,"Set"],["Eval",2914,56,0,["Const",2914,62,0,"this"]],"Call",2914,74,0,["Ident",2914,74,0,"__create"],0,["Ident",3431,68,0,"_Set_prototype"]],["Binary",3433,1,0,["Binary",3433,1,0,["Ident",3433,1,0,"_this"],".","Const",3433,6,0,"_items"],"=","Arr",3433,15,0],["IfStatement",3434,1,0,0,["Binary",49,7,0,["Ident",3434,7,0,"iterable"],"!=","Const",1,1,0,null],["TryFinally",2213,8,0,0,["For",2209,1,0,0,["Binary",3435,1,0,["Ident",3435,1,0,"_iter"],"=","Call",2136,30,0,["Ident",2136,30,0,"__iter"],0,["Ident",3435,20,0,"iterable"]],["Const",1,1,0,!0],0,"BlockStatement",2176,1,0,0,["Binary",2146,1,0,["Ident",3435,1,0,"_item"],"=","Call",2146,18,0,["Binary",2146,18,0,["Ident",3435,1,0,"_iter"],".","Const",2146,29,0,"next"],0],["IfStatement",2147,1,0,0,["Binary",2147,9,0,["Ident",3435,1,0,"_item"],".","Const",2147,16,0,"done"],["Break",2148,1,0]],["Binary",2149,1,0,["Ident",3435,10,0,"item"],"=","Binary",2149,19,0,["Ident",3435,1,0,"_item"],".","Const",2149,26,0,"value"],["Call",3436,1,0,["Binary",3436,1,0,["Ident",3436,1,0,"_this"],".","Const",3436,10,0,"add"],0,["Ident",3436,14,0,"item"]]],"TryCatch",2216,1,0,0,["Call",2217,1,0,["Binary",2217,1,0,["Ident",3435,1,0,"_iter"],".","Const",2217,19,0,"close"],0],["Ident",3435,1,0,"_e"],"Const",1,1,0]],["Return",3433,1,0,"Ident",3433,1,0,"_this"]],["Binary",2845,20,0,["Ident",3431,68,0,"_Set_prototype"],"=","Binary",2845,37,0,["Ident",3431,74,0,"Set"],".","Const",2845,44,0,"prototype"],["Binary",2857,21,0,["Binary",2857,21,0,["Ident",3431,74,0,"Set"],".","Const",2857,28,0,"displayName"],"=","Const",3431,68,0,"Set"],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3431,68,0,"_Set_prototype"],".","Const",3438,6,0,"has"],"=","Func",3438,10,0,0,[["Ident",3438,11,0,"item"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",3439,1,0,["Ident",3439,1,0,"__indexOfIdentical"],0,["Binary",3439,26,0,["This",3439,26,0],".","Const",3439,27,0,"_items"],["Ident",3439,34,0,"item"]],"!==","Const",3439,43,0,-1],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3431,68,0,"_Set_prototype"],".","Const",3440,6,0,"add"],"=","Func",3440,10,0,0,[["Ident",3440,11,0,"item"]],["items"],[],"BlockExpression",3441,1,0,["Binary",3441,1,0,["Ident",3441,8,0,"items"],"=","Binary",3441,16,0,["This",3441,16,0],".","Const",3441,18,0,"_items"],["IfExpression",3442,1,0,["Binary",3442,7,0,["Call",3442,7,0,["Ident",3442,7,0,"__indexOfIdentical"],0,["Ident",3442,29,0,"items"],["Ident",3442,35,0,"item"]],"===","Const",3442,44,0,-1],["Call",3443,1,0,["Binary",3443,1,0,["Ident",3443,1,0,"items"],".","Const",3443,13,0,"push"],0,["Ident",3443,18,0,"item"]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3431,68,0,"_Set_prototype"],".","Const",3444,6,0,"delete"],"=","Func",3444,13,0,0,[["Ident",3444,14,0,"item"]],["index","items"],[],"BlockExpression",3445,1,0,["Binary",3445,1,0,["Ident",3445,8,0,"items"],"=","Binary",3445,16,0,["This",3445,16,0],".","Const",3445,18,0,"_items"],["Binary",3446,1,0,["Ident",3446,8,0,"index"],"=","Call",3446,16,0,["Ident",3446,16,0,"__indexOfIdentical"],0,["Ident",3446,38,0,"items"],["Ident",3446,44,0,"item"]],["IfExpression",3447,1,0,["Binary",43,7,0,["Ident",3447,7,0,"index"],"!==","Const",3447,16,0,-1],["BlockExpression",3448,1,0,["Call",3448,1,0,["Binary",3448,1,0,["Ident",3448,1,0,"items"],".","Const",3448,13,0,"splice"],0,["Ident",3448,20,0,"index"],["Const",3448,27,0,1]],["Const",3449,1,0,!0]],"Const",3451,1,0,!1]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3431,68,0,"_Set_prototype"],".","Const",3452,6,0,"values"],"=","Func",3452,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","item"],[],"BlockStatement",3453,1,0,0,["Binary",3453,1,0,["Ident",3453,1,0,"_this"],"=","This",3453,1,0],["Binary",3452,13,0,["Ident",3452,13,0,"_state"],"=","Const",3452,13,0,0],["Func",3452,13,0,["Ident",3452,13,0,"_close"],[],[],[],"Binary",3452,13,0,["Ident",3452,13,0,"_state"],"=","Const",3452,13,0,3],["Func",3452,13,0,["Ident",3452,13,0,"_step"],[["Ident",3452,13,0,"_received"]],[],[],"For",3452,13,0,0,0,["Const",3452,13,0,!0],0,"Switch",3452,13,0,0,["Ident",3452,13,0,"_state"],1,1,null,["Const",1,1,0,0],["BlockStatement",1,1,0,0,["Binary",3453,1,0,["Ident",3453,1,0,"_arr"],"=","Call",1342,22,0,["Ident",1342,22,0,"__toArray"],0,["Binary",3453,16,0,["Ident",3453,16,0,"_this"],".","Const",3453,18,0,"_items"]],["Binary",1381,26,0,["Ident",3453,1,0,"_i"],"=","Binary",1381,49,0,["Ident",3453,1,0,"_arr"],".","Const",1381,56,0,"length"],["Unary",1502,1,0,"++","Ident",3452,13,0,"_state"]],1382,16,null,["Const",1382,16,0,1],["BlockStatement",1382,16,0,0,["Binary",1382,16,0,["Ident",3452,13,0,"_state"],"=","IfExpression",1382,16,0,["Unary",1382,16,0,"--post","Ident",3453,1,0,"_i"],["Const",1382,16,0,2],"Const",1382,16,0,3],["Break",1382,16,0]],1464,1,null,["Const",1464,1,0,2],["BlockStatement",1464,1,0,0,["Binary",1464,1,0,["Ident",3453,8,0,"item"],"=","Binary",1345,75,0,["Ident",3453,1,0,"_arr"],".","Ident",3453,1,0,"_i"],["Binary",3454,1,0,["Ident",3452,13,0,"_state"],"=","Const",3454,1,0,1],["Return",3454,1,0,"Obj",3454,1,0,3454,1,null,"done",["Const",3454,1,0,!1],3454,1,null,"value",["Ident",3454,12,0,"item"]]],3452,13,null,["Const",3452,13,0,3],["Return",3452,13,0,"Obj",3452,13,0,3452,13,null,"done",["Const",3452,13,0,!0],3452,13,null,"value",["Const",3452,13,0]],["Throw",3452,13,0,"Call",3452,13,0,["Ident",3452,13,0,"Error"],0,["Binary",3452,13,0,["Const",3452,13,0,"Unknown state: "],"+","Ident",3452,13,0,"_state"]]],["Func",3452,13,0,["Ident",3452,13,0,"_throw"],[["Ident",3452,13,0,"_e"]],[],[],"BlockStatement",3452,13,0,0,["Call",3452,13,0,["Ident",3452,13,0,"_close"],0],["Throw",3452,13,0,"Ident",3452,13,0,"_e"]],["Func",3452,13,0,["Ident",3452,13,0,"_send"],[["Ident",3452,13,0,"_received"]],[],[],"TryCatch",3452,13,0,0,["Return",3452,13,0,"Call",3452,13,0,["Ident",3452,13,0,"_step"],0,["Ident",3452,13,0,"_received"]],["Ident",3452,13,0,"_e"],"Call",3452,13,0,["Ident",3452,13,0,"_throw"],0,["Ident",3452,13,0,"_e"]],["Return",3452,13,0,"Obj",3452,13,0,3452,13,null,"close",["Ident",3452,13,0,"_close"],3452,13,null,"iterator",["Func",3452,13,0,0,[],[],[],"Return",3452,13,0,"This",3452,13,0],3452,13,null,"next",["Func",3452,13,0,0,[],[],[],"Return",3452,13,0,"Call",3452,13,0,["Ident",3452,13,0,"_send"],0,["Const",3452,13,0]],3452,13,null,"send",["Ident",3452,13,0,"_send"],3452,13,null,"throw",["Func",3452,13,0,0,[["Ident",3452,13,0,"_e"]],[],[],"BlockStatement",3452,13,0,0,["Call",3452,13,0,["Ident",3452,13,0,"_throw"],0,["Ident",3452,13,0,"_e"]],["Return",3452,13,0,"Call",3452,13,0,["Ident",3452,13,0,"_send"],0,["Const",3452,13,0]]]]],["Binary",2980,25,0,["Binary",2980,25,0,["Ident",3431,68,0,"_Set_prototype"],".","Const",3455,6,0,"iterator"],"=","Binary",3455,17,0,["Binary",3455,17,0,["Ident",3455,17,0,"Set"],".","Const",3455,17,0,"prototype"],".","Const",3455,23,0,"values"],["Return",2993,1,0,"Ident",3431,74,0,"Set"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Set"]},setImmediate:{helper:["IfExpression",3497,30,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3497,46,0,["Ident",3497,46,0,"GLOBAL"],".","Const",3497,54,0,"setImmediate"],"===","Const",138,25,0,"function"],["Binary",3498,1,0,["Ident",3498,1,0,"GLOBAL"],".","Const",3498,10,0,"setImmediate"],"IfExpression",3497,30,0,["Binary",3499,8,0,["Binary",3499,8,0,["Unary",118,9,0,"typeof","Ident",3499,21,0,"process"],"!==","Const",118,27,0,"undefined"],"&&","Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3499,46,0,["Ident",3499,46,0,"process"],".","Const",3499,55,0,"nextTick"],"===","Const",138,25,0,"function"],["Call",9,9,0,["Func",9,12,0,0,[],["nextTick"],[],"BlockStatement",3501,1,0,0,["Binary",3501,1,0,["Ident",3501,8,0,"nextTick"],"=","Binary",3501,20,0,["Ident",3501,20,0,"process"],".","Const",3501,29,0,"nextTick"],["Return",1902,1,0,"Func",1902,1,0,0,[["Ident",3502,7,0,"func"]],["args"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3502,7,0,"func"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected func to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3502,7,0,"func"]]]],["Binary",1881,1,0,["Ident",3502,22,0,"args"],"=","Call",1881,23,0,["Binary",1881,23,0,["Ident",1881,23,0,"__slice"],".","Const",1881,23,0,"call"],0,["Arguments",1881,33,0],["Const",1,1,0,1]],["IfStatement",3503,1,0,0,["Binary",3503,9,0,["Ident",3503,9,0,"args"],".","Const",3503,15,0,"length"],["Return",3504,1,0,"Call",3504,1,0,["Ident",3504,1,0,"nextTick"],0,["Func",3504,20,0,0,[],[],[],"Call",3504,23,0,["Binary",3504,23,0,["Ident",3504,23,0,"func"],".","Const",3504,23,0,"apply"],0,["Const",3504,23,0],["Call",3504,32,0,["Ident",3504,32,0,"__toArray"],0,["Ident",3504,32,0,"args"]]]],"Return",3506,1,0,"Call",3506,1,0,["Ident",3506,1,0,"nextTick"],0,["Ident",3506,19,0,"func"]]]],0],"Func",1902,1,0,0,[["Ident",3508,5,0,"func"]],["args"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3508,5,0,"func"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected func to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3508,5,0,"func"]]]],["Binary",1881,1,0,["Ident",3508,20,0,"args"],"=","Call",1881,23,0,["Binary",1881,23,0,["Ident",1881,23,0,"__slice"],".","Const",1881,23,0,"call"],0,["Arguments",1881,33,0],["Const",1,1,0,1]],["IfStatement",3509,1,0,0,["Binary",3509,7,0,["Ident",3509,7,0,"args"],".","Const",3509,13,0,"length"],["Return",3510,1,0,"Call",3510,1,0,["Ident",3510,1,0,"setTimeout"],0,["Func",3510,20,0,0,[],[],[],"Call",3510,23,0,["Binary",3510,23,0,["Ident",3510,23,0,"func"],".","Const",3510,23,0,"apply"],0,["Const",3510,23,0],["Call",3510,32,0,["Ident",3510,32,0,"__toArray"],0,["Ident",3510,32,0,"args"]]],["Const",3510,39,0,0]],"Return",3512,1,0,"Call",3512,1,0,["Ident",3512,1,0,"setTimeout"],0,["Ident",3512,19,0,"func"],["Const",3512,25,0,0]]],type:"any",dependencies:["__slice","__toArray","__typeof","GLOBAL","setImmediate"]},__defer:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",3515,1,0,0,["Func",3515,1,0,["Ident",3515,6,0,"__defer"],[],["deferred","isError","value"],[],"BlockStatement",3516,1,0,0,["Binary",3516,1,0,["Ident",3516,16,0,"isError"],"=","Const",3516,27,0,!1],["Binary",3517,1,0,["Ident",3517,16,0,"value"],"=","Const",3517,24,0,null],["Binary",3519,1,0,["Ident",3519,16,0,"deferred"],"=","Arr",3519,41,0],["Func",3520,1,0,["Ident",3520,8,0,"complete"],[["Ident",3520,18,0,"newIsError"],["Ident",3520,31,0,"newValue"]],["funcs"],[],"IfExpression",3521,1,0,["Ident",3521,9,0,"deferred"],["BlockExpression",3522,1,0,["Binary",3522,1,0,["Ident",3522,12,0,"funcs"],"=","Ident",3522,29,0,"deferred"],["Binary",3523,1,0,["Ident",3523,1,0,"deferred"],"=","Const",3523,20,0,null],["Binary",3524,1,0,["Ident",3524,1,0,"isError"],"=","Ident",3524,20,0,"newIsError"],["Binary",3525,1,0,["Ident",3525,1,0,"value"],"=","Ident",3525,17,0,"newValue"],["IfExpression",3526,1,0,["Binary",3526,11,0,["Ident",3526,11,0,"funcs"],".","Const",3526,18,0,"length"],["Call",3527,1,0,["Ident",3527,1,0,"setImmediate"],0,["Func",3527,26,0,0,[],["_end","i"],[],"For",1278,1,0,0,["BlockExpression",1,1,0,["Binary",1188,38,0,["Ident",3528,16,0,"i"],"=","Const",3528,22,0,0],["Binary",3528,1,0,["Ident",3528,1,0,"_end"],"=","Binary",3528,27,0,["Ident",3528,27,0,"funcs"],".","Const",3528,34,0,"length"]],["Binary",1214,57,0,["Ident",3528,16,0,"i"],"<","Ident",3528,1,0,"_end"],["Unary",1226,35,0,"++","Ident",3528,16,0,"i"],"Call",3529,1,0,["Binary",3529,1,0,["Ident",3529,1,0,"funcs"],".","Ident",3529,21,0,"i"],0]]]]],["Return",3531,1,0,"Obj",3531,1,0,3532,7,null,"promise",["Obj",3532,15,0,3533,9,null,"then",["Func",3533,16,0,0,[["Ident",3533,17,0,"onFulfilled"],["Ident",3533,30,0,"onRejected"],["Ident",3533,51,0,"allowSync"]],["_ref","fulfill","promise","reject"],[],"BlockStatement",3534,1,0,0,["IfStatement",3534,1,0,0,["Binary",43,7,0,["Ident",3534,13,0,"allowSync"],"!==","Const",3534,27,0,!0],["Binary",3535,1,0,["Ident",3535,1,0,"allowSync"],"=","Const",3535,26,0]],["Binary",3536,1,0,["Ident",3536,1,0,"_ref"],"=","Call",3536,43,0,["Ident",3536,43,0,"__defer"],0],["Binary",254,43,0,["Ident",3536,16,0,"promise"],"=","Binary",254,55,0,["Ident",3536,1,0,"_ref"],".","Const",1,1,0,"promise"],["Binary",254,43,0,["Ident",3536,24,0,"fulfill"],"=","Binary",254,55,0,["Ident",3536,1,0,"_ref"],".","Const",1,1,0,"fulfill"],["Binary",254,43,0,["Ident",3536,33,0,"reject"],"=","Binary",254,55,0,["Ident",3536,1,0,"_ref"],".","Const",1,1,0,"reject"],["Ident",3536,1,0,"_ref"],["Func",3537,1,0,["Ident",3537,14,0,"step"],[],["f","result"],[],"TryCatch",3537,27,0,0,["BlockStatement",3538,1,0,0,["IfStatement",3538,20,0,0,["Ident",3538,23,0,"isError"],["Binary",3538,1,0,["Ident",3538,16,0,"f"],"=","Ident",3538,37,0,"onRejected"],"Binary",3538,1,0,["Ident",3538,16,0,"f"],"=","Ident",3538,54,0,"onFulfilled"],["IfStatement",3539,1,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Ident",3539,28,0,"f"],"===","Const",138,25,0,"function"],["BlockStatement",3540,1,0,0,["Binary",3540,1,0,["Ident",3540,18,0,"result"],"=","Call",3540,27,0,["Ident",3540,27,0,"f"],0,["Ident",3540,30,0,"value"]],["IfStatement",3541,1,0,0,["Binary",3541,17,0,["Ident",3541,17,0,"result"],"&&","Binary",138,7,0,["Unary",138,7,0,"typeof","Binary",3541,41,0,["Ident",3541,41,0,"result"],".","Const",3541,49,0,"then"],"===","Const",138,25,0,"function"],["Call",3542,1,0,["Binary",3542,1,0,["Ident",3542,1,0,"result"],".","Const",3542,24,0,"then"],0,["Ident",3542,29,0,"fulfill"],["Ident",3542,37,0,"reject"],["Ident",3542,45,0,"allowSync"]],"Call",3544,1,0,["Ident",3544,1,0,"fulfill"],0,["Ident",3544,25,0,"result"]]],"Call",3546,1,0,["IfExpression",3546,16,0,["Ident",3546,18,0,"isError"],["Ident",3546,32,0,"reject"],"Ident",3546,44,0,"fulfill"],0,["Ident",3546,54,0,"value"]]],["Ident",3547,16,0,"e"],"Call",3548,1,0,["Ident",3548,1,0,"reject"],0,["Ident",3548,20,0,"e"]],["IfStatement",3550,1,0,0,["Ident",3550,13,0,"deferred"],["Call",3551,1,0,["Binary",3551,1,0,["Ident",3551,1,0,"deferred"],".","Const",3551,22,0,"push"],0,["Ident",3551,27,0,"step"]],"IfStatement",3550,1,0,0,["Ident",3552,18,0,"allowSync"],["Call",3553,1,0,["Ident",3553,1,0,"step"],0],"Call",3555,1,0,["Ident",3555,1,0,"setImmediate"],0,["Ident",3555,27,0,"step"]],["Return",3556,1,0,"Ident",3556,1,0,"promise"]],3557,9,null,"sync",["Func",3557,16,0,0,[],["result","state"],[],"BlockStatement",3558,1,0,0,["Binary",3558,1,0,["Ident",3558,22,0,"state"],"=","Const",3558,31,0,0],["Binary",3559,1,0,["Ident",3559,22,0,"result"],"=","Const",3559,32,0,0],["Call",3560,1,0,["Binary",3560,1,0,["This",3560,1,0],".","Const",3560,12,0,"then"],0,["Func",3561,14,0,0,[["Ident",3561,15,0,"ret"]],[],[],"BlockStatement",3562,1,0,0,["Binary",3562,1,0,["Ident",3562,1,0,"state"],"=","Const",3562,24,0,1],["Return",3563,1,0,"Binary",3563,1,0,["Ident",3563,1,0,"result"],"=","Ident",3563,24,0,"ret"]],["Func",3564,14,0,0,[["Ident",3564,15,0,"err"]],[],[],"BlockStatement",3565,1,0,0,["Binary",3565,1,0,["Ident",3565,1,0,"state"],"=","Const",3565,24,0,2],["Return",3566,1,0,"Binary",3566,1,0,["Ident",3566,1,0,"result"],"=","Ident",3566,24,0,"err"]],["Const",3567,13,0,!0]],["Switch",3568,1,0,0,["Ident",3568,17,0,"state"],3569,16,null,["Const",3569,16,0,0],["Throw",3570,1,0,"Call",3570,18,0,["Ident",3570,18,0,"Error"],0,["Const",3570,25,0,"Promise did not execute synchronously"]],3571,16,null,["Const",3571,16,0,1],["Return",3572,1,0,"Ident",3572,19,0,"result"],3573,16,null,["Const",3573,16,0,2],["Throw",3574,1,0,"Ident",3574,18,0,"result"],["Throw",3576,1,0,"Call",3576,18,0,["Ident",3576,18,0,"Error"],0,["Const",3576,25,0,"Unknown state"]]]]],3578,7,null,"fulfill",["Func",3578,14,0,0,[["Ident",3578,15,0,"value"]],[],[],"Call",3578,25,0,["Ident",3578,25,0,"complete"],0,["Const",3578,35,0,!1],["Ident",3578,41,0,"value"]],3579,7,null,"reject",["Func",3579,13,0,0,[["Ident",3579,14,0,"reason"]],[],[],"Call",3579,25,0,["Ident",3579,25,0,"complete"],0,["Const",3579,35,0,!0],["Ident",3579,40,0,"reason"]]]],["Binary",3581,1,0,["Binary",3581,1,0,["Ident",3581,1,0,"__defer"],".","Const",3581,11,0,"fulfilled"],"=","Func",3581,25,0,0,[["Ident",3581,26,0,"value"]],["d"],[],"BlockStatement",3582,1,0,0,["Binary",3582,1,0,["Ident",3582,8,0,"d"],"=","Call",3582,12,0,["Ident",3582,12,0,"__defer"],0],["Call",3583,1,0,["Binary",3583,1,0,["Ident",3583,1,0,"d"],".","Const",3583,7,0,"fulfill"],0,["Ident",3583,15,0,"value"]],["Return",3584,1,0,"Binary",3584,1,0,["Ident",3584,1,0,"d"],".","Const",3584,7,0,"promise"]],["Binary",3585,1,0,["Binary",3585,1,0,["Ident",3585,1,0,"__defer"],".","Const",3585,11,0,"rejected"],"=","Func",3585,24,0,0,[["Ident",3585,25,0,"reason"]],["d"],[],"BlockStatement",3586,1,0,0,["Binary",3586,1,0,["Ident",3586,8,0,"d"],"=","Call",3586,12,0,["Ident",3586,12,0,"__defer"],0],["Call",3587,1,0,["Binary",3587,1,0,["Ident",3587,1,0,"d"],".","Const",3587,7,0,"reject"],0,["Ident",3587,14,0,"reason"]],["Return",3588,1,0,"Binary",3588,1,0,["Ident",3588,1,0,"d"],".","Const",3588,7,0,"promise"]],["Return",3589,1,0,"Ident",3589,1,0,"__defer"]],0],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{fulfill:{type:"generic",base:"functionBase",args:["undefined"]},promise:{type:"object",pairs:{sync:"function",then:"function"}},reject:{type:"generic",base:"functionBase",args:["undefined"]}}}]},dependencies:["__defer","setImmediate"]},__generatorToPromise:{helper:["Func",1902,1,0,0,[["Ident",3591,42,0,"generator"],["Ident",3591,83,0,"allowSync"]],[],[],"BlockStatement",1902,1,0,0,["IfStatement",1775,10,0,0,["Binary",1775,13,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3591,42,0,"generator"],"!==","Const",144,62,0,"object"],"||","Binary",144,72,0,["Ident",3591,42,0,"generator"],"===","Const",1,1,0,null],["Throw",1776,1,0,"Call",1776,14,0,["Ident",1776,14,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected generator to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3591,42,0,"generator"]]],"BlockStatement",1,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Binary",1774,35,0,["Ident",3591,42,0,"generator"],".","Const",3591,56,0,"send"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected generator.send to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Binary",1774,35,0,["Ident",3591,42,0,"generator"],".","Const",3591,56,0,"send"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Binary",1774,35,0,["Ident",3591,42,0,"generator"],".","Const",3591,68,0,"throw"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected generator.throw to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Binary",1774,35,0,["Ident",3591,42,0,"generator"],".","Const",3591,68,0,"throw"]]]]],["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",3591,83,0,"allowSync"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",3591,83,0,"allowSync"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",3591,83,0,"allowSync"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected allowSync to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3591,83,0,"allowSync"]]]],["Func",3592,1,0,["Ident",3592,6,0,"continuer"],[["Ident",3592,17,0,"verb"],["Ident",3592,22,0,"arg"]],["item"],[],"BlockStatement",3593,1,0,0,["TryCatch",3594,1,0,0,["Binary",3595,1,0,["Ident",3595,1,0,"item"],"=","Call",3595,14,0,["Binary",3595,14,0,["Ident",3595,14,0,"generator"],".","Ident",3595,25,0,"verb"],0,["Ident",3595,31,0,"arg"]],["Ident",3596,10,0,"e"],"Return",3597,1,0,"Call",3597,13,0,["Binary",3597,13,0,["Ident",3597,13,0,"__defer"],".","Const",3597,22,0,"rejected"],0,["Ident",3597,31,0,"e"]],["IfStatement",3598,1,0,0,["Binary",3598,7,0,["Ident",3598,7,0,"item"],".","Const",3598,13,0,"done"],["Return",3599,1,0,"Call",3599,1,0,["Binary",3599,1,0,["Ident",3599,1,0,"__defer"],".","Const",3599,15,0,"fulfilled"],0,["Binary",3599,25,0,["Ident",3599,25,0,"item"],".","Const",3599,30,0,"value"]],"Return",3601,1,0,"Call",3601,1,0,["Binary",3601,1,0,["Binary",3601,1,0,["Ident",3601,1,0,"item"],".","Const",3601,12,0,"value"],".","Const",3601,18,0,"then"],0,["Ident",3601,23,0,"callback"],["Ident",3601,32,0,"errback"],["Ident",3601,41,0,"allowSync"]]],["Func",3602,1,0,["Ident",3602,6,0,"callback"],[["Ident",3602,16,0,"value"]],[],[],"Return",3602,25,0,"Call",3602,25,0,["Ident",3602,25,0,"continuer"],0,["Const",3602,37,0,"send"],["Ident",3602,42,0,"value"]],["Func",3603,1,0,["Ident",3603,6,0,"errback"],[["Ident",3603,15,0,"value"]],[],[],"Return",3603,24,0,"Call",3603,24,0,["Ident",3603,24,0,"continuer"],0,["Const",3603,36,0,"throw"],["Ident",3603,42,0,"value"]],["Return",3604,1,0,"Call",3604,1,0,["Ident",3604,1,0,"callback"],0,["Const",3604,12,0]]],type:"function",dependencies:["__defer","__generatorToPromise","__typeof"]},__promise:{helper:["Func",1902,1,0,0,[["Ident",3605,36,0,"value"],["Ident",3605,43,0,"allowSync"]],["factory"],[],"BlockStatement",1902,1,0,0,["IfStatement",1693,13,0,0,["Binary",1693,16,0,["Ident",3605,43,0,"allowSync"],"==","Const",1,1,0,null],["Binary",1694,1,0,["Ident",3605,43,0,"allowSync"],"=","Const",1,1,0,!1],"IfStatement",1686,1,0,0,["Binary",655,18,0,["Unary",135,7,0,"typeof","Ident",3605,43,0,"allowSync"],"!==","Const",135,25,0,"boolean"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected allowSync to be a Boolean, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3605,43,0,"allowSync"]]]],["IfStatement",3606,1,0,0,["Binary",138,7,0,["Unary",138,7,0,"typeof","Ident",3606,18,0,"value"],"===","Const",138,25,0,"function"],["BlockStatement",3607,1,0,0,["Binary",3607,1,0,["Ident",3607,8,0,"factory"],"=","Func",3607,16,0,0,[],[],[],"Return",3607,21,0,"Call",3607,21,0,["Ident",3607,21,0,"__generatorToPromise"],0,["Call",3607,45,0,["Binary",3607,45,0,["Ident",3607,45,0,"value"],".","Const",3607,45,0,"apply"],0,["This",3607,52,0],["Arguments",3607,61,0]]],["Binary",3608,1,0,["Binary",3608,1,0,["Ident",3608,1,0,"factory"],".","Const",3608,13,0,"sync"],"=","Func",3608,22,0,0,[],[],[],"Return",3608,24,0,"Call",3608,24,0,["Binary",3608,24,0,["Call",3608,24,0,["Ident",3608,24,0,"__generatorToPromise"],0,["Call",3608,48,0,["Binary",3608,48,0,["Ident",3608,48,0,"value"],".","Const",3608,48,0,"apply"],0,["This",3608,55,0],["Arguments",3608,64,0]],["Const",3608,75,0,!0]],".","Const",3608,82,0,"sync"],0],["Return",3609,1,0,"Ident",3609,1,0,"factory"]],"Return",3611,1,0,"Call",3611,1,0,["Ident",3611,1,0,"__generatorToPromise"],0,["Ident",3611,28,0,"value"],["Ident",3611,34,0,"allowSync"]]],type:"function",dependencies:["__generatorToPromise","__promise","__toArray","__typeof"]},__fromPromise:{helper:["Func",1902,1,0,0,[["Ident",3649,34,0,"promise"]],[],[],"BlockStatement",1902,1,0,0,["IfStatement",1775,10,0,0,["Binary",1775,13,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3649,34,0,"promise"],"!==","Const",144,62,0,"object"],"||","Binary",144,72,0,["Ident",3649,34,0,"promise"],"===","Const",1,1,0,null],["Throw",1776,1,0,"Call",1776,14,0,["Ident",1776,14,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected promise to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3649,34,0,"promise"]]],"IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Binary",1774,35,0,["Ident",3649,34,0,"promise"],".","Const",3649,46,0,"then"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected promise.then to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Binary",1774,35,0,["Ident",3649,34,0,"promise"],".","Const",3649,46,0,"then"]]]],["Return",3649,65,0,"Func",3649,65,0,0,[["Ident",3649,66,0,"callback"]],[],[],"Call",3650,1,0,["Binary",3650,1,0,["Ident",3650,1,0,"promise"],".","Const",3650,11,0,"then"],0,["Func",3651,6,0,0,[["Ident",3651,7,0,"value"]],[],[],"Return",3651,16,0,"Call",3651,16,0,["Ident",3651,16,0,"setImmediate"],0,["Ident",3651,31,0,"callback"],["Const",3651,40,0,null],["Ident",3651,46,0,"value"]],["Func",3652,6,0,0,[["Ident",3652,7,0,"reason"]],[],[],"Return",3652,17,0,"Call",3652,17,0,["Ident",3652,17,0,"setImmediate"],0,["Ident",3652,32,0,"callback"],["Ident",3652,41,0,"reason"]]]],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:["undefined"]}]},dependencies:["__fromPromise","__typeof","setImmediate"]},__toPromise:{helper:["Func",1902,1,0,0,[["Ident",3659,32,0,"func"],["Ident",3659,43,0,"context"],["Ident",3659,52,0,"args"]],["d"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3659,32,0,"func"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected func to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3659,32,0,"func"]]]],["Binary",3660,1,0,["Ident",3660,6,0,"d"],"=","Call",3660,10,0,["Ident",3660,10,0,"__defer"],0],["Call",3661,1,0,["Binary",3661,1,0,["Ident",3661,1,0,"func"],".","Const",3661,1,0,"apply"],0,["Ident",3661,9,0,"context"],["Call",3661,1,0,["Binary",3661,1,0,["Call",3661,21,0,["Ident",3661,21,0,"__toArray"],0,["Ident",3661,21,0,"args"]],".","Const",3661,1,0,"concat"],0,["Arr",3661,28,0,["Func",3661,28,0,0,[["Ident",3661,29,0,"err"],["Ident",3661,33,0,"value"]],[],[],"IfExpression",3662,1,0,["Binary",49,7,0,["Ident",3662,7,0,"err"],"!=","Const",1,1,0,null],["Call",3663,1,0,["Binary",3663,1,0,["Ident",3663,1,0,"d"],".","Const",3663,9,0,"reject"],0,["Ident",3663,16,0,"err"]],"Call",3665,1,0,["Binary",3665,1,0,["Ident",3665,1,0,"d"],".","Const",3665,9,0,"fulfill"],0,["Ident",3665,17,0,"value"]]]]],["Return",3666,1,0,"Binary",3666,1,0,["Ident",3666,1,0,"d"],".","Const",3666,5,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__toArray","__toPromise","__typeof"]},__generator:{helper:["Func",3696,30,0,0,[["Ident",3696,31,0,"func"]],[],[],"Return",3696,41,0,"Func",3696,41,0,0,[],["_this","data"],[],"BlockStatement",3697,1,0,0,["Binary",3697,1,0,["Ident",3697,1,0,"_this"],"=","This",3697,1,0],["Binary",3697,1,0,["Ident",3697,14,0,"data"],"=","Arr",3697,32,0,["This",3697,34,0],["Call",3697,39,0,["Binary",3697,39,0,["Ident",3697,39,0,"__slice"],".","Const",3697,48,0,"call"],0,["Arguments",3697,53,0]]],["Return",3698,1,0,"Obj",3698,1,0,3699,5,null,"iterator",["Func",3699,13,0,0,[],[],[],"Return",3699,18,0,"This",3699,18,0],3700,5,null,"send",["Func",3700,9,0,0,[],["tmp"],[],"Return",3701,1,0,"Obj",3701,1,0,3702,10,null,"done",["Const",3702,9,0,!0],3703,9,null,"value",["IfExpression",3703,15,0,["Ident",3703,18,0,"data"],["BlockExpression",3704,1,0,["Binary",3704,1,0,["Ident",3704,14,0,"tmp"],"=","Ident",3704,20,0,"data"],["Binary",3705,1,0,["Ident",3705,1,0,"data"],"=","Const",3705,18,0,null],["Call",3706,1,0,["Binary",3706,1,0,["Ident",3706,1,0,"func"],".","Const",3706,16,0,"apply"],0,["Binary",3706,22,0,["Ident",3706,22,0,"tmp"],".","Const",3706,26,0,0],["Binary",3706,29,0,["Ident",3706,29,0,"tmp"],".","Const",3706,34,0,1]]],"Const",3708,1,0]],3710,5,null,"next",["Func",3710,9,0,0,[],[],[],"Return",3710,14,0,"Call",3710,14,0,["Binary",3710,14,0,["This",3710,14,0],".","Const",3710,16,0,"send"],0],3711,5,null,"throw",["Func",3711,10,0,0,[["Ident",3711,11,0,"err"]],[],[],"BlockStatement",3712,1,0,0,["Binary",3712,1,0,["Ident",3712,1,0,"data"],"=","Const",3712,14,0,null],["Throw",3713,1,0,"Ident",3713,12,0,"err"]]]],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:[{type:"object",pairs:{iterator:"function",next:"function",send:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{done:"boolean"}}]},"throw":{type:"generic",base:"functionBase",args:["none"]}}}]}]},dependencies:["__generator","__slice"]},__somePromise:{helper:["Func",1902,1,0,0,[["Ident",3716,34,0,"promises"]],["defer","i"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Unary",659,18,0,"!","Call",141,146,0,["Ident",141,146,0,"__isArray"],0,["Ident",3716,34,0,"promises"]],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected promises to be an Array, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3716,34,0,"promises"]]]],["Binary",3717,1,0,["Ident",3717,6,0,"defer"],"=","Call",3717,14,0,["Ident",3717,14,0,"__defer"],0],["Binary",3718,1,0,["Ident",3718,14,0,"i"],"=","Binary",3718,18,0,["Ident",3718,18,0,"promises"],".","Const",3718,28,0,"length"],["For",1118,1,0,0,0,["Unary",3719,8,0,"--post","Ident",3719,18,0,"i"],0,"Call",3720,1,0,["Binary",3720,1,0,["Binary",3720,1,0,["Ident",3720,1,0,"promises"],".","Ident",3720,14,0,"i"],".","Const",3720,17,0,"then"],0,["Binary",3720,22,0,["Ident",3720,22,0,"defer"],".","Const",3720,28,0,"fulfill"],["Binary",3720,36,0,["Ident",3720,36,0,"defer"],".","Const",3720,43,0,"reject"]],["Return",3721,1,0,"Binary",3721,1,0,["Ident",3721,1,0,"defer"],".","Const",3721,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__isArray","__somePromise","__typeof"]},__everyPromise:{helper:["Func",1902,1,0,0,[["Ident",3731,35,0,"promises"]],["defer","i","isArray","k","remaining","result","v"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",661,18,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3731,35,0,"promises"],"!==","Const",144,62,0,"object"],"||","Binary",43,7,0,["Ident",3731,35,0,"promises"],"===","Const",1,1,0,null],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected promises to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3731,35,0,"promises"]]]],["Binary",3732,1,0,["Ident",3732,6,0,"isArray"],"=","Call",141,146,0,["Ident",141,146,0,"__isArray"],0,["Ident",3732,27,0,"promises"]],["Binary",3733,1,0,["Ident",3733,6,0,"defer"],"=","Call",3733,14,0,["Ident",3733,14,0,"__defer"],0],["IfStatement",3734,15,0,0,["Ident",3734,18,0,"isArray"],["Binary",3734,1,0,["Ident",3734,6,0,"result"],"=","Arr",3734,32,0],"Binary",3734,1,0,["Ident",3734,6,0,"result"],"=","Obj",3734,40,0],["Binary",3735,1,0,["Ident",3735,14,0,"remaining"],"=","Const",3735,27,0,0],["Func",3736,1,0,["Ident",3736,6,0,"handle"],[["Ident",3736,14,0,"key"],["Ident",3736,18,0,"promise"]],[],[],"Return",3737,1,0,"Call",3737,1,0,["Binary",3737,1,0,["Ident",3737,1,0,"promise"],".","Const",3737,13,0,"then"],0,["Func",3738,8,0,0,[["Ident",3738,9,0,"value"]],[],[],"BlockExpression",3739,1,0,["Binary",3739,1,0,["Binary",3739,1,0,["Ident",3739,1,0,"result"],".","Ident",3739,16,0,"key"],"=","Ident",3739,23,0,"value"],["IfExpression",3740,1,0,["Binary",3740,11,0,["Unary",899,11,0,"--","Ident",3740,13,0,"remaining"],"===","Const",3740,32,0,0],["Call",3741,1,0,["Binary",3741,1,0,["Ident",3741,1,0,"defer"],".","Const",3741,17,0,"fulfill"],0,["Ident",3741,25,0,"result"]]]],["Binary",3742,7,0,["Ident",3742,7,0,"defer"],".","Const",3742,13,0,"reject"]],["IfStatement",3743,1,0,0,["Ident",3743,5,0,"isArray"],["BlockStatement",3744,1,0,0,["Binary",3744,1,0,["Ident",3744,16,0,"i"],"=","Binary",3744,20,0,["Ident",3744,20,0,"promises"],".","Const",3744,30,0,"length"],["Binary",3745,1,0,["Ident",3745,1,0,"remaining"],"=","Ident",3745,17,0,"i"],["For",1118,1,0,0,0,["Unary",3746,10,0,"--post","Ident",3746,20,0,"i"],0,"Call",3747,1,0,["Ident",3747,1,0,"handle"],0,["Ident",3747,14,0,"i"],["Binary",3747,16,0,["Ident",3747,16,0,"promises"],".","Ident",3747,26,0,"i"]]],"ForIn",3749,1,0,0,["Ident",3749,8,0,"k"],["Ident",3749,16,0,"promises"],"IfStatement",1572,1,0,0,["Call",646,7,0,["Binary",646,7,0,["Ident",646,7,0,"__owns"],".","Const",646,7,0,"call"],0,["Ident",3749,16,0,"promises"],["Ident",3749,8,0,"k"]],["BlockStatement",1550,1,0,0,["Binary",1530,52,0,["Ident",3749,11,0,"v"],"=","Binary",1530,65,0,["Ident",3749,16,0,"promises"],".","Ident",3749,8,0,"k"],["Unary",897,11,0,"++","Ident",3750,1,0,"remaining"],["Call",3751,1,0,["Ident",3751,1,0,"handle"],0,["Ident",3751,14,0,"k"],["Ident",3751,16,0,"v"]]]],["Return",3752,1,0,"Binary",3752,1,0,["Ident",3752,1,0,"defer"],".","Const",3752,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__everyPromise","__isArray","__owns","__typeof"]},__delay:{helper:["Func",1902,1,0,0,[["Ident",3762,27,0,"milliseconds"],["Ident",3762,50,0,"value"]],["defer"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",3762,27,0,"milliseconds"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected milliseconds to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3762,27,0,"milliseconds"]]]],["IfStatement",3763,1,0,0,["Binary",725,13,0,["Ident",3763,5,0,"milliseconds"],"<=","Const",3763,22,0,0],["Return",3764,1,0,"Call",3764,1,0,["Binary",3764,1,0,["Ident",3764,1,0,"__defer"],".","Const",3764,13,0,"fulfilled"],0,["Ident",3764,23,0,"value"]],"BlockStatement",3766,1,0,0,["Binary",3766,1,0,["Ident",3766,8,0,"defer"],"=","Call",3766,16,0,["Ident",3766,16,0,"__defer"],0],["Call",3767,1,0,["Ident",3767,1,0,"setTimeout"],0,["Func",3767,19,0,0,[],[],[],"Call",3767,22,0,["Binary",3767,22,0,["Ident",3767,22,0,"defer"],".","Const",3767,29,0,"fulfill"],0,["Ident",3767,37,0,"value"]],["Ident",3767,45,0,"milliseconds"]],["Return",3768,1,0,"Binary",3768,1,0,["Ident",3768,1,0,"defer"],".","Const",3768,11,0,"promise"]]],type:"function",dependencies:["__defer","__delay","__typeof"]},__promiseLoop:{helper:["Func",1902,1,0,0,[["Ident",3786,41,0,"limit"],["Ident",3786,58,0,"length"],["Ident",3786,76,0,"body"]],["defer","done","index","result","slotsUsed"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",3786,41,0,"limit"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected limit to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3786,41,0,"limit"]]]],["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",3786,58,0,"length"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected length to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3786,58,0,"length"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3786,76,0,"body"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected body to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3786,76,0,"body"]]]],["IfStatement",3787,1,0,0,["Binary",3787,5,0,["Binary",3787,5,0,["Ident",3787,5,0,"limit"],"<","Const",3787,15,0,1],"||","Binary",43,7,0,["Ident",3787,19,0,"limit"],"!==","Ident",3787,28,0,"limit"],["Binary",3788,1,0,["Ident",3788,1,0,"limit"],"=","Const",3788,13,0,1,1]],["Binary",3790,1,0,["Ident",3790,6,0,"result"],"=","Arr",3790,15,0],["Binary",3791,1,0,["Ident",3791,14,0,"done"],"=","Const",3791,21,0,!1],["Binary",3792,1,0,["Ident",3792,14,0,"slotsUsed"],"=","Const",3792,28,0,0],["Binary",3793,1,0,["Ident",3793,6,0,"defer"],"=","Call",3793,14,0,["Ident",3793,14,0,"__defer"],0],["Binary",3794,1,0,["Ident",3794,14,0,"index"],"=","Const",3794,23,0,0],["Func",3795,1,0,["Ident",3795,6,0,"handle"],[["Ident",3795,14,0,"index"]],[],[],"BlockStatement",3796,1,0,0,["Unary",897,11,0,"++","Ident",3796,1,0,"slotsUsed"],["Return",3797,1,0,"Call",3797,1,0,["Binary",3797,1,0,["Call",3797,1,0,["Ident",3797,1,0,"body"],0,["Ident",3797,10,0,"index"]],".","Const",3797,17,0,"then"],0,["Func",3798,8,0,0,[["Ident",3798,9,0,"value"]],[],[],"BlockStatement",3799,1,0,0,["Binary",3799,1,0,["Binary",3799,1,0,["Ident",3799,1,0,"result"],".","Ident",3799,16,0,"index"],"=","Ident",3799,25,0,"value"],["Unary",899,11,0,"--","Ident",3800,1,0,"slotsUsed"],["Return",3801,1,0,"Call",3801,1,0,["Ident",3801,1,0,"flush"],0]],["Func",3802,8,0,0,[["Ident",3802,9,0,"reason"]],[],[],"BlockStatement",3803,1,0,0,["Binary",3803,1,0,["Ident",3803,1,0,"done"],"=","Const",3803,16,0,!0],["Return",3804,1,0,"Call",3804,1,0,["Binary",3804,1,0,["Ident",3804,1,0,"defer"],".","Const",3804,15,0,"reject"],0,["Ident",3804,22,0,"reason"]]]]],["Func",3805,1,0,["Ident",3805,6,0,"flush"],[],[],[],"BlockStatement",3806,1,0,0,["For",1118,1,0,0,0,["Binary",3806,10,0,["Binary",3806,10,0,["Unary",3806,10,0,"!","Ident",3806,14,0,"done"],"&&","Binary",723,13,0,["Ident",3806,23,0,"slotsUsed"],"<","Ident",3806,36,0,"limit"],"&&","Binary",723,13,0,["Ident",3806,46,0,"index"],"<","Ident",3806,54,0,"length"],["Unary",897,11,0,"++","Ident",3806,62,0,"index"],"Call",3807,1,0,["Ident",3807,1,0,"handle"],0,["Ident",3807,14,0,"index"]],["IfStatement",3808,1,0,0,["Binary",3808,7,0,["Binary",3808,7,0,["Unary",3808,7,0,"!","Ident",3808,11,0,"done"],"&&","Binary",761,9,0,["Ident",3808,20,0,"index"],">=","Ident",3808,29,0,"length"],"&&","Binary",3808,40,0,["Ident",3808,40,0,"slotsUsed"],"===","Const",3808,55,0,0],["BlockStatement",3809,1,0,0,["Binary",3809,1,0,["Ident",3809,1,0,"done"],"=","Const",3809,14,0,!0],["Return",3810,1,0,"Call",3810,1,0,["Binary",3810,1,0,["Ident",3810,1,0,"defer"],".","Const",3810,13,0,"fulfill"],0,["Ident",3810,21,0,"result"]]]]],["Call",3811,1,0,["Ident",3811,1,0,"setImmediate"],0,["Ident",3811,17,0,"flush"]],["Return",3812,1,0,"Binary",3812,1,0,["Ident",3812,1,0,"defer"],".","Const",3812,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__promiseLoop","__typeof","setImmediate"]},__promiseIter:{helper:["Func",1902,1,0,0,[["Ident",3814,41,0,"limit"],["Ident",3814,58,0,"iterator"],["Ident",3814,88,0,"body"]],["defer","done","index","iterStopped","result","slotsUsed"],[],"BlockStatement",1902,1,0,0,["IfStatement",1686,1,0,0,["Binary",653,18,0,["Unary",132,7,0,"typeof","Ident",3814,41,0,"limit"],"!==","Const",132,25,0,"number"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected limit to be a Number, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3814,41,0,"limit"]]]],["IfStatement",1775,10,0,0,["Binary",1775,13,0,["Binary",144,47,0,["Unary",144,47,0,"typeof","Ident",3814,58,0,"iterator"],"!==","Const",144,62,0,"object"],"||","Binary",144,72,0,["Ident",3814,58,0,"iterator"],"===","Const",1,1,0,null],["Throw",1776,1,0,"Call",1776,14,0,["Ident",1776,14,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected iterator to be an Object, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3814,58,0,"iterator"]]],"IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Binary",1774,35,0,["Ident",3814,58,0,"iterator"],".","Const",3814,72,0,"next"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected iterator.next to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Binary",1774,35,0,["Ident",3814,58,0,"iterator"],".","Const",3814,72,0,"next"]]]],["IfStatement",1686,1,0,0,["Binary",657,18,0,["Unary",138,7,0,"typeof","Ident",3814,88,0,"body"],"!==","Const",138,25,0,"function"],["Throw",1687,1,0,"Call",1687,18,0,["Ident",1687,18,0,"TypeError"],0,["Binary",608,7,0,["Const",608,7,0,"Expected body to be a Function, got "],"+","Call",494,49,0,["Ident",494,49,0,"__typeof"],0,["Ident",3814,88,0,"body"]]]],["IfStatement",3815,1,0,0,["Binary",3815,5,0,["Binary",3815,5,0,["Ident",3815,5,0,"limit"],"<","Const",3815,15,0,1],"||","Binary",43,7,0,["Ident",3815,19,0,"limit"],"!==","Ident",3815,28,0,"limit"],["Binary",3816,1,0,["Ident",3816,1,0,"limit"],"=","Const",3816,13,0,1,1]],["Binary",3818,1,0,["Ident",3818,6,0,"result"],"=","Arr",3818,15,0],["Binary",3819,1,0,["Ident",3819,14,0,"done"],"=","Const",3819,21,0,!1],["Binary",3820,1,0,["Ident",3820,14,0,"slotsUsed"],"=","Const",3820,28,0,0],["Binary",3821,1,0,["Ident",3821,6,0,"defer"],"=","Call",3821,14,0,["Ident",3821,14,0,"__defer"],0],["Binary",3822,1,0,["Ident",3822,14,0,"index"],"=","Const",3822,23,0,0],["Binary",3823,1,0,["Ident",3823,14,0,"iterStopped"],"=","Const",3823,29,0,!1],["Func",3824,1,0,["Ident",3824,6,0,"handle"],[["Ident",3824,14,0,"item"],["Ident",3824,19,0,"index"]],[],[],"BlockStatement",3825,1,0,0,["Unary",897,11,0,"++","Ident",3825,1,0,"slotsUsed"],["Return",3826,1,0,"Call",3826,1,0,["Binary",3826,1,0,["Call",3826,1,0,["Ident",3826,1,0,"body"],0,["Ident",3826,10,0,"item"],["Ident",3826,15,0,"index"]],".","Const",3826,23,0,"then"],0,["Func",3827,8,0,0,[["Ident",3827,9,0,"value"]],[],[],"BlockStatement",3828,1,0,0,["Binary",3828,1,0,["Binary",3828,1,0,["Ident",3828,1,0,"result"],".","Ident",3828,16,0,"index"],"=","Ident",3828,25,0,"value"],["Unary",899,11,0,"--","Ident",3829,1,0,"slotsUsed"],["Return",3830,1,0,"Call",3830,1,0,["Ident",3830,1,0,"flush"],0]],["Func",3831,8,0,0,[["Ident",3831,9,0,"reason"]],[],[],"BlockStatement",3832,1,0,0,["Binary",3832,1,0,["Ident",3832,1,0,"done"],"=","Const",3832,16,0,!0],["Return",3833,1,0,"Call",3833,1,0,["Binary",3833,1,0,["Ident",3833,1,0,"defer"],".","Const",3833,15,0,"reject"],0,["Ident",3833,22,0,"reason"]]]]],["Func",3834,1,0,["Ident",3834,6,0,"flush"],[],["item"],[],"BlockStatement",3835,1,0,0,["For",1118,1,0,0,0,["Binary",3835,10,0,["Binary",3835,10,0,["Unary",3835,10,0,"!","Ident",3835,14,0,"done"],"&&","Unary",3835,23,0,"!","Ident",3835,27,0,"iterStopped"],"&&","Binary",723,13,0,["Ident",3835,44,0,"slotsUsed"],"<","Ident",3835,57,0,"limit"],0,"BlockStatement",3836,1,0,0,["Binary",3836,1,0,["Ident",3836,18,0,"item"],"=","Const",3836,25,0],["TryCatch",3837,1,0,0,["Binary",3838,1,0,["Ident",3838,1,0,"item"],"=","Call",3838,16,0,["Binary",3838,16,0,["Ident",3838,16,0,"iterator"],".","Const",3838,26,0,"next"],0],["Ident",3839,12,0,"e"],"BlockStatement",3840,1,0,0,["Binary",3840,1,0,["Ident",3840,1,0,"done"],"=","Const",3840,16,0,!0],["Call",3841,1,0,["Binary",3841,1,0,["Ident",3841,1,0,"defer"],".","Const",3841,15,0,"reject"],0,["Ident",3841,22,0,"e"]],["Return",3842,1,0,"Const",3842,1,0]],["IfStatement",3844,1,0,0,["Binary",3844,9,0,["Ident",3844,9,0,"item"],".","Const",3844,15,0,"done"],["BlockStatement",3845,1,0,0,["Binary",3845,1,0,["Ident",3845,1,0,"iterStopped"],"=","Const",3845,24,0,!0],["Break",3846,1,0]]],["Call",3848,1,0,["Ident",3848,1,0,"handle"],0,["Binary",3848,14,0,["Ident",3848,14,0,"item"],".","Const",3848,19,0,"value"],["Unary",3848,25,0,"++post","Ident",3848,35,0,"index"]]],["IfStatement",3850,1,0,0,["Binary",3850,7,0,["Binary",3850,7,0,["Unary",3850,7,0,"!","Ident",3850,11,0,"done"],"&&","Binary",3850,20,0,["Ident",3850,20,0,"slotsUsed"],"===","Const",3850,35,0,0],"&&","Ident",3850,40,0,"iterStopped"],["BlockStatement",3851,1,0,0,["Binary",3851,1,0,["Ident",3851,1,0,"done"],"=","Const",3851,14,0,!0],["Return",3852,1,0,"Call",3852,1,0,["Binary",3852,1,0,["Ident",3852,1,0,"defer"],".","Const",3852,13,0,"fulfill"],0,["Ident",3852,21,0,"result"]]]]],["Call",3853,1,0,["Ident",3853,1,0,"setImmediate"],0,["Ident",3853,17,0,"flush"]],["Return",3854,1,0,"Binary",3854,1,0,["Ident",3854,1,0,"defer"],".","Const",3854,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__promiseIter","__typeof","setImmediate"]}},assignOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isComplex(left)||this.isAccess(left)&&!this.isComplex(this.parent(left))&&!this.isComplex(this.child(left))){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"=",n);},true);}else{return this.assign(left,"=",right);}};}.call(this));',operators:":=",options:{type:"right"},id:30},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",10884,1,311,{left:__wrap(setLeft),inverted:false,op:"and",right:__node("MacroAccess",10900,30,311,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"and=",id:43},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",11000,2,315,{left:__wrap(setLeft),inverted:false,op:"or",right:__node("MacroAccess",11015,30,315,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"or=",id:44},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~*="){return _this.assign(left,"*=",n);}else if(op==="~/="){return _this.assign(left,"/=",n);}else{return _this.assign(left,"%=",n);}},true);}else if(op==="~*="){return this.assign(left,"*=",right);}else if(op==="~/="){return this.assign(left,"/=",right);}else{return this.assign(left,"%=",right);}};}.call(this));',operators:["~*=","~/=","~%="],options:{type:"number"},id:46},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",11962,30,350,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",11975,45,350,{left:__wrap(left),inverted:false,op:"~\\\\",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"~\\=",options:{type:"number"},id:47},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",13617,30,404,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",13630,50,404,{left:__wrap(left),inverted:false,op:"~^",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"~^=",options:{type:"number"},id:51},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("++",left);}else if(value===-1){return this.unary("--",left);}else if(typeof value==="number"&&!this.isType(left,"numeric")){return this.assign(left,"-=",this["const"](-value));}}if(this.isType(left,"numeric")){if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(!_this.isType(n,"numeric")){n=__node("MacroAccess",14158,48,420,{op:"~+",node:__wrap(n)},"expression",false,false,false);}return _this.assign(left,"+=",n);},true);}else{if(!this.isType(right,"numeric")){right=__node("MacroAccess",14269,48,424,{op:"~+",node:__wrap(right)},"expression",false,false,false);}return this.assign(left,"+=",right);}}else if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",__node("MacroAccess",14447,48,428,{op:"~-",node:__wrap(n)},"expression",false,false,false));},true);}else{return this.assign(left,"-=",__node("MacroAccess",14499,48,430,{op:"~-",node:__wrap(right)},"expression",false,false,false));}};}.call(this));',operators:"~+=",options:{type:"number"},id:52},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("--",left);}else if(value===-1){return this.unary("++",left);}}if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",n);},true);}else{return this.assign(left,"-=",right);}};}.call(this));',operators:"~-=",options:{type:"number"},id:53},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitlshift="){return _this.assign(left,"<<=",n);}else if(op==="~bitrshift="){return _this.assign(left,">>=",n);}else{return _this.assign(left,">>>=",n);}},true);}else if(op==="~bitlshift="){return this.assign(left,"<<=",right);}else if(op==="~bitrshift="){return this.assign(left,">>=",right);}else{return this.assign(left,">>>=",right);}};}.call(this));',operators:["~bitlshift=","~bitrshift=","~biturshift="],options:{type:"number"},id:55},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(_this.hasType(left,"numeric")&&_this.hasType(n,"numeric")){n=__node("MacroAccess",15899,29,473,{left:__node("Const",15900,""),inverted:false,op:"~&",right:__node("Ident",15905,"n")},"expression",false,false,false);}return _this.assign(left,"+=",n);},true);}else{if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){right=__node("MacroAccess",16033,29,477,{left:__node("Const",16034,""),inverted:false,op:"~&",right:__node("Ident",16039,"right")},"expression",false,false,false);}return this.assign(left,"+=",right);}};}.call(this));',operators:"~&=",options:{type:"string"},id:56},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",18310,30,564,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",18323,62,564,{left:__wrap(left),inverted:false,op:"^",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"^=",options:{type:"number"},id:63},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",19165,30,595,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",19178,64,595,{left:__wrap(left),inverted:false,op:"\\\\",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"\\=",options:{type:"number"},id:68},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"string")){return __node("MacroAccess",19673,56,612,{left:__wrap(left),op:"~&=",right:__node("MacroAccess",19683,69,612,{left:__node("Const",19684,""),inverted:false,op:"&",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",19762,30,615,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",19775,69,615,{left:__wrap(left),inverted:false,op:"&",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});}};}.call(this));',operators:"&=",options:{type:"string"},id:70},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",25331,16,794,{macroName:"if",macroData:{test:__node("MacroAccess",25334,10,794,{left:__wrap(setLeft),inverted:false,op:"~>",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",25365,30,794,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"~min=",id:86},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",25587,16,800,{macroName:"if",macroData:{test:__node("MacroAccess",25590,9,800,{left:__wrap(setLeft),inverted:false,op:"~<",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",25621,30,800,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"~max=",id:87},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",25842,16,806,{macroName:"if",macroData:{test:__node("MacroAccess",25845,79,806,{left:__wrap(setLeft),inverted:false,op:">",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",25875,30,806,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"min=",id:88},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",26096,16,812,{macroName:"if",macroData:{test:__node("MacroAccess",26099,78,812,{left:__wrap(setLeft),inverted:false,op:"<",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",26129,30,812,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"max=",id:89},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",26247,30,816,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",26260,84,816,{left:__wrap(left),inverted:false,op:"xor",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"xor=",id:90},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){if(_this.position==="expression"){return __node("MacroAccess",26450,16,822,{macroName:"if",macroData:{test:__node("MacroAccess",26453,20,822,{op:"?",node:__wrap(setLeft)},"expression",false,false,false),body:__wrap(leftValue),elseIfs:[],elseBody:__node("MacroAccess",26488,30,822,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)}},"expression",false,false,false);}else{return __node("MacroAccess",26527,17,824,{macroName:"if",macroData:{test:__node("MacroAccess",26530,3,824,{op:"not",node:__node("MacroAccess",26534,20,824,{op:"?",node:__wrap(setLeft)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",26546,30,825,{left:__wrap(left),op:":=",right:__wrap(right)},"statement",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"statement",false,false,false);}});});};}.call(this));',operators:"?=",id:91},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitand="){return _this.assign(left,"&=",n);}else if(op==="~bitor="){return _this.assign(left,"|=",n);}else{return _this.assign(left,"^=",n);}},true);}else if(op==="~bitand="){return this.assign(left,"&=",right);}else if(op==="~bitor="){return this.assign(left,"|=",right);}else{return this.assign(left,"^=",right);}};}.call(this));',operators:["~bitand=","~bitor=","~bitxor="],options:{type:"number"},id:95},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(op==="*="){return __node("MacroAccess",28527,46,891,{left:__wrap(left),op:"~*=",right:__node("MacroAccess",28537,60,891,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="/="){return __node("MacroAccess",28579,46,893,{left:__wrap(left),op:"~/=",right:__node("MacroAccess",28589,60,893,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="%="){return __node("MacroAccess",28631,46,895,{left:__wrap(left),op:"~%=",right:__node("MacroAccess",28641,60,895,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="+="){return __node("MacroAccess",28683,52,897,{left:__wrap(left),op:"~+=",right:__node("MacroAccess",28693,60,897,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="-="){return __node("MacroAccess",28735,53,899,{left:__wrap(left),op:"~-=",right:__node("MacroAccess",28745,60,899,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitlshift="){return __node("MacroAccess",28795,55,901,{left:__wrap(left),op:"~bitlshift=",right:__node("MacroAccess",28813,60,901,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitrshift="){return __node("MacroAccess",28863,55,903,{left:__wrap(left),op:"~bitrshift=",right:__node("MacroAccess",28881,60,903,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="biturshift="){return __node("MacroAccess",28932,55,905,{left:__wrap(left),op:"~biturshift=",right:__node("MacroAccess",28951,60,905,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitand="){return __node("MacroAccess",28998,95,907,{left:__wrap(left),op:"~bitand=",right:__node("MacroAccess",29013,60,907,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitor="){return __node("MacroAccess",29059,95,909,{left:__wrap(left),op:"~bitor=",right:__node("MacroAccess",29073,60,909,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitxor="){return __node("MacroAccess",29120,95,911,{left:__wrap(left),op:"~bitxor=",right:__node("MacroAccess",29135,60,911,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return this.error("Unknown operator "+op);}}else{return this.maybeCacheAccess(left,function(setLeft,left){var action;if(op==="*="){action=__node("MacroAccess",29293,64,917,{left:__wrap(left),inverted:false,op:"*",right:__wrap(right)},"expression",false,false,false);}else if(op==="/="){action=__node("MacroAccess",29346,64,919,{left:__wrap(left),inverted:false,op:"/",right:__wrap(right)},"expression",false,false,false);}else if(op==="%="){action=__node("MacroAccess",29399,64,921,{left:__wrap(left),inverted:false,op:"%",right:__wrap(right)},"expression",false,false,false);}else if(op==="+="){action=__node("MacroAccess",29452,66,923,{left:__wrap(left),inverted:false,op:"+",right:__wrap(right)},"expression",false,false,false);}else if(op==="-="){action=__node("MacroAccess",29505,66,925,{left:__wrap(left),inverted:false,op:"-",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitlshift="){action=__node("MacroAccess",29566,67,927,{left:__wrap(left),inverted:false,op:"bitlshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitrshift="){action=__node("MacroAccess",29635,67,929,{left:__wrap(left),inverted:false,op:"bitrshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="biturshift="){action=__node("MacroAccess",29705,67,931,{left:__wrap(left),inverted:false,op:"biturshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitand="){action=__node("MacroAccess",29772,96,933,{left:__wrap(left),inverted:false,op:"bitand",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitor="){action=__node("MacroAccess",29834,97,935,{left:__wrap(left),inverted:false,op:"bitor",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitxor="){action=__node("MacroAccess",29896,98,937,{left:__wrap(left),inverted:false,op:"bitxor",right:__wrap(right)},"expression",false,false,false);}else{action=_this.error("Unknown operator "+op);}return __node("MacroAccess",29979,30,940,{left:__wrap(setLeft),op:":=",right:__wrap(action)},"expression",false,false,false);});}};}.call(this));',operators:["*=","/=","%=","+=","-=","bitlshift=","bitrshift=","biturshift=","bitand=","bitor=","bitxor="],options:{type:"number"},id:103}],defineSyntax:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var asType,ident,isMutable;isMutable=macroData.isMutable;ident=macroData.ident;asType=macroData.asType;if(this.isIdentOrTmp(ident)){return {type:"ident",isMutable:isMutable==="mutable",ident:ident,asType:asType};}else{return ident;}};}.call(this));',options:{name:"DeclarableIdent"},params:[["ident","isMutable","many","?","const","mutable"],["ident","ident","ident","Identifier"],["ident","asType","many","?","sequence",["const","as"],["this","ident","Type"]]],id:31},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"array",elements:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableArray"},params:[["const","["],["ident","head","choice",["ident","Declarable"],["const",""]],["ident","tail","many","*","sequence",["const",","],["this","choice",["ident","Declarable"],["const",""]]],["const","]"]],id:32},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var value;value=macroData.value;value=this.macroExpand1(value);return {key:this.name(value.ident),value:value};};}.call(this));',options:{name:"DeclarableObjectSingularPair"},params:[["ident","value","ident","DeclarableIdent"]],id:33},{options:{name:"DeclarableObjectDualPair"},params:[["this","sequence",["ident","key","ident","ObjectKey"],["const",":"],["ident","value","ident","Declarable"]]],id:34},{options:{name:"DeclarableObjectPair"},params:[["this","choice",["ident","DeclarableObjectDualPair"],["ident","DeclarableObjectSingularPair"]]],id:35},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"object",pairs:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableObject"},params:[["const","{"],["ident","head","ident","DeclarableObjectPair"],["ident","tail","many","*","sequence",["const",","],["this","ident","DeclarableObjectPair"]],["const","}"]],id:36},{options:{name:"Declarable"},params:[["this","choice",["ident","DeclarableArray"],["ident","DeclarableObject"],["ident","DeclarableIdent"]]],id:37}],call:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var head,macroData,macroName,tail,tmp;macroName=macroFullData.macroName;macroData=macroFullData.macroData;head=macroData[0];tail=arguments[0].macroData.slice(1);if(tail.length===0){return __wrap(head);}else if(this.position==="statement"){tmp=this.tmp("ref");return __node("Block",16857,[__node("MacroAccess",16857,38,506,{macroName:"let",macroData:{declarable:__node("MacroAccess",16866,37,506,__node("MacroAccess",16866,31,506,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(head)}},"statement",false,false,false),__wrap(tail),__wrap(tmp)],null);}else{return __node("Call",16917,__node("Ident",16917,"__first"),[__wrap(head),__wrap(tail)],false,false);}};}.call(this));',names:"first!",id:58},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,finish,macroData,macroName,start;macroName=macroFullData.macroName;macroData=macroFullData.macroData;start=arguments[0].macroData.slice(0,-1);finish=(_ref=arguments[0].macroData)[_ref.length-1];if(start.length===0){return __wrap(finish);}else{return __node("Block",17171,[__wrap(start),__wrap(finish)],null);}};}.call(this));',names:"last!",id:59},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,ran,silentFail;macroName=macroFullData.macroName;macroData=macroFullData.macroData;func=macroData[0];silentFail=macroData[1];if(this.isFunc(func)){body=this.funcBody(func);ran=this.tmp("once",true,"boolean");func=this.rewrap(this.func(this.funcParams(func),__node("Block",79506,[__node("MacroAccess",79506,17,2379,{macroName:"if",macroData:{test:__wrap(ran),body:__node("MacroAccess",79522,17,2380,{macroName:"if",macroData:{test:__wrap(silentFail),body:__node("MacroAccess",79548,39,2381,{macroName:"return",macroData:{}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",79582,11,2383,{op:"throw",node:__node("Call",79599,__node("Ident",79599,"Error"),[__node("Const",79606,"Attempted to call function more than once")],false,false)},"statement",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",79663,30,2385,{left:__wrap(ran),op:":=",right:__const("true")},"statement",false,false,false)}},"statement",false,false,false),__wrap(body)],null),this.funcIsAutoReturn(func),this.funcIsBound(func),this.funcIsCurried(func),this.funcAsType(func),this.funcIsGenerator(func),this.funcGeneric(func)));return __node("Block",79876,[__node("MacroAccess",79876,38,2394,{macroName:"let",macroData:{declarable:__node("MacroAccess",79885,37,2394,__node("MacroAccess",79885,31,2394,{isMutable:"mutable",ident:__wrap(ran)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false),__wrap(func)],null);}else if(this.isConst(silentFail)&&!this.value(silentFail)){return __node("Call",79994,__node("Ident",79994,"__once"),[__wrap(func)],false,false);}else{return __node("Call",80027,__node("Ident",80027,"__once"),[__wrap(func),__wrap(silentFail)],false,false);}};}.call(this));',names:"once!",id:126},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("fulfilled! only expects one argument");}return this.mutateLast(node||this.noop(),function(n){return __node("Call",118776,__node("Access",118776,__node("Ident",118776,"__defer"),__node("Const",118785,"fulfilled")),[__wrap(n)],false,false);},true);};}.call(this));',names:"fulfilled!",id:156},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("rejected! only expects one argument");}return this.mutateLast(node||this.noop(),function(n){return __node("Call",118951,__node("Access",118951,__node("Ident",118951,"__defer"),__node("Const",118960,"rejected")),[__wrap(n)],false,false);},true);};}.call(this));',names:"rejected!",id:157},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("from-promise! only expects one argument");}return __node("Call",119287,__node("Ident",119287,"__fromPromise"),[__wrap(node)],false,false);};}.call(this));',names:"fromPromise!",id:158},{code:'return (function(){"use strict";var __num,__slice,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,args,func,head,macroData,macroName,node,tail;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("to-promise! only expects one argument");}if(!this.isCall(node)){this.error("to-promise! call expression must be a call",node);}func=this.callFunc(node);args=this.callArgs(node);if(this.callIsNew(node)){args=this.array(args);return __node("Call",119839,__node("Ident",119839,"__toPromise"),[__node("Ident",119853,"__new"),__wrap(func),__wrap(args)],false,false);}else if(this.callIsApply(node)){if(args.length===0||!this.isSpread(args[0])){head=args[0];tail=this.array(__slice.call(args,1));return __node("Call",120028,__node("Ident",120028,"__toPromise"),[__wrap(func),__wrap(head),__wrap(tail)],false,false);}else{return this.maybeCache(this.array(args),function(setArgs,args){return __node("Call",120134,__node("Ident",120134,"__toPromise"),[__wrap(func),__node("Access",120154,__wrap(setArgs),__node("Const",120165,0)),__node("Call",120168,__node("Access",120168,__wrap(args),__node("Const",120175,"slice")),[__node("Const",120181,1)],false,false)],false,false);});}}else{args=this.array(args);if(this.isAccess(func)){return this.maybeCache(this.parent(func),function(setParent,parent){var child;child=_this.child(func);return __node("Call",120340,__node("Ident",120340,"__toPromise"),[__node("Access",120354,__wrap(setParent),__wrap(child)),__wrap(parent),__wrap(args)],false,false);});}else{return __node("Call",120409,__node("Ident",120409,"__toPromise"),[__wrap(func),__const("void"),__wrap(args)],false,false);}}};}.call(this));',options:{type:"promise"},names:"toPromise!",id:159},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("some-promise! only expects one argument");}if(!this.hasType(node,"array")){this.error("some-promise! should be used on an Array",node);}return __node("Call",121231,__node("Ident",121231,"__somePromise"),[__wrap(node)],false,false);};}.call(this));',names:"somePromise!",id:160},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("some-promise! only expects one argument");}if(!this.hasType(node,"array")&&!this.hasType(node,"object")){this.error("every-promise! should be used on an Array or Object",node);}return __node("Call",122069,__node("Ident",122069,"__everyPromise"),[__wrap(node)],false,false);};}.call(this));',names:"everyPromise!",id:161},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var hasValue,macroData,macroName,milliseconds,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;milliseconds=macroData[0];value=macroData[1];if(!this.hasType(milliseconds,"number")){this.error("delay! should take a number in milliseconds");}hasValue=!this.isConst(value)||this.value(value)!==void 0;if(this.isConst(milliseconds)&&typeof this.value(milliseconds)==="number"&&__num(this.value(milliseconds))<=0){if(hasValue){return __node("Call",122634,__node("Access",122634,__node("Ident",122634,"__defer"),__node("Const",122643,"fulfilled")),[__wrap(value)],false,false);}else{return __node("Call",122679,__node("Access",122679,__node("Ident",122679,"__defer"),__node("Const",122688,"fulfilled")),[],false,false);}}else if(hasValue){return __node("Call",122734,__node("Ident",122734,"__delay"),[__wrap(milliseconds),__wrap(value)],false,false);}else{return __node("Call",122784,__node("Ident",122784,"__delay"),[__wrap(milliseconds)],false,false);}};}.call(this));',names:"delay!",id:162}]})
}("undefined"!=typeof module&&"function"==typeof require?require:void 0);"function"==typeof define&&define.amd?define(function(){return b}):a.GorillaScript=b}(this),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;b=function(a,b,c,d,e){function g(a,b){k||(--n,null!=a&&null==i&&(i=a),c&&null==i&&arguments.length>1&&m.push(b),o||h())}function h(){for(;!k&&null==i&&a>n&&++l<b;)++n,o=!0,d(l,f(g)),o=!1;k||null==i&&0!==n||(k=!0,null!=i?e(i):e(null,m))}var i,k,l,m,n,o;if("number"!=typeof a)throw TypeError("Expected limit to be a Number, got "+j(a));if("number"!=typeof b)throw TypeError("Expected length to be a Number, got "+j(b));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected hasResult to be a Boolean, got "+j(c));if("function"!=typeof d)throw TypeError("Expected onValue to be a Function, got "+j(d));if("function"!=typeof e)throw TypeError("Expected onComplete to be a Function, got "+j(e));return m=c?[]:null,0>=b?e(null,m):((1>a||a!==a)&&(a=1/0),i=null,n=0,o=!1,k=!1,l=-1,h(),void 0)},c=function(a){if("object"!=typeof a||null===a)throw TypeError("Expected promise to be an Object, got "+j(a));if("function"!=typeof a.then)throw TypeError("Expected promise.then to be a Function, got "+j(a.then));return function(b){a.then(function(a){return k(b,null,a)},function(a){return k(b,a)})}},d="function"==typeof Array.isArray?Array.isArray:function(){var a;return a=Object.prototype.toString,function(b){return"[object Array]"===a.call(b)}}(),e=function(a){if("number"!=typeof a)throw TypeError("Expected a number, got "+j(a));return a},f=function(){function a(){throw Error("Attempted to call function more than once")}function b(){}return function(c,d){if("function"!=typeof c)throw TypeError("Expected func to be a Function, got "+j(c));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected silentFail to be a Boolean, got "+j(d));return function(){var e;return e=c,c=d?b:a,e.apply(this,arguments)}}}(),g=Array.prototype.slice,h=function(a){var b;if(b=typeof a,"string"===b)return a;if("number"===b)return String(a);throw TypeError("Expected a string or number, got "+j(a))},i=function(a){if(null==a)throw TypeError("Expected an object, got "+j(a));return d(a)?a:"string"==typeof a?a.split(""):g.call(a)},j=function(){var a;return a=Object.prototype.toString,function(b){return void 0===b?"Undefined":null===b?"Null":b.constructor&&b.constructor.name||a.call(b).slice(8,-1)}}(),k="function"==typeof a.setImmediate?a.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var a;return a=process.nextTick,function(b){var c;if("function"!=typeof b)throw TypeError("Expected func to be a Function, got "+j(b));return c=g.call(arguments,1),c.length?a(function(){b.apply(void 0,i(c))}):a(b)}}():function(a){var b;if("function"!=typeof a)throw TypeError("Expected func to be a Function, got "+j(a));return b=g.call(arguments,1),b.length?setTimeout(function(){a.apply(void 0,i(b))},0):setTimeout(a,0)},jQuery(function(a){function d(){if(o)try{return Function(o)()}catch(a){return alert(String(a)),void 0}}function f(a){return function(){try{return a.apply(this,arguments)}catch(b){k(function(){throw b})}return!1}}function g(){return m||n||l?void 0:a("#toc").removeClass("hover")}function i(){var c;return Prism.languages.gorillascript?(c=a('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),b(1,e(c.length),!1,function(a,b){var d;return d=c[a],Prism.highlightElement(d),k(b)},function(){})):setTimeout(i,17)}var j,l,m,n,o,p;return a("#try-link").removeClass("hide"),j=function(){function b(){var b,e;return d?(j(),void 0):(e=a("#try-input").val(),d=!0,c(GorillaScript.compile(e))((b=!1,function(c,e){if(b)throw Error("Attempted to call function more than once");return b=!0,d=!1,c?(a("#try-input-wrap").addClass("error"),o="// Error: "+String(c)):(a("#try-input-wrap").removeClass("error"),o=e.code),a("#try-output").val(o)})))}var d,e;return d=!1,function(){return null!=e&&clearTimeout(e),e=setTimeout(b,250)}}(),setInterval(function(){var b;return b="",function(){var c;return c=a("#try-input").val(),c!==b?(b=c,j()):void 0}}(),17),a("a[href=#try]").click(f(function(){var b;return j(),b=a("#try"),b.slideToggle(),a("#run-link").toggleClass("hide"),!1})),a("a[href=#run]").click(f(function(){return d(),!1})),a("#irc-button").click(f(function(){var b;return b=a(this).data("url"),a(this).replaceWith(a("<iframe id='irc-iframe' src='"+h(b)+"'></iframe>")),!1})),l="ontouchstart"in window,n=!1,m=!1,a("#toc").removeClass("hover"),l||(a("#toc-label").addClass("no-touch").bind("touchstart",f(function(){return l=!0,a(this).removeClass("no-touch"),!0})),a("#toc-label").hover(f(function(){return l?void 0:(n=!0,a("#toc").addClass("hover"))}),f(function(){return l?void 0:(n=!1,setTimeout(g,17))})),a("#toc").hover(f(function(){return l?void 0:(m=!0,a("#toc").addClass("hover"))}),f(function(){return l?void 0:(m=!1,setTimeout(g,17))}))),a("#toc-label a").click(f(function(){return k(function(){return a("#toc").toggleClass("hover"),setTimeout(g,17)}),!1})),p=function(){function a(){var e,f,g,h;if(0!==b.length&&!d)return d=!0,g=b.shift(),h=g.gsCode,e=g.$jsCode,c(GorillaScript.compile(h,{"return":!0,bare:!0}))((f=!1,function(b,c){var g,h;if(f)throw Error("Attempted to call function more than once");return f=!0,g=e.find("code"),g.text(null!=b?"// Error: "+String(b):c.code),k((h=!1,function(){if(h)throw Error("Attempted to call function more than once");return h=!0,Prism.highlightElement(g[0]),d=!1,a()}))}))}var b,d;return b=[],d=!1,function(c,d){return d.find("code").text("// Compiling..."),b.push({gsCode:c,$jsCode:d}),a()}}(),a(".gs-code").each(function(){var b,c;return c=a(this),c.hasClass("no-convert")?void 0:(b=a("<div>"),c.replaceWith(b),b.append(a("<ul class='tabs'><li class='gs-tab active'><a href='#'>GorillaScript</a><li class='js-tab'><a href='#'>JavaScript</a></ul>")),b.append(c),b.find(".tabs a").on("click",f(function(){var d;return b.find(".tabs li").removeClass("active"),a(this).parent().addClass("active"),a(this).parent().hasClass("gs-tab")?(b.find(".js-code").hide(),b.find(".gs-code").show()):(b.find(".gs-code").hide(),d=b.find(".js-code"),0===d.length&&(d=a("<pre class='js-code'><code class='language-javascript'></code></pre>"),b.append(d),p(c.find("code").text(),d)),d.show()),!1})))}),i()})}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this);