;!function(e){var t=function(e){function t(n){var r=Object.prototype.hasOwnProperty;if(r.call(t._cache,n))return t._cache[n];if(r.call(t,n)){var o=t[n];return delete t[n],t._cache[n]=o.call({})}return e?e(n):void 0}return t._cache={},t["./utils"]=function(){var e={exports:this},n=this;return function(e){"use strict";function r(e,t){return p(t)<1?"":1===t?e:1&p(t)?h(e)+h(r(e,p(t)-1)):r(h(e)+h(e),p(t)/2)}function o(e){var t,n;return t=x.join(e,"package.json"),w.existsSync(t)?t:(n=x.normalize(x.join(e,"..")),n!==e?o(n):void 0)}var a,s,i,l,c,u,f,p,d,_,h,m,y,g,b,w,v,x,I;a="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},s=function(e,t){function n(){var n,a,s,i,l;for(a=o,s=e-1;s>=0;--s)l=null!=(n=arguments[s])?n:r,i=a.get(l),null==i&&(i=0===s?t.apply(this,arguments):I(),a.set(l,i)),a=i;return a}var r,o,a;return o=I(),r={},a=n(),a.generic=n,a},i=function(){function e(){return!0}function t(e){return"string"==typeof e}function n(e){return"number"==typeof e}function r(e){return"function"==typeof e}function o(e){return"boolean"==typeof e}return function(a){if(null==a)return e;switch(a){case String:return t;case Number:return n;case Function:return r;case Boolean:return o;case Array:return c;case Object:return u;default:return function(e){return e instanceof a}}}}(),l="function"==typeof Array.prototype.indexOf?function(){var e;return e=Array.prototype.indexOf,function(t,n){return-1!==e.call(n,t)}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},c="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),u=function(e){return"object"==typeof e&&null!==e},f=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+y(e));return e.displayName||e.name||""},p=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+y(e));return e},d=Object.prototype.hasOwnProperty,_=Array.prototype.slice,h=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+y(e))},m=function(e){if(null==e)throw TypeError("Expected an object, got "+y(e));return c(e)?e:"string"==typeof e?e.split(""):_.call(e)},y=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),I="function"==typeof e.WeakMap?e.WeakMap:I=function(){function e(){var t;return t=this instanceof e?this:a(o),t._keys=[],t._values=[],t._chilly=[],t._uid=n(),t}function t(){return Math.random().toString(36).slice(2)}function n(){return h(t())+"-"+h((new Date).getTime())+"-"+h(t())+"-"+h(t())}function r(e){var t,n;n=this._uid,d.call(e,n)&&(t=this._chilly,-1===t.indexOf(e)&&(t.push(e),this._keys.push(e),this._values.push(e[n])))}var o,s,i;return o=e.prototype,e.displayName="WeakMap",i=Object.isExtensible||function(){return!0},o.get=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return i(e)?d.call(e,t=this._uid)?e[t]:void 0:(r.call(this,e),n=this._keys.indexOf(e),-1===n?void 0:this._values[n])},o.has=function(e){if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return i(e)?d.call(e,this._uid):(r.call(this,e),-1!==this._keys.indexOf(e))},s="function"==typeof Object.defineProperty?Object.defineProperty:function(e,t,n){e[t]=n.value},o.set=function(e,t){var n,o;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");i(e)?s(e,this._uid,{configurable:!0,writable:!0,enumerable:!1,value:t}):(r.call(this,e),o=this._keys,n=o.indexOf(e),-1===n&&(n=o.length,o[n]=e),this._values[n]=t)},o["delete"]=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");i(e)?delete e[this._uid]:(r.call(this,e),n=this._keys,t=n.indexOf(e),-1!==t&&(n.splice(t,1),this._values.splice(t,1)))},e}(),null!=(g=t("util"))&&(v=g.inspect),x=t("path"),w=t("fs"),n.stringRepeat=r,n.padLeft=function(e,t,n){return h(r(n,p(t)-p(e.length)))+h(e)},n.padRight=function(e,t,n){return h(e)+h(r(n,p(t)-p(e.length)))},n.Cache=b=s(2,function(e,t){var n,r;return n=i(e),r=i(t),function(){function o(){var e;return e=this instanceof o?this:a(s),e.weakmap=I(),e}var s;return s=o.prototype,o.displayName="Cache<"+(null!=e?f(e):"")+", "+(null!=t?f(t):"")+">",s.get=function(t){if(!n(t))throw TypeError("Expected key to be a "+f(e)+", got "+y(t));return this.weakmap.get(t)},s.getOrAdd=function(o,a){var s,i;if(!n(o))throw TypeError("Expected key to be a "+f(e)+", got "+y(o));if("function"!=typeof a)throw TypeError("Expected factory to be a Function, got "+y(a));if(i=this.weakmap,s=i.get(o),void 0===s){if(s=a(o),!r(s))throw Error("Expected factory result to be a "+f(t)+", got "+y(s));i.set(o,s)}return s},o}()}),n.quote=function(e){if("string"!=typeof e)throw TypeError("Expected value to be a String, got "+y(e));return v?v(e):-1===e.indexOf("'")?"'"+h(JSON.stringify(e).slice(1,-1))+"'":JSON.stringify(e)},n.unique=function(e){var t,n,r,o,a;for(a=[],t=m(e),n=0,r=t.length;r>n;++n)o=t[n],l(o,a)||a.push(o);return a},n.getPackageVersion=function(e){var t,n;if("string"!=typeof e||!w||!x)return"";try{t=o(x.dirname(e))}catch(r){}if(!t)return"";try{n=JSON.parse(w.readFileSync(t)).version}catch(r){}return"string"==typeof n?n:""}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./jsutils"]=function(){var e={exports:this},n=this;return function(){"use strict";var e,r,o,a,s,i,l,c,u,f,p,d,_,h;e=function(e,t){var n;if(null==e)throw TypeError("Expected parent to be an object, got "+p(e));if(n=e[t],"function"!=typeof n)throw Error("Trying to bind child '"+String(t)+"' which is not a function");return function(){return n.apply(e,arguments)}},r="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},o="function"==typeof Array.prototype.indexOf?function(){var e;return e=Array.prototype.indexOf,function(t,n){return-1!==e.call(n,t)}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},a="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),s=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},i=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+p(e));return e},l=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+p(e))},f=function(e){if(null==e)throw TypeError("Expected an object, got "+p(e));return a(e)?e:"string"==typeof e?e.split(""):c.call(e)},p=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),_=t("./utils").padLeft,d=function(){var e,t,n;return e=/^[a-zA-Z_\$][a-zA-Z_\$0-9]*$/,t=/^[a-zA-Z_\$\u00a0-\uffff][a-zA-Z_\$0-9\u00a0-\uffff]*$/,n=["arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","eval","false","finally","for","function","if","implements","import","in","Infinity","instanceof","interface","let","NaN","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],function(r,a){var s;if("string"!=typeof r)throw TypeError("Expected name to be a String, got "+p(r));if(null==a)a=!1;else if("boolean"!=typeof a)throw TypeError("Expected allowUnicode to be a Boolean, got "+p(a));return s=a?t:e,s.test(r)&&!o(r,n)}}(),h=function(){function t(e,t,n){var r;for(null==n&&(n="  "),r=0,i(t);t>r;++r)e(n)}function n(e){var t;return t=r(e),t.indent=i(e.indent)+1,t}function o(e){var t,n,r;if(null==e)return!1;if(e instanceof RegExp)return o(e.source);if(e instanceof Date)return!1;if(a(e))switch(e.length){case 0:return!1;case 1:return o(e[0]);default:return!0}else switch(typeof e){case"string":return i(e.length)>=c;case"number":case"boolean":return!1;case"object":t=-1;for(n in e)if(l.call(e,n)&&(++t,r=e[n],t>=1||o(n)||o(r)))return!0;return!1;default:return!0}}var c,m,y;return c=50,m=7,y={"null":function(e,t){t("null")},undefined:function(e,t){t("void 0")},number:function(e,t){t(0===e?1/i(e)<0?"-0":"0":isFinite(e)?String(e):e!==e?"0/0":i(e)>0?"1/0":"-1/0")},regexp:function(e,t){t("/"),t(e.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),t("/"),e.global&&t("g"),e.ignoreCase&&t("i"),e.multiline&&t("m")},string:function(){function e(e){switch(e){case"\b":return"\\b";case"	":return"\\t";case"\n":return"\\n";case"\f":return"\\f";case"\r":return"\\r";case"\n":return"\\n";case'"':return'\\"';case"'":return"\\'";case"\\":return"\\\\";default:return"\\u"+u(_(e.charCodeAt(0).toString(16),4,"0"))}}function t(t){return'"'+u(t.replace(o,e))+'"'}function n(t){return"'"+u(t.replace(a,e))+"'"}function r(e,t){return s(e.length,t.length)?e:t}var o,a;return o=/[\u0000-\u001f"\\\u0080-\uffff]/g,a=/[\u0000-\u001f'\\\u0080-\uffff]/g,function(e,o){return o(-1===e.indexOf('"')?t(e):-1===e.indexOf("'")?n(e):r(t(e),n(e)))}}(),"boolean":function(e,t){return t(e?"true":"false")},date:function(e,t){return t("new Date("),t(String(e.getTime())),t(")")},array:function(e,r,a){var s,l,c,u,p,d,_;if(u="indent"in a,0===e.length)return r("[]");if(u&&i(e.length)>1&&(i(e.length)>=m||function(){var t,n,r,a,s;for(a=!1,t=f(e),n=0,r=t.length;r>n;++n)if(s=t[n],o(s)){a=!0;break}return a}())){for(r("[\n"),c=n(a),s=f(e),p=0,_=s.length;_>p;++p)d=s[p],t(r,c.indent),h(d,r,c),_-1>p&&r(","),r("\n");return t(r,a.indent),r("]")}for(r("["),s=f(e),p=0,l=s.length;l>p;++p)d=s[p],p>0&&(r(","),u&&r(" ")),h(d,r,a);return r("]")},object:function(){function e(e,t,n){var r;d(e)?t(e):(r=Number(e),r===r&&String(r)===e?t(e):h(e,t,n))}return function(r,a,s){var i,c,u,p,d,_,y,g,b,w;i=[];for(y in r)l.call(r,y)&&(w=r[y],i.push({key:y,value:w}));if(b=i,d="indent"in s,0===b.length)return a("{}");if(d&&b.length>1&&(b.length>=m||function(){var e,t,n,r,a,s,i;for(a=!1,e=f(b),t=0,n=e.length;n>t;++t)if(s=(r=e[t]).key,i=r.value,o(s)||o(i)){a=!0;break}return a}())){for(a("{\n"),p=n(s),_=0,g=b.length;g>_;++_)y=(u=b[_]).key,w=u.value,t(a,p.indent),e(y,a,p),a(": "),h(w,a,p),g-1>_&&a(","),a("\n");return t(a,s.indent),a("}")}for(a("{"),_=0,c=b.length;c>_;++_)y=(u=b[_]).key,w=u.value,_>0&&(a(","),d&&a(" ")),e(y,a,s),a(":"),d&&a(" "),h(w,a,s);return a("}")}}()},function(t,n,r){var o,s,i;if(null==n)n=null;else if("function"!=typeof n)throw TypeError("Expected sb to be one of Function or null, got "+p(n));if(null==r&&(r={}),null==n)return s=[],h(t,e(s,"push"),r),s.join("");if(null===t)y["null"](t,n,r);else if(a(t))y.array(t,n,r);else if(t instanceof RegExp)y.regexp(t,n,r);else if(t instanceof Date)y.date(t,n,r);else{if(l.call(y,o=typeof t)&&(i=y[o]),"function"!=typeof i)throw Error("Cannot convert "+p(t)+" to JS source");i(t,n,r)}}}(),n.toJSSource=h,n.isAcceptableIdent=d}.call(this),e.exports},t["./types"]=function(){var e={exports:this};return function(){"use strict";var n,r,o,a,s,i,l,c,u,f,p,d,_,h,m,y;n=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},r="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},o="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),a=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},s=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+_(e));return e.displayName||e.name||""},i=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+_(e));return e},l=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u=function(e){if("string"!=typeof e)throw TypeError("Expected a string, got "+_(e));return e},f=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+_(e))},p=function(e){throw e},d=function(e){if(null==e)throw TypeError("Expected an object, got "+_(e));return o(e)?e:"string"==typeof e?e.split(""):c.call(e)},_=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),y=t("util"),null!=y&&(h=y.inspect),e.exports=m=function(){function e(){var t;throw t=this instanceof e?this:r(A),TypeError("Type should not be instantiated")}function t(e,t){var n,r,o;for(n=d(e),r=n.length;r--;)if(o=n[r],o.equals(t))return!0;return!1}function m(e,t){var n,r,o,a,s,l,c,u;if(e===t)return e;for(u=[],r=e.length,a=t.length,l=0,c=0;l<i(r)&&c<i(a);)n=e[l],o=t[c],s=n.compare(o),0===s?(u.push(n),++l,++c):i(s)<0?(u.push(n),++l):(u.push(o),++c);for(;l<i(r);++l)u.push(e[l]);for(;c<i(a);++c)u.push(t[c]);switch(u.length){case r:return e;case a:return t;default:return u}}function y(e,t){var n,r,o,a,s,l,c,u;if(e===t)return e;for(r=e.length,a=t.length,u=[],l=0,c=0;l<i(r)&&c<i(a);)n=e[l],o=t[c],s=n.compare(o),0===s?(u.push(n),++l,++c):i(s)<0?++l:++c;switch(u.length){case r:return e;case a:return t;default:return u}}function g(e,t){var n,r,o,a,s,l,c;if(e===t)return[];if(c=[],r=e.length,0===r)return c;if(o=t.length,0===o)return e;for(s=0,l=0;s<i(r)&&l<i(o);)n=e[s],a=n.compare(t[l]),0===a?(++s,++l):i(a)<0?(c.push(n),++s):++l;for(;s<i(r);++s)c.push(e[s]);return c.length===r?e:c}function b(e,t){var n,r,o,s;if(e===t)return!0;if(n=e.length,0===n)return!0;if(r=t.length,a(n,r)){for(o=0,s=0;s<i(r);)if(e[o].equals(t[s])){if(++o,o>=i(n))return!0;++s}else++s;return!1}return!1}function w(e,t){var n,r,o,a,s;if(n=e.length,e===t&&i(n)>0)return!0;for(r=t.length,a=0,s=0;a<i(n)&&s<i(r);){if(o=e[a].compare(t[s]),0===o)return!0;i(o)<0?++a:++s}return!1}function v(e,t){var r,o,a;if(e!==t){if(a=e.length,r=n(a,t.length))return r;for(o=0,i(a);a>o;++o)if(r=e[o].compare(t[o]))return r}return 0}function x(e,t){var n,r;if(e!==t){if(r=e.length,r!==t.length)return!1;for(n=0,i(r);r>n;++n)if(!e[n].equals(t[n]))return!1}return!0}function I(e,t){return e.compare(t)}function E(e,t){switch(e.length){case 0:return O;case 1:return e[0];default:return t&&e.sort(I),U(e)}}function C(e){var t;if("string"==typeof e)return C({type:"simple",name:e});if(t=e.type,"string"!=typeof t)throw TypeError("Unspecified type");if(l.call(S,t))return S[t](e);throw TypeError("Unknown serialization type: "+f(t))}var A,B,T,N,k,S,M,D,F,O,j,L,R,U;return A=e.prototype,e.displayName="Type",A.isSubsetOf=function(){throw Error("Not implemented: "+s(this.constructor)+".isSubsetOf()")},A.isSupersetOf=function(e){return e.isSubsetOf(this)},A.overlaps=function(){throw Error("Not implemented: "+s(this.constructor)+".overlaps()")},A.compare=function(){throw Error("Not implemented: "+s(this.constructor)+".compare()")},A.equals=function(){throw Error("Not implemented: "+s(this.constructor)+".equals()")},A.union=function(){throw Error("Not implemented: "+s(this.constructor)+".union()")},A.intersect=function(){throw Error("Not implemented: "+s(this.constructor)+".intersect()")},A.complement=function(){var e;return null==(e=this._complement)?this._complement=k(this):e},A.array=function(){var t;return null==(t=this._array)?this._array=e.generic(N,this):t},A["function"]=function(){var t,n;return n=c.call(arguments),null==(t=this._function)?this._function=e.generic.apply(e,[M,this].concat(d(n))):t},S={},e.fromJSON=C,F=function(){var e;return e=-1,function(){return++e,e}}(),R=function(e){function t(e){var n;if(n=this instanceof t?this:r(o),"string"!=typeof e)throw TypeError("Expected name to be a String, got "+_(e));return n.name=e,n.id=F(),n}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="SimpleType","function"==typeof e.extended&&e.extended(t),o.toString=function(){return this.name},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:e instanceof t?n(this.name,e.name)||n(this.id,e.id):n("SimpleType",e.constructor.displayName)},o.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this===n?this:E([this,n],!0):n.union(this)},o.intersect=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this===n?this:O:n.intersect(this)},o.isSubsetOf=function(n){var r,o,a,i;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof t)return this===n;if(n instanceof U){for(a=!1,r=d(n.types),o=r.length;o--;)if(i=r[o],this===i){a=!0;break}return a}return n instanceof k?!this.isSubsetOf(n.untype):n===B},o.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this===n:n.overlaps(this)},o.inspect=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(l.call(e,r)&&(n=!1,o=e[r],o===t))return"Type."+r;return"Type.make("+f(h(t.name))+")"}()},o.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(l.call(e,r)&&(n=!1,o=e[r],o===t))return r;throw Error("Cannot serialize custom type: "+String(t))}()},S.simple=function(t){var n;return n=t.name,l.call(e,n)&&e[n]||p(Error("Unknown type: "+String(n)))},t}(e),e.make=function(e){return R(e)},D=function(e){function t(n,a){var i,l,c;if(c=this instanceof t?this:r(u),!(n instanceof R))throw TypeError("Expected base to be a "+s(R)+", got "+_(n));if(c.base=n,!o(a))throw TypeError("Expected args to be an Array, got "+_(a));for(i=a.length;i--;)if(!(a[i]instanceof e))throw TypeError("Expected "+("args["+i+"]")+" to be a "+s(e)+", got "+_(a[i]));if(0===a.length)throw Error("Must provide at least one generic type argument");if(c.id=F(),c.args=a.slice(),c.base===N&&1===a.length){if(null!=(l=a[0]._array))return l;a[0]._array=c}else if(c.base===M&&1===a.length){if(null!=(l=a[0]._function))return l;a[0]._function=c}return c}function c(e,t){return a(e.id,t.id)?(t.base=e.base,t.args=e.args,t.id=e.id,void 0):c(t,e)}var u,f;return f=e.prototype,u=t.prototype=r(f),u.constructor=t,t.displayName="GenericType","function"==typeof e.extended&&e.extended(t),u.toString=function(){var e,t,n,r,o,a;if(null==(n=this._name)){if(this.base===N&&1===this.args.length)return this._name=this.args[0]===B?"[]":"["+String(this.args[0])+"]";if(this.base===M&&1===this.args.length)return this._name=this.args[0]===B?"->":"-> "+String(this.args[0]);for(a=[],a.push(String(this.base)),a.push("<"),e=d(this.args),o=0,t=e.length;t>o;++o)r=e[o],o>0&&(a.push(","),r!==B&&this.args[o-1]!==B&&a.push(" ")),r!==B&&a.push(String(r));return a.push(">"),this._name=a.join("")}return n},u.equals=function(e){return e===this?!0:e instanceof t?this.id===e.id?!0:this.base===e.base&&x(this.args,e.args)?(c(this,e),!0):!1:!1},u.compare=function(e){var r,o;return e===this?0:e instanceof t?this.id===e.id?0:(r=this.base.compare(e.base))?r:(o=v(this.args,e.args),o||c(this,e),o):n("GenericType",e.constructor.displayName)},u.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this.equals(n)?this:this.isSubsetOf(n)?n:n.isSubsetOf(this)?this:E([this,n],!0):n instanceof R?E([this,n],!0):n.union(this)},u.intersect=function(n){var r,o,a,l,c,u,f,p,d,h;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof t){if(this.base!==n.base)return O;if(this.equals(n))return this;if(o=this.args,h=n.args,u=o.length,u!==h.length)return O;for(c=!0,l=!0,p=[],a=0,i(u);u>a;++a)r=o[a],d=h[a],f=o[a].intersect(h[a]),c&&r!==f&&(c=!1),l&&d!==f&&(l=!1),p.push(f);return c?this:l?n:t(this.base,p)}return n instanceof R?O:n.intersect(this)},u.isSubsetOf=function(n){var r,o,a,l,c,u,f,p;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof t){if(this.base!==n.base)return!1;if(this.equals(n))return!0;if(l=this.args,f=n.args,u=l.length,u!==f.length)return!1;for(c=0,i(u);u>c;++c)if(!l[c].isSubsetOf(f[c]))return!1;return!0}if(n instanceof U){for(a=!1,r=d(n.types),o=r.length;o--;)if(p=r[o],this.isSubsetOf(p)){a=!0;break}return a}return n instanceof k?!this.isSubsetOf(n.untype):n===B},u.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this.base!==n.base?!1:this.args.length===n.args.length:n instanceof R?!1:n.overlaps(this)},u.inspect=function(e){var t,n,r,o,a;for(null!=e&&(e=i(e)-1),a=["Type.generic("],a.push(h(this.base,null,e)),t=d(this.args),n=0,r=t.length;r>n;++n)o=t[n],a.push(", "),a.push(h(o,null,e));return a.push(")"),a.join("")},u.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(l.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"generic",base:t.base,args:t.args}}()},S.generic=function(n){var r,o,a;return o=n.base,r=n.args,a=e.fromJSON(o),a===N&&1===r.length?e.fromJSON(r[0]).array():a===M&&1===r.length?e.fromJSON(r[0])["function"]():t(a,function(){var t,n,o,a,s;for(t=[],n=d(r),o=0,a=n.length;a>o;++o)s=n[o],t.push(e.fromJSON(s));return t}())},t}(e),e.generic=function(t){var n;return n=c.call(arguments,1),D("string"==typeof t?e.make(t):t,n)},L=function(e){function t(o){var a,s,i,f;if(a=this instanceof t?this:r(c),"object"!=typeof o||null===o)throw TypeError("Expected data to be an Object, got "+_(o));i=[];for(s in o)if(l.call(o,s)){if(f=o[s],!(f instanceof e))throw TypeError("Expected data["+u(JSON.stringify(s))+"] to be a Type, got "+_(f));f!==B&&i.push([s,f])}return i.sort(function(e,t){return n(e[0],t[0])}),0===i.length&&null!=e.object?e.object:(a.pairs=i,a.id=F(),a)}function o(e,t){return a(e.id,t.id)?(t.pairs=e.pairs,t.id=e.id,void 0):o(t,e)}var c,p;return p=e.prototype,c=t.prototype=r(p),c.constructor=t,t.displayName="ObjectType","function"==typeof e.extended&&e.extended(t),c.toString=function(){var e,t;return t=this,null==(e=this._name)?this._name="{"+f(function(){var e,n,r,o,a,s,i;for(e=[],n=d(t.pairs),r=0,o=n.length;o>r;++r)s=(a=n[r])[0],i=a[1],e.push(f(s)+": "+String(i));return e}().join(", "))+"}":e},c.equals=function(e){var n,r,a,s,i,l,c;if(e===this)return!0;if(e instanceof t){if(c=this.pairs,i=e.pairs,c===i)return!0;if(c.length!==i.length)return!1;for(n=d(c),a=0,r=n.length;r>a;++a)if(l=n[a],s=i[a],l[0]!==s[0]||!l[1].equals(s[1]))return!1;return o(this,e),!0}return!1},c.compare=function(e){var r,a,s,i,l,c,u,f;if(this===e)return 0;if(e instanceof t){if(f=this.pairs,c=e.pairs,f===c)return 0;if(s=n(f.length,c.length))return s;for(r=d(f),i=0,a=r.length;a>i;++i)if(u=r[i],l=c[i],s=n(u[0],l[0])||u[1].compare(l[1]))return s;return o(this,e),0}return n("ObjectType",e.constructor.displayName)},c.union=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?this.equals(n)?this:this.isSubsetOf(n)?n:n.isSubsetOf(this)?this:E([this,n],!0):n instanceof R||n instanceof D?E([this,n],!0):n.union(this)},c.intersect=function(n){var r,o,a,i,c,u,f;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof t){if(this.equals(n))return this;if(this.isSubsetOf(n))return this;if(n.isSubsetOf(this))return n;for(u={},r=d(this.pairs),o=0,a=r.length;a>o;++o)c=(i=r[o])[0],f=i[1],u[c]=f;for(r=d(n.pairs),o=0,a=r.length;a>o;++o)c=(i=r[o])[0],f=i[1],u[c]=l.call(u,c)?u[c].intersect(f):f;return t(u)}return n instanceof R||n instanceof D?O:n.intersect(this)},c.isSubsetOf=function(n){var r,l,c,u,f,p,h,m,y,g,b,w,v;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof t){if(this===n||n===e.object)return!0;if(this===e.object)return!1;if(w=this.pairs,y=n.pairs,w===n.pairs)return!0;for(p=0,h=w.length,r=d(y),l=0,c=r.length;c>l;++l)for(m=(u=r[l])[0],g=u[1];p<=i(h);++p){if(p===h)return!1;if(b=w[p],b[0]===m){if(b[1].isSubsetOf(g)){++p;break}return!1}if(!a(b[0],m))return!1}return p===h&&o(this,n),!0}if(n instanceof U){for(f=!1,r=d(n.types),l=r.length;l--;)if(v=r[l],this.isSubsetOf(v)){f=!0;break}return f}return n instanceof k?!this.isSubsetOf(n.untype):n===B},c.overlaps=function(n){if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof t?!0:n instanceof R||n instanceof D?!1:n.overlaps(this)},c.value=function(t){var n,r,o,a;if("string"!=typeof t)throw TypeError("Expected key to be a String, got "+_(t));for(n=d(this.pairs),r=n.length;r--;){if(o=n[r],a=o[0],a===t)return o[1];if(t>a)return e.any}return e.any},c.inspect=function(t){var n,r,o,a,s,l,c;if(this===e.object)return"Type.object";for(l={},n=d(this.pairs),r=0,o=n.length;o>r;++r)s=(a=n[r])[0],c=a[1],l[s]=c;return"Type.makeObject("+f(h(l,null,null!=t?i(t)-1:null))+")"},c.toJSON=function(){var e,t,n,r,o,a,s;if(0===this.pairs.length)return"object";for(a={},e=d(this.pairs),t=0,n=e.length;n>t;++t)o=(r=e[t])[0],s=r[1],a[o]=s;return{type:"object",pairs:a}},S.object=function(n){var r,o,a,s;a=n.pairs,r={};for(o in a)l.call(a,o)&&(s=a[o],r[o]=e.fromJSON(s));return t(r)},t}(e),e.makeObject=function(e){return L(e)},U=function(e){function c(t){var n,a;if(a=this instanceof c?this:r(g),!o(t))throw TypeError("Expected types to be an Array, got "+_(t));for(n=t.length;n--;)if(!(t[n]instanceof e))throw TypeError("Expected "+("types["+n+"]")+" to be a "+s(e)+", got "+_(t[n]));if(a.types=t,t.length<=1)throw Error("Must provide at least 2 types to UnionType");return a.id=F(),a}function u(e,t){return a(e.id,t.id)?(t.types=e.types,t.id=e.id):u(t,e)}var p,g;return p=e.prototype,g=c.prototype=r(p),g.constructor=c,c.displayName="UnionType","function"==typeof e.extended&&e.extended(c),g.toString=function(){var e;return null==(e=this._name)?this._name="("+f(this.types.join("|"))+")":e},g.equals=function(e){return e===this?!0:e instanceof c?this.id===e.id?!0:this.types===e.types||x(this.types,e.types)?(u(this,e),!0):!1:!1},g.compare=function(e){var t;return e===this?0:e instanceof c?this.id===e.id?0:this.types===e.types?(u(this,e),0):(t=v(this.types,e.types),0===t&&u(this,e),t):n("UnionType",e.constructor.displayName)},g.union=function(t){var n,r,o,a,i,l;if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));if(t instanceof R||t instanceof D)return l=m(this.types,[t]),l===this.types?this:E(l);if(t instanceof L){if(t===e.object){for(a=[t],n=d(this.types),r=0,o=n.length;o>r;++r)if(i=n[r],i instanceof L){if(i===e.object)return this}else a.push(i);return E(a)}for(a=[t],n=d(this.types),r=0,o=n.length;o>r;++r)if(i=n[r],i instanceof L){if(t.isSubsetOf(i))return this;i.isSubsetOf(t)||a.push(i)}else a.push(i);return E(a)}return t instanceof c?(l=m(this.types,t.types),l===this.types?this:l===t.types?t:E(l)):t.union(this)},g.intersect=function(t){var n;if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));return t instanceof R||t instanceof D||t instanceof L?E(y(this.types,[t])):t instanceof c?(n=y(this.types,t.types),n===this.types?this:n===t.types?t:E(n)):t.intersect(this)},g.isSubsetOf=function(t){if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));return t instanceof c?b(this.types,t.types):t instanceof k?!this.overlaps(t.untype):t===B},g.overlaps=function(n){var r,o,a,i;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));if(n instanceof R)return t(this.types,n);if(n instanceof D||n instanceof L){for(a=!1,r=d(this.types),o=r.length;o--;)if(i=r[o],i.overlaps(n)){a=!0;break}return a}return n instanceof c?w(this.types,n.types):n.overlaps(this)},g.inspect=function(e){var t;return t=this,"("+f(function(){var n,r,o,a,s;for(n=[],r=d(t.types),o=0,a=r.length;a>o;++o)s=r[o],n.push(h(s,null,null!=e?i(e)-1:null));return n}().join(").union("))+")"},g.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(l.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"union",types:t.types}}()},S.union=function(t){var n,r,o,a,s;for(s=t.types,o=e.none,n=d(s),r=n.length;r--;)a=n[r],o=o.union(e.fromJSON(a));return o},c}(e),k=function(e){function o(t){var n;if(n=this instanceof o?this:r(u),!(t instanceof e))throw TypeError("Expected untype to be a "+s(e)+", got "+_(t));return n.untype=t,n.id=F(),n}function i(e,t){return a(e.id,t.id)?(t.id=e.id,t.untype=e.untype):i(t,e)}function c(e){return e instanceof U?e.types:[e]}var u,p;return p=e.prototype,u=o.prototype=r(p),u.constructor=o,o.displayName="ComplementType","function"==typeof e.extended&&e.extended(o),u.toString=function(){var e;return null==(e=this._name)?this._name="any \\ "+String(this.untype):e},u.equals=function(e){return this===e?!0:e instanceof o?this.id===e.id?!0:this.untype.equals(e.untype)?(i(this,e),!0):!1:!1},u.compare=function(e){var t;return this===e?0:e instanceof o?this.id===e.id?0:(t=this.untype.compare(e.untype),0===t&&i(this,e),t):n("ComplementType",e.constructor.displayName)},u.union=function(t){var n,r;if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));return t instanceof R||t instanceof D||t instanceof L?(n=c(this.untype),r=g(n,[t]),r===n?this:E(r).complement()):t instanceof U?(n=c(this.untype),r=g(n,t.types),r===n?this:E(r).complement()):t instanceof o?this.untype.intersect(t.untype).complement():t.union(this)},u.intersect=function(n){var r;if(!(n instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(n));return n instanceof R||n instanceof D||n instanceof L?t(c(this.untype),n)?O:n:n instanceof U?(r=g(n.types,c(this.untype)),r===n.types?n:E(r)):n instanceof o?this.untype.union(n.untype).complement():n.intersect(this)},u.isSubsetOf=function(t){if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));return t instanceof o?t.untype.isSubsetOf(this.untype):t===B},u.overlaps=function(t){var n,r,a,i;if(!(t instanceof e))throw TypeError("Expected other to be a "+s(e)+", got "+_(t));if(t instanceof R||t instanceof D)return!this.untype.overlaps(t);if(t instanceof L){for(r=!0,n=c(this.untype),a=n.length;a--;)if(i=n[a],i instanceof L&&t.isSubsetOf(i)){r=!1;break}return r}return t instanceof U?g(t.types,c(this.untype)).length>0:t instanceof o?!0:t.overlaps(this)},u.complement=function(){return this.untype},u.inspect=function(e){return f(this.untype.inspect(e))+".complement()"},u.toJSON=function(){var t;return t=this,function(){var n,r,o;n=!0;for(r in e)if(l.call(e,r)&&(n=!1,o=e[r],o===t))return r;return{type:"complement",untype:t.complement()}}()},S.complement=function(t){var n;return n=t.untype,e.fromJSON(n).complement()},o}(e),B=e.any=new(T=function(e){function t(){var e;if(e=this instanceof t?this:r(o),B)throw Error("Cannot instantiate more than once");return e}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="AnyType","function"==typeof e.extended&&e.extended(t),o.toString=function(){return"any"},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:n("AnyType",e.constructor.displayName)},o.union=function(){return this},o.intersect=function(e){return e},o.isSubsetOf=function(e){return this===e},o.overlaps=function(){return!0},o.complement=function(){return O},o.inspect=function(){return"Type.any"},o.toJSON=function(){return"any"},S.any=function(){return B},t}(e)),O=e.none=new(j=function(e){function t(){var e;if(e=this instanceof t?this:r(o),O)throw Error("Cannot instantiate more than once");return e
}var o,a;return a=e.prototype,o=t.prototype=r(a),o.constructor=t,t.displayName="NoneType","function"==typeof e.extended&&e.extended(t),o.toString=function(){return"none"},o.equals=function(e){return this===e},o.compare=function(e){return this===e?0:n("NoneType",e.constructor.displayName)},o.union=function(e){return e},o.intersect=function(){return this},o.isSubsetOf=function(){return!0},o.overlaps=function(){return!1},o.complement=function(){return B},o.inspect=function(){return"Type.none"},o.toJSON=function(){return"none"},S.none=function(){return O},t}(e)),N=e.arrayBase=e.make("Array"),M=e.functionBase=e.make("Function"),e.undefined=e.make("undefined"),e["null"]=e.make("null"),e.boolean=e.make("Boolean"),e.string=e.make("String"),e.stringArray=e.string.array(),e.number=e.make("Number"),e.numberArray=e.number.array(),e.array=B.array(),e.args=e.make("Arguments"),e.object=e.makeObject({}),e["function"]=B["function"](),e.regexp=e.make("RegExp"),e.date=e.make("Date"),e.error=e.make("Error"),e.promise=e.makeObject({then:e.any["function"](e["function"],e["function"])}),e.numeric=e.number.union(e.undefined).union(e["null"]).union(e.boolean),e.stringOrNumber=e.string.union(e.number),e.arrayLike=e.array.union(e.args),e.undefinedOrNull=e.undefined.union(e["null"]),e.notUndefinedOrNull=e.undefinedOrNull.complement(),e.primitive=e.undefinedOrNull.union(e.boolean).union(e.string).union(e.number),e.nonPrimitive=e.primitive.complement(),e.alwaysFalsy=e.undefinedOrNull,e.potentiallyTruthy=e.alwaysFalsy.complement(),e.potentiallyFalsy=e.alwaysFalsy.union(e.number).union(e.string).union(e.boolean),e.alwaysTruthy=e.potentiallyFalsy.complement(),e}()}.call(this),e.exports},t["./jsast"]=function(){var e={exports:this},n=this;return function(){"use strict";function e(e){var t;return t=b(e),t.indent=A(t.indent)+1,t}function r(e){function t(n){var r,o,a;a=String(n),o=a.split(/(?:\r\n?|[\n\u2028\u2029])/g),1===o.length?t.column=A(t.column)+A(o[0].length):(r=o.length,t.line=A(t.line)+(A(r)-1),t.column=A(o[A(r)-1].length)+1),e(a)}return t.line=1,t.column=1,t.indent=function(n){e(Z(n)),t.column=A(t.column)+A(n)},t}function o(e){var t;return t=r(e)}function a(){var e,t;return e=[],t=r(function(t){e.push(t)}),t.toString=function(){var t;switch(e.length){case 0:return"";case 1:return e[0];default:return t=e.join(""),e.splice(0,e.length,t),t}},t}function s(e,t,n){var r;if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+S(e));if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+S(t));if(null==n)n=void 0;else if("string"!=typeof n&&"number"!=typeof n)throw TypeError("Expected file to be one of String or Number or undefined, got "+S(n));if(r={line:e,column:t},n){if("string"!=typeof n)throw TypeError("Must provide a valid string for file");r.file=n}return r}function i(e,t){var n,r,o,a,s,i,l;if(!x(e))throw TypeError("Expected array to be an Array, got "+S(e));if("function"!=typeof t)throw TypeError("Expected walker to be a Function, got "+S(t));for(a=!1,n=[],r=0,o=e.length;o>r;++r)s=e[r],i=t(s),null==i&&(i=s.walk(t)),s!==i&&(a=!0),n.push(i);return l=n,a?l:e}function l(e){return null!=e?A(e)-1:null}function c(e,t){var n,r,o,a,s,i,c,u,f,p,d;for(i=T.call(arguments,3),c=l(e),u=!1,r=i.length;r--&&(s=i[r],!s||s instanceof st||x(s)&&0===s.length);)i.pop();for(n=[],r=0,o=i.length;o>r;++r)s=i[r],n.push(rt(s,null,c));for(d=n,a=!1,r=0,o=d.length;o>r;++r)if(p=d[r],d.length>50||-1!==p.indexOf("\n")){a=!0;break}if(f=a){for(n=[],r=0,o=d.length;o>r;++r)p=d[r],n.push("  "+N(p.split("\n").join("\n  ")));return d=n,N(t)+"(\n"+N(d.join(",\n"))+")"}return N(t)+"("+N(d.join(", "))+")"}function u(e,t,n){var r,o,a,s,i;if(!x(e))throw TypeError("Expected array to be an Array, got "+S(e));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected keepTrailing to be a Boolean, got "+S(n));if(0===e.length)return e;for(i=[],s=-1,o=0,r=e.length;r>o;++o)a=e[o],s=a instanceof st?o:-1,i.push(f(a,t));return n||-1===s||i.splice(s,1/0),i}function f(e,t){return x(e)?u(e):e instanceof st?t:e}function p(e,t){if(t instanceof at)throw Error("Cannot convert "+S(t)+" to a Const");return t instanceof RegExp?ct(e,t.source,t.flags):q(e,t)}function d(e){if("number"!=typeof e)throw TypeError("Expected value to be a Number, got "+S(e));return 0>e||0===e&&0>1/e}function _(e,t){var n,r,o,a,s;for(o=[],n=k(e),r=n.length;r--;){if(a=n[r],v(a.name,o))throw Error("Duplicate parameter: "+N(a.name));o.push(a.name)}for(n=k(t),r=n.length;r--;){if(s=n[r],v(s,o))throw Error("Duplicate variable: "+N(s));o.push(s)}}function h(e,t,n,r,o,a){var s,i,l,c,u,f,p,d,_;for(p=e.minify,s=k(n),i=0,l=s.length;l>i;++i)u=s[i],p||t.indent(e.indent),t(yt(u)),t(";"),a=!1,p||(t("\n"),a=!0);if(A(r.length)>0){for(c=0,p||(t.indent(e.indent),c=4+2*A(e.indent)),t("var "),s=k(r.sort(function(e,t){return g(e.toLowerCase(),t.toLowerCase())||g(e,t)})),f=0,l=s.length;l>f;++f)_=s[f],d=mt(r[f]),f>0&&(p?t(","):c+2+d.length<80?(t(", "),c+=2):(t(",\n"),t.indent(e.indent),t("    "),c=4+2*A(e.indent))),t(d),c+=d.length;t(";"),a=!1,p||(t("\n"),a=!0)}o.isNoop()||(p||t.indent(e.indent),o.compileAsStatement(e,a,t),p||t("\n"))}function m(t,n,r,o,a,s,i){var l,c,u,f,p;for(n("function"),f=t.minify,f&&null==r||n(" "),null!=r&&r.compile(t,2,!1,n),n("("),l=k(o),u=0,c=l.length;c>u;++u)p=l[u],u>0&&(n(","),f||n(" ")),p.compile(t,2,!1,n);return n(")"),f||n(" "),n("{"),(s.length||a.length||!i.isNoop())&&(f||n("\n"),h(e(t),n,a,s,i,!f),f||n.indent(t.indent)),n("}")}function y(e){var t,n,r,o,a;if(null==e)return[];if(x(e)){for(t=[],n=k(e),r=0,o=n.length;o>r;++r)a=n[r],t.push(X(a));return t}throw Error("Expected an array, got "+S(e))}var g,b,w,v,x,I,E,C,A,B,T,N,k,S,M,D,F,O,j,L,R,U,P,V,q,G,W,J,z,H,Y,$,X,K,Z,Q,et,tt,nt,rt,ot,at,st,it,lt,ct,ut,ft,pt,dt,_t,ht,mt,yt,gt,bt,wt,vt,xt;g=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},b="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},w=function(e,t){var n;for(n in t)B.call(t,n)&&(e[n]=t[n]);return e},v="function"==typeof Array.prototype.indexOf?function(){var e;return e=Array.prototype.indexOf,function(t,n){return-1!==e.call(n,t)}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},x="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),I=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e},E=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},C=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+S(e));return e.displayName||e.name||""},A=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+S(e));return e},B=Object.prototype.hasOwnProperty,T=Array.prototype.slice,N=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+S(e))},k=function(e){if(null==e)throw TypeError("Expected an object, got "+S(e));return x(e)?e:"string"==typeof e?e.split(""):T.call(e)},S=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),vt=t("util"),null!=vt&&(rt=vt.inspect),lt=t("./utils").padLeft,ot=(M=t("./jsutils")).isAcceptableIdent,yt=M.toJSSource,Z=function(){var e;return e=[""],function(t){var n,r;if(A(t)>=e.length)for(r=e[e.length-1],n=e.length,A(t);t>=n;++n)r=N(r)+"  ",e.push(r);return e[t]}}(),n.Node=at=function(){function e(){var n;throw n=this instanceof e?this:b(t),Error("Node cannot be instantiated directly")}var t;return t=e.prototype,e.displayName="Node",t.toString=function(e){var t;return null==e&&(e={}),t=a(),this.compileAsStatement(w({indent:0,bare:!0},e),!0,t),t.toString()},t.compile=function(){throw Error("Not implemented: "+C(this.constructor)+".compile()")},t.maybeToStatement=function(){return"function"==typeof this.toStatement?this.toStatement():this},t.isConst=function(){return!1},t.isNoop=function(){return!1},t.constValue=function(){throw Error(N(this.constructor.name)+" has no const value")},t.isLarge=function(){return!0},t.isSmall=function(){return!this.isLarge()},t.mutateLast=function(){return this},t.exitType=function(){return null},t.last=function(){return this},t.toJSON=function(){return[this.constructor.name,this.pos.line,this.pos.column,this.pos.file||0].concat(k(this._toJSON()))},t._toJSON=function(){return[]},e}(),n.Expression=H=function(e){function t(){var e;throw e=this instanceof t?this:b(n),Error("Expression cannot be instantiated directly")}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Expression","function"==typeof e.extended&&e.extended(t),n.compileAsBlock=function(e,t,n,r){this.compile(e,t,n,r)},n.compileAsStatement=function(e,t,n){"function"==typeof this.toStatement?this.toStatement().compileAsStatement(e,t,n):(this.compile(e,1,t,n),n(";"))},n.isLarge=function(){return!1},n.mutateLast=function(e){return e(this)},t}(at),n.Statement=pt=function(e){function t(){var e;throw e=this instanceof t?this:b(r),Error("Expression cannot be instantiated directly")}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Statement","function"==typeof e.extended&&e.extended(t),r.compileAsStatement=function(e,t,n){return this.compile(e,1,t,n)},t}(at),n.Access=function(e,t){var n,r,o,a,s;for(a=T.call(arguments,2),s=t,n=0,r=a.length;r>n;++n)o=a[n],s=O(e,s,".",o);return s},n.Arguments=D=function(e){function t(e){var r;if(r=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));return r.pos=e,r}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Arguments","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("arguments")},n.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},n.walk=function(){return this},n.isNoop=function(){return!0},n.inspect=function(e){return c(e,"Arguments",this.pos)},t.fromJSON=function(e,n,r){return t(s(e,n,r))},t}(H),n.Arr=F=function(t){function n(e,r){var o,s;if(s=this instanceof n?this:b(a),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(s.pos=e,null==r)r=[];else{if(!x(r))throw TypeError("Expected elements to be an Array, got "+S(r));for(o=r.length;o--;)if(!(r[o]instanceof t))throw TypeError("Expected "+("elements["+o+"]")+" to be a "+C(t)+", got "+S(r[o]))}return s.elements=r,s}function r(t,n,r,o,a){var s,i,l,c,u;for(i=e(n),s=k(t),l=0,u=s.length;u>l;++l)c=s[l],a("\n"),a.indent(i.indent),c.compile(i,3,!1,a),u-1>l&&a(",");a("\n"),a.indent(n.indent)}function o(e,t,n,r,o){var a,s,i,l;for(a=k(e),i=0,s=a.length;s>i;++i)l=a[i],i>0&&(o(","),t.minify||o(" ")),l.compile(t,3,!1,o)}var a,l;return l=t.prototype,a=n.prototype=b(l),a.constructor=n,n.displayName="Arr","function"==typeof t.extended&&t.extended(n),a.compile=function(e,t,n,a){var s,i;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(s=e.sourcemap)&&s.add(a.line,a.column,this.pos.line,this.pos.column),a("["),i=!e.minify&&this.shouldCompileLarge()?r:o,i(this.elements,e,t,n,a),a("]"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},a.compileAsBlock=function(e,t,n,r){return L(this.pos,this.elements).compileAsBlock(e,t,n,r)},a.compileAsStatement=function(e,t,n){R(this.pos,this.elements).compile(e,1,t,n)},a.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},a.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},a.isLarge=function(){var e,t;return t=this,null==(e=this._isLarge)?this._isLarge=A(this.elements.length)>4||function(){var e,n,r,o;for(r=!1,e=k(t.elements),n=e.length;n--;)if(o=e[n],!o.isSmall()){r=!0;break}return r}():e},a.isNoop=function(){var e,t,n,r,o;if(null==(r=this._isNoop)){for(t=!0,e=k(this.elements),n=e.length;n--;)if(o=e[n],!o.isNoop()){t=!1;break}return this._isNoop=t}return r},a.walk=function(e){var t;return t=i(this.elements,e),this.elements!==t?n(this.pos,t):this},a.inspect=function(e){return c(e,"Arr",this.pos,this.elements)},a._toJSON=function(){return u(this.elements,0)},n.fromJSON=function(e,t,r){var o;return o=T.call(arguments,3),n(s(e,t,r),y(o))},n}(H),n.Assign=function(e,t,n){return O(e,t,"=",n)},n.BinaryChain=function(e,t){var n,r,o,a,s,i,l,c;if(a=T.call(arguments,2),"+"===t)for(i=a.length-2;i>=0;--i)l=a[i],c=a[i+1],("string"==typeof l||l instanceof q&&"string"==typeof l.value)&&("string"==typeof c||c instanceof q&&"string"==typeof c.value)&&a.splice(i,2,N("string"==typeof l?l:l.value)+N("string"==typeof c?c:c.value));for(s=a[0],n=1,r=a.length;r>n;++n)o=a[n],s=O(e,s,t,o);return s},n.And=function(e){var t,n,r,o;if(n=T.call(arguments,1),0===n.length)return q(e,!0);for(r=n[0],o=1,t=n.length;t>o;++o)r=O(e,r,"&&",n[o]);return r},n.Or=function(e){var t,n,r,o;if(n=T.call(arguments,1),0===n.length)return q(e,!1);for(r=n[0],o=1,t=n.length;t>o;++o)r=O(e,r,"||",n[o]);return r},n.Binary=O=function(e){function t(n,r,a,s){var i;if(i=this instanceof t?this:b(o),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+S(n));if(i.pos=n,null==r&&(r=st(n)),"string"!=typeof a)throw TypeError("Expected op to be a String, got "+S(a));if(i.op=a,null==s&&(s=st(n)),!B.call(u,a))throw Error("Unknown binary operator: "+N(yt(a)));return r instanceof e||(r=p(n,r)),s instanceof e||(s=p(n,s)),i.left=r,i.right=s,i}function n(e,t,n,r,o,a,s){var i,l,c;i=n instanceof q&&"string"==typeof n.value&&ot(n.value),c=A(o)>18,c&&s("("),t instanceof q&&"number"==typeof t.value?(l=yt(t.value),d(t.value)||!isFinite(t.value)?(s("("),s(l),s(")")):(s(l),i&&-1===l.indexOf("e")&&-1===l.indexOf(".")&&s("."))):t.isConst()&&void 0===t.constValue()?(s("("),(t instanceof q?t:q(t.pos,void 0)).compile(r,2,!1,s),s(")")):t.compile(r,18,a,s),i?(s("."),s(n.value)):(s("["),n.compile(r,2,!1,s),s("]")),c&&s(")")}function r(e,n,r,o,a,s,i){var c,f,p,d;f=u[e],c=l[f],d="paren"===c?!I(a,f):!E(a,f),d&&i("("),n.compile(o,"right"===c&&n instanceof t&&u[n.op]===f?A(f)+1:f,s&&!d,i),p=!o.minify||/^\w/.test(e),p&&i(" "),i(e),p&&i(" "),r.compile(o,"left"===c&&r instanceof t&&u[r.op]===f?A(f)+1:f,!1,i),d&&i(")")}var o,a,i,l,u;return a=e.prototype,o=t.prototype=b(a),o.constructor=t,t.displayName="Binary","function"==typeof e.extended&&e.extended(t),o.compile=function(e,t,o,a){var s,i;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(s=e.sourcemap)&&s.add(a.line,a.column,this.pos.line,this.pos.column),i="."===this.op?n:r,i(this.op,this.left,this.right,e,t,o,a),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},o.compileAsBlock=function(e,t,n,r){var o;B.call(i,this.op)||"."===(o=this.op)||"&&"===o||"||"===o?a.compileAsBlock.call(this,e,t,n,r):L(this.pos,[this.left,this.right]).compileAsBlock(e,t,n,r)},o.compileAsStatement=function(e,t,n){var r,o,s;r=this,o=this.left,s=this.op,B.call(i,s)?a.compileAsStatement.call(this,e,t,n):"&&"===this.op?nt(this.pos,this.left,this.right).compileAsStatement(e,t,n):"||"===this.op?nt(this.pos,wt(this.pos,"!",this.left),this.right).compileAsStatement(e,t,n):"."===s?a.compileAsStatement.call(this,e,t,n):R(this.pos,[this.left,this.right]).compileAsStatement(e,t,n)},i={"=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"<<=":!0,">>=":!0,">>>=":!0,"&=":!0,"^=":!0,"|=":!0},u={".":18,"*":15,"/":15,"%":15,"+":14,"-":14,"<<":13,">>":13,">>>":13,"<":12,"<=":12,">":12,">=":12,"in":12,"instanceof":12,"==":11,"!=":11,"===":11,"!==":11,"&":9,"^":10,"|":8,"&&":7,"||":6,"=":4,"+=":4,"-=":4,"*=":4,"/=":4,"%=":4,"<<=":4,">>=":4,">>>=":4,"&=":4,"^=":4,"|=":4},l={11:"paren",12:"paren",14:"left",15:"left",9:"none",8:"none",10:"none",13:"left",4:"right"},o.isLarge=function(){var e;return null==(e=this._isLarge)?this._isLarge=!this.left.isSmall()||!this.right.isSmall():e},o.isSmall=function(){var e;return null==(e=this._isSmall)?this._isSmall=this.left.isSmall()&&this.right.isSmall():e},o.isNoop=function(){var e;return null==(e=this._isNoop)?this._isNoop=!B.call(i,this.op)&&"."!==this.op&&this.left.isNoop()&&this.right.isNoop():e},o.walk=function(e){var n,r,o,a;return r=!1,o=null!=(n=e(this.left))?n:this.left.walk(e),a=null!=(n=e(this.right))?n:this.right.walk(e),this.left!==o||this.right!==a?t(this.pos,o,this.op,a):this},o.inspect=function(e){return c(e,"Binary",this.pos,this.left,this.op,this.right)},o._toJSON=function(){var e;return e=[f(this.left,0),this.op],f(this.right)&&e.push.apply(e,k(this.right.toJSON())),e},t.fromJSON=function(e,n,r,o,a){var i;return i=T.call(arguments,5),t(s(e,n,r),X(o),a,X(i))},t}(H),n.BlockStatement=R=function(t){function n(e,t,o){var a,s,i,l,c,u,f;if(l=this instanceof n?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(l.pos=e,null==t)t=[];else{if(!x(t))throw TypeError("Expected body to be an Array, got "+S(t));for(a=t.length;a--;)if(!(t[a]instanceof at))throw TypeError("Expected "+("body["+a+"]")+" to be a "+C(at)+", got "+S(t[a]))}if(null==o)o=null;else if(!(o instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(o));for(l.label=o,u=[],s=0,i=t.length;i>s&&(c=t[s],f=c.maybeToStatement(),!(f instanceof n)||f.label||f.pos.file!==e.file&&f.pos.file?f instanceof st||u.push(f):u.push.apply(u,k(f.body)),null==f.exitType());++s);switch(u.length){case 0:return st(e);case 1:return e.file&&!u[0].pos.file&&(u[0].pos.file=e.file),u[0]}return l.body=u,l}var r,o;return o=t.prototype,r=n.prototype=b(o),r.constructor=n,n.displayName="BlockStatement","function"==typeof t.extended&&t.extended(n),r.compile=function(t,n,r,o){var a,s,i,l,c,u,f,p,d,_,h;if(1!==n)throw Error("Cannot compile a statement except on the Block level");for(a=[],s=k(this.body),i=0,l=s.length;l>i;++i)_=s[i],_.isNoop()||a.push(_);for(h=a,null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(c=t.sourcemap)&&c.add(o.line,o.column,this.pos.line,this.pos.column),u=null!=this.label?e(t):t,d=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),r=!1,o(":"),d||o(" "),o("{"),d||(o("\n"),o.indent(u.indent),r=!0)),f=0,l=h.length;l>f;++f)p=h[f],f>0&&!d&&(o("\n"),o.indent(u.indent),r=!0),p.compileAsStatement(u,r,o),r=!1;null!=this.label&&(d||(o("\n"),o.indent(t.indent)),o("}")),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,n,r;return n=i(this.body,e),r=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,this.body!==n||this.label!==r?j(this.pos,n,r):this},r.mutateLast=function(e,t){var n,r,o;return r=this.last(),o=r.mutateLast(e,t),r!==o?(n=T.call(this.body,0,-1),n.push(o),j(this.pos,n)):this},r.exitType=function(){return this.last().exitType()},r.last=function(){var e;return(e=this.body)[A(e.length)-1]},r.isNoop=function(){var e,t,n,r,o;if(null==(r=this._isNoop)){for(t=!0,e=k(this.body),n=e.length;n--;)if(o=e[n],!o.isNoop()){t=!1;break}return this._isNoop=t}return r},r.inspect=function(e){return c(e,"BlockStatement",this.pos,this.body,this.label)},r._toJSON=function(){return[this.label||0].concat(k(this.body))},n.fromJSON=function(e,t,r,o){var a;return a=T.call(arguments,4),n(s(e,t,r),y(a),o?X(o):null)},n}(pt),n.BlockExpression=L=function(e){function t(r,o){var a,s,i,l,c,u;if(s=this instanceof t?this:b(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+S(r));if(s.pos=r,null==o)o=[];else{if(!x(o))throw TypeError("Expected body to be an Array, got "+S(o));for(a=o.length;a--;)if(!(o[a]instanceof e))throw TypeError("Expected "+("body["+a+"]")+" to be a "+C(e)+", got "+S(o[a]))}for(u=[],i=0,c=o.length;c>i;++i)l=o[i],i!==c-1&&!l instanceof st||(l instanceof t&&(l.pos.file===r.file||!l.pos.file)?(u.push.apply(u,k(l.body)),c-1>i&&u[u.length-1]instanceof st&&u.pop()):l instanceof st||u.push(l));switch(u.length){case 0:return st(r);case 1:return r.file&&!u[0].pos.file&&(u[0].pos.file=r.file),u[0]}return s.body=u,s}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="BlockExpression","function"==typeof e.extended&&e.extended(t),n.toStatement=function(){return R(this.pos,this.body)},n.compile=function(e,t,n,r){var o,a,s,i,l,c,u,f,p,d;if(1===t)this.toStatement().compile(e,t,n,r);else{for(o=[],a=k(this.body),l=0,u=a.length;u>l;++l)f=a[l],f.isNoop()&&l!==u-1||o.push(f);for(p=o,null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(i=e.sourcemap)&&i.add(r.line,r.column,this.pos.line,this.pos.column),d=A(t)>2&&p.length>1,d&&r("("),l=0,s=p.length;s>l;++l)c=p[l],l>0&&(r(","),e.minify||r(" ")),c.compile(e,d?3:t,!1,r);d&&r(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()}},n.compileAsBlock=function(e,t,n,r){var o,a,s,i,l,c,u,f,p,d;if(1===t)this.compile(e,t,n,r);else{for(o=[],a=k(this.body),l=0,u=a.length;u>l;++l)f=a[l],f.isNoop()||o.push(f);for(p=o,null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(i=e.sourcemap)&&i.add(r.line,r.column,this.pos.line,this.pos.column),d=A(t)>2&&p.length>1,d&&r("("),l=0,s=p.length;s>l;++l)c=p[l],l>0&&r(", "),c.compileAsBlock(e,d?3:t,!1,r);d&&r(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()}},n.isLarge=function(){var e,t;return t=this,null==(e=this._isLarge)?this._isLarge=A(this.body.length)>4||function(){var e,n,r,o;for(r=!1,e=k(t.body),n=e.length;n--;)if(o=e[n],o.isLarge()){r=!0;break}return r}():e},n.isSmall=function(){return!1},n.isNoop=function(){var e,t,n,r,o;if(null==(r=this._isNoop)){for(t=!0,e=k(this.body),n=e.length;n--;)if(o=e[n],!o.isNoop()){t=!1;break}return this._isNoop=t}return r},n.walk=R.prototype.walk,n.last=function(){var e;return(e=this.body)[A(e.length)-1]},n.inspect=function(e){return c(e,"BlockExpression",this.pos,this.body)},n._toJSON=function(){return this.body},t.fromJSON=function(e,n,r){var o;return o=T.call(arguments,3),t(s(e,n,r),y(o))},t}(H),j=n.Block=function(e,t,n){var r;if(null==t)t=[];else{if(!x(t))throw TypeError("Expected body to be an Array, got "+S(t));for(r=t.length;r--;)if(!(t[r]instanceof at))throw TypeError("Expected "+("body["+r+"]")+" to be a "+C(at)+", got "+S(t[r]))}if(null==n)n=null;else if(!(n instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(n));return 0===t.length?st(e):null==n&&function(){var e,n,r;for(e=!0,n=t.length;n--;)if(r=t[n],!(r instanceof H)){e=!1;break}return e}()?L(e,t):R(e,t,n)},n.Break=U=function(e){function t(e,r){var o;if(o=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,null==r)r=null;else if(!(r instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(r));return o.label=r,o}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Break","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;if(1!==t)throw Error("Cannot compile a statement except on the Block level");null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("break"),null!=this.label&&(r(" "),this.label.compile(e,2,!1,r)),r(";"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile(this.pos.file)},n.walk=function(){return this},n.exitType=function(){return"break"},n.walk=function(e){var n,r;return r=null!=this.label?null!=(n=e(this.label))?n:this.label.walk(e):this.label,r!==this.label?t(this.pos,r):this},n.inspect=function(e){return c(e,"Break",this.pos,this.label)},n.isLarge=function(){return!1},n._toJSON=function(){return null!=this.label?[this.label]:[]},t.fromJSON=function(e,n,r,o){return t(s(e,n,r),o?X(o):null)},t}(pt),n.Call=P=function(t){function n(e,r,o,s){var i,l;if(l=this instanceof n?this:b(a),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(l.pos=e,null==r)r=st(e);else if(!(r instanceof t))throw TypeError("Expected func to be a "+C(t)+", got "+S(r));if(l.func=r,null==o)o=[];else{if(!x(o))throw TypeError("Expected args to be an Array, got "+S(o));for(i=o.length;i--;)if(!(o[i]instanceof t))throw TypeError("Expected "+("args["+i+"]")+" to be a "+C(t)+", got "+S(o[i]))}if(l.args=o,null==s)s=!1;else if("boolean"!=typeof s)throw TypeError("Expected isNew to be a Boolean, got "+S(s));return l.isNew=s,l}function r(t,n,r,o,a){var s,i,l,c,u;for(a("("),i=e(n),s=k(t),l=0,u=s.length;u>l;++l)c=s[l],a("\n"),a.indent(i.indent),c.compile(i,3,!1,a),u-1>l&&a(",");a("\n"),a.indent(n.indent),a(")")}function o(e,t,n,r,o){var a,s,i,l;for(o("("),a=k(e),l=0,s=a.length;s>l;++l)i=a[l],l>0&&(o(","),t.minify||o(" ")),i.compile(t,3,!1,o);o(")")}var a,l;return l=t.prototype,a=n.prototype=b(l),a.constructor=n,n.displayName="Call","function"==typeof t.extended&&t.extended(n),a.compile=function(e,t,n,a){var s,i,l;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(s=e.sourcemap)&&s.add(a.line,a.column,this.pos.line,this.pos.column),l=A(t)>18||!this.isNew&&(this.func instanceof K||this.func instanceof O&&"."===this.func.op&&this.func.left instanceof K),l&&a("("),this.isNew&&a("new "),this.func.compile(e,this.isNew?19:18,n&&!l&&!this.isNew,a),i=!e.minify&&this.shouldCompileLarge()?r:o,i(this.args,e,t,n,a),l&&a(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},a.shouldCompileLarge=function(){var e,t,n,r,o;if(A(this.args.length)>4)return!0;for(r=!1,e=k(this.args),n=e.length,t=n-2;t>=0;--t)if(o=e[t],!o.isSmall()){r=!0;break}return r},a.hasLargeArgs=function(){var e,t,n,r,o;if(null==(n=this._hasLargeArgs)){if(A(this.args.length)>4)return this._hasLargeArgs=!0;for(r=!1,e=k(this.args),t=e.length;t--;)if(o=e[t],!o.isSmall()){r=!0;break}return this._hasLargeArgs=r}return n},a.isLarge=function(){return this.func.isLarge()||this.hasLargeArgs()},a.isSmall=function(){var e;if(null!=(e=this._isSmall))return e;if(!this.func.isSmall())return this._isSmall=!1;switch(this.args.length){case 0:return this._isSmall=!0;case 1:return this._isSmall=this.args[0].isSmall();default:return this._isSmall=!1}},a.walk=function(e){var t,r,o;return o=null!=(t=e(this.func))?t:this.func.walk(e),r=i(this.args,e),this.func!==o||this.args!==r?n(this.pos,o,r,this.isNew):this},a.inspect=function(e){return c(e,"Call",this.pos,this.func,this.args,this.isNew)},a._toJSON=function(){return[f(this.func,0),this.isNew?1:0].concat(k(u(this.args,0)))},n.fromJSON=function(e,t,r,o,a){var i;return i=T.call(arguments,5),n(s(e,t,r),X(o),y(i),!!a)},n}(H),n.Comment=V=function(e){function t(e,r){var o;if(o=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,"string"!=typeof r)throw TypeError("Expected text to be a String, got "+S(r));if(o.text=r,"/*"!==r.substring(0,2))throw Error("Expected text to start with '/*'");if("*/"!==r.slice(-2))throw Error("Expected text to end with '*/'");return o}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Comment","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o,a,s,i,l;for(l=this.text.split("\n"),o=k(l),s=0,a=o.length;a>s;++s)i=o[s],s>0&&(r("\n"),e.minify||r.indent(e.indent)),r(i)},n.isConst=function(){return!0},n.constValue=function(){},n.isNoop=function(){return!1},n.walk=function(){return this},n.inspect=function(){return c("Comment",this.pos,this.text)},n._toJSON=function(){return[this.text]},t.fromJSON=function(e,n,r,o){return t(s(e,n,r),o)},t}(pt),n.Const=q=function(e){function t(e,r){var o;if(o=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,null!=r&&"boolean"!=typeof r&&"number"!=typeof r&&"string"!=typeof r)throw TypeError("Expected value to be one of undefined or null or Boolean or Number or String, got "+S(r));return o.value=r,o}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Const","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o,a,s;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),a=this.value,void 0===a&&null!=e.undefinedName?r(e.undefinedName):(s=A(t)>=17&&(void 0===a||"number"==typeof a&&!isFinite(a)),s&&r("("),r(yt(a)),s&&r(")")),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},n.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},n.isConst=function(){return!0},n.isNoop=t.prototype.isConst,n.constValue=function(){return this.value},n.walk=function(){return this},n.inspect=function(e){return"Const("+N(rt(this.value,null,l(e)))+")"},n._toJSON=function(){return"number"!=typeof this.value||isFinite(this.value)?0===this.value&&d(this.value)?[0,2]:void 0===this.value?[]:[this.value]:[A(this.value)>0?1:A(this.value)<0?-1:0,1]},t.fromJSON=function(e,n,r,o,a){return t(s(e,n,r),1===a?A(o)/0:0===o&&2===a?-0:o)},t}(H),n.Continue=G=function(e){function t(e,r){var o;if(o=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,null==r)r=null;else if(!(r instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(r));return o.label=r,o}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Continue","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;if(1!==t)throw Error("Cannot compile a statement except on the Block level");return null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("continue"),null!=this.label&&(r(" "),this.label.compile(e,2,!1,r)),r(";"),null!=e.sourcemap&&this.pos.file?e.sourcemap.popFile():void 0},n.walk=function(){return this},n.exitType=function(){return"continue"},n.isLarge=function(){return!1},n.walk=function(e){var n,r;return r=null!=this.label?null!=(n=e(this.label))?n:this.label.walk(e):this.label,r!==this.label?t(this.pop,r):this},n.inspect=function(e){return c(e,"Continue",this.pos,this.label)},n._toJSON=function(){return null!=this.label?[this.label]:[]},t.fromJSON=function(e,n,r,o){return t(s(e,n,r),o?X(o):null)},t}(pt),n.Debugger=W=function(e){function t(e){var r;if(r=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));return r.pos=e,r}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Debugger","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;if(1!==t)throw Error("Cannot compile a statement except on the Block level");return null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("debugger;")},n.walk=function(){return this},n.isLarge=function(){return!1},n.inspect=function(e){return c(e,"Debugger",this.pos)},t.fromJSON=function(e,n,r){return t(s(e,n,r))},t}(pt),n.DoWhile=J=function(t){function n(e,t,o,a){var s;if(s=this instanceof n?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(s.pos=e,null==t)t=st(e);else if(!(t instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(t));if(null==o)o=st(e);else if(!(o instanceof H))throw TypeError("Expected test to be a "+C(H)+", got "+S(o));
if(s.test=o,null==a)a=null;else if(!(a instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(a));return s.label=a,s.body=t.maybeToStatement(),o.isConst()&&!o.constValue()?j(e,[s.body],a):s}var r,o;return o=t.prototype,r=n.prototype=b(o),r.constructor=n,n.displayName="DoWhile","function"==typeof t.extended&&t.extended(n),r.compile=function(t,n,r,o){var a,s;if(1!==n)throw Error("Cannot compile a statement except on the Block level");null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(a=t.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),s=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),r=!1,o(":"),s||o(" ")),o("do"),this.body.isNoop()?o(";"):(s||o(" "),o("{"),s||(o("\n"),o.indent(A(t.indent)+1),r=!0),this.body.compileAsStatement(e(t),r,o),r=!1,s||(o("\n"),o.indent(t.indent)),o("}")),s||o(" "),o("while"),s||o(" "),o("("),this.test.compile(t,2,!1,o),o(");"),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,r,o,a;return r=null!=(t=e(this.body))?t:this.body.walk(e),a=null!=(t=e(this.test))?t:this.test.walk(e),o=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,r!==this.body||a!==this.test||o!==this.label?n(this.pos,r,a,o):this},r.inspect=function(e){return c(e,"DoWhile",this.pos,this.body,this.test,this.label)},r._toJSON=function(){return[this.label||0,f(this.test,0),f(this.body,0)]},n.fromJSON=function(e,t,r,o,a,i){return n(s(e,t,r),X(i),X(a),o?X(o):null)},n}(pt),n.Eval=z=function(e){function t(r,o){var a;if(a=this instanceof t?this:b(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+S(r));return a.pos=r,null==o&&(o=st(r)),o instanceof e||(o=p(r,o)),a.code=o,a}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Eval","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),this.code instanceof q?r(String(this.code.value)):(r("eval("),this.code.compile(e,3,!1,r),r(")")),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},n.walk=function(e){var n,r;return r=null!=(n=e(this.code))?n:this.code.walk(e),r!==this.code?t(this.pops,r):this},n.inspect=function(e){return c(e,"Eval",this.pos,this.code)},n._toJSON=function(){return[f(this.code,0)]},t.fromJSON=function(e,n,r,o){return t(s(e,n,r),X(o))},t}(H),n.For=Y=function(t){function n(e,t,o,a,s,i){var l;if(l=this instanceof n?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(l.pos=e,null==t)t=st(e);else if(!(t instanceof H))throw TypeError("Expected init to be a "+C(H)+", got "+S(t));if(l.init=t,null==o&&(o=q(e,!0)),null==a)a=st(e);else if(!(a instanceof H))throw TypeError("Expected step to be a "+C(H)+", got "+S(a));if(l.step=a,!(s instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(s));if(null==i)i=null;else if(!(i instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(i));return l.label=i,o instanceof H||(o=p(e,o)),o.isConst()&&!o.constValue()?t:(l.test=o,l.body=s.maybeToStatement(),l)}var r,o;return o=t.prototype,r=n.prototype=b(o),r.constructor=n,n.displayName="For","function"==typeof t.extended&&t.extended(n),r.compile=function(t,n,r,o){var a,s,i;if(1!==n)throw Error("Cannot compile a statement except on the Block level");i=this.test.isConst()&&"boolean"!=typeof this.test.constValue()?q(this.pos,!!this.test.constValue()):this.test,null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(a=t.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),s=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),o(":"),s||o(" ")),this.init.isNoop()&&this.step.isNoop()?(o("while"),s||o(" "),o("("),i.compile(t,2,!1,o)):(o("for"),s||o(" "),o("("),this.init.isNoop()||this.init.compileAsBlock(t,2,!1,o),o(";"),s||o(" "),i.isConst()&&i.constValue()||i.compile(t,2,!1,o),o(";"),s||o(" "),this.step.isNoop()||this.step.compileAsBlock(t,2,!1,o)),o(")"),this.body.isNoop()?o(";"):(s||o(" "),o("{"),s||(o("\n"),o.indent(A(t.indent)+1)),this.body.compileAsStatement(e(t),!s,o),s||(o("\n"),o.indent(t.indent)),o("}")),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,r,o,a,s,i;return o=null!=(t=e(this.init))?t:this.init.walk(e),i=null!=(t=e(this.test))?t:this.test.walk(e),s=null!=(t=e(this.step))?t:this.step.walk(e),r=null!=(t=e(this.body))?t:this.body.walk(e),a=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,o!==this.init||i!==this.test||s!==this.step||r!==this.body||a!==this.label?n(this.pos,o,i,s,r,a):this},r.inspect=function(e){return c(e,"For",this.pos,this.init,this.test,this.step,this.body,this.label)},r._toJSON=function(){var e;return e=[this.label||0,f(this.init,0),f(this.test,0),f(this.step,0)],f(this.body)&&e.push.apply(e,k(this.body.toJSON())),e},n.fromJSON=function(e,t,r,o,a,i,l){var c;return c=T.call(arguments,7),n(s(e,t,r),X(a),X(i),X(l),X(c),o?X(o):null)},n}(pt),n.ForIn=$=function(t){function n(e,t,o,a,s){var i;if(i=this instanceof n?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(i.pos=e,!(t instanceof Q))throw TypeError("Expected key to be a "+C(Q)+", got "+S(t));if(i.key=t,null==o)o=st(line,column);else if(!(o instanceof H))throw TypeError("Expected object to be a "+C(H)+", got "+S(o));if(i.object=o,null==a)a=st(line,column);else if(!(a instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(a));if(null==s)s=null;else if(!(s instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(s));return i.label=s,i.body=a.maybeToStatement(),i}var r,o;return o=t.prototype,r=n.prototype=b(o),r.constructor=n,n.displayName="ForIn","function"==typeof t.extended&&t.extended(n),r.compile=function(t,n,r,o){var a,s;if(1!==n)throw Error("Cannot compile a statement except on the Block level");null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(a=t.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),s=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),o(":"),s||o(" ")),o("for"),s||o(" "),o("("),this.key.compile(t,2,!1,o),o(" in "),this.object.compile(t,2,!1,o),o(")"),this.body.isNoop()?o(";"):(s||o(" "),o("{"),s||(o("\n"),o.indent(A(t.indent)+1)),this.body.compileAsStatement(e(t),!s,o),s||(o("\n"),o.indent(t.indent)),o("}")),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},r.walk=function(e){var t,r,o,a,s;return o=null!=(t=e(this.key))?t:this.key.walk(e),s=null!=(t=e(this.object))?t:this.object.walk(e),r=null!=(t=e(this.body))?t:this.body.walk(e),a=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,o!==this.key||s!==this.object||r!==this.body||a!==this.label?n(this.pos,o,s,r):this},r.inspect=function(e){return c(e,"ForIn",this.pos,this.key,this.object,this.body,this.label)},r._toJSON=function(){var e;return e=[this.label||0,this.key,f(this.object,0)],f(this.body)&&e.push.apply(e,k(this.body.toJSON())),e},n.fromJSON=function(e,t,r,o,a,i){var l;return l=T.call(arguments,6),n(s(e,t,r),X(a),X(i),X(l),o?X(o):null)},n}(pt),mt=function(){function e(e){return"\\u"+N(lt(e.charCodeAt(0).toString(16),4,"0"))}return function(t){if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+S(t));return t.replace(/[\u0000-\u001f\u0080-\uffff]/g,e)}}(),n.Func=K=function(e){function t(e,n,o,a,s,i){var l,c,u,f;if(f=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(f.pos=e,null==n)n=null;else if(!(n instanceof Q))throw TypeError("Expected name to be one of null or "+C(Q)+", got "+S(n));if(f.name=n,null==o)o=[];else{if(!x(o))throw TypeError("Expected params to be an Array, got "+S(o));for(l=o.length;l--;)if(!(o[l]instanceof Q))throw TypeError("Expected "+("params["+l+"]")+" to be a "+C(Q)+", got "+S(o[l]))}if(f.params=o,null==a)a=[];else{if(!x(a))throw TypeError("Expected variables to be an Array, got "+S(a));for(c=a.length;c--;)if("string"!=typeof a[c])throw TypeError("Expected "+("variables["+c+"]")+" to be a String, got "+S(a[c]))}if(f.variables=a,null==s)s=st(line,column);else if(!(s instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(s));if(f.body=s,null==i)i=[];else{if(!x(i))throw TypeError("Expected declarations to be an Array, got "+S(i));for(u=i.length;u--;)if("string"!=typeof i[u])throw TypeError("Expected "+("declarations["+u+"]")+" to be a String, got "+S(i[u]))}return f.declarations=i,_(o,a),f}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Func","function"==typeof e.extended&&e.extended(t),r.compile=function(e,t,n,r){var o,a;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),a=n&&!this.name,a&&r("("),m(e,r,this.name,this.params,this.declarations,this.variables,this.body),a&&r(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},r.compileAsStatement=function(e,t,n){this.compile(e,1,t,n),t&&this.name||n(";")},r.isLarge=function(){return!0},r.isNoop=function(){return null==this.name},r.walk=function(e){var n,r,o,a;return o=this.name?null!=(n=e(this.name))?n:this.name.walk(e):this.name,a=i(this.params,e),r=this.body.walk(e),o!==this.name||a!==this.params||r!==this.body?t(this.pos,o,a,this.variables,r,this.declarations,this.meta):this},r.inspect=function(e){return c(e,"Func",this.pos,this.name,this.params,this.variables,this.body,this.declarations,this.meta)},r._toJSON=function(){var e;return e=[this.name||0,u(this.params,0),u(this.variables,0),u(this.declarations,0)],f(this.body)&&e.push.apply(e,k(this.body.toJSON())),e},t.fromJSON=function(e,n,r,o,a,i,l){var c;return c=T.call(arguments,7),t(s(e,n,r),o?X(o):void 0,y(a),i,X(c),l)},t}(H),n.Ident=Q=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(a.pos=e,"string"!=typeof n)throw TypeError("Expected name to be a String, got "+S(n));if(a.name=n,null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected allowUnacceptable to be a Boolean, got "+S(o));if(!o&&!ot(n,!0))throw Error("Not an acceptable identifier name: "+n);return a}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Ident","function"==typeof e.extended&&e.extended(t),r.compile=function(e,t,n,r){var o;null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r(mt(this.name))},r.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},r.walk=function(){return this},r.inspect=function(e){return c(e,"Ident",this.pos,this.name)},r.isNoop=function(){return!0},r._toJSON=function(){return[this.name]},t.fromJSON=function(e,n,r,o){return t(s(e,n,r),o)},t}(H),n.IfStatement=nt=function(t){function n(e,t,o,a,s){var i;if(i=this instanceof n?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(i.pos=e,null==t)t=st(e);else if(!(t instanceof H))throw TypeError("Expected test to be a "+C(H)+", got "+S(t));if(null==o)o=st(e);else if(!(o instanceof at))throw TypeError("Expected whenTrue to be a "+C(at)+", got "+S(o));if(null==a)a=st(e);else if(!(a instanceof at))throw TypeError("Expected whenFalse to be a "+C(at)+", got "+S(a));if(null==s)s=null;else if(!(s instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(s));return i.label=s,t instanceof wt&&"!"===t.op&&t.node instanceof wt&&"!"===t.node.op&&(t=t.node.node),t.isConst()?t.constValue()?j(e,[o],s):j(e,[a],s):(o=o.maybeToStatement(),a=a.maybeToStatement(),o instanceof st?a instanceof st?t.maybeToStatement():n.call(i,e,wt(t.pos,"!",t),a,o,s):(a instanceof st&&o instanceof n&&o.whenFalse instanceof st&&null==o.label?(i.test=O(e,t,"&&",o.test),i.whenTrue=o.whenTrue,i.whenFalse=a):(i.test=t,i.whenTrue=o,i.whenFalse=a),i))}var r,o;return o=t.prototype,r=n.prototype=b(o),r.constructor=n,n.displayName="IfStatement","function"==typeof t.extended&&t.extended(n),r.compile=function(t,r,o,a){var s,i,l,c;if(1!==r)throw Error("Cannot compile a statement except on the Block level");this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsStatement(t,!0,a):n(this.pos,wt(this.test.pos,"!",this.test),this.whenFalse,this.whenTrue,this.label).compile(t,r,o,a):(null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(s=t.sourcemap)&&s.add(a.line,a.column,this.pos.line,this.pos.column),l=t.minify,null!=this.label&&(this.label.compile(t,r,o,a),a(":"),l||a(" ")),a("if"),l||a(" "),a("("),this.test.compile(t,2,!1,a),a(")"),l||a(" "),a("{"),i=e(t),l||(a("\n"),a.indent(i.indent)),this.whenTrue.compileAsStatement(i,!l,a),l||(a("\n"),a.indent(t.indent)),a("}"),c=this.whenFalse,c.isNoop()||(l||a(" "),a("else"),c instanceof n&&null==c.label?(a(" "),c.compile(t,r,!1,a)):(l||a(" "),a("{"),l||(a("\n"),a.indent(i.indent)),c.compileAsStatement(i,!l,a),l||(a("\n"),a.indent(t.indent)),a("}"))),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile())},r.walk=function(e){var t,n,r,o,a;return r=null!=(t=e(this.test))?t:this.test.walk(e),a=null!=(t=e(this.whenTrue))?t:this.whenTrue.walk(e),o=null!=(t=e(this.whenFalse))?t:this.whenFalse.walk(e),n=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,r!==this.test||a!==this.whenTrue||o!==this.whenFalse||n!==this.label?et(this.pos,r,a,o,n):this},r.mutateLast=function(e,t){var n,r;return r=this.whenTrue.mutateLast(e,t),n=this.whenFalse.mutateLast(e,t),r!==this.whenTrue||n!==this.whenFalse?et(this.pos,this.test,r,n,this.label):this},r.exitType=function(){var e,t;return void 0===this._exitType?(t=this.whenTrue.exitType(),e=this.whenFalse.exitType(),this._exitType=t===e?t:null):this._exitType},r.isNoop=function(){var e;return null==(e=this._isNoop)?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():e},r.inspect=function(e){return c(e,"IfStatement",this.pos,this.test,this.whenTrue,this.whenFalse)},r._toJSON=function(){var e;return e=[this.label||0,f(this.test,0),f(this.whenTrue,0)],f(this.whenFalse)&&e.push.apply(e,k(this.whenFalse.toJSON())),e},n.fromJSON=function(e,t,r,o,a,i){var l;return l=T.call(arguments,6),n(s(e,t,r),X(a),X(i),X(l),o?X(o):null)},n}(pt),n.IfExpression=tt=function(t){function n(e,r,o,a){var s;if(s=this instanceof n?this:b(i),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(s.pos=e,null==r)r=st(e);else if(!(r instanceof t))throw TypeError("Expected test to be a "+C(t)+", got "+S(r));return null==o&&(o=st(e)),null==a&&(a=st(e)),o instanceof t||(o=p(e,o)),a instanceof t||(a=p(e,a)),r instanceof wt&&"!"===r.op&&r.node instanceof wt&&"!"===r.node.op&&(r=r.node.node),r.isConst()?r.constValue()?o:a:(a instanceof st&&o instanceof n&&o.whenFalse instanceof st?(s.test=O(e,r,"&&",o.test),s.whenTrue=o.whenTrue,s.whenFalse=a):(s.test=r,s.whenTrue=o,s.whenFalse=a),s)}function r(e,t,n,r,o,a){var s;s=r.minify,e.compile(r,5,o,a),a(s?"?":" ? "),t.compile(r,5,!1,a),a(s?":":" : "),n.compile(r,5,!1,a)}function o(t,r,a,s,i,l){var c,u,f,p;c=e(s),f=t instanceof n,f&&l("("),t.compile(c,f?2:5,i&&!f,l),f&&l(")"),u=r.isLarge(),u?(l("\n"),l.indent(c.indent),l("? ")):l(" ? "),p=r instanceof n,p&&l("("),r.compile(c,p?2:5,!1,l),p&&l(")"),l("\n"),l.indent(c.indent),l(": "),a instanceof n?o(a.test,a.whenTrue,a.whenFalse,s,!1,l):a.compile(c,5,!1,l)}var a,i;return a=t.prototype,i=n.prototype=b(a),i.constructor=n,n.displayName="IfExpression","function"==typeof t.extended&&t.extended(n),i.toStatement=function(){return nt(this.pos,this.test,this.whenTrue,this.whenFalse)},i.compile=function(e,t,n,a){var s,i,l;1===t?this.toStatement().compile(e,t,n,a):(null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(s=e.sourcemap)&&s.add(a.line,a.column,this.pos.line,this.pos.column),l=A(t)>5,l&&a("("),i=e.minify||!this.whenTrue.isLarge()&&!this.whenFalse.isLarge()?r:o,i(this.test,this.whenTrue,this.whenFalse,e,!l&&n,a),l&&a(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile())},i.compileAsBlock=function(e,t,n,r){this.whenTrue.isNoop()?this.whenFalse.isNoop()?this.test.compileAsBlock(e,t,n,r):O(this.pos,this.test,"||",this.whenFalse).compileAsBlock(e,t,n,r):this.whenFalse.isNoop()?O(this.pos,this.test,"&&",this.whenTrue).compileAsBlock(e,t,n,r):this.compile(e,t,n,r)},i.isLarge=function(){var e;return null==(e=this._isLarge)?this._isLarge=!this.test.isSmall()||!this.whenTrue.isSmall()||!this.whenFalse.isSmall():e},i.isSmall=function(){return!1},i.isNoop=function(){var e;return null==(e=this._isNoop)?this._isNoop=this.test.isNoop()&&this.whenTrue.isNoop()&&this.whenFalse.isNoop():e},i.walk=nt.prototype.walk,i.inspect=function(e){return c(e,"IfExpression",this.pos,this.test,this.whenTrue,this.whenFalse)},i._toJSON=function(){var e;return e=[f(this.test,0),f(this.whenTrue,0)],f(this.whenFalse)&&e.push.apply(e,k(this.whenFalse.toJSON())),e},n.fromJSON=function(e,t,r,o,a){var i;return i=T.call(arguments,5),n(s(e,t,r),X(o),X(a),X(i))},n}(H),et=n.If=function(e,t,n,r,o){if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));return n instanceof pt||r instanceof pt||null!=o?nt(e,t,n,r,o):tt(e,t,n,r)},n.Noop=st=function(e){function t(e){var n;if(n=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));return n.pos=e,n}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Noop","function"==typeof e.extended&&e.extended(t),r.compileAsStatement=function(){},r.compile=function(e,t,n,r){A(t)>1&&q(this.pos,void 0).compile(e,t,n,r)},r.isConst=function(){return!0},r.isNoop=t.prototype.isConst,r.constValue=function(){},r.walk=function(){return this},r.mutateLast=function(e,t){return(null!=t?t.noop:void 0)?e(this):this},r.inspect=function(e){return c(e,"Noop",this.pos)},t.fromJSON=function(e,n,r){return t(s(e,n,r))},t}(H),n.Obj=it=function(t){function n(e,t){var o,a;if(a=this instanceof n?this:b(d),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(a.pos=e,null==t)t=[];else{if(!x(t))throw TypeError("Expected elements to be an Array, got "+S(t));for(o=t.length;o--;)if(!(t[o]instanceof _))throw TypeError("Expected "+("elements["+o+"]")+" to be a "+C(_)+", got "+S(t[o]))}return a.elements=t,r(t),a}function r(e){var t,n,r,o,a;for(o=[],t=k(e),n=t.length;n--;){if(a=t[n],r=a.key,v(r,o))throw Error("Found duplicate key: "+N(yt(r)));o.push(r)}}function o(e){var t;return ot(e)?e:(t=Number(e),t===t&&String(t)===e?e:yt(e))}function a(t,n,r){var a,s,i,l,c,u;for(s=e(n),a=k(t),l=0,u=a.length;u>l;++l)i=a[l],r("\n"),r.indent(s.indent),c=i.key,r(o(c)),r(": "),i.value.compile(s,3,!1,r),u-1>l&&r(",");r("\n"),r.indent(n.indent)}function l(e,t,n){var r,a,s,i,l,c;if(e.length){for(c=t.minify,c||n(" "),r=k(e),i=0,a=r.length;a>i;++i)s=r[i],i>0&&(n(","),c||n(" ")),l=s.key,n(o(l)),n(":"),c||n(" "),s.value.compile(t,3,!1,n);c||n(" ")}}var u,d,_;return u=t.prototype,d=n.prototype=b(u),d.constructor=n,n.displayName="Obj","function"==typeof t.extended&&t.extended(n),d.compile=function(e,t,n,r){var o,s,i;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),i=n,i&&r("("),r("{"),s=!e.minify&&this.shouldCompileLarge()?a:l,s(this.elements,e,r),r("}"),i&&r(")"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},d.compileAsBlock=function(e,t,n,r){var o;o=this,L(this.pos,function(){var e,t,n,r,a;for(e=[],t=k(o.elements),n=0,r=t.length;r>n;++n)a=t[n],e.push(a.value);return e}()).compileAsBlock(e,t,n,r)},d.compileAsStatement=function(e,t,n){var r;r=this,R(this.pos,function(){var e,t,n,o,a;for(e=[],t=k(r.elements),n=0,o=t.length;o>n;++n)a=t[n],e.push(a.value);return e}()).compileAsStatement(e,t,n)},d.shouldCompileLarge=function(){switch(this.elements.length){case 0:return!1;case 1:return this.elements[0].isLarge();default:return this.isLarge()}},d.isSmall=function(){switch(this.elements.length){case 0:return!0;case 1:return this.elements[0].isSmall();default:return!1}},d.isLarge=function(){var e,t;return t=this,null==(e=this._isLarge)?this._isLarge=A(this.elements.length)>4||function(){var e,n,r,o;for(r=!1,e=k(t.elements),n=e.length;n--;)if(o=e[n],!o.isSmall()){r=!0;break}return r}():e},d.isNoop=function(){var e,t,n,r,o;if(null==(r=this._isNoop)){for(t=!0,e=k(this.elements),n=e.length;n--;)if(o=e[n],!o.isNoop()){t=!1;break}return this._isNoop=t}return r},d.walk=function(e){var t;return t=i(this.elements,e),t!==this.elements?n(this.pos,t):this},d.inspect=function(e){return c(e,"Obj",this.pos,this.elements)},d._toJSON=function(){var e,t,n,r,o,a;for(a=[],e=k(this.elements),t=0,n=e.length;n>t;++t)r=e[t],o=r.pos,a.push(o.line,o.column,o.file,r.key,f(r.value));return a},n.fromJSON=function(e,t,r){var o,a,i,l,c,u,f,p,d;for(a=T.call(arguments,3),p=[],i=0,o=a.length;o>i;i+=5)f=a[i],c=a[i+1],u=a[i+2],l=a[i+3],d=a[i+4],p.push(_(s(f,c,u),l,X(d)));return n(s(e,t,r),p)},n.Pair=_=function(){function e(r,o,a){var s;if(s=this instanceof e?this:b(n),"object"!=typeof r||null===r)throw TypeError("Expected pos to be an Object, got "+S(r));if(s.pos=r,"string"!=typeof o)throw TypeError("Expected key to be a String, got "+S(o));return s.key=o,null==a&&(a=st(line,column)),a instanceof t||(a=p(r,a)),s.value=a,s}var n;return n=e.prototype,e.displayName="ObjPair",n.isSmall=function(){return this.value.isSmall()},n.isLarge=function(){return this.value.isLarge()},n.isNoop=function(){return this.value.isNoop()},n.walk=function(t){var n,r;return r=null!=(n=t(this.value))?n:this.value.walk(t),r!==this.value?e(this.pos,this.key,r):this},n.inspect=function(e){return c(e,"Pair",this.pos,this.key,this.value)},e}(),n}(H),n.Regex=ct=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(a.pos=e,"string"!=typeof n)throw TypeError("Expected source to be a String, got "+S(n));if(a.source=n,null==o)o="";else if("string"!=typeof o)throw TypeError("Expected flags to be a String, got "+S(o));return a.flags=o,a}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Regex","function"==typeof e.extended&&e.extended(t),r.compile=function(e,t,n,r){var o;null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("/"),r(this.source.replace(/(\\\\)*\\?\//g,"$1\\/")||"(?:)"),r("/"),r(this.flags)},r.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},r.isNoop=function(){return!0},r.walk=function(){return this},r.inspect=function(e){return c(e,"Regex",this.pos,this.source,this.flags)},r._toJSON=function(){return[this.source,this.flags]},t.fromJSON=function(e,n,r,o,a){return t(s(e,n,r),o,a)},t}(H),n.Return=ut=function(e){function t(e,r){var o;if(o=this instanceof t?this:b(n),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,null==r)r=st(e);else if(!(r instanceof H))throw TypeError("Expected node to be a "+C(H)+", got "+S(r));return o.node=r,"function"==typeof r.toStatement?r.toStatement().mutateLast(function(n){return t(e,n)},{noop:!0}):o}var n,r;return r=e.prototype,n=t.prototype=b(r),n.constructor=t,t.displayName="Return","function"==typeof e.extended&&e.extended(t),n.compile=function(e,t,n,r){var o;null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("return"),this.node.isConst()&&void 0===this.node.constValue()||(r(" "),this.node.compile(e,2,!1,r)),r(";"),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},n.walk=function(e){var n,r;return r=null!=(n=e(this.node))?n:this.node.walk(e),r!==this.node?t(this.pos,r):this},n.exitType=function(){return"return"},n.isSmall=function(){return this.node.isSmall()},n.isLarge=function(){return this.node.isLarge()},n.inspect=function(e){return c(e,"Return",this.pos,this.node)},n.mutateLast=function(e,n){var r;return(null!=n?n["return"]:void 0)?(r=this.node.mutateLast(e,n),r!==this.node?t(this.pos,r):this):this},n._toJSON=function(){return f(this.node)?this.node.toJSON():[]},t.fromJSON=function(e,n,r){var o;return o=T.call(arguments,3),t(s(e,n,r),X(o))},t}(pt),n.Root=ft=function(){function e(t,r,o,a){var s,i,l;if(l=this instanceof e?this:b(n),"object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+S(t));if(l.pos=t,null==r)r=st(t);else if(!(r instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(r));if(l.body=r,null==o)o=[];else{if(!x(o))throw TypeError("Expected variables to be an Array, got "+S(o));for(s=o.length;s--;)if("string"!=typeof o[s])throw TypeError("Expected "+("variables["+s+"]")+" to be a String, got "+S(o[s]))}if(l.variables=o,null==a)a=[];else{if(!x(a))throw TypeError("Expected declarations to be an Array, got "+S(a));for(i=a.length;i--;)if("string"!=typeof a[i])throw TypeError("Expected "+("declarations["+i+"]")+" to be a String, got "+S(a[i]))}return l.declarations=a,_([],o),l}var n;return n=e.prototype,e.displayName="Root",n.compile=function(e){var n,r,s,i,l,c,u,f,p,d,_,m,y,g;return null==e&&(e={}),e.indent||(e.indent=0),e.uglify||"function"!=typeof e.writer||(g=e.writer),d=g?o(g):a(),_=(new Date).getTime(),null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(n=e.sourcemap)&&n.add(d.line,d.column,this.pos.line,this.pos.column),h(e,d,this.declarations,this.variables,this.body,!0),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile(),s=(new Date).getTime(),"function"==typeof e.progress&&e.progress("compile",A(s)-A(_)),i=0,null==g&&(r=d.toString(),e.uglify&&(l=t("fs"),null!=e.sourcemap&&(p=t("path"),f=t("os"),m=p.join(f.tmpDir(),"gs-"+4294967296*Math.random()+".map"),l.writeFileSync(m,e.sourcemap.toString(),"utf8")),y=t("uglify-js"),null!=(n=y.AST_Node)&&(u=n.warn_function),"function"==typeof u&&(y.AST_Node.warn_function=function(){}),c=y.minify(r,{fromString:!0,inSourceMap:m,outSourceMap:null!=(n=e.sourcemap)?n.generatedFile:void 0}),null!=u&&(y.AST_Node.warn_function=u),null!=m&&l.unlinkSync(m),r=c.code,i=(new Date).getTime(),"function"==typeof e.progress&&e.progress("uglify",i-A(s)),null!=e.sourcemap&&(e.sourcemap=c.map)),"function"==typeof e.writer&&(e.writer(r),r="")),{compileTime:A(s)-A(_),uglifyTime:e.uglify?i-A(s):void 0,code:r||""}},n.toString=function(e){return null==e&&(e={}),this.compile(e).code},n.isLarge=function(){return!0},n.walk=function(t){var n;return n=this.body.walk(t),n!==this.body?e(this.pos,n,this.variables,this.declarations):this},n.mutateLast=function(t,n){var r;return r=this.body.mutateLast(t,n),r!==this.body?e(this.pos,r,this.variables,this.declarations):this},n.exitType=function(){return this.last().exitType()},n.last=function(){var e;return(e=this.body)[A(e.length)-1]},n.inspect=function(e){return c(e,"Root",this.pos,this.body,this.variables,this.declarations)},n._toJSON=function(){var e;return e=[u(this.variables,0),u(this.declarations,0)],f(this.body)&&e.push.apply(e,k(this.body.toJSON())),e},e.fromJSON=function(t,n,r,o,a){var i;return i=T.call(arguments,5),e(s(t,n,r),X(i),o,a)},e}(),n.This=_t=function(e){function t(e){var n;if(n=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));return n.pos=e,n}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="This","function"==typeof e.extended&&e.extended(t),r.compile=function(e,t,n,r){var o;null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column,this.pos.file),r("this")},r.compileAsBlock=function(e,t,n,r){st(this.pos).compileAsBlock(e,t,n,r)},r.isNoop=function(){return!0},r.walk=function(){return this},r.inspect=function(e){return c(e,"This",this.pos)},t.fromJSON=function(e,n,r){return t(s(e,n,r))},t}(H),n.Throw=ht=function(e){function t(e,n){var o;if(o=this instanceof t?this:b(r),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(o.pos=e,null==n)n=st(line,column);else if(!(n instanceof H))throw TypeError("Expected node to be a "+C(H)+", got "+S(n));return o.node=n,"function"==typeof n.toStatement?n.toStatement().mutateLast(function(e){return t(o.pos,e)},{noop:!0}):o}var n,r;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Throw","function"==typeof e.extended&&e.extended(t),r.compile=function(e,t,n,r){var o;return null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(o=e.sourcemap)&&o.add(r.line,r.column,this.pos.line,this.pos.column),r("throw "),this.node.compile(e,2,!1,r),r(";"),null!=e.sourcemap&&this.pos.file?e.sourcemap.popFile():void 0},r.walk=function(e){var n,r;return r=null!=(n=e(this.node))?n:this.node.walk(e),r!==this.node?t(this.pos,r):this},r.exitType=function(){return"throw"},r.isSmall=function(){return this.node.isSmall()},r.isLarge=function(){return this.node.isLarge()},r.inspect=function(e){return c(e,"Throw",this.pos,this.node)},r._toJSON=function(){return f(this.node)?this.node.toJSON():[]},t.fromJSON=function(e,n,r){var o;return o=T.call(arguments,3),t(s(e,n,r),X(o))},t}(pt),n.Switch=dt=function(t){function n(e,t,r,s,i){var l,c;if(c=this instanceof n?this:b(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(c.pos=e,null==t&&(t=st(e)),null==r)r=[];else{if(!x(r))throw TypeError("Expected cases to be an Array, got "+S(r));for(l=r.length;l--;)if(!(r[l]instanceof a))throw TypeError("Expected "+("cases["+l+"]")+" to be a "+C(a)+", got "+S(r[l]))}if(c.cases=r,null==s)s=st(e);else if(!(s instanceof at))throw TypeError("Expected defaultCase to be a "+C(at)+", got "+S(s));if(null==i)i=null;else if(!(i instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(i));return c.label=i,t instanceof H||(t=p(e,t)),c.node=t,c.defaultCase=s.maybeToStatement(),c}var r,o,a;return r=t.prototype,o=n.prototype=b(r),o.constructor=n,n.displayName="Switch","function"==typeof t.extended&&t.extended(n),o.compile=function(t,n,r,o){var a,s,i,l,c,u,f;if(1!==n)throw Error("Cannot compile a statement except on the Block level");for(null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(l=t.sourcemap)&&l.add(o.line,o.column,this.pos.line,this.pos.column),f=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),o(":"),f||o(" ")),o("switch"),f||o(" "),o("("),this.node.compile(t,2,!1,o),o(")"),f||o(" "),o("{"),u=e(t),a=k(this.cases),s=0,i=a.length;i>s;++s)c=a[s],f||(o("\n"),o.indent(t.indent)),o("case "),c.node.compile(t,2,!1,o),o(":"),c.body.isNoop()||(c.node.isSmall()&&c.body.isSmall()?(f||o(" "),c.body.compileAsStatement(t,!0,o)):(f||(o("\n"),o.indent(u.indent)),c.body.compileAsStatement(u,!0,o)));this.defaultCase.isNoop()||(f||(o("\n"),o.indent(t.indent)),o("default:"),this.defaultCase.isSmall()?(f||o(" "),this.defaultCase.compileAsStatement(t,!0,o)):(f||(o("\n"),o.indent(u.indent)),this.defaultCase.compileAsStatement(u,!0,o))),f||(o("\n"),o.indent(t.indent)),o("}"),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a,s;return s=null!=(t=e(this.node))?t:this.node.walk(e),r=i(this.cases,e),o=null!=(t=e(this.defaultCase))?t:this.defaultCase.walk(e),a=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,s!==this.node||r!==this.cases||o!==this.defaultCase||a!==this.label?n(this.pos,s,r,o,a):this},o.inspect=function(e){return this.inspectHelper(e,"Switch",this.pos,this.node,this.cases,this.defaultCase,this.label)},o._toJSON=function(){var e,t,n,r,o;for(o=[this.label||0,f(this.node,0)],e=k(this.cases),t=0,n=e.length;n>t;++t)r=e[t],o.push(r.pos.line,r.pos.column,r.pos.file,f(r.node,0),f(r.body,0));return this.defaultCase instanceof st||o.push(f(this.defaultCase,0)),o
},n.fromJSON=function(e,t,r,o,i){var l,c,u,f,p,d,_,h,m,y;switch(l=T.call(arguments,5),m=l.length,m%5){case 0:break;case 1:--m,_=l[m];break;default:throw Error("Unknown number of arguments passed to fromJSON")}for(y=[],h=0;m>h;h+=5)p=l[h],u=l[h+1],f=l[h+2],d=l[h+3],c=l[h+4],y.push(a(s(p,u,f),X(d),X(c)));return n(s(e,t,r),X(i),y,X(_),o?X(o):null)},n.Case=a=function(){function e(n,r,o){var a;if(a=this instanceof e?this:b(t),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+S(n));if(a.pos=n,null==r&&(r=st(n)),null==o)o=st(n);else if(!(o instanceof at))throw TypeError("Expected body to be a "+C(at)+", got "+S(o));return r instanceof H||(r=p(n,r)),a.node=r,a.body=o.maybeToStatement(),a}var t;return t=e.prototype,e.displayName="SwitchCase",t.isLarge=function(){return!0},t.isSmall=function(){return!1},t.walk=function(t){var n,r,o;return o=null!=(n=t(this.node))?n:this.node.walk(t),r=null!=(n=t(this.body))?n:this.body.walk(t),o!==this.node||r!==this.body?e(this.pos,o,r):this},t.inspect=function(e){return c(e,"Case",this.pos,this.node,this.body)},e}(),n}(pt),n.TryCatch=gt=function(t){function n(e,t,r,a,s){var i;if(i=this instanceof n?this:b(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(i.pos=e,null==t)t=st(e);else if(!(t instanceof at))throw TypeError("Expected tryBody to be a "+C(at)+", got "+S(t));if(!(r instanceof Q))throw TypeError("Expected catchIdent to be a "+C(Q)+", got "+S(r));if(i.catchIdent=r,null==a)a=st(e);else if(!(a instanceof at))throw TypeError("Expected catchBody to be a "+C(at)+", got "+S(a));if(null==s)s=null;else if(!(s instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(s));return i.label=s,i.tryBody=t.maybeToStatement(),i.tryBody.isNoop()?i.tryBody:(i.catchBody=a.maybeToStatement(),i)}var r,o;return r=t.prototype,o=n.prototype=b(r),o.constructor=n,n.displayName="TryCatch","function"==typeof t.extended&&t.extended(n),o.compile=function(t,n,r,o){var a,s,i;if(1!==n)throw Error("Cannot compile a statement except on the Block level");null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(a=t.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),i=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),o(":"),i||o(" ")),o(i?"try{":"try {\n"),s=e(t),i||o.indent(s.indent),this.tryBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent)),o(i?"}catch(":"} catch ("),this.catchIdent.compile(t,2,!1,o),o(i?"){":") {"),this.catchBody.isNoop()||(i||(o("\n"),o.indent(s.indent)),this.catchBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent))),o("}"),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a,s;return s=null!=(t=e(this.tryBody))?t:this.tryBody.walk(e),o=null!=(t=e(this.catchIdent))?t:this.catchIdent.walk(e),r=null!=(t=e(this.catchBody))?t:this.catchBody.walk(e),a=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,s!==this.tryBody||o!==this.catchIdent||r!==this.catchBody||a!==this.label?n(this.pos,s,o,r,a):this},o.inspect=function(e){return c(e,"TryCatch",this.pos,this.tryBody,this.catchIdent,this.catchBody,this.label)},o._toJSON=function(){var e;return e=[this.label||0,f(this.tryBody,0),this.catchIdent],f(this.catchBody)&&e.push.apply(e,k(this.catchBody.toJSON())),e},n.fromJSON=function(e,t,r,o,a,i){var l;return l=T.call(arguments,6),n(s(e,t,r),X(a),X(i),X(l),o?X(o):null)},n}(pt),n.TryFinally=bt=function(t){function n(e,t,r,a){var s;if(s=this instanceof n?this:b(o),"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+S(e));if(s.pos=e,null==t)t=st(e);else if(!(t instanceof at))throw TypeError("Expected tryBody to be a "+C(at)+", got "+S(t));if(null==r)r=st(e);else if(!(r instanceof at))throw TypeError("Expected finallyBody to be a "+C(at)+", got "+S(r));if(null==a)a=null;else if(!(a instanceof Q))throw TypeError("Expected label to be one of "+(C(Q)+" or null")+", got "+S(a));if(s.label=a,s.tryBody=t.maybeToStatement(),s.finallyBody=r.maybeToStatement(),null==a){if(s.tryBody.isNoop())return s.finallyBody;if(s.finallyBody.isNoop())return s.tryBody}return s}var r,o;return r=t.prototype,o=n.prototype=b(r),o.constructor=n,n.displayName="TryFinally","function"==typeof t.extended&&t.extended(n),o.compile=function(t,n,r,o){var a,s,i;if(1!==n)throw Error("Cannot compile a statement except on the Block level");null!=t.sourcemap&&this.pos.file&&t.sourcemap.pushFile(this.pos.file),null!=(a=t.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),i=t.minify,null!=this.label&&(this.label.compile(t,n,r,o),o(":"),i||o(" ")),o(i?"try{":"try {\n"),s=e(t),i||o.indent(s.indent),this.tryBody instanceof gt&&null==this.tryBody.label?(this.tryBody.tryBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent)),o(i?"}catch(":"} catch ("),this.tryBody.catchIdent.compile(t,2,!1,o),o(i?"){":") {"),this.tryBody.catchBody.isNoop()||(i||(o("\n"),o.indent(s.indent)),this.tryBody.catchBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent)))):(this.tryBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent))),o(i?"}finally{":"} finally {\n"),i||o.indent(s.indent),this.finallyBody.compileAsStatement(s,!0,o),i||(o("\n"),o.indent(t.indent)),o("}"),null!=t.sourcemap&&this.pos.file&&t.sourcemap.popFile()},o.walk=function(e){var t,r,o,a;return a=null!=(t=e(this.tryBody))?t:this.tryBody.walk(e),r=null!=(t=e(this.finallyBody))?t:this.finallyBody.walk(e),o=null!=this.label?null!=(t=e(this.label))?t:this.label.walk(e):this.label,a!==this.tryBody||r!==this.finallyBody||o!==this.label?n(this.pos,a,r,o):this},o.inspect=function(e){return c(e,"TryFinally",this.pos,this.tryBody,this.finallyBody,this.label)},o._toJSON=function(){var e;return e=[this.label||0,f(this.tryBody,0)],f(this.finallyBody)&&e.push.apply(e,k(this.finallyBody.toJSON())),e},n.fromJSON=function(e,t,r,o,a){var i;return i=T.call(arguments,5),n(s(e,t,r),X(a),X(i),o?X(o):null)},n}(pt),n.Unary=wt=function(e){function t(n,o,s){var i;if(i=this instanceof t?this:b(r),"object"!=typeof n||null===n)throw TypeError("Expected pos to be an Object, got "+S(n));if(i.pos=n,"string"!=typeof o)throw TypeError("Expected op to be a String, got "+S(o));if(i.op=o,null==s&&(s=st(n)),!v(o,a))throw Error("Unknown unary operator: "+o);if(s instanceof e||(s=p(line,column,s)),!("delete"!==o||s instanceof O&&"."===s.op))throw Error("Cannot use delete operator on a non-access");return i.node=s,i}var n,r,o,a;return n=e.prototype,r=t.prototype=b(n),r.constructor=t,t.displayName="Unary","function"==typeof e.extended&&e.extended(t),r.compile=function(e,n,r,o){var a,s;s=this.op,null!=e.sourcemap&&this.pos.file&&e.sourcemap.pushFile(this.pos.file),null!=(a=e.sourcemap)&&a.add(o.line,o.column,this.pos.line,this.pos.column),"++post"===s||"--post"===s?(this.node.compile(e,16,!1,o),o(s.substring(0,2))):(o(s),("typeof"===s||"void"===s||"delete"===s||("+"===s||"-"===s||"++"===s||"--"===s)&&(this.node instanceof t&&("+"===s||"-"===s||"++"===s||"--"===s)||this.node instanceof q&&"number"==typeof this.node.value&&d(this.node.value)))&&o(" "),this.node.compile(e,16,!1,o)),null!=e.sourcemap&&this.pos.file&&e.sourcemap.popFile()},r.compileAsBlock=function(e,t,n,r){var a;a=this.op,B.call(o,a)?this.compile(e,t,n,r):this.node.compileAsBlock(e,t,n,r)},r.compileAsStatement=function(e,t,r){var a;a=this.op,B.call(o,a)?n.compileAsStatement.call(this,e,t,r):this.node.compileAsStatement(e,t,r)},a=["++","--","++post","--post","!","~","+","-","typeof","void","delete"],o={"++":!0,"--":!0,"++post":!0,"--post":!0,"delete":!0},r.isLarge=function(){return this.node.isLarge()},r.isSmall=function(){return this.node.isSmall()},r.isNoop=function(){var e;return null==(e=this._isNoop)?this._isNoop=!B.call(o,this.op)&&this.node.isNoop():e},r.walk=function(e){var n,r;return r=null!=(n=e(this.node))?n:this.node.walk(e),r!==this.node?t(this.pos,this.op,r):this},r.inspect=function(e){return c(e,"Unary",this.pos,this.op,this.node)},r._toJSON=function(){var e;return e=[this.op],f(this.node)&&e.push.apply(e,k(this.node.toJSON())),e},t.fromJSON=function(e,n,r,o){var a;return a=T.call(arguments,4),t(s(e,n,r),o,X(a))},t}(H),xt=n.While=function(e,t,n,r){return Y(e,null,t,null,n,r)},X=n.fromJSON=function(e){var t,r;if(!e)return st(s(0,0));if(x(e)){if(0===e.length)return st(s(0,0));if(r=e[0],A(e.length)<1||"string"!=typeof r)throw Error("Expected an array with a string as its first item");if(!B.call(n,r))throw Error("Unknown node type: "+N(e.type));return(t=n[r]).fromJSON.apply(t,k(T.call(e,1)))}if("object"==typeof e&&null!==e){if("string"!=typeof e.type)throw Error("Expected an object with a string 'type' key");if(!B.call(n,e.type))throw Error("Unknown node type: "+N(e.type));return n[e.type].fromJSON(e)}throw TypeError("Must provide an object or array to deserialize")}}.call(this),e.exports},t["./parser"]=function(){var e={exports:this};return function(n){"use strict";function r(e){return e}function o(e){return function(){return e}}function a(e,t,n){var r,o,a;if(!ut(e))throw TypeError("Expected codes to be an Array, got "+xt(e));for(null==t&&(t=[]),null==n&&(n=0),o=e.length,r=ct(n),0>r&&(r+=o);o>r;++r)a=e[r],t.push($r(a));return t}function s(e){if(!ut(e))throw TypeError("Expected codes to be an Array, got "+xt(e));return a(e).join("")}function i(e){var t,n,r,o,a,s,i;for(i=tt(null),t=vt(e),r=0,o=t.length;o>r;++r)if(s=t[r],"number"==typeof s)i[s]=!0;else for(a=ht(s[0]),n=ht(s[1]);n>=a;++a)i[a]=!0;return i}function l(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+xt(e));return e.stack=Error().stack,e}function c(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+xt(e));if("number"!=typeof t)throw TypeError("Expected expected to be a Number, got "+xt(t));return l(function(n,r){if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return n.source.charCodeAt(r)===t?yn(r+1,t):n.fail(e,r)})}function u(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+xt(e));if("object"!=typeof t||null===t)throw TypeError("Expected expected to be an Object, got "+xt(t));return l(function(n,r){var o;if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return o=n.source.charCodeAt(r),t[o]?yn(r+1,o):n.fail(e,r)})}function f(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return"function"==typeof e.mutator&&"function"==typeof e.rule?f(e.rule):Ba(function(e){return!!e},e)}function p(e,t){var n;if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return n={},"function"==typeof t?Ba(function(e,r,o){return e===n?t(r,o):e},l(function(t,r){if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return e(t,r)||yn(r,n)})):l(function(n,r){if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return e(n,r)||yn(r,t)})}function d(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return function(t,n){var r;if("number"!=typeof n)throw TypeError("Expected index to be a Number, got "+xt(n));return r=e(t,n),r?yn(n):void 0}}function _(e,t){return yn(t)}function h(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return l(function(t,n){if("number"!=typeof n)throw TypeError("Expected index to be a Number, got "+xt(n));return e(t,n)?void 0:yn(n)})}function m(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return l(function(t,n){if("number"!=typeof n)throw TypeError("Expected index to be a Number, got "+xt(n));return e(t,n)?void 0:y(t,n)})}function y(e,t){var n,r;return r=e.source,t>=r.length?e.fail("any",t):(n=r.charCodeAt(t),13===n&&10===r.charCodeAt(+t+1)&&(++t,n=10),yn(+t+1,n))}function g(e,t){var n,r;if(r=e.source,n=r.charCodeAt(t),13===n)10===r.charCodeAt(+t+1)&&(++t,n=10);else if(10!==n&&8232!==n&&8233!==n)return;return yn(+t+1,n)}function b(e,t){return t>=e.source.length?yn(t):void 0}function w(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return Xs(ii,["this",e])}function v(e,t){return e.options.noindent?jr(e,t):yn(t)}function x(e,t){var n;if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));if("string"!=typeof t)throw TypeError("Expected text to be a String, got "+xt(t));return n=JSON.stringify(t),function(r,o){var a;return a=e(r,o),a&&a.value===t?a:r.fail(n,o)}}function I(e){var t;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+xt(e));return t=tt(null),function(n){if("string"!=typeof n)throw TypeError("Expected key to be a String, got "+xt(n));return mt.call(t,n)?t[n]:t[n]=e(n)}}function E(e,t){return e.options.noindent?void 0:yn(t)}function C(e,t){var n;return n=$n(e,t),e.options.noindent||n.value===e.indent.peek()?n:void 0}function A(e,t){var n,r,o;if(e.options.noindent)throw Error("Can't use Advance if in noindent mode");return n=$n(e,t),r=n.value,o=e.indent,dt(r,o.peek())?void 0:(o.push(r),yn(t,r))}function B(e,t){var n;return n=$n(e,t),e.indent.push(n.value),yn(t,n.value)}function T(e){if("number"!=typeof e)throw TypeError("Expected n to be a Number, got "+xt(e));return function(t,n){var r;return r=t.indent,r.push(+r.peek()+e),yn(n,0)}}function N(e,t){var n;if(n=e.indent,n.canPop())return n.pop(),yn(t);throw vs("Unexpected dedent",e,t)}function k(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return function(t,n){var r,o,a,s;s=t.indent,o=s.count();try{return e(t,n)}finally{for(a=ht(o),r=ht(s.count());r>a;++a)s.pop()}}}function S(e){var t;if("function"!=typeof e)throw TypeError("Expected digit to be a Function, got "+xt(e));return t=$s(os(e),os(rl,!0)),Ba(function(e){var t,n,r,o,s;for(s=[],t=vt(e),n=0,r=t.length;r>n;++n)o=t[n],a(o,s);return s.join("")})(t)}function M(e,t,n,r){var o,a,s,i,l;if("string"!=typeof e)throw TypeError("Expected integer to be a String, got "+xt(e));if("string"!=typeof t)throw TypeError("Expected fraction to be a String, got "+xt(t));if("number"!=typeof n)throw TypeError("Expected radix to be a Number, got "+xt(n));if(null==r)r=0;else if("number"!=typeof r)throw TypeError("Expected exponent to be a Number, got "+xt(r));if(0!==r%1)throw RangeError("Expected exponent to be an integer, got "+r);for(;r>0;)e+=wt(t.charAt(0)||"0"),t=t.substring(1),--r;for(;0>r;)t=wt(e.slice(-1))+t,e=e.slice(0,-1),++r;for(i=0,o=0,a=e.length;a>o;++o)s=e.charAt(o),i=i*n+parseInt(s,n);if(t)for(l=0,a=t.length;a>l;++l)s=t.charAt(l),i+=parseInt(s,n)/Math.pow(n,l+1);return i}function D(e,t,n){var r,o;if("number"!=typeof e)throw TypeError("Expected radix to be a Number, got "+xt(e));if("function"!=typeof t)throw TypeError("Expected separator to be a Function, got "+xt(t));if("function"!=typeof n)throw TypeError("Expected digit to be a Function, got "+xt(n));return o=S(n),r=Xs(dl,["separator",t],ei,["integer",o],["fraction",p(Xs(Ia,Es,Ia,["this",o]),"")],Ia),Ba(function(t,n,r,o){var a,s,i,l;if(i=t.separator,s=t.integer,a=t.fraction,l=M(s,a,e),!isFinite(l))throw vs("Unable to parse number "+wt(Ls(n.source.substring(r,o))),n,r);return n.Const(r,l)})(r)}function F(e,t,n){var r,o,a,i,l,c;for(c=[],i=[],r=vt(e),o=0,a=r.length;a>o;++o)l=r[o],"number"==typeof l?i.push(l):l instanceof Wa||(c.push(t.Const(n,s(i))),i=[],c.push(l));return i.length>0&&c.push(t.Const(n,s(i))),c}function O(e,t){var n,r,o,a,s;for(r=0,o=e.indent.peek(),a=t;r<ht(o)&&(n=li(e,a));){if(a=n.index,s=Mo[n.value],!s)throw Error("Unexpected indent char: "+bt(JSON.stringify(n.value)));r+=+s}if(r>ht(o))throw vs("Mixed tabs and spaces in string literal",e,a);return r===o||g(e,a)?yn(a,r):void 0}function j(e,t,n){var r,o,a,s,i,l,c,u,f;for(c=[e.first],(0===c[0].length||1===c[0].length&&""===c[0][0])&&c.shift(),s=1,r=ht(e.numEmptyLines);r>s;++s)c.push([""]);for(c.push.apply(c,vt(e.rest)),i=c.length,i>0&&(0===c[i-1].length||1===c[i-1].length&&""===c[i-1][0])&&(c.pop(),--i),f=[],s=0,o=c.length;o>s;++s)l=c[s],s>0&&f.push("\n"),f.push.apply(f,vt(l));for(a=f.length-2;a>=0;--a)"string"==typeof f[a]&&"string"==typeof f[a+1]&&f.splice(a,2,""+f[a]+f[a+1]);for(a=0,o=f.length;o>a;++a)u=f[a],"string"==typeof u&&(f[a]=t.Const(n,u));return f}function L(e,t){var n;if("function"!=typeof e)throw TypeError("Expected quote to be a Function, got "+xt(e));if("function"!=typeof t)throw TypeError("Expected line to be a Function, got "+xt(t));return n=Xs(e,ei,["first",t],["numEmptyLines",_l(Xs(ii,["this",g]),!0)],["rest",p(k(Xs(B,["this",p($s(Xs(O,["this",t]),g),function(){return[]})],p(g),N)),function(){return[]})],e),Ba(function(e,t,n){var r,o,a,s,i,l;for(r=[],o=vt(j(e,t,n)),a=0,s=o.length;s>a;++a)i=o[a],i.isConstValue("")||r.push(i);return l=r,0===l.length?t.Const(n,""):1===l.length&&l[0].isConstType("string")?l[0]:t.string(n,l)})(n)}function R(e,t){var n,r,o,a,s,i;if(a=Ta(e,t),a&&(i=e.getConst(a.value))){if(e.inAst.peek())return yn(a.index,e.MacroConst(t,a.value));for(n=i.value,r=a.index;"object"==typeof n&&null!==n;){if(s=Wn(e,r),!s)throw vs("Constant '"+wt(a.value)+"' cannot appear without being accessed upon.",e,t);if(!s.value.isConst())throw vs("Constant '"+wt(a.value)+"' must only be accessed with constant keys.",e,r);if(o=s.value.constValue(),!mt.call(n,o))throw vs("Unknown key "+bt(JSON.stringify(String(o)))+" in constant.",e,r);n=n[o],r=s.index}return yn(r,e.Const(t,n))}}function U(e,t){var n;return n=R(e,t),n&&null==n.value.value?n:void 0}function P(e,t,n){var r;if(!(e instanceof Da))throw TypeError("Expected node to be a "+_t(Da)+", got "+xt(e));return r=t.getMacroByLabel("mutateFunction"),r?r.func({op:"",node:e},t,n):e}function V(e,t){var n,r,o,a,s;for(s=0,n=vt(e),r=0,o=n.length;o>r;++r)if(a=n[r],a instanceof ms&&a.spread&&(++s,s>1))throw vs("Cannot have more than one spread parameter",t,t.indexFromPosition(a.line,a.column));return e}function q(e){var t;if(!ut(e))throw TypeError("Expected array to be an Array, got "+xt(e));for(;e.length&&(t=e[e.length-1],t instanceof Wa);)e.pop();return e}function G(e,t){function n(t,n){return function(r,o){return s.func({left:r,op:t,right:n},e,o)}}var r,o,a,s,i,l;for(r=vt(e.assignOperators()),o=r.length;o--;)if(s=r[o],l=s.rule,a=l(e,t),a&&(i=zr(e,a.index)))return yn(i.index,n(a.value,i.value))}function W(e,t){var n,r;return n=go(e,t),n&&(r=G(e,n.index))?yn(r.index,r.value(n.value,t)):void 0}function J(e,t){var n,r,o,a,s,i,l;for(n=vt(e.allBinaryOperators()),r=n.length;r--;)if(l=n[r],s=!1,o=t,l.invertible&&(a=wa(e,t),a.value&&(s=!0),o=a.index),i=l.rule(e,o))return yn(i.index,{op:i.value,operator:l,inverted:s})}function z(e,t){return e.disallowSpaceBeforeAccess.peek()?yn(t):Or(e,t)}function H(e,t){var n,r,o,a,s;for(n=vt(e),r=0,o=n.length;o>r;++r)s=n[r],s instanceof Ai&&(a=s.ident,a instanceof Eo&&t.add(a,!0,zi.any))}function Y(e){if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));return e.replace(/\s+/g," ")}function $(e,t){var n,r,o,a,i,l;for(i=e.source,a=i.length,o=t,r=[];a>o&&!(Cr(e,o)||Br(e,o)||Ar(e,o));++o)n=i.charCodeAt(o),13===n&&10===i.charCodeAt(o+1)&&(n=10,++o),r.push(n);return o!==t?(l=s(r),e.options.embeddedUnpretty&&(l=Y(l)),yn(o,e.EmbedWrite(t,e.Const(t,l),!1))):void 0}function X(e,t){var n,r,o,a,s;if(s=Ar(e,t)){for(o=s.index,a=e.source.length;a>o;){if(r=wr(e,o)){o=r.index;break}if(n=y(e,o),!n)break;if(o===n.index)throw Error("Infinite loop detected");o=n.index}return yn(o,e.Nothing(t))}}function K(e,t,n){var r,o,a,s,i,l,c,u,f;for(u=[],r=vt(e),i=0,a=r.length;a>i;++i)for(l=r[i],o=vt(l),c=0,s=o.length;s>c;++c){if(f=o[c],!(f instanceof Da))throw TypeError("Expected lines["+i+"]["+c+"] to be a Node, got "+xt(f));f instanceof un&&null==l.label?u.push.apply(u,vt(f.nodes)):f instanceof Wa||u.push(f)}switch(u.length){case 0:return t.Nothing(n);case 1:return u[0];default:return t.Block(n,u)}}function Z(){return ta({Logic:Ms($o),Expression:Gr,Assignment:W,ExpressionOrAssignment:Jr,ExpressionOrAssignmentOrBody:zr,FunctionDeclaration:Kr,Statement:_i,Body:fn,BodyNoEnd:pn,GeneratorBody:no,GeneratorBodyNoEnd:ro,End:v,Identifier:ho,SimpleAssignable:bo,Parameter:ps,InvocationArguments:Ro,ObjectLiteral:Pt,ArrayLiteral:Ut,DedentedBody:tr,ObjectKey:Ya,Type:Xi,NoSpace:La,ColonEqual:Fn},ra,fl,rs,Xs)}var Q,et,tt,nt,rt,ot,at,st,it,lt,ct,ut,ft,pt,dt,_t,ht,mt,yt,gt,bt,wt,vt,xt,It,Et,Ct,At,Bt,Tt,Nt,kt,St,Mt,Dt,Ft,Ot,jt,Lt,Rt,Ut,Pt,Vt,qt,Gt,Wt,Jt,zt,Ht,Yt,$t,Xt,Kt,Zt,Qt,en,tn,nn,rn,on,an,sn,ln,cn,un,fn,pn,dn,_n,hn,mn,yn,gn,bn,wn,vn,xn,In,En,Cn,An,Bn,Tn,Nn,kn,Sn,Mn,Dn,Fn,On,jn,Ln,Rn,Un,Pn,Vn,qn,Gn,Wn,Jn,zn,Hn,Yn,$n,Xn,Kn,Zn,Qn,er,tr,nr,rr,or,ar,sr,ir,lr,cr,ur,fr,pr,dr,_r,hr,mr,yr,gr,br,wr,vr,xr,Ir,Er,Cr,Ar,Br,Tr,Nr,kr,Sr,Mr,Dr,Fr,Or,jr,Lr,Rr,Ur,Pr,Vr,qr,Gr,Wr,Jr,zr,Hr,Yr,$r,Xr,Kr,Zr,Qr,eo,to,no,ro,oo,ao,so,io,lo,co,uo,fo,po,_o,ho,mo,yo,go,bo,wo,vo,xo,Io,Eo,Co,Ao,Bo,To,No,ko,So,Mo,Do,Fo,Oo,jo,Lo,Ro,Uo,Po,Vo,qo,Go,Wo,Jo,zo,Ho,Yo,$o,Xo,Ko,Zo,Qo,ea,ta,na,ra,oa,aa,sa,ia,la,ca,ua,fa,pa,da,_a,ha,ma,ya,ga,ba,wa,va,xa,Ia,Ea,Ca,Aa,Ba,Ta,Na,ka,Sa,Ma,Da,Fa,Oa,ja,La,Ra,Ua,Pa,Va,qa,Ga,Wa,Ja,za,Ha,Ya,$a,Xa,Ka,Za,Qa,es,ts,ns,rs,os,as,ss,is,ls,cs,us,fs,ps,ds,_s,hs,ms,ys,gs,bs,ws,vs,xs,Is,Es,Cs,As,Bs,Ts,Ns,ks,Ss,Ms,Ds,Fs,Os,js,Ls,Rs,Us,Ps,Vs,qs,Gs,Ws,Js,zs,Hs,Ys,$s,Xs,Ks,Zs,Qs,ei,ti,ni,ri,oi,ai,si,ii,li,ci,ui,fi,pi,di,_i,hi,mi,yi,gi,bi,wi,vi,xi,Ii,Ei,Ci,Ai,Bi,Ti,Ni,ki,Si,Mi,Di,Fi,Oi,ji,Li,Ri,Ui,Pi,Vi,qi,Gi,Wi,Ji,zi,Hi,Yi,$i,Xi,Ki,Zi,Qi,el,tl,nl,rl,ol,al,sl,il,ll,cl,ul,fl,pl,dl,_l,hl;Q=function(e,t){var n;if(null==e)throw TypeError("Expected parent to be an object, got "+xt(e));if(n=e[t],"function"!=typeof n)throw Error("Trying to bind child '"+String(t)+"' which is not a function");return function(){return n.apply(e,arguments)}},et=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},tt="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},nt=function(e,t){var n;if("number"!=typeof e)throw TypeError("Expected numArgs to be a Number, got "+xt(e));if("function"!=typeof t)throw TypeError("Expected f to be a Function, got "+xt(t));return e>1?(n=function(r){var o;return ht(r.length)>=e?t.apply(this,r):o=function(){return 0===arguments.length?o:n.call(this,r.concat(gt.call(arguments)))}},n([])):t},rt=function(){function e(){function t(e,t){var a;n&&(a=n,n=null,r=e,o=t,a.length&&Ks(function(){var e,t;for(t=0,e=a.length;e>t;++t)a[t]()}))}var n,r,o;return r=!1,o=null,n=[],{promise:{then:function(t,a,s){function i(){var e,n;try{e=r?a:t,"function"==typeof e?(n=e(o),n&&"function"==typeof n.then?n.then(c,f,s):c(n)):(r?f:c)(o)}catch(i){f(i)}}var l,c,u,f;return s!==!0&&(s=void 0),u=(l=e()).promise,c=l.fulfill,f=l.reject,n?n.push(i):s?i():Ks(i),u},sync:function(){var e,t;switch(t=0,e=0,this.then(function(n){return t=1,e=n},function(n){return t=2,e=n},!0),t){case 0:throw Error("Promise did not execute synchronously");case 1:return e;case 2:throw e;default:throw Error("Unknown state")}}},fulfill:function(e){t(!1,e)},reject:function(e){t(!0,e)}}}return e.fulfilled=function(t){var n;return n=e(),n.fulfill(t),n.promise},e.rejected=function(t){var n;return n=e(),n.reject(t),n.promise},e}(),ot=function(e,t){function n(n,a){var s;try{s=e[n](a)}catch(i){return rt.rejected(i)}return s.done?rt.fulfilled(s.value):s.value.then(r,o,t)}function r(e){return n("send",e)}function o(e){return n("throw",e)}if("object"!=typeof e||null===e)throw TypeError("Expected generator to be an Object, got "+xt(e));if("function"!=typeof e.send)throw TypeError("Expected generator.send to be a Function, got "+xt(e.send));if("function"!=typeof e["throw"])throw TypeError("Expected generator.throw to be a Function, got "+xt(e["throw"]));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected allowSync to be a Boolean, got "+xt(t));return r(void 0)},at=function(e,t){function n(){var n,a,s,i,l;for(a=o,s=e-1;s>=0;--s)l=null!=(n=arguments[s])?n:r,i=a.get(l),null==i&&(i=0===s?t.apply(this,arguments):cl(),a.set(l,i)),a=i;return a}var r,o,a;return o=cl(),r={},a=n(),a.generic=n,a},st=function(){function e(){return!0}function t(e){return"string"==typeof e}function n(e){return"number"==typeof e}function r(e){return"function"==typeof e}function o(e){return"boolean"==typeof e}return function(a){if(null==a)return e;switch(a){case String:return t;case Number:return n;case Function:return r;case Boolean:return o;case Array:return ut;case Object:return ft;default:return function(e){return e instanceof a}}}}(),it=function(e,t){var n;for(n in t)mt.call(t,n)&&(e[n]=t[n]);return e},lt="function"==typeof Array.prototype.indexOf?function(){var e;return e=Array.prototype.indexOf,function(t,n){return-1!==e.call(n,t)}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},ct=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+xt(e));if(0!==e%1)throw TypeError("Expected an integer, got "+e);return e},ut="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),ft=function(e){return"object"==typeof e&&null!==e},pt=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e},dt=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},_t=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+xt(e));return e.displayName||e.name||""},ht=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+xt(e));return e},mt=Object.prototype.hasOwnProperty,yt=function(e,t){var n;if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected allowSync to be a Boolean, got "+xt(t));return"function"==typeof e?(n=function(){return ot(e.apply(this,arguments))},n.sync=function(){return ot(e.apply(this,arguments),!0).sync()},n):ot(e,t)},gt=Array.prototype.slice,bt=function(e){if("string"!=typeof e)throw TypeError("Expected a string, got "+xt(e));return e},wt=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+xt(e))},vt=function(e){if(null==e)throw TypeError("Expected an object, got "+xt(e));return ut(e)?e:"string"==typeof e?e.split(""):gt.call(e)},xt=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),Ks="function"==typeof n.setImmediate?n.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var e;return e=process.nextTick,function(t){var n;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+xt(t));return n=gt.call(arguments,1),n.length?e(function(){t.apply(void 0,vt(n))}):e(t)}}():function(e){var t;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+xt(e));return t=gt.call(arguments,1),t.length?setTimeout(function(){e.apply(void 0,vt(t))},0):setTimeout(e,0)},cl="function"==typeof n.WeakMap?n.WeakMap:cl=function(){function e(){var t;return t=this instanceof e?this:tt(o),t._keys=[],t._values=[],t._chilly=[],t._uid=n(),t}function t(){return Math.random().toString(36).slice(2)}function n(){return wt(t())+"-"+wt((new Date).getTime())+"-"+wt(t())+"-"+wt(t())}function r(e){var t,n;n=this._uid,mt.call(e,n)&&(t=this._chilly,-1===t.indexOf(e)&&(t.push(e),this._keys.push(e),this._values.push(e[n])))}var o,a,s;return o=e.prototype,e.displayName="WeakMap",s=Object.isExtensible||function(){return!0},o.get=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return s(e)?mt.call(e,t=this._uid)?e[t]:void 0:(r.call(this,e),n=this._keys.indexOf(e),-1===n?void 0:this._values[n])},o.has=function(e){if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");return s(e)?mt.call(e,this._uid):(r.call(this,e),-1!==this._keys.indexOf(e))},a="function"==typeof Object.defineProperty?Object.defineProperty:function(e,t,n){e[t]=n.value},o.set=function(e,t){var n,o;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");s(e)?a(e,this._uid,{configurable:!0,writable:!0,enumerable:!1,value:t}):(r.call(this,e),o=this._keys,n=o.indexOf(e),-1===n&&(n=o.length,o[n]=e),this._values[n]=t)},o["delete"]=function(e){var t,n;if(Object(e)!==e)throw TypeError("Invalid value used as weak map key");s(e)?delete e[this._uid]:(r.call(this,e),n=this._keys,t=n.indexOf(e),-1!==t&&(n.splice(t,1),this._values.splice(t,1)))},e}(),Da=t("./parser-nodes"),Js=t("./parser-scope"),Qo=t("./parser-macrocontext"),ta=t("./parser-macroholder"),zi=t("./types"),yi=t("./utils").stringRepeat,Lt=t("./parser-utils").addParamToScope,Ls=(St=t("./utils")).quote,al=St.unique,ao=St.getPackageVersion,jt=Da.Access,Ot=Da.AccessMulti,Vt=Da.Args,Wt=Da.Array,Yt=Da.Assign,an=Da.Binary,un=Da.Block,bn=Da.Break,vn=Da.Call,Pn=Da.Comment,Jn=Da.Const,Hn=Da.Continue,Zn=Da.Debugger,ir=Da.Def,Mr=Da.EmbedWrite,Vr=Da.Eval,Yr=Da.For,Hr=Da.ForIn,eo=Da.Function,Eo=Da.Ident,Co=Da.If,Xo=Da.MacroAccess,Zo=Da.MacroConst,Wa=Da.Nothing,Ka=Da.Object,ms=Da.Param,Ps=Da.Regexp,Vs=Da.Return,Gs=Da.Root,ui=Da.Spread,bi=Da.Super,wi=Da.Switch,Ei=Da.SyntaxChoice,Ci=Da.SyntaxMany,Ai=Da.SyntaxParam,Bi=Da.SyntaxSequence,Ni=Da.This,Di=Da.Throw,Fi=Da.Tmp,Oi=Da.TmpWrapper,Wi=Da.TryCatch,Ji=Da.TryFinally,Hi=Da.TypeFunction,Yi=Da.TypeGeneric,$i=Da.TypeObject,Ki=Da.TypeUnion,Zi=Da.Unary,ll=Da.Var,pl=Da.Yield,vs=function(e){function t(n,o,a){var s,i,l;if(s=this instanceof t?this:tt(r),null==n)n="";else if("string"!=typeof n)throw TypeError("Expected message to be a String, got "+xt(n));if(s.message=n,null==o)o=null;else if(!(o instanceof ws))throw TypeError("Expected parser to be one of "+(_t(ws)+" or null")+", got "+xt(o));if(null==a)a=0;else if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+xt(a));return s.index=a,o?(s.source=o.source,s.filename=o.options.filename,l=o.getPosition(a),s.line=l.line,s.column=l.column,s.message=n+(" at "+(s.filename?wt(s.filename)+":":"")+wt(s.line)+":"+wt(s.column))):(s.line=0,s.column=0),i=e.call(s,s.message),"function"==typeof e.captureStackTrace?e.captureStackTrace(s,t):"stack"in i&&(s.stack=i.stack),s}var n,r;return n=e.prototype,r=t.prototype=tt(n),r.constructor=t,t.displayName="ParserError","function"==typeof e.extended&&e.extended(t),r.name="ParserError",t}(Error),ea=function(e){function t(n,o,a){var s,i,l,c;if(s=this instanceof t?this:tt(r),null==n)n="";else if(!(n instanceof e)&&"string"!=typeof n)throw TypeError("Expected inner to be one of "+(_t(e)+" or String")+", got "+xt(n));if(null==o)o=null;else if(!(o instanceof ws))throw TypeError("Expected parser to be one of "+(_t(ws)+" or null")+", got "+xt(o));if(null==a)a=0;else if("number"!=typeof a)throw TypeError("Expected index to be a Number, got "+xt(a));return s.index=a,o?(s.source=o.source,s.filename=o.options.filename,c=o.getPosition(a),s.line=c.line,s.column=c.column,l=[],n instanceof e?("Error"!==xt(n)&&(l.push(xt(n)),l.push(": ")),l.push(String(n.message))):l.push(String(n)),l.push(" at "),s.filename&&(l.push(String(s.filename)),l.push(":")),s._message=l.join(""),l.push(s.line),l.push(":"),l.push(s.column),s.message=l.join("")):(s.line=0,s.column=0,s._message="",s.message=""),i=e.call(s,s.message),"function"==typeof e.captureStackTrace?e.captureStackTrace(s,t):"stack"in i&&(s.stack=i.stack),n instanceof e&&(s.inner=n),s}var n,r;return n=e.prototype,r=t.prototype=tt(n),r.constructor=t,t.displayName="MacroError","function"==typeof e.extended&&e.extended(t),r.name="MacroError",r.setPosition=function(e,t){if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+xt(e));
if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+xt(t))},t}(Error),yn=function(){function e(n,r){var o;if(o=this instanceof e?this:tt(t),"number"!=typeof n)throw TypeError("Expected index to be a Number, got "+xt(n));if(o.index=n,o.value=r,0!==n%1||0>n)throw RangeError("Expected index to be a non-negative integer, got "+n);return o}var t;return t=e.prototype,e.displayName="Box",e}(),wn=function(){var e;return e=-1,function(t){function n(e,n){var o,a,s,i,l,c,u,f;return s=e.cache,i=e.indent.peek(),l=null!=(o=s[i])?o:s[i]=[],c=null!=(o=l[a=n%16])?o:l[a]=[],u=c[r],u&&u.start===n?u.result:(f=t(e,n),c[r]={start:n,result:f},f)}var r;if("function"!=typeof t)throw TypeError("Expected rule to be a Function, got "+xt(t));return r=++e,n}}(),$r=function(){var e;return e=String.fromCharCode,function(t){return t>65535?""+e((t-65536>>10)+55296)+e((t-65536)%1024+56320):e(t)}}(),fa=at(1,function(e){var t;return t=st(e),function(n,r){if("string"!=typeof n)throw TypeError("Expected name to be a String, got "+xt(n));if(!t(r))throw TypeError("Expected value to be a "+_t(e)+", got "+xt(r));return function(e){if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));return function(t,o){var a;a=t[n],a.push(r);try{return e(t,o)}finally{a.pop()}}}}}),Ba=nt(2,function(e,t){function n(n,r){var o;if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return o=t(n,r),o?yn(o.index,e(o.value,n,r,o.index)):void 0}if("function"!=typeof t)throw TypeError("Expected rule to be a Function, got "+xt(t));return e===r?t:("function"!=typeof e&&(e=o(e)),n.rule=t,n.mutator=e,l(n))}),Aa=at(1,function(){return function(e,t,n,o){var a;if("function"!=typeof e)throw TypeError("Expected rule to be a Function, got "+xt(e));if(null==t)t=0;else if("number"!=typeof t)throw TypeError("Expected minimum to be a Number, got "+xt(t));if(null==n)n=1/0;else if("number"!=typeof n)throw TypeError("Expected maximum to be a Number, got "+xt(n));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected ignoreValue to be a Boolean, got "+xt(o));if(0!==t%1||0>t)throw RangeError("Expected minimum to be a non-negative integer, got "+t);if(n!==1/0&&0!==n%1||t>n)throw RangeError("Expected maximum to be Infinity or an integer of at least "+t+", got "+n);return a=r,o?l(function(r,o){var a,s,i;if("number"!=typeof o)throw TypeError("Expected index to be a Number, got "+xt(o));for(a=0;n>a;){if(s=e(r,o),!s){if(t>a)return;break}if(++a,i=s.index,i===o)throw Error("Infinite loop detected");o=i}return yn(o,a)}):a===r?l(function(r,o){var a,s,i,l;if("number"!=typeof o)throw TypeError("Expected index to be a Number, got "+xt(o));for(l=[],a=0;n>a;){if(s=e(r,o),!s){if(t>a)return;break}if(l[a]=s.value,++a,i=s.index,i===o)throw Error("Infinite loop detected");o=i}return yn(o,l)}):l(Ba(function(e,t){var n,r,o,s,i;for(n=[],r=vt(e),o=0,s=r.length;s>o;++o)i=r[o],n.push(a(i.value,t,i.startIndex,i.endIndex));return n},function(r,o){var a,s,i,l;if("number"!=typeof o)throw TypeError("Expected index to be a Number, got "+xt(o));for(l=[],a=0;n>a;){if(s=e(r,o),!s){if(t>a)return;break}if(i=s.index,l[a]={startIndex:o,endIndex:i,value:s.value},i===o)throw Error("Infinite loop detected");o=i,++a}return yn(o,l)}))}}),_l=at(1,function(e){return function(t,n){return Aa.generic(e)(t,0,1/0,n)}}),os=at(1,function(e){return function(t,n){return Aa.generic(e)(t,1,1/0,n)}}),rs=at(1,function(){return function(){var e,t,n,r,o,a,s,i,c,u,f;if(u=gt.call(arguments),!ut(u))throw TypeError("Expected rules to be an Array, got "+xt(u));for(t=u.length;t--;)if("function"!=typeof u[t])throw TypeError("Expected "+("rules["+t+"]")+" to be a Function, got "+xt(u[t]));switch(u.length){case 0:throw Error("Expected rules to be non-empty");case 1:return u[0];default:for(s=[],n=0,o=u.length;o>n;++n)if(c=u[n],c.oneOf)for(e=vt(c.oneOf),r=0,a=e.length;a>r;++r)f=e[r],s.push(f);else s.push(c);return i=function(e,t){var n,r,o,a;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(r=0,n=s.length;n>r;++r)if(a=s[r],o=a(e,t))return o},i.oneOf=s,l(i)}}}),hl=at(1,function(e){return function(){var t;return t=gt.call(arguments),_l.generic(e)(rs.generic(e).apply(void 0,vt(t)))}}),as=at(1,function(e){return function(){var t;return t=gt.call(arguments),os.generic(e)(rs.generic(e).apply(void 0,vt(t)))}}),ei={},Xs=at(1,function(){return function(){var e,t,n,r,o,a,s,i,c,u,f,p,d,_,h;if(a=gt.call(arguments),0===a.length)throw Error("Expected items to be non-empty");if(1===a.length)if(ut(a[0])){if("this"===a[0][0])return a[0][1]}else if("function"==typeof a[0])return p=a[0],function(e,t){var n;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));return(n=p(e,t))?yn(n.index):void 0};for(d=[],c=[],i=[],u=[],h=-1,n=!1,_=1/0,t=!1,r=0,e=a.length;e>r;++r){if(o=a[r],s=void 0,p=void 0,ut(o)){if(2!==o.length)throw Error("Found an array with "+wt(o.length)+" length at index #"+r);if("string"!=typeof o[0])throw TypeError("Array in index #"+r+" has an improper key: "+xt(o[0]));if("function"!=typeof o[1])throw TypeError("Array in index #"+r+" has an improper rule: "+xt(o[1]));if(s=o[0],lt(s,i))throw Error("Can only have one "+bt(JSON.stringify(s))+" key in sequential");i.push(s),p=o[1],"this"===s?h=d.length:n=!0}else{if("function"!=typeof o){if(o===ei){if(_!==1/0)throw Error("Can only have one SHORT_CIRCUIT per sequential");_=r;continue}throw TypeError("Found a non-array, non-function in index #"+r+": "+xt(o))}p=o}u.push(null),d.push(p),c.push(s)}if(-1!==h){if(n)throw Error("Cannot specify both the 'this' key and another key");return t?(f=u[h],l(Ba(function(e,t){return f(e.value,t,e.startIndex,e.endIndex)},function(e,t){var n,r,o,a,s,i;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(i=0,r=0,n=d.length;n>r;++r){if(s=d[r],o=s(e,t),!o){if(_>r)return;throw ei}r===h&&(a={value:o.value,startIndex:t,endIndex:o.index}),t=o.index}return yn(t,a)}))):l(function(e,t){var n,r,o,a,s;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(r=0,n=d.length;n>r;++r){if(s=d[r],o=s(e,t),!o){if(_>r)return;throw ei}t=o.index,r===h&&(a=o.value)}return yn(t,a)})}if(n)return t?l(Ba(function(e,t){var n,r,o,a,s,l;for(l={},r=0,n=i.length;n>r;++r)a=i[r],a&&(o=e[a],s=u[r],l[a]=s?s(o.value,t,o.startIndex,o.endIndex):o.value);return l},function(e,t){var n,r,o,a,s,i,l;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(i={},o={},r=0,n=d.length;n>r;++r){if(l=d[r],a=l(e,t),!a){if(_>r)return;throw ei}s=c[r],s&&(i[s]={value:a.value,startIndex:t,endIndex:a.index}),t=a.index}return yn(t,i)})):l(function(e,t){var n,r,o,a,s,i;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(i={},n=0,a=d.length;a>n;++n){if(s=d[n],r=s(e,t),!r){if(_>n)return;throw ei}t=r.index,o=c[n],o&&(i[o]=r.value)}return yn(t,i)});if(t)throw Error("Cannot use a mutator on a sequential without keys");return l(function(e,t){var n,r,o,a;if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));for(r=0,n=d.length;n>r;++r){if(a=d[r],o=a(e,t),!o){if(_>r)return;throw ei}t=o.index}return yn(t)})}}),qn=at(1,function(){return function(e,t){if("function"!=typeof e)throw TypeError("Expected headRule to be a Function, got "+xt(e));if("function"!=typeof t)throw TypeError("Expected tailRule to be a Function, got "+xt(t));return l(function(n,r){var o,a;if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return o=e(n,r),o&&(a=t(n,o.index))?yn(a.index,[o.value].concat(a.value)):void 0})}}),Vn=at(1,function(){return function(e,t){if("function"!=typeof e)throw TypeError("Expected leftRule to be a Function, got "+xt(e));if("function"!=typeof t)throw TypeError("Expected rightRule to be a Function, got "+xt(t));return l(function(n,r){var o,a;if("number"!=typeof r)throw TypeError("Expected index to be a Number, got "+xt(r));return o=e(n,r),o&&(a=t(n,o.index))?yn(a.index,o.value.concat(a.value)):void 0})}}),$s=at(1,function(){return function(e,t,n){if("function"!=typeof e)throw TypeError("Expected itemRule to be a Function, got "+xt(e));if(null==t)t=_;else if("function"!=typeof t)throw TypeError("Expected separatorRule to be a Function, got "+xt(t));if(null==n)n=e;else if("function"!=typeof n)throw TypeError("Expected tailRule to be a Function, got "+xt(n));return l(function(r,o){var a,s,i,l,c,u,f;if("number"!=typeof o)throw TypeError("Expected index to be a Number, got "+xt(o));if(s=e(r,o)){for(a=s.index,u=[s.value],i=0;(f=t(r,a),f)&&(l=n(r,f.index),l);++i){if(c=l.index,c===a)throw Error("Infinite loop detected");a=c,u.push(l.value)}return yn(a,u)}})}}),Aa.generic=function(){return Aa},rs.generic=function(){return rs},Xs.generic=function(){return Xs},qn.generic=function(){return qn},Vn.generic=function(){return Vn},$s.generic=function(){return $s},li=u("space",i([9,11,12,32,160,5760,6158,[8192,8202],8239,8287,12288,65263])),ci=wn(_l(li,!0)),dl=c('"0"',48),Qn=u("[0-9]",i([[48,57]])),Es=c('"."',46),Sn=c('":"',58),pr=wn((St=Xs(Sn,Sn),Ba("::")(St))),Bs=c('"|"',124),Lr=c('"="',61),Ca=c('"-"',45),Ts=c('"+"',43),Ns=u("[+\\-]",i([43,45])),Jo=u("letter",i([[65,90],[97,122],170,181,186,[192,214],[216,246],[248,705],[710,721],[736,740],748,750,[880,884],886,887,[890,893],902,[904,906],908,[910,929],[931,1013],[1015,1153],[1162,1317],[1329,1366],1369,[1377,1415],[1488,1514],[1520,1522],[1569,1610],1646,1647,[1649,1747],1749,1765,1766,1774,1775,[1786,1788],1791,1808,[1810,1839],[1869,1957],1969,[1994,2026],2036,2037,2042,[2048,2069],2074,2084,2088,[2308,2361],2365,2384,[2392,2401],2417,2418,[2425,2431],[2437,2444],2447,2448,[2451,2472],[2474,2480],2482,[2486,2489],2493,2510,2524,2525,[2527,2529],2544,2545,[2565,2570],2575,2576,[2579,2600],[2602,2608],2610,2611,2613,2614,2616,2617,[2649,2652],2654,[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],2738,2739,[2741,2745],2749,2768,2784,2785,[2821,2828],2831,2832,[2835,2856],[2858,2864],2866,2867,[2869,2873],2877,2908,2909,[2911,2913],2929,2947,[2949,2954],[2958,2960],[2962,2965],2969,2970,2972,2974,2975,2979,2980,[2984,2986],[2990,3001],3024,[3077,3084],[3086,3088],[3090,3112],[3114,3123],[3125,3129],3133,3160,3161,3168,3169,[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],3261,3294,3296,3297,[3333,3340],[3342,3344],[3346,3368],[3370,3385],3389,3424,3425,[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632],3634,3635,[3648,3654],3713,3714,3716,3719,3720,3722,3725,[3732,3735],[3737,3743],[3745,3747],3749,3751,3754,3755,[3757,3760],3762,3763,3773,[3776,3780],3782,3804,3805,3840,[3904,3911],[3913,3948],[3976,3979],[4096,4138],4159,[4176,4181],[4186,4189],4193,4197,4198,[4206,4208],[4213,4225],4238,[4256,4293],[4304,4346],4348,[4352,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5024,5108],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],6103,6108,[6176,6263],[6272,6312],6314,[6320,6389],[6400,6428],[6480,6509],[6512,6516],[6528,6571],[6593,6599],[6656,6678],[6688,6740],6823,[6917,6963],[6981,6987],[7043,7072],7086,7087,[7168,7203],[7245,7247],[7258,7293],[7401,7404],[7406,7409],[7424,7615],[7680,7957],[7960,7965],[7968,8005],[8008,8013],[8016,8023],8025,8027,8029,[8031,8061],[8064,8116],[8118,8124],8126,[8130,8132],[8134,8140],[8144,8147],[8150,8155],[8160,8172],[8178,8180],[8182,8188],8305,8319,[8336,8340],8450,8455,[8458,8467],8469,[8473,8477],8484,8486,8488,[8490,8493],[8495,8505],[8508,8511],[8517,8521],8526,8579,8580,[11264,11310],[11312,11358],[11360,11492],[11499,11502],[11520,11557],[11568,11621],11631,[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],11823,12293,12294,[12337,12341],12347,12348,[12353,12438],[12445,12447],[12449,12538],[12540,12543],[12549,12589],[12593,12686],[12704,12727],[12784,12799],[13312,19893],[19968,40907],[40960,42124],[42192,42237],[42240,42508],[42512,42527],42538,42539,[42560,42591],[42594,42606],[42623,42647],[42656,42725],[42775,42783],[42786,42888],42891,42892,[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],43259,[43274,43301],[43312,43334],[43360,43388],[43396,43442],43471,[43520,43560],[43584,43586],[43588,43595],[43616,43638],43642,[43648,43695],43697,43701,43702,[43705,43709],43712,43714,[43739,43741],[43968,44002],[44032,55203],[55216,55238],[55243,55291],[63744,64045],[64048,64109],[64112,64217],[64256,64262],[64275,64279],64285,[64287,64296],[64298,64310],[64312,64316],64318,64320,64321,64323,64324,[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65262],[65264,65276],[65313,65338],[65345,65370],[65382,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500]])),za=u("number",i([[48,57],178,179,185,[188,190],[1632,1641],[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2548,2553],[2662,2671],[2790,2799],[2918,2927],[3046,3058],[3174,3183],[3192,3198],[3302,3311],[3430,3445],[3664,3673],[3792,3801],[3872,3891],[4160,4169],[4240,4249],[4969,4988],[5870,5872],[6112,6121],[6128,6137],[6160,6169],[6470,6479],[6608,6618],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],8304,[8308,8313],[8320,8329],[8528,8578],[8581,8585],[9312,9371],[9450,9471],[10102,10131],11517,12295,[12321,12329],[12344,12346],[12690,12693],[12832,12841],[12881,12895],[12928,12937],[12977,12991],[42528,42537],[42726,42735],[43056,43061],[43216,43225],[43264,43273],[43472,43481],[43600,43609],[44016,44025],[65296,65305]])),rl=c('"_"',95),fr=c('"$"',36),Qt=c('"@"',64),uo=c('"#"',35),Is=c('"%"',37),Ur=c('"="',61),Ii=u("symbolic",i([33,35,37,38,42,43,45,47,[60,63],92,94,96,124,126,127,[128,159],[161,169],[171,177],180,[182,184],187,191,215,247,[706,709],[722,735],[741,747],749,[751,879],885,888,889,[894,901],903,907,909,930,1014,[1154,1161],[1318,1328],1367,1368,[1370,1376],[1416,1487],[1515,1519],[1523,1568],[1611,1631],[1642,1645],1648,1748,[1750,1764],[1767,1773],1789,1790,[1792,1807],1809,[1840,1868],[1958,1968],[1970,1983],[2027,2035],[2038,2041],[2043,2047],[2070,2073],[2075,2083],[2085,2087],[2089,2307],[2362,2364],[2366,2383],[2385,2391],[2402,2405],2416,[2419,2424],[2432,2436],2445,2446,2449,2450,2473,2481,[2483,2485],[2490,2492],[2494,2509],[2511,2523],2526,[2530,2533],2546,2547,[2554,2564],[2571,2574],2577,2578,2601,2609,2612,2615,[2618,2648],2653,[2655,2661],2672,2673,[2677,2692],2702,2706,2729,2737,2740,[2746,2748],[2750,2767],[2769,2783],[2786,2789],[2800,2820],2829,2830,2833,2834,2857,2865,2868,[2874,2876],[2878,2907],2910,[2914,2917],2928,[2930,2946],2948,[2955,2957],2961,[2966,2968],2971,2973,[2976,2978],[2981,2983],[2987,2989],[3002,3023],[3025,3045],[3059,3076],3085,3089,3113,3124,[3130,3132],[3134,3159],[3162,3167],[3170,3173],[3184,3191],[3199,3204],3213,3217,3241,3252,[3258,3260],[3262,3293],3295,[3298,3301],[3312,3332],3341,3345,3369,[3386,3388],[3390,3423],[3426,3429],[3446,3449],[3456,3460],[3479,3481],3506,3516,3518,3519,[3527,3584],3633,[3636,3647],[3655,3663],[3674,3712],3715,3717,3718,3721,3723,3724,[3726,3731],3736,3744,3748,3750,3752,3753,3756,3761,[3764,3772],3774,3775,3781,[3783,3791],3802,3803,[3806,3839],[3841,3871],[3892,3903],3912,[3949,3975],[3980,4095],[4139,4158],[4170,4175],[4182,4185],[4190,4192],[4194,4196],[4199,4205],[4209,4212],[4226,4237],4239,[4250,4255],[4294,4303],4347,[4349,4351],4681,4686,4687,4695,4697,4702,4703,4745,4750,4751,4785,4790,4791,4799,4801,4806,4807,4823,4881,4886,4887,[4955,4968],[4989,4991],[5008,5023],[5109,5120],5741,5742,[5787,5791],[5867,5869],[5873,5887],5901,[5906,5919],[5938,5951],[5970,5983],5997,[6001,6015],[6068,6102],[6104,6107],[6109,6111],[6122,6127],[6138,6157],6159,[6170,6175],[6264,6271],6313,[6315,6319],[6390,6399],[6429,6469],6510,6511,[6517,6527],[6572,6592],[6600,6607],[6619,6655],[6679,6687],[6741,6783],[6794,6799],[6810,6822],[6824,6916],[6964,6980],[6988,6991],[7002,7042],[7073,7085],[7098,7167],[7204,7231],[7242,7244],[7294,7400],7405,[7410,7423],[7616,7679],7958,7959,7966,7967,8006,8007,8014,8015,8024,8026,8028,8030,8062,8063,8117,8125,[8127,8129],8133,[8141,8143],8148,8149,[8156,8159],[8173,8177],8181,[8189,8191],[8203,8231],[8234,8238],[8240,8286],[8288,8303],8306,8307,[8314,8318],[8330,8335],[8341,8449],[8451,8454],8456,8457,8468,[8470,8472],[8478,8483],8485,8487,8489,8494,8506,8507,[8512,8516],[8522,8525],8527,[8586,9311],[9372,9449],[9472,10101],[10132,11263],11311,11359,[11493,11498],[11503,11516],11518,11519,[11558,11567],[11622,11630],[11632,11647],[11671,11679],11687,11695,11703,11711,11719,11727,11735,[11743,11822],[11824,12287],[12289,12292],[12296,12320],[12330,12336],12342,12343,[12349,12352],[12439,12444],12448,12539,[12544,12548],[12590,12592],[12687,12689],[12694,12703],[12728,12783],[12800,12831],[12842,12880],[12896,12927],[12938,12976],[12992,13311],[19894,19967],[40908,40959],[42125,42191],42238,42239,[42509,42511],[42540,42559],42592,42593,[42607,42622],[42648,42655],[42736,42774],42784,42785,42889,42890,[42893,43002],43010,43014,43019,[43043,43055],[43062,43071],[43124,43137],[43188,43215],[43226,43249],[43256,43258],[43260,43263],[43302,43311],[43335,43359],[43389,43395],[43443,43470],[43482,43519],[43561,43583],43587,[43596,43599],[43610,43615],[43639,43641],[43643,43647],43696,[43698,43700],43703,43704,43710,43711,43713,[43715,43738],[43742,43967],[44003,44015],[44026,44031],[55204,55215],[55239,55242],[55292,63743],64046,64047,64110,64111,[64218,64255],[64263,64274],[64280,64284],64286,64297,64311,64317,64319,64322,64325,[64434,64466],[64830,64847],64912,64913,[64968,65007],[65020,65135],65141,[65277,65295],[65306,65312],[65339,65344],[65371,65381],[65471,65473],65480,65481,65488,65489,65496,65497,[65501,65535]])),dr=c("'\"'",34),ni=c('"\'"',39),Li=wn(Aa(dr,3,3,!0)),Vi=wn(Aa(ni,3,3,!0)),Hs=c('";"',59),Xt=c('"*"',42),xn=c('"^"',94),us=c('"["',91),is=c('"{"',123),An=c('"}"',125),en=c('"\\\\"',92),Ln=c('","',44),En=rs(g,b,function(e,t){return br(e,t)||vr(e,t)}),ga=wn(function(){function e(e,t){var n,r,o;if(o=e.source,47===o.charCodeAt(t)&&47===o.charCodeAt(+t+1))for(r=o.length,t-=-2;;++t)if(t>=r||13===(n=o.charCodeAt(t))||10===n||8232===n||8233===n)return yn(t)}function t(e,t){var n,r,o;if(r=e.source,o=t,47===r.charCodeAt(t)&&42===r.charCodeAt(+t+1)&&33!==r.charCodeAt(+t+2))for(n=r.length,t-=-2;;++t){if(t>=n)throw vs("Multi-line comment never ends",e,o);if(42===r.charCodeAt(t)&&47===r.charCodeAt(+t+1))return ii(e,+t+2)}}return p(rs(e,t))}()),ii=wn(Xs(ci,ga)),La=wn(h(li)),Dr=wn(w(g)),Fr=wn(_l(Dr,!0)),ai=wn(os(Dr,!0)),Or=Xs(Fr,ii),Ra=h(Dr),ls=wn(w(c('"("',40))),Tn=wn(w(c('")"',41))),cs=wn(w(us)),Nn=wn(w(c('"]"',93))),ss=wn(w(is)),Cn=wn(w(An)),Rr=w(Ur),xs=wn(w(Is)),ur=wn(w(fr)),jn=wn(w(Ln)),ma=wn(p(jn)),Rn=rs(Xs(["this",jn],Fr),ai),ya=wn(p(Rn)),Dt=Xs(ai,C),si=wn(function(e,t){return e.options.noindent?Fr(e,t):Dt(e,t)}),Un=wn(rs(Xs(jn,p(si)),si)),qr=wn(c('"!"',33)),ba=wn(p(qr)),ha=wn(p(Qt)),kn=wn(Xs(ii,["this",Sn],h(Sn))),On=wn(Xs(kn,ii,["this",g])),Ua=wn(h(kn)),Pa=wn(function(e,t){var n;if(n=e.options,n.noindent){if(On(e,t))return yn(t);if(n.embedded&&(Mn(e,t)||Dn(e,t)))return yn(t)}return Ua(e,t)}),Ma=wn(rs(Jo,rl,fr)),Na=wn(rs(Ma,za)),Sa=wn(os(Na)),Ga=wn(function(e,t){return yn(t,e.Nothing(t))}),Gr=function(e,t){return Gr(e,t)},_i=function(e,t){return _i(e,t)},fn=function(e,t){return fn(e,t)},pn=function(e,t){return pn(e,t)},$o=function(e,t){return $o(e,t)},Nt=wn((St=$s(qn(Ma,_l(Na)),Ca,Sa),Ba(function(e){var t,n,r,o,s;for(s=a(e[0]),t=vt(e),n=1,r=t.length;r>n;++n)o=t[n],s.push($r(o[0]).toUpperCase()),a(o,s,1);return s.join("")})(St))),Ta=wn(w(Nt)),Ft=wn((St=os(Ii),Ba(s)(St))),vi=wn(w(Ft)),Fn=wn(w((St=Xs(Sn,Ur),Ba(":=")(St)))),ka=wn(w(rs((St=w(as(Nt,Ft)),Ba(function(e){return e.join("")})(St)),Fn))),na=wn(w(Xs(["this",ka],Pa))),oa=$s.generic(String)(na,jn),il=wn(function(e,t){var n,r,o;if(r=na(e,t),r&&(n=e.getMacroByName(r.value))){if(o=n(e,t),!o)throw ei;return o}}),ul=I(function(e){if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));return x(Ta,e)}),xi=I(function(e){if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));return x(vi,e)}),ra=I(function(e){if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));return x(na,e)}),fl=I(function(e){var t,n,r,o,a,s;if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));for(s=[ii],t=vt(e.split(/([a-z]+)/gi)),o=0,n=t.length;n>o;++o)a=t[o],a&&s.push(x(0===o%2?Ft:Nt,a));return r=Xs.apply(void 0,vt(s)),Ba(e)(r)}),kt=tt(null),kt[9]=4,kt[32]=1,Mo=kt,St=_l(li),$n=Ba(function(e){var t,n,r,o,a;for(o=0,t=vt(e),n=t.length;n--;){if(r=t[n],a=Mo[r],!a)throw Error("Unexpected indent char: "+bt(JSON.stringify(r)));o+=ht(a)}return o})(St),Ti=wn((St=ul("this"),Ba(function(e,t,n){return t.This(n)})(St))),Mi=wn((St=w(Qt),Ba(function(e,t,n){return t.This(n)})(St))),qt=wn((St=ul("arguments"),Ba(function(e,t,n){return t.Args(n)})(St))),ki=wn(rs.generic(Ni)(Ti,Mi)),Si=rs.generic(Ni)(Xs(["this",Ti],Es),Xs(["this",Mi],p(Es))),so=function(){var e,t;return e=["as","AST","arguments","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","import","Infinity","instanceof","in","let","macro","mutable","NaN","new","not","null","package","private","protected","public","return","static","super","switch","then","this","throw","true","try","typeof","undefined","var","void","while","with","yield"],t=vt(e).concat(["end"]).sort(),function(n){return n&&n.noindent?t:e}}(),pi=wn(w((St=Xs(Es,Es,Es),Ba("...")(St)))),xa=wn(p(pi)),fi=wn((St=Xs(["spread",xa],["node",Gr]),Ba(function(e,t,n){var r,o;return o=e.spread,r=e.node,"..."===o?t.Spread(n,r):r})(St))),Rt=fa.generic(Boolean)("disallowSpaceBeforeAccess",!1),Bn=wn(Xs(La,ls,ii,["this",Rt(Vn.generic(Da)(p(Xs(["this",$s.generic(Da)(fi,jn)],ma),function(){return[]}),p(k(Xs.generic(Array)(ai,B,["this",p(Xs(C,["this",$s.generic(Da)(fi,Un)]),function(){return[]})],Fr,ya,N)),function(){return[]})))],Tn)),cr=fa.generic(Boolean)("disallowSpaceBeforeAccess",!0),Qi=wn(cr(Xs(rs(Xs(li,ii),d(g)),["this",Vn.generic(Da)($s.generic(Da)(fi,jn),rs.generic(Array)(Xs(E,jn,ai,["this",k(Xs(A,C,["this",$s.generic(Da)(fi,Un)],ma,N))]),Ba(function(){return[]})(ma)))]))),Ro=wn(rs(Bn,Qi)),ho=wn(rs((St=Xs(function(e,t){return e.inAst.peek()?yn(t):void 0},ur,La,["this",Ro]),Ba(function(e,t,n){return t.Call(n,t.Ident(n,"$"),e)})(St)),function(e,t){var n;return n=Ta(e,t),!n||lt(n.value,so(e.options))||e.hasMacroOrOperator(n.value||e.scope.peek().hasConst(n.value))?e.fail("identifier",t):yn(n.index,e.Ident(t,n.value))})),Ia=wn(_l(rl,!0)),er=wn(function(){var e,t,n;return n=S(Qn),e=Xs(["integer",n],["fraction",p(Xs(Ia,Es,Ia,["this",n]),"")],["exponent",p((t=Xs(u("[Ee]",i([69,101])),["sign",p(Ns)],["digits",n]),Ba(function(e){var t,n,r;return n=e.e,r=e.sign,t=e.digits,(r?$r(r):"")+wt(t)})(t)),"")],p(Xs(rl,p(Sa)))),Ba(function(e,t,n,r){var o,a,s,i;if(s=e.integer,a=e.fraction,o=e.exponent,i=M(s,a,10,o?parseInt(o,10):0),!isFinite(i))throw vs("Unable to parse number "+wt(Ls(t.source.substring(n,r))),t,n);return t.Const(n,i)})(e)}()),fo=u("[0-9A-Fa-f]",i([[48,57],[65,70],[97,102]])),_o=wn(D(16,u("[Xx]",i([88,120])),fo)),ts=u("[0-7]",i([[48,55]])),ns=wn(D(8,u("[Oo]",i([79,111])),fo)),on=u("[01]",i([48,49])),sn=wn(D(2,u("[Bb]",i([66,98])),fo)),Rs=wn(function(){function e(e){var n,r,o,a,s,i,l;if(null==(r=t[e])){switch(e){case 2:o=on;break;case 8:o=ts;break;case 10:o=Qn;break;case 16:o=fo;break;default:for(l=tt(null),a=0,n=ht(e)>10?ht(e):10;n>a;++a)l[a+48]=!0;for(a=0,n=(ht(e)>36?ht(e):36)-10;n>a;++a)l[a+65]=!0,l[a+97]=!0;i=["[0-"],i.push(String.fromCharCode((ht(e)>9?ht(e):9)+48)),ht(e)>=10&&(s=(ht(e)>36?ht(e):36)-10,i.push("A-"),i.push(String.fromCharCode(s+65)),i.push("a-"),i.push(String.fromCharCode(s+97))),i.push("]"),o=u(i.join(""),l)}return t[e]=S(o)}return r}var t,n,r;return t=[],r=Aa(Qn,1,2),n=u("[Rr]",i([82,114])),function(t,o){var a,i,l,c,u,f,p,d,_,h,m;if(f=r(t,o),f&&(d=s(f.value),_=n(t,f.index))){if(p=parseInt(d,10),!isFinite(p))throw vs("Unable to parse radix "+wt(Ls(d)),t,o);if(2>p)throw vs("Radix must be at least 2, got "+p,t,o);if(p>36)throw vs("Radix must be at most 36, got "+p,t,o);if(i=e(p),c=i(t,_.index),!c)throw t.fail("integer after radix",_.index),ei;if(a=Ia(t,c.index).index,u=Es(t,a),u&&(l=i(t,Ia(t,u.index).index),l&&(m=M(c.value,l.value,p),a=l.index)),null==m&&(m=M(c.value,"",p)),!isFinite(m))throw vs("Unable to parse number "+wt(Ls(t.source.substring(o,a))),t,o);return h=Ia(t,a),yn(h.index,t.Const(o,m))}}}()),Ha=wn(w(rs(_o,ns,sn,Rs,er))),mo=wn(function(e,t){var n;return n=Ta(e,t),n?yn(n.index,e.Const(t,n.value)):void 0}),yo=wn(rs(mo,Ha)),St=Xs(c('"x"',120),ei,["this",Aa(fo,2,2)]),po=Ba(function(e){return parseInt(s(e),16)})(St),ol=Xs(c('"u"',117),ei,["this",rs((St=Aa(fo,4,4),Ba(function(e){return parseInt(s(e),16)})(St)),(St=Xs(is,["this",Aa(fo,1,6)],An),Ba(function(e,t,n){var r,o;if(r=s(e),o=parseInt(r,16),o>1114111)throw vs("Unicode escape sequence too large: '\\u{"+r+"}'",t,n);return o})(St)))]),ti=function(){var e,t;return e=tt(null),e[98]=8,e[102]=12,e[114]=13,e[110]=10,e[116]=9,e[118]=11,t=e,rs(Ba(0)(dl),Ba(function(e){return t[e]||e})(y))}(),tn=Xs(en,ei,["this",rs(po,ol,ti)]),Fo=fa.generic(String)("position","expression"),Lo=fa.generic(String)("position","statement"),Ht=Fo(function(e,t){return W(e,t)}),Jr=wn(rs(Ht,Gr)),zr=wn(rs(Jr,fn)),hi=Xs(fr,La,ei,["this",rs(ho,Xs(ls,["this",Rt(rs(Gr,Ga))],Tn))]),ri=wn((St=Xs(ni,ei,["this",hl(tn,m(rs(ni,g)))],ni),Ba(function(e,t,n){return t.Const(n,s(e))})(St))),mr=hl(tn,hi,m(rs(dr,g))),hr=wn((St=Xs(dr,ei,["this",mr],dr),Ba(function(e,t,n){var r,o,a,s,i,l;for(r=[],o=vt(F(e,t,n)),a=0,s=o.length;s>a;++a)i=o[a],i.isConstValue("")||r.push(i);return l=r,0===l.length?t.Const(n,""):1===l.length&&l[0].isConstType("string")?l[0]:t.string(n,l)})(St))),_r=wn((St=Xs(Is,dr,ei,["this",mr],dr),Ba(function(e,t,n){var r;return r=F(e,t,n),t.Array(n,r)})(St))),ji="function"==typeof String.prototype.trimRight?function(e){return e.trimRight()}:function(e){return e.replace(/\s+$/,"")},St=hl(tn,m(rs(Vi,g))),qi=Ba(function(e){return[ji(s(e))]})(St),St=hl(tn,hi,m(rs(Li,g))),Ui=Ba(function(e){var t,n,r,o,a,i;for(i=[],o=[],t=vt(e),n=0,r=t.length;r>n;++n)a=t[n],"number"==typeof a?o.push(a):a instanceof Wa||(o.length>0&&(i.push(s(o)),o=[]),i.push(a));return o.length>0&&i.push(ji(s(o))),i})(St),Gi=wn(L(Vi,qi)),Pi=wn(L(Li,Ui)),Ri=wn((St=Xs(Is,Li,ei,["first",Ui],["numEmptyLines",_l(Xs(ii,["this",g]),!0)],["rest",p(k(Xs(B,["this",p(Xs(O,["this",$s(Ui,Xs(g,O))]),function(){return[]})],p(g),N)),function(){return[]})],Li),Ba(function(e,t,n){var r;return r=j(e,t,n),t.Array(n,r)})(St))),nn=wn(Xs(en,La,["this",mo])),mi=wn(w(rs(nn,Gi,Pi,Ri,ri,hr,_r))),Us=function(){var e,t,n,r,o,a,i;return n=c('"r"',114),e=_l(Na),a=Ba(s)(e),r={},e=Xs(uo,_l(m(g),!0)),o=Ba(r)(e),e=rs(li,g),i=Ba(r)(e),w((e=Xs(n,["text",rs(Xs(Li,ei,["this",hl((t=Xs(en,fr),Ba(36)(t)),i,o,hi,m(Li))],Li),Xs(Vi,ei,["this",hl(i,o,m(Vi))],Vi),Xs(dr,ei,["this",hl((t=Xs(dr,dr),Ba(34)(t)),(t=Xs(en,fr),Ba(36)(t)),hi,m(rs(dr,g,fr)))],dr),Xs(ni,ei,["this",hl((t=Xs(ni,ni),Ba(39)(t)),m(rs(ni,g)))],ni))],["flags",a]),Ba(function(e,t,n){var o,a,i,l,c,u,f,p,d,_;for(_=e.text,u=e.flags,d=[],l=[],o=vt(_),a=0,i=o.length;i>a;++a)f=o[a],"number"==typeof f?l.push(f):f===r||f instanceof Wa||(l.length>0&&(d.push(t.Const(n,s(l))),l=[]),d.push(f));if(l.length>0&&d.push(t.Const(n,s(l))),_=0===d.length?t.Const(n,""):1===d.length&&d[0].isConstType("string")?d[0]:t.string(n,d),_.isConst())try{RegExp(String(_.constValue()))}catch(h){throw vs(h.message,t,n)}for(p=[],o=vt(u),a=0,i=o.length;i>a;++a){if(c=o[a],lt(c,p))throw vs("Invalid regular expression: flag "+wt(Ls(c))+" occurred more than once",t,n);if("g"!==c&&"i"!==c&&"m"!==c&&"y"!==c)throw vs("Invalid regular expression: unknown flag "+wt(Ls(c)),t,n);p.push(c)}return t.Regexp(n,_,u)})(e)))}(),Wn=rs(Xs(Es,["this",yo]),Xs(us,["this",Rt(Gr)],Nn)),Gn=wn(rs(R,Ha,mi,Us)),Yo=wn(rs(ki,qt,Gn)),wa=wn(p(ul("not"))),va=wn(p(c('"?"',63))),no=fa.generic(Boolean)("inGenerator",!0)(fn),ro=fa.generic(Boolean)("inGenerator",!0)(pn),Wo=c('"<"',60),Go=w(Wo),co=c('">"',62),lo=w(co),Zr=wn(Xs(ii,Ca,co)),At=rs.generic(Da)(Xs(Zr,["this",rs(_i,Ga)]),fn),Xr=fa.generic(Boolean)("inGenerator",!1)(At),oo=fa.generic(Boolean)("inGenerator",!0)(At),vo=rs(ho,(St=Xs(["parent",Si],["child",yo]),Ba(function(e,t,n){var r,o;return o=e.parent,r=e.child,t.Access(n,o,r)})(St)),(St=Xs(["parent",ki],pr,["child",yo]),Ba(function(e,t,n){var r,o;return o=e.parent,r=e.child,t.Access(n,t.Access(n,o,t.Const(n,"prototype")),r)})(St)),(St=Xs(["parent",ki],["isProto",p(pr)],us,["child",Rt(Gr)],Nn),Ba(function(e,t,n){var r,o,a;return a=e.parent,o=e.isProto,r=e.child,t.Access(n,o?t.Access(n,a,t.Const(n,"prototype")):a,r)})(St))),Cs=wn(rs(Es,pr)),St=rs(Xs(["type",Cs],["child",yo]),Xs(["type",p(pr)],us,["child",Rt(Gr)],Nn)),wo=Ba(function(e,t,n){var r,o,a;return a=e.type,r=e.child,o="::"===a,function(e,t,a){return t.Access(a,o?t.Access(a,e,t.Const(n,"prototype")):e,r)}})(St),bo=wn((St=Xs(["head",vo],["tail",_l(wo)]),Ba(function(e,t,n){var r,o,a,s,i;for(s=e.head,r=vt(e.tail),o=0,a=r.length;a>o;++o)i=r[o],s=i(s,t,n);return s})(St))),go=wn(function(e,t){var n,r;return(n=Uo(e,t))?(r=n.value,r instanceof Eo||r instanceof jt?n:void 0):void 0}),Oo=fa.generic(Boolean)("inFunctionTypeParams",!0),Ja=fa.generic(Boolean)("inFunctionTypeParams",!1),Xi=function(e,t){return Xi(e,t)},zt=wn((St=Xs(cs,["this",p(Rt(Xi))],Nn),Ba(function(e,t,n){var r;return r=t.Ident(n,"Array"),e?t.TypeGeneric(n,r,[e]):r})(St))),es=Xs(["key",function(e,t){return zn(e,t)}],kn,["value",Xi]),Qa=wn((St=Xs(ss,["this",Rt(p($s(es,Rn),function(){return[]}))],ma,Cn),Ba(function(e,t,n){var r,o,a,s,i,l;if(0===e.length)return t.Ident(n,"Object");for(i=[],r=vt(e),o=0,a=r.length;a>o;++o){if(s=r[o].key,!s.isConst())throw vs("Expected a constant key, got "+xt(s),t,s.index);if(l=String(s.constValue()),lt(l,i))throw vs("Duplicate object key: "+wt(Ls(l)),t,s.index);i.push(l)}return t.TypeObject(n,e)})(St))),St=Xs(rs(Xs(ls,Rt($s(Xi,Rn)),Tn),Oo(Xi),Ga),Zr,["this",p(Xi)]),to=Ba(function(e,t,n){var r;return r=t.Ident(n,"Function"),e?t.TypeGeneric(n,r,[e]):r})(St),ja=rs(function(e,t){return e.inFunctionTypeParams.peek()?void 0:to(e,t)},Xs(ls,["this",Rt(Ja(function(e,t){return Xi(e,t)}))],Tn),zt,Qa,U,(St=Xs(["base",bo],["args",p(Xs(c('"<"',60),ei,["this",$s(function(e,t){return Xi(e,t)},jn)],ii,c('">"',62)),function(){return[]})]),Ba(function(e,t,n){var r,o;return o=e.base,r=e.args,r.length?t.TypeGeneric(n,o,r):o})(St))),As=wn(w(Bs)),Xi=wn((St=$s(ja,As),Ba(function(e,t,n){var r,o,a;for(e=e.slice(),r=vt(e),o=r.length;o--;)a=r[o],a instanceof Ki&&e.splice.apply(e,[o,1].concat(vt(a.types)));return 1===e.length?e[0]:t.TypeUnion(n,e)})(St))),_a=p(Xs(ul("as"),ei,["this",Xi])),gn=wn(Xs(cs,["this",Rt(Jr)],Nn)),zn=rs(mi,Ba(function(e,t,n){return t.Const(n,String(e.constValue()))})(Ha),mo),Ya=wn(rs(gn,zn)),$a=wn(Xs(["this",Ya],kn,h(Lr),function(e,t){if(e.options.noindent){if(Dr(e,t))return;if(e.options.embedded&&(br(e,t)||vr(e,t)))return}return yn(t)})),xo=rs(ho,(St=Xs(["parent",Si],["child",mo]),Ba(function(e,t,n){var r,o;return o=e.parent,r=e.child,t.Access(n,o,r)})(St))),St=Xs(["isMutable",f(p(ul("mutable")))],["spread",f(xa)],["ident",xo],["asType",_a],["defaultValue",p(Xs(Rr,["this",Gr]))]),Io=Ba(function(e,t,n){var r,o,a,s,i;if(s=e.isMutable,i=e.spread,a=e.ident,r=e.asType,o=e.defaultValue,i&&o)throw vs("Cannot specify a default value for a spread parameter",t,n);return t.Param(n,a,o,i,s,r)})(St),ps=function(e,t){return ps(e,t)},St=Xs(cs,Fr,["this",Rt(function(e,t){return _s(e,t)})],Fr,Nn),Jt=Ba(function(e,t,n){return t.Array(n,e)})(St),fs=Xs(["key",$a],["value",ps]),St=Xs(["this",Io],Ua),ys=Ba(function(e,t,n){var r,o;
if(r=e.ident,r instanceof Eo)o=t.Const(n,r.name);else{if(!(r instanceof jt))throw Error("Unknown object key type: "+wt(e.type));o=r.child}return{key:o,value:e}})(St),qo=p(rs(fs,ys)),St=Xs(ss,Fr,["this",Rt($s(qo,Rn))],Fr,Cn),Za=Ba(function(e,t,n){return t.object(n,function(){var t,n,r,o,a;for(t=[],n=vt(e),r=0,o=n.length;o>r;++r)a=n[r],a&&t.push(a);return t}())})(St),ps=rs(Io,Jt,Za),ds=rs(ps,Ga),_s=Rt((St=$s(ds,Rn),Ba(function(e,t){return V(q(e),t)})(St))),St=Xs(ls,ei,Fr,["this",_s],Fr,Tn),hs=Ba(function(){function e(t,n,r){var o,a,s,i,l,c,u,f;if(!(t instanceof Da))throw TypeError("Expected param to be a "+_t(Da)+", got "+xt(t));if(!ut(r))throw TypeError("Expected names to be an Array, got "+xt(r));if(t instanceof ms){if(c=t.ident,c instanceof Eo)u=c.name;else{if(!(c instanceof jt))throw Error("Unknown param ident type: "+xt(t));if(i=c.child,!i.isConstType("string"))throw Error("Expected constant access");u=i.constValue()}if(lt(u,r))throw vs("Duplicate parameter name: "+wt(Ls(u)),n,n.indexFromPosition(c.line,c.column));r.push(u)}else if(t instanceof Wt)for(o=vt(t.elements),a=0,s=o.length;s>a;++a)l=o[a],e(l,n,r);else if(t instanceof Ka)for(o=vt(t.pairs),a=0,s=o.length;s>a;++a)f=o[a],e(f.value,n,r);else if(!t instanceof Wa)throw Error("Unknown param type: "+xt(t))}return function(t,n){var r,o,a,s,i;for(s=[],r=vt(t),o=0,a=r.length;a>o;++o)i=r[o],e(i,n,s);return t}}())(St),Kr=function(){function e(e){return e?oo:Xr}var t,n,r,o,a,s;return r=rs(qr,Qt,Xt,xn),t=_l(r),o=Ba(function(e,t,n){var r,o,a,s,i,l;for(i={autoReturn:!0,bound:!1,generator:!1,curry:!1},l=[],r=vt(e),o=0,a=r.length;a>o;++o){if(s=r[o],lt(s,l))throw vs("Function flag "+wt(Ls($r(s)))+" specified more than once",t,n);switch(l.push(s),s){case 33:i.autoReturn=!1;break;case 64:i.bound=!0;break;case 42:i.generator=!0;break;case 94:i.curry=!0;break;default:throw Error("Unknown function flag: "+wt(Ls($r(s))))}}if(!i.autoReturn&&i.generator)throw vs("A function cannot be both non-returning (!) and a generator (*)",t,n);return i})(t),a=p(Xs(Wo,["this",$s(ho,jn)],lo),function(){return[]}),s=p(hs,function(){return[]}),n=Oo(_a),Rt(function(t,r){var i,l,c,u,f,p,d,_,h,m,y,g;for(_=a(t,r),g=t.pushScope(!0),m=s(t,_.index),i=vt(m.value),l=i.length;l--;)h=i[l],Lt(g,h);return f=o(t,m.index),p=f.value,c=n(t,f.index),(u=e(f.value.generator)(t,c.index))?(d=t.Function(r,m.value,u.value,p.autoReturn,p.bound,p.curry,c.value,p.generator,_.value),y=P(d,t,r),t.popScope(),yn(u.index,y)):(t.popScope(),void 0)})}(),Qr=wn(Xs(ii,uo,["this",Kr])),Ms=fa.generic(Boolean)("preventUnclosedObjectLiteral",!0),Gt=wn(Ms((St=Xs(cs,ii,["this",Rt(Vn(p(Xs(["this",$s(fi,jn)],ma),function(){return[]}),p(k(Xs(ai,B,["this",p(Xs(C,["this",$s(fi,Un)]),function(){return[]})],Fr,ya)),function(){return[]})))],Nn),Ba(function(e,t,n){return t.Array(n,e)})(St)))),Zs=wn((St=Xs(xs,d(us),ei,["this",Gt]),Ba(function(e,t,n){var r;if(r=t.getMacroByLabel("constructSet"),!r)throw Error("Cannot use literal set until the construct-set macro has been defined");return r.func({op:"",node:e},t,n)})(St))),Oa=wn(function(e,t){return e.options.noindent?Ra(e,t):yn(t)}),yr=Xs(["key",$a],Oa,["value",Gr]),io=wn(rs(ul("get"),ul("set"))),Fs=wn(Xs(["property",rs(ul("property"),io)],ii,["key",$a],Oa,ei,["value",Gr])),Os=wn(rs(Fs,yr)),Ea=Xs(["property",p(io)],["key",Ya],Ua,["value",Kr]),js=rs(Os,Ea),tl=wn((St=$s(Os,jn),Ba(function(e,t,n){return t.object(n,e)})(St))),oi=rs((St=Xs(["this",go],Ua),Ba(function(e,t,n){var r;if(e instanceof jt)r=e.child;else{if(!(e instanceof Eo))throw vs("Unknown ident type: "+xt(e),t,n);r=t.Const(n,e.name)}return{key:r,value:e}})(St)),(St=Xs(["this",Gn],Ua),Ba(function(e,t,n){var r;return r=e.isConst()&&!e.isConstType("string")?t.Const(n,String(e.value)):e,{key:r,value:e}})(St)),(St=Xs(["this",Ti],Ua),Ba(function(e,t,n){return{key:t.Const(n,"this"),value:e}})(St)),(St=Xs(["this",qt],Ua),Ba(function(e,t,n){return{key:t.Const(n,"arguments"),value:e}})(St)),(St=Xs(["this",gn],Ua),Ba(function(e){return{key:e,value:e}})(St))),Vo=wn(rs(js,(St=Xs(ii,["flag",p(Ns)],["key",oi]),Ba(function(e,t,n){var r,o;return r=e.flag,o=e.key,r?{key:o.key,value:t.Const(n,43===r)}:o})(St)),(St=Xs(ii,["bool",Ns],["key",mo]),Ba(function(e,t,n){var r,o;return r=e.bool,o=e.key,{key:o,value:t.Const(n,43===r)}})(St)))),Xa=wn(Rt((St=Xs(ss,ii,["prototype",p(Xs(ul("extends"),["this",Ms($o)],ii,rs(jn,d(g),d(Cn))))],["pairs",Vn(p(Xs(["this",$s(Vo,jn)],ma),function(){return[]}),p(k(Xs(ai,B,["this",p(Xs(C,["this",$s(Vo,Un)]),function(){return[]})],N)),function(){return[]}))],Fr,ya,Fr,Cn),Ba(function(e,t,n){return t.object(n,e.pairs,e.prototype)})(St)))),da=wn((St=Xs(xs,is,ei,ii,["this",Rt(Vn(p(Xs(["this",$s(yr,jn)],ma),function(){return[]}),p(k(Xs(ai,B,["this",p(Xs(C,["this",$s(yr,Un)]),function(){return[]})],N)),function(){return[]})))],Fr,ya,Fr,Cn),Ba(function(e,t,n){var r;if(r=t.macros.getByLabel("constructMap"),!r)throw Error("Cannot use literal map until the construct-map macro has been defined");return r.func({op:"",node:t.object(n,e)},t,n)})(St))),Kn=function(){function e(e,t,n){var r,o,a,s,i;return a=e.rule(t,n),a&&(r=Tn(t,a.index))?(o=t.Ident(n,"x"),i=t.pushScope(!0),i.add(o,!1,zi.any),s=P(t.Function(n,[t.Param(n,o)],e.func({op:a.value,node:o},t,n),!0),t,n),t.popScope(),yn(r.index,s)):void 0}function t(e,t,n){var r,o,a,s,i,l,c,u;return a=!1,e.invertible&&(o=wa(t,n),o.value&&(a=!0),n=o.index),i=e.rule(t,n),i&&(r=Tn(t,i.index))?(s=t.Ident(n,"x"),c=t.Ident(n,"y"),u=t.pushScope(!0),u.add(s,!1,zi.any),u.add(c,!1,zi.any),l=P(t.Function(n,[t.Param(n,s),t.Param(n,c)],e.func({left:s,inverted:a,op:i.value,right:c},t,n),!0,!1,!0),t,n),t.popScope(),yn(r.index,l)):void 0}return function(n,r){var o,a,s,i;for(o=vt(n.allBinaryOperators()),a=o.length;a--;)if(i=o[a],null!=(s=t(i,n,r)))return s;for(o=vt(n.prefixUnaryOperators()),a=o.length;a--;)if(i=o[a],null!=(s=e(i,n,r)))return s;for(o=vt(n.postfixUnaryOperators()),a=o.length;a--;)if(i=o[a],null!=(s=e(i,n,r)))return s}}(),gs=wn(Rt(Xs(ls,["this",rs.generic(Da)(Xs(["this",Ht],Tn),(St=Xs(["left",Gr],["operator",p(J)],Tn),Ba(function(e,t,n){var r,o,a,s,i;return r=e.left,(o=e.operator)?(i=t.pushScope(!0),s=t.makeTmp(n,"x"),a=P(t.Function(n,[t.Param(n,s)],o.operator.func({left:r.rescope(i),inverted:o.inverted,op:o.op,right:s},t,n),!0),t,n),t.popScope(),a):r})(St)),Kn,(St=Xs(["operator",J],["right",Gr],Tn),Ba(function(e,t,n){var r,o,a,s,i,l,c,u;return c=e.right,r=e.operator,s=r.op,i=r.operator,o=r.inverted,u=t.pushScope(!0),a=t.makeTmp(n,"x"),l=P(t.Function(n,[t.Param(n,a)],i.func({left:a,inverted:o,op:s,right:c.rescope(u)},t,n),!0),t,n),t.popScope(),l})(St)),(St=Xs(["this",os(function(e,t){return Po(e,t)})],Tn),Ba(function(e,t,n){var r,o,a;return a=t.pushScope(!0),r=t.makeTmp(n,"o"),o=P(t.Function(n,[t.Param(n,r)],Yn(!1,{type:"normal",existential:!1,node:r},e,t,n).rescope(a),!0,!1),t,n),t.popScope(),o})(St)))]))),Xn=wn(function(e,t){var n;return e.asterixAsArrayLength.peek()&&(n=Xt(e,t))?yn(n.index,e.Ident(t,"__currentArrayLength")):void 0}),So=wn((St=$s(Os,Un),Ba(function(e,t,n){return t.object(n,e)})(St))),nl=wn(function(e,t){return e.preventUnclosedObjectLiteral.peek()?void 0:yn(t)}),ko=wn(Xs(nl,E,ii,g,Fr,["this",k(Xs(A,C,["this",So],N))])),el=Xs(Xt,ii,["this",rs(k(Xs(T(2),["this",rs(So,function(e,t){return No(e,t)},fi)])),fi)]),No=wn((St=$s(el,Xs(ma,si)),Ba(function(e,t,n){return t.Array(n,e)})(St))),To=wn(Xs(nl,E,ii,g,Fr,["this",k(Xs(A,C,["this",No],N))])),Ao=fa.generic(Boolean)("inAst",!0),Do=fa.generic(Boolean)("inEvilAst",!0),Kt=Xs(ul("ASTE"),ei,function(e,t){if(e.inMacro.peek()){if(e.inAst.peek())throw vs("Can only use ASTE inside of another AST",e,t);return yn(t)}throw vs("Can only use ASTE inside of a macro",e,t)},["this",function(){var e,t;return t=Ao(Jr),e=Do(t),function(n,r){var o;return o=qr(n,r),o?e(n,o.index):t(n,r)}}()]),Zt=Xs(ul("AST"),ei,function(e,t){if(e.inMacro.peek()){if(e.inAst.peek())throw vs("Can only use AST inside of another AST",e,t);return yn(t)}throw vs("Can only use AST inside of a macro",e,t)},["this",function(){var e,t;return t=Ao(rs(fn,_i)),e=Do(t),function(n,r){var o;return o=qr(n,r),o?e(n,o.index):t(n,r)}}()]),$t=wn((St=rs(Kt,Zt),Ba(function(e,t,n){var r;return r=t.getPosition(n),Qo.constifyObject(e,r.line,r.column,t.scope.peek())})(St))),Ds=wn(rs.generic(Da)(tl,Yo,Gt,Xa,Zs,da,$t,gs,Qr,il,ho,Xn,ko,To)),Yn=function(){function e(e,n,r,o,a){var s;if(pt(o,a.length)){if(s=a[o],!mt.call(t,s.type))throw Error("Unknown call-chain link: "+wt(s.type));return t[s.type](e,n,r,s,o,a)}return r}var t;return t={access:function(){var t;return t={multi:function(e,t,n){return function(r){var o,a,s,i;return a=r,i=[],r.cacheable&&(s=e.makeTmp(t,"ref",r.type(e)),i.push(s.id),a=e.Assign(t,s,"=",r.doWrap(e)),r=s),o=e.Array(t,function(){var o,s,i,l,c;for(o=[],s=vt(n.elements),c=0,i=s.length;i>c;++c)l=s[c],o.push(e.Access(t,0===c?a:r,l));return o}()),i.length?e.TmpWrapper(t,o,i):o}}},function(n,r,o,a,s,i){var l,c,u,f,p,d,_,h,m;if(l=a.bind?function(e,t){return n.Call(r,n.Ident(r,"__bind"),[e,t])}:function(e,t){return n.Access(r,e,t)},a.owns)return m=[],_=o,o.cacheable&&(h=n.makeTmp(r,"ref",o.type(n)),m.push(h.id),_=n.Assign(r,h,"=",o.doWrap(n)),o=h),c=a.child,d=c,c.cacheable&&(h=n.makeTmp(r,"ref",c.type(n)),m.push(h.id),d=n.Assign(r,h,"=",c.doWrap(n)),c=h),p=n.If(r,function(){var e,t;if(t=n.getMacroByLabel("ownership"),!t)throw Error("Cannot use ownership access until the ownership operator has been defined");if(a.existential){if(e=n.getMacroByLabel("existential"),!e)throw Error("Cannot use existential access until the existential operator has been defined");return n.Binary(r,e.func({op:"",node:_},n,r),"&&",t.func({left:o,op:"",right:d},n,r))}return t.func({left:_,op:"",right:d},n,r)}(),e(n,r,l(o,c),ht(s)+1,i)),m.length?n.TmpWrapper(r,p,m):p;switch(a.type){case"access":f=function(e){return l(e,a.child)};break;case"accessIndex":if(!mt.call(t,a.child.type))throw Error("Unknown index type: "+wt(a.child.type));f=t[a.child.type](n,r,a.child);break;default:throw Error("Unknown link type: "+wt(a.type))}if(a.existential){if(m=[],_=o,o.cacheable&&(h=n.makeTmp(r,"ref",o.type(n)),m.push(h.id),_=n.Assign(r,h,"=",o.doWrap(n)),o=h),u=n.getMacroByLabel("existential"),!u)throw Error("Cannot use existential access until the existential operator has been defined");return p=n.If(r,u.func({op:"",node:_},n,r),e(n,r,f(o),ht(s)+1,i)),m.length?n.TmpWrapper(r,p,m):p}return e(n,r,f(o),ht(s)+1,i)}}(),call:function(t,n,r,o,a,s){var i,l,c,u,f,p,d,_;return o.existential?(_=[],f=r,r instanceof jt&&!o.isApply&&!o.isNew?(l=r.parent,i=r.child,p=l,u=i,l.cacheable&&(d=t.makeTmp(n,"ref",l.type(t)),_.push(d.id),p=t.Assign(n,d,"=",l.doWrap(t)),l=d),i.cacheable&&(d=t.makeTmp(n,"ref",i.type(t)),_.push(d.id),u=t.Assign(n,d,"=",i.doWrap(t)),i=d),(l!==p||i!==u)&&(f=t.Access(n,p,u),r=t.Access(n,l,i))):r.cacheable&&(d=t.makeTmp(n,"ref",r.type(t)),_.push(d.id),f=t.Assign(n,d,"=",r.doWrap(t)),r=d),c=t.If(n,t.Binary(n,t.Unary(n,"typeof",f),"===",t.Const(n,"function")),e(t,n,t.Call(n,r,o.args,o.isNew,o.isApply),ht(a)+1,s)),_.length?t.TmpWrapper(n,c,_):c):e(t,n,t.Call(n,r,o.args,o.isNew,o.isApply),ht(a)+1,s)}},t.accessIndex=t.access,function(t,n,r,o,a){var s,i,l,c,u,f;if(0===r.length&&!t&&"normal"===n.type)return n.node;for(u=[],"thisAccess"===n.type&&u.push({type:"access",child:n.child,existential:n.existential}),s=vt(r),i=0,l=s.length;l>i;++i)switch(f=s[i],f.type){case"protoAccess":case"protoAccessIndex":u.push({type:"access",child:o.Const(a,"prototype"),existential:f.existential}),u.push(((c=it({},f)).type="protoAccess"===f.type?"access":"accessIndex",c));break;case"access":case"accessIndex":u.push(f);break;case"call":if(t&&f.isApply)throw vs("Cannot call with both new and @ at the same time",o,a);u.push(((c=it({},f)).isNew=t,c)),t=!1;break;case"generic":u.push({type:"access",child:o.Const(a,"generic"),existential:!1}),u.push({type:"call",args:f.args,existential:!1});break;default:throw Error("Unknown link type: "+wt(f.type))}return t&&u.push({type:"call",args:[],existential:!1,isNew:!0,isApply:!1}),e(o,a,n.node,0,u)}}(),Po=rs((St=Xs(Wo,["this",$s(function(e,t){return rn(e,t)},jn)],lo),Ba(function(e){return{type:"generic",args:e}})(St)),(St=Xs(["existential",va],["owns",ba],["bind",ha],z,["type",Cs],["child",yo]),Ba(function(e){return{type:"::"===e.type?"protoAccess":"access",child:e.child,existential:e.existential,owns:e.owns,bind:e.bind}})(St)),(St=Xs(["existential",va],["owns",ba],["bind",ha],["type",p(pr)],us,["child",Rt((Mt=$s(fa.generic(Boolean)("asterixAsArrayLength",!0)(Gr),Rn),Ba(function(e){return ht(e.length)>1?{type:"multi",elements:e}:{type:"single",node:e[0]}})(Mt)))],Nn),Ba(function(e,t,n){if("single"===e.child.type)return{type:"::"===e.type?"protoAccess":"access",child:e.child.node,existential:e.existential,owns:e.owns,bind:e.bind};if(e.owns)throw vs("Cannot use ! when using a multiple or slicing index",t,n);if(e.bind)throw vs("Cannot use @ when using a multiple or slicing index",t,n);return{type:"::"===e.type?"protoAccessIndex":"accessIndex",child:e.child,existential:e.existential}})(St)),(St=Xs(["existential",f(va)],["isApply",f(ha)],["args",Ro]),Ba(function(e){return{type:"call",args:e.args,existential:e.existential,isNew:!1,isApply:e.isApply}})(St))),St=Xs(["isNew",f(p(ul("new")))],["head",rs((Mt=Xs(["node",Mi],["existential",va],["owns",ba],["bind",ha],["child",yo]),Ba(function(e){return it({type:"thisAccess"},e)})(Mt)),Ba(function(e){if(!(e instanceof Da))throw TypeError("Expected node to be a "+_t(Da)+", got "+xt(e));return{type:"normal",node:e}})(Ds))],["tail",_l(Po)]),rn=Ba(function(e,t,n){var r,o,a;return o=e.isNew,r=e.head,a=e.tail,Yn(o,it({},r),a,t,n)})(St),gi=wn((St=Xs(ul("super"),ei,["child",p(rs(Xs(Fr,ii,Es,["this",yo]),Xs(us,["this",Rt(Gr)],Nn)))],["args",Ro]),Ba(function(e,t,n){var r,o;return o=e.child,r=e.args,t.Super(n,o,r)})(St))),Pr=wn((St=Xs(ul("eval"),ei,["this",Ro]),Ba(function(e,t,n){if(1!==e.length)throw vs("Expected only one argument to eval, got "+wt(e.length),t,n);return t.Eval(n,e[0])})(St))),Uo=wn(rs(function(e,t){var n,r,o;if(o=e.inAst,o.peek()&&(r=ur(e,ii(e,t).index))){o.push(!1);try{if(n=Ro(e,r.index),!n)return;return yn(n.index,e.Call(t,e.Ident(t,"$"),n.value))}finally{o.pop()}}},rn,gi,Pr)),Bo=fa.generic(Boolean)("inCascade",!0),In=wn((St=Xs(["head",Uo],["tail",rs(function(e,t){return e.inCascade.peek()?yn(t,[]):void 0},_l(Xs(z,h(pi),Es,d(Es),["accesses",_l(Po)],["assignment",p(Bo(G))])))]),Ba(function(e,t,n){var r,o,a,s;if(r=this,o=e.head,s=e.tail,s.length){if(a=t.getMacroByLabel("cascade"),!a)throw vs("Cannot use cascades until the cascade macro has been defined",t,n);return a.func({op:"",node:t.Cascade(n,o,function(){var e,o,a,i,l;for(e=[],o=vt(s),i=0,l=o.length,a=function(e){var r,o;return r=e.accesses,o=e.assignment,function(e){var a;return a=Yn(!1,{type:"normal",node:e},r,t,n),null!=o?o(a,n):a}};l>i;++i)e.push(a.call(r,o[i]));return e}())},t,n)}return o})(St))),ks=wn(function(e,t){var n,r,o,a,s,i,l;if(a=In(e,t)){for(o=!0;o;)for(o=!1,n=vt(e.postfixUnaryOperators()),r=n.length;r--;)if(i=n[r],l=i.rule,s=l(e,a.index)){a=yn(s.index,i.func({op:s.value,node:a.value},e,t)),o=!0;break}return a}}),Ss=wn(function(e,t){var n,r,o,a,s,i;for(n=vt(e.prefixUnaryOperators()),r=n.length;r--;)if(s=n[r],i=s.rule,a=i(e,t),a&&(o=Ss(e,a.index)))return yn(o.index,s.func({op:a.value,node:o.value},e,t));return ks(e,t)}),ln=function(){var e;return e=[],function(t){return e[t]||(e[t]=wn(function(e,n){var r,o,a,s,i,l,c,u,f,p,d,_,h,m,y,g,b,w,v,x;if(y=e.binaryOperators(t),!y)return Ss(e,n);if(d=ln(+t+1),l=d(e,n)){for(r=vt(y),o=r.length;o--;){for(m=r[o],v=m.rule,x=[],i=l.index;;){if(u=!1,m.invertible&&(c=wa(e,i),c.value&&(u=!0),i=c.index),h=v(e,i),!h)break;if(_=d(e,h.index),!_)break;if(i=_.index,x.push({inverted:u,op:h.value,node:_.value}),m.maximum&&x.length>=ht(m.maximum))break}if(x.length){if(m.rightToLeft){for(w=x[x.length-1].node,f=x.length;f--;)g=x[f],w=m.func({left:0===f?l.value:x[f-1].node,inverted:g.inverted,op:g.op,right:w},e,n);b=w}else{for(p=l.value,a=0,s=x.length;s>a;++a)g=x[a],p=m.func({left:p,inverted:g.inverted,op:g.op,right:g.node},e,n);b=p}return yn(i,b)}}return l}}))}}(),$o=wn(ln(0)),Wr=wn(rs(il,$o)),Gr=wn(Fo(Wr)),zo=wn(Xs(ci,["this",function(e,t){var n,r,o,s,i,l,c,u,f,p,d;if(d=e.source,47===d.charCodeAt(t)&&42===d.charCodeAt(+t+1)&&33===d.charCodeAt(+t+2))for(u=[47,42,33],f=[u],c=d.length,o=+t+3;;++o){if(o>=c)throw vs("Multi-line license comment never ends",e,t);if(r=d.charCodeAt(o),42===r&&47===d.charCodeAt(o+1)){for(u.push(42,47),p=[],s=0,n=f.length;n>s;++s)l=f[s],s>0&&p.push("\n"),a(l,p);return yn(o+2,e.Comment(t,p.join("")))}if(13===r||10===r||8232===r||8233===r){if(13===r&&10===data.charCodeAt(o+1)&&++o,f.push(u=[]),i=O(e,o+1),!i)throw vs("Improper indent in multi-line license comment",e,o+1);o=i.index-1}else u.push(r)}}],ii)),ua=Rt((St=Xs(["type",rs(ho,mi,(Mt=Xs(ls,Fr,["this",function(e,t){return ca(e,t)}],Fr,ya,Tn),Ba(function(e,t,n){return t.SyntaxSequence(n,e)})(Mt)),(Mt=Xs(ls,Fr,["this",function(e,t){return ia(e,t)}],Fr,Tn),Ba(function(e,t,n){return t.SyntaxChoice(n,e)})(Mt)))],["multiplier",p(rs(xi("?"),xi("*"),xi("+")))]),Ba(function(e,t,n){var r,o;return o=e.type,r=e.multiplier,r?t.SyntaxMany(n,o,r):o})(St))),la=rs(mi,(St=Xs(["ident",rs(ki,ho)],["type",p(Xs(ul("as"),["this",ua]))]),Ba(function(e,t,n){var r,o;return r=e.ident,o=e.type,t.SyntaxParam(n,r,o)})(St))),ca=$s(la,jn),ia=$s(ua,As),aa=p((St=Xs(ul("with"),["this",tl]),Ba(function(e,t,n){if(e=e.reduce(t),!e.isLiteral())throw vs("Macro options must be a literal object without any logic, invocation, or anything else",t,n);return e.literalValue()})(St)),function(){return{}}),sa=Xs(C,ul("syntax"),ei,function(e,t){var n,r,o,a;if(a=e.pushScope(!0),o=ca(e,t),!o)throw ei;if(r=aa(e,o.index),e.startMacroSyntax(t,o.value,r.value),H(o,a),a.add(e.Ident(t,"macroName"),!0,zi.string),n=Xr(e,r.index),!n)throw ei;return e.macroSyntax(t,"syntax",o.value,r.value,n.value),e.popScope(),yn(n.index)},ii,En),Ko=rs(Xs(function(e,t){return e.options.noindent?kn(e,t):yn(t)},ii,g,Fr,k(Xs(function(e,t){return e.options.noindent?B(e,t):A(e,t)},$s(sa,ai),N)),v),function(e,t){var n,r,o,a,s,i,l;if(l=e.pushScope(!0),i=hs(e,t),!i)throw ei;for(n=vt(i.value),r=n.length;r--;)s=n[r],Lt(l,s,!0);if(a=aa(e,i.index),o=Xr(e,a.index),!o)throw ei;return e.macroSyntax(t,"call",i.value,a.value,o.value),e.popScope(),yn(o.index,e.Nothing(t))}),jo=fa.generic(Boolean)("inMacro",!0),Ct=Xs(ul("macro"),["this",jo(function(e,t){var n,r;return(r=oa(e,t))?(e.enterMacro(t,r.value),n=Ko(e,r.index),e.exitMacro(),yn(n.index,e.Nothing(t))):void 0})]),sr=function(){var e;return e=Xs(ul("define"),ul("syntax"),ei,["name",ho],Rr,["value",ca]),jo(function(t,n){var r,o;return(o=e(t,n))?(r=Xr(t,o.index),t.defineSyntax(n,o.value.name.name,o.value.value,null!=r?r.value:void 0),yn(r?r.index:o.index,t.Nothing(n))):void 0})}(),St=Xs(ul("define"),ul("helper"),ei,["name",ho],["value",rs(Xs(Rr,["this",Gr]),Kr)]),rr=Ba(function(e,t,n){var r,o;return r=e.name,o=e.value,t.defineHelper(n,r,o),t.Nothing(n)})(St),ar=function(){var e;return e=Xs(ul("define"),ul("operator"),ei,["type",rs(ul("binary"),ul("assign"),ul("unary"))],["ops",$s(ka,jn)],["options",aa]),jo(function(t,n){var r,o,a,s,i,l,c,u;if(u=e(t,n)){switch(c=(r=u.value).type,a=r.ops,s=r.options,l=t.pushScope(!0),c){case"binary":case"assign":l.add(t.Ident(n,"left"),!0,zi.any),l.add(t.Ident(n,"op"),!0,zi.string),l.add(t.Ident(n,"right"),!0,zi.any);break;case"unary":l.add(t.Ident(n,"op"),!0,zi.string),l.add(t.Ident(n,"node"),!0,zi.any)}if(o=Xr(t,u.index),!o)throw ei;switch(c){case"binary":i=t.defineBinaryOperator(n,a,s,o.value);break;case"assign":i=t.defineAssignOperator(n,a,s,o.value);break;case"unary":i=t.defineUnaryOperator(n,a,s,o.value);break;default:throw Error()}return t.popScope(),yn(o.index,t.Nothing(n))}})}(),or=wn(rs.generic(Wa)(Ct,sr,rr,ar)),St=Xs(ul("const"),ei,["name",Ta],Rr,["value",Gr]),nr=Ba(function(e,t,n){var r,o;if(r=e.name,o=e.value,o=t.macroExpandAll(o.reduce(t)),!o.isLiteral())throw vs("const value must be a literal.",this,n);return t.defineConst(n,r,o.literalValue()),t.Nothing(n)})(St),_i=wn(Xs(["this",Lo(rs.generic(Da)(zo,or,nr,W,Wr))],ii)),pa=function(){function e(e){var t,n,r,o;if("string"!=typeof e)throw TypeError("Expected text to be a String, got "+xt(e));for(o=e.length,t=[],r=0;o>r;++r)t.push(e.charCodeAt(r));return n=t,function(t,r){var a,s;for(s=t.source,a=0;o>a;++a)if(s.charCodeAt(ht(r)+a)!==n[a])return;return yn(+r+o,e)}}function t(t){return n[t]||(n[t]=e(t))}var n;return n=tt(null),function(e,n){if("string"!=typeof e)throw TypeError("Expected key to be a String, got "+xt(e));return function(r,o){var a;return a=r.options[e],"string"!=typeof a&&(a=n),t(a)(r,o)}}}(),Ar=wn(pa("embeddedOpenComment","<%--")),wr=pa("embeddedCloseComment","--%>"),Cr=wn(pa("embeddedOpen","<%")),br=wn(Xs(Fr,ii,rs(b,pa("embeddedClose","%>")))),Br=wn(pa("embeddedOpenWrite","<%=")),vr=wn(Xs(Fr,ii,rs(b,pa("embeddedCloseWrite","%>")))),Mn=wn(Xs(kn,br)),Dn=wn(Xs(kn,vr)),Va=wn(h(Ar)),qa=wn(h(Br)),lr=fa.generic(Boolean)("allowEmbeddedText",!1),Sr=lr((St=Xs(Va,Br,["this",Gr],vr),Ba(function(e,t,n){return t.EmbedWrite(n,e,!0)})(St))),Ir=rs(X,Sr,$),xr=wn((St=Xs(function(e,t){return e.options.embedded&&e.allowEmbeddedText.peek()&&t<e.source.length?yn(t):void 0},br,["this",_l(Ir)],rs(b,Xs(Va,qa,Cr))),Ba(function(e,t,n){return t.Block(n,e)})(St))),zs=wn(w(Hs)),Ys=wn(_l(zs,!0)),Ho=wn(function(){var e;return e=Xs(Ys,["this",_i]),function(t,n){var r,o,a,s,i,l;if(a=C(t,n)){for(r=n,i=[],s=!1;;)if(l=xr(t,r))s=!1,i.push(l.value),r=l.index;else{if(l=s?e(t,r):_i(t,r),!l)break;s=!0,i.push(l.value),r=l.index}if(0!==i.length)return o=Ys(t,r),o&&(r=o.index),yn(r,i)}}}()),qs=yt(function(e,t){function n(){s=9}function r(){for(;;)switch(s){case 0:e.clearCache(),l=Ho(e,t),s=l?1:9;break;case 1:u=[l.value],i=l.index,++s;case 2:++s;case 3:e.clearCache(),s=e.options.sync?5:4;break;case 4:return++s,{done:!1,value:rt.fulfilled(void 0)};case 5:f=ai(e,i),s=f?6:8;break;case 6:c=Ho(e,f.index),s=c?7:8;break;case 7:i=c.index,u.push(c.value),s=2;break;case 8:return e.clearCache(),++s,{done:!0,value:yn(i,K(u,e,t))};case 9:return{done:!0,value:void 0};default:throw Error("Unknown state: "+s)}}function o(e){throw n(),e}function a(e){try{return r(e)}catch(t){o(t)}}var a,s,r,o,i,l,c,u,f;return s=0,{close:n,iterator:function(){return this},next:function(){return a(void 0)},send:a,"throw":function(e){return o(e),a(void 0)}}}),Et=Ba(K,$s(Ho,ai)),cn=rs(Xs(C,["this",rs.generic(Da)(So,No)]),Et),gr=Xs(qa,Va,Cr,["this",Et],br),Er=rs(Ir,gr),Nr=yt(function(e,t){function n(){s=7}function r(){for(;;)switch(s){case 0:c=[],i=t,++s;case 1:++s;case 2:e.clearCache(),s=e.options.sync?4:3;break;case 3:return++s,{done:!1,value:rt.fulfilled(void 0)};case 4:l=Er(e,i),s=l?5:6;break;case 5:if(c.push(l.value),i===l.index)throw Error("Infinite loop detected");i=l.index,s=1;break;case 6:return e.clearCache(),++s,{done:!0,value:yn(i,e.Block(t,c))};case 7:return{done:!0,value:void 0};default:throw Error("Unknown state: "+s)}}function o(e){throw n(),e}function a(e){try{return r(e)}catch(t){o(t)}}var a,s,r,o,i,l,c;return s=0,{close:n,iterator:function(){return this},next:function(){return a(void 0)},send:a,"throw":function(e){return o(e),a(void 0)}}}),jr=Xs(Fr,ii,p(Ys),ul("end")),hn=k(Xs(ii,g,Fr,A,["this",cn],N)),_n=Xs(function(e,t){return On(e,t)||e.options.embedded&&(Mn(e,t)||Dn(e,t))?yn(t):void 0},kn,Fr,["this",function(e,t){var n;n=e.indent,n.push(+n.peek()+1);try{return cn(e,t)}finally{n.pop()}}]),dn=Xs(["this",_n],jr),fn=wn(function(e,t){var n,r;return r=e.pushScope(!0),n=e.options.noindent?dn(e,t):hn(e,t),e.popScope(),n}),pn=wn(function(e,t){var n,r;return r=e.pushScope(!0),n=e.options.noindent?_n(e,t):hn(e,t),e.popScope(),n}),mn=p(c('"﻿"',65279)),Qs=p(Xs(uo,qr,_l(m(g)))),Ws=yt(function(e){function t(){a=8}function n(t){for(;;)switch(a){case 0:if(!(e instanceof ws))throw TypeError("Expected parser to be a "+_t(ws)+", got "+xt(e));s=mn(e,0),f=Qs(e,s.index),i=Fr(e,f.index),a=b(e,i.index)?1:2;break;case 1:return a=8,{done:!0,value:yn(i.index,e.Root(i.index,e.options.filename,e.Nothing(i.index)))};case 2:e.clearCache(),a=e.options.sync?3:4;break;case 3:u=qs.sync(e,i.index),a=6;break;case 4:return++a,{done:!1,value:qs(e,i.index)};case 5:u=t,++a;case 6:e.clearCache(),a=u?7:8;break;case 7:return l=Fr(e,u.index),c=ii(e,l.index),e.clearCache(),++a,{done:!0,value:yn(c.index,e.Root(i.index,e.options.filename,u.value))};case 8:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function r(e){throw t(),e}function o(e){try{return n(e)}catch(t){r(t)}}var o,a,n,r,s,i,l,c,u,f;return a=0,{close:t,iterator:function(){return this},next:function(){return o(void 0)},send:o,"throw":function(e){return r(e),o(void 0)}}}),kr=yt(function(e){function t(){a=6}function n(t){for(;;)switch(a){case 0:if(!(e instanceof ws))throw TypeError("Expected parser to be a "+_t(ws)+", got "+xt(e));s=mn(e,0),l=Qs(e,s.index),e.clearCache(),a=e.options.sync?1:2;break;case 1:i=Nr.sync(e,l.index),a=4;break;case 2:return++a,{done:!1,value:Nr(e,l.index)};case 3:i=t,++a;case 4:e.clearCache(),a=i?5:6;break;case 5:return++a,{done:!0,value:yn(i.index,e.Root(0,e.options.filename,i.value,!0,e.inGenerator.peek()))};case 6:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function r(e){throw t(),e}function o(e){try{return n(e)}catch(t){r(t)}}var o,a,n,r,s,i,l;return a=0,{close:t,iterator:function(){return this},next:function(){return o(void 0)},send:o,"throw":function(e){return r(e),o(void 0)}}}),Tr=yt(function(e){function t(){a=5}function n(t){for(;;)switch(a){case 0:if(!(e instanceof ws))throw TypeError("Expected parser to be a "+_t(ws)+", got "+xt(e));e.inGenerator.push(!0),a=e.options.sync?1:2;break;case 1:s=kr.sync(e),a=4;break;case 2:return++a,{done:!1,value:kr(e)};case 3:s=t,++a;case 4:return e.inGenerator.pop(),++a,{done:!0,value:s};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function r(e){throw t(),e}function o(e){try{return n(e)}catch(t){r(t)}}var o,a,n,r,s;return a=0,{close:t,iterator:function(){return this},next:function(){return o(void 0)},send:o,"throw":function(e){return r(e),o(void 0)}}}),Pt=wn(rs(tl,Xa,ko)),Ut=wn(rs(Gt,To)),tr=wn(w(rs(Xs(g,Fr,["this",cn]),Xs(function(e,t){return e.options.embedded?yn(t):void 0},d(br),Fr,["this",cn]),Ga))),di=at(1,function(e){var t;return t=st(e),function(){function n(o){var a;if(a=this instanceof n?this:tt(r),!t(o))throw TypeError("Expected initial to be a "+_t(e)+", got "+xt(o));return a.initial=o,a.data=[],a}var r;return r=n.prototype,n.displayName="Stack<"+(null!=e?_t(e):"")+">",r.count=function(){return this.data.length},r.push=function(n){if(!t(n))throw TypeError("Expected value to be a "+_t(e)+", got "+xt(n));this.data.push(n)},r.pop=function(){var e;if(e=this.data,0===e.length)throw Error("Cannot pop");return e.pop()},r.canPop=function(){return ht(this.data.length)>0},r.peek=function(){var e,t;return e=this.data,t=e.length,0===t?this.initial:e[ht(t)-1]},n}()}),ws=function(){function e(t,n,r){var o;if(o=this instanceof e?this:tt(h),null==t)t="";else if("string"!=typeof t)throw TypeError("Expected source to be a String, got "+xt(t));if(o.source=t,null==n)n=Z();else if(!(n instanceof ta))throw TypeError("Expected macros to be a "+_t(ta)+", got "+xt(n));if(o.macros=n,null==r)r={};else if("object"!=typeof r||null===r)throw TypeError("Expected options to be an Object, got "+xt(r));return o.options=r,o.indent=di.generic(Number)(0),o.position=di.generic(String)("statement"),o.inAst=di.generic(Boolean)(!1),o.inGenerator=di.generic(Boolean)(!1),o.inFunctionTypeParams=di.generic(Boolean)(!1),o.preventUnclosedObjectLiteral=di.generic(Boolean)(!1),o.allowEmbeddedText=di.generic(Boolean)(!0),o.inMacro=di.generic(Boolean)(!1),o.inAst=di.generic(Boolean)(!1),o.inEvilAst=di.generic(Boolean)(!1),o.asterixAsArrayLength=di.generic(Boolean)(!1),o.disallowSpaceBeforeAccess=di.generic(Boolean)(!1),o.inCascade=di.generic(Boolean)(!1),o.scope=di.generic(Js)(Js(null,!0)),o.failureMessages=[],o.failureIndex=-1,o.calculateLineInfo(),o.cache=[],o.currentTmpId=-1,o}function n(e){var t;switch(t=al(e).sort(function(e,t){return et(e.toLowerCase(),t.toLowerCase())}),t.length){case 0:return"End of input";case 1:return t[0];case 2:return wt(t[0])+" or "+wt(t[1]);default:return wt(gt.call(t,0,-1).join(", "))+", or "+wt(t[ht(t.length)-1])}}function r(e,t){var n,o,a,s,i,l,c,u;if(ut(t)){for(n=[],o=vt(t),a=0,s=o.length;s>a;++a)i=o[a],n.push(r(e,i));return n}if(t instanceof Da)return t.reduce(e);if("object"==typeof t&&null!==t){c={};for(l in t)mt.call(t,l)&&(u=t[l],c[l]=r(e,u));return c}return t}function o(e,t,n){return this.Root(e,void 0,this.Return(e,this.Function(e,[t,this.Param(e,this.Ident(e,"__wrap"),void 0,!1,!0,void 0),this.Param(e,this.Ident(e,"__node"),void 0,!1,!0,void 0),this.Param(e,this.Ident(e,"__const"),void 0,!1,!0,void 0)],n,!0,!1),!1))}function a(e){if(e instanceof Eo)return["ident",e.name];if(e instanceof Bi)return["sequence"].concat(vt(p(s(e.params))));if(e instanceof Ei)return["choice"].concat(function(){var t,n,r,o,s;for(t=[],n=vt(e.choices),r=0,o=n.length;o>r;++r)s=n[r],t.push(a(s));return t}());if(e.isConst())return["const",e.constValue()];if(e instanceof Ci)return["many",e.multiplier].concat(vt(a(e.inner)));throw Error("Unknown param type: "+xt(e))}function s(e){return c(function(){var t,n,r,o,s,i,l;for(t=[],n=vt(e),r=0,o=n.length;o>r;++r)if(i=n[r],i.isConst())t.push(["const",i.constValue()]);else{if(!(i instanceof Ai))throw Error();if(s=i.ident,s instanceof Eo)l=["ident",s.name];else{if(!(s instanceof Ni))throw Error();l=["this"]}i.asType&&l.push.apply(l,vt(a(i.asType))),t.push(l)}return t}())}function i(e){var t,n,r,o,a,s;if(t=this,e instanceof Eo)return a=e.name,r=this.macros,r.hasSyntax(a)?r.getSyntax(a):function(e,t){return r.getSyntax(a).call(this,e,t)};if(e instanceof Bi)return l.call(this,e.params);if(e instanceof Ei)return rs.apply(void 0,function(){var n,r,o,a,s;for(n=[],r=vt(e.choices),o=0,a=r.length;a>o;++o)s=r[o],n.push(i.call(t,s));return n}());if(e.isConst())return s=e.constValue(),"string"!=typeof s&&this.error("Expected a constant string parameter, got "+xt(s)),mt.call(I,s)&&I[s]||fl(s);if(!(e instanceof Ci))return this.error("Unexpected type: "+xt(e));switch(o=e.multiplier,n=i.call(this,e.inner),o){case"*":return _l(n);case"+":return os(n);case"?":return rs(n,Ga);default:throw Error("Unknown syntax multiplier: "+wt(o))}}function l(e){var t,n,r,o,a,s,l,c,u,f;for(c=[],t=vt(e),n=0,r=t.length;r>n;++n)if(l=t[n],l.isConst())u=l.constValue(),"string"!=typeof u&&this.error("Expected a constant string parameter, got "+xt(u)),c.push(mt.call(I,u)&&I[u]||fl(u));else if(l instanceof Ai){if(a=l.ident,a instanceof Eo)s=a.name;else{if(!(a instanceof Ni))throw Error("Don't know how to handle ident type: "+xt(a));s="this"}f=null!=(o=l.asType)?o:Eo(0,0,l.scope,"Expression"),c.push([s,i.call(this,f)])}else this.error("Unexpected parameter type: "+xt(l));return Xs.apply(void 0,vt(c))}function c(e){if(!ut(e))throw TypeError("Expected operators to be an Array, got "+xt(e));return 0===e.length?void 0:1!==e.length||ut(e[0])?e:e[0]}function u(e){var t,n;if("object"!=typeof e||null===e)throw TypeError("Expected options to be an Object, got "+xt(e));for(t in e)if(mt.call(e,t))return n=e[t],e}function f(e){if("object"!=typeof e||null===e)throw TypeError("Expected stateOptions to be an Object, got "+xt(e));return e.serializeMacros?{minify:!0}:{}}function p(e){return null==e?[]:ut(e)?e:[e]}function d(e){var t,n,r,o,a,s,i,l;if(ut(e)){for(t=[],n=vt(e),r=0,o=n.length;o>r;++r)a=n[r],a instanceof Wa?t.push(void 0):t.push(d(a));return t}if(e instanceof Da)return e;if("object"!=typeof e||null===e||e instanceof RegExp)return e;i={};for(s in e)mt.call(e,s)&&(l=e[s],l instanceof Wa||(i[s]=d(l)));return i}function _(e,t,n,r,o,a,s){function i(e,r,o){var a,i,l,c,u,f,_;if(r.inAst.peek()||!r.expandingMacros)return r.MacroAccess(o,s,r.getLine(o),d(e),r.position.peek(),r.inGenerator.peek(),r.inEvilAst.peek());if(u=r.pushScope(!1),i=Qo(r,o,r.position.peek(),r.inGenerator.peek(),r.inEvilAst.peek()),"assignOperator"===t&&i.isIdent(e.left)){if(!i.hasVariable(e.left))throw r.buildError("Trying to assign with "+wt(e.op)+" to unknown variable '"+wt(i.name(e.left))+"'",e.left);
if(!i.isVariableMutable(e.left)&&!r.inEvilAst.peek())throw r.buildError("Trying to assign with "+wt(e.op)+" to immutable variable '"+wt(i.name(e.left))+"'",e.left)}try{c=n.call(i,d(e),Q(i,"wrap"),Q(i,"node"),Q(i,"getConst"))}catch(h){throw h instanceof ReferenceError?h:h instanceof ea?(l=r.getPosition(o),h.setPosition(l.line,l.column),h):ea(h,r,o)}return r.popScope(),c instanceof Da?(a=r.getLine(o),_=function(e){return e instanceof Xo&&(e.callLine=a),e.walk(_)},c=_(c.reduce(p)),f=i.getTmps(),f.unsaved.length?r.TmpWrapper(o,c,f.unsaved):c):c}var l,c,u,f,p,_,h,b;if(p=this,"function"!=typeof n)throw TypeError("Expected handler to be a Function, got "+xt(n));switch(b=this.macros,this.currentMacro){case y:return s=b.addBinaryOperator(o,i,a,s);case m:return s=b.addAssignOperator(o,i,a,s);case C:return s=b.addUnaryOperator(o,i,a,s);case g:if(!r)throw Error("Expected rule to exist");return b.addSyntax(a.name,Ba(i)(r)),s=b.addMacro(i,s,null!=a.type&&mt.call(zi,f=a.type)?zi[f]:void 0);default:if(!r)throw Error("Expected rule to exist");for(l=vt(b.getOrAddByNames(this.currentMacro)),c=0,u=l.length;u>c;++c)h=l[c],null!=this.pendingMacroId&&h.data.pop(),h.data.push(wn((f=Xs(["macroName",h.token],["macroData",r]),Ba(i)(f))));if(null!=this.pendingMacroId){if(null!=s)throw Error("Cannot provide the macro id if there is a pending macro id");return _=this.pendingMacroId,this.pendingMacroId=null,b.replaceMacro(_,i,null!=a.type&&mt.call(zi,f=a.type)?zi[f]:void 0),s=_}return s=b.addMacro(i,s,null!=a.type&&mt.call(zi,f=a.type)?zi[f]:void 0)}}var h,m,y,g,b,w,x,I,E,C;return h=e.prototype,e.displayName="Parser",h.buildError=function(e,t){var n;if("string"!=typeof e)throw TypeError("Expected message to be a String, got "+xt(e));if("number"!=typeof t&&!(t instanceof Da))throw TypeError("Expected node to be one of Number or "+_t(Da)+", got "+xt(t));return n="number"==typeof t?t:this.indexFromPosition(t.line,t.column),ea(e,this,n)},h.makeTmp=function(e,t,n){if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+xt(t));if(null==n)n=zi.any;else if(!(n instanceof zi))throw TypeError("Expected type to be a "+_t(zi)+", got "+xt(n));return this.Tmp(e,this.currentTmpId=ht(this.currentTmpId)+1,t,n)},h.calculateLineInfo=function(){var e,t,n,r,o;for(r=/(?:\r\n?|[\n\u2028\u2029])/g,o=this.source,t=this.lineInfo=[],e=0,t.push(0);;){if(n=r.exec(o),!n)break;e=ht(n.index)+ht(n[0].length),t.push(e)}},h.indexFromPosition=function(e,t){var n;if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+xt(e));if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+xt(t));return n=this.lineInfo[e-1],null!=n?ht(n)+t-1:0},h.getPosition=function(e){var t,n,r,o,a;if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));for(o=this.lineInfo,r=0,a=o.length;r!==a;)if(n=Math.floor((r+a)/2),t=o[n],t>e)a=n;else{if(!(e>t)){r=n;break}if(r===n)break;r=n}return{line:r+1,column:e-ht(o[r])+1}},h.getLine=function(e){if(null==e)e=this.index;else if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));return this.getPosition(e).line},h.fail=function(e,t){if("string"!=typeof e)throw TypeError("Expected message to be a String, got "+xt(e));if("number"!=typeof t)throw TypeError("Expected index to be a Number, got "+xt(t));t>ht(this.failureIndex)&&(this.failureMessages=[],this.failureIndex=t),t>=ht(this.failureIndex)&&this.failureMessages.push(e)},h.getFailure=function(e){var t,r;if(null==e)e=this.failureIndex;else if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));return r=this.source,t=e<ht(r.length)?JSON.stringify(r.substring(e,e+20)):"end-of-input",vs("Expected "+wt(n(this.failureMessages))+", but "+bt(t)+" found",this,e)},h.pushScope=function(e,t){var n;if(null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected isTop to be a Boolean, got "+xt(e));if(null==t)t=null;else if(!(t instanceof Js))throw TypeError("Expected parent to be one of "+(_t(Js)+" or null")+", got "+xt(t));return n=(t||this.scope.peek()).clone(e),this.scope.push(n),n},h.popScope=function(){this.scope.pop()},h.getPackageVersion=function(){var e;return null==(e=this._packageVersion)?this._packageVersion=ao(this.options.filename):e},h.hasMacroOrOperator=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+xt(e));return this.macros.hasMacroOrOperator(e)},h.assignOperators=function(){return this.macros.assignOperators},h.allBinaryOperators=function(){return this.macros.allBinaryOperators()},h.binaryOperators=function(e){return this.macros.binaryOperators[e]},h.prefixUnaryOperators=function(){return this.macros.prefixUnaryOperators},h.postfixUnaryOperators=function(){return this.macros.postfixUnaryOperators},h.getMacroByName=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+xt(e));return this.macros.getByName(e)},h.getMacroByLabel=function(e){if("string"!=typeof e)throw TypeError("Expected label to be a String, got "+xt(e));return this.macros.getByLabel(e)},h.enterMacro=function(e,t){if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));if(!t)throw Error("Must provide a macro name");if(this.currentMacro)throw vs("Attempting to define a macro "+wt(Ls(String(t)))+" inside a macro "+wt(Ls(String(this.currentMacro))),this,e);this.currentMacro=t},h.exitMacro=function(){if(!this.currentMacro)throw Error("Attempting to exit a macro when not in one");this.currentMacro=null},h.defineHelper=function(e,n,r){var o,a,s,i,l,c;if(!(n instanceof Eo))throw TypeError("Expected name to be a "+_t(Eo)+", got "+xt(n));if(!(r instanceof Da))throw TypeError("Expected value to be a "+_t(Da)+", got "+xt(r));l=t("./jstranslator"),i=this.macroExpandAll(r).reduce(this),c=i.type(this),s=(o=l.defineHelper(this.macros,n,i,c)).helper,a=o.dependencies,this.options.serializeMacros&&this.macros.addSerializedHelper(n.name,s,c,a)},I={",":jn,";":zs,":":kn,":=":Fn,"":Ga,"\n":si,"<":Go,">":lo,"(":ls,")":Tn,"[":cs,"]":Nn,"{":ss,"}":Cn,end:v},w=function(){var e;return e={ident:function(e,t){return Eo(0,0,e,t)},sequence:function(e){var t;return t=gt.call(arguments,1),Bi(0,0,e,b(t,e))},choice:function(e){var t;return t=gt.call(arguments,1),Ei(0,0,e,function(){var n,r,o,a;for(n=[],r=0,o=t.length;o>r;++r)a=t[r],n.push(w(a,e));return n}())},"const":function(e,t){return Jn(0,0,e,t)},many:function(e,t){var n;return n=gt.call(arguments,2),Ci(0,0,e,w(n,e),t)}},function(t,n){var r;if(null==t)t=[];else if(!ut(t))throw TypeError("Expected asType to be an Array, got "+xt(t));if(0!==t.length){if(r=t[0],mt.call(e,r))return e[r].apply(e,[n].concat(vt(gt.call(t,1))));throw Error("Unknown as-type: "+String(r))}}}(),b=function(){var e;return e={"const":function(e,t){return Jn(0,0,e,t)},ident:function(e,t){var n;return n=gt.call(arguments,2),Ai(0,0,e,Eo(0,0,e,t),w(n,e))},"this":function(e){var t;return t=gt.call(arguments,1),Ai(0,0,e,Ni(0,0,e),w(t,e))}},function(t,n){var r,o,a,s,i,l;if(!(n instanceof Js))throw TypeError("Expected scope to be a "+_t(Js)+", got "+xt(n));for(r=[],o=vt(p(t)),a=0,s=o.length;s>a;++a){if(i=o[a],l=i[0],!mt.call(e,l))throw Error("Unknown param type: "+String(l));r.push(e[l].apply(e,[n].concat(vt(gt.call(i,1)))))}return r}}(),E={syntax:function(e,t,n,a,i,p){var d,_,h,m,y,g,b,w,v,x,I,E;if(d=this,g=this.Ident(e,"macroFullData"),h=this.Param(e,g,void 0,!1,!1,void 0),b=this.Ident(e,"macroName"),v=this.scope.peek(),v.add(b,!1,zi.string),y=this.Ident(e,"macroData"),v.add(y,!1,zi.object),n=this.Block(e,[this.Var(e,b,!1),this.Assign(e,b,"=",this.Access(e,g,this.Const(e,"macroName"))),this.Var(e,y,!1),this.Assign(e,y,"=",this.Access(e,g,this.Const(e,"macroData")))].concat(function(){var n,r,o,a,s;for(n=[],r=vt(t),o=0,a=r.length;a>o;++o)s=r[o],s instanceof Ai&&(v.add(s.ident,!0,zi.any),n.push(d.Block(e,[d.Var(e,s.ident,!0),d.Assign(e,s.ident,"=",d.Access(e,y,d.Const(e,s.ident.name)))])));return n}(),[n])),w=o.call(this,e,h,n),E=p(this.macroExpandAll(w).reduce(this),this.macros,{"return":!0}),_=E.node.toString(f(i)),i.serializeMacros&&(x=_),m=Function(_)(),"function"!=typeof m)throw Error("Error creating function for macro: "+String(this.currentMacro));return I=this,{handler:function(e){var t;return t=gt.call(arguments,1),m.apply(this,[r(I,e)].concat(vt(t))).reduce(I)},rule:l.call(this,t),serialization:null!=x?{type:"syntax",code:x,options:u(a),params:s(t),names:c(this.currentMacro)}:void 0}},defineSyntax:function(e,t,n,a,i,c){var p,d,_,h;return p=this,h=this,d=null!=n?function(){var s,l,u,d,m,y,g;if(d=p.Ident(e,"macroData"),l=p.Param(e,d,void 0,!1,!1,void 0),y=p.scope.peek(),n=p.Block(e,function(){var n,r,o,a,s;for(n=[],r=vt(t),o=0,a=r.length;a>o;++o)s=r[o],s instanceof Ai&&(y.add(s.ident,!0,zi.any),n.push(p.Block(e,[p.Var(e,s.ident,!0),p.Assign(e,s.ident,"=",p.Access(e,d,p.Const(e,s.ident.name)))])));return n}().concat([n])),m=o.call(p,e,l,n),g=c(p.macroExpandAll(m).reduce(h),p.macros,{"return":!0}),s=g.node.toString(f(i)),i.serializeMacros&&(_=s),u=Function(s)(),"function"!=typeof u)throw Error("Error creating function for syntax: "+wt(a.name));return function(e){var t;return t=gt.call(arguments,1),r(h,u.apply(this,[r(h,e)].concat(vt(t))))}}():function(e){var t;return t=gt.call(arguments,1),r(h,e)},{handler:d,rule:l.call(this,t),serialization:i.serializeMacros?{type:"defineSyntax",code:_,options:u(a),params:s(t)}:void 0}},call:function(e,t,n,a,s,i){var l,p,d,_,h,m,y,g,b,w,v,x;if(l=this,m=this.Ident(e,"macroFullData"),d=this.Param(e,m,void 0,!1,!1,void 0),b=this.scope.peek(),y=this.Ident(e,"macroName"),b.add(y,!1,zi.string),h=this.Ident(e,"macroData"),b.add(h,!1,zi.object),n=this.Block(e,[this.Var(e,y,!1),this.Assign(e,y,"=",this.Access(e,m,this.Const(e,"macroName"))),this.Var(e,h,!1),this.Assign(e,h,"=",this.Access(e,m,this.Const(e,"macroData")))].concat(function(){var n,r,o,a,s;for(n=[],r=vt(t),a=0,o=r.length;o>a;++a)s=r[a],s instanceof ms&&(b.add(s.ident,!0,zi.any),n.push(l.Block(e,[l.Var(e,s.ident,!0),l.Assign(e,s.ident,"=",l.Access(e,h,l.Const(e,a)))])));return n}(),[n])),g=o.call(this,e,d,n),x=i(this.macroExpandAll(g).reduce(this),this.macros,{"return":!0}),p=x.node.toString(f(s)),s.serializeMacros&&(w=p),_=Function(p)(),"function"!=typeof _)throw Error("Error creating function for macro: "+wt(this.currentMacro));return v=this,_=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(v,t)].concat(vt(n))).reduce(v)}}(_),{handler:_,rule:Ro,serialization:null!=w?{type:"call",code:w,options:u(a),names:c(this.currentMacro)}:void 0}},binaryOperator:function(e,t,n,a,s,i){var l,p,d,_,h,m,y,g,b,w;if(l=this,h=this.Ident(e,"macroData"),d=this.Param(e,h,void 0,!1,!1,void 0),y=this.scope.peek(),n=this.Block(e,function(){var t,n,r,o,a,s;for(t=[],n=["left","op","right"],r=0,o=n.length;o>r;++r)s=n[r],a=l.Ident(e,s),y.add(a,!0,zi.any),t.push(l.Block(e,[l.Var(e,a,!0),l.Assign(e,a,"=",l.Access(e,h,l.Const(e,s)))]));return t}().concat([n])),m=o.call(this,e,d,n),w=i(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),p=w.node.toString(f(s)),s.serializeMacros&&(g=p),_=Function(p)(),"function"!=typeof _)throw Error("Error creating function for binary operator "+wt(t.join(", ")));return b=this,_=a.invertible?function(e){return function(t){var n,o;return n=gt.call(arguments,1),o=e.apply(this,[r(b,t)].concat(vt(n))),t.inverted?Zi(o.line,o.column,o.scope,"!",o).reduce(b):o.reduce(b)}}(_):function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(b,t)].concat(vt(n))).reduce(b)}}(_),{handler:_,rule:void 0,serialization:null!=g?{type:"binaryOperator",code:g,operators:c(t),options:u(a)}:void 0}},assignOperator:function(e,t,n,a,s,i){var l,p,d,_,h,m,y,g,b,w;if(l=this,h=this.Ident(e,"macroData"),d=this.Param(e,h,void 0,!1,!1,void 0),y=this.scope.peek(),n=this.Block(e,function(){var t,n,r,o,a,s;for(t=[],n=["left","op","right"],r=0,o=n.length;o>r;++r)s=n[r],a=l.Ident(e,s),y.add(a,!0,zi.any),t.push(l.Block(e,[l.Var(e,a,!0),l.Assign(e,a,"=",l.Access(e,h,l.Const(e,s)))]));return t}().concat([n])),m=o.call(this,e,d,n),w=i(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),p=w.node.toString(f(s)),s.serializeMacros&&(g=p),_=Function(p)(),"function"!=typeof _)throw Error("Error creating function for assign operator "+wt(t.join(", ")));return b=this,_=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(b,t)].concat(vt(n))).reduce(b)}}(_),{handler:_,rule:void 0,serialization:null!=g?{type:"assignOperator",code:g,operators:c(t),options:u(a)}:void 0}},unaryOperator:function(e,t,n,a,s,i){var l,p,d,_,h,m,y,g,b,w;if(l=this,h=this.Ident(e,"macroData"),d=this.Param(e,h,void 0,!1,!1,void 0),y=this.scope.peek(),n=this.Block(e,function(){var t,n,r,o,a,s;for(t=[],n=["op","node"],r=0,o=n.length;o>r;++r)s=n[r],a=l.Ident(e,s),y.add(a,!0,zi.any),t.push(l.Block(e,[l.Var(e,a,!0),l.Assign(e,a,"=",l.Access(e,h,l.Const(e,s)))]));return t}().concat([n])),m=o.call(this,e,d,n),w=i(this.macroExpandAll(m).reduce(this),this.macros,{"return":!0}),p=w.node.toString(f(s)),s.serializeMacros&&(g=p),_=Function(p)(),"function"!=typeof _)throw Error("Error creating function for unary operator "+wt(t.join(", ")));return b=this,_=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(b,t)].concat(vt(n))).reduce(b)}}(_),{handler:_,rule:void 0,serialization:null!=g?{type:"unaryOperator",code:g,operators:c(t),options:u(a)}:void 0}}},x={syntax:function(e){var t,n,o,a,s,i,c,u;if(t=this,n=e.code,c=e.params,s=e.names,i=e.options,null==i&&(i={}),a=e.id,s=p(s),o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for macro "+wt(name));return u=this,o=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(u,t)].concat(vt(n))).reduce(u)}}(o),this.enterMacro(0,s),_.call(this,0,"syntax",o,l.call(this,b(c,this.scope.peek())),null,i,a),this.exitMacro()},call:function(e){var t,n,o,a,s,i,l;if(t=this,n=e.code,s=e.names,i=e.options,null==i&&(i={}),a=e.id,s=p(s),o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for macro "+wt(name));return l=this,o=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(l,t)].concat(vt(n))).reduce(l)}}(o),this.enterMacro(0,s),_.call(this,0,"call",o,Ro,null,i,a),this.exitMacro()},defineSyntax:function(e){var t,n,o,a,s,i,c;if(t=this,n=e.code,i=e.params,s=e.options,null==s&&(s={}),a=e.id,this.macros.hasSyntax(s.name))throw Error("Cannot override already-defined syntax: "+wt(s.name));if(c=this,null!=n){if(o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for macro syntax "+wt(s.name));o=function(e){return function(t){var n;return n=gt.call(arguments,1),r(c,e.apply(this,[r(c,t)].concat(vt(n))))}}(o)}else o=function(e){return r(c,e)};return this.enterMacro(0,g),_.call(this,0,"defineSyntax",o,l.call(this,b(i,this.scope.peek())),null,s,a),this.exitMacro()},binaryOperator:function(e){var t,n,o,a,s,i,l;if(t=this,n=e.code,s=e.operators,i=e.options,null==i&&(i={}),a=e.id,s=p(s),o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for binary operator "+wt(s.join(", ")));return l=this,o=i.invertible?function(e){return function(t){var n,o;return n=gt.call(arguments,1),o=e.apply(this,[r(l,t)].concat(vt(n))),t.inverted?Zi(o.line,o.column,o.scope,"!",o).reduce(l):o.reduce(l)}}(o):function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(l,t)].concat(vt(n))).reduce(l)}}(o),this.enterMacro(0,y),_.call(this,0,"binaryOperator",o,void 0,s,i,a),this.exitMacro()},assignOperator:function(e){var t,n,o,a,s,i,l;if(t=this,n=e.code,s=e.operators,i=e.options,null==i&&(i={}),a=e.id,s=p(s),o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for assign operator "+wt(s.join(", ")));return l=this,o=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(l,t)].concat(vt(n))).reduce(l)}}(o),this.enterMacro(0,m),_.call(this,0,"assignOperator",o,void 0,s,i,a),this.exitMacro()},unaryOperator:function(e){var t,n,o,a,s,i,l;if(t=this,n=e.code,s=e.operators,i=e.options,null==i&&(i={}),a=e.id,s=p(s),o=Function(n)(),"function"!=typeof o)throw Error("Error deserializing function for unary operator "+wt(s.join(", ")));l=this,o=function(e){return function(t){var n;return n=gt.call(arguments,1),e.apply(this,[r(l,t)].concat(vt(n))).reduce(l)}}(o),this.enterMacro(0,C),_.call(this,0,"unaryOperator",o,void 0,s,i,a),this.exitMacro()}},h.startMacroSyntax=function(e,t,n){function r(e,t,n){if(t.inAst.peek()||!t.expandingMacros)return t.MacroAccess(n,u,t.getLine(n),d(e),t.position.peek(),t.inGenerator.peek(),t.inEvilAst.peek());throw Error("Cannot use macro until fully defined")}var o,a,s,i,c,u,f,p;if(!ut(t))throw TypeError("Expected params to be an Array, got "+xt(t));if(null==n&&(n={}),!this.currentMacro)throw Error("Attempting to specify a macro syntax when not in a macro");for(p=l.call(this,t),f=this.macros,o=vt(f.getOrAddByNames(this.currentMacro)),a=0,s=o.length;s>a;++a)c=o[a],c.data.push((i=Xs(["macroName",c.token],["macroData",p]),Ba(r)(i)));return u=f.addMacro(r,void 0,null!=n.type&&mt.call(zi,i=n.type)?zi[i]:void 0),this.pendingMacroId=u,t},h.macroSyntax=function(e,n,r,o,a){var s,i,l,c,u;if(!ut(r))throw TypeError("Expected params to be an Array, got "+xt(r));if(!mt.call(E,n))throw Error("Unknown macro-syntax type: "+wt(n));this.currentMacro||this.error("Attempting to specify a macro syntax when not in a macro"),i=(s=E[n].call(this,e,r,a,o,this.options,t("./jstranslator"))).handler,c=s.rule,u=s.serialization,l=_.call(this,e,n,i,c,r,o),null!=u&&(u.id=l,this.macros.addMacroSerialization(u))},y={},h.defineBinaryOperator=function(e,t,n,r){var o;if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));if(!ut(t))throw TypeError("Expected operators to be an Array, got "+xt(t));for(o=t.length;o--;)if("string"!=typeof t[o])throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+xt(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+xt(n));if(!(r instanceof Da))throw TypeError("Expected body to be a "+_t(Da)+", got "+xt(r));return this.enterMacro(e,y),this.macroSyntax(e,"binaryOperator",t,n,r),this.exitMacro()},m={},h.defineAssignOperator=function(e,t,n,r){var o;if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));if(!ut(t))throw TypeError("Expected operators to be an Array, got "+xt(t));for(o=t.length;o--;)if("string"!=typeof t[o])throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+xt(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+xt(n));if(!(r instanceof Da))throw TypeError("Expected body to be a "+_t(Da)+", got "+xt(r));return this.enterMacro(e,m),this.macroSyntax(e,"assignOperator",t,n,r),this.exitMacro()},C={},h.defineUnaryOperator=function(e,t,n,r){var o;if("number"!=typeof e)throw TypeError("Expected index to be a Number, got "+xt(e));if(!ut(t))throw TypeError("Expected operators to be an Array, got "+xt(t));for(o=t.length;o--;)if("string"!=typeof t[o])throw TypeError("Expected "+("operators["+o+"]")+" to be a String, got "+xt(t[o]));if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+xt(n));if(!(r instanceof Da))throw TypeError("Expected body to be a "+_t(Da)+", got "+xt(r));return this.enterMacro(e,C),this.macroSyntax(e,"unaryOperator",t,n,r),this.exitMacro()},g={},h.defineSyntax=function(e,t,n,r){return this.enterMacro(e,g),this.macroSyntax(e,"defineSyntax",n,{name:t},r),this.exitMacro()},h.defineConst=function(e,t,n){var r;if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+xt(t));r=this.scope.peek(),r===this.scope.initial&&(this.macros.addConst(t,n),this.options.serializeMacros&&this.macros.addSerializedConst(t)),r.addConst(t,n)},h.getConst=function(e,t){var n,r;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+xt(e));if(null==t)t=this.scope.peek();else if(!(t instanceof Js))throw TypeError("Expected scope to be a "+_t(Js)+", got "+xt(t));return null!=(n=t.constValue(e))?n:(r=this.macros.consts,mt.call(r,e)?{value:r[e]}:void 0)},h.deserializeMacros=function(e){var t,n,r,o,a,s,i;for(i in x)if(mt.call(x,i))for(a=x[i],t=vt(null!=(o=mt.call(e,i)?e[i]:void 0)?o:[]),n=0,r=t.length;r>n;++n)s=t[n],a.call(this,s)},h.macroExpand1=function(e){var t,n,r,o,a,s;if(null!=e._macroExpanded)return e._macroExpanded;if(e instanceof Xo){for(o=[];e instanceof Xo;){o.push(e),this.position.push(e.position),this.inGenerator.push(e.inGenerator),this.inEvilAst.push(e.inEvilAst),this.scope.push(e.scope),a=this.expandingMacros,this.expandingMacros=!0,s=void 0;try{s=this.macros.getById(e.id)(e.data,this,this.indexFromPosition(e.line,e.column))}catch(i){throw i instanceof ea&&i.setPosition(e.callLine,0),i}finally{this.scope.pop(),this.position.pop(),this.inGenerator.pop(),this.inEvilAst.pop(),this.expandingMacros=a}e=e.doWrapped?s.doWrap(this):s}for(t=0,n=o.length;n>t;++t)r=o[t],r._macroExpanded=e;return e}return e._macroExpanded=e},h.macroExpandAllAsync=function(e,t){function n(e,t){var a,s,i;if(ht((new Date).getTime())-ht(o)>5)return Ks(function(){return o=(new Date).getTime(),n(e,t)});if(null!=e._macroExpandAlled)return t(null,e._macroExpandAlled);if(e instanceof Xo){try{i=r.macroExpand1(e)}catch(l){return t(l)}return i instanceof Da?n(i,(s=!1,function(n,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=n?t(n):t(null,i._macroExpandAlled=i._macroExpanded=r._macroExpandAlled=r._macroExpanded=e._macroExpandAlled=e._macroExpanded=r)})):t(null,e._macroExpandAlled=e._macroExpanded=i)}return e.walkAsync(n,(a=!1,function(n,r){if(a)throw Error("Attempted to call function more than once");return a=!0,null!=n?t(n):t(null,r._macroExpandAlled=r._macroExpanded=e._macroExpandAlled=e._macroExpanded=r)}))}var r,o;return r=this,o=(new Date).getTime(),n(e,t)},h.macroExpandAll=function(e){function t(e){var r,o;return null!=e._macroExpandAlled?e._macroExpandAlled:e instanceof Xo?(r=n.macroExpand1(e),r instanceof Da?(o=t(r),r._macroExpandAlled=r._macroExpanded=o._macroExpandAlled=o._macroExpanded=e._macroExpandAlled=e._macroExpanded=o):e._macroExpandAlled=e._macroExpanded=r):(o=e.walk(t),o._macroExpandAlled=o._macroExpanded=e._macroExpandAlled=e._macroExpanded=o)}var n;return n=this,t(e)},h.macroExpandAllPromise=function(e){var t;return this.options.sync?rt.fulfilled(this.macroExpandAll(e)):(t=rt(),this.macroExpandAllAsync(e,function(e,n){return e?t.reject(e):t.fulfill(n)}),t.promise)},h.clearCache=function(){this.cache=[]},e.addNodeFactory=function(t,n){e.prototype[t]=function(e){var t,r;return t=gt.call(arguments,1),r=this.getPosition(e),n.apply(void 0,[r.line,r.column,this.scope.peek()].concat(vt(t)))}},e}(),bs=yt(function(e,t,n){function r(){i=8}function o(r){for(;;)switch(i){case 0:if("string"!=typeof e)throw TypeError("Expected source to be a String, got "+xt(e));if(null==t)t=null;else if(!(t instanceof ta))throw TypeError("Expected macros to be one of "+(_t(ta)+" or null")+", got "+xt(t));if(null==n)n={};else if("object"!=typeof n||null===n)throw TypeError("Expected options to be an Object, got "+xt(n));d=ws(e,null!=t?t.clone():void 0,n),m=n.embeddedGenerator?Tr:n.embedded?kr:Ws,y=(new Date).getTime(),h=void 0,++i;case 1:i=n.sync?2:3;break;case 2:h=m.sync(d),i=6;break;case 3:return++i,{done:!1,value:m(d)};case 4:h=r,i=6;break;case 5:if(l!==ei)throw l;++i;case 6:if(d.clearCache(),u=(new Date).getTime(),"function"==typeof n.progress&&n.progress("parse",ht(u)-ht(y)),!h||ht(h.index)<e.length)throw d.getFailure(null!=h?h.index:void 0);return++i,{done:!1,value:d.macroExpandAllPromise(h.value)};case 7:return p=r,c=(new Date).getTime(),"function"==typeof n.progress&&n.progress("macroExpand",ht(c)-ht(u)),_=p.reduce(d),f=(new Date).getTime(),"function"==typeof n.progress&&n.progress("reduce",ht(f)-ht(c)),++i,{done:!0,value:{result:_,macros:d.macros,parseTime:ht(u)-ht(y),macroExpandTime:ht(c)-ht(u),reduceTime:ht(f)-ht(c),time:ht(f)-ht(y)}};case 8:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function a(e){if(!(i>=1&&4>=i))throw r(),e;l=e,i=5}function s(e){for(;;)try{return o(e)}catch(t){a(t)}}var s,i,o,a,l,c,u,f,p,d,_,h,m,y;return i=0,{close:r,iterator:function(){return this},next:function(){return s(void 0)},send:s,"throw":function(e){return a(e),s(void 0)}}}),bs.ParserError=vs,bs.MacroError=ea,bs.Node=Da,bs.MacroHolder=ta,bs.unusedCaches=sl,bs.deserializePrelude=function(e){var t,n;return t="string"==typeof e?JSON.parse(e):e,n=ws(),n.macros.deserialize(t,n,{}),{result:Wa(0,0,n.scope.peek()),macros:n.macros}},bs.getReservedWords=function(e,t){return null==t&&(t={}),al(vt(so(t)).concat(vt(null!=e&&"function"==typeof e.getMacroAndOperatorNames&&e.getMacroAndOperatorNames()||[])))},e.exports=bs;for(It=["Access","AccessMulti","Args","Array","Assign","Binary","Block","Break","Call","Cascade","Comment","Const","Continue","Debugger","Def","EmbedWrite","Eval","For","ForIn","Function","Ident","If","MacroAccess","MacroConst","Nothing","Object","Param","Regexp","Return","Root","Spread","Super","Switch","SyntaxChoice","SyntaxMany","SyntaxParam","SyntaxSequence","This","Throw","Tmp","TmpWrapper","TryCatch","TryFinally","TypeFunction","TypeGeneric","TypeObject","TypeUnion","Unary","Var","Yield"],Bt=0,Tt=It.length;Tt>Bt;++Bt)Fa=It[Bt],ws.addNodeFactory(Fa,Da[Fa]);ws.prototype.string=Da.string,ws.prototype.arrayParam=ws.prototype.array,ws.prototype.object=Da.object,ws.prototype.objectParam=Da.objectParam}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./parser-utils"]=function(){var e={exports:this},n=this;return function(){"use strict";function e(e,t,n){var r,o,a,s,i,l,c;for(c=[],s=!1,r=f(e),o=0,a=r.length;a>o;++o)i=r[o],l=t(i,n),c.push(l),i!==l&&(s=!0);return s?c:e}function r(e,t){var n,r,o,s;return n=arguments.length-1,n>2?r=u.call(arguments,2,n):(n=2,r=[]),o=arguments[n],s=!1,a(1,i(e.length),!0,function(n,o){var a,i;return i=e[n],t.apply(void 0,[i].concat(f(r),[(a=!1,function(e,t){if(a)throw Error("Attempted to call function more than once");return a=!0,null!=e?o(e):(i!==t&&(s=!0),o(null,t))})]))},function(t,n){return"undefined"!=typeof t&&null!==t?o(t):o(null,s?n:e)})}function o(e,n,r){var a,s,i,l,c,u;if(c=t("./parser-nodes"),n instanceof c.Param)if((i=n.ident)instanceof c.Ident||i instanceof c.Tmp)e.add(n.ident,r||n.isMutable,n.asType?d(n.asType):n.spread?_.array:_.any);else{if(!(n.ident instanceof c.Access))throw Error("Unknown param ident: "+p(n.ident));if(!(n.ident.child instanceof c.Const)||"string"!=typeof n.ident.child.value)throw Error("Expected constant access: "+p(n.ident.child));e.add(c.Ident(n.line,n.column,n.scope,n.ident.child.value),r||n.isMutable,n.asType?d(n.asType):n.spread?_.array:_.any)}else if(n instanceof c.Array)for(a=f(n.elements),s=a.length;s--;)l=a[s],o(e,l,r);else if(n instanceof c.Object)for(a=f(n.pairs),s=a.length;s--;)u=a[s],o(e,u.value,r);else if(!(n instanceof c.Nothing))throw Error("Unknown param node type: "+p(n))}var a,s,i,l,c,u,f,p,d,_;a=function(e,t,n,r,o){function a(e,t){c||(--d,null!=e&&null==i&&(i=e),n&&null==i&&arguments.length>1&&f.push(t),_||s())}function s(){for(;!c&&null==i&&e>d&&++u<t;)++d,_=!0,r(u,l(a)),_=!1;c||null==i&&0!==d||(c=!0,null!=i?o(i):o(null,f))}var i,c,u,f,d,_;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+p(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+p(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+p(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+p(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+p(o));return f=n?[]:null,0>=t?o(null,f):((1>e||e!==e)&&(e=1/0),i=null,d=0,_=!1,c=!1,u=-1,s(),void 0)},s="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),i=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+p(e));return e},l=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+p(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+p(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),c=Object.prototype.hasOwnProperty,u=Array.prototype.slice,f=function(e){if(null==e)throw TypeError("Expected an object, got "+p(e));return s(e)?e:"string"==typeof e?e.split(""):u.call(e)},p=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),_=t("./types"),d=function(){var e;return e={Boolean:_.boolean,String:_.string,Number:_.number,Array:_.array,Object:_.object,Function:_["function"],RegExp:_.regexp,Date:_.date,Error:_.error,RangeError:_.error,ReferenceError:_.error,SyntaxError:_.error,TypeError:_.error,URIError:_.error},function(n){var r,o,a,s,i,l,u,h,m,y,g,b,w,v;if(b=t("./parser-nodes"),!(n instanceof b))throw TypeError("Expected a Node, got "+p(n));if(n instanceof b.Ident)return(c.call(e,i=n.name)?e[i]:void 0)||_.any;if(n instanceof b.Const)return null===n.value?_["null"]:void 0===n.value?_.undefined:_.any;if(n instanceof b.TypeGeneric){for(h=d(n.basetype),r=[],o=f(n.args),a=0,s=o.length;s>a;++a)l=o[a],r.push(d(l));return u=r,h===_.array||h===_["function"]?_.generic.apply(_,[h.base].concat(f(u))):h!==_.any?_.generic.apply(_,[h].concat(f(u))):_.any}if(n instanceof b.TypeUnion){for(m=_.none,r=f(n.types),a=r.length;a--;)w=r[a],m=m.union(d(w));return m}if(n instanceof b.TypeObject){for(y={},r=f(n.pairs),a=0,s=r.length;s>a;++a)g=(i=r[a]).key,v=i.value,g instanceof b.Const&&(y[g.value]=d(v));return _.makeObject(y)}return _.any}}(),n.nodeToType=d,n.map=e,n.mapAsync=r,n.addParamToScope=o}.call(this),e.exports},t["./parser-scope"]=function(){var e={exports:this};return function(){"use strict";var n,r,o,a,s,i,l,c,u,f,p,d,_,h,m;n="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},r=function(e,t){var n;for(n in t)s.call(t,n)&&(e[n]=t[n]);return e},o="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),a=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+c(e));return e.displayName||e.name||""},s=Object.prototype.hasOwnProperty,i=Array.prototype.slice,l=function(e){if(null==e)throw TypeError("Expected an object, got "+c(e));return o(e)?e:"string"==typeof e?e.split(""):i.call(e)},c=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),m=t("./types"),p=t("./parser-nodes"),f=p.Ident,h=p.Tmp,_=function(e){function t(r){var a,s;if(a=this instanceof t?this:n(o),null==r)r="Scope already destroyed";else if("string"!=typeof r)throw TypeError("Expected message to be a String, got "+c(r));return a.message=r,s=e.call(a,a.message),"function"==typeof e.captureStackTrace?e.captureStackTrace(a,t):"stack"in s&&(a.stack=s.stack),a}var r,o;return r=e.prototype,o=t.prototype=n(r),o.constructor=t,t.displayName="ScopeDestroyedError","function"==typeof e.extended&&e.extended(t),o.name="ScopeDestroyedError",t}(Error),d=function(){function e(t,r){var o;if(o=this instanceof e?this:n(y),null==t)t=null;else if(!(t instanceof e))throw TypeError("Expected parent to be one of "+(a(e)+" or null")+", got "+c(t));if(o.parent=t,null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected isTop to be a Boolean, got "+c(r));if(o.isTop=r,!t&&!r)throw Error("Must either provide a parent or is-top = true");
return o.destroyed=!1,o.children=[],o.variables={},o.consts={},o.tmps={},r||t.children.push(o),o}function o(e){var t;for(t in e)if(s.call(e,t))return!1;return!0}function i(e,t){var n,r,o,a,c,u;if(u=e.variables,s.call(u,t))return u[t];for(n=l(e.children),r=0,o=n.length;o>r;++r)if(c=n[r],null!=(a=i(c,t)))return a}function u(e,t){var n,r,o,a,i,c;if(c=e.tmps,s.call(c,t))return c[t];for(n=l(e.children),r=0,o=n.length;o>r;++r)if(i=n[r],null!=(a=u(i,t)))return a}function p(e,t){var n,r,o,a,s;for(o=e,a=t instanceof h,s=0;o;){if(++s,s>1e3)throw Error("Infinite loop detected");if(o=o.top(),a){if(null!=(n=u(o,t.id)))return n}else if(null!=(r=i(o,t.name)))return r;o=o.parent}}function d(e,t){var n,r,o,a,i,c;if(c=e.consts,s.call(c,t))return{value:c[t]};for(n=l(e.children),r=0,o=n.length;o>r;++r)if(i=n[r],null!=(a=d(i,t)))return a}var y;return y=e.prototype,e.displayName="Scope",y._allVariables=function(){var e,t,n,o,a;for(a=r({},this.variables),e=l(this.children),t=0,n=e.length;n>t;++t)o=e[t],r(a,o._allVariables());return a},y._allTmps=function(){var e,t,n,o,a;for(a=r({},this.tmps),e=l(this.children),t=0,n=e.length;n>t;++t)o=e[t],r(a,o._allTmps());return a},y._allConsts=function(){var e,t,n,o,a;for(a=r({},this.consts),e=l(this.children),t=0,n=e.length;n>t;++t)o=e[t],r(a,o._allConsts());return a},y.inspect=function(){var e,n,r,a,s;return this.isTop?(n=t("util").inspect,s=this._allVariables(),a=this._allTmps(),e=this._allConsts(),r=[],r.push("Scope("),o(s)&&o(a)&&o(e)||r.push(n(s)),o(a)&&o(e)||(r.push(", "),r.push(n(a))),o(e)||(r.push(", "),r.push(n(e))),r.push(")"),this.parent&&(r.push(" -> "),r.push(this.parent.inspect())),r.join("")):this.top().inspect()},y.destroy=function(){var e,t,n,r,o;if(this.destroyed)throw _();for(e=l(this.children),t=e.length;t--;)n=e[t],n.destroy();if(!this.isTop){if(o=this.parent.children,r=o.lastIndexOf(this),-1===r)throw Error("Not found in parents' children");o.splice(r,1)}},y.clone=function(t){if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isTop to be a Boolean, got "+c(t));if(this.destroyed)throw _();return e(this,t)},y.reparent=function(t){var n,r,o;if(null==t)t=null;else if(!(t instanceof e))throw TypeError("Expected parent to be one of "+(a(e)+" or null")+", got "+c(t));if(this.destroyed)throw _();if(!t&&!this.isTop)throw Error("Must either provide a parent or is-top = true");if(r=this.parent,t!==r){if(t===this)throw Error("Cannot parent to self");if(t&&t.parent===this)throw Error("Trying to become your own grandpa");if(this.parent=t,!this.isTop){if(o=r.children,n=o.lastIndexOf(this),-1===n)throw Error("Not found in old parents' children");o.splice(n,1),t.children.push(this)}}},y.top=function(){if(this.destroyed)throw _();return this.isTop?this:this.parent.top()},y.add=function(e,t,n){if(!(e instanceof f||e instanceof h))throw TypeError("Expected ident to be one of "+(a(f)+" or "+a(h))+", got "+c(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+c(t));if(!(n instanceof m))throw TypeError("Expected type to be a "+a(m)+", got "+c(n));if(this.destroyed)throw _();e instanceof h?this.tmps[e.id]={isMutable:t,type:n}:this.variables[e.name]={isMutable:t,type:n}},y.addConst=function(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+c(e));this.consts[e]=t},y.has=function(e){if(!(e instanceof f||e instanceof h))throw TypeError("Expected ident to be one of "+(a(f)+" or "+a(h))+", got "+c(e));if(this.destroyed)throw _();return null!=p(this,e)},y.isMutable=function(e){var t;if(!(e instanceof f||e instanceof h))throw TypeError("Expected ident to be one of "+(a(f)+" or "+a(h))+", got "+c(e));if(this.destroyed)throw _();return(null!=(t=p(this,e))?t.isMutable:void 0)||!1},y.type=function(e){var t;if(!(e instanceof f||e instanceof h))throw TypeError("Expected ident to be one of "+(a(f)+" or "+a(h))+", got "+c(e));if(this.destroyed)throw _();return(null!=(t=p(this,e))?t.type:void 0)||m.any},y.constValue=function(e){var t,n,r;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+c(e));if(this.destroyed)throw _();for(n=this,r=0;n;){if(++r,r>1e3)throw Error("Infinite loop detected");if(n=n.top(),null!=(t=d(n,e)))return t;n=n.parent}},e}(),e.exports=d,(u=e.exports).ScopeDestroyedError=_}.call(this),e.exports},t["./parser-nodes"]=function(){var e={exports:this};return function(n){"use strict";function r(e,t,n){var r,o,a,s,i,l,c;for(c=[],s=!1,r=y(e),o=0,a=r.length;a>o;++o)i=r[o],l=t(i,n),c.push(l),i!==l&&(s=!0);return s?c:e}function o(e,t){var n,r,o,a,s,i,l,u,f,d,_;for(i=h.call(arguments,4),l=null!=e?p(e)-1:null,u=!1,r=i.length;r--&&(s=i[r],!s||s instanceof Y||c(s)&&0===s.length);)i.pop();for(n=[],r=0,o=i.length;o>r;++r)s=i[r],n.push(q(s,null,l));for(_=n,a=!1,r=0,o=_.length;o>r;++r)if(d=_[r],_.length>50||-1!==d.indexOf("\n")){a=!0;break}if(f=a){for(n=[],r=0,o=_.length;o>r;++r)d=_[r],n.push("  "+m(d.split("\n").join("\n  ")));return _=n,m(t)+"(\n"+m(_.join(",\n"))+")"}return m(t)+"("+m(_.join(", "))+")"}var a,s,i,l,c,u,f,p,d,_,h,m,y,g,b,w,v,x,I,E,C,A,B,T,N,k,S,M,D,F,O,j,L,R,U,P,V,q,G,W,J,z,H,Y,$,X,K,Z,Q,et,tt,nt,rt,ot,at,st,it,lt,ct,ut,ft,pt,dt,_t,ht,mt,yt,gt,bt,wt,vt;a=function(e,t,n,r,o){function a(e,t){l||(--f,null!=e&&null==i&&(i=e),n&&null==i&&arguments.length>1&&u.push(t),p||s())}function s(){for(;!l&&null==i&&e>f&&++c<t;)++f,p=!0,r(c,d(a)),p=!1;l||null==i&&0!==f||(l=!0,null!=i?o(i):o(null,u))}var i,l,c,u,f,p;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+g(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+g(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+g(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+g(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+g(o));return u=n?[]:null,0>=t?o(null,u):((1>e||e!==e)&&(e=1/0),i=null,f=0,p=!1,l=!1,c=-1,s(),void 0)},s="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},i=function(e,t){var n;if("number"!=typeof e)throw TypeError("Expected numArgs to be a Number, got "+g(e));if("function"!=typeof t)throw TypeError("Expected f to be a Function, got "+g(t));return e>1?(n=function(r){var o;return p(r.length)>=e?t.apply(this,r):o=function(){return 0===arguments.length?o:n.call(this,r.concat(h.call(arguments)))}},n([])):t},l="function"==typeof Array.prototype.indexOf?function(){var e;return e=Array.prototype.indexOf,function(t,n){return-1!==e.call(n,t)}}():function(e,t){var n,r;for(r=+t.length,n=-1;++n<r;)if(e===t[n]&&n in t)return!0;return!1},c="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),u="function"==typeof Object.keys?Object.keys:function(e){var t,n;n=[];for(t in e)_.call(e,t)&&n.push(t);return n},f=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+g(e));return e.displayName||e.name||""},p=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+g(e));return e},d=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+g(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+g(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),_=Object.prototype.hasOwnProperty,h=Array.prototype.slice,m=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+g(e))},y=function(e){if(null==e)throw TypeError("Expected an object, got "+g(e));return c(e)?e:"string"==typeof e?e.split(""):h.call(e)},g=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),_t=t("./types"),H=(b=t("./parser-utils")).nodeToType,r=b.map,J=b.mapAsync,K=t("./utils").quote,null!=(b=t("util"))&&(q=b.inspect),z=function(){function e(){var n;throw n=this instanceof e?this:s(t),Error("Node should not be instantiated directly")}var t;return t=e.prototype,e.displayName="Node",t.type=function(){return _t.any},t.walk=function(){return this},t.walkAsync=function(e,t){return t(null,this)},t.cacheable=!0,t.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return A(this.line,this.column,this.scope,[this],e)},t._reduce=function(e){return this.walk(function(t){return t.reduce(e)})},t.reduce=function(e){var t;return null!=this._reduced?this._reduced:(t=this._reduce(e),this._reduced=t===this?this:t.reduce(e))},t.isConst=function(){return!1},t.constValue=function(){throw Error("Not a const: "+g(this))},t.isConstType=function(){return!1},t.isConstValue=function(){return!1},t.isLiteral=function(){return this.isConst()},t.literalValue=function(){return this.constValue()},t.isNoop=function(e){return this.reduce(e)._isNoop(e)},t._isNoop=function(){return!1},t.isStatement=function(){return!1},t.rescope=function(e){function t(r){var o,a;return o=r.scope,o===e?r:o===n?r.rescope(e):(a=o.parent,a===n&&o.reparent(e),r.walk(t))}var n;return this.scope===e?this:(n=this.scope,this.scope=e,this.walk(t))},t.doWrap=function(e){var t,n;return this.isStatement()?(t=e.pushScope(!0,this.scope),n=T(this.line,this.column,this.scope,U(this.line,this.column,this.scope,[],this.rescope(t),!0,!0),[]),e.popScope(),n):this},e}(),z.Access=v=function(e){function t(r,o,a,i,l){var c;if(c=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected parent to be a "+f(e)+", got "+g(i));if(!(l instanceof e))throw TypeError("Expected child to be a "+f(e)+", got "+g(l));return c.line=r,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.parent=i,c.child=l,c}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="AccessNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Access",t.argNames=["parent","child"],n.type=function(e){var t,n;return n=this,null==(t=this._type)?this._type=function(){var t,r,o,a,s;if(s=n.parent.type(e),a=s.isSubsetOf(_t.string),a||s.isSubsetOf(_t.arrayLike)){if(t=e.macroExpand1(n.child).reduce(e),t.isConst()){if(o=t.constValue(),"length"===o)return _t.number;if("number"==typeof o)return p(o)>=0&&0===p(o)%1?a?_t.string.union(_t.undefined):s.subtype?s.subtype.union(_t.undefined):_t.any:_t.undefined}else if(r=t.type(e),r.isSubsetOf(_t.number))return a?_t.string.union(_t.undefined):s.subtype?s.subtype.union(_t.undefined):_t.any}else if(s.isSubsetOf(_t.object)&&"function"==typeof s.value&&(t=e.macroExpand1(n.child).reduce(e),t.isConst()))return s.value(String(t.constValue()));return _t.any}():t},n._reduce=function(e){function n(r){var o;return r instanceof P&&"__currentArrayLength"===r.name?(d.cacheable&&null==a&&(a=e.makeTmp(e.indexFromPosition(r.line,r.column),"ref",d.type(e)),a.scope=r.scope),t(r.line,r.column,r.scope,null!=a?a:d,S(r.line,r.column,r.scope,"length"))):r instanceof t?(o=n(r.parent),o!==r.parent?t(r.line,r.column,r.scope,o,r.child).walk(n):r.walk(n)):r.walk(n)}var r,o,a,s,i,l,c,u,f,d,_,h,m,y;return d=this.parent.reduce(e).doWrap(e),a=null,s=n(this.child.reduce(e).doWrap(e)),null!=a?ft(this.line,this.column,this.scope,t(this.line,this.column,this.scope,E(this.line,this.column,this.scope,a,"=",d),s),[a.id]):d.isConst()&&s.isConst()&&(_=d.constValue(),i=s.constValue(),i in Object(_)&&(y=_[i],null===y||y instanceof RegExp||"string"==(r=typeof y)||"number"===r||"boolean"===r||"undefined"===r))?S(this.line,this.column,this.scope,y):s instanceof T&&s.func instanceof P&&"__range"===s.func.name?(h=(r=s.args)[0],l=r[1],m=r[2],f=r[3],u=!m.isConst()||1!==m.constValue(),u||(f.isConst()?f.constValue()&&(l=l.isConst()&&"number"==typeof l.constValue()?S(l.line,l.column,l.scope,p(l.constValue())+1||1/0):C(l.line,l.column,l.scope,C(l.line,l.column,l.scope,l,"+",S(f.line,f.column,f.scope,1)),"||",S(l.line,l.column,l.scope,1/0))):l=V(l.line,l.column,l.scope,f,C(l.line,l.column,l.scope,C(l.line,l.column,l.scope,l,"+",S(f.line,f.column,f.scope,1)),"||",S(l.line,l.column,l.scope,1/0)),l)),o=[d],c=!l.isConst()||void 0!==(r=l.constValue())&&r!==1/0,(!h.isConst()||0!==h.constValue()||c||u)&&o.push(h),(c||u)&&o.push(l),u&&(o.push(m),(!f.isConst()||f.constValue())&&o.push(f)),T(this.line,this.column,this.scope,P(this.line,this.column,this.scope,u?"__sliceStep":"__slice"),o,!1,!u).reduce(e)):d!==this.parent||s!==this.child?t(this.line,this.column,this.scope,d,s):this},n._isNoop=function(e){var t;return null==(t=this.__isNoop)?this.__isNoop=this.parent.isNoop(e)&&this.child.isNoop(e):t},n.inspect=function(e){return o(e,"AccessNode",this.line,this.column,this.parent,this.child)},n.walk=function(e){var n,r;return r=e(this.parent),n=e(this.child),r!==this.parent||n!==this.child?t(this.line,this.column,this.scope,r,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.parent,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.child,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.parent||r!==o.child?t(o.line,o.column,o.scope,s,r):o)}))}))},t}(z),z.AccessMulti=w=function(e){function t(r,o,a,i,l){var u,p;if(p=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected parent to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected elements to be an Array, got "+g(l));for(u=l.length;u--;)if(!(l[u]instanceof e))throw TypeError("Expected "+("elements["+u+"]")+" to be a "+f(e)+", got "+g(l[u]));return p.line=r,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.parent=i,p.elements=l,p}var n,a;return a=e.prototype,n=t.prototype=s(a),n.constructor=t,t.displayName="AccessMultiNode","function"==typeof e.extended&&e.extended(t),t.cappedName="AccessMulti",t.argNames=["parent","elements"],n.type=function(){return _t.array},n._reduce=function(e){var t,n,r,o,a,s;return t=this,n=this.parent.reduce(e),o=n,s=[],n.cacheable&&(a=e.makeTmp(e.indexFromPosition(this.line,this.column),"ref",n.type(e)),a.scope=this.scope,s.push(a.id),o=E(this.line,this.column,this.scope,a,"=",n.doWrap(e)),n=a),r=I(this.line,this.column,this.scope,function(){var r,a,s,i,l;for(r=[],a=y(t.elements),l=0,s=a.length;s>l;++l)i=a[l],r.push(v(t.line,t.column,t.scope,0===l?o:n,i.reduce(e)));return r}()),s.length?ft(this.line,this.column,this.scope,r,s):r},n.inspect=function(e){return o(e,"AccessMultiNode",this.line,this.column,this.parent,this.elements)},n.walk=function(e){var n,o;return o=e(this.parent),n=r(this.elements,e),o!==this.parent||n!==this.elements?t(this.line,this.column,this.scope,o,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.parent,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):J(o.elements,e,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.parent||r!==o.elements?t(o.line,o.column,o.scope,s,r):o)}))}))},t}(z),z.Args=x=function(e){function t(e,r,o){var a;if(a=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));return a.line=e,a.column=r,a.scope=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="ArgsNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Args",t.argNames=[],n.type=function(){return _t.args},n.cacheable=!1,n._isNoop=function(){return!0},n.inspect=function(e){return o(e,"ArgsNode",this.line,this.column)},t}(z),z.Array=I=function(e){function t(r,o,a,i){var l,u;if(u=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!c(i))throw TypeError("Expected elements to be an Array, got "+g(i));for(l=i.length;l--;)if(!(i[l]instanceof e))throw TypeError("Expected "+("elements["+l+"]")+" to be a "+f(e)+", got "+g(i[l]));return u.line=r,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.elements=i,u}var n,a;return a=e.prototype,n=t.prototype=s(a),n.constructor=t,t.displayName="ArrayNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Array",t.argNames=["elements"],n.type=function(){return _t.array},n._reduce=function(e){var n;return n=r(this.elements,function(t){return t.reduce(e).doWrap(e)}),n!==this.elements?t(this.line,this.column,this.scope,n):this},n._isNoop=function(e){var t,n,r,o,a,s;if(null==(a=this.__isNoop)){for(n=!0,t=y(this.elements),r=0,o=t.length;o>r;++r)if(s=t[r],!s.isNoop(e)){n=!1;break}return this.__isNoop=n}return a},n.isLiteral=function(){var e,t,n,r,o,a;if(null==(o=this._isLiteral)){for(t=!0,e=y(this.elements),n=0,r=e.length;r>n;++n)if(a=e[n],!a.isLiteral()){t=!1;break}return this._isLiteral=t}return o},n.literalValue=function(){var e,t,n,r,o;for(e=[],t=y(this.elements),n=0,r=t.length;r>n;++n)o=t[n],e.push(o.literalValue());return e},n.inspect=function(e){return o(e,"ArrayNode",this.line,this.column,this.elements)},n.walk=function(e){var n;return n=r(this.elements,e),n!==this.elements?t(this.line,this.column,this.scope,n):this},n.walkAsync=function(e,n){var r,o;return o=this,J(this.elements,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.elements?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.Assign=E=function(e){function t(r,o,a,i,l,c){var u;if(u=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected left to be a "+f(e)+", got "+g(i));if("string"!=typeof l)throw TypeError("Expected op to be a String, got "+g(l));if(!(c instanceof e))throw TypeError("Expected right to be a "+f(e)+", got "+g(c));return u.line=r,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.left=i,u.op=l,u.right=c,u}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="AssignNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Assign",t.argNames=["left","op","right"],n.type=function(){var e;return e={"=":function(e,t){return t},"+=":function(e,t){return e.isSubsetOf(_t.numeric)&&t.isSubsetOf(_t.numeric)?_t.number:e.overlaps(_t.numeric)&&t.overlaps(_t.numeric)?_t.stringOrNumber:_t.string},"-=":_t.number,"*=":_t.number,"/=":_t.number,"%=":_t.number,"<<=":_t.number,">>=":_t.number,">>>=":_t.number,"&=":_t.number,"^=":_t.number,"|=":_t.number},function(t){var n,r,o;return null==(n=this._type)?(_.call(e,r=this.op)&&(o=e[r]),this._type=o?"function"==typeof o?o(this.left.type(t),this.right.type(t)):o:_t.any):n}}(),n._reduce=function(e){var n,r;return n=this.left.reduce(e),r=this.right.reduce(e).doWrap(e),n!==this.left||r!==this.right?t(this.line,this.column,this.scope,n,this.op,r):this},n.inspect=function(e){return o(e,"AssignNode",this.line,this.column,this.left,this.op,this.right)},n.walk=function(e){var n,r;return n=e(this.left),r=e(this.right),n!==this.left||r!==this.right?t(this.line,this.column,this.scope,n,this.op,r):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.left,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.right,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.left||r!==o.right?t(o.line,o.column,o.scope,s,o.op,r):o)}))}))},t}(z),z.Binary=C=function(e){function t(r,o,a,i,l,c){var u;if(u=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected left to be a "+f(e)+", got "+g(i));if("string"!=typeof l)throw TypeError("Expected op to be a String, got "+g(l));if(!(c instanceof e))throw TypeError("Expected right to be a "+f(e)+", got "+g(c));return u.line=r,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.left=i,u.op=l,u.right=c,u}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="BinaryNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Binary",t.argNames=["left","op","right"],n.type=function(){var e;return e={"*":_t.number,"/":_t.number,"%":_t.number,"+":function(e,t){return e.isSubsetOf(_t.numeric)&&t.isSubsetOf(_t.numeric)?_t.number:e.overlaps(_t.numeric)&&t.overlaps(_t.numeric)?_t.stringOrNumber:_t.string},"-":_t.number,"<<":_t.number,">>":_t.number,">>>":_t.number,"<":_t.boolean,"<=":_t.boolean,">":_t.boolean,">=":_t.boolean,"in":_t.boolean,"instanceof":_t.boolean,"==":_t.boolean,"!=":_t.boolean,"===":_t.boolean,"!==":_t.boolean,"&":_t.number,"^":_t.number,"|":_t.number,"&&":function(e,t){return e.intersect(_t.potentiallyFalsy).union(t)},"||":function(e,t){return e.intersect(_t.potentiallyTruthy).union(t)}},function(t){var n,r,o;return null==(n=this._type)?(_.call(e,r=this.op)&&(o=e[r]),this._type=o?"function"==typeof o?o(this.left.type(t),this.right.type(t)):o:_t.any):n}}(),n._reduce=function(){function e(e,t){var n;return(n=e.constValue())!==n?A(this.line,this.column,this.scope,[t,e]):void 0}function n(e,t){var n;return(n=t.constValue())!==n?A(this.line,this.column,this.scope,[e,t]):void 0}var r,o,a,s;return r={"*":i(2,function(e,t){return e*t}),"/":i(2,function(e,t){return e/t}),"%":i(2,function(e,t){return e%t}),"+":function(){function e(e){var t;return null===e||"number"==(t=typeof e)||"boolean"===t||"undefined"===t}return function(t,n){return e(t)&&e(n)?t- -n:""+t+n}}(),"-":i(2,function(e,t){return e-t}),"<<":i(2,function(e,t){return e<<t}),">>":i(2,function(e,t){return e>>t}),">>>":i(2,function(e,t){return e>>>t}),"<":i(2,function(e,t){return t>e}),"<=":i(2,function(e,t){return t>=e}),">":i(2,function(e,t){return e>t}),">=":i(2,function(e,t){return e>=t}),"==":i(2,function(e,t){return e==t}),"!=":i(2,function(e,t){return e!=t}),"===":i(2,function(e,t){return e===t}),"!==":i(2,function(e,t){return e!==t}),"&":i(2,function(e,t){return e&t}),"^":i(2,function(e,t){return e^t}),"|":i(2,function(e,t){return e|t}),"&&":i(2,function(e,t){return e&&t}),"||":i(2,function(e,t){return e||t})},o={"*":function(e,t){var n;return 1===e.constValue()?bt(this.line,this.column,this.scope,"+",t):-1===e.constValue()?bt(this.line,this.column,this.scope,"-",t):(n=e.constValue())!==n?A(this.line,this.column,this.scope,[t,e]):void 0},"/":e,"%":e,"+":function(e,n,r){var o;return 0===e.constValue()&&n.type(r).isSubsetOf(_t.number)?bt(this.line,this.column,this.scope,"+",n):""===e.constValue()&&n.type(r).isSubsetOf(_t.string)?n:"string"==typeof e.constValue()&&n instanceof t&&"+"===n.op&&n.left.isConst()&&"string"==typeof n.left.constValue()?t(this.line,this.column,this.scope,S(e.line,e.column,this.scope,m(e.constValue())+m(n.left.constValue())),"+",n.right):(o=e.constValue())!==o?A(this.line,this.column,this.scope,[n,e]):void 0},"-":function(e,t){var n;return 0===e.constValue()?bt(this.line,this.column,this.scope,"-",t):(n=e.constValue())!==n?A(this.line,this.column,this.scope,[t,e]):void 0},"<<":e,">>":e,">>>":e,"&":e,"|":e,"^":e,"&&":function(e,t){return e.constValue()?t:e},"||":function(e,t){return e.constValue()?e:t}},s={"*":function(e,t){var n;return 1===t.constValue()?bt(this.line,this.column,this.scope,"+",e):-1===t.constValue()?bt(this.line,this.column,this.scope,"-",e):(n=t.constValue())!==n?A(this.line,this.column,this.scope,[e,t]):void 0},"/":function(e,t){var n;return 1===t.constValue()?bt(this.line,this.column,this.scope,"+",e):-1===t.constValue()?bt(this.line,this.column,this.scope,"-",e):(n=t.constValue())!==n?A(this.line,this.column,this.scope,[e,t]):void 0},"%":n,"+":function(e,n,r){var o;return 0===n.constValue()&&e.type(r).isSubsetOf(_t.number)?bt(this.line,this.column,this.scope,"+",e):"number"==typeof n.constValue()&&p(n.constValue())<0&&e.type(r).isSubsetOf(_t.number)?t(this.line,this.column,this.scope,e,"-",S(n.line,n.column,this.scope,-p(n.constValue()))):""===n.constValue()&&e.type(r).isSubsetOf(_t.string)?e:"string"==typeof n.constValue()&&e instanceof t&&"+"===e.op&&e.right.isConst()&&"string"==typeof e.right.constValue()?t(this.line,this.column,this.scope,e.left,"+",S(e.right.line,e.right.column,this.scope,m(e.right.constValue())+m(n.constValue()))):(o=n.constValue())!==o?A(this.line,this.column,this.scope,[e,n]):void 0},"-":function(e,n,r){var o;return 0===n.constValue()?bt(this.line,this.column,this.scope,"+",e):"number"==typeof n.constValue()&&p(n.constValue())<0&&e.type(r).isSubsetOf(_t.number)?t(this.line,this.column,this.scope,e,"+",S(n.line,n.column,this.scope,-p(n.constValue()))):(o=n.constValue())!==o?A(this.line,this.column,this.scope,[e,n]):void 0},"<<":n,">>":n,">>>":n,"&":n,"|":n,"^":n},a={"&&":function(e,n,r){var o,a,s;if(s=e.type(r),s.isSubsetOf(_t.alwaysTruthy))return A(this.line,this.column,this.scope,[e,n]);if(s.isSubsetOf(_t.alwaysFalsy))return e;if(e instanceof t&&"&&"===e.op){if(e.right.isConst()?o=!!e.right.constValue():(a=e.right.type(r),o=a.isSubsetOf(_t.alwaysTruthy)?!0:a.isSubsetOf(_t.alwaysFalsy)?!1:null),o===!0)return t(this.line,this.column,this.scope,e.left,"&&",A(e.right.line,e.right.column,this.scope,[e.right,n]));if(o===!1)return e}},"||":function(e,n,r){var o,a,s,i,l;if(l=e.type(r),l.isSubsetOf(_t.alwaysTruthy))return e;if(l.isSubsetOf(_t.alwaysFalsy))return A(this.line,this.column,this.scope,[e,n]);if(e instanceof t&&"||"===e.op){if(e.right.isConst()?a=!!e.right.constValue():(i=e.right.type(r),a=i.isSubsetOf(_t.alwaysTruthy)?!0:i.isSubsetOf(_t.alwaysFalsy)?!1:null),a===!0)return e;if(a===!1)return t(this.line,this.column,this.scope,e.left,"||",A(e.right.line,e.right.column,this.scope,[e.right,n]))}else if(e instanceof V&&e.whenFalse.isConst()&&!e.whenFalse.constValue()){for(o=e.test,s=e.whenTrue;s instanceof V&&s.whenFalse.isConst()&&!s.whenFalse.constValue();)o=t(e.line,e.column,e.scope,o,"&&",s.test),s=s.whenTrue;return t(this.line,this.column,this.scope,t(e.line,e.column,e.scope,o,"&&",s),"||",n)}}},function(e){var n,i,l,c;if(i=this.left.reduce(e).doWrap(e),c=this.right.reduce(e).doWrap(e),l=this.op,i.isConst()){if(c.isConst()&&_.call(r,l))return S(this.line,this.column,this.scope,r[l](i.constValue(),c.constValue()));if(_.call(o,l)&&null!=(n=o[l].call(this,i,c,e)))return n}return c.isConst()&&_.call(s,l)&&null!=(n=s[l].call(this,i,c,e))?n:_.call(a,l)&&null!=(n=a[l].call(this,i,c,e))?n:i!==this.left||c!==this.right?t(this.line,this.column,this.scope,i,l,c):this}}(),n._isNoop=function(e){var t;return null==(t=this.__isNoop)?this.__isNoop=this.left.isNoop(e)&&this.right.isNoop(e):t},n.inspect=function(e){return o(e,"BinaryNode",this.line,this.column,this.left,this.op,this.right)},n.walk=function(e){var n,r;return n=e(this.left),r=e(this.right),n!==this.left||r!==this.right?t(this.line,this.column,this.scope,n,this.op,r):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.left,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):e(o.right,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.left||r!==o.right?t(o.line,o.column,o.scope,s,o.op,r):o)}))}))},t}(z),z.Block=A=function(e){function t(r,o,a,i,l){var u,p;if(p=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!c(i))throw TypeError("Expected nodes to be an Array, got "+g(i));for(u=i.length;u--;)if(!(i[u]instanceof e))throw TypeError("Expected "+("nodes["+u+"]")+" to be a "+f(e)+", got "+g(i[u]));if(null==l)l=null;else if(!(l instanceof P||l instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(l));return p.line=r,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.nodes=i,p.label=l,p}var n,a;return a=e.prototype,n=t.prototype=s(a),n.constructor=t,t.displayName="BlockNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Block",t.argNames=["nodes","label"],n.type=function(e){var t;return t=this.nodes,0===t.length?_t.undefined:t[p(t.length)-1].type(e)},n.withLabel=function(e,n){var r,o;if(o=this,null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));if(null==this.label){if(1===this.nodes.length)return this.nodes[0].withLabel(e,n);if(p(this.nodes.length)>1&&(r=this.nodes)[p(r.length)-1]instanceof L&&function(){var e,t,n,r,a,s;for(n=!0,e=y(o.nodes),r=0,a=e.length,t=-1,t+=a,t>a&&(t=a);t>r;++r)if(s=e[r],!(s instanceof E||s instanceof wt)){n=!1;break}return n}())return t(this.line,this.column,this.scope,h.call(this.nodes,0,-1).concat([(r=this.nodes)[p(r.length)-1].withLabel(e,n)]))}return t(this.line,this.column,this.scope,this.nodes,e)},n._reduce=function(e){var n,r,o,a,s,i,l,c;for(o=!1,r=[],n=y(this.nodes),a=0,i=n.length;i>a;++a)if(l=n[a],c=l.reduce(e),c instanceof t&&null==c.label)r.push.apply(r,y(c.nodes)),o=!0;else if(c instanceof Y)o=!0;else{if(c instanceof B||c instanceof M||c instanceof ct||c instanceof Q){r.push(c),(c!==l||i-1>a)&&(o=!0);break}r.push(c),c!==l&&(o=!0)}return s=null!=this.label?this.label.reduce(e):this.label,0===r.length?Y(this.line,this.column,this.scope):null==s&&1===r.length?r[0]:o||s!==this.label?t(this.line,this.column,this.scope,r,s):this},n.isStatement=function(){var e,t,n,r;for(n=!1,e=y(this.nodes),t=e.length;t--;)if(r=e[t],r.isStatement()){n=!0;break}return n},n._isNoop=function(e){var t,n,r,o,a;if(null==(o=this.__isNoop)){for(n=!0,t=y(this.nodes),r=t.length;r--;)if(a=t[r],!a.isNoop(e)){n=!1;break}return this.__isNoop=n}return o},n.inspect=function(e){return o(e,"BlockNode",this.line,this.column,this.nodes,this.label)},n.walk=function(n){var o,a;return a=r(this.nodes,n),o=this.label instanceof e?n(this.label):this.label,a!==this.nodes||o!==this.label?t(this.line,this.column,this.scope,a,o):this},n.walkAsync=function(n,r){var o,a;return a=this,J(this.nodes,n,(o=!1,function(s,i){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.nodes||e!==a.label?t(a.line,a.column,a.scope,i,e):a)})}))},t}(z),z.Break=B=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(null==a)a=null;else if(!(a instanceof P||a instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.label=a,i
}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="BreakNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Break",t.argNames=["label"],n.type=function(){return _t.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,e)},n.inspect=function(e){return o(e,"BreakNode",this.line,this.column,this.label)},n.walk=function(n){var r;return r=this.label instanceof e?n(this.label):this.label,r!==this.label?t(this.line,this.column,this.scope,r):this},n.walkAsync=function(n,r){var o;return o=this,(this.label instanceof e?function(e){var t;return n(o.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(o.label)})(function(e){return r(null,e!==o.label?t(o.line,o.column,o.scope,e):o)})},t}(z),z.Call=T=function(e){function t(n,r,o,i,l,u,p){var d,_;if(_=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!(i instanceof e))throw TypeError("Expected func to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected args to be an Array, got "+g(l));for(d=l.length;d--;)if(!(l[d]instanceof e))throw TypeError("Expected "+("args["+d+"]")+" to be a "+f(e)+", got "+g(l[d]));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected isNew to be a Boolean, got "+g(u));if(null==p)p=!1;else if("boolean"!=typeof p)throw TypeError("Expected isApply to be a Boolean, got "+g(p));return _.line=n,_.column=r,_.scope=o,_._reduced=void 0,_._macroExpanded=void 0,_._macroExpandAlled=void 0,_.func=i,_.args=l,_.isNew=u,_.isApply=p,_}var a,i;return i=e.prototype,a=t.prototype=s(i),a.constructor=t,t.displayName="CallNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Call",t.argNames=["func","args","isNew","isApply"],a.type=function(){var e,t,n;return e={Object:_t.object,String:_t.string,Number:_t.number,Boolean:_t.boolean,Function:_t["function"],Array:_t.array,Date:_t.string,RegExp:_t.regexp,Error:_t.error,RangeError:_t.error,ReferenceError:_t.error,SyntaxError:_t.error,TypeError:_t.error,URIError:_t.error,escape:_t.string,unescape:_t.string,parseInt:_t.number,parseFloat:_t.number,isNaN:_t.boolean,isFinite:_t.boolean,decodeURI:_t.string,decodeURIComponent:_t.string,encodeURI:_t.string,encodeURIComponent:_t.string},n={Object:{getPrototypeOf:_t.object,getOwnPropertyDescriptor:_t.object,getOwnPropertyNames:_t.string.array(),create:_t.object,defineProperty:_t.object,defineProperties:_t.object,seal:_t.object,freeze:_t.object,preventExtensions:_t.object,isSealed:_t.boolean,isFrozen:_t.boolean,isExtensible:_t.boolean,keys:_t.string.array()},String:{fromCharCode:_t.string},Number:{isFinite:_t.boolean,isNaN:_t.boolean},Array:{isArray:_t.boolean},Math:{abs:_t.number,acos:_t.number,asin:_t.number,atan:_t.number,atan2:_t.number,ceil:_t.number,cos:_t.number,exp:_t.number,floor:_t.number,log:_t.number,max:_t.number,min:_t.number,pow:_t.number,random:_t.number,round:_t.number,sin:_t.number,sqrt:_t.number,tan:_t.number},JSON:{stringify:_t.string.union(_t.undefined),parse:_t.string.union(_t.number).union(_t.boolean).union(_t["null"]).union(_t.array).union(_t.object)},Date:{UTC:_t.number,now:_t.number}},t={String:{toString:_t.string,valueOf:_t.string,charAt:_t.string,charCodeAt:_t.number,concat:_t.string,indexOf:_t.number,lastIndexOf:_t.number,localeCompare:_t.number,match:_t.array.union(_t["null"]),replace:_t.string,search:_t.number,slice:_t.string,split:_t.string.array(),substring:_t.string,toLowerCase:_t.string,toLocaleLowerCase:_t.string,toUpperCase:_t.string,toLocaleUpperCase:_t.string,trim:_t.string},Boolean:{toString:_t.string,valueOf:_t.boolean},Number:{toString:_t.string,valueOf:_t.number,toLocaleString:_t.string,toFixed:_t.string,toExponential:_t.string,toPrecision:_t.string},Date:{toString:_t.string,toDateString:_t.string,toTimeString:_t.string,toLocaleString:_t.string,toLocaleDateString:_t.string,toLocaleTimeString:_t.string,valueOf:_t.number,getTime:_t.number,getFullYear:_t.number,getUTCFullYear:_t.number,getMonth:_t.number,getUTCMonth:_t.number,getDate:_t.number,getUTCDate:_t.number,getDay:_t.number,getUTCDay:_t.number,getHours:_t.number,getUTCHours:_t.number,getMinutes:_t.number,getUTCMinutes:_t.number,getSeconds:_t.number,getUTCSeconds:_t.number,getMilliseconds:_t.number,getUTCMilliseconds:_t.number,getTimezoneOffset:_t.number,setTime:_t.number,setMilliseconds:_t.number,setUTCMilliseconds:_t.number,setSeconds:_t.number,setUTCSeconds:_t.number,setMinutes:_t.number,setUTCMinutes:_t.number,setHours:_t.number,setUTCHours:_t.number,setDate:_t.number,setUTCDate:_t.number,setMonth:_t.number,setUTCMonth:_t.number,setFullYear:_t.number,setUTCFullYear:_t.number,toUTCString:_t.string,toISOString:_t.string,toJSON:_t.string},RegExp:{exec:_t.array.union(_t["null"]),test:_t.boolean,toString:_t.string},Error:{toString:_t.string}},function(t){var r,o;return o=this,null==(r=this._type)?this._type=function(){var r,a,s,i,l,c,u,f,p,d;if(c=o.func,u=c.type(t),u.isSubsetOf(_t["function"]))return u.args[0];if(c instanceof P){if(f=c.name,_.call(e,f))return e[f];if((null!=t?t.macros.hasHelper(f):void 0)&&(u=t.macros.helperType(f),u.isSubsetOf(_t["function"])))return u.args[0]}else if(c instanceof v&&(p=c.parent,l=c.child,l instanceof S))if("call"===(r=l.value)||"apply"===r){if(d=p.type(t),d.isSubsetOf(_t["function"]))return d.args[0]}else if(p instanceof P&&_.call(n,r=p.name)&&_.call(a=n[r],s=l.value)&&null!=(i=a[s]))return i;return _t.any}():r}}(),a._reduce=function(){var e,o;return e={escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0,String:!0,Boolean:!0,Number:!0,RegExp:!0},o={String:{fromCharCode:!0},Number:{isFinite:!0,isNaN:!0},Math:{abs:!0,acos:!0,asin:!0,atan:!0,atan2:!0,ceil:!0,cos:!0,exp:!0,floor:!0,log:!0,max:!0,min:!0,pow:!0,round:!0,sin:!0,sqrt:!0,tan:!0},JSON:{parse:!0,stringify:!0}},function(a){var s,i,l,c,u,f,p,d,h,m,g,b,w,x,I,E;if(w=this.func.reduce(a).doWrap(a),h=r(this.args,function(e){return e.reduce(a).doWrap(a)}),!this.isNew&&!this.isApply){for(g=[],p=!0,s=y(h),i=0,l=s.length;l>i;++i){if(d=s[i],!d.isConst()){p=!1;break}g.push(d.constValue())}if(p)if(w instanceof P){if(_.call(e,w.name))try{return E=n[w.name].apply(void 0,y(g)),S(this.line,this.column,this.scope,E)}catch(C){}}else if(w instanceof v&&w.child.isConst())if(x=w.parent,m=w.child,b=m.constValue(),x.isConst()){if(I=x.constValue(),"function"==typeof I[b])try{return E=I[b].apply(I,y(g)),S(this.line,this.column,this.scope,E)}catch(C){}}else if(x instanceof P&&(_.call(o,c=x.name)&&_.call(u=o[c],f=m.value)?u[f]:void 0))try{return E=(c=n[x.name])[b].apply(c,y(g)),S(this.line,this.column,this.scope,E)}catch(C){}}return w!==this.func||h!==this.args?t(this.line,this.column,this.scope,w,h,this.isNew,this.isApply):this}}(),a.inspect=function(e){return o(e,"CallNode",this.line,this.column,this.func,this.args,this.isNew,this.isApply)},a.walk=function(e){var n,o;return o=e(this.func),n=r(this.args,e),o!==this.func||n!==this.args?t(this.line,this.column,this.scope,o,n,this.isNew,this.isApply):this},a.walkAsync=function(e,n){var r,o;return o=this,e(this.func,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):J(o.args,e,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.func||r!==o.args?t(o.line,o.column,o.scope,s,r,o.isNew,o.isApply):o)}))}))},t}(z),z.Cascade=N=function(e){function t(r,o,a,i,l){var u;if(u=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected cascades to be an Array, got "+g(l));return u.line=r,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.node=i,u.cascades=l,u}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="CascadeNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Cascade",t.argNames=["node","cascades"],n.inspect=function(e){return o(e,"CascadeNode",this.line,this.column,this.node,this.cascades)},n.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n,this.cascades):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a,o.cascades):o)}))},t}(z),z.Comment=k=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if("string"!=typeof a)throw TypeError("Expected text to be a String, got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.text=a,i}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="CommentNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Comment",t.argNames=["text"],n.type=function(){return _t.undefined},n.cacheable=!1,n.isConst=function(){return!0},n.constValue=function(){},n._isNoop=function(){return!0},n.inspect=function(e){return o(e,"CommentNode",this.line,this.column,this.text)},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(z),z.Const=S=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(null!=a&&"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a)throw TypeError("Expected value to be one of Number or String or Boolean or undefined or null, got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.value=a,i}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="ConstNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Const",t.argNames=["value"],n.type=function(){var e;if(e=this.value,null===e)return _t["null"];switch(typeof e){case"number":return _t.number;case"string":return _t.string;case"boolean":return _t.boolean;case"undefined":return _t.undefined;default:throw Error("Unknown type for "+String(e))}},n.cacheable=!1,n.isConst=function(){return!0},n.constValue=function(){return this.value},n.isConstType=function(e){return e===typeof this.value},n.isConstValue=function(e){return e===this.value},n._isNoop=function(){return!0},n.inspect=function(e){return"ConstNode("+m(q(this.value,null,null!=e?p(e)-1:null))+")"},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(z),z.Continue=M=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(null==a)a=null;else if(!(a instanceof P||a instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.label=a,i}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="ContinueNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Continue",t.argNames=["label"],n.type=function(){return _t.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,e)},n.inspect=function(e){return o(e,"ContinueNode",this.line,this.column,this.label)},n.walk=function(n){var r;return r=this.label instanceof e?n(this.label):this.label,r!==this.label?t(this.line,this.column,this.scope,r):this},n.walkAsync=function(n,r){var o;return o=this,(this.label instanceof e?function(e){var t;return n(o.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(o.label)})(function(e){return r(null,e!==o.label?t(o.line,o.column,o.scope,e):o)})},t}(z),z.Debugger=D=function(e){function t(e,r,o){var a;if(a=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));return a.line=e,a.column=r,a.scope=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="DebuggerNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Debugger",t.argNames=[],n.type=function(){return _t.undefined},n.isStatement=function(){return!0},n.inspect=function(e){return o(e,"DebuggerNode",this.line,this.column)},t}(z),z.Def=F=function(e){function t(r,o,a,i,l){var c;if(c=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected left to be a "+f(e)+", got "+g(i));if(null==l)l=void 0;else if(!(l instanceof e))throw TypeError("Expected right to be one of "+(f(e)+" or undefined")+", got "+g(l));return c.line=r,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.left=i,c.right=l,c}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="DefNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Def",t.argNames=["left","right"],n.type=function(e){return null!=this.right?this.right.type(e):_t.any},n.inspect=function(e){return o(e,"DefNode",this.line,this.column,this.left,this.right)},n.walk=function(n){var r,o;return r=n(this.left),o=this.right instanceof e?n(this.right):this.right,r!==this.left||o!==this.right?t(this.line,this.column,this.scope,r,o):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.left,(o=!1,function(s,i){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):(a.right instanceof e?function(e){var t;return n(a.right,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.right)})(function(e){return r(null,i!==a.left||e!==a.right?t(a.line,a.column,a.scope,i,e):a)})}))},t}(z),z.EmbedWrite=O=function(e){function t(r,o,a,i,l){var c;if(c=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected text to be a "+f(e)+", got "+g(i));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected escape to be a Boolean, got "+g(l));return c.line=r,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.text=i,c.escape=l,c}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="EmbedWriteNode","function"==typeof e.extended&&e.extended(t),t.cappedName="EmbedWrite",t.argNames=["text","escape"],n.inspect=function(e){return o(e,"EmbedWriteNode",this.line,this.column,this.text,this.escape)},n.walk=function(e){var n;return n=e(this.text),n!==this.text?t(this.line,this.column,this.scope,n,this.escape):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.text,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.text?t(o.line,o.column,o.scope,a,o.escape):o)}))},t}(z),z.Eval=j=function(e){function t(r,o,a,i){var l;if(l=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected code to be a "+f(e)+", got "+g(i));return l.line=r,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.code=i,l}var n,r,a;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="EvalNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Eval",t.argNames=["code"],a={"true":function(){return S(this.line,this.column,this.scope,!0)},"false":function(){return S(this.line,this.column,this.scope,!1)},"void 0":function(){return S(this.line,this.column,this.scope,void 0)},"null":function(){return S(this.line,this.column,this.scope,null)}},n._reduce=function(e){var n,r,o;return r=this.code.reduce(e).doWrap(),r.isConst()&&r.isConstType("string")&&(_.call(a,n=r.constValue())&&(o=a[n]),o)?o.call(this):r!==this.code?t(this.line,this.column,this.scope,r):this},n.inspect=function(e){return o(e,"EvalNode",this.line,this.column,this.code)},n.walk=function(e){var n;return n=e(this.code),n!==this.code?t(this.line,this.column,this.scope,n):this},n.walkAsync=function(e,n){var r,o;return o=this,e(this.code,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.code?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.For=R=function(e){function t(r,o,a,i,l,c,u,p){var d;if(d=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(null==i)i=Y(0,0,a);else if(!(i instanceof e))throw TypeError("Expected init to be a "+f(e)+", got "+g(i));if(null==l)l=S(0,0,a,!0);else if(!(l instanceof e))throw TypeError("Expected test to be a "+f(e)+", got "+g(l));if(null==c)c=Y(0,0,a);else if(!(c instanceof e))throw TypeError("Expected step to be a "+f(e)+", got "+g(c));if(!(u instanceof e))throw TypeError("Expected body to be a "+f(e)+", got "+g(u));if(null==p)p=null;else if(!(p instanceof P||p instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(p));return d.line=r,d.column=o,d.scope=a,d._reduced=void 0,d._macroExpanded=void 0,d._macroExpandAlled=void 0,d.init=i,d.test=l,d.step=c,d.body=u,d.label=p,d}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="ForNode","function"==typeof e.extended&&e.extended(t),t.cappedName="For",t.argNames=["init","test","step","body","label"],n.type=function(){return _t.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.init,this.test,this.step,this.body,e)},n.inspect=function(e){return o(e,"ForNode",this.line,this.column,this.init,this.test,this.step,this.body,this.label)},n.walk=function(n){var r,o,a,s,i;return o=n(this.init),i=n(this.test),s=n(this.step),r=n(this.body),a=this.label instanceof e?n(this.label):this.label,o!==this.init||i!==this.test||s!==this.step||r!==this.body||a!==this.label?t(this.line,this.column,this.scope,o,i,s,r,a):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.init,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.test,(l=!1,function(o,s){var c;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):n(a.step,(c=!1,function(o,l){var u;if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):n(a.body,(u=!1,function(o,c){if(u)throw Error("Attempted to call function more than once");return u=!0,null!=o?r(o):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.init||s!==a.test||l!==a.step||c!==a.body||e!==a.label?t(a.line,a.column,a.scope,i,s,l,c,e):a)})}))}))}))}))},t}(z),z.ForIn=L=function(e){function t(r,o,a,i,l,c,u){var p;if(p=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected key to be a "+f(e)+", got "+g(i));if(!(l instanceof e))throw TypeError("Expected object to be a "+f(e)+", got "+g(l));if(!(c instanceof e))throw TypeError("Expected body to be a "+f(e)+", got "+g(c));if(null==u)u=null;else if(!(u instanceof P||u instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(u));return p.line=r,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.key=i,p.object=l,p.body=c,p.label=u,p}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="ForInNode","function"==typeof e.extended&&e.extended(t),t.cappedName="ForIn",t.argNames=["key","object","body","label"],n.type=function(){return _t.undefined},n.isStatement=function(){return!0},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.key,this.object,this.body,e)},n.inspect=function(e){return o(e,"ForInNode",this.line,this.column,this.key,this.object,this.body,this.label)},n.walk=function(n){var r,o,a,s;return o=n(this.key),s=n(this.object),r=n(this.body),a=this.label instanceof e?n(this.label):this.label,o!==this.key||s!==this.object||r!==this.body||a!==this.label?t(this.line,this.column,this.scope,o,s,r,a):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.key,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.object,(l=!1,function(o,s){var c;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):n(a.body,(c=!1,function(o,l){if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.key||s!==a.object||l!==a.body||e!==a.label?t(a.line,a.column,a.scope,i,s,l,e):a)})}))}))}))},t}(z),z.Function=U=function(e){function t(r,o,a,i,l,u,p,d,_,h,m){var y,b,w;if(w=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!c(i))throw TypeError("Expected params to be an Array, got "+g(i));for(y=i.length;y--;)if(!(i[y]instanceof e))throw TypeError("Expected "+("params["+y+"]")+" to be a "+f(e)+", got "+g(i[y]));if(!(l instanceof e))throw TypeError("Expected body to be a "+f(e)+", got "+g(l));if(null==u)u=!0;else if("boolean"!=typeof u)throw TypeError("Expected autoReturn to be a Boolean, got "+g(u));if(null==p)p=!1;else if(!(p instanceof e)&&"boolean"!=typeof p)throw TypeError("Expected bound to be one of "+(f(e)+" or Boolean")+", got "+g(p));if(null==d)d=!1;else if("boolean"!=typeof d)throw TypeError("Expected curry to be a Boolean, got "+g(d));if(null==_)_=void 0;else if(!(_ instanceof e))throw TypeError("Expected asType to be one of "+(f(e)+" or undefined")+", got "+g(_));if(null==h)h=!1;else if("boolean"!=typeof h)throw TypeError("Expected generator to be a Boolean, got "+g(h));if(null==m)m=[];else{if(!c(m))throw TypeError("Expected generic to be an Array, got "+g(m));for(b=m.length;b--;)if(!(m[b]instanceof P))throw TypeError("Expected "+("generic["+b+"]")+" to be a "+f(P)+", got "+g(m[b]))}return w.line=r,w.column=o,w.scope=a,w._reduced=void 0,w._macroExpanded=void 0,w._macroExpandAlled=void 0,w.params=i,w.body=l,w.autoReturn=u,w.bound=p,w.curry=d,w.asType=_,w.generator=h,w.generic=m,w}var n,a;return a=e.prototype,n=t.prototype=s(a),n.constructor=t,t.displayName="FunctionNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Function",t.argNames=["params","body","autoReturn","bound","curry","asType","generator","generic"],n.type=function(e){var n,r,o;return null==(n=this._type)?null!=this.asType?this._type=H(this.asType)["function"]():(r=this.autoReturn?this.body.type(e):_t.undefined,o=function(n){var a;return n instanceof Q?(r=r.union(n.type(e)),n):n instanceof t?n:n instanceof G?(("return"===(a=n.data.macroName)||"return?"===a)&&(r=n.data.macroData.node?r.union(n.data.macroData.node.type(e)):r.union(_t.undefined)),n.walk(o)):n.walk(o)},o(this.body),this._type=r["function"]()):n},n._isNoop=function(){return!0},n.inspect=function(e){return o(e,"FunctionNode",this.line,this.column,this.params,this.body,this.autoReturn,this.bound,this.curry,this.asType,this.generator,this.generic)},n.walk=function(n){var o,a,s,i;return i=r(this.params,n),a=n(this.body),s=this.bound instanceof e?n(this.bound):this.bound,o=this.asType instanceof e?n(this.asType):this.asType,i!==this.params||a!==this.body||s!==this.bound||o!==this.asType?t(this.line,this.column,this.scope,i,a,this.autoReturn,s,this.curry,o,this.generator,this.generic):this},n.walkAsync=function(n,r){var o,a;return a=this,J(this.params,n,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.body,(l=!1,function(o,s){if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):(a.bound instanceof e?function(e){var t;return n(a.bound,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.bound)})(function(o){return(a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)})(function(e){return r(null,i!==a.params||s!==a.body||o!==a.bound||e!==a.asType?t(a.line,a.column,a.scope,i,s,a.autoReturn,o,a.curry,e,a.generator,a.generic):a)})})}))}))},t}(z),z.Ident=P=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.name=a,i}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="IdentNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Ident",t.argNames=["name"],n.cacheable=!1,n.type=function(e){return"__currentArrayLength"===this.name?_t.number:e?this.scope.type(this):_t.any},n._isNoop=function(){return!0},n.inspect=function(e){return o(e,"IdentNode",this.line,this.column,this.name)},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(z),z.If=V=function(e){function t(r,o,a,i,l,c,u){var p;if(p=this instanceof t?this:s(n),"number"!=typeof r)throw TypeError("Expected line to be a Number, got "+g(r));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected test to be a "+f(e)+", got "+g(i));if(!(l instanceof e))throw TypeError("Expected whenTrue to be a "+f(e)+", got "+g(l));if(null==c)c=Y(0,0,a);else if(!(c instanceof e))throw TypeError("Expected whenFalse to be a "+f(e)+", got "+g(c));if(null==u)u=null;else if(!(u instanceof P||u instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(u));return p.line=r,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.test=i,p.whenTrue=l,p.whenFalse=c,p.label=u,p}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="IfNode","function"==typeof e.extended&&e.extended(t),t.cappedName="If",t.argNames=["test","whenTrue","whenFalse","label"],n.type=function(e){var t;return null==(t=this._type)?this._type=this.whenTrue.type(e).union(this.whenFalse.type(e)):t},n.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.test,this.whenTrue,this.whenFalse,e)},n._reduce=function(e){var n,r,o,a,s;return r=this.test.reduce(e),s=this.whenTrue.reduce(e),a=this.whenFalse.reduce(e),n=null!=this.label?this.label.reduce(e):this.label,r.isConst()?A(this.line,this.column,this.scope,[r.constValue()?s:a],n).reduce(e):(o=r.type(e),o.isSubsetOf(_t.alwaysTruthy)?A(this.line,this.column,this.scope,[r,s],n).reduce(e):o.isSubsetOf(_t.alwaysFalsy)?A(this.line,this.column,this.scope,[r,a],n).reduce(e):r!==this.test||s!==this.whenTrue||a!==this.whenFalse||n!==this.label?t(this.line,this.column,this.scope,r,s,a,n):this)},n.isStatement=function(){var e;return null==(e=this._isStatement)?this._isStatement=this.whenTrue.isStatement()||this.whenFalse.isStatement():e},n.doWrap=function(e){var n,r;return r=this.whenTrue.doWrap(e),n=this.whenFalse.doWrap(e),r!==this.whenTrue||n!==this.whenFalse?t(this.line,this.column,this.scope,this.test,r,n,this.label):this},n._isNoop=function(e){var t;return null==(t=this.__isNoop)?this.__isNoop=this.test.isNoop(e)&&this.whenTrue.isNoop(e)&&this.whenFalse.isNoop(e):t},n.inspect=function(e){return o(e,"IfNode",this.line,this.column,this.test,this.whenTrue,this.whenFalse,this.label)},n.walk=function(n){var r,o,a,s;return o=n(this.test),s=n(this.whenTrue),a=n(this.whenFalse),r=this.label instanceof e?n(this.label):this.label,o!==this.test||s!==this.whenTrue||a!==this.whenFalse||r!==this.label?t(this.line,this.column,this.scope,o,s,a,r):this},n.walkAsync=function(n,r){var o,a;return a=this,n(this.test,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.whenTrue,(l=!1,function(o,s){var c;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):n(a.whenFalse,(c=!1,function(o,l){if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.test||s!==a.whenTrue||l!==a.whenFalse||e!==a.label?t(a.line,a.column,a.scope,i,s,l,e):a)})}))}))}))},t}(z),z.MacroAccess=G=function(e){function t(e,r,o,a,i,l,c,u,f,p){var d;if(d=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if("number"!=typeof a)throw TypeError("Expected id to be a Number, got "+g(a));if("number"!=typeof i)throw TypeError("Expected callLine to be a Number, got "+g(i));if("object"!=typeof l||null===l)throw TypeError("Expected data to be an Object, got "+g(l));if("string"!=typeof c)throw TypeError("Expected position to be a String, got "+g(c));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected inGenerator to be a Boolean, got "+g(u));if(null==f)f=!1;
else if("boolean"!=typeof f)throw TypeError("Expected inEvilAst to be a Boolean, got "+g(f));if(null==p)p=!1;else if("boolean"!=typeof p)throw TypeError("Expected doWrapped to be a Boolean, got "+g(p));return d.line=e,d.column=r,d.scope=o,d._reduced=void 0,d._macroExpanded=void 0,d._macroExpandAlled=void 0,d.id=a,d.callLine=i,d.data=l,d.position=c,d.inGenerator=u,d.inEvilAst=f,d.doWrapped=p,d}var n,i;return i=e.prototype,n=t.prototype=s(i),n.constructor=t,t.displayName="MacroAccessNode","function"==typeof e.extended&&e.extended(t),t.cappedName="MacroAccess",t.argNames=["id","callLine","data","position","inGenerator","inEvilAst","doWrapped"],n.type=function(e){var t,n;return null==(t=this._type)?(n=e.macros.getTypeById(this.id),this._type=null!=n?"string"==typeof n?this.data[n].type(e):n:e.macroExpand1(this).type(e)):t},n.withLabel=function(e,t){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t.macroExpand1(this).withLabel(e,t)},n.walk=function(){function n(e,t){var n,r,a,s,i;s={},n=!1;for(r in e)_.call(e,r)&&(i=e[r],a=o(i,t),a!==i&&(n=!0),s[r]=a);return n?s:e}function o(t,a){return t instanceof e?a(t):c(t)?r(t,function(e){return o(e,a)}):"object"==typeof t&&null!==t?n(t,a):t}return function(e){var n;return n=o(this.data,e),n!==this.data?t(this.line,this.column,this.scope,this.id,this.callLine,n,this.position,this.inGenerator,this.inEvilAst,this.doWrapped):this}}(),n.walkAsync=function(){function n(e,t,n){var o,s,i;return s=!1,i={},o=u(e),a(1,o.length,!1,function(n,a){var l,c,u;return c=o[n],u=e[c],r(item,t,(l=!1,function(e,t){if(l)throw Error("Attempted to call function more than once");return l=!0,null!=e?a(e):(item!==t&&(s=!0),i[c]=t,a(null))}))},function(t){return"undefined"!=typeof t&&null!==t?n(t):n(null,s?i:e)})}function r(t,o,a){return t instanceof e?o(t,a):c(t)?J(t,function(e,t){return r(e,o,t)},a):"object"==typeof t&&null!==t?n(t,o,a):a(null,t)}return function(e,n){var o,a;return a=this,r(this.data,e,(o=!1,function(e,r){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?n(e):n(null,r!==a.data?t(a.line,a.column,a.scope,a.id,a.callLine,r,a.position,a.inGenerator,a.inEvilAst,a.doWrapped):a)}))}}(),n._isNoop=function(e){return e.macroExpand1(this).isNoop(e)},n.doWrap=function(){return this.doWrapped?this:t(this.line,this.column,this.scope,this.id,this.callLine,this.data,this.position,this.inGenerator,this.inEvilAst,!0)},n.inspect=function(e){return o(e,"MacroAccessNode",this.line,this.column,this.id,this.callLine,this.data,this.position,this.inGenerator,this.inEvilAst,this.doWrapped)},t}(z),z.MacroConst=W=function(e){function t(e,r,o,a){var i;if(i=this instanceof t?this:s(n),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if("string"!=typeof a)throw TypeError("Expected name to be a String, got "+g(a));return i.line=e,i.column=r,i.scope=o,i._reduced=void 0,i._macroExpanded=void 0,i._macroExpandAlled=void 0,i.name=a,i}var n,r;return r=e.prototype,n=t.prototype=s(r),n.constructor=t,t.displayName="MacroConstNode","function"==typeof e.extended&&e.extended(t),t.cappedName="MacroConst",t.argNames=["name"],n.type=function(e){var t,n,r;if(null!=(t=this._type))return t;if(n=e.getConst(this.name),!n)return this._type=_t.any;if(r=n.value,null===r)return this._type=_t["null"];switch(typeof r){case"number":return this._type=_t.number;case"string":return this._type=_t.string;case"boolean":return this._type=_t.boolean;case"undefined":return this._type=_t.undefined;default:throw Error("Unknown type for "+String(n.value))}},n._isNoop=function(){return!0},n.toConst=function(e){var t;return S(this.line,this.column,this.scope,null!=(t=e.getConst(this.name))?t.value:void 0)},n.inspect=function(e){return o(e,"MacroConstNode",this.line,this.column,this.name)},n.walk=function(){return this},n.walkAsync=function(e,t){return t(null,this)},t}(z),z.Nothing=Y=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:s(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+g(n));return a.line=e,a.column=n,a.scope=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="NothingNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Nothing",t.argNames=[],r.type=function(){return _t.undefined},r.cacheable=!1,r.isConst=function(){return!0},r.constValue=function(){},r.isConstType=function(e){return"undefined"===e},r.isConstValue=function(e){return void 0===e},r._isNoop=function(){return!0},r.inspect=function(e){return o(e,"NothingNode",this.line,this.column)},t}(z),z.Object=$=function(e){function t(n,r,o,i,l){var u,p;if(p=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!c(i))throw TypeError("Expected pairs to be an Array, got "+g(i));for(u=i.length;u--;){if("object"!=typeof i[u]||null===i[u])throw TypeError("Expected "+("pairs["+u+"]")+" to be an Object, got "+g(i[u]));if(!(i[u].key instanceof e))throw TypeError("Expected "+("pairs["+u+"].key")+" to be a "+f(e)+", got "+g(i[u].key));if(!(i[u].value instanceof e))throw TypeError("Expected "+("pairs["+u+"].value")+" to be a "+f(e)+", got "+g(i[u].value));if(null==i[u].property)i[u].property=void 0;else if("string"!=typeof i[u].property)throw TypeError("Expected "+("pairs["+u+"].property")+" to be one of String or undefined, got "+g(i[u].property))}if(null==l)l=void 0;else if(!(l instanceof e))throw TypeError("Expected prototype to be one of "+(f(e)+" or undefined")+", got "+g(l));return p.line=n,p.column=r,p.scope=o,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.pairs=i,p.prototype=l,p}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="ObjectNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Object",t.argNames=["pairs","prototype"],a.type=function(e){var t,n,r,o,a,s,i,l;if(null==(o=this._type)){for(s={},t=y(this.pairs),n=0,r=t.length;r>n;++n)i=(a=t[n]).key,l=a.value,i.isConst()&&(s[i.constValue()]=l.type(e));return this._type=_t.makeObject(s)}return o},a.walk=function(){function e(e,t){var n,r;return n=t(e.key),r=t(e.value),n!==e.key||r!==e.value?{key:n,value:r,property:e.property}:e}return function(n){var o,a;return o=r(this.pairs,e,n),a=null!=this.prototype?n(this.prototype):this.prototype,o!==this.pairs||a!==this.prototype?t(this.line,this.column,this.scope,o,a):this}}(),a.walkAsync=function(){function e(e,t,n){var r;return t(e.key,(r=!1,function(o,a){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?n(o):t(e.value,(s=!1,function(t,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=t?n(t):n(null,a!==e.key||r!==e.value?{key:a,value:r,property:e.property}:e)}))}))}return function(n,r){var o,a;return a=this,J(this.pairs,e,n,(o=!1,function(e,s){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=e?r(e):(null!=a.prototype?function(e){var t;return n(a.prototype,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.prototype)})(function(e){return r(null,s!==a.pairs||e!==a.prototype?t(a.line,a.column,a.scope,s,e):a)})}))}}(),a._reduce=function(){function e(e,t){var n,r;return n=e.key.reduce(t),r=e.value.reduce(t).doWrap(t),n!==e.key||r!==e.value?{key:n,value:r,property:e.property}:e}return function(n){var o,a;return o=r(this.pairs,e,n),a=null!=this.prototype?this.prototype.reduce(n):this.prototype,o!==this.pairs||a!==this.prototype?t(this.line,this.column,this.scope,o,a):this}}(),a._isNoop=function(e){var t,n,r,o,a,s,i,l;if(null==(a=this.__isNoop)){for(n=!0,t=y(this.pairs),r=0,o=t.length;o>r;++r)if(i=(s=t[r]).key,l=s.value,!i.isNoop(e)||!l.isNoop(e)){n=!1;break}return this.__isNoop=n}return a},a.isLiteral=function(){var e,t;return t=this,null==(e=this._isLiteral)?this._isLiteral=null==this.prototype&&function(){var e,n,r,o,a,s,i;for(n=!0,e=y(t.pairs),r=0,o=e.length;o>r;++r)if(s=(a=e[r]).key,i=a.value,!s.isLiteral()||!i.isLiteral()){n=!1;break}return n}():e},a.literalValue=function(){var e,t,n,r,o,a,s;if(null!=this.prototype)throw Error("Cannot convert object with prototype to a literal");for(a={},e=y(this.pairs),t=0,n=e.length;n>t;++t)o=(r=e[t]).key,s=r.value,a[o.literalValue()]=s.literalValue();return a},a.inspect=function(e){return o(e,"ObjectNode",this.line,this.column,this.pairs,this.prototype)},t}(z),z.object=function(e,n,r){var o,a,s,i,c,u,f,p,d,_;for(f=[],p=null,o=y(n),a=0,s=o.length;s>a;++a)if(c=(i=o[a]).key,_=i.property,c instanceof S){if(u=String(c.value),("get"===_||"set"===_)&&p&&p.property!==_&&p.key===u){p=null;continue}if(l(u,f))throw d=t("./parser").ParserError,d("Duplicate key "+m(K(u))+" in object",this,this.indexFromPosition(c.line,c.column));f.push(u),p="get"===_||"set"===_?{key:u,property:_}:null}else p=null;return this.Object(e,n,r)},z.objectParam=z.object,z.Param=X=function(e){function t(n,o,a,i,l,c,u,p){var d;if(d=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected ident to be a "+f(e)+", got "+g(i));if(null==l)l=void 0;else if(!(l instanceof e))throw TypeError("Expected defaultValue to be one of "+(f(e)+" or undefined")+", got "+g(l));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected spread to be a Boolean, got "+g(c));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected isMutable to be a Boolean, got "+g(u));if(null==p)p=void 0;else if(!(p instanceof e))throw TypeError("Expected asType to be one of "+(f(e)+" or undefined")+", got "+g(p));return d.line=n,d.column=o,d.scope=a,d._reduced=void 0,d._macroExpanded=void 0,d._macroExpandAlled=void 0,d.ident=i,d.defaultValue=l,d.spread=c,d.isMutable=u,d.asType=p,d}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="ParamNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Param",t.argNames=["ident","defaultValue","spread","isMutable","asType"],r.inspect=function(e){return o(e,"ParamNode",this.line,this.column,this.ident,this.defaultValue,this.spread,this.isMutable,this.asType)},r.walk=function(n){var r,o,a;return a=n(this.ident),o=this.defaultValue instanceof e?n(this.defaultValue):this.defaultValue,r=this.asType instanceof e?n(this.asType):this.asType,a!==this.ident||o!==this.defaultValue||r!==this.asType?t(this.line,this.column,this.scope,a,o,this.spread,this.isMutable,r):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.ident,(o=!1,function(s,i){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):(a.defaultValue instanceof e?function(e){var t;return n(a.defaultValue,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.defaultValue)})(function(o){return(a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)})(function(e){return r(null,i!==a.ident||o!==a.defaultValue||e!==a.asType?t(a.line,a.column,a.scope,i,o,a.spread,a.isMutable,e):a)})})}))},t}(z),z.Regexp=Z=function(e){function t(n,o,a,i,l){var c;if(c=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected source to be a "+f(e)+", got "+g(i));if("string"!=typeof l)throw TypeError("Expected flags to be a String, got "+g(l));return c.line=n,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.source=i,c.flags=l,c}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="RegexpNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Regexp",t.argNames=["source","flags"],r.type=function(){return _t.regexp},r._isNoop=function(e){return this.text.isNoop(e)},r._reduce=function(e){var n;return n=this.source.reduce(e).doWrap(e),n.isConst()?n!==this.source?t(this.line,this.column,this.scope,n,this.flags):this:T(this.line,this.column,this.scope,P(this.line,this.column,this.scope,"RegExp"),[n,S(this.line,this.column,this.scope,this.flags)])},r.inspect=function(e){return o(e,"RegexpNode",this.line,this.column,this.source,this.flags)},r.walk=function(e){var n;return n=e(this.source),n!==this.source?t(this.line,this.column,this.scope,n,this.flags):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.source,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.source?t(o.line,o.column,o.scope,a,o.flags):o)}))},t}(z),z.Return=Q=function(e){function t(n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(null==i)i=S(n,o,a,void 0);else if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));return l.line=n,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.node=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="ReturnNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Return",t.argNames=["node"],r.type=function(e){return this.node.type(e)},r.isStatement=function(){return!0},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scope,n):this},r.inspect=function(e){return o(e,"ReturnNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.Root=et=function(e){function t(n,o,a,i,l,c,u){var p;if(p=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(null==i)i=void 0;else if("string"!=typeof i)throw TypeError("Expected file to be one of String or undefined, got "+g(i));if(!(l instanceof e))throw TypeError("Expected body to be a "+f(e)+", got "+g(l));if(null==c)c=!1;else if("boolean"!=typeof c)throw TypeError("Expected isEmbedded to be a Boolean, got "+g(c));if(null==u)u=!1;else if("boolean"!=typeof u)throw TypeError("Expected isGenerator to be a Boolean, got "+g(u));return p.line=n,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.file=i,p.body=l,p.isEmbedded=c,p.isGenerator=u,p}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="RootNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Root",t.argNames=["file","body","isEmbedded","isGenerator"],r.isStatement=function(){return!0},r.inspect=function(e){return o(e,"RootNode",this.line,this.column,this.file,this.body,this.isEmbedded,this.isGenerator)},r.walk=function(e){var n;return n=e(this.body),n!==this.body?t(this.line,this.column,this.scope,this.file,n,this.isEmbedded,this.isGenerator):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.body,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.body?t(o.line,o.column,o.scope,o.file,a,o.isEmbedded,o.isGenerator):o)}))},t}(z),z.Spread=tt=function(e){function t(n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));return l.line=n,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.node=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="SpreadNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Spread",t.argNames=["node"],r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scope,n):this},r.inspect=function(e){return o(e,"SpreadNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.string=function(e,t){var n,r,o,a,s,i;if(!c(t))throw TypeError("Expected parts to be an Array, got "+g(t));for(n=t.length;n--;)if(!(t[n]instanceof z))throw TypeError("Expected "+("parts["+n+"]")+" to be a "+f(z)+", got "+g(t[n]));if(a=this.getMacroByLabel("stringConcat"),!a)throw Error("Cannot use string interpolation until the string-concat operator has been defined");if(0===t.length)return this.Const(e,"");if(1===t.length)return a.func({left:this.Const(e,""),op:"",right:t[0]},this,e,this.getLine(e));for(s=t[0],r=1,o=t.length;o>r;++r)i=t[r],s=a.func({left:s,op:"",right:i},this,e,this.getLine(e));return s},z.Super=nt=function(e){function t(n,r,o,i,l){var u,p;if(p=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(null==i)i=void 0;else if(!(i instanceof e))throw TypeError("Expected child to be one of "+(f(e)+" or undefined")+", got "+g(i));if(!c(l))throw TypeError("Expected args to be an Array, got "+g(l));for(u=l.length;u--;)if(!(l[u]instanceof e))throw TypeError("Expected "+("args["+u+"]")+" to be a "+f(e)+", got "+g(l[u]));return p.line=n,p.column=r,p.scope=o,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.child=i,p.args=l,p}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="SuperNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Super",t.argNames=["child","args"],a._reduce=function(e){var n,o;return o=null!=this.child?this.child.reduce(e).doWrap(e):this.child,n=r(this.args,function(e,t){return e.reduce(t).doWrap(t)},e),o!==this.child||n!==this.args?t(this.line,this.column,this.scope,o,n):this},a.inspect=function(e){return o(e,"SuperNode",this.line,this.column,this.child,this.args)},a.walk=function(n){var o,a;return a=this.child instanceof e?n(this.child):this.child,o=r(this.args,n),a!==this.child||o!==this.args?t(this.line,this.column,this.scope,a,o):this},a.walkAsync=function(n,r){var o;return o=this,(this.child instanceof e?function(e){var t;return n(o.child,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(o.child)})(function(e){var a;return J(o.args,n,(a=!1,function(n,s){if(a)throw Error("Attempted to call function more than once");return a=!0,null!=n?r(n):r(null,e!==o.child||s!==o.args?t(o.line,o.column,o.scope,e,s):o)}))})},t}(z),z.Switch=rt=function(e){function t(n,r,o,i,l,u,p){var d;if(d=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected cases to be an Array, got "+g(l));if(null==u)u=void 0;else if(!(u instanceof e))throw TypeError("Expected defaultCase to be one of "+(f(e)+" or undefined")+", got "+g(u));if(null==p)p=null;else if(!(p instanceof P||p instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(p));return d.line=n,d.column=r,d.scope=o,d._reduced=void 0,d._macroExpanded=void 0,d._macroExpandAlled=void 0,d.node=i,d.cases=l,d.defaultCase=u,d.label=p,d}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="SwitchNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Switch",t.argNames=["node","cases","defaultCase","label"],a.type=function(e){var t,n,r,o,a,s;if(null==(o=this._type)){for(s=null!=this.defaultCase?this.defaultCase.type(e):_t.undefined,t=y(this.cases),n=0,r=t.length;r>n;++n)a=t[n],s=a.fallthrough?s:s.union(a.body.type(e));return this._type=s}return o},a.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.node,this.cases,this.defaultCase,e)},a.walk=function(e){var n,o,a,s;return s=e(this.node),n=r(this.cases,function(t){var n,r;return r=e(t.node),n=e(t.body),r!==t.node||n!==t.body?{node:r,body:n,fallthrough:t.fallthrough}:t}),o=this.defaultCase?e(this.defaultCase):this.defaultCase,a=null!=this.label?e(this.label):this.label,s!==this.node||n!==this.cases||o!==this.defaultCase||a!==this.label?t(this.line,this.column,this.scope,s,n,o,a):this},a.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):J(o.cases,function(t,n){var r;return e(t.node,(r=!1,function(o,a){var s;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=o?n(o):e(t.body,(s=!1,function(e,r){if(s)throw Error("Attempted to call function more than once");return s=!0,null!=e?n(e):n(null,a!==t.node||r!==t.body?{node:a,body:r,fallthrough:t.fallthrough}:t)}))}))},(i=!1,function(r,a){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=r?n(r):(null!=o.defaultCase?function(t){var r;return e(o.defaultCase,(r=!1,function(e,o){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):t(o)}))}:function(e){return e(o.defaultCase)})(function(r){return(null!=o.label?function(t){var r;return e(o.label,(r=!1,function(e,o){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):t(o)}))}:function(e){return e(o.label)})(function(e){return n(null,s!==o.node||a!==o.cases||r!==o.defaultCase||e!==o.label?t(o.line,o.column,o.scope,s,a,r,e):o)})})}))}))},a.isStatement=function(){return!0},a.inspect=function(e){return o(e,"SwitchNode",this.line,this.column,this.node,this.cases,this.defaultCase,this.label)},t}(z),z.SyntaxChoice=ot=function(e){function t(n,r,o,i){var l,u;if(u=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!c(i))throw TypeError("Expected choices to be an Array, got "+g(i));for(l=i.length;l--;)if(!(i[l]instanceof e))throw TypeError("Expected "+("choices["+l+"]")+" to be a "+f(e)+", got "+g(i[l]));return u.line=n,u.column=r,u.scope=o,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.choices=i,u}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="SyntaxChoiceNode","function"==typeof e.extended&&e.extended(t),t.cappedName="SyntaxChoice",t.argNames=["choices"],a.inspect=function(e){return o(e,"SyntaxChoiceNode",this.line,this.column,this.choices)},a.walk=function(e){var n;return n=r(this.choices,e),n!==this.choices?t(this.line,this.column,this.scope,n):this},a.walkAsync=function(e,n){var r,o;return o=this,J(this.choices,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.choices?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.SyntaxMany=at=function(e){function t(n,o,a,i,l){var c;if(c=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected inner to be a "+f(e)+", got "+g(i));if("string"!=typeof l)throw TypeError("Expected multiplier to be a String, got "+g(l));return c.line=n,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.inner=i,c.multiplier=l,c}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="SyntaxManyNode","function"==typeof e.extended&&e.extended(t),t.cappedName="SyntaxMany",t.argNames=["inner","multiplier"],r.inspect=function(e){return o(e,"SyntaxManyNode",this.line,this.column,this.inner,this.multiplier)},r.walk=function(e){var n;return n=e(this.inner),n!==this.inner?t(this.line,this.column,this.scope,n,this.multiplier):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.inner,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.inner?t(o.line,o.column,o.scope,a,o.multiplier):o)}))},t}(z),z.SyntaxParam=st=function(e){function t(n,o,a,i,l){var c;if(c=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected ident to be a "+f(e)+", got "+g(i));if(null==l)l=void 0;else if(!(l instanceof e))throw TypeError("Expected asType to be one of "+(f(e)+" or undefined")+", got "+g(l));return c.line=n,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.ident=i,c.asType=l,c}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="SyntaxParamNode","function"==typeof e.extended&&e.extended(t),t.cappedName="SyntaxParam",t.argNames=["ident","asType"],r.inspect=function(e){return o(e,"SyntaxParamNode",this.line,this.column,this.ident,this.asType)},r.walk=function(n){var r,o;return o=n(this.ident),r=this.asType instanceof e?n(this.asType):this.asType,o!==this.ident||r!==this.asType?t(this.line,this.column,this.scope,o,r):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.ident,(o=!1,function(s,i){if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):(a.asType instanceof e?function(e){var t;return n(a.asType,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.asType)})(function(e){return r(null,i!==a.ident||e!==a.asType?t(a.line,a.column,a.scope,i,e):a)})}))},t}(z),z.SyntaxSequence=it=function(e){function t(n,r,o,i){var l,u;if(u=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!c(i))throw TypeError("Expected params to be an Array, got "+g(i));for(l=i.length;l--;)if(!(i[l]instanceof e))throw TypeError("Expected "+("params["+l+"]")+" to be a "+f(e)+", got "+g(i[l]));return u.line=n,u.column=r,u.scope=o,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.params=i,u}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="SyntaxSequenceNode","function"==typeof e.extended&&e.extended(t),t.cappedName="SyntaxSequence",t.argNames=["params"],a.inspect=function(e){return o(e,"SyntaxSequenceNode",this.line,this.column,this.params)},a.walk=function(e){var n;return n=r(this.params,e),n!==this.params?t(this.line,this.column,this.scope,n):this},a.walkAsync=function(e,n){var r,o;return o=this,J(this.params,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.params?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.This=lt=function(e){function t(e,n,o){var a;if(a=this instanceof t?this:s(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+g(n));return a.line=e,a.column=n,a.scope=o,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="ThisNode","function"==typeof e.extended&&e.extended(t),t.cappedName="This",t.argNames=[],r.cacheable=!1,r._isNoop=function(){return!0},r.inspect=function(e){return o(e,"ThisNode",this.line,this.column)},t}(z),z.Throw=ct=function(e){function t(n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));return l.line=n,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.node=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="ThrowNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Throw",t.argNames=["node"],r.type=function(){return _t.none},r.isStatement=function(){return!0},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scope,n):this},r.doWrap=function(){return T(this.line,this.column,this.scope,P(this.line,this.column,this.scope,"__throw"),[this.node])},r.inspect=function(e){return o(e,"ThrowNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.Tmp=ut=function(e){function t(e,n,o,a,i,l){var c;if(c=this instanceof t?this:s(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+g(n));if("number"!=typeof a)throw TypeError("Expected id to be a Number, got "+g(a));if("string"!=typeof i)throw TypeError("Expected name to be a String, got "+g(i));if(null==l)l=_t.any;else if(!(l instanceof _t))throw TypeError("Expected _type to be a "+f(_t)+", got "+g(l));return c.line=e,c.column=n,c.scope=o,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.id=a,c.name=i,c._type=l,c}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="TmpNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Tmp",t.argNames=["id","name","_type"],r.cacheable=!1,r.type=function(){return this._type},r._isNoop=function(){return!0},r.inspect=function(e){return o(e,"TmpNode",this.line,this.column,this.id,this.name,this._type)},r.walk=function(){return this},r.walkAsync=function(e,t){return t(null,this)},t}(z),z.TmpWrapper=ft=function(e){function t(n,o,a,i,l){var u;if(u=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected tmps to be an Array, got "+g(l));return u.line=n,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.node=i,u.tmps=l,u}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="TmpWrapperNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TmpWrapper",t.argNames=["node","tmps"],r.type=function(e){return this.node.type(e)
},r.withLabel=function(e,n){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.node.withLabel(e,n),this.tmps)},r._reduce=function(e){var n;return n=this.node.reduce(e),0===this.tmps.length?n:this.node!==n?t(this.line,this.column,this.scope,n,this.tmps):this},r.isStatement=function(){return this.node.isStatement()},r._isNoop=function(e){return this.node.isNoop(e)},r.doWrap=function(e){var n;return n=this.node.doWrap(e),n!==this.node?t(this.line,this.column,this.scope,n,this.tmps):this},r.inspect=function(e){return o(e,"TmpWrapperNode",this.line,this.column,this.node,this.tmps)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n,this.tmps):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a,o.tmps):o)}))},t}(z),z.TryCatch=pt=function(e){function t(n,o,a,i,l,c,u){var p;if(p=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected tryBody to be a "+f(e)+", got "+g(i));if(!(l instanceof e))throw TypeError("Expected catchIdent to be a "+f(e)+", got "+g(l));if(!(c instanceof e))throw TypeError("Expected catchBody to be a "+f(e)+", got "+g(c));if(null==u)u=null;else if(!(u instanceof P||u instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(u));return p.line=n,p.column=o,p.scope=a,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.tryBody=i,p.catchIdent=l,p.catchBody=c,p.label=u,p}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="TryCatchNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TryCatch",t.argNames=["tryBody","catchIdent","catchBody","label"],r.type=function(e){var t;return null==(t=this._type)?this._type=this.tryBody.type(e).union(this.catchBody.type(e)):t},r.isStatement=function(){return!0},r._isNoop=function(e){return this.tryBody.isNoop(e)},r.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.tryBody,this.catchIdent,this.catchBody,e)},r.inspect=function(e){return o(e,"TryCatchNode",this.line,this.column,this.tryBody,this.catchIdent,this.catchBody,this.label)},r.walk=function(n){var r,o,a,s;return s=n(this.tryBody),o=n(this.catchIdent),r=n(this.catchBody),a=this.label instanceof e?n(this.label):this.label,s!==this.tryBody||o!==this.catchIdent||r!==this.catchBody||a!==this.label?t(this.line,this.column,this.scope,s,o,r,a):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.tryBody,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.catchIdent,(l=!1,function(o,s){var c;if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):n(a.catchBody,(c=!1,function(o,l){if(c)throw Error("Attempted to call function more than once");return c=!0,null!=o?r(o):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.tryBody||s!==a.catchIdent||l!==a.catchBody||e!==a.label?t(a.line,a.column,a.scope,i,s,l,e):a)})}))}))}))},t}(z),z.TryFinally=dt=function(e){function t(n,o,a,i,l,c){var u;if(u=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected tryBody to be a "+f(e)+", got "+g(i));if(!(l instanceof e))throw TypeError("Expected finallyBody to be a "+f(e)+", got "+g(l));if(null==c)c=null;else if(!(c instanceof P||c instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(c));return u.line=n,u.column=o,u.scope=a,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.tryBody=i,u.finallyBody=l,u.label=c,u}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="TryFinallyNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TryFinally",t.argNames=["tryBody","finallyBody","label"],r.type=function(e){return this.tryBody.type(e)},r._reduce=function(e){var n,r,o;return o=this.tryBody.reduce(e),n=this.finallyBody.reduce(e),r=null!=this.label?this.label.reduce(e):this.label,n instanceof Y?A(this.line,this.column,this.scopeIf([o],r)).reduce(e):o instanceof Y?A(this.line,this.column,this.scopeIf([n],r)).reduce(e):o!==this.tryBody||n!==this.finallyBody||r!==this.label?t(this.line,this.column,this.scope,o,n,r):this},r.isStatement=function(){return!0},r._isNoop=function(e){var t;return null==(t=this.__isNoop)?this.__isNoop=this.tryBody.isNoop(e)&&this.finallyBody.isNoop():t},r.withLabel=function(e){if(null==e)e=null;else if(!(e instanceof P||e instanceof ut))throw TypeError("Expected label to be one of "+(f(P)+" or "+f(ut)+" or null")+", got "+g(e));return t(this.line,this.column,this.scope,this.tryBody,this.finallyBody,e)},r.inspect=function(e){return o(e,"TryFinallyNode",this.line,this.column,this.tryBody,this.finallyBody,this.label)},r.walk=function(n){var r,o,a;return a=n(this.tryBody),r=n(this.finallyBody),o=this.label instanceof e?n(this.label):this.label,a!==this.tryBody||r!==this.finallyBody||o!==this.label?t(this.line,this.column,this.scope,a,r,o):this},r.walkAsync=function(n,r){var o,a;return a=this,n(this.tryBody,(o=!1,function(s,i){var l;if(o)throw Error("Attempted to call function more than once");return o=!0,null!=s?r(s):n(a.finallyBody,(l=!1,function(o,s){if(l)throw Error("Attempted to call function more than once");return l=!0,null!=o?r(o):(a.label instanceof e?function(e){var t;return n(a.label,(t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,null!=n?r(n):e(o)}))}:function(e){return e(a.label)})(function(e){return r(null,i!==a.tryBody||s!==a.finallyBody||e!==a.label?t(a.line,a.column,a.scope,i,s,e):a)})}))}))},t}(z),z.TypeFunction=ht=function(e){function t(n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected returnType to be a "+f(e)+", got "+g(i));return l.line=n,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.returnType=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="TypeFunctionNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TypeFunction",t.argNames=["returnType"],r.inspect=function(e){return o(e,"TypeFunctionNode",this.line,this.column,this.returnType)},r.walk=function(e){var n;return n=e(this.returnType),n!==this.returnType?t(this.line,this.column,this.scope,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.returnType,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.returnType?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.TypeGeneric=mt=function(e){function t(n,r,o,i,l){var u,p;if(p=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!(i instanceof e))throw TypeError("Expected basetype to be a "+f(e)+", got "+g(i));if(!c(l))throw TypeError("Expected args to be an Array, got "+g(l));for(u=l.length;u--;)if(!(l[u]instanceof e))throw TypeError("Expected "+("args["+u+"]")+" to be a "+f(e)+", got "+g(l[u]));return p.line=n,p.column=r,p.scope=o,p._reduced=void 0,p._macroExpanded=void 0,p._macroExpandAlled=void 0,p.basetype=i,p.args=l,p}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="TypeGenericNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TypeGeneric",t.argNames=["basetype","args"],a.inspect=function(e){return o(e,"TypeGenericNode",this.line,this.column,this.basetype,this.args)},a.walk=function(e){var n,o;return o=e(this.basetype),n=r(this.args,e),o!==this.basetype||n!==this.args?t(this.line,this.column,this.scope,o,n):this},a.walkAsync=function(e,n){var r,o;return o=this,e(this.basetype,(r=!1,function(a,s){var i;if(r)throw Error("Attempted to call function more than once");return r=!0,null!=a?n(a):J(o.args,e,(i=!1,function(e,r){if(i)throw Error("Attempted to call function more than once");return i=!0,null!=e?n(e):n(null,s!==o.basetype||r!==o.args?t(o.line,o.column,o.scope,s,r):o)}))}))},t}(z),z.TypeObject=yt=function(e){function t(e,n,r,o){var a;if(a=this instanceof t?this:s(i),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+g(n));if(!c(o))throw TypeError("Expected pairs to be an Array, got "+g(o));return a.line=e,a.column=n,a.scope=r,a._reduced=void 0,a._macroExpanded=void 0,a._macroExpandAlled=void 0,a.pairs=o,a}function n(e,t){var n,r;return n=e.key.reduce(t),r=e.value.reduce(t),n!==e.key||r!==e.value?{key:n,value:r}:e}var a,i;return a=e.prototype,i=t.prototype=s(a),i.constructor=t,t.displayName="TypeObjectNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TypeObject",t.argNames=["pairs"],i._reduce=function(e){var o;return o=r(this.pairs,n,e),o!==this.pairs?t(this.line,this.column,this.scope,o):this},i.inspect=function(e){return o(e,"TypeObjectNode",this.line,this.column,this.pairs)},i.walk=function(){return this},i.walkAsync=function(e,t){return t(null,this)},t}(z),z.TypeUnion=gt=function(e){function t(n,r,o,i){var l,u;if(u=this instanceof t?this:s(a),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof r)throw TypeError("Expected column to be a Number, got "+g(r));if(!c(i))throw TypeError("Expected types to be an Array, got "+g(i));for(l=i.length;l--;)if(!(i[l]instanceof e))throw TypeError("Expected "+("types["+l+"]")+" to be a "+f(e)+", got "+g(i[l]));return u.line=n,u.column=r,u.scope=o,u._reduced=void 0,u._macroExpanded=void 0,u._macroExpandAlled=void 0,u.types=i,u}var n,a;return n=e.prototype,a=t.prototype=s(n),a.constructor=t,t.displayName="TypeUnionNode","function"==typeof e.extended&&e.extended(t),t.cappedName="TypeUnion",t.argNames=["types"],a.inspect=function(e){return o(e,"TypeUnionNode",this.line,this.column,this.types)},a.walk=function(e){var n;return n=r(this.types,e),n!==this.types?t(this.line,this.column,this.scope,n):this},a.walkAsync=function(e,n){var r,o;return o=this,J(this.types,e,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.types?t(o.line,o.column,o.scope,a):o)}))},t}(z),z.Unary=bt=function(e){function t(n,o,a,i,l){var c;if(c=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if("string"!=typeof i)throw TypeError("Expected op to be a String, got "+g(i));if(!(l instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(l));return c.line=n,c.column=o,c.scope=a,c._reduced=void 0,c._macroExpanded=void 0,c._macroExpandAlled=void 0,c.op=i,c.node=l,c}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="UnaryNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Unary",t.argNames=["op","node"],r.type=function(){var e;return e={"-":_t.number,"+":_t.number,"--":_t.number,"++":_t.number,"--post":_t.number,"++post":_t.number,"!":_t.boolean,"~":_t.number,"typeof":_t.string,"delete":_t.boolean},function(){var t;return(_.call(e,t=this.op)?e[t]:void 0)||_t.any}}(),r._reduce=function(){var e,n;return e={"-":function(e){return-e},"+":function(e){return+e},"!":function(e){return!e},"~":function(e){return~e},"typeof":function(e){return typeof e}},n={"+":function(e,t){return e.type(t).isSubsetOf(_t.number)?e:void 0},"-":function(e){var n;if(e instanceof t){if("-"===(n=e.op)||"+"===n)return t(this.line,this.column,this.scope,"-"===e.op?"+":"-",e.node)}else if(e instanceof C){if("-"===(n=e.op)||"+"===n)return C(this.line,this.column,this.scope,e.left,"-"===e.op?"+":"-",e.right);if("*"===(n=e.op)||"/"===n)return C(this.line,this.column,this.scope,t(e.left.line,e.left.column,e.left.scope,"-",e.left),e.op,e.right)}},"!":function(){var e;return e={"<":">=","<=":">",">":"<=",">=":"<","==":"!=","!=":"==","===":"!==","!==":"===","&&":function(e,n){return C(this.line,this.column,this.scope,t(e.line,e.column,e.scope,"!",e),"||",t(n.line,n.column,n.scope,"!",n))},"||":function(e,n){return C(this.line,this.column,this.scope,t(e.line,e.column,e.scope,"!",e),"&&",t(n.line,n.column,n.scope,"!",n))}},function(n,r){var o;if(n instanceof t){if("!"===n.op&&n.node.type(r).isSubsetOf(_t.boolean))return n.node}else if(n instanceof C&&_.call(e,n.op))return o=e[n.op],"function"==typeof o?o.call(this,n.left,n.right):C(this.line,this.column,this.scope,n.left,o,n.right)}}(),"typeof":function(){var e;return e=_t["null"].union(_t.object).union(_t.arrayLike).union(_t.regexp).union(_t.date).union(_t.error),function(t,n){var r;if(t.isNoop(n)){if(r=t.type(n),r.isSubsetOf(_t.number))return S(this.line,this.column,this.scope,"number");if(r.isSubsetOf(_t.string))return S(this.line,this.column,this.scope,"string");if(r.isSubsetOf(_t.boolean))return S(this.line,this.column,this.scope,"boolean");if(r.isSubsetOf(_t.undefined))return S(this.line,this.column,this.scope,"undefined");if(r.isSubsetOf(_t["function"]))return S(this.line,this.column,this.scope,"function");if(r.isSubsetOf(e))return S(this.line,this.column,this.scope,"object")}}}()},function(r){var o,a,s;return o=this.node.reduce(r).doWrap(r),a=this.op,o.isConst()&&_.call(e,a)?S(this.line,this.column,this.scope,e[a](o.constValue())):(_.call(n,a)&&(s=n[a].call(this,o,r)),null!=s?s.reduce(r):o!==this.node?t(this.line,this.column,this.scope,a,o):this)}}(),r._isNoop=function(e){var t,n;return null==(t=this.__isNoop)?this.__isNoop="++"!==(n=this.op)&&"--"!==n&&"++post"!==n&&"--post"!==n&&"delete"!==n&&this.node.isNoop(e):t},r.inspect=function(e){return o(e,"UnaryNode",this.line,this.column,this.op,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,this.op,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,o.op,a):o)}))},t}(z),z.Var=wt=function(e){function t(e,n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof e)throw TypeError("Expected line to be a Number, got "+g(e));if("number"!=typeof n)throw TypeError("Expected column to be a Number, got "+g(n));if(!(a instanceof P||a instanceof ut))throw TypeError("Expected ident to be one of "+(f(P)+" or "+f(ut))+", got "+g(a));if(null==i)i=!1;else if("boolean"!=typeof i)throw TypeError("Expected isMutable to be a Boolean, got "+g(i));return l.line=e,l.column=n,l.scope=o,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.ident=a,l.isMutable=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="VarNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Var",t.argNames=["ident","isMutable"],r.type=function(){return _t.undefined},r._reduce=function(e){var n;return n=this.ident.reduce(e),n!==this.ident?t(this.line,this.column,this.scope,n,this.isMutable):this},r.inspect=function(e){return o(e,"VarNode",this.line,this.column,this.ident,this.isMutable)},r.walk=function(e){var n;return n=e(this.ident),n!==this.ident?t(this.line,this.column,this.scope,n,this.isMutable):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.ident,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.ident?t(o.line,o.column,o.scope,a,o.isMutable):o)}))},t}(z),z.Yield=vt=function(e){function t(n,o,a,i){var l;if(l=this instanceof t?this:s(r),"number"!=typeof n)throw TypeError("Expected line to be a Number, got "+g(n));if("number"!=typeof o)throw TypeError("Expected column to be a Number, got "+g(o));if(!(i instanceof e))throw TypeError("Expected node to be a "+f(e)+", got "+g(i));return l.line=n,l.column=o,l.scope=a,l._reduced=void 0,l._macroExpanded=void 0,l._macroExpandAlled=void 0,l.node=i,l}var n,r;return n=e.prototype,r=t.prototype=s(n),r.constructor=t,t.displayName="YieldNode","function"==typeof e.extended&&e.extended(t),t.cappedName="Yield",t.argNames=["node"],r.type=function(){return _t.any},r._reduce=function(e){var n;return n=this.node.reduce(e).doWrap(e),n!==this.node?t(this.line,this.column,this.scope,n):this},r.inspect=function(e){return o(e,"YieldNode",this.line,this.column,this.node)},r.walk=function(e){var n;return n=e(this.node),n!==this.node?t(this.line,this.column,this.scope,n):this},r.walkAsync=function(e,n){var r,o;return o=this,e(this.node,(r=!1,function(e,a){if(r)throw Error("Attempted to call function more than once");return r=!0,null!=e?n(e):n(null,a!==o.node?t(o.line,o.column,o.scope,a):o)}))},t}(z),e.exports=z}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./parser-macroholder"]=function(){var e={exports:this};return function(){"use strict";var n,r,o,a,s,i,l,c,u,f,p,d,_;n="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},r=function(e,t){var n;for(n in t)l.call(t,n)&&(e[n]=t[n]);return e},o="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),a=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e},s=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+p(e));return e.displayName||e.name||""},i=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+p(e));return e},l=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+p(e))},f=function(e){if(null==e)throw TypeError("Expected an object, got "+p(e));return o(e)?e:"string"==typeof e?e.split(""):c.call(e)},p=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),_=t("./types"),d=function(){function e(t,r,o,a,s){var i;if(i=this instanceof e?this:n(h),"object"!=typeof t||null===t)throw TypeError("Expected syntaxes to be an Object, got "+p(t));if(i.syntaxes=t,"function"!=typeof r)throw TypeError("Expected macroName to be a Function, got "+p(r));if(i.macroName=r,"function"!=typeof o)throw TypeError("Expected wordOrSymbol to be a Function, got "+p(o));if(i.wordOrSymbol=o,"function"!=typeof a)throw TypeError("Expected oneOf to be a Function, got "+p(a));if(i.oneOf=a,"function"!=typeof s)throw TypeError("Expected sequential to be a Function, got "+p(s));return i.sequential=s,i.byName={},i.byId=[],i.byLabel={},i.typeById=[],i.operatorNames={},i.binaryOperators=[],i.assignOperators=[],i.prefixUnaryOperators=[],i.postfixUnaryOperators=[],i.consts={},i.serialization={},i.helpers={},i}function c(e){switch(e){case 0:return{type:0===e&&1/e>0?"+0":"-0"};case 1/0:return{type:"Infinity"};case-1/0:return{type:"-Infinity"};default:return e!==e?{type:"NaN"}:void 0===e?{type:"void"}:e}}function d(e){if("object"!=typeof e||null===e||"string"!=typeof e.type)return e;switch(e.type){case"+0":return 0;case"-0":return-0;case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return 0/0;case"void":return;default:throw Error("Unknown value")}}var h;return h=e.prototype,e.displayName="MacroHolder",h.clone=function(){var t;return t=e(this.syntaxes,this.macroName,this.wordOrSymbol,this.oneOf,this.sequential),t.byName=r({},this.byName),t.byId=this.byId.slice(),t.byLabel=r({},this.byLabel),t.typeById=this.typeById.slice(),t.operatorNames=r({},this.operatorNames),t.binaryOperators=this.binaryOperators.slice(),t.assignOperators=this.assignOperators.slice(),t.prefixUnaryOperators=this.prefixUnaryOperators.slice(),t.postfixUnaryOperators=this.postfixUnaryOperators.slice(),t.consts=r({},this.consts),t.serialization=r({},this.serialization),t.helpers=r({},this.helpers),t.syntaxes=r({},this.syntaxes),t},h.getByName=function(e){var t;return l.call(t=this.byName,e)?t[e]:void 0},h.getOrAddByName=function(e){var t,n,r;return t=this.byName,l.call(t,e)?t[e]:(r=this.macroName(e),n=function(e,t){var r,o,a,s,i;for(r=f(n.data),o=0,a=r.length;a>o;++o)if(i=r[o],s=i(e,t))return s},n.token=r,n.data=[],t[e]=n)},h.getOrAddByNames=function(e){var t,n,r,a,s;if(!o(e))throw TypeError("Expected names to be an Array, got "+p(e));for(n=e.length;n--;)if("string"!=typeof e[n])throw TypeError("Expected "+("names["+n+"]")+" to be a String, got "+p(e[n]));for(t=[],r=0,a=e.length;a>r;++r)s=e[r],t.push(this.getOrAddByName(s));return t},h.setTypeById=function(e,t){if("number"!=typeof e)throw TypeError("Expected id to be a Number, got "+p(e));if(!(t instanceof _))throw TypeError("Expected type to be a "+s(_)+", got "+p(t));this.typeById[e]=t},h.getTypeById=function(e){return this.typeById[e]},h.getById=function(e){var t;return t=this.byId,i(e)>=0&&a(e,t.length)?t[e]:void 0},h.addMacro=function(e,t,n){var r;if(null==t)t=void 0;else if("number"!=typeof t)throw TypeError("Expected macroId to be one of Number or undefined, got "+p(t));if(null==n)n=void 0;else if(!(n instanceof _)&&"string"!=typeof n)throw TypeError("Expected type to be one of "+(s(_)+" or String or undefined")+", got "+p(n));if(r=this.byId,null!=t){if(l.call(r,t))throw Error("Cannot add macro #"+u(t)+", as it already exists");r[t]=e}else r.push(e),t=i(r.length)-1;return null!=n&&(this.typeById[t]=n),t},h.replaceMacro=function(e,t,n){var r;if(null==n)n=void 0;else if(!(n instanceof _))throw TypeError("Expected type to be one of "+(s(_)+" or undefined")+", got "+p(n));r=this.byId,r[e]=t,null!=n&&(this.typeById[e]=n)},h.hasMacroOrOperator=function(e){return l.call(this.byName,e)||l.call(this.operatorNames,e)},h.getMacroAndOperatorNames=function(){var e,t,n;n=[],e=this.byName;for(t in e)l.call(e,t)&&n.push(t);e=this.operatorNames;for(t in e)l.call(e,t)&&n.push(t);return n},h.allBinaryOperators=function(){var e,t,n,r,o,a;if(null==(r=this._allBinaryOperators)){for(a=[],e=f(this.binaryOperators),t=0,n=e.length;n>t;++t)o=e[t],a.push.apply(a,f(o));return this._allBinaryOperators=a}return r},h.addBinaryOperator=function(e,t,n,r){var o,a,s,c,u,p,d,h,m;for(c=this,o=f(e),a=o.length;a--;)h=o[a],this.operatorNames[h]=!0;for(m=Number(n.precedence)||0,d=i(this.binaryOperators.length);m>=d;++d)this.binaryOperators[d]=[];return u=this.binaryOperators[m],p={rule:this.oneOf.apply(this,function(){var t,n,r,o,a;for(t=[],n=f(e),r=0,o=n.length;o>r;++r)a=n[r],t.push(c.wordOrSymbol(a));return t}()),func:t,rightToLeft:!!n.rightToLeft,maximum:n.maximum||0,minimum:n.minimum||0,invertible:!!n.invertible},u.push(p),this._allBinaryOperators=null,n.label&&this.addByLabel(n.label,p),this.addMacro(t,r,"left"===(s=n.type)||"right"===s?n.type:null!=n.type&&l.call(_,s=n.type)?_[s]:void 0)},h.getByLabel=function(e){var t;return l.call(t=this.byLabel,e)?t[e]:void 0},h.addByLabel=function(e,t){if("string"!=typeof e)throw TypeError("Expected label to be a String, got "+p(e));return this.byLabel[e]=t},h.addAssignOperator=function(e,t,n,r){var o,a,s,i,c,u;for(i=this,o=f(e),a=o.length;a--;)u=o[a],this.operatorNames[u]=!0;return c={rule:this.oneOf.apply(this,function(){var t,n,r,o,a;for(t=[],n=f(e),r=0,o=n.length;o>r;++r)a=n[r],":="===a?t.push(i.syntaxes.ColonEqual):t.push(i.wordOrSymbol(a));return t}()),func:t},this.assignOperators.push(c),n.label&&this.addByLabel(n.label,c),this.addMacro(t,r,"left"===(s=n.type)||"right"===s?n.type:null!=n.type&&l.call(_,s=n.type)?_[s]:void 0)},h.addUnaryOperator=function(e,t,n,r){var o,a,s,i,c,u,p;for(i=this,o=f(e),a=o.length;a--;)u=o[a],this.operatorNames[u]=!0;return p=n.postfix?this.postfixUnaryOperators:this.prefixUnaryOperators,c={rule:this.oneOf.apply(this,function(){var t,r,o,a,s,l;for(t=[],r=f(e),o=0,a=r.length;a>o;++o)s=r[o],l=i.wordOrSymbol(s),/[a-zA-Z]/.test(s)?t.push(l):n.postfix?t.push(i.sequential(i.syntaxes.NoSpace,["this",l])):t.push(i.sequential(["this",l],i.syntaxes.NoSpace));return t}()),func:t,standalone:l.call(!n,"standalone")||!!n.standalone},p.push(c),n.label&&this.addByLabel(n.label,c),this.addMacro(t,r,"node"===n.type?n.type:null!=n.type&&l.call(_,s=n.type)?_[s]:void 0)},h.addSerializedHelper=function(e,t,n,r){var o,a,s;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));s=null!=(o=(a=this.serialization).helpers)?o:a.helpers={},s[e]={helper:t,type:n,dependencies:r}},h.addConst=function(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));this.consts[e]=t},h.addSerializedConst=function(e){var t,n,r;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(!l.call(this.consts,e))throw Error("Unknown const "+e);r=null!=(t=(n=this.serialization).consts)?t:n.consts={},r[e]=c(this.consts[e])},h.addMacroSerialization=function(e){var t,n,o,a,s;if("object"!=typeof e||null===e)throw TypeError("Expected serialization to be an Object, got "+p(e));if("string"!=typeof e.type)throw TypeError("Expected serialization.type to be a String, got "+p(e.type));s=r({},e),delete s.type,a=null!=(t=(n=this.serialization)[o=e.type])?t:n[o]=[],a.push(s)},h.addSyntax=function(e,t){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if("function"!=typeof t)throw TypeError("Expected value to be a Function, got "+p(t));if(l.call(this.syntaxes,e))throw Error("Cannot override already-defined syntax: "+e);this.syntaxes[e]=t},h.hasSyntax=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));return l.call(this.syntaxes,e)},h.getSyntax=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(l.call(this.syntaxes,e))return this.syntaxes[e];throw Error("Unknown syntax: "+e)},h.serialize=function(e){var n,o,a,s,i,c,u;if(null==e)e=!1;else if("boolean"!=typeof e)throw TypeError("Expected allowJS to be a Boolean, got "+p(e));if(u=r({},this.serialization),l.call(u,"helpers")&&(s=u.helpers),s)for(c in s)if(l.call(s,c))for(a=s[c],n=f(a.dependencies),i=n.length;i--;)o=n[i],l.call(s,o)||a.dependencies.splice(i,1);return e?t("./jsutils").toJSSource(u):JSON.stringify(u)},h.deserialize=function(e,n){var r,o,a,s,i,c,u,f;a=t("./jsast"),r=null!=(o=l.call(e,"helpers")?e.helpers:void 0)?o:{};for(c in r)l.call(r,c)&&(i=(o=r[c]).helper,u=o.type,s=o.dependencies,this.addHelper(c,a.fromJSON(i),_.fromJSON(u),s));r=null!=(o=l.call(e,"consts")?e.consts:void 0)?o:{};for(c in r)l.call(r,c)&&(f=r[c],this.addConst(c,d(f)));n.deserializeMacros(e)},h.addHelper=function(e,t,n,r){var a;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(!(n instanceof _))throw TypeError("Expected type to be a "+s(_)+", got "+p(n));if(!o(r))throw TypeError("Expected dependencies to be an Array, got "+p(r));for(a=r.length;a--;)if("string"!=typeof r[a])throw TypeError("Expected "+("dependencies["+a+"]")+" to be a String, got "+p(r[a]));if(l.call(this.helpers,e))throw Error("Trying to overwrite helper "+e);return this.helpers[e]={value:t,type:n,dependencies:r}},h.hasHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));return l.call(this.helpers,e)},h.getHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(l.call(this.helpers,e))return this.helpers[e].value;throw Error("No such helper: "+e)},h.helperType=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(l.call(this.helpers,e))return this.helpers[e].type;throw Error("No such helper: "+e)},h.helperDependencies=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(l.call(this.helpers,e))return this.helpers[e].dependencies;throw Error("No such helper: "+e)},e}(),e.exports=d}.call(this),e.exports},t["./parser-macrocontext"]=function(){var e={exports:this};return function(){"use strict";function n(e){return e}var r,o,a,s,i,l,c,u,f,p,d,_,h,m,y,g,b,w,v,x,I,E,C,A,B,T,N,k,S,M,D,F,O,j,L,R,U,P,V,q,G,W,J,z,H,Y,$,X,K,Z,Q,et,tt,nt,rt,ot,at,st,it,lt,ct,ut,ft,pt,dt,_t,ht;r="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},o="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),a=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+p(e));return e.displayName||e.name||""},s=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+p(e));return e},i=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+p(e))},u=function(e){throw e},f=function(e){if(null==e)throw TypeError("Expected an object, got "+p(e));return o(e)?e:"string"==typeof e?e.split(""):l.call(e)},p=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),P=t("./parser-nodes"),lt=t("./types"),Y=t("./parser-scope"),V=(d=t("./parser-utils")).nodeToType,m=d.addParamToScope,U=d.map,h=P.Access,_=P.AccessMulti,y=P.Args,g=P.Array,b=P.Assign,w=P.Binary,v=P.Block,x=P.Break,I=P.Call,E=P.Comment,C=P.Const,A=P.Continue,B=P.Debugger,T=P.Def,N=P.EmbedWrite,k=P.Eval,M=P.For,S=P.ForIn,D=P.Function,F=P.Ident,O=P.If,j=P.MacroAccess,L=P.MacroConst,q=P.Nothing,G=P.Object,W=P.Param,J=P.Regexp,z=P.Return,H=P.Root,$=P.Spread,X=P.Super,K=P.Switch,Z=P.SyntaxChoice,Q=P.SyntaxMany,et=P.SyntaxParam,tt=P.SyntaxSequence,nt=P.This,rt=P.Throw,ot=P.Tmp,at=P.TmpWrapper,st=P.TryCatch,it=P.TryFinally,ct=P.TypeFunction,ut=P.TypeGeneric,ft=P.TypeObject,pt=P.TypeUnion,dt=P.Unary,_t=P.Var,ht=P.Yield,R=function(){function e(t,n,o,a,s){var i;return i=this instanceof e?this:r(E),i.parser=t,i.index=n,i.position=o,i.inGenerator=a,i.inEvilAst=s,i.unsavedTmps=[],i.savedTmps=[],i}function d(e,t,n,r){if(!(r instanceof Y))throw TypeError("Expected scope to be a "+a(Y)+", got "+p(r));if("object"!=typeof e||null===e||e instanceof RegExp)return C(t,n,r,e);if(o(e))return g(t,n,r,function(){var o,a,s,i,l;for(o=[],a=f(e),s=0,i=a.length;i>s;++s)l=a[s],o.push(d(l,t,n,r));return o}());if(e instanceof F&&s(e.name.length)>1&&36===e.name.charCodeAt(0))return I(e.line,e.column,r,F(e.line,e.column,r,"__wrap"),[F(e.line,e.column,r,e.name.substring(1))]);if(e instanceof I&&!e.isNew&&!e.isApply&&e.func instanceof F&&"$"===e.func.name){if(1!==e.args.length||e.args[0]instanceof $)throw Error("Can only use $() in an AST if it has one argument.");return I(e.line,e.column,r,F(e.line,e.column,r,"__wrap"),[e.args[0]])}if(e instanceof L)return I(e.line,e.column,r,F(e.line,e.column,r,"__const"),[C(e.line,e.column,r,e.name)]);
if(e instanceof P){if(e.constructor===P)throw Error("Cannot constify a raw node");return I(e.line,e.column,r,F(e.line,e.column,r,"__node"),[C(e.line,e.column,r,e.constructor.cappedName),C(e.line,e.column,r,e.line),C(e.line,e.column,r,e.column)].concat(function(){var t,n,o,a,s;for(t=[],n=f(e.constructor.argNames),o=0,a=n.length;a>o;++o)s=n[o],t.push(d(e[s],e.line,e.column,r));return t}()))}return G(t,n,r,function(){var o,a,s;o=[];for(a in e)i.call(e,a)&&(s=e[a],o.push({key:C(t,n,r,a),value:d(s,t,n,r)}));return o}())}function _(e,t){var n;if("object"!=typeof e||null===e||e instanceof RegExp)return e;if(!(e instanceof P))throw Error("Unexpected type to walk through: "+p(e));return e instanceof v||null==(n=t(e))?e.walk(function(e){return _(e,t)}):n}var E,B;return E=e.prototype,e.displayName="MacroContext",E.doWrap=function(e){return e instanceof P?e.doWrap(this.parser):e},E.error=function(e,t){if("string"!=typeof e)throw TypeError("Expected message to be a String, got "+p(e));if(null==t)t=null;else if(!(t instanceof P))throw TypeError("Expected node to be one of "+(a(P)+" or null")+", got "+p(t));throw this.parser.buildError(e,t||this.index)},E.scope=function(){return this.parser.scope.peek()},E.line=function(e){return e instanceof P?e.line:this.parser.getPosition(this.index).line},E.column=function(e){return e instanceof P?e.column:this.parser.getPosition(this.index).column},E.file=function(){return this.parser.options.filename||""},E.version=function(){return this.parser.getPackageVersion()},E.let=function(e,t,n){if(!(e instanceof ot||e instanceof F))throw TypeError("Expected ident to be one of "+(a(ot)+" or "+a(F))+", got "+p(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+p(t));if(null==n)n=lt.any;else if(!(n instanceof lt))throw TypeError("Expected type to be a "+a(lt)+", got "+p(n));return e instanceof F&&t&&n.isSubsetOf(lt.undefinedOrNull)&&(n=lt.any),this.scope().add(e,t,n)},E.hasVariable=function(e){if(!(e instanceof ot||e instanceof F))throw TypeError("Expected ident to be one of "+(a(ot)+" or "+a(F))+", got "+p(e));return this.scope().has(e)},E.isVariableMutable=function(e){if(!(e instanceof ot||e instanceof F))throw TypeError("Expected ident to be one of "+(a(ot)+" or "+a(F))+", got "+p(e));return this.scope().isMutable(e)},E["var"]=function(e,t){if(!(e instanceof F||e instanceof ot))throw TypeError("Expected ident to be one of "+(a(F)+" or "+a(ot))+", got "+p(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected isMutable to be a Boolean, got "+p(t));return this.parser.Var(this.index,e,t)},E.def=function(e,t){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected key to be a "+a(P)+", got "+p(e));if(null==t)t=void 0;else if(!(t instanceof P))throw TypeError("Expected value to be one of "+(a(P)+" or undefined")+", got "+p(t));return this.parser.Def(this.index,e,this.doWrap(t))},E.noop=function(){return this.parser.Nothing(this.index)},E.block=function(e,t){var n;if(!o(e))throw TypeError("Expected nodes to be an Array, got "+p(e));for(n=e.length;n--;)if(!(e[n]instanceof P))throw TypeError("Expected "+("nodes["+n+"]")+" to be a "+a(P)+", got "+p(e[n]));if(null==t)t=null;else if(!(t instanceof F||t instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(t));return this.parser.Block(this.index,e,t).reduce(this.parser)},E["if"]=function(e,t,n,r){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected test to be a "+a(P)+", got "+p(e));if(null==t)t=q(0,0,this.scope());else if(!(t instanceof P))throw TypeError("Expected whenTrue to be a "+a(P)+", got "+p(t));if(null==n)n=null;else if(!(n instanceof P))throw TypeError("Expected whenFalse to be one of "+(a(P)+" or null")+", got "+p(n));if(null==r)r=null;else if(!(r instanceof F||r instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(r));return this.parser.If(this.index,this.doWrap(e),t,n,r).reduce(this.parser)},E["switch"]=function(e,t,n,r){var s;if(s=this,null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));if(!o(t))throw TypeError("Expected cases to be an Array, got "+p(t));if(null==n)n=null;else if(!(n instanceof P))throw TypeError("Expected defaultCase to be one of "+(a(P)+" or null")+", got "+p(n));if(null==r)r=null;else if(!(r instanceof F||r instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(r));return this.parser.Switch(this.index,this.doWrap(e),function(){var e,n,r,o;for(e=[],n=0,r=t.length;r>n;++n)o=t[n],e.push({node:s.doWrap(o.node),body:o.body,fallthrough:o.fallthrough});return e}(),n,r).reduce(this.parser)},E["for"]=function(e,t,n,r,o){if(null==e)e=null;else if(!(e instanceof P))throw TypeError("Expected init to be one of "+(a(P)+" or null")+", got "+p(e));if(null==t)t=null;else if(!(t instanceof P))throw TypeError("Expected test to be one of "+(a(P)+" or null")+", got "+p(t));if(null==n)n=null;else if(!(n instanceof P))throw TypeError("Expected step to be one of "+(a(P)+" or null")+", got "+p(n));if(null==r)r=q(0,0,this.scope());else if(!(r instanceof P))throw TypeError("Expected body to be a "+a(P)+", got "+p(r));if(null==o)o=null;else if(!(o instanceof F||o instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(o));return this.parser.For(this.index,this.doWrap(e),this.doWrap(t),this.doWrap(n),r,o).reduce(this.parser)},E.forIn=function(e,t,n,r){if(!(e instanceof F))throw TypeError("Expected key to be a "+a(F)+", got "+p(e));if(null==t)t=q(0,0);else if(!(t instanceof P))throw TypeError("Expected object to be a "+a(P)+", got "+p(t));if(null==n)n=q(0,0,this.scope());else if(!(n instanceof P))throw TypeError("Expected body to be a "+a(P)+", got "+p(n));if(null==r)r=null;else if(!(r instanceof F||r instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(r));return this.parser.ForIn(this.index,e,this.doWrap(t),n,r).reduce(this.parser)},E.tryCatch=function(e,t,n,r){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected tryBody to be a "+a(P)+", got "+p(e));if(null==t)t=q(0,0,this.scope());else if(!(t instanceof P))throw TypeError("Expected catchIdent to be a "+a(P)+", got "+p(t));if(null==n)n=q(0,0,this.scope());else if(!(n instanceof P))throw TypeError("Expected catchBody to be a "+a(P)+", got "+p(n));if(null==r)r=null;else if(!(r instanceof F||r instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(r));return this.parser.TryCatch(this.index,e,t,n,r).reduce(this.parser)},E.tryFinally=function(e,t,n){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected tryBody to be a "+a(P)+", got "+p(e));if(null==t)t=q(0,0,this.scope());else if(!(t instanceof P))throw TypeError("Expected finallyBody to be a "+a(P)+", got "+p(t));if(null==n)n=null;else if(!(n instanceof F||n instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(n));return this.parser.TryFinally(this.index,e,t,n).reduce(this.parser)},E.assign=function(e,t,n){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected left to be a "+a(P)+", got "+p(e));if("string"!=typeof t)throw TypeError("Expected op to be a String, got "+p(t));if(null==n)n=q(0,0,this.scope());else if(!(n instanceof P))throw TypeError("Expected right to be a "+a(P)+", got "+p(n));return this.parser.Assign(this.index,e,t,this.doWrap(n)).reduce(this.parser)},E.binary=function(e,t,n){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected left to be a "+a(P)+", got "+p(e));if("string"!=typeof t)throw TypeError("Expected op to be a String, got "+p(t));if(null==n)n=q(0,0,this.scope());else if(!(n instanceof P))throw TypeError("Expected right to be a "+a(P)+", got "+p(n));return this.parser.Binary(this.index,this.doWrap(e),t,this.doWrap(n)).reduce(this.parser)},E.binaryChain=function(e,t){var n,r,s,i,l,c;if("string"!=typeof e)throw TypeError("Expected op to be a String, got "+p(e));if(!o(t))throw TypeError("Expected nodes to be an Array, got "+p(t));for(n=t.length;n--;)if(!(t[n]instanceof P))throw TypeError("Expected "+("nodes["+n+"]")+" to be a "+a(P)+", got "+p(t[n]));if(0===t.length)throw Error("Expected nodes to at least have a length of 1");for(i=this.doWrap(t[0]),r=1,s=t.length;s>r;++r)c=t[r],i=this.parser.Binary(this.index,i,e,this.doWrap(c));return l=i,l.reduce(this.parser)},E.unary=function(e,t){if("string"!=typeof e)throw TypeError("Expected op to be a String, got "+p(e));if(null==t)t=q(0,0,this.scope());else if(!(t instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(t));return this.parser.Unary(this.index,e,this.doWrap(t)).reduce(this.parser)},E["throw"]=function(e){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));return this.parser.Throw(this.index,this.doWrap(e)).reduce(this.parser)},E["return"]=function(e){if(null==e)e=void 0;else if(!(e instanceof P))throw TypeError("Expected node to be one of "+(a(P)+" or undefined")+", got "+p(e));return this.parser.Return(this.index,this.doWrap(e)).reduce(this.parser)},E.yield=function(e){if(null==e)e=q(0,0,this.scope());else if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));return this.parser.Yield(this.index,this.doWrap(e)).reduce(this.parser)},E["debugger"]=function(){return this.parser.Debugger(this.index)},E["break"]=function(e){if(null==e)e=null;else if(!(e instanceof F||e instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(e));return this.parser.Break(this.index,e)},E["continue"]=function(e){if(null==e)e=null;else if(!(e instanceof F||e instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(e));return this.parser.Continue(this.index,e)},E.spread=function(e){if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));return this.parser.Spread(this.index,e)},E.real=function(e){return e=this.macroExpand1(e),e instanceof at?e.node:e},E.rewrap=function(e,t){return t=this.macroExpand1(t),t instanceof at?e instanceof at?at(e.line,e.column,e.scope,e,t.tmps.concat(e.tmps)):at(e.line,e.column,e.scope,e,t.tmps.slice()):e},E.eq=function(e,t){return e=this.real(e),t=this.real(t),e instanceof C?t instanceof C&&e.value===t.value:e instanceof F?t instanceof F&&e.name===t.name:!1},E.isLabeledBlock=function(e){return e=this.real(e),e instanceof v||e instanceof O||e instanceof K||e instanceof M||e instanceof S||e instanceof st||e instanceof it?null!=e.label:!1},E.isBreak=function(e){return this.real(e)instanceof x},E.isContinue=function(e){return this.real(e)instanceof A},E.label=function(e){return e=this.real(e),e instanceof x||e instanceof A||e instanceof v||e instanceof O||e instanceof K||e instanceof M||e instanceof S||e instanceof st||e instanceof it?e.label:null},E.withLabel=function(e,t){if(null==t)t=null;else if(!(t instanceof F||t instanceof ot))throw TypeError("Expected label to be one of "+(a(F)+" or "+a(ot)+" or null")+", got "+p(t));return e.withLabel(t,this.parser)},E.macroExpand1=function(e){var t;return e instanceof P?(t=this.parser.macroExpand1(e),t instanceof P?t.reduce(this.parser):t):e},E.macroExpandAll=function(e){var t;return e instanceof P?(t=this.parser.macroExpandAll(e),t instanceof P?t.reduce(this.parser):t):e},E.tmp=function(e,t,n){var r;if(null==e)e="ref";else if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected save to be a Boolean, got "+p(t));if(null==n)n=lt.any;else if("string"==typeof n){if(!((i.call(lt,n)?lt[n]:void 0)instanceof lt))throw Error(c(n)+" is not a known type name");i.call(lt,n)&&(n=lt[n])}else if(!(n instanceof lt))throw Error("Must provide a Type or a string for type, got "+p(n));return r=this.parser.makeTmp(this.index,e,n),(t?this.savedTmps:this.unsavedTmps).push(r.id),r},E.getTmps=function(){return{unsaved:this.unsavedTmps.slice(),saved:this.savedTmps.slice()}},E.isConst=function(e){return void 0===e||e instanceof P&&this.real(e).isConst()},E.value=function(e){var t;if(void 0!==e)return e instanceof P&&(t=this.real(e),t.isConst())?t.constValue():void 0},E["const"]=function(e){return this.parser.Const(this.index,e)},E.isSpread=function(e){return this.real(e)instanceof $},E.spreadSubnode=function(e){return e=this.real(e),e instanceof $?e.node:void 0},E.isNode=function(e){return e instanceof P},E.isIdent=function(e){return this.real(e)instanceof F},E.isTmp=function(e){return this.real(e)instanceof ot},E.isIdentOrTmp=function(e){var t;return(t=this.real(e))instanceof F||t instanceof ot},E.name=function(e){return e=this.real(e),this.isIdent(e)?e.name:void 0},E.ident=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));return t("./jsutils").isAcceptableIdent(e,!0)?this.parser.Ident(this.index,e):void 0},E.isCall=function(e){return this.real(e)instanceof I},E.callFunc=function(e){return e=this.real(e),e instanceof I?e.func:void 0},E.callArgs=function(e){return e=this.real(e),e instanceof I?e.args:void 0},E.isSuper=function(e){return this.real(e)instanceof X},E.superChild=function(e){return e=this.real(e),this.isSuper(e)?e.child:void 0},E.superArgs=function(e){return e=this.real(e),this.isSuper(e)?e.args:void 0},E.callIsNew=function(e){return e=this.real(e),e instanceof I?!!e.isNew:!1},E.callIsApply=function(e){return e=this.real(e),e instanceof I?!!e.isApply:!1},E.call=function(e,t,n,r){var s,i;if(i=this,!(e instanceof P))throw TypeError("Expected func to be a "+a(P)+", got "+p(e));if(null==t)t=[];else{if(!o(t))throw TypeError("Expected args to be an Array, got "+p(t));for(s=t.length;s--;)if(!(t[s]instanceof P))throw TypeError("Expected "+("args["+s+"]")+" to be a "+a(P)+", got "+p(t[s]))}if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected isNew to be a Boolean, got "+p(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected isApply to be a Boolean, got "+p(r));if(n&&r)throw Error("Cannot specify both is-new and is-apply");return I(e.line,e.column,this.scope(),this.doWrap(e),function(){var e,n,r,o;for(e=[],n=0,r=t.length;r>n;++n)o=t[n],e.push(i.doWrap(o));return e}(),n,r).reduce(this.parser)},E.func=function(e,t,n,r,s,i,l,c){var u,d,_,h,y,g,b,w,v;if(!(t instanceof P))throw TypeError("Expected body to be a "+a(P)+", got "+p(t));if(null==n)n=!0;else if("boolean"!=typeof n)throw TypeError("Expected autoReturn to be a Boolean, got "+p(n));if(null==r)r=!1;else if(!(r instanceof P)&&"boolean"!=typeof r)throw TypeError("Expected bound to be one of "+(a(P)+" or Boolean")+", got "+p(r));if(null==s)s=!1;else if("boolean"!=typeof s)throw TypeError("Expected curry to be a Boolean, got "+p(s));if(null==i)i=void 0;else if(!(i instanceof P))throw TypeError("Expected asType to be one of "+(a(P)+" or undefined")+", got "+p(i));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected generator to be a Boolean, got "+p(l));if(null==c)c=[];else{if(!o(c))throw TypeError("Expected generic to be an Array, got "+p(c));for(_=c.length;_--;)if(!(c[_]instanceof F))throw TypeError("Expected "+("generic["+_+"]")+" to be a "+a(F)+", got "+p(c[_]))}for(v=this.parser.pushScope(!0),u=[],d=f(e),h=0,y=d.length;y>h;++h)w=d[h],b=w.rescope(v),m(v,b),u.push(b);return e=u,g=D(t.line,t.column,v.parent,e,t.rescope(v),n,r,s,i,l,c).reduce(this.parser),this.parser.popScope(),g},E.isFunc=function(e){return this.real(e)instanceof D},E.funcBody=function(e){return e=this.real(e),this.isFunc(e)?e.body:void 0},E.funcParams=function(e){return e=this.real(e),this.isFunc(e)?e.params:void 0},E.funcIsAutoReturn=function(e){return e=this.real(e),this.isFunc(e)?!!e.autoReturn:void 0},E.funcIsBound=function(e){return e=this.real(e),this.isFunc(e)?!(!e.bound||e.bound instanceof P):void 0},E.funcIsCurried=function(e){return e=this.real(e),this.isFunc(e)?!!e.curry:void 0},E.funcAsType=function(e){return e=this.real(e),this.isFunc(e)?e.asType:void 0},E.funcIsGenerator=function(e){return e=this.real(e),this.isFunc(e)?!!e.generator:void 0},E.funcGeneric=function(e){return e=this.real(e),this.isFunc(e)?e.generic.slice():[]},E.param=function(e,t,n,r,o){if(!(e instanceof P))throw TypeError("Expected ident to be a "+a(P)+", got "+p(e));return W(e.line,e.column,e.scope,e,t,n,r,o).reduce(this.parser)},E.isParam=function(e){return this.real(e)instanceof W},E.paramIdent=function(e){return e=this.real(e),this.isParam(e)?e.ident:void 0},E.paramDefaultValue=function(e){return e=this.real(e),this.isParam(e)?e.defaultValue:void 0},E.paramIsSpread=function(e){return e=this.real(e),this.isParam(e)?!!e.spread:void 0},E.paramIsMutable=function(e){return e=this.real(e),this.isParam(e)?!!e.isMutable:void 0},E.paramType=function(e){return e=this.real(e),this.isParam(e)?e.asType:void 0},E.isArray=function(e){return this.real(e)instanceof g},E.elements=function(e){return e=this.real(e),this.isArray(e)?e.elements:void 0},E.arrayHasSpread=function(e){var t,n,r,o,a;if(e=this.real(e),e instanceof g){for(o=!1,t=f(e.elements),n=0,r=t.length;r>n;++n)if(a=t[n],this.real(a)instanceof $){o=!0;break}return o}return!1},E.isObject=function(e){return this.real(e)instanceof G},E.pairs=function(e){return e=this.real(e),this.isObject(e)||this.isTypeObject(e)?e.pairs:void 0},E.isBlock=function(e){return this.real(e)instanceof v},E.nodes=function(e){return e=this.real(e),this.isBlock(e)?e.nodes:void 0},E.array=function(e){var t,n;if(n=this,!o(e))throw TypeError("Expected elements to be an Array, got "+p(e));for(t=e.length;t--;)if(!(e[t]instanceof P))throw TypeError("Expected "+("elements["+t+"]")+" to be a "+a(P)+", got "+p(e[t]));return this.parser.Array(0,function(){var t,r,o,a;for(t=[],r=0,o=e.length;o>r;++r)a=e[r],t.push(n.doWrap(a));return t}()).reduce(this.parser)},E.object=function(e){var t,n;if(n=this,!o(e))throw TypeError("Expected pairs to be an Array, got "+p(e));for(t=e.length;t--;){if("object"!=typeof e[t]||null===e[t])throw TypeError("Expected "+("pairs["+t+"]")+" to be an Object, got "+p(e[t]));if(!(e[t].key instanceof P))throw TypeError("Expected "+("pairs["+t+"].key")+" to be a "+a(P)+", got "+p(e[t].key));if(!(e[t].value instanceof P))throw TypeError("Expected "+("pairs["+t+"].value")+" to be a "+a(P)+", got "+p(e[t].value))}return this.parser.Object(0,function(){var t,r,o,a,s,i,l;for(t=[],r=0,o=e.length;o>r;++r)s=(a=e[r]).key,l=a.value,i=a.property,t.push({key:n.doWrap(s),value:n.doWrap(l)(i)});return t}()).reduce(this.parser)},E.type=function(e){if("string"==typeof e)return i.call(lt,e)&&lt[e]||u(Error("Unknown type "+c(e)));if(e instanceof P)return e.type(this.parser);throw Error("Can only retrieve type from a String or Node, got "+p(e))},E.toType=V,E.isComplex=function(e){return e=this.real(e),!(null==e||e instanceof C||e instanceof F||e instanceof ot||e instanceof nt||e instanceof y||e instanceof v&&0===e.nodes.length)},E.isNoop=function(e){return e=this.real(e),e.isNoop(this.parser)},E.isNothing=function(e){return this.real(e)instanceof q},E.isTypeArray=function(e){return e=this.real(e),e instanceof ut&&e.basetype instanceof F&&"Array"===e.basetype.name},E.subtype=function(e){return e=this.real(e),e instanceof ut&&e.basetype instanceof F&&"Array"===e.basetype.name?e.args[0]:void 0},E.isTypeGeneric=function(e){return this.real(e)instanceof ut},E.basetype=function(e){return e=this.real(e),e instanceof ut&&e.basetype},E.typeArguments=function(e){return e=this.real(e),e instanceof ut&&e.args},E.isTypeObject=function(e){return this.real(e)instanceof ft},E.isTypeFunction=function(e){return e=this.real(e),e instanceof ut&&e.basetype instanceof F&&"Function"===e.basetype.name},E.returnType=function(e){return e=this.real(e),e instanceof ut&&e.basetype instanceof F&&"Function"===e.basetype.name?e.args[0]:void 0},E.isTypeUnion=function(e){return this.real(e)instanceof pt},E.types=function(e){return e=this.real(e),this.isTypeUnion(e)&&e.types},E.isThis=function(e){return this.real(e)instanceof nt},E.isArguments=function(e){return e=this.real(e),e instanceof y},E.isDef=function(e){return this.real(e)instanceof T},E.isAssign=function(e){return this.real(e)instanceof b},E.isBinary=function(e){return this.real(e)instanceof w},E.isUnary=function(e){return this.real(e)instanceof dt},E.op=function(e){return e=this.real(e),this.isAssign(e)||this.isBinary(e)||this.isUnary(e)?e.op:void 0},E.left=function(e){return e=this.real(e),this.isDef(e)||this.isBinary(e)?e.left:void 0},E.right=function(e){return e=this.real(e),this.isDef(e)||this.isBinary(e)?e.right:void 0},E.unaryNode=function(e){return e=this.real(e),this.isUnary(e)?e.node:void 0},E.isAccess=function(e){return this.real(e)instanceof h},E.parent=function(e){return e=this.real(e),e instanceof h?e.parent:void 0},E.child=function(e){return e=this.real(e),e instanceof h?e.child:void 0},E.isIf=function(e){return this.real(e)instanceof O},E.test=function(e){return e=this.real(e),e instanceof O?e.test:void 0},E.whenTrue=function(e){return e=this.real(e),e instanceof O?e.whenTrue:void 0},E.whenFalse=function(e){return e=this.real(e),e instanceof O?e.whenFalse:void 0},E.cache=function(e,t,n,r){if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected name to be a String, got "+p(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected save to be a Boolean, got "+p(r));return this.maybeCache(e,function(e,n,r){return r&&t.push(e),n},n,r)},E.maybeCache=function(e,t,n,r){var o,s;if(!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected name to be a String, got "+p(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected save to be a Boolean, got "+p(r));return e=this.macroExpand1(e),this.isComplex(e)?(s=e.type(this.parser),o=this.tmp(n,r,s),this.scope().add(o,!1,s),t(this.parser.Block(this.index,[this.parser.Var(this.index,o,!1),this.parser.Assign(this.index,o,"=",this.doWrap(e))]),o,!0)):t(e,e,!1)},E.maybeCacheAccess=function(e,t,n,r,o){var s;if(s=this,!(e instanceof P))throw TypeError("Expected node to be a "+a(P)+", got "+p(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected parentName to be a String, got "+p(n));if(null==r)r="ref";else if("string"!=typeof r)throw TypeError("Expected childName to be a String, got "+p(r));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected save to be a Boolean, got "+p(o));return e=this.macroExpand1(e),this.isAccess(e)?this.maybeCache(this.parent(e),function(n,a,i){return s.maybeCache(s.child(e),function(r,o,l){return i||l?t(s.parser.Access(s.index,n,r),s.parser.Access(s.index,a,o),!0):t(e,e,!1)},r,o)},n,o):t(e,e,!1)},E.empty=function(e){var t,n,r,o;if(null==e)return!0;if(e instanceof P){if(e instanceof v){for(n=!0,t=f(e.nodes),r=t.length;r--;)if(o=t[r],!this.empty(o)){n=!1;break}return n}return e instanceof q}return!1},e.constifyObject=d,E.wrap=function(e){var t;return o(e)?v(0,0,this.scope(),e).reduce(this.parser):e instanceof P?e:null==e?q(0,0,this.scope()):e instanceof RegExp||"string"==(t=typeof e)||"boolean"===t||"number"===t?C(0,0,this.scope(),e):e},E.node=function(e,t,n){var r;return r=l.call(arguments,3),"MacroAccess"===e?this.macro.apply(this,[t,n].concat(f(r))):P[e].apply(P,[t,n,this.scope()].concat(f(r))).reduce(this.parser)},E.getConst=function(e){var t;if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+p(e));if(t=this.parser.getConst(e),!t)throw Error("Unknown const '"+e+"'");return C(0,0,this.scope(),t.value)},E.macro=function(e,t,n,r,o,a,s,i){return P.MacroAccess(e,t,this.scope(),n,r,o,a,s||this.parser.inGenerator.peek(),i).reduce(this.parser)},E.walk=function(e,t){if(null!=e&&!(e instanceof P))throw TypeError("Expected node to be one of "+(a(P)+" or undefined or null")+", got "+p(e));if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+p(t));return null!=e?_(e,t):e},E.hasFunc=function(e){var t,n;if(null!=this._hasFunc)return this._hasFunc;t={},n=function(e){if(e instanceof D)throw t;return e.walk(n)};try{_(this.macroExpandAll(e),n)}catch(r){if(r!==t)throw r;return this._hasFunc=!0}return this._hasFunc=!1},E.isStatement=function(e){return e=this.macroExpand1(e),e instanceof P&&e.isStatement()},E.isType=function(e,t){var n;if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+p(t));if(i.call(lt,t)&&(n=lt[t]),null==n||!(n instanceof lt))throw Error(t+" is not a known type name");return e.type(this.parser).isSubsetOf(n)},E.hasType=function(e,t){var n;if("string"!=typeof t)throw TypeError("Expected name to be a String, got "+p(t));if(i.call(lt,t)&&(n=lt[t]),null==n||!(n instanceof lt))throw Error(t+" is not a known type name");return e.type(this.parser).overlaps(n)},B={Block:function(e,t){var n,r,o;return o=e.nodes,r=o.length,0!==r&&(n=this.mutateLast(o[s(r)-1],t),n!==o[s(r)-1])?v(e.line,e.column,e.scope,f(l.call(o,0,-1)).concat([n]),e.label):e},If:function(e,t){var n,r;return r=this.mutateLast(e.whenTrue,t),n=this.mutateLast(e.whenFalse,t),r!==e.whenTrue||n!==e.whenFalse?O(e.line,e.column,e.scope,e.test,r,n,e.label):e},Switch:function(e,t){var n,r,o;return n=this,r=U(e.cases,function(e){var r;return e.fallthrough?e:(r=n.mutateLast(e.body,t),r!==e.body?{node:e.node,body:r,fallthrough:e.fallthrough}:e)}),o=this.mutateLast(e.defaultCase||this.noop(),t),r!==e.cases||o!==e.defaultCase?K(e.line,e.column,e.scope,e.node,r,o,e.label):e},TmpWrapper:function(e,t){var n;return n=this.mutateLast(e.node,t),n!==e.node?at(e.line,e.column,e.scope,n,e.tmps):e},MacroAccess:function(e,t){return this.mutateLast(this.macroExpand1(e),t)},TryCatch:function(e,t){var n,r;return r=this.mutateLast(e.tryBody,t),n=this.mutateLast(e.catchBody,t),r!==e.tryBody||n!==e.catchBody?st(e.line,e.column,e.scope,r,e.catchIdent,n,e.label):e},Break:n,Continue:n,Nothing:n,Return:n,Debugger:n,Throw:n},E.mutateLast=function(e,t,n){var r;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+p(t));if("object"!=typeof e||null===e||e instanceof RegExp)return e;if(!(e instanceof P))throw Error("Unexpected type to mutate-last through: "+p(e));return!i.call(B,e.constructor.cappedName)||n&&e instanceof q?null!=(r=t.call(this,e))?r:e:B[e.constructor.cappedName].call(this,e,t)},E.canMutateLast=function(e){return e instanceof P&&i.call(B,e.constructor.cappedName)},e}(),e.exports=R}.call(this),e.exports},t["./jstranslator"]=function(){var e={exports:this};return function(n){"use strict";function r(e){return!(e instanceof O.Ident||e instanceof O.Const||e instanceof O.This||e instanceof O.Arguments)}function o(e){return e.mutateLast(function(e){return O.Return(e.pos,e)})}function a(e){return e}function s(e){return e?o:a}function i(){function e(t){var n;return r.getOrAdd(t,(n=!1,function(t){var r,o;if(n)throw Error("Attempted to call function more than once");if(n=!0,o=!1,t instanceof G.Yield||t instanceof G.Return)return!0;if(!(t instanceof G.Function)){r={};try{t.walk(function(t){if(e(t))throw r;return t})}catch(a){if(a===r)return!0;throw a}}return!1}))}function t(n){var a;return o.getOrAdd(n,(a=!1,function(n){var o,s;if(a)throw Error("Attempted to call function more than once");if(a=!0,o=r.get(n))return o;if(n instanceof G.Yield||n instanceof G.Return||n instanceof G.Continue)return!0;if(!(n instanceof G.Function)){s={};try{n.walk(function(n){if(n instanceof G.For||n instanceof G.ForIn){if(e(n))throw s}else if(t(n))throw s;return n})}catch(i){if(i===s)return!0;throw i}}return!1}))}function n(i,l){var c;if(!(i instanceof G))throw TypeError("Expected node to be a "+A(G)+", got "+D(i));if(null==l)l=!1;else if("boolean"!=typeof l)throw TypeError("Expected allowReturn to be a Boolean, got "+D(l));return(l?s:a).getOrAdd(i,(c=!1,function(a){var i,u;if(c)throw Error("Attempted to call function more than once");if(c=!0,!l&&(i=s.get(a)))return i;if(i=r.get(a))return i;if(i=o.get(a))return i;if(a instanceof G.Yield||a instanceof G.Continue||a instanceof G.Break||!l&&a instanceof G.Return)return!0;if(!(a instanceof G.Function)){u={};try{a.walk(function(r){if(r instanceof G.For||r instanceof G.ForIn){if(e(r))throw u}else if(r instanceof G.Switch){if(t(r))throw u}else if(n(r,l))throw u;return r})}catch(f){if(f===u)return!0;throw f}}return!1}))}var r,o,a,s;return r=L.generic(G,Boolean)(),o=L.generic(G,Boolean)(),s=L.generic(G,Boolean)(),a=L.generic(G,Boolean)(),n}function l(e){var t,n,r,o,a,s;for(s=[],o=!1,t=M(e),n=0,r=t.length;r>n;++n)a=t[n],a instanceof G.Spread&&a.node instanceof G.Array?(s.push.apply(s,M(a.node.elements)),o=!0):s.push(a);return o?l(s):e}function c(e,t,n){var r;if("number"!=typeof e)throw TypeError("Expected line to be a Number, got "+D(e));if("number"!=typeof t)throw TypeError("Expected column to be a Number, got "+D(t));if(null==n)n=void 0;else if("string"!=typeof n)throw TypeError("Expected file to be one of String or undefined, got "+D(n));return r={line:e,column:t},null!=n&&(r.file=n),r}function u(e){if(!(e instanceof G))throw TypeError("Expected node to be a "+A(G)+", got "+D(e));return c(e.line,e.column,e.file)}function f(){}function p(e,t,n,r,o,a){var s,i,c,u,f,p,_,h;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));for(h=[],f=[],h.push(f),s=M(l(t)),c=0,u=s.length;u>c;++c)p=s[c],p instanceof G.Spread?(h.push({tNode:d(p.node,n,"expression",null,a),type:p.node.type()}),f=[],h.push(f)):f.push(d(p,n,"expression",null,a));if(1===h.length)return function(){return O.Arr(e,function(){var e,t,n,r,o;for(e=[],t=M(h[0]),n=0,r=t.length;r>n;++n)o=t[n],e.push(o());return e}())};for(_=h.length,i=function(e,t){return 0===t%2?B(e.length)>0?h[t]=function(){var t,n,r,o,a,s;for(t=[],n=M(e),r=0,o=n.length;o>r;++r)s=n[r],t.push(s());return a=t,O.Arr(a[0].pos,a)}:h.splice(t,1):h[t]=function(){var t;return t=e.tNode(),e.type.isSubsetOf(z.array)?t:(n.addHelper("__toArray"),O.Call(t.pos,O.Ident(t.pos,"__toArray"),[t]))}};_--;)i.call(this,h[_],_);return 1===h.length?function(){var t;return t=h[0](),r&&t instanceof O.Call&&t.func instanceof O.Ident&&"__toArray"===t.func.name?O.Call(e,O.Access(e,O.Ident(e,"__slice"),"call"),t.args):o&&t instanceof O.Call&&t.func instanceof O.Ident&&"__toArray"===t.func.name&&t.args[0]instanceof O.Arguments?t.args[0]:t}:function(){var t,n,r,o,a,s;for(o=h[0](),t=[],n=1,r=h.length;r>n;++n)a=h[n],t.push(a());return s=t,O.Call(e,O.Access(e,o,"concat"),s)}}function d(e,t,n,r,o){var a;if("object"!=typeof e||null===e)throw TypeError("Expected node to be an Object, got "+D(e));if(!(t instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(t));if("string"!=typeof n)throw TypeError("Expected location to be a String, got "+D(n));if("function"!=typeof r&&(r=s(r)),!T.call(J,e.constructor.cappedName))throw Error("Unable to translate unknown node type: "+String(e.constructor.cappedName));if(a=J[e.constructor.cappedName](e,t,n,r,o),"function"!=typeof a)throw Error("Translated non-function: "+D(a));return a}function _(e,t,n,r,o){var a,s,i,l;if(!E(e))throw TypeError("Expected nodes to be an Array, got "+D(e));if(!(t instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(t));if("string"!=typeof n)throw TypeError("Expected location to be a String, got "+D(n));for(a=[],s=0,i=e.length;i>s;++s)l=e[s],a.push(d(e[s],t,n,s===i-1&&r,o));return a}function h(e,t,n,r,o,a){var s,l,c,u,f;return null==a&&(a={}),u=!1,t&&(c=i(),u=!c(o,!0),!u)?(l=R(e,r,c),P(o,r,l.start).goto(e,function(){return l.stop}),f=l.create(),e.file&&((s=f.pos).file||(s.file=e.file)),{wrap:function(e){return e},body:f}):(f=d(o,r,"topStatement",!u&&n,a)(),e.file&&((s=f.pos).file||(s.file=e.file)),{wrap:u?(r.addHelper("__generator"),function(t){return O.Call(e,O.Ident(e,"__generator"),[t])
}):function(e){return e},body:f})}function m(e,t){function n(e){var t;for(t=[];;)if(e instanceof O.Comment)t.push(e),e=O.Noop(e.pos);else{if(!(e instanceof O.Block&&e.body[0]instanceof O.Comment))break;t.push(e.body[0]),e=O.Block(e.pos,N.call(e.body,1))}return{comments:t,body:e}}var r,o,a,s,i,l,f,p,_,m,y,g,b,w,v,x,I;if("object"!=typeof e||null===e)throw TypeError("Expected roots to be an Object, got "+D(e));if(!(t instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(t));if(E(e)||(e=[e]),0===e.length&&e.push({type:"Root",line:0,column:0,body:{type:"Nothing",line:0,column:0}}),w=c(0,0),t.options.embedded)for(r=["write","context"],o=0,a=r.length;a>o;++o)b=r[o],y=O.Ident({line:0,column:0},b),t.addVariable(y),t.markAsParam(y);for(I=(s=1===e.length?function(){var n,r,o;if(!(e[0]instanceof G.Root))throw Error("Cannot translate non-Root object");return e[0].isGenerator&&(t=t.clone(!0)),o=u(e[0]),r=h(o,e[0].isGenerator,t.options["return"]||t.options.eval,t,e[0].body),(n=r.body.pos).file||(n.file=o.file),r}():{wrap:function(e){return e},body:O.Block(w,function(){var r,o,a,s,i,l,c,f,p,_;for(r=[],o=M(e),a=0,s=o.length;s>a;++a){if(f=o[a],!(f instanceof G.Root))throw Error("Cannot translate non-Root object");c=t.clone(!0),l=(i=n(d(f.body,c,"topStatement",t.options["return"]||t.options.eval,[])())).comments,p=i.body,_=u(f),r.push(O.Block(_,M(l).concat([O.Call(_,O.Func(_,null,[],c.getVariables(),p))])))}return r}())}).wrap,l=s.body,g=[],t.hasBound&&t.usedThis&&(_=O.Ident(l.pos,"_this"),t.addVariable(_),g.push(O.Assign(l.pos,_,O.This(l.pos)))),t.fillHelperDependencies(),r=M(t.getHelpers()),o=0,a=r.length;a>o;++o)m=r[o],"GLOBAL"!==m&&t.macros.hasHelper(m)&&(y=O.Ident(l.pos,m),t.addVariable(y),g.push(O.Assign(l.pos,y,t.macros.getHelper(m))));return i=[],t.options.eval&&(x=function(e){return e instanceof O.Func?(t.addHelper("GLOBAL"),null!=e.name?O.Block(e.pos,[e,O.Assign(e.pos,O.Access(e.pos,O.Ident(e.pos,"GLOBAL"),e.name.name),e.name)]):e):e instanceof O.Binary&&"="===e.op&&e.left instanceof O.Ident?(t.addHelper("GLOBAL"),O.Assign(e.pos,O.Access(e.pos,O.Ident(e.pos,"GLOBAL"),e.left.name),e.walk(x))):void 0},l=l.walk(x),l=l.mutateLast(function(e){return t.addHelper("GLOBAL"),O.Assign(e.pos,O.Access(e.pos,O.Ident(e.pos,"GLOBAL"),O.Const(e.pos,"_")),e)},{"return":!0})),p=(s=n(l)).comments,v=s.body,t.options.embedded&&(v=O.Block(l.pos,[O.Return(l.pos,I(O.Func(l.pos,null,[O.Ident(l.pos,"write"),O.Ident(l.pos,"context")],[],O.Block(l.pos,[O.If(l.pos,O.Binary(l.pos,O.Ident(l.pos,"context"),"==",O.Const(l.pos,null)),O.Assign(l.pos,O.Ident(l.pos,"context"),O.Obj(l.pos))),v]))))])),t.options.bare?(t.hasHelper("GLOBAL")&&(t.addVariable(O.Ident(l.pos,"GLOBAL")),i.unshift(O.Assign(l.pos,O.Ident(l.pos,"GLOBAL"),t.macros.getHelper("GLOBAL")))),null!=t.options.undefinedName&&t.addVariable(t.options.undefinedName),O.Root(l.pos,O.Block(l.pos,M(p).concat(M(i),M(g),[v])),t.getVariables(),["use strict"])):(f=O.Call(l.pos,O.Access(l.pos,O.Func(l.pos,null,(t.hasHelper("GLOBAL")?[O.Ident(l.pos,"GLOBAL")]:[]).concat(null!=t.options.undefinedName?[O.Ident(l.pos,t.options.undefinedName,!0)]:[]),t.getVariables(),O.Block(l.pos,M(g).concat([v])),["use strict"]),"call"),[O.This(l.pos)].concat(t.hasHelper("GLOBAL")?[t.macros.getHelper("GLOBAL")]:[])),t.options["return"]&&(f=O.Return(l.pos,f)),O.Root(l.pos,O.Block(l.pos,M(p).concat(M(i),[f])),[],[]))}var y,g,b,w,v,x,I,E,C,A,B,T,N,k,S,M,D,F,O,j,L,R,U,P,V,q,G,W,J,z;y=function(){var e;return e={iterator:function(){return this},next:function(){var e,t;return t=B(this.index)+1,e=this.array,t>=B(e.length)?{done:!0,value:void 0}:(this.index=t,{done:!1,value:e[t]})}},function(t){var n;if(!E(t))throw TypeError("Expected array to be an Array, got "+D(t));return n=b(e),n.array=t,n.index=-1,n}}(),g=function(e,t){var n;if(e===t)return 0;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>e?-1:1},b="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},w=function(e,t){var n;if("number"!=typeof e)throw TypeError("Expected numArgs to be a Number, got "+D(e));if("function"!=typeof t)throw TypeError("Expected f to be a Function, got "+D(t));return e>1?(n=function(r){var o;return B(r.length)>=e?t.apply(this,r):o=function(){return 0===arguments.length?o:n.call(this,r.concat(N.call(arguments)))}},n([])):t},v=function(e){return e},x=function(e,t){var n;for(n in t)T.call(t,n)&&(e[n]=t[n]);return e},I=function(e,t){var n,r,o,a;if("number"==typeof t){if(t!==t){for(n=M(e),o=n.length;o--;)if(r=n[o],r!==r)return o;return-1}if(0===t){for(a=1/t,n=M(e),o=n.length;o--;)if(r=n[o],0===r&&1/r===a)return o;return-1}}return e.indexOf(t)},E="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),C=function(e){if(null==e)throw TypeError("Expected iterable to be an Object, got "+D(e));if(E(e))return y(e);if("function"==typeof e.iterator)return e.iterator();if("function"==typeof e.next)return e;throw Error("Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "+D(e))},A=function(e){if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+D(e));return e.displayName||e.name||""},B=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+D(e));return e},T=Object.prototype.hasOwnProperty,N=Array.prototype.slice,k=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+D(e))},S=function(e){throw e},M=function(e){if(null==e)throw TypeError("Expected an object, got "+D(e));return E(e)?e:"string"==typeof e?e.split(""):N.call(e)},D=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),q="function"==typeof n.Map?n.Map:q=function(){function e(n){var r,o,a,s;if(a=this instanceof e?this:b(t),a._keys=[],a._values=[],null!=n)try{for(o=C(n);r=o.next(),!r.done;)s=r.value,a.set(s[0],s[1])}finally{try{o.close()}catch(i){}}return a}var t;return t=e.prototype,e.displayName="Map",t.get=function(e){var t;return t=I(this._keys,e),-1===t?void 0:this._values[t]},t.has=function(e){return-1!==I(this._keys,e)},t.set=function(e,t){var n,r;r=this._keys,n=I(r,e),-1===n&&(n=r.length,r[n]=e),this._values[n]=t},t["delete"]=function(e){var t,n;return n=this._keys,t=I(n,e),-1===t?!1:(n.splice(t,1),this._values.splice(t,1))},t.keys=function(){function e(){s=3}function t(){for(;;)switch(s){case 0:o=M(i._keys),a=o.length,++s;case 1:s=a--?2:3;break;case 2:return l=o[a],s=1,{done:!1,value:l};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+s)}}function n(t){throw e(),t}function r(e){try{return t(e)}catch(r){n(r)}}var o,a,r,s,t,i,n,l;return i=this,s=0,{close:e,iterator:function(){return this},next:function(){return r(void 0)},send:r,"throw":function(e){return n(e),r(void 0)}}},t.values=function(){function e(){s=3}function t(){for(;;)switch(s){case 0:o=M(i._values),a=o.length,++s;case 1:s=a--?2:3;break;case 2:return l=o[a],s=1,{done:!1,value:l};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+s)}}function n(t){throw e(),t}function r(e){try{return t(e)}catch(r){n(r)}}var o,a,r,s,t,i,n,l;return i=this,s=0,{close:e,iterator:function(){return this},next:function(){return r(void 0)},send:r,"throw":function(e){return n(e),r(void 0)}}},t.items=function(){function e(){a=3}function t(){for(;;)switch(a){case 0:c=s._values,o=M(s._keys),i=o.length,++a;case 1:a=i--?2:3;break;case 2:return l=o[i],a=1,{done:!1,value:[l,c[i]]};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function n(t){throw e(),t}function r(e){try{return t(e)}catch(r){n(r)}}var o,r,a,t,s,n,i,l,c;return s=this,a=0,{close:e,iterator:function(){return this},next:function(){return r(void 0)},send:r,"throw":function(e){return n(e),r(void 0)}}},t.iterator=e.prototype.items,e}(),O=t("./jsast"),j=O.Node,z=t("./types"),G=(F=t("./parser")).Node,V=F.MacroHolder,L=t("./utils").Cache,W=function(){function e(t,r,a,s,i,l,c){var u;if(u=this instanceof e?this:b(n),null==t&&(t={}),u.options=t,!(r instanceof V))throw TypeError("Expected macros to be a "+A(V)+", got "+D(r));return u.macros=r,null==a&&(a=!1),u.bound=a,null==s&&(s={}),u.usedTmps=s,null==i&&(i={}),u.helperNames=i,null==c&&(c={}),u.tmps=c,u.variables=l?b(l):{},u.hasBound=!1,u.usedThis=!1,u.id=o(),u}function t(e,t){return g(e.toLowerCase(),t.toLowerCase())}var n,o;return n=e.prototype,e.displayName="Scope",o=function(){var e;return e=-1,function(){return++e}}(),n.maybeCache=function(e,t,n){var o,a;if(!(e instanceof O.Expression))throw TypeError("Expected item to be an Expression, got "+D(e));if(null==t)t=z.any;else if(!(t instanceof z))throw TypeError("Expected type to be a "+A(z)+", got "+D(t));if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+D(n));return r(e)?(o=this.reserveIdent(e.pos,"ref",t),a=n(O.Assign(e.pos,o,e),o,!0),this.releaseIdent(o),a):n(e,e,!1)},n.maybeCacheAccess=function(e,t,n,r,o){var a;if(a=this,!(e instanceof O.Expression))throw TypeError("Expected item to be an Expression, got "+D(e));if(null==n)n="ref";else if("string"!=typeof n)throw TypeError("Expected parentName to be a String, got "+D(n));if(null==r)r="ref";else if("string"!=typeof r)throw TypeError("Expected childName to be a String, got "+D(r));if(null==o)o=!1;else if("boolean"!=typeof o)throw TypeError("Expected save to be a Boolean, got "+D(o));return e instanceof O.Binary&&"."===e.op?this.maybeCache(e.left,z.any,function(n,r,o){return a.maybeCache(e.right,z.any,function(a,s,i){return o||i?t(O.Access(e.pos,n,a),O.Access(e.pos,r,s),!0):t(e,e,!1)})}):t(e,e,!1)},n.reserveIdent=function(e,t,n){var r;if(r=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if(null==t&&(t="ref"),null==n)n=z.any;else if(!(n instanceof z))throw TypeError("Expected type to be a "+A(z)+", got "+D(n));return function(){var o,a,s;for(o=1;;++o)if(s=1===o?"_"+k(t):"_"+k(t)+o,!(s in r.usedTmps))return r.usedTmps[s]=!0,a=O.Ident(e,s),r.addVariable(a,n),a}()},n.reserveParam=function(e){var t;if(t=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));return function(){var n,r;for(n=1;;++n)if(r=1===n?"_p":"_p"+n,!(r in t.usedTmps))return t.usedTmps[r]=!0,O.Ident(e,r)}()},n.getTmp=function(e,t,n,r){var o,a;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if(null==r)r=z.any;else if(!(r instanceof z))throw TypeError("Expected type to be a "+A(z)+", got "+D(r));return a=this.tmps,t in a&&(o=a[t],o instanceof O.Ident)?o:a[t]=this.reserveIdent(e,n||"tmp",r)},n.releaseTmp=function(e){var t,n;T.call(this.tmps,e)&&this.releaseIdent((t=(n=this.tmps)[e],delete n[e],t))},n.releaseTmps=function(){var e,t;e=this.tmps;for(t in e)T.call(e,t)&&this.releaseTmp(t);this.tmps={}},n.releaseIdent=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));if(!T.call(this.usedTmps,e.name))throw Error("Trying to release a non-reserved ident: "+k(e.name));delete this.usedTmps[e.name]},n.markAsParam=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));this.variables[e.name].isParam=!0},n.markAsFunction=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));this.variables[e.name].isFunction=!0},n.addHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+D(e));this.helperNames[e]=!0},n.fillHelperDependencies=function(){var e,t,n,r,o,a,s;for(o=this.helperNames,s={};;){for(a in o)if(T.call(o,a)&&this.macros.hasHelper(a))for(e=M(this.macros.helperDependencies(a)),n=e.length;n--;)r=e[n],T.call(o,r)||(s[r]=!0);t=!0;for(a in s)T.call(s,a)&&(t=!1,this.addHelper(a));if(t)break;o=s,s={}}},n.getHelpers=function(){var e,n,r,o;e=[],n=this.helperNames;for(r in n)T.call(n,r)&&e.push(r);return o=e,o.sort(t)},n.hasHelper=function(e){if("string"!=typeof e)throw TypeError("Expected name to be a String, got "+D(e));return T.call(this.helperNames,e)},n.addVariable=function(e,t,n){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));if(null==t)t=z.any;else if(!(t instanceof z))throw TypeError("Expected type to be a "+A(z)+", got "+D(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected isMutable to be a Boolean, got "+D(n));this.variables[e.name]={type:t,isMutable:n}},n.hasVariable=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));return e.name in this.variables&&"object"==typeof this.variables[e.name]&&null!==this.variables[e.name]},n.hasOwnVariable=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));return T.call(this.variables,e.name)},n.isVariableMutable=function(e){var t;if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));return null!=(t=this.variables[e.name])?t.isMutable:void 0},n.removeVariable=function(e){if(!(e instanceof O.Ident))throw TypeError("Expected ident to be an Ident, got "+D(e));delete this.variables[e.name]},n.getVariables=function(){var e,n,r,o,a;e=[],n=this.variables;for(r in n)T.call(n,r)&&(o=n[r],o.isParam||o.isFunction||e.push(r));return a=e,a.sort(t)},n.clone=function(t){return t&&(this.hasBound=!0),e(this.options,this.macros,t,b(this.usedTmps),this.helperNames,this.variables,b(this.tmps))},e}(),U=function(){function e(t){var r;if(r=this instanceof e?this:b(n),!(t instanceof R))throw TypeError("Expected builder to be a "+A(R)+", got "+D(t));return r.builder=t,r.nodes=[],r}function t(t,n){if("object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+D(t));if(n instanceof e)return O.Const(t,n.caseId());if(n instanceof O.Node)return n;throw TypeError("Expected a GeneratorState or Node, got "+D(n))}var n;return n=e.prototype,e.displayName="GeneratorState",n.hasGeneratorNode=function(e){return this.builder.hasGeneratorNode(e)},n.add=function(e){if("function"!=typeof e)throw TypeError("Expected tNode to be a Function, got "+D(e));return this.nodes.push(e),this},n.branch=function(){var t,n;return n=e(this.builder),this.builder.currentCatch.length&&(t=this.builder.currentCatch)[B(t.length)-1].push(n),this.builder.statesOrder.push(n),n},n.caseId=function(){return this.builder.caseId(this.getRedirect())},n.makeGoto=function(t,n,r){var o;if(o=this,"object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+D(t));if("function"!=typeof n)throw TypeError("Expected tState to be a Function, got "+D(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected includeBreak to be a Boolean, got "+D(r));return function(){var a,s,i;if(i=n(),i instanceof e)s=O.Const(t,i.caseId());else{if(!(i instanceof O.Node))throw Error("Expected a GeneratorState or Node, got "+D(i));s=i}return s instanceof O.Const&&"number"==typeof s.value&&s.value===B(o.caseId())+1?O.Unary(t,"++",o.builder.stateIdent):(a=O.Assign(t,o.builder.stateIdent,s),r?O.Block(t,[a,O.Break(t)]):a)}},n.yield=function(e,t){var n;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if("function"!=typeof t)throw TypeError("Expected tNode to be a Function, got "+D(t));return n=this.branch(),this.nodes.push(this.makeGoto(e,function(){return n},!1),function(){return O.Return(e,O.Obj(e,[O.Obj.Pair(e,"done",O.Const(e,!1)),O.Obj.Pair(e,"value",t())]))}),n},n["return"]=function(e,t){var n;if(n=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if(null==t)t=null;else if("function"!=typeof t)throw TypeError("Expected tNode to be one of Function or null, got "+D(t));null==t?this.goto(e,function(){return n.builder.stop}):(this.add(this.makeGoto(e,function(){return n.builder.stop},!1)),this.add(function(){return O.Return(e,O.Obj(e,[O.Obj.Pair(e,"done",O.Const(e,!0)),O.Obj.Pair(e,"value",t())]))}))},n.getRedirect=function(){return this.builder.getRedirect(this)},n.goto=function(e,n,r){var o;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if("function"!=typeof n)throw TypeError("Expected tState to be a Function, got "+D(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected preventRedirect to be a Boolean, got "+D(r));o=this.nodes,0!==o.length||r||this.builder.addRedirect(this,n),o.push(this.makeGoto(e,function(){return t(e,n())},!0))},n.noop=function(e){var t;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));return 0===this.nodes.length?this:(t=this.branch(),this.goto(e,function(){return t}),t)},n.gotoIf=function(e,n,r,o){var a;if(a=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if("function"!=typeof n)throw TypeError("Expected tTest to be a Function, got "+D(n));if("function"!=typeof r)throw TypeError("Expected tWhenTrue to be a Function, got "+D(r));if("function"!=typeof o)throw TypeError("Expected tWhenFalse to be a Function, got "+D(o));this.goto(e,function(){return O.IfExpression(e,n(),t(e,r()),t(e,o()))},!0)},n.pendingFinally=function(e,t){var n,r,o;if(n=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if("function"!=typeof t)throw TypeError("Expected tFinallyBody to be a Function, got "+D(t));return o=this.builder.scope,r=o.reserveIdent(e,"finally",z.undefined["function"]()),o.markAsFunction(r),this.builder.finallies.push(function(){return O.Func(e,r,[],[],t())}),this.nodes.push(function(){return O.Call(e,O.Access(e,n.builder.pendingFinalliesIdent,"push"),[r])}),this},n.runPendingFinally=function(e){var t;if(t=this,"object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));return this.nodes.push(function(){return O.Call(e,O.Call(e,O.Access(e,t.builder.pendingFinalliesIdent,"pop")))}),this},n.enterTryCatch=function(e){var t;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));return t=this.noop(e),this.builder.enterTryCatch(t),t},n.exitTryCatch=function(e,t,n){var r;if("object"!=typeof e||null===e)throw TypeError("Expected pos to be an Object, got "+D(e));if("function"!=typeof t)throw TypeError("Expected tIdent to be a Function, got "+D(t));if("function"!=typeof n)throw TypeError("Expected tPostState to be a Function, got "+D(n));return this.goto(e,n),r=this.noop(e),this.builder.exitTryCatch(r,t),r},e}(),R=function(){function e(t,r,o){var a,s;if(a=this instanceof e?this:b(n),"object"!=typeof t||null===t)throw TypeError("Expected pos to be an Object, got "+D(t));if(a.pos=t,!(r instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(r));if(a.scope=r,"function"!=typeof o)throw TypeError("Expected hasGeneratorNode to be a Function, got "+D(o));return a.hasGeneratorNode=o,a.currentCatch=[],a.redirects=q(),a.start=U(a),a.stop=U(a).add(function(){return O.Return(t,O.Obj(t,[O.Obj.Pair(t,"done",O.Const(t,!0)),O.Obj.Pair(t,"value",O.Const(t,void 0))]))}),a.statesOrder=[a.start],a.stateIdent="undefined"!=typeof stateIdent&&null!==stateIdent?stateIdent:r.reserveIdent(t,"state",z.number),a.pendingFinalliesIdent=r.reserveIdent(t,"finallies",z.undefined["function"]().array()),s=r.clone(!1),a.receivedIdent=s.reserveIdent(t,"received",z.any),s.markAsParam(a.receivedIdent),a.finallies=[],a.catches=[],a}function t(e){var t,n,r,o,a,s,i;for(s=[],i=-1/0,o=-1,t=M(e),n=0,a=t.length;a>n;++n)r=t[n],r!==o+1&&(-1!==o&&s.push({start:i,finish:o}),i=r),o=r;return-1!==o&&s.push({start:i,finish:o}),s}var n;return n=e.prototype,e.displayName="GeneratorBuilder",n.addRedirect=function(e,t){if(!(e instanceof U))throw TypeError("Expected fromState to be a "+A(U)+", got "+D(e));if("function"!=typeof t)throw TypeError("Expected toState to be a Function, got "+D(t));this.redirects.set(e,t)},n.getRedirect=function(e){var t,n;if(!(e instanceof U))throw TypeError("Expected fromState to be a "+A(U)+", got "+D(e));if(n=this.redirects.get(e),null==n)return e;if(n instanceof U)return n;if("function"==typeof n){if(t=n(),!(t instanceof U))throw Error("Expected a GeneratorState, got "+D(n));return t=this.getRedirect(t),this.redirects.set(e,t),t}throw Error("Unknown value in redirects: "+D(n))},n._calculateCaseIds=function(){var e,t,n,r,o,a;for(o=-1,r=this.caseIds=q(),e=M(this.statesOrder),t=0,n=e.length;n>t;++t)a=e[t],this.redirects.has(a)||r.set(a,++o)},n.caseId=function(e){var t;if(!(e instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(e));if(t=this.caseIds,null==t)throw Error("_calculate-case-ids must be called first");if(!t.has(e))throw Error("case-ids does not contain state");return t.get(e)},n.enterTryCatch=function(e){if(!(e instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(e));this.currentCatch.push([e])},n.exitTryCatch=function(e,t){var n,r;if(!(e instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(e));if("function"!=typeof t)throw TypeError("Expected tIdent to be a Function, got "+D(t));if(0===this.currentCatch.length)throw Error("Unable to exit-try-catch without first using enter-try-catch");n=this.currentCatch.pop(),r=n.indexOf(e),-1!==r&&n.splice(r,1),this.catches.push({tryStates:n,tIdent:t,catchState:e})},n.create=function(){var e,n,r,o,a,s,i,l,c,u,f,p;if(e=this,this.currentCatch.length)throw Error("Cannot create a generator if there are stray catches");return this.statesOrder.push(this.stop),this._calculateCaseIds(),n=[O.Assign(this.pos,this.stateIdent,O.Const(this.pos,this.start.caseId()))],o=this.scope.reserveIdent(this.pos,"close",z.undefined["function"]()),this.scope.markAsFunction(o),0===this.finallies.length?(this.scope.removeVariable(this.pendingFinalliesIdent),n.push(O.Func(this.pos,o,[],[],O.Block(this.pos,[O.Assign(this.pos,this.stateIdent,this.stop.caseId())])))):(n.push(O.Assign(this.pos,this.pendingFinalliesIdent,O.Arr(this.pos))),n.push.apply(n,function(){var t,n,r,o,a;for(t=[],n=M(e.finallies),r=0,o=n.length;o>r;++r)a=n[r],t.push(a());return t}()),i=this.scope.clone(!1),s=i.reserveIdent(this.pos,"f",z.undefined["function"]().union(z.undefined)),n.push(O.Func(this.pos,o,[],i.getVariables(),O.Block(this.pos,[O.Assign(this.pos,this.stateIdent,this.stop.caseId()),O.Assign(this.pos,s,O.Call(this.pos,O.Access(this.pos,this.pendingFinalliesIdent,"pop"))),O.If(this.pos,s,O.TryFinally(this.pos,O.Call(this.pos,s),O.Call(this.pos,o)))])))),a=this.scope.reserveIdent(this.pos,"e",z.any),r=this.catches,u=this.stateIdent,f=this.scope.reserveIdent(this.pos,"step",z["function"]),l=this.scope.reserveIdent(this.pos,"send",z["function"]),p=this.scope.reserveIdent(this.pos,"throw",z["function"]),n.push(O.Func(this.pos,f,[this.receivedIdent],[],O.While(this.pos,!0,O.Switch(this.pos,u,function(){var t,n,r,o,a,s,i,l,c,u,f;for(t=[],n=M(e.statesOrder),a=0,i=n.length;i>a;++a)if(u=n[a],!e.redirects.has(u)){for(r=[],o=M(u.nodes),s=0,l=o.length;l>s;++s)f=o[s],r.push(f());if(c=r,0===c.length)throw Error("Found state with no nodes in it");t.push(O.Switch.Case(c[0].pos,O.Const(c[0].pos,u.caseId()),O.Block(c[0].pos,c)))}return t}(),O.Throw(this.pos,O.Call(this.pos,O.Ident(this.pos,"Error"),[O.Binary(this.pos,"Unknown state: ","+",u)])))))),n.push(O.Func(this.pos,p,[a],[],function(){var n,s,i,l;for(l=O.Block(e.pos,[O.Call(e.pos,o,[]),O.Throw(e.pos,a)]),n=M(r),i=n.length,s=function(e){var n,r,o,s,i,c,f,p,d;for(i=this,c=e.tIdent(),this.scope.addVariable(c),n=[],r=M(e.tryStates),o=0,s=r.length;s>o;++o)f=r[o],this.redirects.has(f)||n.push(f.caseId());return p=n,p.sort(w(2,function(e,t){return g(e,t)})),d=t(p),l=O.If(this.pos,O.Or.apply(O,[this.pos].concat(function(){var e,t,n,r,o,a,s;for(e=[],t=M(d),n=0,r=t.length;r>n;++n)s=(o=t[n]).start,a=o.finish,s===-1/0?0===a?e.push(O.Binary(i.pos,u,"===",O.Const(i.pos,0))):e.push(O.Binary(i.pos,u,"<=",O.Const(i.pos,a))):a===s?e.push(O.Binary(i.pos,u,"===",O.Const(i.pos,s))):a===B(s)+1?e.push(O.Or(i.pos,O.Binary(i.pos,u,"===",O.Const(i.pos,s)),O.Binary(i.pos,u,"===",O.Const(i.pos,a)))):e.push(O.And(i.pos,O.Binary(i.pos,u,">=",O.Const(i.pos,s)),O.Binary(i.pos,u,"<=",O.Const(i.pos,a))));return e}())),O.Block(this.pos,[O.Assign(this.pos,c,a),O.Assign(this.pos,u,O.Const(this.pos,e.catchState.caseId()))]),l)};i--;)s.call(e,n[i]);return l}())),c=O.TryCatch(this.pos,O.Return(this.pos,O.Call(this.pos,f,[this.receivedIdent])),a,O.Call(this.pos,p,[a])),n.push(O.Func(this.pos,l,[this.receivedIdent],[],r.length?O.While(this.pos,!0,c):c)),n.push(O.Return(this.pos,O.Obj(this.pos,[O.Obj.Pair(this.pos,"close",o),O.Obj.Pair(this.pos,"iterator",O.Func(this.pos,null,[],[],O.Return(this.pos,O.This(this.pos)))),O.Obj.Pair(this.pos,"next",O.Func(this.pos,null,[],[],O.Return(this.pos,O.Call(this.pos,l,[O.Const(this.pos,void 0)])))),O.Obj.Pair(this.pos,"send",l),O.Obj.Pair(this.pos,"throw",O.Func(this.pos,null,[a],[],O.Block(this.pos,[O.Call(this.pos,p,[a]),O.Return(this.pos,O.Call(this.pos,l,[O.Const(this.pos,void 0)]))])))]))),O.Block(this.pos,n)},e}(),P=function(){function e(e){var t,n;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+D(e));return e.memoized?e:((t=function(){return e&&(n=e(),e=null),n}).memoized=!0,t)}function t(e){var t;return(t=function(){return e}).memoized=!0,t}function n(t,n,o,a,s){var i,l,c;if(!(o instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(o));if("function"!=typeof a)throw TypeError("Expected tNode to be a Function, got "+D(a));if(null==s)s=f;else if("function"!=typeof s)throw TypeError("Expected cleanup to be a Function, got "+D(s));return"function"==typeof t?(l=e(t),{state:o.add(function(){var e;return e=a(),O.Assign(e.pos,l(),e)}),tNode:l,cleanup:s}):t?(a=e(a),c=e(function(){return n.reserveIdent(a().pos,"tmp",z.any)}),i=e(function(){return a()===o.builder.receivedIdent||r(a())}),{state:o.add(function(){var e;return e=a(),i()?O.Assign(e.pos,c(),e):e}),tNode:function(){return i()?c():a()},cleanup:function(){return s(),i()?n.releaseIdent(c()):void 0}}):{state:o,tNode:a,cleanup:s}}function o(n,r,o,a,s){return null==a&&(a="tmp"),null==s&&(s=z.any),"function"==typeof n?e(n):t(r.reserveIdent(o,a,s))}function a(e,t,n){if("function"!=typeof n)throw TypeError("Expected tTmp to be a Function, got "+D(n));return"function"==typeof e?function(){var r,o;return o=e(),r=n(),o===r?t.releaseIdent(r):void 0}:function(){return t.releaseIdent(n())}}function s(e,t,n,r,s){var l,c,d,_,h,m;if(!(r instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(r));for(m=o(s,n,e,"arr",z.array),h=null,l=M(t),_=0,d=l.length,c=function(o,a){var s;return h||r.hasGeneratorNode(o)?(null==h&&(h=p(e,N.call(t,0,a),n,!0,!1),r=r.add(function(){return O.Assign(e,m(),h())})),o instanceof G.Spread?(s=i(o.node,n,r,!1),r=s.state.add(function(){var e;return e=m(),n.addHelper("__toArray"),O.Call(u(o),O.Access(u(o),e,O.Const(u(o),"push"),O.Const(u(o),"apply")),[e,O.Call(u(o),O.Ident(u(o),"__toArray"),[v(s.tNode(),s.cleanup())])])})):(s=i(o,n,r,!1),r=s.state.add(function(){return O.Call(u(o),O.Access(u(o),m(),O.Const(u(o),"push")),[v(s.tNode(),s.cleanup())])}))):void 0};d>_;++_)c.call(this,l[_],_);return null==h?{state:r,tNode:p(e,t,n,!0,!1),cleanup:f}:{state:r,tNode:m,cleanup:a(s,n,m)}}function i(e,t,r,o){var a;if(!(e instanceof G))throw TypeError("Expected node to be a "+A(G)+", got "+D(e));if(!(t instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(t));if(!(r instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(r));if(null==o)o=!1;else if("boolean"!=typeof o&&"function"!=typeof o)throw TypeError("Expected assignTo to be one of Boolean or Function, got "+D(o));if(a=e.constructor.cappedName,r.hasGeneratorNode(e)){if(T.call(l,a))return l[a](e,t,r,o);throw Error("Unknown expression type: "+D(e))}return n(o,t,r,d(e,t,"expression"))}var l,c;return l={Access:function(e,t,r,o){var a,s;return s=i(e.parent,t,r,!0),a=i(e.child,t,s.state,!1),n(o,t,a.state,function(){var t;return t=O.Access(u(e),s.tNode(),a.tNode()),s.cleanup(),a.cleanup(),t})},Array:function(e,t,n,r){return s(u(e),e.elements,t,n,r)},Assign:function(e,t,r,o){var a,s,l,c,p;return p=e.left,p instanceof G.Access?(l=i(p.parent,t,r,!0),a=i(p.child,t,l.state,!0),s={state:a.state,tNode:function(){return O.Access(u(p),l.tNode(),a.tNode())},cleanup:function(){return l.cleanup(),a.cleanup()}}):s={state:r,tNode:d(e.left,t,"leftExpression"),cleanup:f},c=i(e.right,t,s.state,s.tNode),n(o,t,c.state,c.tNode,function(){return s.cleanup(),c.cleanup()})},Binary:function(){var t;return t={"&&":function(t,n,r,o){var a,s,l,c,f;return a=i(t.left,n,r,o||!0),c=e(a.tNode),a.state.gotoIf(u(t),c,function(){return f},function(){return l}),f=a.state.branch(),s=i(t.right,n,f,c),s.state.goto(u(t),function(){return l}),l=a.state.branch(),{tNode:c,state:l,cleanup:function(){return a.cleanup(),s.cleanup()}}},"||":function(t,n,r,o){var a,s,l,c,f;return a=i(t.left,n,r,o||!0),c=e(a.tNode),a.state.gotoIf(u(t),c,function(){return l},function(){return f}),f=a.state.branch(),s=i(t.right,n,f,c),s.state.goto(u(t),function(){return l}),l=a.state.branch(),{tNode:c,state:l,cleanup:function(){return a.cleanup(),s.cleanup()}}}},function(e,r,o,a){var s,l;return T.call(t,e.op)?t[e.op](e,r,o,a):(s=i(e.left,r,o,!0),l=i(e.right,r,s.state,!1),n(a,r,l.state,function(){return O.Binary(u(e),s.tNode(),(s.cleanup(),e.op),v(l.tNode(),l.cleanup()))}))}}(),Block:function(e,t,n,r){var o,a,s,l,c;for(o=M(e.nodes),a=0,s=o.length;s>a;++a)if(c=o[a],l=i(c,t,n,a===s-1&&r),n=l.state,a===s-1)return l;throw Error("Unreachable state")},Call:function(e,t,r,o){var a,l,c,p,d,_;return c=i(e.func,t,r,!0),d=e.isApply,_=e.isNew,a=e.args,!d||0!==a.length&&a[0]instanceof G.Spread?(l=s(u(e),a,t,c.state),n(o,t,l.state,function(){var n,r;return r=c.tNode(),n=l.tNode(),c.cleanup(),l.cleanup(),d?O.Call(u(e),O.Access(u(e),r,"apply"),[O.Access(u(e),n,O.Const(u(e),0)),O.Call(u(e),O.Access(u(e),n,O.Const(u(e),"slice")),[O.Const(u(e),1)])]):_?(t.addHelper("__new"),O.Call(u(e),O.Access(u(e),O.Ident(u(e),"__new"),O.Const(u(e),"apply")),[r,n])):n instanceof O.Arr?O.Call(u(e),O.Access(u(e),r,"call"),[r instanceof O.Binary&&"."===r.op?r.left:O.Const(u(e),void 0)].concat(M(n.elements))):O.Call(u(e),O.Access(u(e),r,"apply"),[r instanceof O.Binary&&"."===r.op?r.left:O.Const(u(e),void 0),n])})):(p=0===a.length?{state:c.state,tNode:function(){return O.Const(u(e),void 0)},cleanup:f}:i(a[0],t,c.state,!0),l=s(u(e),N.call(a,1),t,p.state),n(o,t,l.state,function(){var t,n,r;return n=c.tNode(),r=p.tNode(),t=l.tNode(),c.cleanup(),p.cleanup(),l.cleanup(),t instanceof O.Arr?O.Call(u(e),O.Access(u(e),n,"call"),[r].concat(M(t.elements))):O.Call(u(e),O.Access(u(e),n,"apply"),[r,t])}))},EmbedWrite:function(e,t,r,o){var a;return a=i(e.text,t,r,!1),n(o,t,a.state,function(){return O.Call(u(e),O.Ident(u(e),"write"),[a.tNode()].concat(e.escape?[O.Const(u(e),!0)]:[]))},a.cleanup)},Eval:function(e,t,r,o){var a;return a=i(e.code,t,r,!1),n(o,t,a.state,function(){return O.Eval(u(e),a.tNode(),a.cleanup)})},If:function(e,t,r,s){var l,c,f,p,_,h,m,y,g,b;return _=i(e.test,t,r,r.hasGeneratorNode(e.test)),r=_.state,r.hasGeneratorNode(e.whenTrue)||r.hasGeneratorNode(e.whenFalse)?(r.gotoIf(u(e),function(){var e;return e=_.tNode(),_.cleanup(),e},function(){return b},function(){return g}),h=o(s,t,u(e)),b=r.branch(),f=i(e.whenTrue,t,b,h),f.state.goto(u(e.whenTrue),function(){return p}),g=r.branch(),c=i(e.whenFalse,t,g,h),c.state.goto(u(e.whenFalse),function(){return p}),p=r.branch(),l=a(s,t,h),{state:p,tNode:h,cleanup:function(){return f.cleanup(),c.cleanup(),l()}}):(y=d(e.whenTrue,t,"expression"),m=d(e.whenFalse,t,"expression"),n(s,t,r,function(){return O.If(u(e),_.tNode(),(_.cleanup(),y()),m())}))},Regexp:function(e,t,r,o){var a;
return a=i(e.source,t,r,!1),n(o,t,r,function(){var t;return t=a.tNode(),t.isConst()?O.Regex(u(e),String(t.constValue()),e.flags):O.Call(u(e),O.Ident(u(e),"RegExp"),[t,O.Const(u(e),flags)])},a.cleanup)},TmpWrapper:function(e,t,r,o){var a;return a=i(e.node,t,r,!1),n(o,t,a.state,a.tNode,function(){var n,r,o;for(a.cleanup(),n=M(e.tmps),r=n.length;r--;)o=n[r],t.releaseTmp(o)})},Unary:function(e,t,r,o){var a;return a=i(e.node,t,r,!1),n(o,t,a.state,function(){return O.Unary(u(e),e.op,v(a.tNode(),a.cleanup()))})},Yield:function(e,t,r,o){var a;return a=i(e.node,t,r,!1),r=r.yield(u(e),a.tNode),n(o,t,r,function(){return r.builder.receivedIdent},a.cleanup)}},c={Block:function(e,t,n,r,o){var a,s,i,l,c;if(null!=e.label)throw Error("Not implemented: block with label in generator");for(l=n,a=M(e.nodes),s=0,i=a.length;i>s;++s)c=a[s],l=P(c,t,l,r,o);return l},Break:function(e,t,n,r){if(null!=e.label)throw Error("Not implemented: break with label in a generator");if(null==r)throw Error("break found outside of a loop or switch");return n.goto(u(e),r),n},Continue:function(e,t,n,r,o){if(null!=e.label)throw Error("Not implemented: break with label in a generator");if(null==o)throw Error("continue found outside of a loop");return n.goto(u(e),o),n},For:function(e,t,n){var r,o,a,s,l;if(null!=e.label)throw Error("Not implemented: for with label in generator");return null==e.init||e.init instanceof G.Nothing||(n=P(e.init,t,n)),n.goto(u(e),function(){return l}),l=n.branch(),o=i(e.test,t,l,n.hasGeneratorNode(e.test)),l.gotoIf(u(e.test),function(){var e;return e=o.tNode(),o.cleanup(),e},function(){return r},function(){return a}),r=n.branch(),P(e.body,t,r,function(){return a},function(){return s}).goto(u(e.body),function(){return s||l}),s=null,null==e.step||e.step instanceof G.Nothing||(s=n.branch(),P(e.step,t,s).goto(u(e.step),function(){return l})),a=n.branch()},ForIn:function(t,n,r){var o,a,s,l,c,f,p,_,h,m;if(null!=t.label)throw Error("Not implemented: for-in with label in generator");return m=d(t.key,n,"leftExpression"),s=i(t.object,n,r,!1),r=s.state,c=n.reserveIdent(u(t),"keys",z.string.array()),a=e(function(){var e;if(e=m(),!(e instanceof O.Ident))throw Error("Expected an Ident for a for-in key");return n.addVariable(e,z.string),e}),l=n.reserveIdent(u(t),"i",z.number),f=n.reserveIdent(u(t),"len",z.number),n.addHelper("__allkeys"),r=r.add(function(){return O.Block(u(t),[O.Assign(u(t),c,O.Call(u(t),O.Ident(u(t),"__allkeys"),[v(s.tNode(),s.cleanup())])),O.Assign(u(t),l,0),O.Assign(u(t),f,O.Access(u(t),c,"length"))])}),r.goto(u(t),function(){return h}),h=r.branch(),h.gotoIf(u(t),function(){return O.Binary(u(t),l,"<",f)},function(){return o},function(){return p}),o=h.branch(),r=o.add(function(){return O.Assign(u(t),a(),O.Access(u(t),c,l))}),P(t.body,n,r,function(){return p},function(){return _}).goto(u(t.body),function(){return _}),_=o.branch(),_.add(function(){return O.Unary(u(t),"++",l)}).goto(u(t),function(){return h}),p=_.branch()},If:function(e,t,n,r,o){var a,s,l,c,f,p;return s=i(e.test,t,n,n.hasGeneratorNode(e.test)),n=s.state,n.hasGeneratorNode(e.whenTrue)||n.hasGeneratorNode(e.whenFalse)?(n.gotoIf(u(e),function(){var e;return e=s.tNode(),s.cleanup(),e},function(){return p||a},function(){return f||a}),!e.whenTrue||e.whenTrue instanceof G.Nothing||(p=n.branch()),p&&P(e.whenTrue,t,p,r,o).goto(u(e.whenTrue),function(){return a}),!e.whenFalse||e.whenFalse instanceof G.Nothing||(f=n.branch()),f&&P(e.whenFalse,t,f,r,o).goto(u(e.whenFalse),function(){return a}),a=n.branch()):(c=d(e.whenTrue,t,"statement"),l=d(e.whenFalse,t,"statement"),n.add(function(){return O.If(u(e),s.tNode(),(s.cleanup(),c()),l())}))},Return:function(e,t,n){var r,o;return o=u(e),e.node.isConst()&&void 0===e.node.constValue()?(n["return"](u(e)),n):(r=i(e.node,t,n,!1),n=r.state,n["return"](u(e),function(){var e;return e=r.tNode(),r.cleanup(),e}),n)},Switch:function(e,t,n,r,o){var a,s,l,c,f,p,_,h,m,y,g;if(null!=e.label)throw Error("Not implemented: switch with label in generator");for(h=i(e.node,t,n,!1),c=[],g=[],h.state.add(function(){return O.Switch(u(e),h.tNode(),function(){var e,t,n,r;for(e=[],t=0,n=g.length;n>t;++t)r=g[t],e.push(r());return e}(),p())}),h.state.add(function(){return O.Break(u(e))}),a=M(e.cases),m=0,l=a.length,s=function(e,r){var a,s,i,l;if(n.hasGeneratorNode(e.node))throw Error("Cannot use yield in the check of a switch's case");return i=d(e.node,t,"expression"),a=h.state.branch(),c[r]=a,s=P(e.body,t,a,function(){return y},o),s.goto(u(e.node),e.fallthrough?function(){return c[r+1]||y}:function(){return y}),l=a.makeGoto(u(e.node),function(){return a}),g.push(function(){return O.Switch.Case(u(e.node),i(),O.Block(u(e.node),[l(),O.Break(u(e.node))]))})};l>m;++m)s.call(this,a[m],m);return null!=e.defaultCase?(f=h.state.branch(),_=P(e.defaultCase,t,f,function(){return y},o),_.goto(u(e.defaultCase),function(){return y}),p=f.makeGoto(u(e.defaultCase),function(){return f})):p=h.state.makeGoto(u(e),function(){return y}),y=n.branch()},Throw:function(e,t,n){var r;return r=i(e.node,t,n,!1),r.state.add(function(){return O.Throw(u(e),v(r.tNode(),r.cleanup()))})},TmpWrapper:function(e,t,n,r,o){var a,s,i,l;for(i=P(e.node,t,n,r,o),a=M(e.tmps),s=a.length;s--;)l=a[s],t.releaseTmp(l);return i},TryCatch:function(e,t,n,r,o){var a;if(null!=e.label)throw Error("Not implemented: try-catch with label in generator");return n=n.enterTryCatch(u(e)),n=P(e.tryBody,t,n,r,o),n=n.exitTryCatch(u(e.tryBody),d(e.catchIdent,t,"leftExpression",!1),function(){return a}),n=P(e.catchBody,t,n,r,o),n.goto(u(e),function(){return a}),a=n.branch()},TryFinally:function(e,t,n,r,o){if(null!=e.label)throw Error("Not implemented: try-finally with label in generator");if(n.hasGeneratorNode(e.finallyBody))throw Error("Cannot use yield in a finally");return n=n.pendingFinally(u(e),d(e.finallyBody,t,"statement")),n=P(e.tryBody,t,n,r,o),n.runPendingFinally(u(e))},Yield:function(e,t,n){var r;return r=i(e.node,t,n,!1),n.yield(u(e),function(){var e;return e=r.tNode(),r.cleanup(),e})}},function(e,t,n,r,o){var a,s;if(!(e instanceof G))throw TypeError("Expected node to be a "+A(G)+", got "+D(e));if(!(t instanceof W))throw TypeError("Expected scope to be a "+A(W)+", got "+D(t));if(!(n instanceof U))throw TypeError("Expected state to be a "+A(U)+", got "+D(n));if(n.hasGeneratorNode(e)){if(a=e.constructor.cappedName,T.call(c,a)){if(s=c[a](e,t,n,r,o),!(s instanceof U))throw Error("Translated non-GeneratorState from "+D(e)+": "+D(s));return s}return s=i(e,t,n),s.state.add(function(){var e;return e=s.tNode(),s.cleanup(),e})}return n.add(d(e,t,"statement",!1))}}(),J={Access:function(e,t,n,r,o){var a,s;return s=d(e.parent,t,"expression",null,o),a=d(e.child,t,"expression",null,o),function(){return r(O.Access(u(e),s(),a()))}},Args:function(e,t,n,r){return function(){return r(O.Arguments(u(e)))}},Array:function(e,t,n,r,o){var a;return a=p(u(e),e.elements,t,!0,!1,o),function(){return r(a())}},Assign:function(e,t,n,r,o){var s,i,l;if(s=e.op,i=d(e.left,t,"leftExpression"),l=d(e.right,t,"expression",null,o),o&&e.left instanceof G.Ident){if("="===s&&o[e.left.name]&&e.right.isConst()&&void 0===e.right.constValue())return function(){return O.Noop(u(e))};o[e.left.name]=!1}return function(){var o,c,f;return c=i(),f=l(),"="===s&&"topStatement"===n&&c instanceof O.Ident&&f instanceof O.Func&&null==f.name&&t.hasOwnVariable(c)&&!t.isVariableMutable(c)?(t.markAsFunction(c),o=O.Func(u(e),c,f.params,f.variables,f.body,f.declarations),r!==a?O.Block(u(e),[o,r(c)]):o):r(O.Binary(u(e),c,s,f))}},Binary:function(e,t,n,r,o){var a,s;return a=d(e.left,t,"expression",null,o),s=d(e.right,t,"expression",null,o),function(){return r(O.Binary(u(e),a(),e.op,s()))}},Block:function(e,t,n,r,o){var a,s;return a=e.label&&d(e.label,t,"label"),s=_(e.nodes,t,n,r,o),function(){return O.Block(u(e),function(){var e,t,n,r,o;for(e=[],t=M(s),n=0,r=t.length;r>n;++n)o=t[n],e.push(o());return e}(),"function"==typeof a?a():void 0)}},Break:function(e,t){var n;return n=e.label&&d(e.label,t,"label"),function(){return O.Break(u(e),"function"==typeof n?n():void 0)}},Call:function(e,t,n,r,o){var a,s,i,l,c,f;return c=d(e.func,t,"expression",null,o),s=e.isApply,i=e.isNew,a=e.args,!s||0!==a.length&&a[0]instanceof G.Spread?(l=p(u(e),a,t,!1,!0,o),function(){var n,o,a,f;return f=c(),a=l(),s?t.maybeCache(a,z.array,(n=!1,function(o,a){if(n)throw Error("Attempted to call function more than once");return n=!0,t.addHelper("__slice"),r(O.Call(u(e),O.Access(u(e),f,"apply"),[O.Access(u(e),o,0),O.Call(u(e),O.Access(u(e),O.Ident(u(e),"__slice"),"call"),[a,O.Const(u(e),1)])]))})):a instanceof O.Arr?r(O.Call(u(e),f,a.elements,i)):i?(t.addHelper("__new"),r(O.Call(u(e),O.Access(u(e),O.Ident(u(e),"__new"),O.Const(u(e),"apply")),[f,a]))):f instanceof O.Binary&&"."===f.op?t.maybeCache(f.left,z["function"],(o=!1,function(t,n){if(o)throw Error("Attempted to call function more than once");return o=!0,r(O.Call(u(e),O.Access(u(e),t,f.right,"apply"),[n,a]))})):r(O.Call(u(e),O.Access(u(e),f,"apply"),[O.Const(u(e),void 0),a]))}):(f=0===a.length?function(){return O.Const(u(e),void 0)}:d(a[0],t,"expression",null,o),l=p(u(e),N.call(a,1),t,!1,!0,o),function(){var t,n,o;return n=c(),o=f(),t=l(),t instanceof O.Arr?r(O.Call(u(e),O.Access(u(e),n,"call"),[o].concat(M(t.elements)))):r(O.Call(u(e),O.Access(u(e),n,"apply"),[o,t]))})},Comment:function(e){return function(){return O.Comment(u(e),e.text)}},Const:function(e,t,n,r){return function(){return r(O.Const(u(e),e.value))}},Continue:function(e,t){var n;return n=e.label&&d(e.label,t,"label"),function(){return O.Continue(u(e),"function"==typeof n?n():void 0)}},Debugger:function(e){return function(){return O.Debugger(u(e))}},Def:function(){throw Error("Cannot have a stray def")},EmbedWrite:function(e,t,n,r,o){var a;return a=d(e.text,t,"expression",null,o),function(){return O.Call(u(e),O.Ident(u(e),"write"),[a()].concat(e.escape?[O.Const(u(e),!0)]:[]))}},Eval:function(e,t,n,r,o){var a;return a=d(e.code,t,"expression",null,o),function(){return r(O.Eval(u(e),a()))}},For:function(e,t,n,r,o){var a,s,i,l,c;return i=e.label&&d(e.label,t,"label"),null!=e.init&&(s=d(e.init,t,"expression",null,o)),null!=e.test&&(c=d(e.test,t,"expression")),null!=e.step&&(l=d(e.step,t,"expression")),a=d(e.body,t,"statement"),function(){return O.For(u(e),"function"==typeof s?s():void 0,"function"==typeof c?c():void 0,"function"==typeof l?l():void 0,a(),"function"==typeof i?i():void 0)}},ForIn:function(e,t,n,r,o){var a,s,i,l;return i=e.label&&d(e.label,t,"label"),s=d(e.key,t,"leftExpression"),l=d(e.object,t,"expression",null,o),a=d(e.body,t,"statement"),function(){var n;if(n=s(),!(n instanceof O.Ident))throw Error("Expected an Ident for a for-in key");return t.addVariable(n,z.string),O.ForIn(u(e),n,l(),a(),"function"==typeof i?i():void 0)}},Function:function(){function e(e){if(!T.call(a,e.constructor.cappedName))throw Error("Unknown type: "+String(e.constructor.cappedName));return a[e.constructor.cappedName](e)}function t(e,t,n){var o;if(o=e.constructor.cappedName,!T.call(r,o))throw Error("Unknown parameter type: "+k(o));return r[o](e,t,n)}var n,r,o,a;return n={Boolean:"boolean",String:"string",Number:"number",Function:"function"},a={Ident:function(e){return T.call(n,e.name)?z[n[e.name]]:z.any},Access:function(){return z.any},TypeUnion:function(e){var t,r,o,a,s;for(a=z.none,t=M(e.types),r=0,o=t.length;o>r;++r)if(s=t[r],s instanceof G.Const)if(null===s.value)a=a.union(z["null"]);else{if(void 0!==s.value)throw Error("Unknown const value for typechecking: "+String(s.value));a=a.union(z.undefined)}else{if(!(s instanceof G.Ident))throw Error("Not implemented: typechecking for non-idents/consts within a type-union");a=a.union(T.call(n,s.name)?z[n[s.name]]:z.any)}return a},TypeFunction:function(){return z["function"]},TypeGeneric:function(t){return"Array"===t.basetype.name?e(t.args[0]).array():"Function"===t.basetype.name?z["function"]:z.any},TypeObject:function(t){var n,r,o,a,s,i,l;for(i={},n=M(t.pairs),r=0,o=n.length;o>r;++r)s=(a=n[r]).key,l=a.value,s instanceof G.Const&&(i[s.value]=e(l));return z.makeObject(i)}},r={Param:function(t,n){var r,o,a,s;if(r=d(t.ident,n,"param")(),o=[],r instanceof O.Binary&&"."===r.op&&r.right instanceof O.Const&&"string"==typeof r.right.value&&(a=O.Ident(r.pos,r.right.value),o.push(O.Binary(r.pos,r,"=",a)),r=a),!(r instanceof O.Ident))throw Error("Expecting param to be an Ident, got "+D(r));return t.asType&&(s=e(t.asType)),n.addVariable(r,s,t.isMutable),n.markAsParam(r),{init:o,ident:r,spread:!!t.spread}}},o=function(){var e;return e={Ident:function(){var e;return e={String:z.string,Number:z.number,Boolean:z.boolean,Function:z["function"],Array:z.array},function(t){if(!T.call(e,t.name))throw Error("Not implemented: custom type "+k(t.name));return e[t.name]}}(),Const:function(e){switch(e.value){case null:return z["null"];case void 0:return z.undefined;default:throw Error("Unexpected const type: "+String(e.value))}},TypeGeneric:function(e,t){var n,r,a,s,i,l,c;for(c=o(e.basetype,t),n=[],r=M(e.args),a=0,s=r.length;s>a;++a)i=r[a],n.push(o(i,t));return l=n,z.generic.apply(z,[c].concat(M(l)))},TypeUnion:function(e){var t,n,r,a,s;for(a=z.none,t=M(e.types),n=0,r=t.length;r>n;++n)s=t[n],a=a.union(o(s));return a}},function(t,n){if(!T.call(e,t.constructor.cappedName))throw Error("Unknown type to translate: "+String(t.constructor.cappedName));return e[t.constructor.cappedName](t,n)}}(),function(e,n,r,o){return function(){var r,a,s,i,l,c,f,p,_,m,y,g,b,w;for(f=n.clone(!!e.bound),g=f,e.generator&&!f.bound&&(f=f.clone(!0)),y=[],c=[],r=M(e.params),l=0,p=r.length;p>l;++l){if(_=r[l],m=t(_,f,!1),m.spread)throw Error("Encountered a spread parameter");y.push(m.ident),c.push.apply(c,M(m.init))}if(b={},s=(a=h(u(e),e.generator,e.autoReturn,f,e.body,b)).body,w=a.wrap,f.releaseTmps(),s=O.Block(u(e.body),M(c).concat([s])),(f.usedThis||e.bound instanceof G)&&(e.bound instanceof G?(i=O.Ident(u(e.body),"_this"),f.addVariable(i),s=O.Block(u(e.body),[O.Assign(u(e.body),i,d(e.bound,n,"expression",null,b)()),s,O.Return(u(e.body),i)])):(f.bound&&(n.usedThis=!0),!f.hasBound&&!e.generator||g.bound||(i=O.Ident(u(e.body),"_this"),f.addVariable(i),s=O.Block(u(e.body),[O.Assign(u(e.body),i,O.This(u(e.body))),s])))),e.curry)throw Error("Expected node to already be curried");return o(w(O.Func(u(e),null,y,f.getVariables(),s,[])))}}}(),Ident:function(){var e;return e={Object:!0,String:!0,Number:!0,Boolean:!0,Function:!0,Array:!0,Math:!0,JSON:!0,Date:!0,RegExp:!0,Error:!0,RangeError:!0,ReferenceError:!0,SyntaxError:!0,TypeError:!0,URIError:!0,escape:!0,unescape:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0},function(t,n,r,o){var a;return a=t.name,n.addHelper(a),function(){var s;return s=O.Ident(u(t),a),!n.options.embedded||T.call(e,a)||"expression"!==r||n.hasVariable(s)||n.macros.hasHelper(a)?o(s):O.Access(u(t),O.Ident(u(t),"context"),O.Const(u(t),a))}}}(),If:function(e,t,n,r,o){var a,s,i,l,c;return a="statement"===n||"topStatement"===n?"statement":n,s=e.label&&d(e.label,t,"label"),i=d(e.test,t,"expression",null,o),c=d(e.whenTrue,t,a,r,o),null!=e.whenFalse&&(l=d(e.whenFalse,t,a,r,o)),function(){return O.If(u(e),i(),c(),"function"==typeof l?l():void 0,"function"==typeof s?s():void 0)}},Nothing:function(e){return function(){return O.Noop(u(e))}},Object:function(e,t,n,r,o){var a,s,i,l,c,f,p,_;for(f=[],_=[],c=[],a=M(e.pairs),s=0,i=a.length;i>s;++s)l=a[s],f.push(d(l.key,t,"expression",null,o)),_.push(d(l.value,t,"expression",null,o)),c.push(l.property);return null!=e.prototype&&(p=d(e.prototype,t,"expression",null,o)),function(){var n,o,a,s,i,l,d,h,m,y,g,b,w,v,x,I;for(o=[],y=[],"function"==typeof p&&(b=p()),s=null!=b?y:o,h=null,i=0,n=f.length;n>i;++i)v=f[i],x=_[i],d=v(),I=x(),g=c[i],d instanceof O.Const&&!g||(s=y),a=s[s.length-1],("get"===g||"set"===g)&&h&&g!==h&&d instanceof O.Const&&a.key instanceof O.Const&&d.value===a.key.value?(a[h]=a.value,a.property=k(h)+k(g),delete a.value,a[g]=I,h=null):(s.push({key:d,value:I,property:g}),("get"===g||"set"===g)&&(h=g));return null!=b?(t.addHelper("__create"),m=O.Call(u(e),O.Ident(u(e),"__create"),[b])):m=O.Obj(u(e),function(){var e,t,n,r,a,s;for(e=[],t=0,n=o.length;n>t;++t)a=(r=o[t]).key,s=r.value,e.push(O.Obj.Pair(a.pos,String(a.value),s));return e}()),0===y.length?r(m):(l=t.reserveIdent(u(e),"o",z.object),w=O.BlockExpression(u(e),[O.Assign(u(e),l,m)].concat(function(){var e,n,r,o,a,s;for(e=[],n=0,r=y.length;r>n;++n)a=y[n],o=a.key,s=a.property,s?(t.addHelper("__defProp"),e.push(O.Call(o.pos,O.Ident(o.pos,"__defProp"),[l,o,"property"===s?a.value:"getset"===s?O.Obj(a.get.pos,[O.Obj.Pair(a.get.pos,"get",a.get),O.Obj.Pair(a.set.pos,"set",a.set),O.Obj.Pair(a.set.pos,"configurable",O.Const(a.set.pos,!0)),O.Obj.Pair(a.set.pos,"enumerable",O.Const(a.set.pos,!0))]):"setget"===s?O.Obj(a.set.pos,[O.Obj.Pair(a.set.pos,"set",a.set),O.Obj.Pair(a.get.pos,"get",a.get),O.Obj.Pair(a.get.pos,"configurable",O.Const(a.get.pos,!0)),O.Obj.Pair(a.get.pos,"enumerable",O.Const(a.get.pos,!0))]):"get"===s?O.Obj(a.value.pos,[O.Obj.Pair(a.value.pos,"get",a.value),O.Obj.Pair(a.value.pos,"configurable",O.Const(a.value.pos,!0)),O.Obj.Pair(a.value.pos,"enumerable",O.Const(a.value.pos,!0))]):"set"===s?O.Obj(a.value.pos,[O.Obj.Pair(a.value.pos,"set",a.value),O.Obj.Pair(a.value.pos,"configurable",O.Const(a.value.pos,!0)),O.Obj.Pair(a.value.pos,"enumerable",O.Const(a.value.pos,!0))]):S(Error("Unknown property type: "+String(s)))]))):e.push(O.Assign(o.pos,O.Access(o.pos,l,o),a.value));return e}(),[l])),t.releaseIdent(l),r(w))}},Regexp:function(e,t,n,r,o){var a;return a=d(e.source,t,"expression",null,o),function(){var t,n;return n=a(),t=e.flags,n.isConst()?r(O.Regex(u(e),String(n.constValue()),t)):r(O.Call(u(e),O.Ident(u(e),"RegExp"),[n,O.Const(u(e),t)]))}},Return:function(e,t,n,r,o){var a;if("statement"!==n&&"topStatement"!==n)throw Error("Expected Return in statement position");return a=d(e.node,t,"expression",null,o),function(){return O.Return(u(e),a())}},Switch:function(e,t,n,r,o){var a,s,i,l,c,f,p,_,h;for(_=e.label&&d(e.label,t,"label"),h=d(e.node,t,"expression",null,o),a=[],s=M(e.cases),i=0,l=s.length;l>i;++i)c=s[i],a.push({pos:u(c.node),tNode:d(c.node,t,"expression",null,o),tBody:d(c.body,t,"statement",null,o),fallthrough:c.fallthrough});return f=a,null!=e.defaultCase&&(p=d(e.defaultCase,t,"statement",null,o)),function(){return O.Switch(u(e),h(),function(){var e,t,n,o,a,s;for(e=[],a=0,s=f.length;s>a;++a)t=f[a],o=t.tNode(),n=t.tBody(),(!t.fallthrough||a===s-1&&defaultCase.isNoop())&&(n=O.Block(t.pos,[r(n),O.Break(n.pos)])),e.push(O.Switch.Case(t.pos,o,n));return e}(),null!=p?r(p()):O.Noop(u(e)),"function"==typeof _?_():void 0)}},Super:function(){throw Error("Cannot have a stray super call")},Tmp:function(e,t,n,r){var o;return o=t.getTmp(u(e),e.id,e.name,e.type()),function(){return r(o)}},TmpWrapper:function(e,t,n,r,o){var a,s,i,l;for(l=d(e.node,t,n,r,o),a=M(e.tmps),s=a.length;s--;)i=a[s],t.releaseTmp(i);return l},This:function(e,t,n,r){return function(){return t.usedThis=!0,r(t.bound?O.Ident(u(e),"_this"):O.This(u(e)))}},Throw:function(e,t,n,r,o){var a;return a=d(e.node,t,"expression",null,o),function(){return O.Throw(u(e),a())}},TryCatch:function(e,t,n,r,o){var a,s,i,l,c;return l=e.label&&d(e.label,t,"label"),c=d(e.tryBody,t,"statement",r,o),a=t.clone(!1),i=d(e.catchIdent,a,"leftExpression"),s=d(e.catchBody,a,"statement",r,o),function(){var n,r;return n=i(),n instanceof O.Ident&&(a.addVariable(n),a.markAsParam(n)),r=O.TryCatch(u(e),c(),n,s(),"function"==typeof l?l():void 0),x(t.variables,a.variables),r}},TryFinally:function(e,t,n,r,o){var a,s,i;return s=e.label&&d(e.label,t,"label"),i=d(e.tryBody,t,"statement",r,o),a=d(e.finallyBody,t,"statement",null,o),function(){return O.TryFinally(u(e),i(),a(),"function"==typeof s?s():void 0)}},Unary:function(e,t,n,r,o){var a,s;return o&&("++"===(a=e.op)||"--"===a||"++post"===a||"--post"===a)&&e.node instanceof G.Ident&&(o[e.node.name]=!1),s=d(e.node,t,"expression",null,o),function(){return r(O.Unary(u(e),e.op,s()))}},Var:function(e,t,n,r,o){var a;return o&&e.ident instanceof G.Ident&&!T.call(o,e.ident.name)&&(o[e.ident.name]=!0),a=d(e.ident,t,"leftExpression",r),function(){var n;return n=a(),t.addVariable(n,z.any,e.isMutable),O.Noop(u(e))}}},e.exports=function(e,t,n){var r,o,a,s;if(!(t instanceof V))throw TypeError("Expected macros to be a "+A(V)+", got "+D(t));null==n&&(n={}),s=(new Date).getTime();try{a=W(n,t,!1),o=m(e,a),a.releaseTmps()}catch(i){if("undefined"!=typeof callback&&null!==callback)return callback(i);throw i}return r=(new Date).getTime(),"function"==typeof n.progress&&n.progress("translate",B(r)-B(s)),{node:o,time:B(r)-B(s)}},e.exports.defineHelper=function(e,t,n,r,o){var a,s,i;if(!(e instanceof V))throw TypeError("Expected macros to be a "+A(V)+", got "+D(e));if(!(r instanceof z))throw TypeError("Expected type to be a "+A(z)+", got "+D(r));if(i=W({},e,!1),"string"==typeof t)s=O.Ident(c(0,0),t);else{if(!(t instanceof G.Ident))throw TypeError("Expecting name to be a String or Ident, got "+D(t));s=d(t,i,"leftExpression")()}if(!(s instanceof O.Ident))throw Error("Expected name to be an Ident, got "+D(s));if(n instanceof j)a=n;else{if(!(n instanceof G))throw TypeError("Expected value to be a parser or ast Node, got "+D(n));a=d(n,i,"expression")()}return null==o&&(o=i.getHelpers()),e.addHelper(s.name,a,r,o),{helper:a,dependencies:o}}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./gorilla"]=function(){var e={exports:this},n=this;return function(e){"use strict";function r(e){var t,n,r,o,a;for(o={parseTime:0,macroExpandTime:0,reduceTime:0,macros:e[0].macros,result:[]},t=h(e),n=0,r=t.length;r>n;++n)a=t[n],o.parseTime+=u(a.parseTime),o.macroExpandTime+=u(a.macroExpandTime),o.reduceTime+=u(a.reduceTime),o.result.push(a.result);return o}function o(n,r){var o,a,s,i,l,c,u,p,d,h,m,y,g;if("function"==typeof t&&null!=(l=t("vm"))&&(y=l.Script),y){if(m=y.createContext(),m.global=m.root=m.GLOBAL=m,null!=r.sandbox)if(r.sandbox instanceof m.constructor)m=r.sandbox;else{i=r.sandbox;for(p in i)f.call(i,p)&&(g=i[p],m[p]=g)}else for(p in e)f.call(e,p)&&(g=e[p],m[p]=g);if(m.__filename=r.filename||"eval",m.__dirname=I.dirname(m.__filename),!m.module&&!m.require)for(d=t("module"),s=m.module=new d(r.modulename||"eval"),c=m.require=function(e){return d._load(e,s)},s.filename=m.__filename,o=Object.getOwnPropertyNames(t),a=o.length;a--;){h=o[a];try{c[h]=t[h]}catch(b){}}if(r.includeGlobals)for(p in e)!f.call(e,p)||p in m||(m[p]=e[p]);return y.runInContext(n,m)}return u=Function("return "+_(n)),u()}var a,s,l,c,u,f,p,d,_,h,m,y,g,b,w,v,x,I,E;a=function(){function e(){function t(e,t){var a;n&&(a=n,n=null,r=e,o=t,a.length&&E(function(){var e,t;for(t=0,e=a.length;e>t;++t)a[t]()}))}var n,r,o;return r=!1,o=null,n=[],{promise:{then:function(t,a,s){function i(){var e,n;try{e=r?a:t,"function"==typeof e?(n=e(o),n&&"function"==typeof n.then?n.then(c,f,s):c(n)):(r?f:c)(o)}catch(i){f(i)}}var l,c,u,f;return s!==!0&&(s=void 0),u=(l=e()).promise,c=l.fulfill,f=l.reject,n?n.push(i):s?i():E(i),u},sync:function(){var e,t;switch(t=0,e=0,this.then(function(n){return t=1,e=n},function(n){return t=2,e=n},!0),t){case 0:throw Error("Promise did not execute synchronously");case 1:return e;case 2:throw e;default:throw Error("Unknown state")}}},fulfill:function(e){t(!1,e)},reject:function(e){t(!0,e)}}}return e.fulfilled=function(t){var n;return n=e(),n.fulfill(t),n.promise},e.rejected=function(t){var n;return n=e(),n.reject(t),n.promise},e}(),s=function(e,t){function n(n,s){var i;try{i=e[n](s)}catch(l){return a.rejected(l)}return i.done?a.fulfilled(i.value):i.value.then(r,o,t)}function r(e){return n("send",e)}function o(e){return n("throw",e)}if("object"!=typeof e||null===e)throw TypeError("Expected generator to be an Object, got "+y(e));if("function"!=typeof e.send)throw TypeError("Expected generator.send to be a Function, got "+y(e.send));if("function"!=typeof e["throw"])throw TypeError("Expected generator.throw to be a Function, got "+y(e["throw"]));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected allowSync to be a Boolean, got "+y(t));return r(void 0)},l="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),c=function(e,t){var n;if(n=typeof e,"number"!==n&&"string"!==n)throw TypeError("Cannot compare a non-number/string: "+n);if(n!==typeof t)throw TypeError("Cannot compare elements of different types: "+n+" vs "+typeof t);return t>=e},u=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+y(e));return e},f=Object.prototype.hasOwnProperty,p=function(e,t){var n;if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected allowSync to be a Boolean, got "+y(t));return"function"==typeof e?(n=function(){return s(e.apply(this,arguments))},n.sync=function(){return s(e.apply(this,arguments),!0).sync()},n):s(e,t)},d=Array.prototype.slice,_=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+y(e))},h=function(e){if(null==e)throw TypeError("Expected an object, got "+y(e));return l(e)?e:"string"==typeof e?e.split(""):d.call(e)},m=function(e,t,n){var r;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+y(e));return r=a(),e.apply(t,h(n).concat([function(e,t){null!=e?r.reject(e):r.fulfill(t)}])),r.promise},y=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),E="function"==typeof e.setImmediate?e.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var e;return e=process.nextTick,function(t){var n;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+y(t));return n=d.call(arguments,1),n.length?e(function(){t.apply(void 0,h(n))}):e(t)}}():function(e){var t;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+y(e));return t=d.call(arguments,1),t.length?setTimeout(function(){e.apply(void 0,h(t))},0):setTimeout(e,0)},x=t("./parser"),v=t("os"),b=t("fs"),I=t("path"),n.version="0.7.7",n.ParserError=x.ParserError,n.MacroError=x.MacroError,t.extensions?t.extensions[".gs"]=function(e,t){var r;return r=n.compileSync(b.readFileSync(t,"utf8"),{filename:t}),e._compile(r.code,t)}:t.registerExtension&&t.registerExtension(".gs",function(e){return n.compileSync(e,{filename:filename})}),g=function(){function e(e,t){var n,r;if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+y(e));if(null==t)t=!1;else if("boolean"!=typeof t)throw TypeError("Expected sync to be a Boolean, got "+y(t));return f.call(o,e)&&(r=o[e]),null!=r?t?r:a.fulfilled(r):t?l.sync(e,!0):null==(n=s[e])?s[e]=l(e):n}var t,r,o,s,i,l;return o={},"undefined"!=typeof __filename&&null!==__filename&&(i=b.realpathSync(__filename)),null!=i&&(r=function(e){return I.join(I.dirname(i),"../src/"+_(e)+"prelude.gs")}),null!=v&&(t=function(e){return I.join(v.tmpDir(),"gs-"+_(e)+"prelude-"+_(n.version)+".cache")}),s={},l=p(function(e,n){function a(){f=30}function i(a){for(;;)switch(f){case 0:if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+y(e));I=r(e),f=n?1:2;break;case 1:E=b.statSync(I),f=4;break;case 2:return++f,{done:!1,value:m(b.stat,b,[I])};case 3:E=a,++f;case 4:w=t(e),v=void 0,++f;case 5:f=n?6:7;break;case 6:v=b.statSync(w),f=10;break;case 7:return++f,{done:!1,value:m(b.stat,b,[w])};case 8:v=a,f=10;break;case 9:if("ENOENT"!==i.code)throw i;++f;case 10:h=void 0,f=v&&c(E.mtime.getTime(),v.mtime.getTime())?11:19;break;case 11:f=n?12:13;break;case 12:p=b.readFileSync(w("utf8")),f=15;break;case 13:return++f,{done:!1,value:m(b.readFile,b,[w,"utf8"])};case 14:p=a,++f;case 15:_=!1;try{h=o[e]=x.deserializePrelude(p)}catch(i){if(i instanceof ReferenceError)throw i;console.error("Error deserializing prelude, reloading. "+String(i)),_=!0}f=_?16:19;break;case 16:f=n?17:18;break;case 17:b.unlinkSync(w),f=19;break;case 18:return++f,{done:!1,value:m(b.unlink,b,[w])};case 19:f=null==h?20:29;break;case 20:f=n?21:22;break;case 21:g=b.readFileSync(I,"utf8"),f=24;break;case 22:return++f,{done:!1,value:m(b.readFile,b,[I,"utf8"])};case 23:g=a,++f;case 24:f=n?25:26;break;case 25:h=o[e]=x.sync(g,null,{serializeMacros:!0,sync:!0}),f=28;break;case 26:return++f,{done:!1,value:x(g,null,{serializeMacros:!0})};case 27:o[e]=a,h=o[e],++f;case 28:b.writeFile(w,h.macros.serialize(),"utf8",function(){}),++f;case 29:return delete s[e],++f,{done:!0,value:h};case 30:return{done:!0,value:void 0};default:throw Error("Unknown state: "+f)}}function l(e){if(!(f>=5&&8>=f))throw a(),e;d=e,f=9}function u(e){for(;;)try{return i(e)}catch(t){l(t)}}var u,f,i,l,p,d,_,h,g,w,v,I,E;return f=0,{close:a,iterator:function(){return this},next:function(){return u(void 0)},send:u,"throw":function(e){return l(e),u(void 0)}}}),e.serialized=p(function(n){function r(){i=3}function o(r){for(;;)switch(i){case 0:if("string"!=typeof n)throw TypeError("Expected lang to be a String, got "+y(n));return++i,{done:!1,value:e(n)};case 1:return++i,{done:!1,value:m(b.readFile,b,[t(n),"utf8"])};case 2:return++i,{done:!0,value:r};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function a(e){throw r(),e}function s(e){try{return o(e)}catch(t){a(t)}}var s,i,o,a;return i=0,{close:r,iterator:function(){return this},next:function(){return s(void 0)},send:s,"throw":function(e){return a(e),s(void 0)}}}),n.withPrelude=function(e,t){if("string"!=typeof e)throw TypeError("Expected lang to be a String, got "+y(e));if("object"!=typeof t||null===t)throw TypeError("Expected serializedPrelude to be an Object, got "+y(t));return o[e]=x.deserializePrelude(t),this},e}(),n.getSerializedPrelude=g.serialized,n.parse=p(function(e,t){function n(){s=12}function r(n){for(;;)switch(s){case 0:null==t&&(t={}),c=t.sync,s=t.macros?1:2;break;case 1:l=t.macros,s=8;break;case 2:s=t.noPrelude?3:4;break;case 3:l=null,s=8;break;case 4:s=c?5:6;break;case 5:l=g(t.lang||"js",!0).macros,s=8;break;case 6:return++s,{done:!1,value:g(t.lang||"js")};case 7:i=n,l=i.macros,++s;case 8:s=c?9:10;break;case 9:return s=12,{done:!0,value:x.sync(e,l,t)};case 10:return++s,{done:!1,value:x(e,l,t)};case 11:return++s,{done:!0,value:n};case 12:return{done:!0,value:void 0};default:throw Error("Unknown state: "+s)}}function o(e){throw n(),e}function a(e){try{return r(e)}catch(t){o(t)}}var a,s,r,o,i,l,c;return s=0,{close:n,iterator:function(){return this},next:function(){return a(void 0)},send:a,"throw":function(e){return o(e),a(void 0)}}}),n.parseSync=function(e,t){return null==t&&(t={}),t.sync=!0,n.parse.sync(e,t)},n.getReservedWords=function(e){return null==e&&(e={}),e.noPrelude?x.getReservedWords(null,e):x.getReservedWords(g(e.lang||"js",!0).macros,e)},n.ast=p(function(e,o){function a(){y=15}function s(a){for(;;)switch(y){case 0:null==o&&(o={}),I=(new Date).getTime(),E=o.sync,A="function"==typeof o.translator?o.translator:t("string"==typeof o.translator?o.translator:"./jstranslator"),y=l(e)?1:10;break;case 1:w=[],p=h(e),_=0,m=p.length,++y;case 2:y=m>_?3:9;break;case 3:v=p[_],l(o.filenames)&&(o.filename=o.filenames[i]),b=w.push,d=[],y=E?4:5;break;case 4:g=n.parseSync(v,o),y=7;break;case 5:return++y,{done:!1,value:n.parse(v,o)};case 6:g=a,++y;case 7:d.push(g),b.apply(void 0,d),++y;case 8:++_,y=2;break;case 9:x=r(w),y=14;break;case 10:y=E?11:12;break;case 11:x=n.parseSync(e,o),y=14;break;case 12:return++y,{done:!1,value:n.parse(e,o)};case 13:x=a,++y;case 14:return C=A(x.result,x.macros,o),++y,{done:!0,value:{node:C.node,parseTime:x.parseTime,macroExpandTime:x.macroExpandTime,reduceTime:x.reduceTime,translateTime:C.time,time:u((new Date).getTime())-u(I)}};case 15:return{done:!0,value:void 0};default:throw Error("Unknown state: "+y)}}function c(e){throw a(),e}function f(e){try{return s(e)}catch(t){c(t)}}var p,d,_,m,f,y,s,c,g,b,w,v,x,I,E,C,A;return y=0,{close:a,iterator:function(){return this
},next:function(){return f(void 0)},send:f,"throw":function(e){return c(e),f(void 0)}}}),n.astSync=function(e,t){return null==t&&(t={}),t.sync=!0,n.ast.sync(e,t)},n.compile=p(function(e,t){function r(){i=5}function o(r){for(;;)switch(i){case 0:null==t&&(t={}),f=t.sync,c=(new Date).getTime(),i=f?1:2;break;case 1:p=n.astSync(e,t),i=4;break;case 2:return++i,{done:!1,value:n.ast(e,t)};case 3:p=r,++i;case 4:return l=p.node.compile(t),++i,{done:!0,value:{parseTime:p.parseTime,macroExpandTime:p.macroExpandTime,reduceTime:p.reduceTime,translateTime:p.translateTime,compileTime:l.compileTime,uglifyTime:l.uglifyTime,time:u((new Date).getTime())-u(c),code:l.code}};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+i)}}function a(e){throw r(),e}function s(e){try{return o(e)}catch(t){a(t)}}var s,i,o,a,l,c,f,p;return i=0,{close:r,iterator:function(){return this},next:function(){return s(void 0)},send:s,"throw":function(e){return a(e),s(void 0)}}}),n.compileSync=function(e,t){return null==t&&(t={}),t.sync=!0,n.compile.sync(e,t)},n.eval=p(function(e,t){function r(){l=5}function a(r){for(;;)switch(l){case 0:null==t&&(t={}),d=t.sync,t.eval=!0,t["return"]=!1,l=d?1:2;break;case 1:c=n.compileSync(e,t),l=4;break;case 2:return++l,{done:!1,value:n.compile(e,t)};case 3:c=r,++l;case 4:return p=(new Date).getTime(),f=o(c.code,t),"function"==typeof t.progress&&t.progress("eval",u((new Date).getTime())-u(p)),++l,{done:!0,value:f};case 5:return{done:!0,value:void 0};default:throw Error("Unknown state: "+l)}}function s(e){throw r(),e}function i(e){try{return a(e)}catch(t){s(t)}}var i,l,a,s,c,f,p,d;return l=0,{close:r,iterator:function(){return this},next:function(){return i(void 0)},send:i,"throw":function(e){return s(e),i(void 0)}}}),n.evalSync=function(e,t){return null==t&&(t={}),t.sync=!0,n.eval.sync(e,t)},n.run=p(function(e,r){function o(){l=12}function a(o){for(;;)switch(l){case 0:null==r&&(r={}),p=r.sync,l="undefined"==typeof process?1:5;break;case 1:l=p?2:3;break;case 2:return l=12,{done:!0,value:n.evalSync(e,r)};case 3:return++l,{done:!1,value:n.eval(e,r)};case 4:return l=12,{done:!0,value:o};case 5:u=t.main,u.filename=process.argv[1]=r.filename?b.realpathSync(r.filename):".",u.moduleCache&&(u.moduleCache={}),process.binding("natives").module&&(f=t("module").Module,u.paths=f._nodeModulePaths(I.dirname(r.filename))),l=".gs"!==I.extname(u.filename)||t.extensions?6:11;break;case 6:l=p?7:8;break;case 7:c=n.compileSync(e,r),l=10;break;case 8:return++l,{done:!1,value:n.compile(e,r)};case 9:c=o,++l;case 10:u._compile(c.code,u.filename),l=12;break;case 11:u._compile(e,u.filename),++l;case 12:return{done:!0,value:void 0};default:throw Error("Unknown state: "+l)}}function s(e){throw o(),e}function i(e){try{return a(e)}catch(t){s(t)}}var i,l,a,s,c,u,f,p;return l=0,{close:o,iterator:function(){return this},next:function(){return i(void 0)},send:i,"throw":function(e){return s(e),i(void 0)}}}),n.runSync=function(e,t){return null==t&&(t={}),t.sync=!0,n.run.sync(e,t)},w=n.init=p(function(e){function t(){a=3}function n(){for(;;)switch(a){case 0:null==e&&(e={}),a=e.sync?1:2;break;case 1:g(e.lang||"js",!0),a=3;break;case 2:return++a,{done:!1,value:g(e.lang||"js")};case 3:return{done:!0,value:void 0};default:throw Error("Unknown state: "+a)}}function r(e){throw t(),e}function o(e){try{return n(e)}catch(t){r(t)}}var o,a,n,r;return a=0,{close:t,iterator:function(){return this},next:function(){return o(void 0)},send:o,"throw":function(e){return r(e),o(void 0)}}}),n.initSync=function(e){null==e&&(e={}),e.sync=!0,w.sync(e)}}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t["./browser"]=function(){var e={exports:this};return function(e){"use strict";var n,r,o,a,s,i,l,c,u,f,p;n=function(e,t,n,r,o){function a(e,t){u||(--d,null!=e&&null==l&&(l=e),n&&null==l&&arguments.length>1&&p.push(t),_||i())}function i(){for(;!u&&null==l&&e>d&&++f<t;)++d,_=!0,r(f,s(a)),_=!1;u||null==l&&0!==d||(u=!0,null!=l?o(l):o(null,p))}var l,u,f,p,d,_;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+c(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+c(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+c(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+c(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+c(o));return p=n?[]:null,0>=t?o(null,p):((1>e||e!==e)&&(e=1/0),l=null,d=0,_=!1,u=!1,f=-1,i(),void 0)},r=function(e){if("object"!=typeof e||null===e)throw TypeError("Expected promise to be an Object, got "+c(e));if("function"!=typeof e.then)throw TypeError("Expected promise.then to be a Function, got "+c(e.then));return function(t){e.then(function(e){return p(t,null,e)},function(e){return p(t,e)})}},o="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),a=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+c(e));return e},s=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+c(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+c(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),i=Array.prototype.slice,l=function(e){if(null==e)throw TypeError("Expected an object, got "+c(e));return o(e)?e:"string"==typeof e?e.split(""):i.call(e)},c=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),p="function"==typeof e.setImmediate?e.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var e;return e=process.nextTick,function(t){var n;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+c(t));return n=i.call(arguments,1),n.length?e(function(){t.apply(void 0,l(n))}):e(t)}}():function(e){var t;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+c(e));return t=i.call(arguments,1),t.length?setTimeout(function(){e.apply(void 0,l(t))},0):setTimeout(e,0)},u=t("./gorilla"),u.require=t,"undefined"!=typeof window&&null!==window&&(u.load=function(e,t){var n;if("string"!=typeof e)throw TypeError("Expected url to be a String, got "+c(e));if("function"!=typeof t)throw TypeError("Expected callback to be a Function, got "+c(t));if(window.ActiveXObject)n=new window.ActiveXObject("Microsoft.XMLHTTP");else{if(!XMLHttpRequest)throw Error("Unable to create XMLHttpRequest");n=new XMLHttpRequest}return n.open("GET",e,!0),"function"==typeof n.overrideMimeType&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){var o;return 4===n.readyState?0===(o=n.status)||200===o?r(u.run(n.responseText))(t):t(Error("Could not load "+e)):void 0},n.send(null)},f=function(){var e;return e=document.getElementsByTagName("script"),n(1,a(e.length),!1,function(t,n){var r;return r=e[t],"text/gorillascript"===r.type?r.src?u.load(r.src,n):(u.runSync(r.innerHTML),n()):n()},function(){})},window.addEventListener?addEventListener("DOMContentLoaded",f,!1):attachEvent("onload",f))}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),e.exports},t("./browser"),t("./gorilla").withPrelude("js",{consts:{"true":!0,"false":!1,"null":null,"void":{type:"void"},undefined:{type:"void"},Infinity:{type:"Infinity"},NaN:{type:"NaN"}},syntax:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;body=macroData.body;return __node("Call",9,9,__node("Function",9,12,[],__wrap(body),true,true,false,void 0,false,[]),[],false,false);};}.call(this));',params:[["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:0},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["debugger"]();};}.call(this));',params:[["const",""]],names:"debugger",id:14},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var func,ident,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;ident=macroData.ident;func=macroData.func;this["let"](ident,false,this.type(func));return this.block([this["var"](ident,false),this.assign(ident,"=",func)]);};}.call(this));',params:[["ident","ident","ident","Identifier"],["ident","func","ident","FunctionDeclaration"]],names:"let",id:15},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){return i>=0&&f(dec(i),_this["if"](elseIfs[i].test,elseIfs[i].body,current))||current;};return this["if"](macroName==="unless"&&__node("MacroAccess",89,40,3,89,{op:"not",node:__wrap(test)},"expression",false,false,false)||test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["const","then"],["ident","body"],["ident","elseIfs","many","*","sequence",["const","else"],["const","if"],["ident","test","ident","Logic"],["const","then"],["ident","body"]],["ident","elseBody","many","?","sequence",["const","else"],["this"]]],names:["if","unless"],id:16},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,body,elseBody,elseIfs,macroData,macroName,test;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;function dec(x){return x - 1;};function f(i,current){if(i>=0){return f(dec(i),_this["if"](elseIfs[i].type==="unless"?__node("MacroAccess",94,80,3,94,{op:"not",node:__wrap(elseIfs[i].test)},"expression",false,false,false):elseIfs[i].test,elseIfs[i].body,current));}else{return current;}};return this["if"](macroName==="unless"?__node("MacroAccess",95,43,3,95,{op:"not",node:__wrap(test)},"expression",false,false,false):test,body,f(dec(elseIfs.length),elseBody));};}.call(this));',params:[["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["if","unless"],id:17},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){this.error("continue can only be used in a statement position");}return this["continue"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"continue",id:18},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;if(this.position==="expression"){this.error("break can only be used in a statement position");}return this["break"](label);};}.call(this));',params:[["ident","label","choice",["ident","Identifier"],["const",""]]],names:"break",id:19},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,_this,declarable,handle,handleItem,macroData,macroName,numRealElements,value;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;declarable=macroData.declarable;value=macroData.value;function inc(x){return x + 1;};declarable=this.macroExpand1(declarable);if(!declarable){this.error("Unknown declarable: "+String(declarable));}if(declarable.type==="ident"){this["let"](declarable.ident,declarable.isMutable,declarable.asType?this.toType(declarable.asType):this.type(value));return this.block([this["var"](declarable.ident,declarable.isMutable),this.mutateLast(value||this.noop(),function(n){return _this.assign(declarable.ident,"=",n);},true)]);}else if(declarable.type==="array"){numRealElements=function(i,acc){if(i<declarable.elements.length){return numRealElements(inc(i),declarable.elements[i]?inc(acc):acc);}else{return acc;}};if(numRealElements(0,0)<=1){handleItem=function(element,index){return _this.macroExpand1(__node("MacroAccess",216,30,38,216,{macroName:"let",macroData:{declarable:__node("MacroAccess",216,34,37,216,__node("MacroAccess",216,34,31,216,{ident:__wrap(element)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",216,45,__wrap(value),__wrap(index))}},"statement",false,false,false));};handle=function(i){if(i<declarable.elements.length){if(declarable.elements[i]){return handleItem(declarable.elements[i],_this["const"](i));}else{return handle(inc(i));}}else{return value;}};return handle(0);}else{return this.maybeCache(value,function(setValue,value){function handleItem(i,element,currentValue,index,block){block.push(_this.macroExpand1(__node("MacroAccess",229,43,38,229,{macroName:"let",macroData:{declarable:__node("MacroAccess",229,47,37,229,__node("MacroAccess",229,47,31,229,{ident:__wrap(element)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",229,58,__wrap(currentValue),__wrap(index))}},"statement",false,false,false)));return handle(inc(i),value,block);};function handle(i,currentValue,block){if(i<declarable.elements.length){if(declarable.elements[i]){return handleItem(i,declarable.elements[i],currentValue,_this["const"](i),block);}else{return handle(inc(i),currentValue,block);}}else{return _this.block(block);}};return handle(0,setValue,[]);});}}else if(declarable.type==="object"){if(declarable.pairs.length===1){handleItem=function(left,key){return _this.macroExpand1(__node("MacroAccess",243,30,38,243,{macroName:"let",macroData:{declarable:__node("MacroAccess",243,34,37,243,__node("MacroAccess",243,34,31,243,{ident:__wrap(left)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",243,42,__wrap(value),__wrap(key))}},"statement",false,false,false));};handle=function(pair){return handleItem(pair.value,pair.key);};return handle(this.macroExpand1(declarable.pairs[0]));}else{return this.maybeCache(value,function(setValue,value){function handleItem(i,left,currentValue,key,block){block.push(_this.macroExpand1(__node("MacroAccess",250,43,38,250,{macroName:"let",macroData:{declarable:__node("MacroAccess",250,47,37,250,__node("MacroAccess",250,47,31,250,{ident:__wrap(left)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",250,55,__wrap(currentValue),__wrap(key))}},"statement",false,false,false)));return handle(inc(i),value,block);};function handlePair(i,currentValue,pair,block){return handleItem(i,pair.value,currentValue,pair.key,block);};function handle(i,currentValue,block){if(i<declarable.pairs.length){return handlePair(i,currentValue,_this.macroExpand1(declarable.pairs[i]),block);}else{return _this.block(block);}};return handle(0,setValue,[]);});}}else{return this.error("Unknown declarable: "+String(declarable+" "+String(declarable!=null&&(_ref=declarable.constructor)!=null?_ref.name:void 0)));}};}.call(this));',params:[["ident","declarable","ident","Declarable"],["const","="],["ident","value","ident","ExpressionOrAssignmentOrBody"]],names:"let",id:38},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(node){return this.mutateLast(node||this.noop(),function(n){return _this["return"](n);},true);}else{return this["return"]();}};}.call(this));',params:[["ident","node","many","?","ident","Expression"]],names:"return",id:39},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",275,1,17,275,{macroName:"if",macroData:{test:__node("MacroAccess",275,13,20,275,{op:"?",node:__wrap(setN)},"statement",false,false,false),body:__node("MacroAccess",276,1,39,276,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"return?",id:40},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",283,1,17,283,{macroName:"if",macroData:{test:__wrap(n),body:__node("MacroAccess",284,1,39,284,{macroName:"return",macroData:{node:__const("true")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",288,1,17,288,{macroName:"if",macroData:{test:__wrap(setN),body:__node("MacroAccess",289,1,39,289,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnif",id:41},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"boolean")){return __node("MacroAccess",296,1,17,296,{macroName:"unless",macroData:{test:__wrap(n),body:__node("MacroAccess",297,1,39,297,{macroName:"return",macroData:{node:__const("false")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{return _this.maybeCache(n,function(setN,n){return __node("MacroAccess",301,1,17,301,{macroName:"unless",macroData:{test:__wrap(setN),body:__node("MacroAccess",302,1,39,302,{macroName:"return",macroData:{node:__wrap(n)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});}},true);};}.call(this));',params:[["ident","node","ident","Expression"]],names:"returnunless",id:42},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,body,f,locals,macroData,macroName,params,values;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;locals=macroData.locals;body=macroData.body;params=[];values=[];if(locals){if(locals.ident){params.push(this.param(locals.ident));values.push(locals.value);}f=function(i){if(__lt(i,locals.rest.length)){if(locals.rest[i].ident){params.push(_this.param(locals.rest[i].ident));values.push(locals.rest[i].value);}return f(__num(i)+1);}};f(0);}return this.call(this.func(params,body,true,true),values);};}.call(this));',params:[["ident","locals","many","?","sequence",["ident","ident","ident","Identifier"],["const","="],["ident","value"],["ident","rest","many","*","sequence",["const",","],["ident","ident","ident","Identifier"],["const","="],["ident","value"]]],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"do",id:104},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;body=macroData.body;func=__node("Function",956,22,[],__wrap(body),true,false,false,void 0,false,[]);return __node("Call",957,9,__wrap(func),[__wrap(node)],false,true);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"with",id:105},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var arr,body,elseBody,every,init,loop,macroData,macroName,reducer,result,runElse,some,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1010,62,39,1010,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false);});loop=this["for"](init,test,step,body);return __node("MacroAccess",1012,13,0,1012,{macroName:"do",macroData:{body:__node("Block",1013,1,[__wrap(loop),__wrap(elseBody)],null)}},"expression",false,false,false);}else{if(elseBody){this.error("Cannot use a for loop with an else with "+__strnum(reducer),elseBody);}if(reducer==="some"){some=this.tmp("some",false,"boolean");result=[];result.push(__node("MacroAccess",1021,26,38,1021,{macroName:"let",macroData:{declarable:__node("MacroAccess",1021,30,37,1021,__node("MacroAccess",1021,30,31,1021,{ident:__wrap(some)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false));result.push(this["for"](init,test,step,this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1023,1,17,1023,{macroName:"if",macroData:{test:__wrap(node),body:__node("Block",1024,1,[__node("MacroAccess",1024,1,30,1024,{left:__wrap(some),op:":=",right:__const("true")},"statement",false,false,false),__node("MacroAccess",1025,1,19,1025,{macroName:"break",macroData:{}},"statement",false,false,false)],null),elseIfs:[]}},"statement",false,false,false);})));result.push(some);if(this.position==="expression"){return __wrap(result);}else{return __wrap(result);}}else if(reducer==="every"){every=this.tmp("every",false,"boolean");result=[];result.push(__node("MacroAccess",1034,26,38,1034,{macroName:"let",macroData:{declarable:__node("MacroAccess",1034,30,37,1034,__node("MacroAccess",1034,30,31,1034,{ident:__wrap(every)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));result.push(this["for"](init,test,step,this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1036,1,17,1036,{macroName:"if",macroData:{test:__node("MacroAccess",1036,15,3,1036,{op:"not",node:__wrap(node)},"statement",false,false,false),body:__node("Block",1037,1,[__node("MacroAccess",1037,1,30,1037,{left:__wrap(every),op:":=",right:__const("false")},"statement",false,false,false),__node("MacroAccess",1038,1,19,1038,{macroName:"break",macroData:{}},"statement",false,false,false)],null),elseIfs:[]}},"statement",false,false,false);})));result.push(every);if(this.position==="expression"){return __wrap(result);}else{return __wrap(result);}}else{return this.error("Unknown reducer: "+__strnum(reducer));}}}else if(elseBody){if(this.position==="expression"){this.error("Cannot use a for loop with an else with as an expression",elseBody);}runElse=this.tmp("else",false,"boolean");body=__node("Block",1051,1,[__node("MacroAccess",1051,1,30,1051,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);init=__node("Block",1054,1,[__node("MacroAccess",1054,1,30,1054,{left:__wrap(runElse),op:":=",right:__const("true")},"statement",false,false,false),__wrap(init)],null);loop=this["for"](init,test,step,body);return __node("Block",1058,1,[__wrap(loop),__node("MacroAccess",1059,1,17,1059,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false)],null);}else if(this.position==="expression"){arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",1063,61,__node("Access",1063,61,__wrap(arr),__node("Const",1063,67,"push")),[__wrap(node)],false,false);});init=__node("Block",1065,1,[__node("MacroAccess",1065,1,30,1065,{left:__wrap(arr),op:":=",right:__node("Array",1065,16,[])},"statement",false,false,false),__wrap(init)],null);loop=this["for"](init,test,step,body);return __node("Block",1069,1,[__wrap(loop),__wrap(arr)],null);}else{return this["for"](init,test,step,body);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","init","choice",["ident","ExpressionOrAssignment"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","ExpressionOrAssignment"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:106},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,init,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;init=macroData.init;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1079,59,30,1079,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});return __node("Block",1081,1,[__node("MacroAccess",1081,1,38,1081,{macroName:"let",macroData:{declarable:__node("MacroAccess",1081,10,37,1081,__node("MacroAccess",1081,10,31,1081,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",1082,1,106,1082,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(step),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","init","choice",["ident","Expression"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:107},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,elseBody,macroData,macroName,reducer,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;test=macroData.test;step=macroData.step;body=macroData.body;elseBody=macroData.elseBody;if(macroName==="until"){test=__node("MacroAccess",1089,19,3,1089,{op:"not",node:__wrap(test)},"expression",false,false,false);}if(reducer==="every"){return __node("MacroAccess",1092,11,106,1092,{macroName:"for",macroData:{reducer:"every",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",1097,11,106,1097,{macroName:"for",macroData:{reducer:"some",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",1102,11,106,1102,{macroName:"for",macroData:{reducer:"first",test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",1107,11,106,1107,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",1113,1,106,1113,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:["while","until"],id:108},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,macroData,macroName,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;test=macroData.test;step=macroData.step;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;if(macroName==="until"){test=__node("MacroAccess",1120,19,3,1120,{op:"not",node:__wrap(test)},"expression",false,false,false);}return __node("MacroAccess",1123,1,107,1123,{macroName:"for",macroData:{test:__wrap(test),step:__wrap(step),current:__wrap(current),currentStart:__wrap(currentStart),body:__wrap(body)}},"statement",false,false,false);};}.call(this));',params:[["const","reduce"],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","ExpressionOrAssignment"]],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:["while","until"],id:109},{code:'return (function(){"use strict";var __num,__strnum,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,_ref2,args,array,body,elseBody,end,func,hasIndex,hasLength,inclusive,increment,index,init,isString,length,letIndex,letLength,letValue,macroData,macroName,reducer,start,step,test,tmp,value,valueExpr,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;elseBody=macroData.elseBody;value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__toArray"&&!this.callIsApply(array)){array=this.callArgs(array)[0];}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;start=(_ref=this.callArgs(array))[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];init=[];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",1182,22,60,1182,{op:"+",node:__wrap(start)},"expression",false,false,false);}init.push(this.macroExpandAll(__node("MacroAccess",1183,38,38,1183,{macroName:"let",macroData:{declarable:__node("MacroAccess",1183,42,37,1183,__node("MacroAccess",1183,42,31,1183,{isMutable:"mutable",ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)));if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",1189,28,60,1189,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",1191,23,60,1191,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",1197,29,60,1197,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",1199,23,60,1199,{op:"+",node:__wrap(step)},"expression",false,false,false));}if(this.isComplex(inclusive)){inclusive=this.cache(__wrap(inclusive),init,"incl",false);}if(this.isConst(step)){if(__num(this.value(step))>0){if(this.isConst(end)&&this.value(end)===1/0){test=__const("true");}else{test=__node("MacroAccess",1209,17,16,1209,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1209,36,9,1209,{left:__wrap(value),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1209,57,9,1209,{left:__wrap(value),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false);}}else if(this.isConst(end)&&this.value(end)===-1/0){test=__const("true");}else{test=__node("MacroAccess",1214,17,16,1214,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1214,36,10,1214,{left:__wrap(value),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1214,57,10,1214,{left:__wrap(value),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false);}}else{test=__node("MacroAccess",1216,13,17,1216,{macroName:"if",macroData:{test:__node("MacroAccess",1216,16,10,1216,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",1216,26,0)},"expression",false,false,false),body:__node("MacroAccess",1217,1,16,1217,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1217,29,9,1217,{left:__wrap(value),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1217,50,9,1217,{left:__wrap(value),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1219,1,16,1219,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1219,29,10,1219,{left:__wrap(value),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1219,50,10,1219,{left:__wrap(value),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)}},"expression",false,false,false);}increment=__node("MacroAccess",1221,35,52,1221,{left:__wrap(value),op:"~+=",right:__wrap(step)},"expression",false,false,false);if(length){init.push(this.macroExpandAll(__node("MacroAccess",1224,40,38,1224,{macroName:"let",macroData:{declarable:__node("MacroAccess",1224,44,37,1224,__node("MacroAccess",1224,44,31,1224,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1224,54,17,1224,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1225,1,45,1225,{left:__node("MacroAccess",1225,12,49,1225,{left:__node("MacroAccess",1225,12,49,1225,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1227,1,45,1227,{left:__node("MacroAccess",1227,12,49,1227,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)));}if(index){init.push(this.macroExpandAll(__node("MacroAccess",1230,40,38,1230,{macroName:"let",macroData:{declarable:__node("MacroAccess",1230,44,37,1230,__node("MacroAccess",1230,44,31,1230,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",1230,62,0)}},"statement",false,false,false)));increment=__node("Block",1232,1,[__wrap(increment),__node("MacroAccess",1233,1,103,1233,{left:__wrap(index),op:"+=",right:__node("Const",1233,21,1)},"statement",false,false,false)],null);if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",1236,25,38,1236,{macroName:"let",macroData:{declarable:__node("MacroAccess",1236,29,37,1236,__node("MacroAccess",1236,29,31,1236,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1236,39,[__node("Param",1236,40,__wrap(value),void 0,false,false,void 0),__node("Param",1236,47,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1237,24,__wrap(func),[__node("This",1237,32),__wrap(value),__wrap(index)],false,true);}}else if(this.hasFunc(body)){func=this.tmp("f",false,"function");init.push(__node("MacroAccess",1240,23,38,1240,{macroName:"let",macroData:{declarable:__node("MacroAccess",1240,27,37,1240,__node("MacroAccess",1240,27,31,1240,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1240,37,[__node("Param",1240,38,__wrap(value),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1241,22,__wrap(func),[__node("This",1241,30),__wrap(value)],false,true);}if(reducer==="every"){return __node("MacroAccess",1244,13,106,1244,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",1249,13,106,1249,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",1254,13,106,1254,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",1260,14,17,1260,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(value),elseIfs:[]}},"statement",false,false,false);});return __node("MacroAccess",1262,13,106,1262,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",1267,13,106,1267,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",1273,1,106,1273,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}}else{init=[];isString=this.isType(array,"string");hasIndex=index!=null;if(index==null){index=this.tmp("i",false,"number");}hasLength=length!=null;if(length==null){length=this.tmp("len",false,"number");}this.macroExpandAll(__node("MacroAccess",1286,28,38,1286,{macroName:"let",macroData:{declarable:__node("MacroAccess",1286,32,37,1286,__node("MacroAccess",1286,32,31,1286,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",1286,43,0)}},"statement",false,false,false));array=this.macroExpandAll(array);step=__node("Const",1290,31,1);start=__node("Const",1291,32,0);end=__const("Infinity");inclusive=__const("false");if(this.isCall(array)&&this.isIdent(this.callFunc(array))){if(this.name(this.callFunc(array))==="__step"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];step=args[1];if(this.isConst(step)){if(__num(this.value(step))>=0){start=__node("Const",1301,29,0);end=__const("Infinity");}else{start=__const("Infinity");end=__node("Const",1305,27,0);}}else{start=void 0;end=void 0;}inclusive=__const("true");}else if(this.name(this.callFunc(array))==="__slice"&&this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];if(this.isConst(end)&&this.value(end)===void 0){end=__const("Infinity");}}else if(this.name(this.callFunc(array))==="__sliceStep"&&!this.callIsApply(array)){args=this.callArgs(array);array=args[0];start=args[1];end=args[2];step=args[3];inclusive=args[4];}}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Expected step to be a number, got "+__typeof(this.value(step)),step);}else if(__num(this.value(step))%1!==0){this.error("Expected step to be an integer, got "+__strnum(this.value(step)),step);}else if(this.value(step)===0){this.error("Expected step to non-zero",step);}}if(start&&this.isConst(start)&&this.value(start)!==1/0&&(typeof this.value(start)!=="number"||__num(this.value(start))%1!==0)){this.error("Expected start to be an integer, got "+__typeof(this.value(start))+" ("+String(this.value(start))+")",start);}if(end&&this.isConst(end)&&this.value(end)!==1/0&&(typeof this.value(end)!=="number"||__num(this.value(end))%1!==0)){this.error("Expected end to be an integer, got "+__typeof(this.value(end))+" ("+String(this.value(end))+")",end);}if(!isString&&!this.isType(array,"arrayLike")){array=__node("Call",1337,22,__node("Ident",1337,22,"__toArray"),[__wrap(array)],false,false);}array=this.cache(array,init,isString?"str":"arr",false);valueExpr=__node("MacroAccess",1340,28,16,1340,{macroName:"if",macroData:{test:__wrap(isString),body:__node("Call",1340,47,__node("Access",1340,47,__wrap(array),__node("Const",1340,55,"charAt")),[__wrap(index)],false,false),elseIfs:[],elseBody:__node("Access",1340,75,__wrap(array),__wrap(index))}},"expression",false,false,false);letIndex=this.macroExpandAll(__node("MacroAccess",1341,44,38,1341,{macroName:"let",macroData:{declarable:__node("MacroAccess",1341,48,37,1341,__node("MacroAccess",1341,48,31,1341,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",1341,66,0)}},"statement",false,false,false));if(value&&value.type==="ident"&&!value.isMutable){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}letValue=this.macroExpandAll(__node("MacroAccess",1343,44,38,1343,{macroName:"let",macroData:{declarable:__node("MacroAccess",1343,48,37,1343,__node("MacroAccess",1343,48,31,1343,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false));letLength=this.macroExpandAll(__node("MacroAccess",1344,45,38,1344,{macroName:"let",macroData:{declarable:__node("MacroAccess",1344,49,37,1344,__node("MacroAccess",1344,49,31,1344,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1344,59,60,1344,{op:"+",node:__node("Access",1344,61,__wrap(array),__node("Const",1344,68,"length"))},"expression",false,false,false)}},"statement",false,false,false));test=(_ref=this.isConst(step)?__num(this.value(step))>0?(this.isConst(start)?__num(this.value(start))>=0?(init.push(__node("MacroAccess",1350,28,38,1350,{macroName:"let",macroData:{declarable:__node("MacroAccess",1350,32,37,1350,__node("MacroAccess",1350,32,31,1350,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)),init.push(letLength)):(init.push(letLength),init.push(__node("MacroAccess",1354,28,38,1354,{macroName:"let",macroData:{declarable:__node("MacroAccess",1354,32,37,1354,__node("MacroAccess",1354,32,31,1354,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1354,49,66,1354,{left:__wrap(length),inverted:false,op:"+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false))):(init.push(letLength),init.push(__node("MacroAccess",1357,26,38,1357,{macroName:"let",macroData:{declarable:__node("MacroAccess",1357,30,37,1357,__node("MacroAccess",1357,30,31,1357,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",1357,47,__node("Ident",1357,47,"__int"),[__wrap(start)],false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",1358,27,16,1358,{macroName:"if",macroData:{test:__node("MacroAccess",1358,30,9,1358,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",1358,41,0)},"expression",false,false,false),body:__node("MacroAccess",1358,49,103,1358,{left:__wrap(index),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false))),this.isConst(end)&&(this.value(end)===1/0||this.isConst(inclusive)&&this.value(inclusive)&&this.value(end)===-1)?[__node("MacroAccess",1360,18,9,1360,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),__node("MacroAccess",1360,44,52,1360,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",1363,26,38,1363,{macroName:"let",macroData:{declarable:__node("MacroAccess",1363,30,37,1363,__node("MacroAccess",1363,30,31,1363,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1363,45,60,1363,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),!this.isConst(end)?init.push(__node("MacroAccess",1365,29,16,1365,{macroName:"if",macroData:{test:__node("MacroAccess",1365,32,9,1365,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",1365,41,0)},"expression",false,false,false),body:__node("MacroAccess",1365,49,52,1365,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false)):__num(this.value(end))<0?init.push(__node("MacroAccess",1367,29,52,1367,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false)):void 0,init.push(__node("MacroAccess",1368,27,16,1368,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1368,48,30,1368,{left:__wrap(tmp),op:":=",right:__node("MacroAccess",1368,55,2,1368,{left:__node("MacroAccess",1368,55,66,1368,{left:__wrap(tmp),inverted:false,op:"+",right:__node("Const",1368,63,1)},"expression",false,false,false),inverted:false,op:"or",right:__const("Infinity")},"expression",false,false,false)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false)),init.push(__node("MacroAccess",1369,27,86,1369,{left:__wrap(tmp),op:"~min=",right:__wrap(length)},"expression",false,false,false)),[__node("MacroAccess",1370,18,9,1370,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(tmp)},"expression",false,false,false),__node("MacroAccess",1370,39,52,1370,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)])):this.value(step)===-1&&(!start||this.isConst(start)&&((_ref2=this.value(start))===-1||_ref2===1/0)&&this.isConst(end)&&this.value(end)===0&&this.isConst(inclusive)&&this.value(inclusive))?(hasLength?(init.push(letLength),init.push(__node("MacroAccess",1374,26,38,1374,{macroName:"let",macroData:{declarable:__node("MacroAccess",1374,30,37,1374,__node("MacroAccess",1374,30,31,1374,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(length)}},"statement",false,false,false))):init.push(__node("MacroAccess",1376,26,38,1376,{macroName:"let",macroData:{declarable:__node("MacroAccess",1376,30,37,1376,__node("MacroAccess",1376,30,31,1376,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1376,47,60,1376,{op:"+",node:__node("Access",1376,49,__wrap(array),__node("Const",1376,56,"length"))},"expression",false,false,false)}},"statement",false,false,false)),[__node("MacroAccess",1377,16,13,1377,{op:"postDec!",node:__wrap(index)},"expression",false,false,false),this.noop()]):(!this.isConst(end)||__num(this.value(end))<0?(hasLength=true):void 0,this.isConst(start)?(_ref2=this.value(start))===-1||_ref2===1/0?hasLength?(init.push(letLength),init.push(__node("MacroAccess",1385,30,38,1385,{macroName:"let",macroData:{declarable:__node("MacroAccess",1385,34,37,1385,__node("MacroAccess",1385,34,31,1385,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1385,51,49,1385,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1385,63,1)},"expression",false,false,false)}},"statement",false,false,false))):init.push(__node("MacroAccess",1387,30,38,1387,{macroName:"let",macroData:{declarable:__node("MacroAccess",1387,34,37,1387,__node("MacroAccess",1387,34,31,1387,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1387,51,49,1387,{left:__node("MacroAccess",1387,51,60,1387,{op:"+",node:__node("Access",1387,53,__wrap(array),__node("Const",1387,60,"length"))},"expression",false,false,false),inverted:false,op:"~-",right:__node("Const",1387,70,1)},"expression",false,false,false)}},"statement",false,false,false)):(init.push(letLength),__num(this.value(start))>=0?init.push(__node("MacroAccess",1391,30,38,1391,{macroName:"let",macroData:{declarable:__node("MacroAccess",1391,34,37,1391,__node("MacroAccess",1391,34,31,1391,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1391,51,16,1391,{macroName:"if",macroData:{test:__node("MacroAccess",1391,54,9,1391,{left:__wrap(start),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),body:__wrap(start),elseIfs:[],elseBody:__node("MacroAccess",1391,89,49,1391,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1391,101,1)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):init.push(__node("MacroAccess",1393,30,38,1393,{macroName:"let",macroData:{declarable:__node("MacroAccess",1393,34,37,1393,__node("MacroAccess",1393,34,31,1393,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1393,51,49,1393,{left:__wrap(length),inverted:false,op:"~+",right:__node("MacroAccess",1393,62,60,1393,{op:"+",node:__wrap(start)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false))):(init.push(letLength),init.push(__node("MacroAccess",1396,26,38,1396,{macroName:"let",macroData:{declarable:__node("MacroAccess",1396,30,37,1396,__node("MacroAccess",1396,30,31,1396,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1396,47,60,1396,{op:"+",node:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",1397,26,16,1397,{macroName:"if",macroData:{test:__node("MacroAccess",1397,29,9,1397,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",1397,40,0)},"statement",false,false,false),body:__node("MacroAccess",1397,48,52,1397,{left:__wrap(index),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1397,74,86,1397,{left:__wrap(index),op:"~min=",right:__wrap(length)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",1398,26,53,1398,{left:__wrap(index),op:"~-=",right:__node("Const",1398,38,1)},"statement",false,false,false))),this.isConst(end)?__num(this.value(end))>=0?[__node("MacroAccess",1401,20,16,1401,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1401,39,10,1401,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1401,60,10,1401,{left:__wrap(index),inverted:false,op:"~>",right:__wrap(end)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",1401,81,52,1401,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:[__node("MacroAccess",1403,20,16,1403,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1403,39,10,1403,{left:__wrap(index),inverted:false,op:"~>=",right:__node("MacroAccess",1403,50,66,1403,{left:__wrap(end),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1403,70,10,1403,{left:__wrap(index),inverted:false,op:"~>",right:__node("MacroAccess",1403,80,66,1403,{left:__wrap(end),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",1403,101,52,1403,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]:(tmp=this.tmp("end",false,"number"),init.push(__node("MacroAccess",1406,26,38,1406,{macroName:"let",macroData:{declarable:__node("MacroAccess",1406,30,37,1406,__node("MacroAccess",1406,30,31,1406,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1406,45,60,1406,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",1407,26,16,1407,{macroName:"if",macroData:{test:__node("MacroAccess",1407,29,9,1407,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",1407,38,0)},"statement",false,false,false),body:__node("MacroAccess",1407,46,52,1407,{left:__wrap(tmp),op:"~+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[]}},"statement",false,false,false)),[__node("MacroAccess",1408,18,16,1408,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1408,37,10,1408,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(tmp)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1408,58,10,1408,{left:__wrap(index),inverted:false,op:"~>",right:__wrap(tmp)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",1408,79,52,1408,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)])):(this.isComplex(step)?(step=this.cache(__node("Call",1411,31,__node("Ident",1411,31,"__int"),[__node("Call",1411,38,__node("Ident",1411,38,"__nonzero"),[__wrap(step)],false,false)],false,false),init,"step",false)):init.unshift(__node("Call",1413,28,__node("Ident",1413,28,"__int"),[__node("Call",1413,35,__node("Ident",1413,35,"__nonzero"),[__wrap(step)],false,false)],false,false)),init.push(letLength),!start?(init.push(__node("MacroAccess",1416,24,38,1416,{macroName:"let",macroData:{declarable:__node("MacroAccess",1416,28,37,1416,__node("MacroAccess",1416,28,31,1416,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1416,45,16,1416,{macroName:"if",macroData:{test:__node("MacroAccess",1416,48,10,1416,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",1416,58,0)},"expression",false,false,false),body:__node("Const",1416,65,0),elseIfs:[],elseBody:__node("MacroAccess",1416,71,49,1416,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1416,83,1)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)),[__node("MacroAccess",1418,17,16,1418,{macroName:"if",macroData:{test:__node("MacroAccess",1418,20,10,1418,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",1418,30,0)},"expression",false,false,false),body:__node("MacroAccess",1418,36,9,1418,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1418,59,10,1418,{left:__wrap(index),inverted:false,op:"~>=",right:__node("Const",1418,71,0)},"expression",false,false,false)}},"expression",false,false,false),__node("MacroAccess",1419,17,52,1419,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)]):(this.isConst(start)?this.value(start)===1/0?init.push(__node("MacroAccess",1424,28,38,1424,{macroName:"let",macroData:{declarable:__node("MacroAccess",1424,32,37,1424,__node("MacroAccess",1424,32,31,1424,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1424,49,49,1424,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1424,61,1)},"expression",false,false,false)}},"statement",false,false,false)):init.push(__node("MacroAccess",1426,28,38,1426,{macroName:"let",macroData:{declarable:__node("MacroAccess",1426,32,37,1426,__node("MacroAccess",1426,32,31,1426,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1426,49,16,1426,{macroName:"if",macroData:{test:__node("MacroAccess",1426,52,10,1426,{left:__wrap(start),inverted:false,op:"~>=",right:__node("Const",1426,64,0)},"expression",false,false,false),body:__wrap(start),elseIfs:[],elseBody:__node("MacroAccess",1426,82,66,1426,{left:__wrap(start),inverted:false,op:"+",right:__wrap(length)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):(init.push(__node("MacroAccess",1428,26,38,1428,{macroName:"let",macroData:{declarable:__node("MacroAccess",1428,30,37,1428,__node("MacroAccess",1428,30,31,1428,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__wrap(start)}},"statement",false,false,false)),init.push(__node("MacroAccess",1429,26,16,1429,{macroName:"if",macroData:{test:__node("MacroAccess",1429,29,9,1429,{left:__wrap(index),inverted:false,op:"~<",right:__node("Const",1429,40,0)},"statement",false,false,false),body:__node("MacroAccess",1429,48,103,1429,{left:__wrap(index),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[{test:__node("MacroAccess",1429,74,9,1429,{left:__wrap(step),inverted:false,op:"~<",right:__node("Const",1429,84,0)},"statement",false,false,false),body:__node("MacroAccess",1429,92,86,1429,{left:__wrap(index),op:"~min=",right:__wrap(length)},"expression",false,false,false)}]}},"statement",false,false,false))),tmp=this.tmp("end",false,"number"),this.isConst(end)?init.push(__node("MacroAccess",1432,26,38,1432,{macroName:"let",macroData:{declarable:__node("MacroAccess",1432,30,37,1432,__node("MacroAccess",1432,30,31,1432,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1432,45,16,1432,{macroName:"if",macroData:{test:__node("MacroAccess",1432,48,9,1432,{left:__wrap(end),inverted:false,op:"~<",right:__node("Const",1432,57,0)},"expression",false,false,false),body:__node("MacroAccess",1432,63,49,1432,{left:__wrap(end),inverted:false,op:"~+",right:__wrap(length)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1432,84,83,1432,{left:__wrap(end),inverted:false,op:"max",right:__node("MacroAccess",1432,95,16,1432,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1432,113,49,1432,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1432,125,1)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(length)}},"expression",false,false,false)},"expression",false,false,false)}},"expression",false,false,false)}},"statement",false,false,false)):(init.push(__node("MacroAccess",1434,26,38,1434,{macroName:"let",macroData:{declarable:__node("MacroAccess",1434,30,37,1434,__node("MacroAccess",1434,30,31,1434,{isMutable:"mutable",ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1434,45,60,1434,{op:"+",node:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)),init.push(__node("MacroAccess",1435,26,16,1435,{macroName:"if",macroData:{test:__node("MacroAccess",1435,29,9,1435,{left:__wrap(tmp),inverted:false,op:"~<",right:__node("Const",1435,38,0)},"statement",false,false,false),body:__node("MacroAccess",1435,46,103,1435,{left:__wrap(tmp),op:"+=",right:__wrap(length)},"expression",false,false,false),elseIfs:[{test:__node("MacroAccess",1435,70,10,1435,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",1435,80,0)},"statement",false,false,false),body:__node("MacroAccess",1435,88,86,1435,{left:__wrap(tmp),op:"~min=",right:__node("MacroAccess",1435,98,16,1435,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1435,117,49,1435,{left:__wrap(length),inverted:false,op:"~-",right:__node("Const",1435,129,1)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(length)}},"expression",false,false,false)},"expression",false,false,false)}],elseBody:__node("MacroAccess",1435,151,87,1435,{left:__wrap(tmp),op:"~max=",right:__node("MacroAccess",1435,163,16,1435,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("Const",1435,182,0),elseIfs:[],elseBody:__node("MacroAccess",1435,188,61,1435,{op:"-",node:__node("Const",1435,190,1)},"expression",false,false,false)}},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false))),end=tmp,[__node("MacroAccess",1438,17,17,1438,{macroName:"if",macroData:{test:__node("MacroAccess",1438,20,10,1438,{left:__wrap(step),inverted:false,op:"~>",right:__node("Const",1438,30,0)},"expression",false,false,false),body:__node("MacroAccess",1439,1,16,1439,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1439,33,9,1439,{left:__wrap(index),inverted:false,op:"~<=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1439,54,9,1439,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1441,1,16,1441,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",1441,33,10,1441,{left:__wrap(index),inverted:false,op:"~>=",right:__wrap(end)},"expression",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1441,54,9,1441,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(end)},"expression",false,false,false)}},"statement",false,false,false)}},"expression",false,false,false),__node("MacroAccess",1442,17,52,1442,{left:__wrap(index),op:"~+=",right:__wrap(step)},"expression",false,false,false)])))[0];increment=_ref[1];if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value&&valueIdent!==value.ident){body=__node("Block",1449,1,[__node("MacroAccess",1449,1,38,1449,{macroName:"let",macroData:{declarable:__node("MacroAccess",1449,16,37,1449,__node("MacroAccess",1449,16,31,1449,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(hasIndex){init.push(__node("MacroAccess",1452,24,38,1452,{macroName:"let",macroData:{declarable:__node("MacroAccess",1452,28,37,1452,__node("MacroAccess",1452,28,31,1452,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1452,38,[__node("Param",1452,39,__wrap(valueIdent),void 0,false,false,void 0),__node("Param",1452,52,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1453,23,__wrap(func),[__node("This",1453,31),__wrap(valueExpr),__wrap(index)],false,true);}else{init.push(__node("MacroAccess",1455,24,38,1455,{macroName:"let",macroData:{declarable:__node("MacroAccess",1455,28,37,1455,__node("MacroAccess",1455,28,31,1455,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1455,38,[__node("Param",1455,39,__wrap(valueIdent),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1456,23,__wrap(func),[__node("This",1456,31),__wrap(valueExpr)],false,true);}}else if(valueIdent===value.ident||reducer!=="filter"){body=__node("Block",1459,1,[__node("MacroAccess",1459,1,38,1459,{macroName:"let",macroData:{declarable:__node("MacroAccess",1459,14,37,1459,__node("MacroAccess",1459,14,31,1459,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false),__wrap(body)],null);}else{body=__node("Block",1463,1,[__node("MacroAccess",1463,1,38,1463,{macroName:"let",macroData:{declarable:__node("MacroAccess",1463,14,37,1463,__node("MacroAccess",1463,14,31,1463,{ident:__wrap(valueIdent)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueExpr)}},"statement",false,false,false),__node("MacroAccess",1464,1,38,1464,{macroName:"let",macroData:{declarable:__node("MacroAccess",1464,14,37,1464,__node("MacroAccess",1464,14,31,1464,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(reducer==="every"){return __node("MacroAccess",1468,13,106,1468,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){return __node("MacroAccess",1473,13,106,1473,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){return __node("MacroAccess",1478,13,106,1478,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",1484,14,17,1484,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(valueIdent),elseIfs:[]}},"statement",false,false,false);});return __node("MacroAccess",1486,13,106,1486,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){return __node("MacroAccess",1491,13,106,1491,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{return __node("MacroAccess",1497,1,106,1497,{macroName:"for",macroData:{init:__wrap(init),test:__wrap(test),step:__wrap(increment),body:__wrap(body),elseBody:__wrap(elseBody)}},"statement",false,false,false);}}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:113},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var array,body,current,currentStart,index,length,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;array=macroData.array;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;value=this.macroExpand1(value);body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1504,59,30,1504,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});if(index!=null){length=index.length;}if(index!=null){index=index.value;}return __node("Block",1508,1,[__node("MacroAccess",1508,1,38,1508,{macroName:"let",macroData:{declarable:__node("MacroAccess",1508,10,37,1508,__node("MacroAccess",1508,10,31,1508,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",1509,1,113,1509,{macroName:"for",macroData:{value:__node("MacroAccess",1509,10,37,1509,__node("MacroAccess",1509,10,31,1509,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index),length:__wrap(length)},array:__wrap(array),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:114},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var arr,body,elseBody,func,index,init,key,letIndex,letValue,loop,macroData,macroName,object,own,post,reducer,runElse,type,value,valueIdent;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;elseBody=macroData.elseBody;index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}own=type==="of";init=[];if(own||value){object=this.cache(object,init,"obj",false);}this["let"](key,false,this.type("string"));letValue=value&&this.macroExpandAll(__node("MacroAccess",1525,52,38,1525,{macroName:"let",macroData:{declarable:__node("MacroAccess",1525,56,37,1525,__node("MacroAccess",1525,56,31,1525,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",1525,65,__wrap(object),__wrap(key))}},"statement",false,false,false));letIndex=index&&this.macroExpandAll(__node("MacroAccess",1526,52,38,1526,{macroName:"let",macroData:{declarable:__node("MacroAccess",1526,56,37,1526,__node("MacroAccess",1526,56,31,1526,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1526,73,61,1526,{op:"-",node:__node("Const",1526,75,1)},"expression",false,false,false)}},"statement",false,false,false));if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(value){if(value.type==="ident"){valueIdent=value.ident;}else{valueIdent=this.tmp("v",false);}}if(value&&valueIdent!==value.ident){body=__node("Block",1532,1,[__node("MacroAccess",1532,1,38,1532,{macroName:"let",macroData:{declarable:__node("MacroAccess",1532,14,37,1532,__node("MacroAccess",1532,14,31,1532,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__wrap(valueIdent)}},"statement",false,false,false),__wrap(body)],null);}if(index){init.push(__node("MacroAccess",1535,23,38,1535,{macroName:"let",macroData:{declarable:__node("MacroAccess",1535,27,37,1535,__node("MacroAccess",1535,27,31,1535,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1535,37,[__node("Param",1535,38,__wrap(key),void 0,false,false,void 0),__node("Param",1535,43,__wrap(valueIdent),void 0,false,false,void 0),__node("Param",1535,57,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1536,22,__wrap(func),[__node("This",1536,30),__wrap(key),__node("Access",1536,41,__wrap(object),__wrap(key)),__wrap(index)],false,true);}else if(value){init.push(__node("MacroAccess",1538,23,38,1538,{macroName:"let",macroData:{declarable:__node("MacroAccess",1538,27,37,1538,__node("MacroAccess",1538,27,31,1538,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1538,37,[__node("Param",1538,38,__wrap(key),void 0,false,false,void 0),__node("Param",1538,43,__wrap(valueIdent),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1539,22,__wrap(func),[__node("This",1539,30),__wrap(key),__node("Access",1539,41,__wrap(object),__wrap(key))],false,true);}else{init.push(__node("MacroAccess",1541,23,38,1541,{macroName:"let",macroData:{declarable:__node("MacroAccess",1541,27,37,1541,__node("MacroAccess",1541,27,31,1541,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("Function",1541,37,[__node("Param",1541,38,__wrap(key),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])}},"statement",false,false,false));body=__node("Call",1542,22,__wrap(func),[__node("This",1542,30),__wrap(key)],false,true);}}else if(value){body=__node("Block",1545,1,[__wrap(letValue),__wrap(body)],null);}post=[];if(elseBody){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",1551,21,38,1551,{macroName:"let",macroData:{declarable:__node("MacroAccess",1551,25,37,1551,__node("MacroAccess",1551,25,31,1551,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));body=__node("Block",1553,1,[__node("MacroAccess",1553,1,30,1553,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);post.push(__node("MacroAccess",1556,1,17,1556,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(index){init.push(letIndex);body=__node("Block",1562,1,[__node("MacroAccess",1562,1,52,1562,{left:__wrap(index),op:"~+=",right:__node("Const",1562,20,1)},"statement",false,false,false),__wrap(body)],null);}if(own){body=__node("MacroAccess",1567,1,17,1567,{macroName:"if",macroData:{test:__node("MacroAccess",1567,11,73,1567,{left:__wrap(object),inverted:false,op:"ownskey",right:__wrap(key)},"statement",false,false,false),body:__wrap(body),elseIfs:[]}},"statement",false,false,false);}if(reducer){if(reducer==="first"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1572,62,39,1572,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1574,12,0,1574,{macroName:"do",macroData:{body:__node("Block",1575,1,[__wrap(init),__wrap(loop),__wrap(elseBody)],null)}},"statement",false,false,false);}else{if(elseBody){this.error("Cannot use a for loop with an else with "+__strnum(reducer),elseBody);}if(reducer==="some"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1583,1,17,1583,{macroName:"if",macroData:{test:__wrap(node),body:__node("MacroAccess",1584,1,39,1584,{macroName:"return",macroData:{node:__const("true")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1586,14,0,1586,{macroName:"do",macroData:{body:__node("Block",1587,1,[__wrap(init),__wrap(loop),__const("false")],null)}},"statement",false,false,false);}else if(reducer==="every"){body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1592,1,17,1592,{macroName:"if",macroData:{test:__node("MacroAccess",1592,15,3,1592,{op:"not",node:__wrap(node)},"statement",false,false,false),body:__node("MacroAccess",1593,1,39,1593,{macroName:"return",macroData:{node:__const("false")}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);});loop=this.forIn(key,object,body);return __node("MacroAccess",1595,14,0,1595,{macroName:"do",macroData:{body:__node("Block",1596,1,[__wrap(init),__wrap(loop),__const("true")],null)}},"statement",false,false,false);}else{return this.error("Unknown reducer: "+__strnum(reducer));}}}else if(this.position==="expression"){if(elseBody){this.error("Cannot use a for loop with an else as an expression",elseBody);}arr=this.tmp("arr",false,this.type(body).array());body=this.mutateLast(body||this.noop(),function(node){return __node("Call",1605,61,__node("Access",1605,61,__wrap(arr),__node("Const",1605,67,"push")),[__wrap(node)],false,false);});init.unshift(__node("MacroAccess",1606,23,38,1606,{macroName:"let",macroData:{declarable:__node("MacroAccess",1606,27,37,1606,__node("MacroAccess",1606,27,31,1606,{ident:__wrap(arr)},"statement",false,false,false),"statement",false,false,false),value:__node("Array",1606,34,[])}},"statement",false,false,false));loop=this.forIn(key,object,body);return __node("Block",1609,1,[__wrap(init),__wrap(loop),__wrap(arr)],null);}else{loop=this.forIn(key,object,body);return __node("Block",1615,1,[__wrap(init),__wrap(loop),__wrap(post)],null);}};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"]],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:115},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,index,key,loop,macroData,macroName,object,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",1620,59,30,1620,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});if(value!=null){index=value.index;}if(value!=null){value=value.value;}if(type==="of"){loop=__node("MacroAccess",1624,10,115,1624,{macroName:"for",macroData:{key:__wrap(key),value:{value:__node("MacroAccess",1624,20,37,1624,__node("MacroAccess",1624,20,31,1624,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:__wrap(index)},type:"of",object:__wrap(object),body:__wrap(body)}},"statement",false,false,false);}else{loop=__node("MacroAccess",1627,10,115,1627,{macroName:"for",macroData:{key:__wrap(key),value:{value:__node("MacroAccess",1627,20,37,1627,__node("MacroAccess",1627,20,31,1627,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),index:__wrap(index)},type:"ofall",object:__wrap(object),body:__wrap(body)}},"statement",false,false,false);}return __node("Block",1630,1,[__node("MacroAccess",1630,1,38,1630,{macroName:"let",macroData:{declarable:__node("MacroAccess",1630,10,37,1630,__node("MacroAccess",1630,10,31,1630,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__wrap(loop),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:116},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_f,_i,catchBody,catchIdent,catchPart,current,elseBody,finallyBody,hasElse,init,macroData,macroName,runElse,tryBody,typedCatches;macroName=macroFullData.macroName;macroData=macroFullData.macroData;tryBody=macroData.tryBody;typedCatches=macroData.typedCatches;catchPart=macroData.catchPart;elseBody=macroData.elseBody;finallyBody=macroData.finallyBody;hasElse=!!elseBody;if(typedCatches.length===0&&!catchPart&&!hasElse&&!finallyBody){this.error("Must provide at least a catch, else, or finally to a try block");}if(catchPart!=null){catchIdent=catchPart.ident;}if(catchPart!=null){catchBody=catchPart.body;}if(typedCatches.length!==0){if(!catchIdent){catchIdent=typedCatches[0].ident;}current=catchBody||__node("MacroAccess",2038,94,11,2038,{op:"throw",node:__wrap(catchIdent)},"statement",false,false,false);for(_arr=__toArray(typedCatches), _i=_arr.length, _f=function(typeCatch){var _this,letErr,typeIdent,types,value;_this=this;typeIdent=typeCatch.ident;if(this.name(typeIdent)!==this.name(catchIdent)){letErr=__node("MacroAccess",2041,14,38,2041,{macroName:"let",macroData:{declarable:__node("MacroAccess",2041,18,37,2041,__node("MacroAccess",2041,18,31,2041,{ident:__wrap(typeIdent)},"statement",false,false,false),"statement",false,false,false),value:__wrap(catchIdent)}},"statement",false,false,false);}else{letErr=this.noop();}if(typeCatch.check.type==="as"){types=this.array((function(){var _arr,_arr2,_i,_len,type;for(_arr=[], _arr2=__toArray(_this.isTypeUnion(typeCatch.check.value)?_this.types(typeCatch.check.value):[typeCatch.check.value]), _i=0, _len=_arr2.length;_i<_len;++_i){type=_arr2[_i];if(_this.isTypeArray(type)){_this.error("Expected a normal type, cannot use an array type",type);}else if(_this.isTypeGeneric(type)){_this.error("Expected a normal type, cannot use a generic type",type);}else if(_this.isTypeFunction(type)){_this.error("Expected a normal type, cannot use a function type",type);}else if(_this.isTypeObject(type)){_this.error("Expected a normal type, cannot use an object type",type);}_arr.push(type);}return _arr;}()));return current=__node("MacroAccess",2056,1,17,2056,{macroName:"if",macroData:{test:__node("MacroAccess",2056,15,118,2056,{left:__wrap(catchIdent),inverted:false,op:"instanceofsome",right:__wrap(types)},"statement",false,false,false),body:__node("Block",2057,1,[__wrap(letErr),__wrap(typeCatch.body)],null),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}else{value=typeCatch.check.value;return current=__node("MacroAccess",2064,1,17,2064,{macroName:"if",macroData:{test:__node("MacroAccess",2064,15,5,2064,{left:__wrap(catchIdent),inverted:false,op:"==",right:__wrap(value)},"statement",false,false,false),body:__node("Block",2065,1,[__wrap(letErr),__wrap(typeCatch.body)],null),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}};_i--;){_f.call(this,_arr[_i]);}catchBody=current;}init=[];if(hasElse){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",2073,20,38,2073,{macroName:"let",macroData:{declarable:__node("MacroAccess",2073,24,37,2073,__node("MacroAccess",2073,24,31,2073,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));if(catchBody){catchBody=__node("Block",2076,1,[__node("MacroAccess",2076,1,30,2076,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(catchBody)],null);}else{catchIdent=this.tmp("err");catchBody=__node("Block",2081,1,[__node("MacroAccess",2081,1,30,2081,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__node("MacroAccess",2082,1,11,2082,{op:"throw",node:__wrap(catchIdent)},"statement",false,false,false)],null);}}current=tryBody;if(catchBody){current=this.tryCatch(current,catchIdent||this.tmp("err"),catchBody);}if(hasElse){current=this.tryFinally(current,__node("MacroAccess",2089,1,17,2089,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(finallyBody){current=this.tryFinally(current,finallyBody);}return __node("Block",2095,1,[__wrap(init),__wrap(current)],null);};}.call(this));',params:[["ident","tryBody","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","typedCatches","many","*","sequence",["const","\n"],["const","catch"],["ident","ident","ident","Identifier"],["ident","check","choice",["sequence",["ident","type","const","as"],["ident","value","ident","Type"]],["sequence",["ident","type","const","=="],["ident","value","ident","Expression"]]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","catchPart","many","?","sequence",["const","\n"],["const","catch"],["ident","ident","many","?","ident","Identifier"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","finallyBody","many","?","sequence",["const","\n"],["const","finally"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"try",id:119},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,captureValue,elseBody,err,func,index,init,item,iterable,iterator,macroData,macroName,main,post,reducer,runElse,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;reducer=macroData.reducer;value=macroData.value;index=macroData.index;iterable=macroData.iterable;body=macroData.body;elseBody=macroData.elseBody;init=[];iterator=this.cache(__node("Call",2131,30,__node("Ident",2131,30,"__iter"),[__wrap(iterable)],false,false),init,"iter",false);item=this.tmp("item",false);err=this.tmp("e",true);step=[];if(index){init.push(__node("MacroAccess",2137,20,38,2137,{macroName:"let",macroData:{declarable:__node("MacroAccess",2137,24,37,2137,__node("MacroAccess",2137,24,31,2137,{isMutable:"mutable",ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",2137,42,0)}},"statement",false,false,false));step.push(__node("MacroAccess",2138,21,52,2138,{left:__wrap(index),op:"~+=",right:__node("Const",2138,33,1)},"expression",false,false,false));}captureValue=__node("Block",2141,1,[__node("MacroAccess",2141,1,38,2141,{macroName:"let",macroData:{declarable:__node("MacroAccess",2141,10,37,2141,__node("MacroAccess",2141,10,31,2141,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2141,18,__node("Access",2141,18,__wrap(iterator),__node("Const",2141,29,"next")),[],false,false)}},"statement",false,false,false),__node("MacroAccess",2142,1,17,2142,{macroName:"if",macroData:{test:__node("Access",2142,9,__wrap(item),__node("Const",2142,16,"done")),body:__node("MacroAccess",2143,1,19,2143,{macroName:"break",macroData:{}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",2144,1,38,2144,{macroName:"let",macroData:{declarable:__node("MacroAccess",2144,10,37,2144,__node("MacroAccess",2144,10,31,2144,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",2144,19,__wrap(item),__node("Const",2144,26,"value"))}},"statement",false,false,false)],null);post=[];if(elseBody&&!reducer&&this.position!=="expression"){runElse=this.tmp("else",false,"boolean");init.push(__node("MacroAccess",2149,21,38,2149,{macroName:"let",macroData:{declarable:__node("MacroAccess",2149,25,37,2149,__node("MacroAccess",2149,25,31,2149,{ident:__wrap(runElse)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false));body=__node("Block",2151,1,[__node("MacroAccess",2151,1,30,2151,{left:__wrap(runElse),op:":=",right:__const("false")},"statement",false,false,false),__wrap(body)],null);post.push(__node("MacroAccess",2154,1,17,2154,{macroName:"if",macroData:{test:__wrap(runElse),body:__wrap(elseBody),elseIfs:[]}},"statement",false,false,false));}if(this.hasFunc(body)){func=this.tmp("f",false,"function");if(!index){init.push(__node("MacroAccess",2160,22,38,2160,{macroName:"let",macroData:{declarable:__node("MacroAccess",2160,26,37,2160,__node("MacroAccess",2160,26,31,2160,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2160,36,117,2160,{op:"",node:__node("Function",2160,36,[__node("Param",2160,37,__wrap(value),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])},"expression",false,false,false)}},"statement",false,false,false));body=__node("Block",2162,1,[__wrap(captureValue),__node("Call",2163,1,__wrap(func),[__node("This",2163,18),__wrap(value)],false,true)],null);}else{init.push(__node("MacroAccess",2165,22,38,2165,{macroName:"let",macroData:{declarable:__node("MacroAccess",2165,26,37,2165,__node("MacroAccess",2165,26,31,2165,{ident:__wrap(func)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2165,36,117,2165,{op:"",node:__node("Function",2165,36,[__node("Param",2165,37,__wrap(value),void 0,false,false,void 0),__node("Param",2165,44,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,false,[])},"expression",false,false,false)}},"statement",false,false,false));body=__node("Block",2167,1,[__wrap(captureValue),__node("Call",2168,1,__wrap(func),[__node("This",2168,18),__wrap(value),__wrap(index)],false,true)],null);}}else{body=__node("Block",2171,1,[__wrap(captureValue),__wrap(body)],null);}if(reducer==="every"){main=__node("MacroAccess",2175,11,106,2175,{macroName:"for",macroData:{reducer:"every",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="some"){main=__node("MacroAccess",2180,11,106,2180,{macroName:"for",macroData:{reducer:"some",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="first"){main=__node("MacroAccess",2185,11,106,2185,{macroName:"for",macroData:{reducer:"first",init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(reducer==="filter"){body=this.mutateLast(body,function(node){return __node("MacroAccess",2191,12,17,2191,{macroName:"if",macroData:{test:__wrap(node),body:__wrap(value),elseIfs:[]}},"statement",false,false,false);});main=__node("MacroAccess",2193,11,106,2193,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else if(this.position==="expression"){main=__node("MacroAccess",2198,11,106,2198,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body),elseBody:__wrap(elseBody)}},"expression",false,false,false);}else{main=__node("Block",2204,1,[__node("MacroAccess",2204,1,106,2204,{macroName:"for",macroData:{init:__wrap(init),test:__const("true"),step:__wrap(step),body:__wrap(body)}},"statement",false,false,false),__wrap(post)],null);}return __node("MacroAccess",2208,8,119,2208,{macroName:"try",macroData:{tryBody:__wrap(main),typedCatches:[],finallyBody:__node("MacroAccess",2211,1,119,2211,{macroName:"try",macroData:{tryBody:__node("Call",2212,1,__node("Access",2212,1,__wrap(iterator),__node("Const",2212,19,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err),body:__const("void")}}},"statement",false,false,false)}},"statement",false,false,false);};}.call(this));',params:[["ident","reducer","many","?","choice",["const","every"],["const","some"],["const","first"],["const","filter"]],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterable","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"for",id:120},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,current,currentStart,index,iterator,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;value=macroData.value;index=macroData.index;iterator=macroData.iterator;current=macroData.current;currentStart=macroData.currentStart;body=macroData.body;body=this.mutateLast(body||this.noop(),function(node){return __node("MacroAccess",2217,59,30,2217,{left:__wrap(current),op:":=",right:__wrap(node)},"expression",false,false,false);});return __node("Block",2219,1,[__node("MacroAccess",2219,1,38,2219,{macroName:"let",macroData:{declarable:__node("MacroAccess",2219,10,37,2219,__node("MacroAccess",2219,10,31,2219,{isMutable:"mutable",ident:__wrap(current)},"statement",false,false,false),"statement",false,false,false),value:__wrap(currentStart)}},"statement",false,false,false),__node("MacroAccess",2220,1,120,2220,{macroName:"for",macroData:{value:__wrap(value),index:__wrap(index),iterable:__wrap(iterator),body:__wrap(body)}},"statement",false,false,false),__wrap(current)],null);};}.call(this));',params:[["const","reduce"],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator","ident","Logic"],["const",","],["ident","current","ident","Identifier"],["const","="],["ident","currentStart"],["ident","body","choice",["ident","Body"],["sequence",["const",";"],["this","ident","Statement"]]]],names:"for",id:121},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_arr2,_i,_i2,_len,_len2,body,case_,caseNode,caseNodes,cases,defaultCase,isFallthrough,lastNode,macroData,macroName,node,nodes,resultCases;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;cases=macroData.cases;defaultCase=macroData.defaultCase;resultCases=[];for(_arr=__toArray(cases), _i=0, _len=_arr.length;_i<_len;++_i){case_=_arr[_i];caseNodes=[case_.nodeHead].concat(case_.nodeTail);body=case_.body;isFallthrough=false;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));isFallthrough=true;}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){body=this.noop();isFallthrough=true;}for(_arr2=__toArray(caseNodes.slice(0,-1)), _i2=0, _len2=_arr2.length;_i2<_len2;++_i2){caseNode=_arr2[_i2];resultCases.push({node:caseNode,body:this.noop(),fallthrough:true});}resultCases.push({node:caseNodes[__num(caseNodes.length)-1],body:body,fallthrough:isFallthrough});}return this["switch"](node,resultCases,defaultCase);};}.call(this));',params:[["ident","node","ident","Logic"],["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","nodeHead","ident","Logic"],["ident","nodeTail","many","*","sequence",["const",","],["this","ident","Logic"]],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:122},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,body,case_,cases,current,defaultCase,fall,isFallthrough,lastNode,macroData,macroName,nodes,result,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;cases=macroData.cases;defaultCase=macroData.defaultCase;current=defaultCase;for(_arr=__toArray(cases), _i=_arr.length;_i--;){case_=_arr[_i];test=case_.test;body=case_.body;isFallthrough=false;result=void 0;if(this.isBlock(body)){nodes=this.nodes(body);lastNode=nodes[__num(nodes.length)-1];if(this.isIdent(lastNode)&&this.name(lastNode)==="fallthrough"){body=this.block(nodes.slice(0,-1));if(this.isIf(current)){fall=this.tmp("fall",false,"boolean");result=__node("Block",2266,1,[__node("MacroAccess",2266,1,38,2266,{macroName:"let",macroData:{declarable:__node("MacroAccess",2266,18,37,2266,__node("MacroAccess",2266,18,31,2266,{isMutable:"mutable",ident:__wrap(fall)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false),__node("MacroAccess",2267,1,17,2267,{macroName:"if",macroData:{test:__wrap(test),body:__node("Block",2268,1,[__node("MacroAccess",2268,1,30,2268,{left:__wrap(fall),op:":=",right:__const("true")},"statement",false,false,false),__wrap(body)],null),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",2270,1,17,2270,{macroName:"if",macroData:{test:__node("MacroAccess",2270,17,2,2270,{left:__wrap(fall),inverted:false,op:"or",right:__wrap(this.test(current))},"statement",false,false,false),body:__wrap(this.whenTrue(current)),elseIfs:[],elseBody:__wrap(this.whenFalse(current))}},"statement",false,false,false)],null);}else{result=__node("Block",2276,1,[__node("MacroAccess",2276,1,17,2276,{macroName:"if",macroData:{test:__wrap(test),body:__wrap(body),elseIfs:[]}},"statement",false,false,false),__wrap(current)],null);}}}else if(this.isIdent(body)&&this.name(body)==="fallthrough"){if(this.isIf(current)){result=__node("MacroAccess",2281,24,17,2281,{macroName:"if",macroData:{test:__node("MacroAccess",2281,27,2,2281,{left:__wrap(test),inverted:false,op:"or",right:__wrap(this.test(current))},"statement",false,false,false),body:__wrap(this.whenTrue(current)),elseIfs:[],elseBody:__wrap(this.whenFalse(current))}},"statement",false,false,false);}else{result=__node("Block",2287,1,[__wrap(test),__wrap(current)],null);}}current=result||__node("MacroAccess",2290,20,17,2290,{macroName:"if",macroData:{test:__wrap(case_.test),body:__wrap(body),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}return current;};}.call(this));',params:[["ident","cases","many","*","sequence",["const","\n"],["const","case"],["ident","test","ident","Logic"],["ident","body","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","defaultCase","many","?","sequence",["const","\n"],["const","default"],["this","many","?","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"]],names:"switch",id:123},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,call,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){this.error("async call expression must be a call",call);}if(body==null){body=this.noop();}if(params){params=[params.head].concat(params.tail);}else{params=[];}func=this.func(params,body,true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",2406,58,126,2406,{macroName:"once!",macroData:[__node("MacroAccess",2406,66,117,2406,{op:"mutateFunction!",node:__wrap(func)},"expression",false,false,false)]},"expression",false,false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","params","many","?","sequence",["ident","head","ident","Parameter"],["ident","tail","many","*","sequence",["const",","],["this","ident","Parameter"]]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async",id:127},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,call,callback,error,func,macroData,macroName,params;macroName=macroFullData.macroName;macroData=macroFullData.macroData;callback=macroData.callback;params=macroData.params;call=macroData.call;body=macroData.body;if(!this.isCall(call)){this.error("async! call expression must be a call",call);}if(body==null){body=this.noop();}error=this.tmp("e",false);params=[this.param(error)].concat(params);func=this.func(params,callback==="throw"?__node("Block",2420,1,[__node("MacroAccess",2420,1,102,2420,{op:"throw?",node:__wrap(error)},"statement",false,false,false),__wrap(body)],null):__node("Block",2424,1,[__node("MacroAccess",2424,1,17,2424,{macroName:"if",macroData:{test:__node("MacroAccess",2424,13,20,2424,{op:"?",node:__wrap(error)},"statement",false,false,false),body:__node("MacroAccess",2425,1,39,2425,{macroName:"return",macroData:{node:__node("Call",2425,19,__wrap(callback),[__wrap(error)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true);return this.call(this.callFunc(call),this.callArgs(call).concat([__node("MacroAccess",2429,58,126,2429,{macroName:"once!",macroData:[__node("MacroAccess",2429,66,117,2429,{op:"mutateFunction!",node:__wrap(func)},"expression",false,false,false)]},"expression",false,false,false)]),this.callIsNew(call),this.callIsApply(call));};}.call(this));',params:[["ident","callback","choice",["const","throw"],["ident","Expression"]],["ident","params","many","*","sequence",["const",","],["this","ident","Parameter"]],["const","<-"],["ident","call","ident","Expression"],["ident","body","ident","DedentedBody"]],names:"async!",id:128},{code:'return (function(){"use strict";var __isArray,__num,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,_len,ident,identName,key,macroData,macroName,name,obj,path,requires,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;if(this.isConst(name)&&typeof this.value(name)!=="string"){this.error("Expected a constant string, got "+__typeof(this.value(name)),name);}if(this.isConst(name)){identName=this.value(name);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);return __node("MacroAccess",2442,10,38,2442,{macroName:"let",macroData:{declarable:__node("MacroAccess",2442,14,37,2442,__node("MacroAccess",2442,14,31,2442,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2442,23,__node("Ident",2442,23,"require"),[__wrap(name)],false,false)}},"statement",false,false,false);}else if(this.isIdent(name)){path=this.name(name);return __node("MacroAccess",2445,10,38,2445,{macroName:"let",macroData:{declarable:__node("MacroAccess",2445,14,37,2445,__node("MacroAccess",2445,14,31,2445,{ident:__wrap(name)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2445,22,__node("Ident",2445,22,"require"),[__wrap(path)],false,false)}},"statement",false,false,false);}else if(this.isObject(name)){requires=[];for(_arr=__toArray(this.pairs(name)), _i=0, _len=_arr.length;_i<_len;++_i){obj=_arr[_i];key=obj.key;value=obj.value;if(!this.isConst(key)){this.error("If providing an object to require!, all keys must be constant strings",key);}identName=this.value(key);if(identName.indexOf("/")!==-1){identName=identName.substring(__num(identName.lastIndexOf("/"))+1);}ident=this.ident(identName);if(this.isConst(value)){requires.push(__node("MacroAccess",2457,28,38,2457,{macroName:"let",macroData:{declarable:__node("MacroAccess",2457,32,37,2457,__node("MacroAccess",2457,32,31,2457,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2457,41,__node("Ident",2457,41,"require"),[__wrap(value)],false,false)}},"statement",false,false,false));}else if(this.isIdent(value)){path=this.name(value);requires.push(__node("MacroAccess",2460,28,38,2460,{macroName:"let",macroData:{declarable:__node("MacroAccess",2460,32,37,2460,__node("MacroAccess",2460,32,31,2460,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2460,41,__node("Ident",2460,41,"require"),[__wrap(path)],false,false)}},"statement",false,false,false));}else{this.error("If providing an object to require!, all values must be constant strings or idents",value);}}return this.block(requires);}else{return this.error("Expected either a constant string or ident or object",name);}};}.call(this));',params:[["ident","name","ident","Expression"]],names:"require!",id:129},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,arr,body,done,err,first,init,macroData,macroName,next,rest,result,results,step,test,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;init=macroData.init;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;if(err==null){err=this.tmp("err",true);}if(init==null){init=this.noop();}if(test==null){test=__const("true");}if(step==null){step=this.noop();}if(rest==null){rest=this.noop();}done=this.tmp("done",true,"function");if(!result){if(!step){return __node("Block",2570,1,[__wrap(init),__node("MacroAccess",2571,1,15,2571,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",2571,20,117,2571,{op:"",node:__node("Function",2571,20,[__node("Param",2571,21,__wrap(err),void 0,false,false,void 0)],__node("Block",2572,1,[__node("MacroAccess",2572,1,17,2572,{macroName:"if",macroData:{test:__node("MacroAccess",2572,15,20,2572,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",2573,1,39,2573,{macroName:"return",macroData:{node:__node("Call",2573,21,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",2574,1,17,2574,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",2575,1,39,2575,{macroName:"return",macroData:{node:__node("Call",2575,21,__wrap(done),[__const("null")],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2577,1,15,2577,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",2577,20,117,2577,{op:"",node:__node("Function",2577,20,[__node("Param",2577,21,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",2579,1,__wrap(next),[],false,false)],null);}else{first=this.tmp("first",true,"boolean");return __node("Block",2583,1,[__wrap(init),__node("MacroAccess",2584,1,38,2584,{macroName:"let",macroData:{declarable:__node("MacroAccess",2584,14,37,2584,__node("MacroAccess",2584,14,31,2584,{ident:__wrap(first)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",2585,1,15,2585,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",2585,20,117,2585,{op:"",node:__node("Function",2585,20,[__node("Param",2585,21,__wrap(err),void 0,false,false,void 0)],__node("Block",2586,1,[__node("MacroAccess",2586,1,17,2586,{macroName:"if",macroData:{test:__node("MacroAccess",2586,15,20,2586,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",2587,1,39,2587,{macroName:"return",macroData:{node:__node("Call",2587,21,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",2588,1,17,2588,{macroName:"if",macroData:{test:__wrap(first),body:__node("MacroAccess",2589,1,30,2589,{left:__wrap(first),op:":=",right:__const("false")},"statement",false,false,false),elseIfs:[],elseBody:__wrap(step)}},"statement",false,false,false),__node("MacroAccess",2592,1,17,2592,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",2593,1,39,2593,{macroName:"return",macroData:{node:__node("Call",2593,21,__wrap(done),[__const("null")],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2595,1,15,2595,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",2595,20,117,2595,{op:"",node:__node("Function",2595,20,[__node("Param",2595,21,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",2597,1,__wrap(next),[],false,false)],null);}}else{first=this.tmp("first",true,"boolean");value=this.tmp("value",true);arr=this.tmp("arr",true);return __node("Block",2603,1,[__wrap(init),__node("MacroAccess",2604,1,38,2604,{macroName:"let",macroData:{declarable:__node("MacroAccess",2604,12,37,2604,__node("MacroAccess",2604,12,31,2604,{ident:__wrap(first)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",2605,1,38,2605,{macroName:"let",macroData:{declarable:__node("MacroAccess",2605,12,37,2605,__node("MacroAccess",2605,12,31,2605,{ident:__wrap(arr)},"statement",false,false,false),"statement",false,false,false),value:__node("Array",2605,19,[])}},"statement",false,false,false),__node("MacroAccess",2606,1,15,2606,{macroName:"let",macroData:{ident:__wrap(next),func:__node("MacroAccess",2606,18,117,2606,{op:"",node:__node("Function",2606,18,[__node("Param",2606,19,__wrap(err),void 0,false,false,void 0),__node("Param",2606,24,__wrap(value),void 0,false,false,void 0)],__node("Block",2607,1,[__node("MacroAccess",2607,1,17,2607,{macroName:"if",macroData:{test:__node("MacroAccess",2607,13,20,2607,{op:"?",node:__wrap(err)},"statement",false,false,false),body:__node("MacroAccess",2608,1,39,2608,{macroName:"return",macroData:{node:__node("Call",2608,19,__wrap(done),[__wrap(err)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",2609,1,17,2609,{macroName:"if",macroData:{test:__wrap(first),body:__node("MacroAccess",2610,1,30,2610,{left:__wrap(first),op:":=",right:__const("false")},"statement",false,false,false),elseIfs:[],elseBody:__node("Block",2612,1,[__wrap(step),__node("MacroAccess",2613,1,17,2613,{macroName:"if",macroData:{test:__node("MacroAccess",2613,15,10,2613,{left:__node("Access",2613,15,__node("Args",2613,15),__node("Const",2613,26,"length")),inverted:false,op:"~>",right:__node("Const",2613,36,1)},"statement",false,false,false),body:__node("Call",2614,1,__node("Access",2614,1,__wrap(arr),__node("Const",2614,20,"push")),[__wrap(value)],false,false),elseIfs:[]}},"statement",false,false,false)],null)}},"statement",false,false,false),__node("MacroAccess",2615,1,17,2615,{macroName:"unless",macroData:{test:__wrap(test),body:__node("MacroAccess",2616,1,39,2616,{macroName:"return",macroData:{node:__node("Call",2616,19,__wrap(done),[__const("null"),__wrap(arr)],false,false)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__wrap(body)],null),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2618,1,15,2618,{macroName:"let",macroData:{ident:__wrap(done),func:__node("MacroAccess",2618,18,117,2618,{op:"",node:__node("Function",2618,18,[__node("Param",2618,19,__wrap(err),void 0,false,false,void 0),__node("Param",2618,24,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false),__node("Call",2620,1,__wrap(next),[],false,false)],null);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","init","choice",["ident","Statement"],["const",""]],["const",";"],["ident","test","choice",["ident","Logic"],["const",""]],["const",";"],["ident","step","choice",["ident","Statement"],["const",""]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:130},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,array,body,end,err,hasResult,inclusive,index,init,length,lengthCalc,macroData,macroName,next,parallelism,rest,result,results,start,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;hasResult=!!result;if(err==null){err=this.tmp("err",true);}init=[];if(rest==null){rest=this.noop();}value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(parallelism==null){parallelism=__node("Const",2636,25,1);}if(index==null){index=this.tmp("i",true,"number");}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;start=(_ref=this.callArgs(array))[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",2649,22,60,2649,{op:"+",node:__wrap(start)},"expression",false,false,false);}if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",2655,28,60,2655,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",2657,23,60,2657,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",2663,29,60,2663,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",2665,23,60,2665,{op:"+",node:__wrap(step)},"expression",false,false,false));}body=__node("Block",2668,1,[__node("MacroAccess",2668,1,38,2668,{macroName:"let",macroData:{declarable:__node("MacroAccess",2668,12,37,2668,__node("MacroAccess",2668,12,31,2668,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2668,21,49,2668,{left:__node("MacroAccess",2668,21,45,2668,{left:__wrap(index),inverted:false,op:"~*",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false),__wrap(body)],null);lengthCalc=__node("MacroAccess",2671,29,17,2671,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",2672,1,45,2672,{left:__node("MacroAccess",2672,10,49,2672,{left:__node("MacroAccess",2672,10,49,2672,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",2674,1,45,2674,{left:__node("MacroAccess",2674,10,49,2674,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false);if(!length){length=lengthCalc;}else{init.push(__node("MacroAccess",2678,22,38,2678,{macroName:"let",macroData:{declarable:__node("MacroAccess",2678,26,37,2678,__node("MacroAccess",2678,26,31,2678,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__wrap(lengthCalc)}},"statement",false,false,false));}}else{array=this.cache(array,init,"arr",true);body=__node("Block",2683,1,[__node("MacroAccess",2683,1,38,2683,{macroName:"let",macroData:{declarable:__node("MacroAccess",2683,12,37,2683,__node("MacroAccess",2683,12,31,2683,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",2683,21,__wrap(array),__wrap(index))}},"statement",false,false,false),__wrap(body)],null);if(!length){length=__node("MacroAccess",2687,23,60,2687,{op:"+",node:__node("Access",2687,25,__wrap(array),__node("Const",2687,32,"length"))},"expression",false,false,false);}else{init.push(__node("MacroAccess",2689,22,38,2689,{macroName:"let",macroData:{declarable:__node("MacroAccess",2689,26,37,2689,__node("MacroAccess",2689,26,31,2689,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2689,36,60,2689,{op:"+",node:__node("Access",2689,38,__wrap(array),__node("Const",2689,45,"length"))},"expression",false,false,false)}},"statement",false,false,false));}}return __node("Block",2692,1,[__wrap(init),__node("Call",2693,1,__node("Ident",2693,1,"__async"),[__node("MacroAccess",2693,15,60,2693,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__wrap(length),__wrap(hasResult),__node("MacroAccess",2694,10,117,2694,{op:"",node:__node("Function",2694,10,[__node("Param",2694,11,__wrap(index),void 0,false,false,void 0),__node("Param",2694,18,__wrap(next),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"expression",false,false,false),__node("MacroAccess",2695,9,17,2695,{macroName:"if",macroData:{test:__wrap(hasResult),body:__node("MacroAccess",2696,12,117,2696,{op:"",node:__node("Function",2696,12,[__node("Param",2696,13,__wrap(err),void 0,false,false,void 0),__node("Param",2696,18,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",2698,12,117,2698,{op:"",node:__node("Function",2698,12,[__node("Param",2698,13,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"expression",false,false,false)],false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:131},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,index,init,key,keys,macroData,macroName,next,object,own,parallelism,rest,result,results,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;own=type==="of";init=[];object=this.cache(object,init,"obj",true);if(rest==null){rest=this.noop();}index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}if(value){body=__node("Block",2714,1,[__node("MacroAccess",2714,1,38,2714,{macroName:"let",macroData:{declarable:__node("MacroAccess",2714,12,37,2714,__node("MacroAccess",2714,12,31,2714,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",2714,21,__wrap(object),__wrap(key))}},"statement",false,false,false),__wrap(body)],null);}keys=this.tmp("keys",true,"stringArray");return __node("Block",2719,1,[__wrap(init),__node("MacroAccess",2720,1,38,2720,{macroName:"let",macroData:{declarable:__node("MacroAccess",2720,10,37,2720,__node("MacroAccess",2720,10,31,2720,{ident:__wrap(keys)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2720,18,17,2720,{macroName:"if",macroData:{test:__wrap(own),body:__node("Call",2721,1,__node("Ident",2721,1,"__keys"),[__wrap(object)],false,false),elseIfs:[],elseBody:__node("Call",2723,1,__node("Ident",2723,1,"__allkeys"),[__wrap(object)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2724,1,131,2724,{macroName:"asyncfor",macroData:{parallelism:__wrap(parallelism),results:{err:__wrap(err),result:__wrap(result)},next:__wrap(next),value:__node("MacroAccess",2724,53,37,2724,__node("MacroAccess",2724,53,31,2724,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index)},array:__wrap(keys),body:__wrap(body),rest:__wrap(rest)}},"statement",false,false,false)],null);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:132},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,hasResult,index,iterator,macroData,macroName,next,parallelism,rest,result,results,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;results=macroData.results;next=macroData.next;value=macroData.value;index=macroData.index;iterator=macroData.iterator;body=macroData.body;rest=macroData.rest;err=(_ref=results!=null?results:{}).err;result=_ref.result;hasResult=!!result;if(rest==null){rest=this.noop();}if(index==null){index=this.tmp("i",true);}if(err==null){err=this.tmp("err",true);}if(parallelism==null){parallelism=__node("Const",2736,25,1);}return __node("Call",2738,9,__node("Ident",2738,9,"__asyncIter"),[__node("MacroAccess",2738,23,60,2738,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__node("Call",2738,37,__node("Ident",2738,37,"__iter"),[__wrap(iterator)],false,false),__wrap(hasResult),__node("MacroAccess",2739,8,117,2739,{op:"",node:__node("Function",2739,8,[__node("Param",2739,9,__wrap(value),void 0,false,false,void 0),__node("Param",2739,16,__wrap(index),void 0,false,false,void 0),__node("Param",2739,24,__wrap(next),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"expression",false,false,false),__node("MacroAccess",2740,7,17,2740,{macroName:"if",macroData:{test:__wrap(hasResult),body:__node("MacroAccess",2741,10,117,2741,{op:"",node:__node("Function",2741,10,[__node("Param",2741,11,__wrap(err),void 0,false,false,void 0),__node("Param",2741,16,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",2743,10,117,2743,{op:"",node:__node("Function",2743,10,[__node("Param",2743,11,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"statement",false,false,false)}},"expression",false,false,false)],false,false);};}.call(this));',params:[["ident","parallelism","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:"asyncfor",id:133},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,body,err,macroData,macroName,next,rest,result,results,step,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;next=macroData.next;test=macroData.test;step=macroData.step;body=macroData.body;rest=macroData.rest;if(macroName==="asyncuntil"){test=__node("MacroAccess",2748,19,3,2748,{op:"not",node:__wrap(test)},"expression",false,false,false);}if(rest==null){rest=this.noop();}err=(_ref=results!=null?results:{}).err;result=_ref.result;return __node("MacroAccess",2754,1,130,2754,{macroName:"asyncfor",macroData:{results:{err:__wrap(err),result:__wrap(result)},next:__wrap(next),test:__wrap(test),step:__wrap(step),body:__wrap(body),rest:__wrap(rest)}},"statement",false,false,false);};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","next","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","step","many","?","sequence",["const",","],["this","ident","Statement"]],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncwhile","asyncuntil"],id:134},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,body,current,done,elseBody,elseIf,elseIfs,err,i,innerTest,macroData,macroName,rest,result,results,test;macroName=macroFullData.macroName;macroData=macroFullData.macroData;results=macroData.results;done=macroData.done;test=macroData.test;body=macroData.body;elseIfs=macroData.elseIfs;elseBody=macroData.elseBody;rest=macroData.rest;if(macroName==="asyncunless"){test=__node("MacroAccess",2761,19,3,2761,{op:"not",node:__wrap(test)},"expression",false,false,false);}err=(_ref=results!=null?results:{}).err;result=_ref.result;if(rest==null){rest=this.noop();}if(elseBody){current=__node("MacroAccess",2767,13,117,2767,{op:"",node:__node("Function",2767,13,[__node("Param",2767,14,__wrap(done),void 0,false,false,void 0)],__wrap(elseBody),true,true,false,void 0,false,[])},"expression",false,false,false);}else{current=__node("MacroAccess",2769,13,117,2769,{op:"",node:__node("Function",2769,13,[__node("Param",2769,14,__wrap(done),void 0,false,false,void 0)],__node("Call",2769,24,__wrap(done),[],false,false),true,true,false,void 0,false,[])},"expression",false,false,false);}i=__num(elseIfs.length)-1;for(;i>=0;--i){elseIf=elseIfs[i];innerTest=elseIf.test;if(elseIf.type==="unless"){innerTest=__node("MacroAccess",2776,27,3,2776,{op:"not",node:__wrap(innerTest)},"expression",false,false,false);}current=__node("MacroAccess",2777,21,17,2777,{macroName:"if",macroData:{test:__wrap(innerTest),body:__node("MacroAccess",2778,10,117,2778,{op:"",node:__node("Function",2778,10,[__node("Param",2778,11,__wrap(done),void 0,false,false,void 0)],__wrap(elseIf.body),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);}current=__node("MacroAccess",2782,19,17,2782,{macroName:"if",macroData:{test:__wrap(test),body:__node("MacroAccess",2783,8,117,2783,{op:"",node:__node("Function",2783,8,[__node("Param",2783,9,__wrap(done),void 0,false,false,void 0)],__wrap(body),true,true,false,void 0,false,[])},"statement",false,false,false),elseIfs:[],elseBody:__wrap(current)}},"statement",false,false,false);if(!err&&!result){return __node("Call",2789,1,__wrap(current),[__node("MacroAccess",2789,19,117,2789,{op:"",node:__node("Function",2789,19,[],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}else if(!result){return __node("Call",2792,1,__wrap(current),[__node("MacroAccess",2792,19,117,2792,{op:"",node:__node("Function",2792,19,[__node("Param",2792,20,__wrap(err),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}else{if(err==null){err=this.tmp("err",true);}return __node("Call",2796,1,__wrap(current),[__node("MacroAccess",2796,19,117,2796,{op:"",node:__node("Function",2796,19,[__node("Param",2796,20,__wrap(err),void 0,false,false,void 0),__node("Param",2796,25,__wrap(result),void 0,false,false,void 0)],__wrap(rest),true,true,false,void 0,false,[])},"expression",false,false,false)],false,false);}};}.call(this));',params:[["ident","results","many","?","sequence",["ident","err","ident","Identifier"],["ident","result","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","<-"]],["ident","done","ident","Identifier"],["const",","],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]],["ident","elseIfs","many","*","sequence",["const","\n"],["const","else"],["ident","type","choice",["const","if"],["const","unless"]],["ident","test","ident","Logic"],["ident","body","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["ident","elseBody","many","?","sequence",["const","\n"],["const","else"],["this","choice",["ident","BodyNoEnd"],["sequence",["const",";"],["this","ident","Statement"]]]],["const","end"],["ident","rest","ident","DedentedBody"]],names:["asyncif","asyncunless"],id:135},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var func,key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;func=macroData.func;return this.def(key,func);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["ident","func","ident","FunctionDeclaration"]],names:"def",id:136},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var key,macroData,macroName,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;value=macroData.value;return this.def(key,value);};}.call(this));',params:[["ident","key","ident","ObjectKey"],["const","="],["ident","value","ident","ExpressionOrAssignment"]],names:"def",id:137},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var key,macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;key=macroData.key;return this.def(key,void 0);};}.call(this));',params:[["ident","key","ident","ObjectKey"]],names:"def",id:138},{code:'return (function(){"use strict";var __isArray,__owns,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _arr,_i,_len,_ref,_this,assignment,body,constructorCount,ctor,declaration,displayName,generic,genericArg,genericArgs,genericCache,genericParams,hasSuperclass,hasTopLevelConstructor,i,init,instanceofLets,instanceofs,item,key,macroData,macroName,makeClassFunc,makeClassIdent,name,parts,prototype,result,self,sup,superclass,superproto;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;name=macroData.name;generic=macroData.generic;superclass=macroData.superclass;body=macroData.body;if(generic!=null){genericArgs=[generic.head].concat(__toArray(generic.tail));}else{genericArgs=[];}if(this.isIdent(name)){declaration=name;}else if(this.isAccess(name)){assignment=name;if(this.isConst(this.child(name))&&typeof this.value(this.child(name))==="string"){if((_ref=this.ident(this.value(this.child(name))))!=null){name=_ref;}else{name=this.tmp("class",false,"function");}}else{name=this.tmp("class",false,"function");}}else{name=this.tmp("class",false,"function");}if(this.isIdent(superclass)&&this.name(superclass)==="Object"){superclass=null;}hasSuperclass=!!superclass;sup=superclass&&(this.isIdent(superclass)?superclass:this.tmp("super",false,"function"));init=[];if(!superclass){superproto=__node("Access",2831,11,__node("Ident",2831,11,"Object"),__node("Const",2831,19,"prototype"));}else{superproto=this.tmp(this.isIdent(sup)?__strnum(this.name(sup))+"_prototype":"super_prototype",false,"object");}prototype=this.tmp(this.isIdent(name)?__strnum(this.name(name))+"_prototype":"prototype",false,"object");if(superclass){init.push(__node("MacroAccess",2836,20,38,2836,{macroName:"let",macroData:{declarable:__node("MacroAccess",2836,24,37,2836,__node("MacroAccess",2836,24,31,2836,{ident:__wrap(superproto)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",2836,38,__wrap(sup),__node("Const",2836,44,"prototype"))}},"statement",false,false,false));init.push(__node("MacroAccess",2837,20,38,2837,{macroName:"let",macroData:{declarable:__node("MacroAccess",2837,24,37,2837,__node("MacroAccess",2837,24,31,2837,{ident:__wrap(prototype)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2837,37,30,2837,{left:__node("Access",2837,37,__wrap(name),__node("Const",2837,44,"prototype")),op:":=",right:__node("Object",2837,56,[],__wrap(superproto))},"expression",false,false,false)}},"statement",false,false,false));init.push(__node("MacroAccess",2838,21,30,2838,{left:__node("Access",2838,21,__wrap(prototype),__node("Const",2838,33,"constructor")),op:":=",right:__wrap(name)},"expression",false,false,false));}else{init.push(__node("MacroAccess",2840,20,38,2840,{macroName:"let",macroData:{declarable:__node("MacroAccess",2840,24,37,2840,__node("MacroAccess",2840,24,31,2840,{ident:__wrap(prototype)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",2840,37,__wrap(name),__node("Const",2840,44,"prototype"))}},"statement",false,false,false));}if(this.isIdent(name)){displayName=this["const"](this.name(name));}if(displayName!=null){if(genericArgs.length>0){parts=[displayName,this["const"]("<")];for(i=0, _len=genericArgs.length;i<_len;++i){genericArg=genericArgs[i];if(i>0){parts.push(this["const"](", "));}parts.push(__node("MacroAccess",2849,26,16,2849,{macroName:"if",macroData:{test:__node("MacroAccess",2849,29,8,2849,{left:__wrap(genericArg),inverted:false,op:"!~=",right:__const("null")},"expression",false,false,false),body:__node("Call",2849,56,__node("Ident",2849,56,"__name"),[__wrap(genericArg)],false,false),elseIfs:[],elseBody:__node("Const",2849,82,"")}},"expression",false,false,false));}parts.push(this["const"](">"));displayName=this.binaryChain("+",parts);}init.push(__node("MacroAccess",2852,21,30,2852,{left:__node("Access",2852,21,__wrap(name),__node("Const",2852,28,"displayName")),op:":=",right:__wrap(displayName)},"expression",false,false,false));}if(superclass){init.push(__node("If",2855,20,__node("Binary",2855,20,__node("Unary",2855,20,"typeof",__node("Access",2855,20,__wrap(sup),__node("Const",2855,26,"extended"))),"===",__node("Const",2855,20,"function")),__node("Call",2855,20,__node("Access",2855,20,__wrap(sup),__node("Const",2855,26,"extended")),[__wrap(name)],false,false),__node("Nothing",0,0),null));}function fixSupers(node){return _this.walk(node,function(node){var _arr,_arr2,_i,_len,args,child,superArg;if(_this.isSuper(node)){child=_this.superChild(node);if(child!=null){child=fixSupers(child);}for(_arr=[], _arr2=__toArray(_this.superArgs(node)), _i=0, _len=_arr2.length;_i<_len;++_i){superArg=_arr2[_i];_arr.push(fixSupers(superArg));}args=_arr;return _this.call(child!=null?__node("Access",2867,17,__wrap(superproto),__wrap(child)):!superclass?__node("Ident",2869,17,"Object"):__wrap(sup),[__node("This",2872,16)].concat(args),false,true);}});};body=fixSupers(this.macroExpandAll(body));constructorCount=0;this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){++constructorCount;}}return;});hasTopLevelConstructor=false;if(constructorCount===1){this.walk(body,function(node){var key;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"&&_this.isFunc(_this.right(node))&&!_this.funcIsCurried(_this.right(node))){hasTopLevelConstructor=true;}return node;}else{return node;}});}self=this.tmp("this");if(hasTopLevelConstructor){body=this.walk(body,function(node){var constructor,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",2909,18,16,2909,{macroName:"if",macroData:{test:__node("MacroAccess",2909,21,74,2909,{left:__node("Eval",2909,21,__node("Const",2909,27,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",2909,56,__node("Const",2909,62,"this")),elseIfs:[],elseBody:__node("Object",2909,74,[],__wrap(prototype))}},"statement",false,false,false)),value);init.unshift(__node("MacroAccess",2910,29,38,2910,{macroName:"let",macroData:{declarable:__node("MacroAccess",2910,33,37,2910,__node("MacroAccess",2910,33,31,2910,{ident:__wrap(name)},"statement",false,false,false),"statement",false,false,false),value:__wrap(constructor)}},"statement",false,false,false));return _this.noop();}}else{return node;}});}else if(constructorCount!==0){ctor=this.tmp("ctor",false,"function");result=this.tmp("ref");init.push(__node("Block",2918,1,[__node("MacroAccess",2918,1,38,2918,{macroName:"let",macroData:{declarable:__node("MacroAccess",2918,12,37,2918,__node("MacroAccess",2918,12,31,2918,{isMutable:"mutable",ident:__wrap(ctor)},"statement",false,false,false),"statement",false,false,false),value:__const("void")}},"statement",false,false,false),__node("MacroAccess",2919,1,15,2919,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",2919,18,117,2919,{op:"",node:__node("Function",2919,18,[],__node("Block",2920,1,[__node("MacroAccess",2920,1,38,2920,{macroName:"let",macroData:{declarable:__node("MacroAccess",2920,14,37,2920,__node("MacroAccess",2920,14,31,2920,{ident:__wrap(self)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2920,22,16,2920,{macroName:"if",macroData:{test:__node("MacroAccess",2920,25,74,2920,{left:__node("This",2920,25),inverted:false,op:"instanceof",right:__wrap(name)},"expression",false,false,false),body:__node("This",2920,52),elseIfs:[],elseBody:__node("Object",2920,62,[],__wrap(prototype))}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2922,1,17,2922,{macroName:"if",macroData:{test:__node("MacroAccess",2922,13,26,2922,{op:"isFunction!",node:__wrap(ctor)},"statement",false,false,false),body:__node("Block",2923,1,[__node("MacroAccess",2923,1,38,2923,{macroName:"let",macroData:{declarable:__node("MacroAccess",2923,16,37,2923,__node("MacroAccess",2923,16,31,2923,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2923,26,__wrap(ctor),[__wrap(self),__node("Spread",2923,40,__node("Args",2923,44))],false,true)}},"statement",false,false,false),__node("MacroAccess",2924,1,17,2924,{macroName:"if",macroData:{test:__node("MacroAccess",2924,15,5,2924,{left:__node("Call",2924,15,__node("Ident",2924,15,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__node("MacroAccess",2925,1,39,2925,{macroName:"return",macroData:{node:__wrap(result)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false)],null),elseIfs:[{type:"if",test:__wrap(hasSuperclass),body:__node("Block",2927,1,[__node("MacroAccess",2927,1,38,2927,{macroName:"let",macroData:{declarable:__node("MacroAccess",2927,16,37,2927,__node("MacroAccess",2927,16,31,2927,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2927,26,__wrap(sup),[__wrap(self),__node("Spread",2927,39,__node("Args",2927,43))],false,true)}},"statement",false,false,false),__node("MacroAccess",2928,1,17,2928,{macroName:"if",macroData:{test:__node("MacroAccess",2928,15,5,2928,{left:__node("Call",2928,15,__node("Ident",2928,15,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__node("MacroAccess",2929,1,39,2929,{macroName:"return",macroData:{node:__wrap(result)}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false)],null)}]}},"statement",false,false,false),__wrap(self)],null),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false)],null));body=this.walk(body,function(node){var constructor,firstArg,key,value;if(_this.isDef(node)){key=_this.left(node);if(_this.isConst(key)&&_this.value(key)==="constructor"){value=_this.right(node);if(_this.isCall(value)&&_this.isIdent(_this.callFunc(value))&&_this.name(_this.callFunc(value))==="__curry"&&_this.callArgs(value).length===2&&_this.isFunc(_this.callArgs(value)[1])){firstArg=_this.callArgs(value)[0];constructor=_this.callArgs(value)[1];constructor=_this.rewrap(_this.func(_this.funcParams(constructor),_this.funcBody(constructor),false,__node("MacroAccess",2943,20,16,2943,{macroName:"if",macroData:{test:__node("MacroAccess",2943,23,74,2943,{left:__node("Eval",2943,23,__node("Const",2943,29,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",2943,58,__node("Const",2943,64,"this")),elseIfs:[],elseBody:__node("Object",2943,76,[],__wrap(prototype))}},"statement",false,false,false),false),value);return __node("MacroAccess",2945,19,30,2945,{left:__wrap(ctor),op:":=",right:__node("Call",2945,28,__node("Ident",2945,28,"__curry"),[__wrap(firstArg),__wrap(constructor)],false,false)},"expression",false,false,false);}else if(_this.isFunc(value)){constructor=_this.rewrap(_this.func(_this.funcParams(value),_this.funcBody(value),false,__node("MacroAccess",2951,20,16,2951,{macroName:"if",macroData:{test:__node("MacroAccess",2951,23,74,2951,{left:__node("Eval",2951,23,__node("Const",2951,29,"this")),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("Eval",2951,58,__node("Const",2951,64,"this")),elseIfs:[],elseBody:__node("Object",2951,76,[],__wrap(prototype))}},"statement",false,false,false),_this.funcIsCurried(value)),value);return __node("MacroAccess",2953,19,30,2953,{left:__wrap(ctor),op:":=",right:__wrap(constructor)},"expression",false,false,false);}else{return __node("MacroAccess",2955,19,30,2955,{left:__wrap(ctor),op:":=",right:__wrap(value)},"expression",false,false,false);}}}});}else if(!superclass){init.push(__node("MacroAccess",2959,1,15,2959,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",2959,20,117,2959,{op:"",node:__node("Function",2959,20,[],__node("MacroAccess",2959,25,16,2959,{macroName:"if",macroData:{test:__node("MacroAccess",2959,28,74,2959,{left:__node("This",2959,28),inverted:false,op:"instanceof",right:__wrap(name)},"statement",false,false,false),body:__node("This",2959,55),elseIfs:[],elseBody:__node("Object",2959,65,[],__wrap(prototype))}},"statement",false,false,false),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false));}else{result=this.tmp("ref");init.push(__node("MacroAccess",2963,1,15,2963,{macroName:"let",macroData:{ident:__wrap(name),func:__node("MacroAccess",2963,20,117,2963,{op:"",node:__node("Function",2963,20,[],__node("Block",2964,1,[__node("MacroAccess",2964,1,38,2964,{macroName:"let",macroData:{declarable:__node("MacroAccess",2964,16,37,2964,__node("MacroAccess",2964,16,31,2964,{ident:__wrap(self)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",2964,24,16,2964,{macroName:"if",macroData:{test:__node("MacroAccess",2964,27,74,2964,{left:__node("This",2964,27),inverted:false,op:"instanceof",right:__wrap(name)},"expression",false,false,false),body:__node("This",2964,54),elseIfs:[],elseBody:__node("Object",2964,64,[],__wrap(prototype))}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",2965,1,38,2965,{macroName:"let",macroData:{declarable:__node("MacroAccess",2965,16,37,2965,__node("MacroAccess",2965,16,31,2965,{ident:__wrap(result)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",2965,26,__wrap(sup),[__wrap(self),__node("Spread",2965,39,__node("Args",2965,43))],false,true)}},"statement",false,false,false),__node("MacroAccess",2966,1,17,2966,{macroName:"if",macroData:{test:__node("MacroAccess",2966,15,5,2966,{left:__node("Call",2966,15,__node("Ident",2966,15,"Object"),[__wrap(result)],false,false),inverted:false,op:"==",right:__wrap(result)},"statement",false,false,false),body:__wrap(result),elseIfs:[],elseBody:__wrap(self)}},"statement",false,false,false)],null),true,false,false,void 0,false,[])},"statement",false,false,false)}},"statement",false,false,false));}function changeDefs(node){return _this.walk(node,function(node){var _ref,key,value;if(_this.isDef(node)){key=_this.left(node);if((_ref=_this.right(node))!=null){value=_ref;}else{value=__node("MacroAccess",2974,42,117,2974,{op:"",node:__node("Function",2974,42,[],__node("MacroAccess",2974,44,11,2974,{op:"throw",node:__node("Call",2974,50,__node("Ident",2974,50,"Error"),[__node("MacroAccess",2974,57,69,2974,{left:__node("MacroAccess",2974,57,69,2974,{left:__node("MacroAccess",2974,57,69,2974,{left:__node("MacroAccess",2974,57,69,2974,{left:__node("Const",2974,57,"Not implemented: "),op:"",right:__node("Call",2974,77,__node("Ident",2974,77,"__name"),[__node("Access",2974,84,__node("This",2974,84),__node("Const",2974,85,"constructor"))],false,false)},"expression",false,false,false),op:"",right:__node("Const",2974,57,".")},"expression",false,false,false),op:"",right:__wrap(key)},"expression",false,false,false),op:"",right:__node("Const",2974,57,"()")},"expression",false,false,false)],false,false)},"statement",false,false,false),true,false,false,void 0,false,[])},"expression",false,false,false);}return changeDefs(__node("MacroAccess",2975,25,30,2975,{left:__node("Access",2975,25,__wrap(prototype),__wrap(key)),op:":=",right:__wrap(value)},"expression",false,false,false));}});};body=changeDefs(body);body=this.walk(body,function(node){if(_this.isFunc(node)){if(!_this.funcIsBound(node)){return node;}}else if(_this.isThis(node)){return name;}});result=__node("MacroAccess",2985,29,104,2985,{macroName:"do",macroData:{locals:{ident:__wrap(sup),value:__wrap(superclass),rest:[]},body:__node("Block",2986,1,[__wrap(init),__wrap(body),__node("MacroAccess",2988,1,39,2988,{macroName:"return",macroData:{node:__wrap(name)}},"statement",false,false,false)],null)}},"statement",false,false,false);if(genericArgs.length>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeClassIdent=this.tmp("make",false,"function");instanceofs={};for(_i=0, _len=genericArgs.length;_i<_len;++_i){genericArg=genericArgs[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",3000,19,38,3000,{macroName:"let",macroData:{declarable:__node("MacroAccess",3000,23,37,3000,__node("MacroAccess",3000,23,31,3000,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",3000,30,__node("Ident",3000,30,"__getInstanceof"),[__wrap(genericArg)],false,false)}},"statement",false,false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",3012,26,__wrap(func),[__wrap(left)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",3018,1,[__wrap(instanceofLets),__wrap(result)],null);}makeClassFunc=this.func(genericParams,result,true,false);result=__node("Call",3021,20,__node("Ident",3021,20,"__genericFunc"),[__wrap(genericArgs.length),__wrap(makeClassFunc)],false,false);}if(declaration!=null){return __node("MacroAccess",3024,10,38,3024,{macroName:"let",macroData:{declarable:__node("MacroAccess",3024,14,37,3024,__node("MacroAccess",3024,14,31,3024,{ident:__wrap(declaration)},"statement",false,false,false),"statement",false,false,false),value:__wrap(result)}},"statement",false,false,false);}else if(assignment!=null){return __node("MacroAccess",3026,11,30,3026,{left:__wrap(assignment),op:":=",right:__wrap(result)},"expression",false,false,false);}else{return result;}};}.call(this));',params:[["ident","name","many","?","ident","SimpleAssignable"],["ident","generic","many","?","sequence",["const","<"],["ident","head","ident","Identifier"],["ident","tail","many","*","sequence",["const",","],["this","ident","Identifier"]],["const",">"]],["ident","superclass","many","?","sequence",["const","extends"],["this"]],["ident","body","many","?","ident","Body"]],names:"class",id:139},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){this.error("Can only use yield in a generator function");}return this.mutateLast(node||this.noop(),function(n){return _this["yield"](n);},true);};}.call(this));',params:[["ident","node","many","?","ident","Expression"]],names:"yield",id:140},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var err,index,init,item,iterator,length,macroData,macroName,node,received,send;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;if(!this.inGenerator){this.error("Can only use yield* in a generator function");}init=[];if(this.isType(node,"arrayLike")){index=this.tmp("i",false,"number");init.push(__node("MacroAccess",3043,20,38,3043,{macroName:"let",macroData:{declarable:__node("MacroAccess",3043,24,37,3043,__node("MacroAccess",3043,24,31,3043,{ident:__wrap(index)},"statement",false,false,false),"statement",false,false,false),value:__node("Const",3043,34,0)}},"statement",false,false,false));length=this.tmp("len",false,"number");node=this.cache(node,init,"arr",false);init.push(__node("MacroAccess",3046,20,38,3046,{macroName:"let",macroData:{declarable:__node("MacroAccess",3046,24,37,3046,__node("MacroAccess",3046,24,31,3046,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",3046,34,__wrap(node),__node("Const",3046,41,"length"))}},"statement",false,false,false));return __node("Block",3048,1,[__node("MacroAccess",3048,1,106,3048,{macroName:"for",macroData:{init:__wrap(init),test:__node("MacroAccess",3048,19,9,3048,{left:__wrap(index),inverted:false,op:"~<",right:__wrap(length)},"statement",false,false,false),step:__node("MacroAccess",3048,38,103,3048,{left:__wrap(index),op:"+=",right:__node("Const",3048,49,1)},"expression",false,false,false),body:__node("MacroAccess",3049,1,140,3049,{macroName:"yield",macroData:{node:__node("Access",3049,16,__wrap(node),__wrap(index))}},"statement",false,false,false)}},"statement",false,false,false),__const("void")],null);}else{iterator=this.cache(__node("Call",3052,33,__node("Ident",3052,33,"__iter"),[__wrap(node)],false,false),init,"iter",false);err=this.tmp("e",true);send=this.tmp("send");item=this.tmp("item");received=this.tmp("tmp");return __node("Block",3058,1,[__wrap(init),__node("MacroAccess",3059,1,38,3059,{macroName:"let",macroData:{declarable:__node("MacroAccess",3059,12,37,3059,__node("MacroAccess",3059,12,31,3059,{isMutable:"mutable",ident:__wrap(received)},"statement",false,false,false),"statement",false,false,false),value:__const("void")}},"statement",false,false,false),__node("MacroAccess",3060,1,38,3060,{macroName:"let",macroData:{declarable:__node("MacroAccess",3060,12,37,3060,__node("MacroAccess",3060,12,31,3060,{isMutable:"mutable",ident:__wrap(send)},"statement",false,false,false),"statement",false,false,false),value:__const("true")}},"statement",false,false,false),__node("MacroAccess",3062,1,108,3062,{macroName:"while",macroData:{test:__const("true"),body:__node("Block",3063,1,[__node("MacroAccess",3063,1,38,3063,{macroName:"let",macroData:{declarable:__node("MacroAccess",3063,14,37,3063,__node("MacroAccess",3063,14,31,3063,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",3063,22,16,3063,{macroName:"if",macroData:{test:__wrap(send),body:__node("Call",3063,36,__node("Access",3063,36,__wrap(iterator),__node("Const",3063,47,"send")),[__wrap(received)],false,false),elseIfs:[],elseBody:__node("Call",3063,67,__node("Access",3063,67,__wrap(iterator),__node("Const",3063,78,"throw")),[__wrap(received)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",3064,1,17,3064,{macroName:"if",macroData:{test:__node("Access",3064,13,__wrap(item),__node("Const",3064,20,"done")),body:__node("MacroAccess",3065,1,19,3065,{macroName:"break",macroData:{}},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false),__node("MacroAccess",3066,1,119,3066,{macroName:"try",macroData:{tryBody:__node("Block",3067,1,[__node("MacroAccess",3067,1,30,3067,{left:__wrap(received),op:":=",right:__node("MacroAccess",3067,25,140,3067,{macroName:"yield",macroData:{node:__node("Access",3067,31,__wrap(item),__node("Const",3067,38,"value"))}},"expression",false,false,false)},"statement",false,false,false),__node("MacroAccess",3068,1,30,3068,{left:__wrap(send),op:":=",right:__const("true")},"statement",false,false,false)],null),typedCatches:[],catchPart:{ident:__wrap(err),body:__node("Block",3070,1,[__node("MacroAccess",3070,1,30,3070,{left:__wrap(received),op:":=",right:__wrap(err)},"statement",false,false,false),__node("MacroAccess",3071,1,30,3071,{left:__wrap(send),op:":=",right:__const("false")},"statement",false,false,false)],null)}}},"statement",false,false,false)],null)}},"statement",false,false,false),__node("MacroAccess",3072,1,119,3072,{macroName:"try",macroData:{tryBody:__node("Call",3073,1,__node("Access",3073,1,__wrap(iterator),__node("Const",3073,21,"close")),[],false,false),typedCatches:[],catchPart:{ident:__wrap(err),body:__const("void")}}},"statement",false,false,false),__node("Access",3076,1,__wrap(item),__node("Const",3076,15,"value"))],null);}};}.call(this));',params:[["ident","node","ident","Expression"]],names:"yield*",id:141},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node,rest;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData.node;rest=macroData.rest;if(rest==null){rest=this.noop();}return __node("Block",3082,1,[__wrap(rest),__node("MacroAccess",3083,1,39,3083,{macroName:"return",macroData:{node:__wrap(node)}},"statement",false,false,false)],null);};}.call(this));',params:[["ident","node","ident","Expression"],["ident","rest","ident","DedentedBody"]],names:"returning",id:142},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var label,macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;label=macroData.label;node=macroData.node;return this.withLabel(node,label);};}.call(this));',params:[["ident","label","ident","Identifier"],["ident","node","choice",["ident","Statement"],["ident","Body"]]],names:"label!",id:145},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node,sync;macroName=macroFullData.macroName;macroData=macroFullData.macroData;sync=macroData.sync;node=macroData.node;if(this.isFunc(node)&&!this.funcIsGenerator(node)){this.error("promise! must be used with a generator function",node);}if(sync&&this.isFunc(node)){this.error("Use .sync() to retrieve asynchronously",sync);}if(!sync||this.isConst(sync)&&!this.value(sync)){return __node("Call",3616,11,__node("Ident",3616,11,"__promise"),[__wrap(node)],false,false);}else{return __node("Call",3618,11,__node("Ident",3618,11,"__promise"),[__wrap(node),__wrap(sync)],false,false);}};}.call(this));',params:[["ident","sync","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","node","ident","Expression"]],names:"promise!",id:154},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,sync;macroName=macroFullData.macroName;macroData=macroFullData.macroData;sync=macroData.sync;body=macroData.body;func=this.rewrap(this.func([],body,true,true,false,null,true),body);if(!sync||this.isConst(sync)&&!this.value(sync)){return __node("Call",3630,11,__node("Ident",3630,11,"__generatorToPromise"),[__node("Call",3630,35,__wrap(func),[],false,false)],false,false);}else{return __node("Call",3632,11,__node("Ident",3632,11,"__generatorToPromise"),[__node("Call",3632,35,__wrap(func),[],false,false),__wrap(sync)],false,false);}};}.call(this));',params:[["ident","sync","many","?","sequence",["const","("],["this","ident","Expression"],["const",")"]],["ident","body","ident","GeneratorBody"]],names:"promise!",id:155},{code:'return (function(){"use strict";var __strnum,__typeof;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _ref,array,body,end,inclusive,index,init,length,lengthCalc,macroData,macroName,parallelism,start,step,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;value=macroData.value;index=macroData.index;array=macroData.array;body=macroData.body;init=[];value=this.macroExpand1(value);length=null;if(index){length=index.length;index=index.value;}if(parallelism==null){parallelism=__node("Const",3854,25,1);}if(index==null){index=this.tmp("i",true,"number");}if(this.isCall(array)&&this.isIdent(this.callFunc(array))&&this.name(this.callFunc(array))==="__range"&&!this.callIsApply(array)){if(this.isArray(value)||this.isObject(value)){this.error("Cannot assign a number to a complex declarable",value);}value=value.ident;start=(_ref=this.callArgs(array))[0];end=_ref[1];step=_ref[2];inclusive=_ref[3];if(this.isConst(start)){if(typeof this.value(start)!=="number"){this.error("Cannot start with a non-number: "+__strnum(this.value(start)),start);}}else{start=__node("MacroAccess",3867,22,60,3867,{op:"+",node:__wrap(start)},"expression",false,false,false);}if(this.isConst(end)){if(typeof this.value(end)!=="number"){this.error("Cannot end with a non-number: "+__strnum(this.value(end)),end);}}else if(this.isComplex(end)){end=this.cache(__node("MacroAccess",3873,28,60,3873,{op:"+",node:__wrap(end)},"expression",false,false,false),init,"end",false);}else{init.push(__node("MacroAccess",3875,23,60,3875,{op:"+",node:__wrap(end)},"expression",false,false,false));}if(this.isConst(step)){if(typeof this.value(step)!=="number"){this.error("Cannot step with a non-number: "+__strnum(this.value(step)),step);}}else if(this.isComplex(step)){step=this.cache(__node("MacroAccess",3881,29,60,3881,{op:"+",node:__wrap(step)},"expression",false,false,false),init,"step",false);}else{init.push(__node("MacroAccess",3883,23,60,3883,{op:"+",node:__wrap(step)},"expression",false,false,false));}body=__node("Block",3886,1,[__node("MacroAccess",3886,1,38,3886,{macroName:"let",macroData:{declarable:__node("MacroAccess",3886,12,37,3886,__node("MacroAccess",3886,12,31,3886,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",3886,21,49,3886,{left:__node("MacroAccess",3886,21,45,3886,{left:__wrap(index),inverted:false,op:"~*",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(start)},"expression",false,false,false)}},"statement",false,false,false),__wrap(body)],null);lengthCalc=__node("MacroAccess",3889,29,17,3889,{macroName:"if",macroData:{test:__wrap(inclusive),body:__node("MacroAccess",3890,1,45,3890,{left:__node("MacroAccess",3890,10,49,3890,{left:__node("MacroAccess",3890,10,49,3890,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~+",right:__wrap(step)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",3892,1,45,3892,{left:__node("MacroAccess",3892,10,49,3892,{left:__wrap(end),inverted:false,op:"~-",right:__wrap(start)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__wrap(step)},"statement",false,false,false)}},"expression",false,false,false);if(!length){length=lengthCalc;}else{init.push(__node("MacroAccess",3896,22,38,3896,{macroName:"let",macroData:{declarable:__node("MacroAccess",3896,26,37,3896,__node("MacroAccess",3896,26,31,3896,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__wrap(lengthCalc)}},"statement",false,false,false));}}else{array=this.cache(array,init,"arr",true);body=__node("Block",3901,1,[__node("MacroAccess",3901,1,38,3901,{macroName:"let",macroData:{declarable:__node("MacroAccess",3901,12,37,3901,__node("MacroAccess",3901,12,31,3901,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",3901,21,__wrap(array),__wrap(index))}},"statement",false,false,false),__wrap(body)],null);if(!length){length=__node("MacroAccess",3905,23,60,3905,{op:"+",node:__node("Access",3905,25,__wrap(array),__node("Const",3905,32,"length"))},"expression",false,false,false);}else{init.push(__node("MacroAccess",3907,22,38,3907,{macroName:"let",macroData:{declarable:__node("MacroAccess",3907,26,37,3907,__node("MacroAccess",3907,26,31,3907,{ident:__wrap(length)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",3907,36,60,3907,{op:"+",node:__node("Access",3907,38,__wrap(array),__node("Const",3907,45,"length"))},"expression",false,false,false)}},"statement",false,false,false));}}return __node("Block",3910,1,[__wrap(init),__node("Call",3911,1,__node("Ident",3911,1,"__promiseLoop"),[__node("MacroAccess",3911,22,60,3911,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__wrap(length),__node("Call",3911,45,__node("Ident",3911,45,"__promise"),[__node("MacroAccess",3911,57,117,3911,{op:"",node:__node("Function",3911,57,[__node("Param",3911,58,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,true,[])},"expression",false,false,false)],false,false)],false,false)],null);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["ident","value","ident","Identifier"],["ident","length","many","?","sequence",["const",","],["this","ident","Identifier"]]],["const","in"],["ident","array"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:163},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,index,init,key,keys,macroData,macroName,object,own,parallelism,type,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;key=macroData.key;value=macroData.value;type=macroData.type;object=macroData.object;body=macroData.body;own=type==="of";init=[];object=this.cache(object,init,"obj",true);index=null;if(value){index=value.index;value=this.macroExpand1(value.value);}if(value){body=__node("Block",3924,1,[__node("MacroAccess",3924,1,38,3924,{macroName:"let",macroData:{declarable:__node("MacroAccess",3924,14,37,3924,__node("MacroAccess",3924,14,31,3924,{ident:__wrap(value)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",3924,23,__wrap(object),__wrap(key))}},"statement",false,false,false),__wrap(body)],null);}keys=this.tmp("keys",true,"stringArray");return __node("Block",3929,1,[__wrap(init),__node("MacroAccess",3930,1,38,3930,{macroName:"let",macroData:{declarable:__node("MacroAccess",3930,12,37,3930,__node("MacroAccess",3930,12,31,3930,{ident:__wrap(keys)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",3930,20,17,3930,{macroName:"if",macroData:{test:__wrap(own),body:__node("Call",3931,1,__node("Ident",3931,1,"__keys"),[__wrap(object)],false,false),elseIfs:[],elseBody:__node("Call",3933,1,__node("Ident",3933,1,"__allkeys"),[__wrap(object)],false,false)}},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",3934,1,163,3934,{macroName:"promisefor",macroData:{parallelism:__wrap(parallelism),value:__node("MacroAccess",3934,33,37,3934,__node("MacroAccess",3934,33,31,3934,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),index:{value:__wrap(index)},array:__wrap(keys),body:__wrap(body)}},"statement",false,false,false)],null);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","key","ident","Identifier"],["ident","value","many","?","sequence",["const",","],["ident","value","ident","Declarable"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]]],["ident","type","choice",["const","of"],["const","ofall"]],["ident","object"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:164},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,index,iterator,macroData,macroName,parallelism,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;parallelism=macroData.parallelism;value=macroData.value;index=macroData.index;iterator=macroData.iterator;body=macroData.body;if(index==null){index=this.tmp("i",true);}return __node("Call",3941,1,__node("Ident",3941,1,"__promiseIter"),[__node("MacroAccess",3941,22,60,3941,{op:"+",node:__wrap(parallelism)},"expression",false,false,false),__node("Call",3941,36,__node("Ident",3941,36,"__iter"),[__wrap(iterator)],false,false),__node("Call",3941,55,__node("Ident",3941,55,"__promise"),[__node("MacroAccess",3941,67,117,3941,{op:"",node:__node("Function",3941,67,[__node("Param",3941,68,__wrap(value),void 0,false,false,void 0),__node("Param",3941,75,__wrap(index),void 0,false,false,void 0)],__wrap(body),true,false,false,void 0,true,[])},"expression",false,false,false)],false,false)],false,false);};}.call(this));',params:[["const","("],["ident","parallelism","ident","Expression"],["const",")"],["ident","value","ident","Identifier"],["ident","index","many","?","sequence",["const",","],["this","ident","Identifier"]],["const","from"],["ident","iterator"],["ident","body","ident","GeneratorBody"]],names:"promisefor",id:165},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.line());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__LINE__",id:166},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.column());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__COLUMN__",id:167},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.file());};}.call(this));',options:{type:"string"},params:[["const",""]],names:"__FILE__",id:168},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](new Date().getTime());};}.call(this));',options:{type:"number"},params:[["const",""]],names:"__DATEMSEC__",id:169},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName;macroName=macroFullData.macroName;macroData=macroFullData.macroData;return this["const"](this.version());};}.call(this));',options:{type:"string"},params:[["const",""]],names:"__VERSION__",id:170}],binaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&&",right);};}.call(this));',operators:"and",options:{precedence:1},id:1},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"||",right);};}.call(this));',operators:"or",options:{precedence:1},id:2},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"===",right);};}.call(this));',operators:"==",options:{precedence:2,maximum:1,type:"boolean"},id:5},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",43,7,3,43,{op:"not",node:__node("MacroAccess",43,13,5,43,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"!=",options:{precedence:2,maximum:1,type:"boolean"},id:6},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"==",right);};}.call(this));',operators:"~=",options:{precedence:2,maximum:1,type:"boolean"},id:7},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",49,7,3,49,{op:"not",node:__node("MacroAccess",49,13,7,49,{left:__wrap(left),inverted:false,op:"~=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"!~=",options:{precedence:2,maximum:1,type:"boolean"},id:8},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,op==="~<"&&"<"||"<=",right);};}.call(this));',operators:["~<","~<="],options:{precedence:2,maximum:1,type:"boolean"},id:9},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return op==="~>"&&__node("MacroAccess",57,23,3,57,{op:"not",node:__node("MacroAccess",57,29,9,57,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false)||__node("MacroAccess",57,55,3,57,{op:"not",node:__node("MacroAccess",57,61,9,57,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:["~>","~>="],options:{precedence:2,maximum:1,type:"boolean"},id:10},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){return this.binary(this.binary(this["const"](""),"+",left),"+",right);}else if(this.isConst(left)&&this.value(left)===""&&this.isType(right,"string")){return right;}else if(this.isConst(right)&&this.value(right)===""&&this.isType(left,"string")){return left;}else{return this.binary(left,"+",right);}};}.call(this));',operators:"~&",options:{precedence:7,type:"string"},id:29},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~\\\\"){return __node("Call",315,9,__node("Access",315,9,__node("Ident",315,9,"Math"),__node("Const",315,15,"floor")),[__wrap(this.binary(left,"/",right))],false,false);}else if(op==="~*"){return this.binary(left,"*",right);}else if(op==="~/"){return this.binary(left,"/",right);}else{return this.binary(left,"%",right);}};}.call(this));',operators:["~*","~/","~%","~\\"],options:{precedence:11,type:"number"},id:45},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~+"){if(!this.isType(right,"numeric")){return this.binary(left,"-",__node("MacroAccess",360,30,48,360,{op:"~-",node:__wrap(right)},"expression",false,false,false));}else{if(!this.isType(left,"numeric")){left=__node("MacroAccess",363,21,48,363,{op:"~+",node:__wrap(left)},"expression",false,false,false);}return this.binary(left,"+",right);}}else{return this.binary(left,"-",right);}};}.call(this));',operators:["~+","~-"],options:{precedence:10,type:"number"},id:49},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,value;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===0){return __node("Block",373,1,[__wrap(left),__node("Const",374,9,1)],null);}else if(value===0.5){return __node("Call",376,18,__node("Access",376,18,__node("Ident",376,18,"Math"),__node("Const",376,24,"sqrt")),[__wrap(left)],false,false);}else if(value===1){return __node("MacroAccess",378,18,48,378,{op:"~+",node:__wrap(left)},"expression",false,false,false);}else if(value===2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",381,13,45,381,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false);});}else if(value===3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",384,13,45,384,{left:__node("MacroAccess",384,13,45,384,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false);});}else if(value===-0.5){return __node("MacroAccess",386,18,45,386,{left:__node("Const",386,19,1),inverted:false,op:"~/",right:__node("Call",386,23,__node("Access",386,23,__node("Ident",386,23,"Math"),__node("Const",386,29,"sqrt")),[__wrap(left)],false,false)},"expression",false,false,false);}else if(value===-1){return __node("MacroAccess",388,18,45,388,{left:__node("Const",388,19,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false);}else if(value===-2){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",391,13,45,391,{left:__node("Const",391,14,1),inverted:false,op:"~/",right:__node("MacroAccess",391,20,45,391,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false)},"expression",false,false,false);});}else if(value===-3){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",394,13,45,394,{left:__node("Const",394,14,1),inverted:false,op:"~/",right:__node("MacroAccess",394,20,45,394,{left:__node("MacroAccess",394,20,45,394,{left:__wrap(setLeft),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__wrap(left)},"expression",false,false,false)},"expression",false,false,false);});}}return __node("Call",395,7,__node("Access",395,7,__node("Ident",395,7,"Math"),__node("Const",395,13,"pow")),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"~^",options:{precedence:12,rightToLeft:!0,type:"number"},id:50},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="~bitlshift"){return this.binary(left,"<<",right);}else if(op==="~bitrshift"){return this.binary(left,">>",right);}else{return this.binary(left,">>>",right);}};}.call(this));',operators:["~bitlshift","~bitrshift","~biturshift"],options:{precedence:9,maximum:1,type:"number"},id:54},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",555,7,50,555,{left:__node("MacroAccess",555,7,60,555,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~^",right:__node("MacroAccess",555,17,60,555,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"^",options:{precedence:12,rightToLeft:!0,type:"number"},id:62},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="*"){return __node("MacroAccess",563,9,45,563,{left:__node("MacroAccess",563,9,60,563,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~*",right:__node("MacroAccess",563,19,60,563,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="/"){return __node("MacroAccess",565,9,45,565,{left:__node("MacroAccess",565,9,60,565,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~/",right:__node("MacroAccess",565,19,60,565,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="%"){return __node("MacroAccess",567,9,45,567,{left:__node("MacroAccess",567,9,60,567,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~%",right:__node("MacroAccess",567,19,60,567,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",569,9,45,569,{left:__node("MacroAccess",569,9,60,569,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~\\\\",right:__node("MacroAccess",569,19,60,569,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["*","/","%","\\"],options:{precedence:11,type:"number"},id:64},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="+"){return __node("MacroAccess",576,9,49,576,{left:__node("MacroAccess",576,9,60,576,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~+",right:__node("MacroAccess",576,19,60,576,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",578,9,49,578,{left:__node("MacroAccess",578,9,60,578,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~-",right:__node("MacroAccess",578,19,60,578,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["+","-"],options:{precedence:10,type:"number"},id:66},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op==="bitlshift"){return __node("MacroAccess",582,9,54,582,{left:__node("MacroAccess",582,9,60,582,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitlshift",right:__node("MacroAccess",582,27,60,582,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitrshift"){return __node("MacroAccess",584,9,54,584,{left:__node("MacroAccess",584,9,60,584,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitrshift",right:__node("MacroAccess",584,27,60,584,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",586,9,54,586,{left:__node("MacroAccess",586,9,60,586,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~biturshift",right:__node("MacroAccess",586,28,60,586,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:["bitlshift","bitrshift","biturshift"],options:{precedence:9,maximum:1,type:"number"},id:67},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isType(left,"stringOrNumber")){if(!this.hasType(left,"number")){left=__node("Call",595,11,__node("Ident",595,11,"__str"),[__wrap(left)],false,false);}else{left=__node("Call",597,11,__node("Ident",597,11,"__strnum"),[__wrap(left)],false,false);}}if(!this.isType(right,"stringOrNumber")){if(!this.hasType(right,"number")){right=__node("Call",600,11,__node("Ident",600,11,"__str"),[__wrap(right)],false,false);}else{right=__node("Call",602,11,__node("Ident",602,11,"__strnum"),[__wrap(right)],false,false);}}return __node("MacroAccess",603,7,29,603,{left:__wrap(left),inverted:false,op:"~&",right:__wrap(right)},"expression",false,false,false);};}.call(this));',operators:"&",options:{precedence:7,type:"string",label:"stringConcat"},id:69},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",618,1,[__wrap(left),__const("false")],null);}else{return __const("false");}}else if(elements.length===1){return __node("MacroAccess",623,11,5,623,{left:__wrap(left),inverted:false,op:"==",right:__wrap(elements[0])},"expression",false,false,false);}else{f=function(i,current,left){if(i<elements.length){return f(+i+1,__node("MacroAccess",627,25,2,627,{left:__wrap(current),inverted:false,op:"or",right:__node("MacroAccess",627,37,5,627,{left:__wrap(left),inverted:false,op:"==",right:__wrap(elements[i])},"expression",false,false,false)},"expression",false,false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){return f(1,__node("MacroAccess",631,18,5,631,{left:__wrap(setLeft),inverted:false,op:"==",right:__wrap(elements[0])},"expression",false,false,false),left);});}}else{return __node("Call",633,9,__node("Ident",633,9,"__in"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"in",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:71},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(right,"in",left);};}.call(this));',operators:"haskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:72},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",641,7,__node("Ident",641,7,"__owns"),[__wrap(left),__wrap(right)],false,true);};}.call(this));',operators:"ownskey",options:{precedence:6,maximum:1,invertible:!0,type:"boolean",label:"ownership"},id:73},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isIdent(right)){if(this.name(right)==="String"){return __node("MacroAccess",646,18,23,646,{op:"isString!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Number"){return __node("MacroAccess",648,18,24,648,{op:"isNumber!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Boolean"){return __node("MacroAccess",650,18,25,650,{op:"isBoolean!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Function"){return __node("MacroAccess",652,18,26,652,{op:"isFunction!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Array"){return __node("MacroAccess",654,18,27,654,{op:"isArray!",node:__wrap(left)},"expression",false,false,false);}else if(this.name(right)==="Object"){return __node("MacroAccess",656,18,28,656,{op:"isObject!",node:__wrap(left)},"expression",false,false,false);}}return this.binary(left,"instanceof",right);};}.call(this));',operators:"instanceof",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:74},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",674,7,__node("Ident",674,7,"__cmp"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"<=>",options:{precedence:5,maximum:1,type:"number"},id:75},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",677,7,5,677,{left:__node("MacroAccess",677,7,64,677,{left:__wrap(left),inverted:false,op:"%",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",677,26,0)},"expression",false,false,false);};}.call(this));',operators:"%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:76},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",680,7,5,680,{left:__node("MacroAccess",680,7,45,680,{left:__wrap(left),inverted:false,op:"~%",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",680,27,0)},"expression",false,false,false);};}.call(this));',operators:"~%%",options:{precedence:2,maximum:1,invertible:!0,type:"boolean"},id:77},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",718,13,9,718,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",720,13,9,720,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("MacroAccess",723,13,9,723,{left:__wrap(left),inverted:false,op:"~<",right:__node("Call",723,22,__node("Ident",723,22,"__num"),[__wrap(right)],false,false)},"expression",false,false,false);}else{return __node("MacroAccess",725,13,9,725,{left:__wrap(left),inverted:false,op:"~<=",right:__node("Call",725,23,__node("Ident",725,23,"__num"),[__wrap(right)],false,false)},"expression",false,false,false);}}else if(this.isType(left,"string")){if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",729,13,9,729,{left:__wrap(left),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",731,13,9,731,{left:__wrap(left),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("MacroAccess",734,13,9,734,{left:__wrap(left),inverted:false,op:"~<",right:__node("Call",734,22,__node("Ident",734,22,"__str"),[__wrap(right)],false,false)},"expression",false,false,false);}else{return __node("MacroAccess",736,13,9,736,{left:__wrap(left),inverted:false,op:"~<=",right:__node("Call",736,23,__node("Ident",736,23,"__str"),[__wrap(right)],false,false)},"expression",false,false,false);}}else if(this.isType(right,"number")){if(op==="<"){return __node("MacroAccess",739,11,9,739,{left:__node("Call",739,11,__node("Ident",739,11,"__num"),[__wrap(left)],false,false),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",741,11,9,741,{left:__node("Call",741,11,__node("Ident",741,11,"__num"),[__wrap(left)],false,false),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(this.isType(right,"string")){if(op==="<"){return __node("MacroAccess",744,11,9,744,{left:__node("Call",744,11,__node("Ident",744,11,"__str"),[__wrap(left)],false,false),inverted:false,op:"~<",right:__wrap(right)},"expression",false,false,false);}else{return __node("MacroAccess",746,11,9,746,{left:__node("Call",746,11,__node("Ident",746,11,"__str"),[__wrap(left)],false,false),inverted:false,op:"~<=",right:__wrap(right)},"expression",false,false,false);}}else if(op==="<"){return __node("Call",748,9,__node("Ident",748,9,"__lt"),[__wrap(left),__wrap(right)],false,false);}else{return __node("Call",750,9,__node("Ident",750,9,"__lte"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:["<","<="],options:{precedence:2,maximum:1,type:"boolean"},id:78},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(op===">"){return __node("MacroAccess",754,9,3,754,{op:"not",node:__node("MacroAccess",754,15,78,754,{left:__wrap(left),inverted:false,op:"<=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",756,9,3,756,{op:"not",node:__node("MacroAccess",756,15,78,756,{left:__wrap(left),inverted:false,op:"<",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:[">",">="],options:{precedence:2,maximum:1,type:"boolean"},id:79},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",761,11,16,761,{macroName:"if",macroData:{test:__node("MacroAccess",761,14,9,761,{left:__wrap(setLeft),inverted:false,op:"~<",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"~min",options:{precedence:8},id:80},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",766,11,16,766,{macroName:"if",macroData:{test:__node("MacroAccess",766,14,10,766,{left:__wrap(setLeft),inverted:false,op:"~>",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"~max",options:{precedence:8},id:81},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",771,11,16,771,{macroName:"if",macroData:{test:__node("MacroAccess",771,14,78,771,{left:__wrap(setLeft),inverted:false,op:"<",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"min",options:{precedence:8},id:82},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",776,11,16,776,{macroName:"if",macroData:{test:__node("MacroAccess",776,14,79,776,{left:__wrap(setLeft),inverted:false,op:">",right:__wrap(setRight)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});});};}.call(this));',operators:"max",options:{precedence:8},id:83},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",779,7,__node("Ident",779,7,"__xor"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"xor",options:{precedence:1},id:84},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",783,9,16,783,{macroName:"if",macroData:{test:__node("MacroAccess",783,12,20,783,{op:"?",node:__wrap(setLeft)},"expression",false,false,false),body:__wrap(left),elseIfs:[],elseBody:__wrap(right)}},"expression",false,false,false);});};}.call(this));',operators:"?",options:{precedence:1},id:85},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"&",right);};}.call(this));',operators:"~bitand",options:{precedence:1,type:"number"},id:92},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"|",right);};}.call(this));',operators:"~bitor",options:{precedence:1,type:"number"},id:93},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.binary(left,"^",right);};}.call(this));',operators:"~bitxor",options:{precedence:1,type:"number"},id:94},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",851,7,92,851,{left:__node("MacroAccess",851,7,60,851,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitand",right:__node("MacroAccess",851,22,60,851,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitand",options:{precedence:1,type:"number"},id:96},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",854,7,93,854,{left:__node("MacroAccess",854,7,60,854,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitor",right:__node("MacroAccess",854,21,60,854,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitor",options:{precedence:1,type:"number"},id:97},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",857,7,94,857,{left:__node("MacroAccess",857,7,60,857,{op:"+",node:__wrap(left)},"expression",false,false,false),inverted:false,op:"~bitxor",right:__node("MacroAccess",857,22,60,857,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitxor",options:{precedence:1,type:"number"},id:98},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",1127,7,__node("Ident",1127,7,"__range"),[__wrap(left),__wrap(right),__node("Const",1127,31,1),__const("true")],false,false);};}.call(this));',operators:"to",options:{maximum:1,precedence:4,type:"array"},id:110},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",1130,7,__node("Ident",1130,7,"__range"),[__wrap(left),__wrap(right),__node("Const",1130,31,1),__const("false")],false,false);};}.call(this));',operators:"til",options:{maximum:1,precedence:4,type:"array"},id:111},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var callArgs,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.hasType(right,"number")){this.error("Must provide a number to the \'by\' operator",right);}if(this.isConst(right)&&this.value(right)===0){this.error("\'by\' step must be non-zero",right);}if(this.isCall(left)&&this.isIdent(this.callFunc(left))&&this.name(this.callFunc(left))==="__range"&&!this.callIsApply(left)){callArgs=this.callArgs(left);return __node("Call",1139,9,__node("Ident",1139,9,"__range"),[__wrap(callArgs[0]),__wrap(callArgs[1]),__wrap(right),__wrap(callArgs[3])],false,false);}else{if(this.isConst(right)&&__num(this.value(right))%1!==0){this.error("\'by\' step must be an integer",right);}return __node("Call",1143,9,__node("Ident",1143,9,"__step"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"by",options:{maximum:1,precedence:3,type:"array"},id:112},{code:'return (function(){"use strict";var __lt,__num,__typeof;__lt=function(x,y){var type;type=typeof x;if(type!=="number"&&type!=="string"){throw TypeError("Cannot compare a non-number/string: "+type);}else if(type!==typeof y){throw TypeError("Cannot compare elements of different types: "+type+" vs "+typeof y);}else{return x<y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var element,elements,f,left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isArray(right)){elements=this.elements(right);if(elements.length===0){if(this.isComplex(left)){return __node("Block",2007,1,[__wrap(left),__const("false")],null);}else{return __const("false");}}else if(elements.length===1){element=elements[0];return __node("MacroAccess",2013,11,74,2013,{left:__wrap(left),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false);}else{f=function(i,current,left){var element;if(__lt(i,elements.length)){element=elements[i];return f(__num(i)+1,__node("MacroAccess",2018,24,2,2018,{left:__wrap(current),inverted:false,op:"or",right:__node("MacroAccess",2018,36,74,2018,{left:__wrap(left),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false)},"expression",false,false,false),left);}else{return current;}};return this.maybeCache(left,function(setLeft,left){var element;element=elements[0];return f(1,__node("MacroAccess",2023,18,74,2023,{left:__wrap(setLeft),inverted:false,op:"instanceof",right:__wrap(element)},"expression",false,false,false),left);});}}else{return __node("Call",2025,9,__node("Ident",2025,9,"__instanceofsome"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"instanceofsome",options:{precedence:6,maximum:1,invertible:!0,type:"boolean"},id:118},{code:'return (function(){"use strict";var __is,__num,__typeof;__is=typeof Object.is==="function"?Object.is:function(x,y){if(x===y){return x!==0||1/x===1/y;}else{return x!==x&&y!==y;}};__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _this,left,op,result,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.hasType(left,"number")&&this.hasType(right,"number")){if(this.isConst(left)){if(this.isConst(right)){result=__is(this.value(left),this.value(right));return __wrap(result);}else if(typeof this.value(left)==="number"&&isNaN(this.value(left))){return this.maybeCache(right,function(setRight,right){return __node("MacroAccess",3103,17,6,3103,{left:__wrap(setRight),inverted:false,op:"!=",right:__wrap(right)},"expression",false,false,false);});}else if(this.value(left)===0){return this.maybeCache(right,function(setRight,right){if(1/__num(_this.value(left))<0){return __node("MacroAccess",3107,19,1,3107,{left:__node("MacroAccess",3107,19,5,3107,{left:__wrap(setRight),inverted:false,op:"==",right:__node("Const",3107,34,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",3107,39,78,3107,{left:__node("MacroAccess",3107,39,45,3107,{left:__node("Const",3107,40,1),inverted:false,op:"~/",right:__wrap(right)},"expression",false,false,false),inverted:false,op:"<",right:__node("Const",3107,54,0)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",3109,19,1,3109,{left:__node("MacroAccess",3109,19,5,3109,{left:__wrap(setRight),inverted:false,op:"==",right:__node("Const",3109,34,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",3109,39,79,3109,{left:__node("MacroAccess",3109,39,45,3109,{left:__node("Const",3109,40,1),inverted:false,op:"~/",right:__wrap(right)},"expression",false,false,false),inverted:false,op:">",right:__node("Const",3109,54,0)},"expression",false,false,false)},"expression",false,false,false);}});}else{return __node("MacroAccess",3111,15,5,3111,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}}else if(this.isConst(right)){if(typeof this.value(right)==="number"&&isNaN(this.value(right))){return this.maybeCache(left,function(setLeft,left){return __node("MacroAccess",3115,15,6,3115,{left:__wrap(setLeft),inverted:false,op:"!=",right:__wrap(left)},"expression",false,false,false);});}else if(this.value(right)===0){return this.maybeCache(left,function(setLeft,left){if(1/__num(_this.value(right))<0){return __node("MacroAccess",3119,17,1,3119,{left:__node("MacroAccess",3119,17,5,3119,{left:__wrap(setLeft),inverted:false,op:"==",right:__node("Const",3119,31,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",3119,36,78,3119,{left:__node("MacroAccess",3119,36,45,3119,{left:__node("Const",3119,37,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false),inverted:false,op:"<",right:__node("Const",3119,50,0)},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",3121,17,1,3121,{left:__node("MacroAccess",3121,17,5,3121,{left:__wrap(setLeft),inverted:false,op:"==",right:__node("Const",3121,31,0)},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",3121,36,79,3121,{left:__node("MacroAccess",3121,36,45,3121,{left:__node("Const",3121,37,1),inverted:false,op:"~/",right:__wrap(left)},"expression",false,false,false),inverted:false,op:">",right:__node("Const",3121,50,0)},"expression",false,false,false)},"expression",false,false,false);}});}else{return __node("MacroAccess",3123,13,5,3123,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}}else{return __node("Call",3125,11,__node("Ident",3125,11,"__is"),[__wrap(left),__wrap(right)],false,false);}}else{return __node("MacroAccess",3127,9,5,3127,{left:__wrap(left),inverted:false,op:"==",right:__wrap(right)},"expression",false,false,false);}};}.call(this));',operators:"is",options:{precedence:2,maximum:1,type:"boolean"},id:143},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("MacroAccess",3130,7,3,3130,{op:"not",node:__node("MacroAccess",3130,13,143,3130,{left:__wrap(left),inverted:false,op:"is",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"isnt",options:{precedence:2,maximum:1,type:"boolean"},id:144},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",3189,7,__node("Ident",3189,7,"__compose"),[__wrap(left),__wrap(right)],false,false);};}.call(this));',operators:"<<",options:{precedence:13,type:"function"},id:146},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3195,1,[__node("MacroAccess",3195,1,38,3195,{macroName:"let",macroData:{declarable:__node("MacroAccess",3195,10,37,3195,__node("MacroAccess",3195,10,31,3195,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("Call",3196,1,__node("Ident",3196,1,"__compose"),[__wrap(right),__wrap(tmp)],false,false)],null);}else{return __node("Call",3198,9,__node("Ident",3198,9,"__compose"),[__wrap(right),__wrap(left)],false,false);}};}.call(this));',operators:">>",options:{precedence:13,type:"function",rightToLeft:!0},id:147},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return __node("Call",3217,7,__wrap(left),[__wrap(right)],false,false);};}.call(this));',operators:"<|",options:{precedence:0,rightToLeft:!0},id:148},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3223,1,[__node("MacroAccess",3223,1,38,3223,{macroName:"let",macroData:{declarable:__node("MacroAccess",3223,10,37,3223,__node("MacroAccess",3223,10,31,3223,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("Call",3224,1,__wrap(right),[__wrap(tmp)],false,false)],null);}else{return __node("Call",3226,9,__wrap(right),[__wrap(left)],false,false);}};}.call(this));',operators:"|>",options:{precedence:0},id:149},{code:'return (function(){"use strict";var __isArray,__slice,__strnum,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isObject(right)){return this.maybeCache(left,function(setLeft,nextLeft){var _arr,_ref,block,currentLeft,descriptor,i,key,len,pairs,property,value;currentLeft=setLeft;block=[];pairs=_this.pairs(right);for(_arr=__toArray(pairs), i=0, len=_arr.length;i<len;++i){key=(_ref=_arr[i]).key;value=_ref.value;property=_ref.property;if(property!=null){if((property==="get"||property==="set")&&i<len-1&&pairs[i+1].property!=null&&_this.eq(key,pairs[i+1].key)&&pairs[i+1].property!==property&&((_ref=pairs[i+1].property)==="get"||_ref==="set")){continue;}if(property==="property"){block.push(__node("Call",3245,27,__node("Ident",3245,27,"__defProp"),[__wrap(currentLeft),__wrap(key),__wrap(value)],false,false));}else if(property==="get"||property==="set"){if(i>0&&pairs[i-1].property!=null&&_this.eq(key,pairs[i-1].key)&&pairs[i-1].property!==property&&((_ref=pairs[i-1].property)==="get"||_ref==="set")){descriptor=__node("Object",3248,19,[{key:__wrap(pairs[i-1].property),value:__wrap(pairs[i-1].value),property:void 0},{key:__wrap(property),value:__wrap(value),property:void 0},{key:__node("Const",3251,17,"enumerable"),value:__const("true"),property:void 0},{key:__node("Const",3252,17,"configurable"),value:__const("true"),property:void 0}],void 0);}else{descriptor=__node("Object",3255,19,[{key:__wrap(property),value:__wrap(value),property:void 0},{key:__node("Const",3257,17,"enumerable"),value:__const("true"),property:void 0},{key:__node("Const",3258,17,"configurable"),value:__const("true"),property:void 0}],void 0);}block.push(__node("Call",3260,27,__node("Ident",3260,27,"__defProp"),[__wrap(currentLeft),__wrap(key),__wrap(descriptor)],false,false));}else{_this.error("Unknown property: "+__strnum(property),key);}}else{block.push(__node("MacroAccess",3264,25,30,3264,{left:__node("Access",3264,25,__wrap(currentLeft),__wrap(key)),op:":=",right:__wrap(value)},"statement",false,false,false));}currentLeft=nextLeft;}block.push(__wrap(currentLeft));return __wrap(block);});}else{return __node("Call",3269,9,__node("Ident",3269,9,"__import"),[__wrap(left),__wrap(right)],false,false);}};}.call(this));',operators:"<<<",options:{precedence:6},id:150},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right,tmp;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isNoop(left)&&!this.isNoop(right)){tmp=this.tmp("ref");return __node("Block",3275,1,[__node("MacroAccess",3275,1,38,3275,{macroName:"let",macroData:{declarable:__node("MacroAccess",3275,10,37,3275,__node("MacroAccess",3275,10,31,3275,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(left)}},"statement",false,false,false),__node("MacroAccess",3276,1,150,3276,{left:__wrap(right),inverted:false,op:"<<<",right:__wrap(tmp)},"statement",false,false,false)],null);}else{return __node("MacroAccess",3278,9,150,3278,{left:__wrap(right),inverted:false,op:"<<<",right:__wrap(left)},"expression",false,false,false);}};}.call(this));',operators:">>>",options:{precedence:6,rightToLeft:!0},id:151}],unaryOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("!",n);},true);};}.call(this));',operators:"not",options:{type:"boolean"},id:3},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("typeof",n);},true);};}.call(this));',operators:"typeof",options:{type:"string"},id:4},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this["throw"](n);},true);};}.call(this));',operators:"throw",options:{type:"none"},id:11},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.unary("++post",node);};}.call(this));',operators:"postInc!",options:{type:"number"},id:12},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.unary("--post",node);};}.call(this));',operators:"postDec!",options:{type:"number"},id:13},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",111,9,1,111,{left:__node("MacroAccess",111,9,6,111,{left:__node("MacroAccess",111,9,4,111,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"!=",right:__node("Const",111,27,"undefined")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",111,40,6,111,{left:__wrap(node),inverted:false,op:"!=",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",113,9,8,113,{left:__wrap(node),inverted:false,op:"!~=",right:__const("null")},"expression",false,false,false);}};}.call(this));',operators:"?",options:{postfix:!0,type:"boolean",label:"existential"},id:20},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",117,9,5,117,{left:__node("MacroAccess",117,9,4,117,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",117,27,"undefined")},"expression",false,false,false);}else{return __node("MacroAccess",119,9,5,119,{left:__wrap(node),inverted:false,op:"==",right:__const("void")},"expression",false,false,false);}};}.call(this));',operators:["isVoid!","isUndefined!"],options:{type:"boolean"},id:21},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",123,9,1,123,{left:__node("MacroAccess",123,9,6,123,{left:__node("MacroAccess",123,9,4,123,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"!=",right:__node("Const",123,27,"undefined")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",123,40,5,123,{left:__wrap(node),inverted:false,op:"==",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);}else{return __node("MacroAccess",125,9,5,125,{left:__wrap(node),inverted:false,op:"==",right:__const("null")},"expression",false,false,false);}};}.call(this));',operators:"isNull!",options:{type:"boolean"},id:22},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",128,7,5,128,{left:__node("MacroAccess",128,7,4,128,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",128,25,"string")},"expression",false,false,false);};}.call(this));',operators:"isString!",options:{type:"boolean"},id:23},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",131,7,5,131,{left:__node("MacroAccess",131,7,4,131,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",131,25,"number")},"expression",false,false,false);};}.call(this));',operators:"isNumber!",options:{type:"boolean"},id:24},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",134,7,5,134,{left:__node("MacroAccess",134,7,4,134,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",134,25,"boolean")},"expression",false,false,false);};}.call(this));',operators:"isBoolean!",options:{type:"boolean"},id:25},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",137,7,5,137,{left:__node("MacroAccess",137,7,4,137,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",137,25,"function")},"expression",false,false,false);};}.call(this));',operators:"isFunction!",options:{type:"boolean"},id:26},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.isIdentOrTmp(n)&&!_this.hasVariable(n)&&__node("MacroAccess",140,97,1,140,{left:__node("MacroAccess",140,97,5,140,{left:__node("MacroAccess",140,97,4,140,{op:"typeof",node:__wrap(n)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",140,112,"object")},"expression",false,false,false),inverted:false,op:"and",right:__node("Call",140,122,__node("Ident",140,122,"__isArray"),[__wrap(n)],false,false)},"expression",false,false,false)||__node("Call",140,146,__node("Ident",140,146,"__isArray"),[__wrap(n)],false,false);},true);};}.call(this));',operators:"isArray!",options:{type:"boolean"},id:27},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return __node("MacroAccess",143,47,1,143,{left:__node("MacroAccess",143,47,5,143,{left:__node("MacroAccess",143,47,4,143,{op:"typeof",node:__wrap(n)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",143,62,"object")},"expression",false,false,false),inverted:false,op:"and",right:__node("MacroAccess",143,72,6,143,{left:__wrap(n),inverted:false,op:"!=",right:__const("null")},"expression",false,false,false)},"expression",false,false,false);},true);};}.call(this));',operators:"isObject!",options:{type:"boolean"},id:28},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,negate,node,op,value;_this=this;op=macroData.op;node=macroData.node;if(this.isConst(node)){value=Number(this.value(node));if(op==="~-"){negate=function(x){return -x;};value=negate(value);}return this["const"](value);}else{return this.mutateLast(node||this.noop(),function(n){return _this.unary(op==="~+"?"+":"-",n);},true);}};}.call(this));',operators:["~+","~-"],options:{type:"number"},id:48},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(this.isIdentOrTmp(node)&&!this.hasVariable(node)){return __node("MacroAccess",487,9,16,487,{macroName:"if",macroData:{test:__node("MacroAccess",487,12,5,487,{left:__node("MacroAccess",487,12,4,487,{op:"typeof",node:__wrap(node)},"expression",false,false,false),inverted:false,op:"==",right:__node("Const",487,30,"undefined")},"expression",false,false,false),body:__node("Const",487,45,"Undefined"),elseIfs:[],elseBody:__node("Call",487,61,__node("Ident",487,61,"__typeof"),[__wrap(node)],false,false)}},"expression",false,false,false);}else{return this.mutateLast(node||this.noop(),function(n){return __node("Call",489,49,__node("Ident",489,49,"__typeof"),[__wrap(n)],false,false);},true);}};}.call(this));',operators:"typeof!",options:{type:"string"},id:57},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){if(_this.isType(n,"number")){return n;}else{return __node("Call",546,11,__node("Ident",546,11,"__num"),[__wrap(n)],false,false);}},true);};}.call(this));',operators:"+",options:{type:"number"},id:60},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;if(this.isConst(node)&&typeof this.value(node)==="number"){return this["const"](-this.value(node));}else{return __node("MacroAccess",552,9,48,552,{op:"~-",node:__node("MacroAccess",552,13,60,552,{op:"+",node:__wrap(node)},"expression",false,false,false)},"expression",false,false,false);}};}.call(this));',operators:"-",options:{type:"number"},id:61},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",572,7,64,572,{left:__wrap(node),inverted:false,op:"/",right:__node("Const",572,16,100)},"expression",false,false,false);};}.call(this));',operators:"%",options:{postfix:!0,type:"number"},id:65},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;return this.mutateLast(node||this.noop(),function(n){return _this.unary("~",n);},true);};}.call(this));',operators:"~bitnot",options:{type:"number"},id:99},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("MacroAccess",863,7,99,863,{op:"~bitnot",node:__node("MacroAccess",863,15,60,863,{op:"+",node:__wrap(node)},"expression",false,false,false)},"expression",false,false,false);};}.call(this));',operators:"bitnot",options:{type:"number"},id:100},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,node,op;_this=this;op=macroData.op;node=macroData.node;if(!this.isAccess(node)){this.error("Can only use delete on an access");}if(this.position==="expression"){return this.maybeCacheAccess(node,function(setNode,node){var del,tmp;tmp=_this.tmp("ref");del=_this.unary("delete",node);return __node("Block",873,1,[__node("MacroAccess",873,1,38,873,{macroName:"let",macroData:{declarable:__node("MacroAccess",873,12,37,873,__node("MacroAccess",873,12,31,873,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(setNode)}},"statement",false,false,false),__wrap(del),__wrap(tmp)],null);});}else{return this.unary("delete",node);}};}.call(this));',operators:"delete",options:{standalone:!1},id:101},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return this.maybeCache(node,function(setNode,node){return __node("MacroAccess",881,9,16,881,{macroName:"if",macroData:{test:__node("MacroAccess",881,12,20,881,{op:"?",node:__wrap(setNode)},"expression",false,false,false),body:__node("MacroAccess",881,28,11,881,{op:"throw",node:__wrap(node)},"expression",false,false,false),elseIfs:[]}},"expression",false,false,false);});};}.call(this));',operators:"throw?",options:{type:"undefined"},id:102},{code:'return (function(){"use strict";var __isArray,__num,__owns,__slice,__strnum,__toArray,__typeof,__xor;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__owns=Object.prototype.hasOwnProperty;__slice=Array.prototype.slice;__strnum=function(strnum){var type;type=typeof strnum;if(type==="string"){return strnum;}else if(type==="number"){return String(strnum);}else{throw TypeError("Expected a string or number, got "+__typeof(strnum));}};__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());__xor=function(x,y){if(x){return !y&&x;}else{return y||x;}};return function(macroData,__wrap,__node,__const){var _arr,_arr2,_i,_len,_this,body,changed,foundSpread,genericArg,genericArgs,genericCache,genericParams,i,ident,init,initIndex,instanceofLets,instanceofs,item,key,len,makeFunctionFunc,makeFunctionIdent,name,node,op,p,param,params,PRIMORDIAL_TYPES,result,spreadCounter;_this=this;op=macroData.op;node=macroData.node;function article(text){if(/^[aeiou]/i.test(text)){return "an";}else{return "a";}};function withArticle(text){return article(text)+" "+__strnum(text);};PRIMORDIAL_TYPES={Number:true,String:true,Boolean:true,Function:true,Array:true,Object:true};function translateGenericType(type){var _ref,basetype,typeArguments;if(!_this.isTypeGeneric(type)){return type;}else{basetype=_this.basetype(type);if((_ref=_this.name(basetype))==="Array"||_ref==="Function"){return basetype;}else{typeArguments=_this.array((function(){var _arr,_arr2,_i,_len,subtype;for(_arr=[], _arr2=__toArray(_this.typeArguments(type)), _i=0, _len=_arr2.length;_i<_len;++_i){subtype=_arr2[_i];_arr.push(translateGenericType(subtype));}return _arr;}()));return __node("Call",1676,13,__node("Access",1676,13,__wrap(basetype),__node("Const",1676,24,"generic")),[__node("Spread",1676,32,__wrap(typeArguments))],false,false);}}};function translateTypeCheck(value,valueName,type,hasDefaultValue){var _arr,_arr2,_i,_len,_ref,check,checks,current,genericType,hasBoolean,hasNull,hasVoid,index,key,name,names,pairValue,result,subCheck,t,test,tests,typeNames;if(_this.isIdent(type)){if(__owns.call(PRIMORDIAL_TYPES,_this.name(type))){result=__node("MacroAccess",1681,1,17,1681,{macroName:"if",macroData:{test:__node("MacroAccess",1681,13,74,1681,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",1682,1,11,1682,{op:"throw",node:__node("Call",1682,18,__node("Ident",1682,18,"TypeError"),[__node("MacroAccess",1682,29,69,1682,{left:__node("MacroAccess",1682,29,69,1682,{left:__node("MacroAccess",1682,29,69,1682,{left:__node("MacroAccess",1682,29,69,1682,{left:__node("MacroAccess",1682,29,69,1682,{left:__node("Const",1682,29,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1682,29," to be ")},"expression",false,false,false),op:"",right:__wrap(withArticle(_this.name(type)))},"expression",false,false,false),op:"",right:__node("Const",1682,29,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1682,98,57,1682,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else{result=__node("MacroAccess",1685,1,17,1685,{macroName:"if",macroData:{test:__node("MacroAccess",1685,13,74,1685,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",1686,1,11,1686,{op:"throw",node:__node("Call",1686,18,__node("Ident",1686,18,"TypeError"),[__node("MacroAccess",1686,29,69,1686,{left:__node("MacroAccess",1686,29,69,1686,{left:__node("MacroAccess",1686,29,69,1686,{left:__node("MacroAccess",1686,29,69,1686,{left:__node("MacroAccess",1686,29,69,1686,{left:__node("Const",1686,29,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1686,29," to be a ")},"expression",false,false,false),op:"",right:__node("Call",1686,64,__node("Ident",1686,64,"__name"),[__wrap(type)],false,false)},"expression",false,false,false),op:"",right:__node("Const",1686,29,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1686,85,57,1686,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}if(!hasDefaultValue&&_this.name(type)==="Boolean"){return __node("MacroAccess",1688,13,17,1688,{macroName:"if",macroData:{test:__node("MacroAccess",1688,16,3,1688,{op:"not",node:__node("MacroAccess",1688,20,20,1688,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",1689,1,30,1689,{left:__wrap(value),op:":=",right:__const("false")},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}else{return result;}}else if(_this.isAccess(type)){return __node("MacroAccess",1696,1,17,1696,{macroName:"if",macroData:{test:__node("MacroAccess",1696,11,74,1696,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(type)},"statement",false,false,false),body:__node("MacroAccess",1697,1,11,1697,{op:"throw",node:__node("Call",1697,16,__node("Ident",1697,16,"TypeError"),[__node("MacroAccess",1697,27,69,1697,{left:__node("MacroAccess",1697,27,69,1697,{left:__node("MacroAccess",1697,27,69,1697,{left:__node("MacroAccess",1697,27,69,1697,{left:__node("MacroAccess",1697,27,69,1697,{left:__node("Const",1697,27,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1697,27," to be ")},"expression",false,false,false),op:"",right:__wrap(withArticle(_this.value(_this.child(type))))},"expression",false,false,false),op:"",right:__node("Const",1697,27,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1697,105,57,1697,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}else if(_this.isTypeUnion(type)){hasBoolean=false;hasVoid=false;hasNull=false;names=[];tests=[];for(_arr=__toArray(_this.types(type)), _i=0, _len=_arr.length;_i<_len;++_i){t=_arr[_i];if(_this.isConst(t)){if(_this.value(t)===null){hasNull=true;names.push(_this["const"]("null"));}else if(_this.value(t)===void 0){hasVoid=true;names.push(_this["const"]("undefined"));}else{_this.error("Unknown const for type-checking: "+String(_this.value(t)),t);}}else if(_this.isIdent(t)){if(_this.name(t)==="Boolean"){hasBoolean=true;}if(__owns.call(PRIMORDIAL_TYPES,_this.name(t))){names.push(_this["const"](_this.name(t)));}else{names.push(__node("Call",1721,28,__node("Ident",1721,28,"__name"),[__wrap(t)],false,false));}tests.push(__node("MacroAccess",1722,26,74,1722,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(t)},"expression",false,false,false));}else{_this.error("Not implemented: typechecking for non-idents/consts within a type-union",t);}}if(tests.length){test=_this.binaryChain("&&",tests);}else{test=__const("true");}current=names[0];for(_i=1, _len=names.length;_i<_len;++_i){name=names[_i];current=__node("MacroAccess",1731,14,69,1731,{left:__node("MacroAccess",1731,14,69,1731,{left:__wrap(current),op:"",right:__node("Const",1731,14," or ")},"expression",false,false,false),op:"",right:__wrap(name)},"expression",false,false,false);}typeNames=current;result=__node("MacroAccess",1732,31,17,1732,{macroName:"if",macroData:{test:__wrap(test),body:__node("MacroAccess",1733,1,11,1733,{op:"throw",node:__node("Call",1733,14,__node("Ident",1733,14,"TypeError"),[__node("MacroAccess",1733,25,69,1733,{left:__node("MacroAccess",1733,25,69,1733,{left:__node("MacroAccess",1733,25,69,1733,{left:__node("MacroAccess",1733,25,69,1733,{left:__node("MacroAccess",1733,25,69,1733,{left:__node("Const",1733,25,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1733,25," to be one of ")},"expression",false,false,false),op:"",right:__wrap(typeNames)},"expression",false,false,false),op:"",right:__node("Const",1733,25,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1733,85,57,1733,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);if(!hasDefaultValue){if(hasNull||hasVoid){if(__xor(hasNull,hasVoid)){result=__node("MacroAccess",1738,27,17,1738,{macroName:"if",macroData:{test:__node("MacroAccess",1738,30,3,1738,{op:"not",node:__node("MacroAccess",1738,34,20,1738,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",1739,1,30,1739,{left:__wrap(value),op:":=",right:__node("MacroAccess",1739,24,16,1739,{macroName:"if",macroData:{test:__wrap(hasNull),body:__const("null"),elseIfs:[],elseBody:__const("void")}},"expression",false,true,false)},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}else{result=__node("MacroAccess",1743,26,17,1743,{macroName:"if",macroData:{test:__node("MacroAccess",1743,29,20,1743,{op:"?",node:__wrap(value)},"statement",false,false,false),body:__wrap(result),elseIfs:[]}},"statement",false,false,false);}}else if(hasBoolean){result=__node("MacroAccess",1746,25,17,1746,{macroName:"if",macroData:{test:__node("MacroAccess",1746,28,3,1746,{op:"not",node:__node("MacroAccess",1746,32,20,1746,{op:"?",node:__wrap(value)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",1747,1,30,1747,{left:__wrap(value),op:":=",right:__const("false")},"statement",false,true,false),elseIfs:[],elseBody:__wrap(result)}},"statement",false,true,false);}}return result;}else if(_this.isTypeGeneric(type)){if(_this.name(_this.basetype(type))==="Array"){index=_this.tmp("i",false,"number");subCheck=translateTypeCheck(__node("Access",1754,51,__wrap(value),__wrap(index)),__node("MacroAccess",1754,74,69,1754,{left:__node("MacroAccess",1754,74,69,1754,{left:__node("MacroAccess",1754,74,69,1754,{left:__wrap(valueName),inverted:false,op:"&",right:__node("Const",1754,89,"[")},"expression",false,false,false),inverted:false,op:"&",right:__wrap(index)},"expression",false,false,false),inverted:false,op:"&",right:__node("Const",1754,104,"]")},"expression",false,false,false),_this.typeArguments(type)[0],false);return __node("MacroAccess",1755,12,17,1755,{macroName:"if",macroData:{test:__node("MacroAccess",1755,15,3,1755,{op:"not",node:__node("MacroAccess",1755,19,27,1755,{op:"isArray!",node:__wrap(value)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",1756,1,11,1756,{op:"throw",node:__node("Call",1756,16,__node("Ident",1756,16,"TypeError"),[__node("MacroAccess",1756,27,69,1756,{left:__node("MacroAccess",1756,27,69,1756,{left:__node("MacroAccess",1756,27,69,1756,{left:__node("Const",1756,27,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1756,27," to be an Array, got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1756,74,57,1756,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",1758,1,106,1758,{macroName:"for",macroData:{init:__node("MacroAccess",1758,16,38,1758,{macroName:"let",macroData:{declarable:__node("MacroAccess",1758,19,37,1758,__node("MacroAccess",1758,19,31,1758,{isMutable:"mutable",ident:__wrap(index)},"expression",false,false,false),"expression",false,false,false),value:__node("Access",1758,36,__wrap(value),__node("Const",1758,44,"length"))}},"expression",false,false,false),test:__node("MacroAccess",1758,52,13,1758,{op:"postDec!",node:__wrap(index)},"statement",false,false,false),body:__wrap(subCheck)}},"statement",false,false,false)}},"statement",false,false,false);}else if(_this.name(_this.basetype(type))==="Function"){return translateTypeCheck(value,valueName,_this.basetype(type),hasDefaultValue);}else{genericType=translateGenericType(type);return __node("MacroAccess",1765,1,17,1765,{macroName:"if",macroData:{test:__node("MacroAccess",1765,13,74,1765,{left:__wrap(value),inverted:true,op:"instanceof",right:__wrap(genericType)},"statement",false,false,false),body:__node("MacroAccess",1766,1,11,1766,{op:"throw",node:__node("Call",1766,18,__node("Ident",1766,18,"TypeError"),[__node("MacroAccess",1766,29,69,1766,{left:__node("MacroAccess",1766,29,69,1766,{left:__node("MacroAccess",1766,29,69,1766,{left:__node("MacroAccess",1766,29,69,1766,{left:__node("MacroAccess",1766,29,69,1766,{left:__node("Const",1766,29,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1766,29," to be a ")},"expression",false,false,false),op:"",right:__node("Call",1766,64,__node("Ident",1766,64,"__name"),[__wrap(genericType)],false,false)},"expression",false,false,false),op:"",right:__node("Const",1766,29,", got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1766,93,57,1766,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[]}},"statement",false,false,false);}}else if(_this.isTypeObject(type)){for(_arr=[], _arr2=__toArray(_this.pairs(type)), _i=0, _len=_arr2.length;_i<_len;++_i){key=(_ref=_arr2[_i]).key;pairValue=_ref.value;_arr.push(translateTypeCheck(__node("Access",1769,35,__wrap(value),__wrap(key)),__node("MacroAccess",1769,56,69,1769,{left:__node("MacroAccess",1769,56,69,1769,{left:__wrap(valueName),inverted:false,op:"&",right:__node("Const",1769,71,".")},"expression",false,false,false),inverted:false,op:"&",right:__wrap(key)},"expression",false,false,false),pairValue,false));}checks=_arr;return __node("MacroAccess",1770,10,17,1770,{macroName:"if",macroData:{test:__node("MacroAccess",1770,13,3,1770,{op:"not",node:__node("MacroAccess",1770,17,28,1770,{op:"isObject!",node:__wrap(value)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",1771,1,11,1771,{op:"throw",node:__node("Call",1771,14,__node("Ident",1771,14,"TypeError"),[__node("MacroAccess",1771,25,69,1771,{left:__node("MacroAccess",1771,25,69,1771,{left:__node("MacroAccess",1771,25,69,1771,{left:__node("Const",1771,25,"Expected "),op:"",right:__wrap(valueName)},"expression",false,false,false),op:"",right:__node("Const",1771,25," to be an Object, got ")},"expression",false,false,false),op:"",right:__node("MacroAccess",1771,73,57,1771,{op:"typeof!",node:__wrap(value)},"expression",false,false,false)},"expression",false,false,false)],false,false)},"statement",false,false,false),elseIfs:[],elseBody:__wrap(checks)}},"statement",false,false,false);}else{return _this.error("Unknown type to translate: "+__typeof(type),type);}};init=[];changed=false;function translateParam(param,inDestructure){var _arr,_i,_len,arrayIdent,asType,blankIdent,defaultValue,element,elementIdent,elementParam,foundSpread,i,ident,initIndex,key,len,objectIdent,pair,paramIdent,spreadCounter,typeCheck,value,valueIdent;if(_this.isArray(param)){changed=true;arrayIdent=_this.tmp("p",false,"array");foundSpread=-1;for(_arr=__toArray(_this.elements(param)), i=0, len=_arr.length;i<len;++i){element=_arr[i];initIndex=init.length;elementParam=translateParam(element,true);if(elementParam!=null){elementIdent=_this.paramIdent(elementParam);if(!_this.paramIsSpread(elementParam)){if(foundSpread===-1){init.splice(initIndex,0,__node("MacroAccess",1791,45,38,1791,{macroName:"let",macroData:{declarable:__node("MacroAccess",1791,49,37,1791,__node("MacroAccess",1791,49,31,1791,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",1791,66,__wrap(arrayIdent),__wrap(i))}},"statement",false,false,false));}else{init.splice(initIndex,0,__node("MacroAccess",1793,45,38,1793,{macroName:"let",macroData:{declarable:__node("MacroAccess",1793,49,37,1793,__node("MacroAccess",1793,49,31,1793,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",1793,66,__wrap(arrayIdent),__node("MacroAccess",1793,80,66,1793,{left:__wrap(spreadCounter),inverted:false,op:"+",right:__node("MacroAccess",1793,99,66,1793,{left:__node("MacroAccess",1793,99,66,1793,{left:__wrap(i),inverted:false,op:"-",right:__wrap(foundSpread)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",1793,120,1)},"expression",false,false,false)},"expression",false,false,false))}},"statement",false,false,false));}}else{if(foundSpread!==-1){_this.error("Cannot have multiple spread parameters in an array destructure",element);}foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",1799,45,38,1799,{macroName:"let",macroData:{declarable:__node("MacroAccess",1799,49,37,1799,__node("MacroAccess",1799,49,31,1799,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",1799,66,__node("Ident",1799,66,"__slice"),[__wrap(arrayIdent),__node("Spread",1799,89,__node("MacroAccess",1799,94,16,1799,{macroName:"if",macroData:{test:__node("MacroAccess",1799,96,5,1799,{left:__wrap(i),inverted:false,op:"==",right:__node("Const",1799,103,0)},"expression",false,false,false),body:__node("Array",1799,109,[]),elseIfs:[],elseBody:__node("Array",1799,117,[__wrap(i)])}},"expression",false,false,false))],false,true)}},"statement",false,false,false));}else{spreadCounter=_this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",1803,1,[__node("MacroAccess",1803,1,38,1803,{macroName:"let",macroData:{declarable:__node("MacroAccess",1803,20,37,1803,__node("MacroAccess",1803,20,31,1803,{isMutable:"mutable",ident:__wrap(spreadCounter)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1803,46,66,1803,{left:__node("Access",1803,46,__wrap(arrayIdent),__node("Const",1803,60,"length")),inverted:false,op:"-",right:__node("MacroAccess",1803,70,66,1803,{left:__node("MacroAccess",1803,70,66,1803,{left:__wrap(len),inverted:false,op:"-",right:__wrap(i)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",1803,82,1)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",1804,1,38,1804,{macroName:"let",macroData:{declarable:__node("MacroAccess",1804,20,37,1804,__node("MacroAccess",1804,20,31,1804,{ident:__wrap(elementIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1804,37,17,1804,{macroName:"if",macroData:{test:__node("MacroAccess",1804,40,79,1804,{left:__wrap(spreadCounter),inverted:false,op:">",right:__wrap(i)},"expression",false,false,false),body:__node("Call",1805,1,__node("Ident",1805,1,"__slice"),[__wrap(arrayIdent),__wrap(i),__wrap(spreadCounter)],false,true),elseIfs:[],elseBody:__node("Block",1807,1,[__node("MacroAccess",1807,1,30,1807,{left:__wrap(spreadCounter),op:":=",right:__wrap(i)},"statement",false,false,false),__node("Array",1808,1,[])],null)}},"expression",false,false,false)}},"statement",false,false,false)],null));}}}}return _this.rewrap(_this.param(arrayIdent,null,false,false,null),param);}else if(_this.isObject(param)){changed=true;objectIdent=_this.tmp("p",false,"object");for(_arr=__toArray(_this.pairs(param)), _i=0, _len=_arr.length;_i<_len;++_i){pair=_arr[_i];initIndex=init.length;value=translateParam(pair.value,true);if(value!=null){valueIdent=_this.paramIdent(value);key=pair.key;init.splice(initIndex,0,__node("MacroAccess",1820,41,38,1820,{macroName:"let",macroData:{declarable:__node("MacroAccess",1820,45,37,1820,__node("MacroAccess",1820,45,31,1820,{ident:__wrap(valueIdent)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",1820,60,__wrap(objectIdent),__wrap(key))}},"statement",false,false,false));}}return _this.rewrap(_this.param(objectIdent,null,false,false,null),param);}else if(_this.isParam(param)){defaultValue=_this.paramDefaultValue(param);asType=_this.paramType(param);paramIdent=_this.paramIdent(param);if(defaultValue!=null||asType!=null||!_this.isIdentOrTmp(paramIdent)){changed=true;if(_this.isIdentOrTmp(paramIdent)){ident=paramIdent;}else if(_this.isAccess(paramIdent)){ident=_this.ident(_this.value(_this.child(paramIdent)));}else{ident=_this.error("Not an ident or this-access: "+__typeof(paramIdent)+" "+__strnum(paramIdent.inspect()),paramIdent);}if(asType!=null){typeCheck=translateTypeCheck(ident,_this.name(ident),asType,defaultValue!=null);}else{typeCheck=_this.noop();}init.push(defaultValue!=null?__node("MacroAccess",1841,1,17,1841,{macroName:"if",macroData:{test:__node("MacroAccess",1841,15,3,1841,{op:"not",node:__node("MacroAccess",1841,19,20,1841,{op:"?",node:__wrap(ident)},"statement",false,true,false)},"statement",false,true,false),body:__node("MacroAccess",1842,1,30,1842,{left:__wrap(ident),op:":=",right:__wrap(defaultValue)},"statement",false,true,false),elseIfs:[],elseBody:__wrap(typeCheck)}},"statement",false,true,false):typeCheck);if(paramIdent!==ident){init.push(__node("MacroAccess",1848,24,30,1848,{left:__wrap(paramIdent),op:":=",right:__wrap(ident)},"statement",false,false,false));}return _this.rewrap(_this.param(ident,null,_this.paramIsSpread(param),_this.paramIsMutable(param),null),param);}else{return param;}}else if(_this.isNothing(param)){changed=true;if(inDestructure){return null;}else{blankIdent=_this.tmp("p",false,"object");return _this.rewrap(_this.param(blankIdent,null,false,false,null),param);}}else{return _this.error("Unknown param type: "+__typeof(param),param);}};foundSpread=-1;params=[];for(_arr=__toArray(this.funcParams(node)), i=0, len=_arr.length;i<len;++i){param=_arr[i];initIndex=init.length;p=translateParam(param,false);ident=this.paramIdent(p);if(this.paramIsSpread(p)){if(foundSpread!==-1){this.error("Cannot have two spread parameters",p);}changed=true;foundSpread=i;if(i===len-1){init.splice(initIndex,0,__node("MacroAccess",1876,1,38,1876,{macroName:"let",macroData:{declarable:__node("MacroAccess",1876,14,37,1876,__node("MacroAccess",1876,14,31,1876,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",1876,23,__node("Ident",1876,23,"__slice"),[__node("Args",1876,33),__node("Spread",1876,43,__node("MacroAccess",1876,48,16,1876,{macroName:"if",macroData:{test:__node("MacroAccess",1876,50,5,1876,{left:__wrap(i),inverted:false,op:"==",right:__node("Const",1876,57,0)},"expression",false,false,false),body:__node("Array",1876,63,[]),elseIfs:[],elseBody:__node("Array",1876,71,[__wrap(i)])}},"expression",false,false,false))],false,true)}},"statement",false,false,false));}else{spreadCounter=this.tmp("i",false,"number");init.splice(initIndex,0,__node("Block",1880,1,[__node("MacroAccess",1880,1,38,1880,{macroName:"let",macroData:{declarable:__node("MacroAccess",1880,14,37,1880,__node("MacroAccess",1880,14,31,1880,{isMutable:"mutable",ident:__wrap(spreadCounter)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1880,40,66,1880,{left:__node("Access",1880,40,__node("Args",1880,40),__node("Const",1880,51,"length")),inverted:false,op:"-",right:__node("MacroAccess",1880,61,66,1880,{left:__node("MacroAccess",1880,61,66,1880,{left:__wrap(len),inverted:false,op:"-",right:__wrap(i)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",1880,73,1)},"expression",false,false,false)},"expression",false,false,false)}},"statement",false,false,false),__node("MacroAccess",1881,1,38,1881,{macroName:"let",macroData:{declarable:__node("MacroAccess",1881,14,37,1881,__node("MacroAccess",1881,14,31,1881,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("MacroAccess",1881,23,17,1881,{macroName:"if",macroData:{test:__node("MacroAccess",1881,26,79,1881,{left:__wrap(spreadCounter),inverted:false,op:">",right:__wrap(i)},"expression",false,false,false),body:__node("Call",1882,1,__node("Ident",1882,1,"__slice"),[__node("Args",1882,22),__wrap(i),__wrap(spreadCounter)],false,true),elseIfs:[],elseBody:__node("Block",1884,1,[__node("MacroAccess",1884,1,30,1884,{left:__wrap(spreadCounter),op:":=",right:__wrap(i)},"statement",false,false,false),__node("Array",1885,1,[])],null)}},"expression",false,false,false)}},"statement",false,false,false)],null));}}else if(foundSpread===-1){params.push(p);}else{init.splice(initIndex,0,__node("MacroAccess",1891,1,38,1891,{macroName:"let",macroData:{declarable:__node("MacroAccess",1891,14,37,1891,__node("MacroAccess",1891,14,31,1891,{ident:__wrap(ident)},"statement",false,false,false),"statement",false,false,false),value:__node("Access",1891,23,__node("Args",1891,23),__node("MacroAccess",1891,34,66,1891,{left:__wrap(spreadCounter),inverted:false,op:"+",right:__node("MacroAccess",1891,53,66,1891,{left:__node("MacroAccess",1891,53,66,1891,{left:__wrap(i),inverted:false,op:"-",right:__wrap(foundSpread)},"expression",false,false,false),inverted:false,op:"-",right:__node("Const",1891,74,1)},"expression",false,false,false)},"expression",false,false,false))}},"statement",false,false,false));}}if(init.length||changed||this.funcIsCurried(node)){body=this.funcBody(node);result=this.rewrap(this.func(params,__node("Block",1897,1,[__wrap(init),__wrap(body)],null),this.funcIsAutoReturn(node)&&!this.isNothing(body),this.funcIsBound(node),false,this.funcAsType(node),this.funcIsGenerator(node),this.funcGeneric(node)),node);}else{result=node;}if(this.funcIsCurried(node)){result=__node("Call",1909,19,__node("Ident",1909,19,"__curry"),[__wrap(params.length),__wrap(result)],false,false);}genericArgs=this.funcGeneric(node);if(__num(genericArgs.length)>0){genericCache=this.tmp("cache",false,"object");for(_arr=[], _arr2=__toArray(genericArgs), _i=0, _len=_arr2.length;_i<_len;++_i){genericArg=_arr2[_i];_arr.push(this.param(genericArg));}genericParams=_arr;makeFunctionIdent=this.tmp("make",false,"function");instanceofs={};for(_arr=__toArray(genericArgs), _i=0, _len=_arr.length;_i<_len;++_i){genericArg=_arr[_i];name=this.name(genericArg);key=this.tmp("instanceof_"+__strnum(name),false,"function");instanceofs[name]={key:key,"let":__node("MacroAccess",1922,17,38,1922,{macroName:"let",macroData:{declarable:__node("MacroAccess",1922,21,37,1922,__node("MacroAccess",1922,21,31,1922,{ident:__wrap(key)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",1922,28,__node("Ident",1922,28,"__getInstanceof"),[__wrap(genericArg)],false,false)}},"statement",false,false,false),used:false};}result=this.walk(this.macroExpandAll(result),function(node){var func,left,name,right;if(_this.isBinary(node)&&_this.op(node)==="instanceof"){right=_this.right(node);if(_this.isIdent(right)){name=_this.name(right);if(__owns.call(instanceofs,name)){func=instanceofs[name].key;instanceofs[name].used=true;left=_this.left(node);return __node("Call",1934,24,__wrap(func),[__wrap(left)],false,false);}}}});_arr=[];for(name in instanceofs){if(__owns.call(instanceofs,name)){item=instanceofs[name];if(item.used){_arr.push(item["let"]);}}}instanceofLets=_arr;if(instanceofLets.length){result=__node("Block",1940,1,[__wrap(instanceofLets),__wrap(result)],null);}makeFunctionFunc=this.func(genericParams,result,true,false);result=__node("Call",1943,18,__node("Ident",1943,18,"__genericFunc"),[__wrap(genericArgs.length),__wrap(makeFunctionFunc)],false,false);}return result;};}.call(this));',operators:"mutateFunction!",options:{type:"node",label:"mutateFunction"},id:117},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("Call",2305,7,__node("Ident",2305,7,"__keys"),[__wrap(node)],false,false);};}.call(this));',operators:"keys!",id:124},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var node,op;op=macroData.op;node=macroData.node;return __node("Call",2314,7,__node("Ident",2314,7,"__allkeys"),[__wrap(node)],false,false);};}.call(this));',operators:"allkeys!",id:125},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _arr,_i,_len,element,item,node,op,parts,set;op=macroData.op;node=macroData.node;set=this.tmp("s",false,"object");if(this.isArray(node)&&!this.arrayHasSpread(node)){if(this.elements(node).length===0){return __node("Call",3456,11,__node("Ident",3456,11,"Set"),[],false,false);}else{parts=[];for(_arr=__toArray(this.elements(node)), _i=0, _len=_arr.length;_i<_len;++_i){element=_arr[_i];parts.push(__node("Call",3460,23,__node("Access",3460,23,__wrap(set),__node("Const",3460,29,"add")),[__wrap(element)],false,false));}return __node("Block",3462,1,[__node("MacroAccess",3462,1,38,3462,{macroName:"let",macroData:{declarable:__node("MacroAccess",3462,12,37,3462,__node("MacroAccess",3462,12,31,3462,{ident:__wrap(set)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",3462,19,__node("Ident",3462,19,"Set"),[],false,false)}},"statement",false,false,false),__wrap(parts),__wrap(set)],null);}}else{item=this.tmp("x",false,"any");return __node("Block",3468,1,[__node("MacroAccess",3468,1,38,3468,{macroName:"let",macroData:{declarable:__node("MacroAccess",3468,10,37,3468,__node("MacroAccess",3468,10,31,3468,{ident:__wrap(set)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",3468,17,__node("Ident",3468,17,"Set"),[],false,false)}},"statement",false,false,false),__node("MacroAccess",3469,1,113,3469,{macroName:"for",macroData:{value:__node("MacroAccess",3469,10,37,3469,__node("MacroAccess",3469,10,31,3469,{ident:__wrap(item)},"statement",false,false,false),"statement",false,false,false),array:__wrap(node),body:__node("Call",3470,1,__node("Access",3470,1,__wrap(set),__node("Const",3470,14,"add")),[__wrap(item)],false,false)}},"statement",false,false,false),__wrap(set)],null);}};}.call(this));',operators:"set!",options:{type:"object",label:"constructSet"},id:152},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var _arr,_i,_len,_ref,key,map,node,op,pairs,parts,property,value;op=macroData.op;node=macroData.node;if(!this.isObject(node)){this.error("map! can only be used on literal objects",node);}pairs=this.pairs(node);if(pairs.length===0){return __node("Call",3479,9,__node("Ident",3479,9,"Map"),[],false,false);}else{map=this.tmp("m",false,"object");parts=[];for(_arr=__toArray(pairs), _i=0, _len=_arr.length;_i<_len;++_i){key=(_ref=_arr[_i]).key;value=_ref.value;property=_ref.property;if(property!=null){this.error("Cannot use map! on an object with custom properties",key);}parts.push(__node("Call",3486,21,__node("Access",3486,21,__wrap(map),__node("Const",3486,27,"set")),[__wrap(key),__wrap(value)],false,false));}return __node("Block",3488,1,[__node("MacroAccess",3488,1,38,3488,{macroName:"let",macroData:{declarable:__node("MacroAccess",3488,10,37,3488,__node("MacroAccess",3488,10,31,3488,{ident:__wrap(map)},"statement",false,false,false),"statement",false,false,false),value:__node("Call",3488,17,__node("Ident",3488,17,"Map"),[],false,false)}},"statement",false,false,false),__wrap(parts),__wrap(map)],null);}};}.call(this));',operators:"map!",options:{type:"object",label:"constructMap"},id:153},{code:'return (function(){"use strict";var __isArray,__slice,__toArray,__typeof;__isArray=typeof Array.isArray==="function"?Array.isArray:(function(){var _toString;_toString=Object.prototype.toString;return function(x){return _toString.call(x)==="[object Array]";};}());__slice=Array.prototype.slice;__toArray=function(x){if(x==null){throw TypeError("Expected an object, got "+__typeof(x));}else if(__isArray(x)){return x;}else if(typeof x==="string"){return x.split("");}else{return __slice.call(x);}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroData,__wrap,__node,__const){var node,op,top;op=macroData.op;node=macroData.node;if(!node.cascades||!node.cascades.length){this.error("cascade! can only be used on a CascadeNode.",node);}top=node.node;return this.maybeCache(top,function(setTop,top){var _arr,_arr2,_len,cascade,i,parts;for(_arr=[], _arr2=__toArray(node.cascades), i=0, _len=_arr2.length;i<_len;++i){cascade=_arr2[i];_arr.push(cascade(i===0?setTop:top));}parts=_arr;return __node("Block",3971,1,[__wrap(parts),__wrap(top)],null);});};}.call(this));',operators:"cascade!",options:{label:"cascade"},id:171}],helpers:{__throw:{helper:["Func",62,26,0,0,[["Ident",62,27,0,"err"]],[],[],"Throw",62,34,0,"Ident",62,40,0,"err"],type:{type:"generic",base:"functionBase",args:["none"]},dependencies:["__throw"]},GLOBAL:{helper:["IfExpression",145,23,0,["Binary",145,26,0,["Unary",117,9,0,"typeof","Ident",145,39,0,"window"],"!==","Const",117,27,0,"undefined"],["Ident",145,51,0,"window"],"IfExpression",145,23,0,["Binary",145,66,0,["Unary",117,9,0,"typeof","Ident",145,79,0,"global"],"!==","Const",117,27,0,"undefined"],["Ident",145,91,0,"global"],"This",145,103,0],type:"any",dependencies:["GLOBAL"]},__xor:{helper:["Func",147,24,0,0,[["Ident",147,25,0,"x"],["Ident",147,27,0,"y"]],[],[],"IfStatement",148,1,0,0,["Ident",148,5,0,"x"],["Return",149,1,0,"Binary",149,1,0,["Unary",149,1,0,"!","Ident",149,8,0,"y"],"&&","Ident",149,14,0,"x"],"Return",151,1,0,"Binary",151,1,0,["Ident",151,1,0,"y"],"||","Ident",151,9,0,"x"],type:"function",dependencies:["__xor"]},__typeof:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["_toString"],[],"BlockStatement",476,1,0,0,["Binary",476,1,0,["Ident",476,6,0,"_toString"],"=","Binary",476,19,0,["Binary",476,19,0,["Ident",476,19,0,"Object"],".","Const",476,27,0,"prototype"],".","Const",476,37,0,"toString"],["Return",477,4,0,"Func",477,4,0,0,[["Ident",477,5,0,"o"]],[],[],"IfStatement",478,1,0,0,["Binary",119,9,0,["Ident",478,16,0,"o"],"===","Const",0,0,0],["Return",479,7,0,"Const",479,7,0,"Undefined"],"IfStatement",478,1,0,0,["Binary",125,9,0,["Ident",480,21,0,"o"],"===","Const",0,0,0,null],["Return",481,7,0,"Const",481,7,0,"Null"],"Return",483,1,0,"Binary",483,1,0,["Binary",483,8,0,["Binary",483,8,0,["Ident",483,8,0,"o"],".","Const",483,10,0,"constructor"],"&&","Binary",483,25,0,["Binary",483,25,0,["Ident",483,25,0,"o"],".","Const",483,28,0,"constructor"],".","Const",483,40,0,"name"],"||","Call",483,48,0,["Binary",483,48,0,["Call",483,48,0,["Binary",483,48,0,["Ident",483,48,0,"_toString"],".","Const",483,48,0,"call"],0,["Ident",483,61,0,"o"]],".","Const",483,64,0,"slice"],0,["Const",483,70,0,8],["Const",483,72,0,-1]]],0],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__typeof"]},__first:{helper:["Func",491,26,0,0,[["Ident",491,27,0,"x"]],[],[],"Return",491,32,0,"Ident",491,32,0,"x"],type:"function",dependencies:["__first"]},__num:{helper:["Func",518,24,0,0,[["Ident",518,25,0,"num"]],[],[],"IfStatement",519,1,0,0,["Binary",519,5,0,["Unary",131,7,0,"typeof","Ident",519,20,0,"num"],"!==","Const",131,25,0,"number"],["Throw",520,1,0,"Call",520,10,0,["Ident",520,10,0,"TypeError"],0,["Binary",520,21,0,["Const",520,21,0,"Expected a number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",520,57,0,"num"]]],"Return",522,1,0,"Ident",522,1,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__num","__typeof"]},__str:{helper:["Func",524,24,0,0,[["Ident",524,25,0,"str"]],[],[],"IfStatement",525,1,0,0,["Binary",525,5,0,["Unary",128,7,0,"typeof","Ident",525,20,0,"str"],"!==","Const",128,25,0,"string"],["Throw",526,1,0,"Call",526,10,0,["Ident",526,10,0,"TypeError"],0,["Binary",526,21,0,["Const",526,21,0,"Expected a string, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",526,57,0,"str"]]],"Return",528,1,0,"Ident",528,1,0,"str"],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__str","__typeof"]},__strnum:{helper:["Func",530,27,0,0,[["Ident",530,28,0,"strnum"]],["type"],[],"BlockStatement",531,1,0,0,["Binary",531,1,0,["Ident",531,6,0,"type"],"=","Unary",531,13,0,"typeof","Ident",531,20,0,"strnum"],["IfStatement",532,1,0,0,["Binary",532,5,0,["Ident",532,5,0,"type"],"===","Const",532,15,0,"string"],["Return",533,1,0,"Ident",533,1,0,"strnum"],"IfStatement",532,1,0,0,["Binary",534,10,0,["Ident",534,10,0,"type"],"===","Const",534,20,0,"number"],["Return",535,1,0,"Call",535,1,0,["Ident",535,1,0,"String"],0,["Ident",535,12,0,"strnum"]],"Throw",537,1,0,"Call",537,10,0,["Ident",537,10,0,"TypeError"],0,["Binary",537,21,0,["Const",537,21,0,"Expected a string or number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",537,67,0,"strnum"]]]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__strnum","__typeof"]},__owns:{helper:["Binary",638,23,0,["Binary",638,23,0,["Ident",638,23,0,"Object"],".","Const",638,31,0,"prototype"],".","Const",638,41,0,"hasOwnProperty"],type:"any",dependencies:["__owns"]},__cmp:{helper:["Func",659,24,0,0,[["Ident",659,25,0,"left"],["Ident",659,30,0,"right"]],["type"],[],"IfStatement",660,1,0,0,["Binary",660,5,0,["Ident",660,5,0,"left"],"===","Ident",660,13,0,"right"],["Return",661,5,0,"Const",661,5,0,0],"BlockStatement",663,1,0,0,["Binary",663,1,0,["Ident",663,8,0,"type"],"=","Unary",663,15,0,"typeof","Ident",663,22,0,"left"],["IfStatement",664,1,0,0,["Binary",664,7,0,["Binary",43,7,0,["Ident",664,7,0,"type"],"!==","Const",664,17,0,"number"],"&&","Binary",43,7,0,["Ident",664,27,0,"type"],"!==","Const",664,37,0,"string"],["Throw",665,1,0,"Call",665,12,0,["Ident",665,12,0,"TypeError"],0,["Binary",665,23,0,["Const",665,23,0,"Cannot compare a non-number/string: "],"+","Ident",665,64,0,"type"]],"IfStatement",664,1,0,0,["Binary",43,7,0,["Ident",666,12,0,"type"],"!==","Unary",666,20,0,"typeof","Ident",666,27,0,"right"],["Throw",667,1,0,"Call",667,12,0,["Ident",667,12,0,"TypeError"],0,["Binary",667,23,0,["Binary",667,23,0,["Binary",667,23,0,["Const",667,23,0,"Cannot compare elements of different types: "],"+","Ident",667,72,0,"type"],"+","Const",667,81,0," vs "],"+","Unary",667,90,0,"typeof","Ident",667,97,0,"right"]],"IfStatement",664,1,0,0,["Binary",668,12,0,["Ident",668,12,0,"left"],"<","Ident",668,20,0,"right"],["Return",669,1,0,"Const",669,1,0,-1],"Return",671,7,0,"Const",671,7,0,1]],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__cmp"]},__int:{helper:["Func",682,24,0,0,[["Ident",682,25,0,"num"]],[],[],"IfStatement",683,1,0,0,["Binary",683,5,0,["Unary",131,7,0,"typeof","Ident",683,20,0,"num"],"!==","Const",131,25,0,"number"],["Throw",684,1,0,"Call",684,10,0,["Ident",684,10,0,"TypeError"],0,["Binary",684,21,0,["Const",684,21,0,"Expected a number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",684,57,0,"num"]]],"IfStatement",683,1,0,0,["Binary",680,7,0,["Binary",680,7,0,["Ident",685,10,0,"num"],"%","Const",685,23,0,1],"!==","Const",680,27,0,0],["Throw",686,1,0,"Call",686,10,0,["Ident",686,10,0,"TypeError"],0,["Binary",686,21,0,["Const",686,21,0,"Expected an integer, got "],"+","Ident",686,51,0,"num"]],"Return",688,1,0,"Ident",688,1,0,"num"],type:{type:"generic",base:"functionBase",args:["number"]},dependencies:["__int","__typeof"]},__nonzero:{helper:["Func",690,28,0,0,[["Ident",690,29,0,"num"]],[],[],"IfStatement",691,1,0,0,["Binary",691,5,0,["Ident",691,5,0,"num"],"===","Const",691,13,0,0],["Throw",692,1,0,"Call",692,10,0,["Ident",692,10,0,"RangeError"],0,["Binary",692,22,0,["Const",692,22,0,"Expected non-zero, got "],"+","Ident",692,50,0,"num"]],"Return",694,1,0,"Ident",694,1,0,"num"],type:"function",dependencies:["__nonzero"]},__lt:{helper:["Func",696,23,0,0,[["Ident",696,24,0,"x"],["Ident",696,26,0,"y"]],["type"],[],"BlockStatement",697,1,0,0,["Binary",697,1,0,["Ident",697,6,0,"type"],"=","Unary",697,13,0,"typeof","Ident",697,20,0,"x"],["IfStatement",698,1,0,0,["Binary",627,25,0,["Binary",631,18,0,["Ident",698,5,0,"type"],"!==","Const",698,20,0,"number"],"&&","Binary",627,37,0,["Ident",698,5,0,"type"],"!==","Const",698,29,0,"string"],["Throw",699,1,0,"Call",699,10,0,["Ident",699,10,0,"TypeError"],0,["Binary",699,21,0,["Const",699,21,0,"Cannot compare a non-number/string: "],"+","Ident",699,62,0,"type"]],"IfStatement",698,1,0,0,["Binary",43,7,0,["Ident",700,10,0,"type"],"!==","Unary",700,18,0,"typeof","Ident",700,25,0,"y"],["Throw",701,1,0,"Call",701,10,0,["Ident",701,10,0,"TypeError"],0,["Binary",701,21,0,["Binary",701,21,0,["Binary",701,21,0,["Const",701,21,0,"Cannot compare elements of different types: "],"+","Ident",701,70,0,"type"],"+","Const",701,79,0," vs "],"+","Unary",701,88,0,"typeof","Ident",701,95,0,"y"]],"Return",703,1,0,"Binary",703,1,0,["Ident",703,1,0,"x"],"<","Ident",703,9,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lt"]},__lte:{helper:["Func",705,24,0,0,[["Ident",705,25,0,"x"],["Ident",705,27,0,"y"]],["type"],[],"BlockStatement",706,1,0,0,["Binary",706,1,0,["Ident",706,6,0,"type"],"=","Unary",706,13,0,"typeof","Ident",706,20,0,"x"],["IfStatement",707,1,0,0,["Binary",627,25,0,["Binary",631,18,0,["Ident",707,5,0,"type"],"!==","Const",707,20,0,"number"],"&&","Binary",627,37,0,["Ident",707,5,0,"type"],"!==","Const",707,29,0,"string"],["Throw",708,1,0,"Call",708,10,0,["Ident",708,10,0,"TypeError"],0,["Binary",708,21,0,["Const",708,21,0,"Cannot compare a non-number/string: "],"+","Ident",708,62,0,"type"]],"IfStatement",707,1,0,0,["Binary",43,7,0,["Ident",709,10,0,"type"],"!==","Unary",709,18,0,"typeof","Ident",709,25,0,"y"],["Throw",710,1,0,"Call",710,10,0,["Ident",710,10,0,"TypeError"],0,["Binary",710,21,0,["Binary",710,21,0,["Binary",710,21,0,["Const",710,21,0,"Cannot compare elements of different types: "],"+","Ident",710,70,0,"type"],"+","Const",710,79,0," vs "],"+","Unary",710,88,0,"typeof","Ident",710,95,0,"y"]],"Return",712,1,0,"Binary",712,1,0,["Ident",712,1,0,"x"],"<=","Ident",712,10,0,"y"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__lte"]},__slice:{helper:["Binary",959,24,0,["Binary",959,24,0,["Ident",959,24,0,"Array"],".","Const",959,31,0,"prototype"],".","Const",959,41,0,"slice"],type:"any",dependencies:["__slice"]},__freeze:{helper:["IfExpression",961,25,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",961,41,0,["Ident",961,41,0,"Object"],".","Const",961,49,0,"freeze"],"===","Const",137,25,0,"function"],["Binary",962,1,0,["Ident",962,1,0,"Object"],".","Const",962,10,0,"freeze"],"Func",964,4,0,0,[["Ident",964,5,0,"x"]],[],[],"Return",964,10,0,"Ident",964,10,0,"x"],type:"any",dependencies:["__freeze"]},__freezeFunc:{helper:["Func",966,32,0,0,[["Ident",966,33,0,"x"]],[],[],"BlockStatement",967,1,0,0,["IfStatement",967,1,0,0,["Binary",49,7,0,["Binary",967,5,0,["Ident",967,5,0,"x"],".","Const",967,8,0,"prototype"],"!=","Const",0,0,0,null],["Call",968,1,0,["Ident",968,1,0,"__freeze"],0,["Binary",968,14,0,["Ident",968,14,0,"x"],".","Const",968,16,0,"prototype"]]],["Return",969,1,0,"Call",969,1,0,["Ident",969,1,0,"__freeze"],0,["Ident",969,12,0,"x"]]],type:"function",dependencies:["__freeze","__freezeFunc"]},__isArray:{helper:["IfExpression",971,27,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",971,43,0,["Ident",971,43,0,"Array"],".","Const",971,50,0,"isArray"],"===","Const",137,25,0,"function"],["Binary",972,1,0,["Ident",972,1,0,"Array"],".","Const",972,9,0,"isArray"],"Call",9,9,0,["Func",9,12,0,0,[],["_toString"],[],"BlockStatement",975,1,0,0,["Binary",975,1,0,["Ident",975,8,0,"_toString"],"=","Binary",975,21,0,["Binary",975,21,0,["Ident",975,21,0,"Object"],".","Const",975,29,0,"prototype"],".","Const",975,39,0,"toString"],["Return",976,6,0,"Func",976,6,0,0,[["Ident",976,7,0,"x"]],[],[],"Return",976,23,0,"Binary",976,23,0,["Call",976,23,0,["Binary",976,23,0,["Ident",976,23,0,"_toString"],".","Const",976,23,0,"call"],0,["Ident",976,36,0,"x"]],"===","Const",976,42,0,"[object Array]"]],0],type:"any",dependencies:["__isArray"]},__isObject:{helper:["Func",978,30,0,0,[["Ident",978,31,0,"x"]],[],[],"Return",978,47,0,"Binary",978,47,0,["Binary",978,47,0,["Unary",978,47,0,"typeof","Ident",978,54,0,"x"],"===","Const",978,61,0,"object"],"&&","Binary",43,7,0,["Ident",978,71,0,"x"],"!==","Const",978,76,0,null],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__isObject"]},__toArray:{helper:["Func",980,29,0,0,[["Ident",980,30,0,"x"]],[],[],"IfStatement",981,1,0,0,["Binary",981,5,0,["Ident",981,9,0,"x"],"==","Const",0,0,0,null],["Throw",982,1,0,"Call",982,10,0,["Ident",982,10,0,"TypeError"],0,["Binary",982,21,0,["Const",982,21,0,"Expected an object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",982,58,0,"x"]]],"IfStatement",981,1,0,0,["Call",140,146,0,["Ident",140,146,0,"__isArray"],0,["Ident",983,20,0,"x"]],["Return",984,1,0,"Ident",984,1,0,"x"],"IfStatement",981,1,0,0,["Binary",985,10,0,["Unary",985,10,0,"typeof","Ident",985,17,0,"x"],"===","Const",985,24,0,"string"],["Return",986,1,0,"Call",986,1,0,["Binary",986,1,0,["Ident",986,1,0,"x"],".","Const",986,7,0,"split"],0,["Const",986,13,0,""]],"Return",988,1,0,"Call",988,1,0,["Binary",988,1,0,["Ident",988,1,0,"__slice"],".","Const",988,1,0,"call"],0,["Ident",988,14,0,"x"]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__isArray","__slice","__toArray","__typeof"]},__create:{helper:["IfExpression",990,25,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",990,41,0,["Ident",990,41,0,"Object"],".","Const",990,49,0,"create"],"===","Const",137,25,0,"function"],["Binary",991,1,0,["Ident",991,1,0,"Object"],".","Const",991,10,0,"create"],"Func",993,4,0,0,[["Ident",993,5,0,"x"]],[],[],"BlockStatement",994,1,0,0,["Func",994,1,0,["Ident",994,8,0,"F"],[],[],[]],["Binary",995,1,0,["Binary",995,1,0,["Ident",995,1,0,"F"],".","Const",995,7,0,"prototype"],"=","Ident",995,19,0,"x"],["Return",996,1,0,"Call",996,1,0,["Ident",996,8,0,"F"],1]],type:"any",dependencies:["__create"]},__pow:{helper:["Binary",998,22,0,["Ident",998,22,0,"Math"],".","Const",998,28,0,"pow"],type:"any",dependencies:["__pow"]},__floor:{helper:["Binary",999,24,0,["Ident",999,24,0,"Math"],".","Const",999,30,0,"floor"],type:"any",dependencies:["__floor"]},__sqrt:{helper:["Binary",1e3,23,0,["Ident",1e3,23,0,"Math"],".","Const",1e3,29,0,"sqrt"],type:"any",dependencies:["__sqrt"]},__log:{helper:["Binary",1001,22,0,["Ident",1001,22,0,"Math"],".","Const",1001,28,0,"log"],type:"any",dependencies:["__log"]},__in:{helper:["IfExpression",1145,21,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",1145,37,0,["Binary",1145,37,0,["Ident",1145,37,0,"Array"],".","Const",1145,44,0,"prototype"],".","Const",1145,54,0,"indexOf"],"===","Const",137,25,0,"function"],["Call",9,9,0,["Func",9,12,0,0,[],["indexOf"],[],"BlockStatement",1147,1,0,0,["Binary",1147,1,0,["Ident",1147,8,0,"indexOf"],"=","Binary",1147,19,0,["Binary",1147,19,0,["Ident",1147,19,0,"Array"],".","Const",1147,26,0,"prototype"],".","Const",1147,36,0,"indexOf"],["Return",1148,6,0,"Func",1148,6,0,0,[["Ident",1148,7,0,"child"],["Ident",1148,13,0,"parent"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",1148,35,0,["Binary",1148,35,0,["Ident",1148,35,0,"indexOf"],".","Const",1148,35,0,"call"],0,["Ident",1148,46,0,"parent"],["Ident",1148,53,0,"child"]],"!==","Const",1148,63,0,-1]],0],"Func",1150,4,0,0,[["Ident",1150,5,0,"child"],["Ident",1150,11,0,"parent"]],["i","len"],[],"BlockStatement",1151,1,0,0,["Binary",1151,1,0,["Ident",1151,8,0,"len"],"=","Unary",1151,14,0,"+","Binary",1151,17,0,["Ident",1151,17,0,"parent"],".","Const",1151,24,0,"length"],["Binary",1152,1,0,["Ident",1152,16,0,"i"],"=","Const",1152,20,0,-1],["For",1113,1,0,0,0,["Binary",718,13,0,["Unary",1153,12,0,"++","Ident",1153,12,0,"i"],"<","Ident",1153,22,0,"len"],0,"IfStatement",1154,1,0,0,["Binary",1154,9,0,["Binary",1154,9,0,["Ident",1154,9,0,"child"],"===","Binary",1154,18,0,["Ident",1154,18,0,"parent"],".","Ident",1154,26,0,"i"],"&&","Binary",1154,32,0,["Ident",1154,46,0,"i"],"in","Ident",1154,32,0,"parent"],["Return",1155,1,0,"Const",1155,15,0,!0]],["Return",1156,1,0,"Const",1156,1,0,!1]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__in"]},__genericFunc:{helper:["Func",1634,33,0,0,[["Ident",1634,34,0,"numArgs"],["Ident",1634,53,0,"make"]],["any","cache","result"],[],"BlockStatement",1635,1,0,0,["Binary",1635,1,0,["Ident",1635,6,0,"cache"],"=","Call",1635,14,0,["Ident",1635,14,0,"WeakMap"],0],["Binary",1636,1,0,["Ident",1636,6,0,"any"],"=","Obj",1636,12,0],["Func",1637,1,0,["Ident",1637,6,0,"generic"],[],["_ref","current","i","item","type"],[],"BlockStatement",1508,1,0,0,["Binary",1508,1,0,["Ident",1638,45,0,"current"],"=","Ident",1638,55,0,"cache"],["For",1273,1,0,0,["Binary",1183,38,0,["Ident",1638,15,0,"i"],"=","Binary",578,9,0,["Ident",1638,20,0,"numArgs"],"-","Const",1638,32,0,1],["Binary",57,55,0,["Ident",1638,15,0,"i"],">=","Const",1638,37,0,0],["Unary",1221,35,0,"--","Ident",1638,15,0,"i"],"BlockStatement",1639,1,0,0,["IfStatement",783,9,0,0,["Binary",49,7,0,["Binary",1639,17,0,["Ident",1639,17,0,"_ref"],"=","Binary",1639,17,0,["Arguments",1639,17,0],".","Ident",1639,28,0,"i"],"!=","Const",0,0,0,null],["Binary",1639,1,0,["Ident",1639,10,0,"type"],"=","Ident",1639,17,0,"_ref"],"Binary",1639,1,0,["Ident",1639,10,0,"type"],"=","Ident",1639,32,0,"any"],["Binary",1640,1,0,["Ident",1640,18,0,"item"],"=","Call",1640,25,0,["Binary",1640,25,0,["Ident",1640,25,0,"current"],".","Const",1640,34,0,"get"],0,["Ident",1640,38,0,"type"]],["IfStatement",1641,1,0,0,["Binary",1641,9,0,["Ident",1641,13,0,"item"],"==","Const",0,0,0,null],["BlockStatement",1642,1,0,0,["IfStatement",1642,16,0,0,["Binary",1642,19,0,["Ident",1642,19,0,"i"],"===","Const",1642,25,0,0],["Binary",1642,1,0,["Ident",1642,1,0,"item"],"=","Call",1643,1,0,["Binary",1643,1,0,["Ident",1643,1,0,"make"],".","Const",1643,1,0,"apply"],0,["This",1643,17,0],["Arguments",1643,26,0]],"Binary",1642,1,0,["Ident",1642,1,0,"item"],"=","Call",1645,1,0,["Ident",1645,1,0,"WeakMap"],0],["Call",1646,1,0,["Binary",1646,1,0,["Ident",1646,1,0,"current"],".","Const",1646,17,0,"set"],0,["Ident",1646,21,0,"type"],["Ident",1646,26,0,"item"]]]],["Binary",1504,59,0,["Ident",1638,45,0,"current"],"=","Ident",1647,1,0,"item"]],["Return",1638,45,0,"Ident",1638,45,0,"current"]],["Binary",1648,1,0,["Ident",1648,6,0,"result"],"=","Call",1648,15,0,["Ident",1648,15,0,"generic"],0],["Binary",1649,1,0,["Binary",1649,1,0,["Ident",1649,1,0,"result"],".","Const",1649,10,0,"generic"],"=","Ident",1649,20,0,"generic"],["Return",1650,1,0,"Ident",1650,1,0,"result"]],type:"function",dependencies:["__genericFunc","__toArray","WeakMap"]},__range:{helper:["Func",1897,1,0,0,[["Ident",1946,27,0,"start"],["Ident",1946,43,0,"end"],["Ident",1946,58,0,"step"],["Ident",1946,74,0,"inclusive"]],["i","result"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",1946,27,0,"start"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected start to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",1946,27,0,"start"]]]],["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",1946,43,0,"end"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected end to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",1946,43,0,"end"]]]],["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",1946,58,0,"step"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected step to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",1946,58,0,"step"]]]],["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",1946,74,0,"inclusive"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",1946,74,0,"inclusive"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",1946,74,0,"inclusive"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected inclusive to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",1946,74,0,"inclusive"]]]],["IfStatement",1947,1,0,0,["Binary",1947,5,0,["Ident",1947,5,0,"step"],"===","Const",1947,14,0,0],["Throw",1948,1,0,"Call",1948,10,0,["Ident",1948,10,0,"RangeError"],0,["Const",1948,22,0,"step cannot be zero"]],"IfStatement",1947,1,0,0,["Unary",1949,10,0,"!","Call",1949,14,0,["Ident",1949,14,0,"isFinite"],0,["Ident",1949,25,0,"start"]],["Throw",1950,1,0,"Call",1950,10,0,["Ident",1950,10,0,"RangeError"],0,["Const",1950,22,0,"start must be finite"]],"IfStatement",1947,1,0,0,["Unary",1951,10,0,"!","Call",1951,14,0,["Ident",1951,14,0,"isFinite"],0,["Ident",1951,25,0,"end"]],["Throw",1952,1,0,"Call",1952,10,0,["Ident",1952,10,0,"RangeError"],0,["Const",1952,22,0,"end must be finite"]]],["Binary",1953,1,0,["Ident",1953,6,0,"result"],"=","Arr",1953,15,0],["Binary",1954,1,0,["Ident",1954,14,0,"i"],"=","Ident",1954,18,0,"start"],["IfStatement",1955,1,0,0,["Binary",57,23,0,["Ident",1955,5,0,"step"],">","Const",1955,14,0,0],["BlockStatement",1956,1,0,0,["For",1113,1,0,0,0,["Binary",1956,10,0,["Ident",1956,10,0,"i"],"<","Ident",1956,15,0,"end"],["Binary",1956,20,0,["Ident",1956,20,0,"i"],"+=","Ident",1956,26,0,"step"],"Call",1957,1,0,["Binary",1957,1,0,["Ident",1957,1,0,"result"],".","Const",1957,14,0,"push"],0,["Ident",1957,19,0,"i"]],["IfStatement",1958,1,0,0,["Binary",1958,7,0,["Ident",1958,7,0,"inclusive"],"&&","Binary",1958,21,0,["Ident",1958,21,0,"i"],"<=","Ident",1958,27,0,"end"],["Call",1959,1,0,["Binary",1959,1,0,["Ident",1959,1,0,"result"],".","Const",1959,14,0,"push"],0,["Ident",1959,19,0,"i"]]]],"BlockStatement",1961,1,0,0,["For",1113,1,0,0,0,["Binary",57,23,0,["Ident",1961,10,0,"i"],">","Ident",1961,15,0,"end"],["Binary",1961,20,0,["Ident",1961,20,0,"i"],"+=","Ident",1961,26,0,"step"],"Call",1962,1,0,["Binary",1962,1,0,["Ident",1962,1,0,"result"],".","Const",1962,14,0,"push"],0,["Ident",1962,19,0,"i"]],["IfStatement",1963,1,0,0,["Binary",1963,7,0,["Ident",1963,7,0,"inclusive"],"&&","Binary",57,55,0,["Ident",1963,21,0,"i"],">=","Ident",1963,27,0,"end"],["Call",1964,1,0,["Binary",1964,1,0,["Ident",1964,1,0,"result"],".","Const",1964,14,0,"push"],0,["Ident",1964,19,0,"i"]]]],["Return",1965,1,0,"Ident",1965,1,0,"result"]],type:{type:"generic",base:"functionBase",args:["numberArray"]},dependencies:["__range","__typeof"]},__step:{helper:["Func",1897,1,0,0,[["Ident",1967,26,0,"array"],["Ident",1967,32,0,"step"]],["i","len","result"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",1967,32,0,"step"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected step to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",1967,32,0,"step"]]]],["IfStatement",1968,1,0,0,["Binary",1968,5,0,["Ident",1968,5,0,"step"],"===","Const",1968,14,0,0],["Throw",1969,1,0,"Call",1969,10,0,["Ident",1969,10,0,"RangeError"],0,["Const",1969,22,0,"step cannot be zero"]],"IfStatement",1968,1,0,0,["Binary",1970,10,0,["Ident",1970,10,0,"step"],"===","Const",1970,19,0,1],["Return",1971,1,0,"Call",1971,1,0,["Ident",1971,1,0,"__toArray"],0,["Ident",1971,16,0,"array"]],"IfStatement",1968,1,0,0,["Binary",1972,10,0,["Ident",1972,10,0,"step"],"===","Const",1972,18,0,-1],["Return",1973,1,0,"Call",1973,1,0,["Binary",1973,1,0,["Call",1973,1,0,["Binary",1973,1,0,["Ident",1973,1,0,"__slice"],".","Const",1973,1,0,"call"],0,["Ident",1973,14,0,"array"]],".","Const",1973,21,0,"reverse"],0],"IfStatement",1968,1,0,0,["Binary",677,7,0,["Binary",567,9,0,["Ident",1974,10,0,"step"],"%","Const",1974,23,0,1],"!==","Const",677,26,0,0],["Throw",1975,1,0,"Call",1975,10,0,["Ident",1975,10,0,"RangeError"],0,["Binary",603,7,0,["Const",1975,22,0,"step must be an integer, got "],"+","Call",1975,54,0,["Ident",1975,54,0,"String"],0,["Ident",1975,61,0,"step"]]],"BlockStatement",1977,1,0,0,["Binary",1977,1,0,["Ident",1977,8,0,"result"],"=","Arr",1977,17,0],["IfStatement",1978,1,0,0,["Binary",754,9,0,["Ident",1978,7,0,"step"],">","Const",1978,15,0,0],["BlockStatement",1979,1,0,0,["Binary",1979,1,0,["Ident",1979,18,0,"i"],"=","Const",1979,23,0,0],["Binary",1980,1,0,["Ident",1980,10,0,"len"],"=","Call",546,11,0,["Ident",546,11,0,"__num"],0,["Binary",1980,18,0,["Ident",1980,18,0,"array"],".","Const",1980,24,0,"length"]],["For",1113,1,0,0,0,["Binary",718,13,0,["Ident",1981,12,0,"i"],"<","Ident",1981,16,0,"len"],["Binary",892,11,0,["Ident",1981,21,0,"i"],"+=","Ident",1981,26,0,"step"],"Call",1982,1,0,["Binary",1982,1,0,["Ident",1982,1,0,"result"],".","Const",1982,16,0,"push"],0,["Binary",1982,21,0,["Ident",1982,21,0,"array"],".","Ident",1982,27,0,"i"]]],"BlockStatement",1984,1,0,0,["Binary",1984,1,0,["Ident",1984,18,0,"i"],"=","Binary",578,9,0,["Call",546,11,0,["Ident",546,11,0,"__num"],0,["Binary",1984,22,0,["Ident",1984,22,0,"array"],".","Const",1984,29,0,"length"]],"-","Const",1984,38,0,1],["For",1113,1,0,0,0,["Binary",756,9,0,["Ident",1985,12,0,"i"],">=","Const",1985,18,0,0],["Binary",892,11,0,["Ident",1985,20,0,"i"],"+=","Ident",1985,25,0,"step"],"Call",1986,1,0,["Binary",1986,1,0,["Ident",1986,1,0,"result"],".","Const",1986,16,0,"push"],0,["Binary",1986,21,0,["Ident",1986,21,0,"array"],".","Ident",1986,27,0,"i"]]],["Return",1987,1,0,"Ident",1987,1,0,"result"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__num","__slice","__step","__toArray","__typeof"]},__sliceStep:{helper:["Func",1989,31,0,0,[["Ident",1989,32,0,"array"],["Ident",1989,38,0,"start"],["Ident",1989,45,0,"end"],["Ident",1989,58,0,"step"],["Ident",1989,64,0,"inclusive"]],["arr"],[],"BlockStatement",1990,1,0,0,["IfStatement",1990,12,0,0,["Binary",1990,15,0,["Ident",1990,15,0,"step"],"<","Const",1990,24,0,0],["Binary",1990,1,0,["Ident",1990,6,0,"arr"],"=","Call",1991,1,0,["Binary",1991,1,0,["Ident",1991,1,0,"__slice"],".","Const",1991,1,0,"call"],0,["Ident",1991,14,0,"array"],["IfExpression",1991,20,0,["Ident",1991,23,0,"inclusive"],["Ident",1991,38,0,"end"],"Binary",1991,47,0,["Unary",363,21,0,"+","Ident",1991,47,0,"end"],"+","Const",1991,55,0,1],["Binary",1991,57,0,["Binary",1991,57,0,["Unary",363,21,0,"+","Ident",1991,57,0,"start"],"+","Const",1991,67,0,1],"||","Const",1991,71,0,1,1]],"Binary",1990,1,0,["Ident",1990,6,0,"arr"],"=","Call",1993,1,0,["Binary",1993,1,0,["Ident",1993,1,0,"__slice"],".","Const",1993,1,0,"call"],0,["Ident",1993,14,0,"array"],["Ident",1993,20,0,"start"],["IfExpression",1993,27,0,["Ident",1993,30,0,"inclusive"],["Binary",1993,45,0,["Binary",1993,45,0,["Unary",363,21,0,"+","Ident",1993,45,0,"end"],"+","Const",1993,53,0,1],"||","Const",1993,57,0,1,1],"Ident",1993,71,0,"end"]],["IfStatement",1994,1,0,0,["Binary",1994,5,0,["Ident",1994,5,0,"step"],"===","Const",1994,14,0,1],["Return",1995,1,0,"Ident",1995,1,0,"arr"],"IfStatement",1994,1,0,0,["Binary",1996,10,0,["Ident",1996,10,0,"step"],"===","Const",1996,18,0,-1],["Return",1997,1,0,"Call",1997,1,0,["Binary",1997,1,0,["Ident",1997,1,0,"arr"],".","Const",1997,9,0,"reverse"],0],"Return",1999,1,0,"Call",1999,1,0,["Ident",1999,1,0,"__step"],0,["Ident",1999,12,0,"arr"],["Ident",1999,16,0,"step"]]],type:{type:"generic",base:"functionBase",args:["array"]},dependencies:["__slice","__sliceStep","__step"]},__arrayToIter:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["proto"],[],"BlockStatement",2099,1,0,0,["Binary",2099,1,0,["Ident",2099,6,0,"proto"],"=","Obj",2099,14,0,2100,5,null,"iterator",["Func",2100,16,0,0,[],[],[],"Return",2100,18,0,"This",2100,18,0],2101,5,null,"next",["Func",2101,12,0,0,[],["array","i"],[],"BlockStatement",2102,1,0,0,["Binary",2102,1,0,["Ident",2102,10,0,"i"],"=","Binary",576,9,0,["Call",546,11,0,["Ident",546,11,0,"__num"],0,["Binary",2102,14,0,["This",2102,14,0],".","Const",2102,16,0,"index"]],"+","Const",2102,24,0,1],["Binary",2103,1,0,["Ident",2103,10,0,"array"],"=","Binary",2103,18,0,["This",2103,18,0],".","Const",2103,20,0,"array"],["IfStatement",2104,1,0,0,["Binary",756,9,0,["Ident",2104,9,0,"i"],">=","Call",723,22,0,["Ident",723,22,0,"__num"],0,["Binary",2104,14,0,["Ident",2104,14,0,"array"],".","Const",2104,21,0,"length"]],["Return",2105,1,0,"Obj",2105,1,0,2105,11,null,"done",["Const",2105,16,0,!0],2105,22,null,"value",["Const",2105,29,0]],"BlockStatement",2107,1,0,0,["Binary",2107,1,0,["Binary",2107,1,0,["This",2107,1,0],".","Const",2107,10,0,"index"],"=","Ident",2107,18,0,"i"],["Return",2108,1,0,"Obj",2108,1,0,2108,11,null,"done",["Const",2108,16,0,!1],2108,23,null,"value",["Binary",2108,30,0,["Ident",2108,30,0,"array"],".","Ident",2108,37,0,"i"]]]]],["Return",1897,1,0,"Func",1897,1,0,0,[["Ident",2110,5,0,"array"]],["_o"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Unary",654,18,0,"!","Call",140,146,0,["Ident",140,146,0,"__isArray"],0,["Ident",2110,5,0,"array"]],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected array to be an Array, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2110,5,0,"array"]]]],["Binary",2111,1,0,["Ident",2111,1,0,"_o"],"=","Call",2111,1,0,["Ident",2111,1,0,"__create"],0,["Ident",2111,14,0,"proto"]],["Binary",2112,7,0,["Binary",2112,7,0,["Ident",2111,1,0,"_o"],".","Const",2112,7,0,"array"],"=","Ident",2112,7,0,"array"],["Binary",2113,7,0,["Binary",2113,7,0,["Ident",2111,1,0,"_o"],".","Const",2113,7,0,"index"],"=","Const",2113,13,0,-1],["Return",2111,1,0,"Ident",2111,1,0,"_o"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{array:"array",index:"number"}}]},dependencies:["__arrayToIter","__create","__isArray","__num","__typeof"]},__iter:{helper:["Func",2116,25,0,0,[["Ident",2116,26,0,"iterable"]],[],[],"IfStatement",2117,1,0,0,["Binary",2117,5,0,["Ident",2117,9,0,"iterable"],"==","Const",0,0,0,null],["Throw",2118,1,0,"Call",2118,10,0,["Ident",2118,10,0,"TypeError"],0,["Binary",603,7,0,["Const",2118,21,0,"Expected iterable to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2118,70,0,"iterable"]]],"IfStatement",2117,1,0,0,["Call",140,146,0,["Ident",140,146,0,"__isArray"],0,["Ident",2119,20,0,"iterable"]],["Return",2120,1,0,"Call",2120,1,0,["Ident",2120,1,0,"__arrayToIter"],0,["Ident",2120,21,0,"iterable"]],"IfStatement",2117,1,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",2121,23,0,["Ident",2121,23,0,"iterable"],".","Const",2121,33,0,"iterator"],"===","Const",137,25,0,"function"],["Return",2122,1,0,"Call",2122,1,0,["Binary",2122,1,0,["Ident",2122,1,0,"iterable"],".","Const",2122,14,0,"iterator"],0],"IfStatement",2117,1,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",2123,23,0,["Ident",2123,23,0,"iterable"],".","Const",2123,33,0,"next"],"===","Const",137,25,0,"function"],["Return",2124,1,0,"Ident",2124,1,0,"iterable"],"Throw",2126,1,0,"Call",2126,10,0,["Ident",2126,10,0,"Error"],0,["Binary",603,7,0,["Const",2126,17,0,"Expected iterable to be an Array or an Object with an 'iterator' function or an Object with a 'next' function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2126,142,0,"iterable"]]],type:"function",dependencies:["__arrayToIter","__isArray","__iter","__typeof"]},__keys:{helper:["IfExpression",2295,23,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",2295,39,0,["Ident",2295,39,0,"Object"],".","Const",2295,47,0,"keys"],"===","Const",137,25,0,"function"],["Binary",2296,1,0,["Ident",2296,1,0,"Object"],".","Const",2296,10,0,"keys"],"Func",2298,4,0,0,[["Ident",2298,5,0,"x"]],["key","keys"],[],"BlockStatement",2299,1,0,0,["Binary",2299,1,0,["Ident",2299,8,0,"keys"],"=","Arr",2299,15,0],["ForIn",2300,1,0,0,["Ident",2300,8,0,"key"],["Ident",2300,15,0,"x"],"IfStatement",1567,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",2300,15,0,"x"],["Ident",2300,8,0,"key"]],["Call",2301,1,0,["Binary",2301,1,0,["Ident",2301,1,0,"keys"],".","Const",2301,12,0,"push"],0,["Ident",2301,17,0,"key"]]],["Return",2302,1,0,"Ident",2302,1,0,"keys"]],type:"any",dependencies:["__keys","__owns"]},__allkeys:{helper:["Func",2307,28,0,0,[["Ident",2307,29,0,"x"]],["key","keys"],[],"BlockStatement",2308,1,0,0,["Binary",2308,1,0,["Ident",2308,6,0,"keys"],"=","Arr",2308,13,0],["ForIn",2309,1,0,0,["Ident",2309,6,0,"key"],["Ident",2309,16,0,"x"],"Call",2310,1,0,["Binary",2310,1,0,["Ident",2310,1,0,"keys"],".","Const",2310,10,0,"push"],0,["Ident",2310,15,0,"key"]],["Return",2311,1,0,"Ident",2311,1,0,"keys"]],type:{type:"generic",base:"functionBase",args:["stringArray"]},dependencies:["__allkeys"]},__new:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["newCreators"],[],"BlockStatement",2317,1,0,0,["Binary",2317,1,0,["Ident",2317,6,0,"newCreators"],"=","Arr",2317,21,0],["Return",2318,4,0,"Func",2318,4,0,0,[],["creator","func","i","length"],[],"BlockStatement",2319,1,0,0,["IfStatement",2319,1,0,0,["Binary",2319,7,0,["Unary",137,7,0,"typeof","This",2319,24,0],"!==","Const",137,25,0,"function"],["Throw",2320,1,0,"Call",2320,12,0,["Ident",2320,12,0,"Error"],0,["Binary",603,7,0,["Const",2320,19,0,"Expected this to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["This",2320,65,0]]]],["Binary",2321,1,0,["Ident",2321,8,0,"length"],"=","Binary",2321,17,0,["Arguments",2321,17,0],".","Const",2321,28,0,"length"],["Binary",2322,1,0,["Ident",2322,16,0,"creator"],"=","Binary",2322,26,0,["Ident",2322,26,0,"newCreators"],".","Ident",2322,40,0,"length"],["IfStatement",2323,1,0,0,["Unary",2323,7,0,"!","Ident",2323,11,0,"creator"],["BlockStatement",2324,1,0,0,["Binary",2324,1,0,["Ident",2324,10,0,"func"],"=","Arr",2324,17,0,["Const",2324,19,0,"return new C("]],["For",1273,1,0,0,["BlockExpression",0,0,0,["Binary",1183,38,0,["Ident",2325,10,0,"i"],"=","Const",2325,16,0,0],["Ident",2325,21,0,"length"]],["Binary",1209,57,0,["Ident",2325,10,0,"i"],"<","Ident",2325,21,0,"length"],["Unary",1221,35,0,"++","Ident",2325,10,0,"i"],"BlockStatement",2326,1,0,0,["IfStatement",2326,1,0,0,["Binary",754,9,0,["Ident",2326,11,0,"i"],">","Const",2326,16,0,0],["Call",2327,1,0,["Binary",2327,1,0,["Ident",2327,1,0,"func"],".","Const",2327,16,0,"push"],0,["Const",2327,21,0,", "]]],["Call",2328,1,0,["Binary",2328,1,0,["Ident",2328,1,0,"func"],".","Const",2328,14,0,"push"],0,["Const",2328,19,0,"a["],["Ident",2328,24,0,"i"],["Const",2328,28,0,"]"]]],["Call",2329,1,0,["Binary",2329,1,0,["Ident",2329,1,0,"func"],".","Const",2329,12,0,"push"],0,["Const",2329,17,0,");"]],["Binary",2330,1,0,["Ident",2330,1,0,"creator"],"=","Call",2330,17,0,["Ident",2330,17,0,"Function"],0,["Const",2330,27,0,"C"],["Const",2330,32,0,"a"],["Call",2330,36,0,["Binary",2330,36,0,["Ident",2330,36,0,"func"],".","Const",2330,42,0,"join"],0,["Const",2330,47,0,""]]],["Binary",2331,1,0,["Binary",2331,1,0,["Ident",2331,1,0,"newCreators"],".","Ident",2331,20,0,"length"],"=","Ident",2331,30,0,"creator"]]],["Return",2332,1,0,"Call",2332,1,0,["Ident",2332,1,0,"creator"],0,["This",2332,13,0],["Arguments",2332,18,0]]]],0],type:"function",dependencies:["__new","__typeof"]},__instanceofsome:{helper:["Func",2334,35,0,0,[["Ident",2334,36,0,"value"],["Ident",2334,42,0,"array"]],["_arr","_i","_some","item"],[],"BlockStatement",2335,1,0,0,["Binary",1021,26,0,["Ident",1473,13,0,"_some"],"=","Const",0,0,0,!1],["For",1473,13,0,0,["BlockExpression",0,0,0,["Binary",2335,1,0,["Ident",2335,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Ident",2335,19,0,"array"]],["Binary",1376,26,0,["Ident",2335,1,0,"_i"],"=","Binary",1376,49,0,["Ident",2335,1,0,"_arr"],".","Const",1376,56,0,"length"]],["Unary",1377,16,0,"--post","Ident",2335,1,0,"_i"],0,"BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",2335,11,0,"item"],"=","Binary",1340,75,0,["Ident",2335,1,0,"_arr"],".","Ident",2335,1,0,"_i"],["IfStatement",1023,1,0,0,["Binary",2336,1,0,["Ident",2336,1,0,"value"],"instanceof","Ident",2336,21,0,"item"],["BlockStatement",1024,1,0,0,["Binary",1024,1,0,["Ident",1473,13,0,"_some"],"=","Const",0,0,0,!0],["Break",1025,1,0]]]],["Return",1473,13,0,"Ident",1473,13,0,"_some"]],type:{type:"generic",base:"functionBase",args:["boolean"]},dependencies:["__instanceofsome","__toArray"]},__getInstanceof:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",2339,1,0,0,["Func",2339,1,0,["Ident",2339,6,0,"isAny"],[],[],[],"Return",2339,19,0,"Const",2339,19,0,!0],["Func",2340,1,0,["Ident",2340,6,0,"isStr"],[["Ident",2340,17,0,"x"]],[],[],"Return",128,7,0,"Binary",128,7,0,["Unary",128,7,0,"typeof","Ident",2340,17,0,"x"],"===","Const",128,25,0,"string"],["Func",2341,1,0,["Ident",2341,6,0,"isNum"],[["Ident",2341,17,0,"x"]],[],[],"Return",131,7,0,"Binary",131,7,0,["Unary",131,7,0,"typeof","Ident",2341,17,0,"x"],"===","Const",131,25,0,"number"],["Func",2342,1,0,["Ident",2342,6,0,"isFunc"],[["Ident",2342,18,0,"x"]],[],[],"Return",137,7,0,"Binary",137,7,0,["Unary",137,7,0,"typeof","Ident",2342,18,0,"x"],"===","Const",137,25,0,"function"],["Func",2343,1,0,["Ident",2343,6,0,"isBool"],[["Ident",2343,18,0,"x"]],[],[],"Return",134,7,0,"Binary",134,7,0,["Unary",134,7,0,"typeof","Ident",2343,18,0,"x"],"===","Const",134,25,0,"boolean"],["Return",2344,4,0,"Func",2344,4,0,0,[["Ident",2344,5,0,"ctor"]],[],[],"IfStatement",2345,1,0,0,["Binary",2345,7,0,["Ident",2345,11,0,"ctor"],"==","Const",0,0,0,null],["Return",2346,1,0,"Ident",2346,1,0,"isAny"],"Switch",2348,1,0,0,["Ident",2348,13,0,"ctor"],2349,11,null,["Ident",2349,11,0,"String"],["Return",2349,19,0,"Ident",2349,19,0,"isStr"],2350,11,null,["Ident",2350,11,0,"Number"],["Return",2350,19,0,"Ident",2350,19,0,"isNum"],2351,11,null,["Ident",2351,11,0,"Function"],["Return",2351,21,0,"Ident",2351,21,0,"isFunc"],2352,11,null,["Ident",2352,11,0,"Boolean"],["Return",2352,20,0,"Ident",2352,20,0,"isBool"],2353,11,null,["Ident",2353,11,0,"Array"],["Return",2353,18,0,"Ident",2353,18,0,"__isArray"],2354,11,null,["Ident",2354,11,0,"Object"],["Return",2354,19,0,"Ident",2354,19,0,"__isObject"],["Return",2355,17,0,"Func",2355,17,0,0,[["Ident",2355,17,0,"_x"]],[],[],"Return",2355,17,0,"Binary",2355,17,0,["Ident",2355,17,0,"_x"],"instanceof","Ident",2355,27,0,"ctor"]]],0],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:["boolean"]}]},dependencies:["__getInstanceof","__isArray","__isObject"]},__name:{helper:["Func",1897,1,0,0,[["Ident",2357,26,0,"func"]],[],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2357,26,0,"func"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected func to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2357,26,0,"func"]]]],["Return",2357,50,0,"Binary",2357,50,0,["Binary",2357,50,0,["Binary",2357,50,0,["Ident",2357,50,0,"func"],".","Const",2357,56,0,"displayName"],"||","Binary",2357,71,0,["Ident",2357,71,0,"func"],".","Const",2357,77,0,"name"],"||","Const",2357,85,0,""]],type:{type:"generic",base:"functionBase",args:["string"]},dependencies:["__name","__typeof"]},__once:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",2360,1,0,0,["Func",2360,1,0,["Ident",2360,6,0,"replacement"],[],[],[],"Throw",2360,23,0,"Call",2360,29,0,["Ident",2360,29,0,"Error"],0,["Const",2360,36,0,"Attempted to call function more than once"]],["Func",2361,1,0,["Ident",2361,6,0,"doNothing"],[],[],[]],["Return",1897,1,0,"Func",1897,1,0,0,[["Ident",2362,12,0,"func"],["Ident",2362,24,0,"silentFail"]],[],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2362,12,0,"func"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected func to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2362,12,0,"func"]]]],["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",2362,24,0,"silentFail"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",2362,24,0,"silentFail"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",2362,24,0,"silentFail"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected silentFail to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2362,24,0,"silentFail"]]]],["Return",2362,53,0,"Func",2362,53,0,0,[],["f"],[],"BlockStatement",2363,1,0,0,["Binary",2363,1,0,["Ident",2363,8,0,"f"],"=","Ident",2363,12,0,"func"],["IfStatement",2364,12,0,0,["Ident",2364,15,0,"silentFail"],["Binary",2364,1,0,["Ident",2364,1,0,"func"],"=","Ident",2364,32,0,"doNothing"],"Binary",2364,1,0,["Ident",2364,1,0,"func"],"=","Ident",2364,48,0,"replacement"],["Return",2365,1,0,"Call",2365,1,0,["Binary",2365,1,0,["Ident",2365,1,0,"f"],".","Const",2365,1,0,"apply"],0,["This",2365,8,0],["Arguments",2365,17,0]]]]],0],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__once","__toArray","__typeof"]},__async:{helper:["Func",1897,1,0,0,[["Ident",2467,34,0,"limit"],["Ident",2467,51,0,"length"],["Ident",2467,69,0,"hasResult"],["Ident",2467,92,0,"onValue"],["Ident",2467,108,0,"onComplete"]],["broken","completed","index","result","slotsUsed","sync"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",2467,34,0,"limit"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected limit to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2467,34,0,"limit"]]]],["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",2467,51,0,"length"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected length to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2467,51,0,"length"]]]],["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",2467,69,0,"hasResult"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",2467,69,0,"hasResult"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",2467,69,0,"hasResult"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected hasResult to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2467,69,0,"hasResult"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2467,92,0,"onValue"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected onValue to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2467,92,0,"onValue"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2467,108,0,"onComplete"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected onComplete to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2467,108,0,"onComplete"]]]],["IfStatement",2468,15,0,0,["Ident",2468,18,0,"hasResult"],["Binary",2468,1,0,["Ident",2468,6,0,"result"],"=","Arr",2468,34,0],"Binary",2468,1,0,["Ident",2468,6,0,"result"],"=","Const",2468,42,0,null],["IfStatement",2469,1,0,0,["Binary",2469,5,0,["Ident",2469,5,0,"length"],"<=","Const",2469,17,0,0],["Return",2470,1,0,"Call",2470,11,0,["Ident",2470,11,0,"onComplete"],0,["Const",2470,24,0,null],["Ident",2470,29,0,"result"]]],["IfStatement",2471,1,0,0,["Binary",2471,5,0,["Binary",2471,5,0,["Ident",2471,5,0,"limit"],"<","Const",2471,15,0,1],"||","Binary",43,7,0,["Ident",2471,19,0,"limit"],"!==","Ident",2471,28,0,"limit"],["Binary",2472,1,0,["Ident",2472,1,0,"limit"],"=","Const",2472,13,0,1,1]],["Binary",2474,1,0,["Ident",2474,14,0,"broken"],"=","Const",2474,23,0,null],["Binary",2475,1,0,["Ident",2475,14,0,"slotsUsed"],"=","Const",2475,28,0,0],["Binary",2476,1,0,["Ident",2476,14,0,"sync"],"=","Const",2476,21,0,!1],["Binary",2477,1,0,["Ident",2477,14,0,"completed"],"=","Const",2477,26,0,!1],["Func",2478,1,0,["Ident",2478,6,0,"onValueCallback"],[["Ident",2478,25,0,"err"],["Ident",2478,29,0,"value"]],[],[],"BlockStatement",2479,1,0,0,["IfStatement",2479,1,0,0,["Ident",2479,7,0,"completed"],["Return",2480,1,0,"Const",2480,1,0]],["Unary",2481,1,0,"--","Ident",2481,1,0,"slotsUsed"],["IfStatement",2482,1,0,0,["Binary",2482,7,0,["Binary",49,7,0,["Ident",2482,7,0,"err"],"!=","Const",0,0,0,null],"&&","Binary",2482,16,0,["Ident",2482,20,0,"broken"],"==","Const",0,0,0,null],["Binary",2483,1,0,["Ident",2483,1,0,"broken"],"=","Ident",2483,16,0,"err"]],["IfStatement",2484,1,0,0,["Binary",2484,7,0,["Binary",2484,7,0,["Ident",2484,7,0,"hasResult"],"&&","Binary",2484,22,0,["Ident",2484,26,0,"broken"],"==","Const",0,0,0,null],"&&","Binary",57,23,0,["Binary",2484,38,0,["Arguments",2484,38,0],".","Const",2484,49,0,"length"],">","Const",2484,59,0,1],["Call",2485,1,0,["Binary",2485,1,0,["Ident",2485,1,0,"result"],".","Const",2485,14,0,"push"],0,["Ident",2485,19,0,"value"]]],["IfStatement",2486,1,0,0,["Unary",2486,7,0,"!","Ident",2486,11,0,"sync"],["Call",2487,1,0,["Ident",2487,1,0,"next"],0]]],["Binary",2488,1,0,["Ident",2488,14,0,"index"],"=","Const",2488,22,0,-1],["Func",2489,1,0,["Ident",2489,6,0,"next"],[],[],[],"BlockStatement",2490,1,0,0,["For",1113,1,0,0,0,["Binary",2490,10,0,["Binary",2490,10,0,["Binary",2490,10,0,["Unary",2490,10,0,"!","Ident",2490,14,0,"completed"],"&&","Binary",2490,28,0,["Ident",2490,32,0,"broken"],"==","Const",0,0,0,null],"&&","Binary",2490,44,0,["Ident",2490,44,0,"slotsUsed"],"<","Ident",2490,58,0,"limit"],"&&","Binary",2490,68,0,["Unary",892,11,0,"++","Ident",2490,70,0,"index"],"<","Ident",2490,84,0,"length"],0,"BlockStatement",2491,1,0,0,["Unary",2491,1,0,"++","Ident",2491,1,0,"slotsUsed"],["Binary",2492,1,0,["Ident",2492,1,0,"sync"],"=","Const",2492,14,0,!0],["Call",2493,1,0,["Ident",2493,1,0,"onValue"],0,["Ident",2493,16,0,"index"],["Call",2393,11,0,["Ident",2393,11,0,"__once"],0,["Ident",2493,29,0,"onValueCallback"]]],["Binary",2494,1,0,["Ident",2494,1,0,"sync"],"=","Const",2494,14,0,!1]],["IfStatement",2495,1,0,0,["Binary",2495,7,0,["Unary",2495,7,0,"!","Ident",2495,11,0,"completed"],"&&","Binary",2495,27,0,["Binary",49,7,0,["Ident",2495,27,0,"broken"],"!=","Const",0,0,0,null],"||","Binary",2495,37,0,["Ident",2495,37,0,"slotsUsed"],"===","Const",2495,52,0,0],["BlockStatement",2496,1,0,0,["Binary",2496,1,0,["Ident",2496,1,0,"completed"],"=","Const",2496,19,0,!0],["IfStatement",2497,1,0,0,["Binary",49,7,0,["Ident",2497,9,0,"broken"],"!=","Const",0,0,0,null],["Call",2498,1,0,["Ident",2498,1,0,"onComplete"],0,["Ident",2498,21,0,"broken"]],"Call",2500,1,0,["Ident",2500,1,0,"onComplete"],0,["Const",2500,21,0,null],["Ident",2500,26,0,"result"]]]]],["Call",2501,1,0,["Ident",2501,1,0,"next"],0]],type:"function",dependencies:["__async","__once","__typeof"]},__asyncIter:{helper:["Func",1897,1,0,0,[["Ident",2503,39,0,"limit"],["Ident",2503,56,0,"iterator"],["Ident",2503,86,0,"hasResult"],["Ident",2503,109,0,"onValue"],["Ident",2503,125,0,"onComplete"]],["broken","close","completed","index","iterStopped","result","slotsUsed","sync"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",2503,39,0,"limit"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected limit to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2503,39,0,"limit"]]]],["IfStatement",1770,10,0,0,["Binary",1770,13,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",2503,56,0,"iterator"],"!==","Const",143,62,0,"object"],"||","Binary",143,72,0,["Ident",2503,56,0,"iterator"],"===","Const",0,0,0,null],["Throw",1771,1,0,"Call",1771,14,0,["Ident",1771,14,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected iterator to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2503,56,0,"iterator"]]],"IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Binary",1769,35,0,["Ident",2503,56,0,"iterator"],".","Const",2503,70,0,"next"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected iterator.next to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Binary",1769,35,0,["Ident",2503,56,0,"iterator"],".","Const",2503,70,0,"next"]]]],["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",2503,86,0,"hasResult"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",2503,86,0,"hasResult"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",2503,86,0,"hasResult"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected hasResult to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2503,86,0,"hasResult"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2503,109,0,"onValue"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected onValue to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2503,109,0,"onValue"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",2503,125,0,"onComplete"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected onComplete to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",2503,125,0,"onComplete"]]]],["IfStatement",2504,1,0,0,["Binary",2504,5,0,["Binary",2504,5,0,["Ident",2504,5,0,"limit"],"<","Const",2504,15,0,1],"||","Binary",43,7,0,["Ident",2504,19,0,"limit"],"!==","Ident",2504,28,0,"limit"],["Binary",2505,1,0,["Ident",2505,1,0,"limit"],"=","Const",2505,13,0,1,1]],["Binary",2506,1,0,["Ident",2506,14,0,"broken"],"=","Const",2506,23,0,null],["Binary",2507,1,0,["Ident",2507,14,0,"slotsUsed"],"=","Const",2507,28,0,0],["Binary",2508,1,0,["Ident",2508,14,0,"sync"],"=","Const",2508,21,0,!1],["IfStatement",2509,15,0,0,["Ident",2509,18,0,"hasResult"],["Binary",2509,1,0,["Ident",2509,6,0,"result"],"=","Arr",2509,34,0],"Binary",2509,1,0,["Ident",2509,6,0,"result"],"=","Const",2509,42,0,null],["Binary",2510,1,0,["Ident",2510,14,0,"completed"],"=","Const",2510,26,0,!1],["Func",2511,1,0,["Ident",2511,6,0,"onValueCallback"],[["Ident",2511,25,0,"err"],["Ident",2511,29,0,"value"]],[],[],"BlockStatement",2512,1,0,0,["IfStatement",2512,1,0,0,["Ident",2512,7,0,"completed"],["Return",2513,1,0,"Const",2513,1,0]],["Unary",2514,1,0,"--","Ident",2514,1,0,"slotsUsed"],["IfStatement",2515,1,0,0,["Binary",2515,7,0,["Binary",49,7,0,["Ident",2515,7,0,"err"],"!=","Const",0,0,0,null],"&&","Binary",2515,16,0,["Ident",2515,20,0,"broken"],"==","Const",0,0,0,null],["Binary",2516,1,0,["Ident",2516,1,0,"broken"],"=","Ident",2516,16,0,"err"]],["IfStatement",2517,1,0,0,["Binary",2517,7,0,["Binary",2517,7,0,["Ident",2517,7,0,"hasResult"],"&&","Binary",2517,22,0,["Ident",2517,26,0,"broken"],"==","Const",0,0,0,null],"&&","Binary",57,23,0,["Binary",2517,38,0,["Arguments",2517,38,0],".","Const",2517,49,0,"length"],">","Const",2517,59,0,1],["Call",2518,1,0,["Binary",2518,1,0,["Ident",2518,1,0,"result"],".","Const",2518,14,0,"push"],0,["Ident",2518,19,0,"value"]]],["IfStatement",2519,1,0,0,["Unary",2519,7,0,"!","Ident",2519,11,0,"sync"],["Call",2520,1,0,["Ident",2520,1,0,"next"],0]]],["Binary",2521,1,0,["Ident",2521,14,0,"index"],"=","Const",2521,22,0,-1],["Binary",2522,1,0,["Ident",2522,14,0,"iterStopped"],"=","Const",2522,29,0,!1],["Binary",2523,1,0,["Ident",2523,14,0,"close"],"=","Func",2523,24,0,0,[],[],[],"BlockStatement",2524,1,0,0,["Binary",2524,1,0,["Ident",2524,1,0,"close"],"=","Func",2524,15,0,0,[],[],[]],["TryCatch",2525,1,0,0,["Return",2526,1,0,"Call",2526,1,0,["Binary",2526,1,0,["Ident",2526,1,0,"iterator"],".","Const",2526,16,0,"close"],0],["Ident",2527,10,0,"e"],"Return",2528,1,0,"Const",2528,1,0]],["Func",2529,1,0,["Ident",2529,6,0,"next"],[],["item"],[],"BlockStatement",2530,1,0,0,["For",1113,1,0,0,0,["Binary",2530,10,0,["Binary",2530,10,0,["Binary",2530,10,0,["Unary",2530,10,0,"!","Ident",2530,14,0,"completed"],"&&","Binary",2530,28,0,["Ident",2530,32,0,"broken"],"==","Const",0,0,0,null],"&&","Binary",2530,44,0,["Ident",2530,44,0,"slotsUsed"],"<","Ident",2530,58,0,"limit"],"&&","Unary",2530,68,0,"!","Ident",2530,72,0,"iterStopped"],0,"BlockStatement",2531,1,0,0,["TryCatch",2531,1,0,0,["Binary",2532,1,0,["Ident",2532,12,0,"item"],"=","Call",2532,19,0,["Binary",2532,19,0,["Ident",2532,19,0,"iterator"],".","Const",2532,29,0,"next"],0],["Ident",2533,12,0,"e"],"BlockStatement",2534,1,0,0,["Binary",2534,1,0,["Ident",2534,1,0,"broken"],"=","Ident",2534,18,0,"e"],["Break",2535,1,0]],["IfStatement",2537,1,0,0,["Binary",2537,9,0,["Ident",2537,9,0,"item"],".","Const",2537,15,0,"done"],["BlockStatement",2538,1,0,0,["Binary",2538,1,0,["Ident",2538,1,0,"iterStopped"],"=","Const",2538,24,0,!0],["Break",2539,1,0]]],["Unary",2541,1,0,"++","Ident",2541,1,0,"slotsUsed"],["Binary",2542,1,0,["Ident",2542,1,0,"sync"],"=","Const",2542,14,0,!0],["TryCatch",2543,1,0,0,["Call",2544,1,0,["Ident",2544,1,0,"onValue"],0,["Binary",2544,18,0,["Ident",2544,18,0,"item"],".","Const",2544,23,0,"value"],["Unary",892,11,0,"++","Ident",2544,31,0,"index"],["Call",2393,11,0,["Ident",2393,11,0,"__once"],0,["Ident",2544,50,0,"onValueCallback"]]],["Ident",2545,12,0,"e"],"BlockStatement",2546,1,0,0,["Call",2546,1,0,["Ident",2546,1,0,"close"],0],["Throw",2547,1,0,"Ident",2547,14,0,"e"]],["Binary",2548,1,0,["Ident",2548,1,0,"sync"],"=","Const",2548,14,0,!1]],["IfStatement",2549,1,0,0,["Binary",2549,7,0,["Unary",2549,7,0,"!","Ident",2549,11,0,"completed"],"&&","Binary",2549,27,0,["Binary",49,7,0,["Ident",2549,27,0,"broken"],"!=","Const",0,0,0,null],"||","Binary",2549,37,0,["Ident",2549,37,0,"slotsUsed"],"===","Const",2549,52,0,0],["BlockStatement",2550,1,0,0,["Binary",2550,1,0,["Ident",2550,1,0,"completed"],"=","Const",2550,19,0,!0],["Call",2551,1,0,["Ident",2551,1,0,"close"],0],["IfStatement",2552,1,0,0,["Binary",49,7,0,["Ident",2552,9,0,"broken"],"!=","Const",0,0,0,null],["Call",2553,1,0,["Ident",2553,1,0,"onComplete"],0,["Ident",2553,21,0,"broken"]],"Call",2555,1,0,["Ident",2555,1,0,"onComplete"],0,["Const",2555,21,0,null],["Ident",2555,26,0,"result"]]]]],["Call",2556,1,0,["Ident",2556,1,0,"next"],0]],type:{type:"generic",base:"functionBase",args:["undefined"]},dependencies:["__asyncIter","__once","__typeof"]},__is:{helper:["IfExpression",3085,21,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3085,37,0,["Ident",3085,37,0,"Object"],".","Const",3085,45,0,"is"],"===","Const",137,25,0,"function"],["Binary",3086,1,0,["Ident",3086,1,0,"Object"],".","Const",3086,10,0,"is"],"Func",3088,4,0,0,[["Ident",3088,5,0,"x"],["Ident",3088,7,0,"y"]],[],[],"IfStatement",3089,1,0,0,["Binary",3089,7,0,["Ident",3089,7,0,"x"],"===","Ident",3089,12,0,"y"],["Return",3090,1,0,"Binary",3090,1,0,["Binary",43,7,0,["Ident",3090,1,0,"x"],"!==","Const",3090,12,0,0],"||","Binary",3090,18,0,["Binary",3090,18,0,["Const",3090,18,0,1],"/","Ident",3090,22,0,"x"],"===","Binary",3090,27,0,["Const",3090,28,0,1],"/","Ident",3090,32,0,"y"],"Return",3092,1,0,"Binary",3092,1,0,["Binary",43,7,0,["Ident",3092,1,0,"x"],"!==","Ident",3092,11,0,"x"],"&&","Binary",43,7,0,["Ident",3092,17,0,"y"],"!==","Ident",3092,22,0,"y"],type:"any",dependencies:["__is"]},__bind:{helper:["Func",3132,25,0,0,[["Ident",3132,26,0,"parent"],["Ident",3132,33,0,"child"]],["func"],[],"BlockStatement",3133,1,0,0,["IfStatement",3133,1,0,0,["Binary",3133,5,0,["Ident",3133,9,0,"parent"],"==","Const",0,0,0,null],["Throw",3134,1,0,"Call",3134,10,0,["Ident",3134,10,0,"TypeError"],0,["Binary",603,7,0,["Const",3134,21,0,"Expected parent to be an object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3134,68,0,"parent"]]]],["Binary",3135,1,0,["Ident",3135,6,0,"func"],"=","Binary",3135,13,0,["Ident",3135,13,0,"parent"],".","Ident",3135,21,0,"child"],["IfStatement",3136,1,0,0,["Binary",3136,5,0,["Unary",137,7,0,"typeof","Ident",3136,22,0,"func"],"!==","Const",137,25,0,"function"],["Throw",3137,1,0,"Call",3137,10,0,["Ident",3137,10,0,"Error"],0,["Binary",603,7,0,["Binary",603,7,0,["Const",3137,17,0,"Trying to bind child '"],"+","Call",3137,42,0,["Ident",3137,42,0,"String"],0,["Ident",3137,49,0,"child"]],"+","Const",3137,17,0,"' which is not a function"]]],["Return",3138,4,0,"Func",3138,4,0,0,[],[],[],"Return",3138,7,0,"Call",3138,7,0,["Binary",3138,7,0,["Ident",3138,7,0,"func"],".","Const",3138,7,0,"apply"],0,["Ident",3138,14,0,"parent"],["Arguments",3138,25,0]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__bind","__toArray","__typeof"]},__defProp:{helper:["Call",9,9,0,["Func",9,12,0,0,[],["defineGetter","defineSetter","fallback","lookupGetter","lookupSetter","supportsAccessors"],[],"BlockStatement",3141,1,0,0,["Binary",3141,1,0,["Ident",3141,6,0,"fallback"],"=","Binary",3141,17,0,["Ident",3141,17,0,"Object"],".","Const",3141,25,0,"defineProperty"],["IfStatement",3142,1,0,0,["Binary",3142,5,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Ident",3142,18,0,"fallback"],"===","Const",137,25,0,"function"],"&&","Call",9,9,0,["Func",9,12,0,0,[],["o"],[],"TryCatch",3143,1,0,0,["BlockStatement",3144,1,0,0,["Binary",3144,1,0,["Ident",3144,12,0,"o"],"=","Obj",3144,16,0],["Call",3145,1,0,["Ident",3145,1,0,"fallback"],0,["Ident",3145,18,0,"o"],["Const",3145,22,0,"sentinel"],["Obj",3145,31,0]],["Return",3146,1,0,"Binary",3146,1,0,["Const",3146,19,0,"sentinel"],"in","Ident",3146,1,0,"o"]],["Ident",3147,12,0,"e"],"Return",3148,1,0,"Const",3148,1,0,!1],0],["Return",3149,1,0,"Ident",3149,1,0,"fallback"],"BlockStatement",3151,1,0,0,["Binary",3151,1,0,["Ident",3151,8,0,"supportsAccessors"],"=","Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Binary",3151,29,0,["Ident",3151,29,0,"Object"],".","Const",3151,37,0,"prototype"],["Const",3151,56,0,"__defineGetter__"]],["Binary",3152,1,0,["Ident",3152,8,0,"lookupGetter"],"=","Binary",3152,24,0,["Ident",3152,24,0,"supportsAccessors"],"&&","Binary",3152,47,0,["Binary",3152,47,0,["Ident",3152,47,0,"Object"],".","Const",3152,47,0,"prototype"],".","Const",3152,56,0,"__lookupGetter__"],["Binary",3153,1,0,["Ident",3153,8,0,"lookupSetter"],"=","Binary",3153,24,0,["Ident",3153,24,0,"supportsAccessors"],"&&","Binary",3153,47,0,["Binary",3153,47,0,["Ident",3153,47,0,"Object"],".","Const",3153,47,0,"prototype"],".","Const",3153,56,0,"__lookupSetter__"],["Binary",3154,1,0,["Ident",3154,8,0,"defineGetter"],"=","Binary",3154,24,0,["Ident",3154,24,0,"supportsAccessors"],"&&","Binary",3154,47,0,["Binary",3154,47,0,["Ident",3154,47,0,"Object"],".","Const",3154,47,0,"prototype"],".","Const",3154,56,0,"__defineGetter__"],["Binary",3155,1,0,["Ident",3155,8,0,"defineSetter"],"=","Binary",3155,24,0,["Ident",3155,24,0,"supportsAccessors"],"&&","Binary",3155,47,0,["Binary",3155,47,0,["Ident",3155,47,0,"Object"],".","Const",3155,47,0,"prototype"],".","Const",3155,56,0,"__defineSetter__"],["Return",1897,1,0,"Func",1897,1,0,0,[["Ident",3156,7,0,"object"],["Ident",3156,23,0,"property"],["Ident",3156,43,0,"descriptor"]],["proto"],[],"BlockStatement",1897,1,0,0,["IfStatement",1732,31,0,0,["Binary",3156,6,0,["Binary",656,18,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3156,7,0,"object"],"!==","Const",143,62,0,"object"],"||","Binary",43,7,0,["Ident",3156,7,0,"object"],"===","Const",0,0,0,null],"&&","Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3156,7,0,"object"],"!==","Const",137,25,0,"function"],["Throw",1733,1,0,"Call",1733,14,0,["Ident",1733,14,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected object to be one of Object or Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3156,7,0,"object"]]]],["IfStatement",1681,1,0,0,["Binary",646,18,0,["Unary",128,7,0,"typeof","Ident",3156,23,0,"property"],"!==","Const",128,25,0,"string"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected property to be a String, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3156,23,0,"property"]]]],["IfStatement",1681,1,0,0,["Binary",656,18,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3156,43,0,"descriptor"],"!==","Const",143,62,0,"object"],"||","Binary",43,7,0,["Ident",3156,43,0,"descriptor"],"===","Const",0,0,0,null],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected descriptor to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3156,43,0,"descriptor"]]]],["IfStatement",3157,1,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Ident",3157,22,0,"fallback"],"===","Const",137,25,0,"function"],["TryCatch",3158,1,0,0,["Return",3159,1,0,"Call",3159,17,0,["Ident",3159,17,0,"fallback"],0,["Ident",3159,27,0,"object"],["Ident",3159,34,0,"property"],["Ident",3159,44,0,"descriptor"]],["Ident",3160,14,0,"e"],"Const",3161,1,0]],["IfStatement",3163,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3163,9,0,"descriptor"],["Const",3163,30,0,"value"]],["IfStatement",3164,1,0,0,["Binary",3164,11,0,["Ident",3164,11,0,"supportsAccessors"],"&&","Call",3164,36,0,["Binary",3164,36,0,["Ident",3164,36,0,"lookupGetter"],".","Const",3164,36,0,"call"],0,["Ident",3164,51,0,"object"],["Binary",3164,58,0,["Ident",3164,58,0,"property"],"||","Call",3164,70,0,["Binary",3164,70,0,["Ident",3164,70,0,"lookupSetter"],".","Const",3164,70,0,"call"],0,["Ident",3164,86,0,"object"],["Ident",3164,93,0,"property"]]],["BlockStatement",3165,1,0,0,["Binary",3165,1,0,["Ident",3165,14,0,"proto"],"=","Binary",3165,22,0,["Ident",3165,22,0,"object"],".","Const",3165,30,0,"__proto__"],["Binary",3166,1,0,["Binary",3166,1,0,["Ident",3166,1,0,"object"],".","Const",3166,18,0,"__proto__"],"=","Binary",3166,30,0,["Ident",3166,30,0,"Object"],".","Const",3166,38,0,"prototype"],["Unary",3167,1,0,"delete","Binary",3167,17,0,["Ident",3167,17,0,"object"],".","Ident",3167,25,0,"property"],["Binary",3168,1,0,["Binary",3168,1,0,["Ident",3168,1,0,"object"],".","Ident",3168,18,0,"property"],"=","Binary",3168,30,0,["Ident",3168,30,0,"descriptor"],".","Const",3168,42,0,"value"],["Binary",3169,1,0,["Binary",3169,1,0,["Ident",3169,1,0,"object"],".","Const",3169,18,0,"__proto__"],"=","Ident",3169,30,0,"proto"]],"Binary",3171,1,0,["Binary",3171,1,0,["Ident",3171,1,0,"object"],".","Ident",3171,18,0,"property"],"=","Binary",3171,30,0,["Ident",3171,30,0,"descriptor"],".","Const",3171,42,0,"value"],"BlockStatement",3173,1,0,0,["IfStatement",3173,1,0,0,["Unary",3173,11,0,"!","Ident",3173,15,0,"supportsAccessors"],["Throw",3174,1,0,"Call",3174,16,0,["Ident",3174,16,0,"Error"],0,["Const",3174,23,0,"Getters and setters cannot be defined on this Javascript engine"]]],["IfStatement",3175,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3175,11,0,"descriptor"],["Const",3175,32,0,"get"]],["Call",3176,1,0,["Binary",3176,1,0,["Ident",3176,1,0,"defineGetter"],".","Const",3176,1,0,"call"],0,["Ident",3176,26,0,"object"],["Ident",3176,33,0,"property"],["Binary",3176,43,0,["Ident",3176,43,0,"descriptor"],".","Const",3176,55,0,"get"]]],["IfStatement",3177,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3177,11,0,"descriptor"],["Const",3177,32,0,"set"]],["Call",3178,1,0,["Binary",3178,1,0,["Ident",3178,1,0,"defineSetter"],".","Const",3178,1,0,"call"],0,["Ident",3178,26,0,"object"],["Ident",3178,33,0,"property"],["Binary",3178,43,0,["Ident",3178,43,0,"descriptor"],".","Const",3178,55,0,"set"]]]],["Return",3179,1,0,"Ident",3179,1,0,"object"]]]],0],type:"any",dependencies:["__defProp","__owns","__typeof"]},__compose:{helper:["Func",1897,1,0,0,[["Ident",3185,29,0,"left"],["Ident",3185,40,0,"right"]],[],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3185,29,0,"left"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected left to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3185,29,0,"left"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3185,40,0,"right"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected right to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3185,40,0,"right"]]]],["Return",3186,4,0,"Func",3186,4,0,0,[],[],[],"Return",3186,6,0,"Call",3186,6,0,["Binary",3186,6,0,["Ident",3186,6,0,"left"],".","Const",3186,6,0,"call"],0,["This",3186,13,0],["Call",3186,18,0,["Binary",3186,18,0,["Ident",3186,18,0,"right"],".","Const",3186,18,0,"apply"],0,["This",3186,26,0],["Arguments",3186,35,0]]]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__compose","__toArray","__typeof"]},__curry:{helper:["Func",1897,1,0,0,[["Ident",3200,27,0,"numArgs"],["Ident",3200,46,0,"f"]],["currier"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",3200,27,0,"numArgs"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected numArgs to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3200,27,0,"numArgs"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3200,46,0,"f"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected f to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3200,46,0,"f"]]]],["IfStatement",3201,1,0,0,["Binary",754,9,0,["Ident",3201,5,0,"numArgs"],">","Const",3201,17,0,1],["BlockStatement",3202,1,0,0,["Binary",3202,1,0,["Ident",3202,8,0,"currier"],"=","Func",3202,16,0,0,[["Ident",3202,17,0,"args"]],["ret"],[],"IfStatement",3203,1,0,0,["Binary",756,9,0,["Call",739,11,0,["Ident",739,11,0,"__num"],0,["Binary",3203,9,0,["Ident",3203,9,0,"args"],".","Const",3203,15,0,"length"]],">=","Ident",3203,24,0,"numArgs"],["Return",3204,1,0,"Call",3204,1,0,["Binary",3204,1,0,["Ident",3204,1,0,"f"],".","Const",3204,11,0,"apply"],0,["This",3204,17,0],["Ident",3204,22,0,"args"]],"BlockStatement",3206,1,0,0,["Binary",3206,1,0,["Ident",3206,12,0,"ret"],"=","Func",3206,16,0,0,[],[],[],"IfStatement",3207,1,0,0,["Binary",3207,13,0,["Binary",3207,13,0,["Arguments",3207,13,0],".","Const",3207,24,0,"length"],"===","Const",3207,34,0,0],["Return",3208,1,0,"Ident",3208,1,0,"ret"],"Return",3210,1,0,"Call",3210,1,0,["Binary",3210,1,0,["Ident",3210,1,0,"currier"],".","Const",3210,1,0,"call"],0,["This",3210,22,0],["Call",3210,27,0,["Binary",3210,27,0,["Ident",3210,27,0,"args"],".","Const",3210,33,0,"concat"],0,["Call",3210,40,0,["Binary",3210,40,0,["Ident",3210,40,0,"__slice"],".","Const",3210,40,0,"call"],0,["Arguments",3210,49,0]]]],["Return",3211,1,0,"Ident",3211,1,0,"ret"]],["Return",3212,1,0,"Call",3212,1,0,["Ident",3212,1,0,"currier"],0,["Arr",3212,13,0]]],"Return",3214,1,0,"Ident",3214,1,0,"f"]],type:{type:"generic",base:"functionBase",args:["function"]},dependencies:["__curry","__num","__slice","__typeof"]},__import:{helper:["Func",3228,27,0,0,[["Ident",3228,28,0,"dest"],["Ident",3228,33,0,"source"]],["k"],[],"BlockStatement",3229,1,0,0,["ForIn",3229,1,0,0,["Ident",3229,6,0,"k"],["Ident",3229,11,0,"source"],"IfStatement",1567,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3229,11,0,"source"],["Ident",3229,6,0,"k"]],["Binary",3230,1,0,["Binary",3230,1,0,["Ident",3230,1,0,"dest"],".","Ident",3230,10,0,"k"],"=","Binary",3230,15,0,["Ident",3230,15,0,"source"],".","Ident",3230,23,0,"k"]],["Return",3231,1,0,"Ident",3231,1,0,"dest"]],type:{type:"generic",base:"functionBase",args:["object"]},dependencies:["__import","__owns"]},WeakMap:{helper:["IfExpression",3280,24,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3280,40,0,["Ident",3280,40,0,"GLOBAL"],".","Const",3280,48,0,"WeakMap"],"===","Const",137,25,0,"function"],["Binary",3280,60,0,["Ident",3280,60,0,"GLOBAL"],".","Const",3280,68,0,"WeakMap"],"Binary",3024,10,0,["Ident",3280,86,0,"WeakMap"],"=","Call",2986,1,0,["Func",2986,1,0,0,[],["_WeakMap_prototype","defProp","isExtensible"],[],"BlockStatement",2986,1,0,0,["Func",2910,29,0,["Ident",3280,86,0,"WeakMap"],[],["_this"],[],"BlockStatement",3288,1,0,0,["Binary",3288,1,0,["Ident",3288,1,0,"_this"],"=","IfExpression",2909,18,0,["Binary",2909,21,0,["Eval",2909,21,0,["Const",2909,27,0,"this"]],"instanceof","Ident",3280,86,0,"WeakMap"],["Eval",2909,56,0,["Const",2909,62,0,"this"]],"Call",2909,74,0,["Ident",2909,74,0,"__create"],0,["Ident",3280,80,0,"_WeakMap_prototype"]],["Binary",3288,1,0,["Binary",3288,1,0,["Ident",3288,1,0,"_this"],".","Const",3288,6,0,"_keys"],"=","Arr",3288,14,0],["Binary",3289,1,0,["Binary",3289,1,0,["Ident",3289,1,0,"_this"],".","Const",3289,6,0,"_values"],"=","Arr",3289,16,0],["Binary",3291,1,0,["Binary",3291,1,0,["Ident",3291,1,0,"_this"],".","Const",3291,6,0,"_chilly"],"=","Arr",3291,16,0],["Binary",3292,1,0,["Binary",3292,1,0,["Ident",3292,1,0,"_this"],".","Const",3292,6,0,"_uid"],"=","Call",3292,13,0,["Ident",3292,13,0,"createUid"],0],["Return",3288,1,0,"Ident",3288,1,0,"_this"]],["Binary",2840,20,0,["Ident",3280,80,0,"_WeakMap_prototype"],"=","Binary",2840,37,0,["Ident",3280,86,0,"WeakMap"],".","Const",2840,44,0,"prototype"],["Binary",2852,21,0,["Binary",2852,21,0,["Ident",3280,86,0,"WeakMap"],".","Const",2852,28,0,"displayName"],"=","Const",3280,80,0,"WeakMap"],["Func",3281,1,0,["Ident",3281,6,0,"uidRand"],[],[],[],"Return",3282,1,0,"Call",3282,1,0,["Binary",3282,1,0,["Call",3282,1,0,["Binary",3282,1,0,["Call",3282,1,0,["Binary",3282,1,0,["Ident",3282,1,0,"Math"],".","Const",3282,10,0,"random"],0],".","Const",3282,19,0,"toString"],0,["Const",3282,29,0,36]],".","Const",3282,33,0,"slice"],0,["Const",3282,39,0,2]],["Func",3283,1,0,["Ident",3283,6,0,"createUid"],[],[],[],"Return",603,7,0,"Binary",603,7,0,["Binary",603,7,0,["Binary",603,7,0,["Binary",603,7,0,["Binary",603,7,0,["Binary",603,7,0,["Call",597,11,0,["Ident",597,11,0,"__strnum"],0,["Call",3284,8,0,["Ident",3284,8,0,"uidRand"],0]],"+","Const",3284,5,0,"-"],"+","Call",602,11,0,["Ident",602,11,0,"__strnum"],0,["Call",3284,22,0,["Binary",3284,22,0,["Call",3284,22,0,["Ident",3284,25,0,"Date"],1],".","Const",3284,33,0,"getTime"],0]],"+","Const",3284,5,0,"-"],"+","Call",602,11,0,["Ident",602,11,0,"__strnum"],0,["Call",3284,47,0,["Ident",3284,47,0,"uidRand"],0]],"+","Const",3284,5,0,"-"],"+","Call",602,11,0,["Ident",602,11,0,"__strnum"],0,["Call",3284,61,0,["Ident",3284,61,0,"uidRand"],0]],["Binary",3285,1,0,["Ident",3285,6,0,"isExtensible"],"=","Binary",3285,22,0,["Binary",3285,22,0,["Ident",3285,22,0,"Object"],".","Const",3285,30,0,"isExtensible"],"||","Func",3285,48,0,0,[],[],[],"Return",3285,50,0,"Const",3285,50,0,!0],["Func",3294,1,0,["Ident",3294,6,0,"check"],[["Ident",3294,13,0,"key"]],["chilly","uid"],[],"BlockExpression",3295,1,0,["Binary",3295,1,0,["Ident",3295,8,0,"uid"],"=","Binary",3295,14,0,["This",3295,14,0],".","Const",3295,16,0,"_uid"],["IfExpression",3296,1,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3296,7,0,"key"],["Ident",3296,19,0,"uid"]],["BlockExpression",3297,1,0,["Binary",3297,1,0,["Ident",3297,10,0,"chilly"],"=","Binary",3297,19,0,["This",3297,19,0],".","Const",3297,21,0,"_chilly"],["IfExpression",3298,1,0,["Binary",3298,9,0,["Call",3298,9,0,["Binary",3298,9,0,["Ident",3298,9,0,"chilly"],".","Const",3298,17,0,"indexOf"],0,["Ident",3298,26,0,"key"]],"===","Const",3298,33,0,-1],["BlockExpression",3299,1,0,["Call",3299,1,0,["Binary",3299,1,0,["Ident",3299,1,0,"chilly"],".","Const",3299,16,0,"push"],0,["Ident",3299,21,0,"key"]],["Call",3300,1,0,["Binary",3300,1,0,["Binary",3300,1,0,["This",3300,1,0],".","Const",3300,10,0,"_keys"],".","Const",3300,16,0,"push"],0,["Ident",3300,21,0,"key"]],["Call",3301,1,0,["Binary",3301,1,0,["Binary",3301,1,0,["This",3301,1,0],".","Const",3301,10,0,"_values"],".","Const",3301,18,0,"push"],0,["Binary",3301,23,0,["Ident",3301,23,0,"key"],".","Ident",3301,27,0,"uid"]]]]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3280,80,0,"_WeakMap_prototype"],".","Const",3303,6,0,"get"],"=","Func",3303,10,0,0,[["Ident",3303,11,0,"key"]],["_ref","index"],[],"BlockStatement",3304,1,0,0,["IfStatement",3304,1,0,0,["Binary",43,7,0,["Call",3304,7,0,["Ident",3304,7,0,"Object"],0,["Ident",3304,15,0,"key"]],"!==","Ident",3304,22,0,"key"],["Throw",3305,1,0,"Call",3305,12,0,["Ident",3305,12,0,"TypeError"],0,["Const",3305,23,0,"Invalid value used as weak map key"]]],["IfStatement",3307,1,0,0,["Call",3307,7,0,["Ident",3307,7,0,"isExtensible"],0,["Ident",3307,22,0,"key"]],["IfStatement",3308,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3308,1,0,"key"],["Binary",3308,1,0,["Ident",3308,1,0,"_ref"],"=","Binary",3308,12,0,["This",3308,12,0],".","Const",3308,13,0,"_uid"]],["Return",3308,1,0,"Binary",3308,1,0,["Ident",3308,1,0,"key"],".","Ident",3308,1,0,"_ref"]],"BlockStatement",3310,1,0,0,["Call",3310,1,0,["Binary",3310,1,0,["Ident",3310,1,0,"check"],".","Const",3310,1,0,"call"],0,["This",3310,14,0],["Ident",3310,19,0,"key"]],["Binary",3311,1,0,["Ident",3311,10,0,"index"],"=","Call",3311,18,0,["Binary",3311,18,0,["Binary",3311,18,0,["This",3311,18,0],".","Const",3311,20,0,"_keys"],".","Const",3311,26,0,"indexOf"],0,["Ident",3311,35,0,"key"]],["IfStatement",3312,1,0,0,["Binary",3312,9,0,["Ident",3312,9,0,"index"],"===","Const",3312,18,0,-1],["Return",3313,1,0,"Const",3313,1,0],"Return",3315,1,0,"Binary",3315,1,0,["Binary",3315,1,0,["This",3315,1,0],".","Const",3315,10,0,"_values"],".","Ident",3315,18,0,"index"]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3280,80,0,"_WeakMap_prototype"],".","Const",3317,6,0,"has"],"=","Func",3317,10,0,0,[["Ident",3317,11,0,"key"]],[],[],"BlockStatement",3318,1,0,0,["IfStatement",3318,1,0,0,["Binary",43,7,0,["Call",3318,7,0,["Ident",3318,7,0,"Object"],0,["Ident",3318,15,0,"key"]],"!==","Ident",3318,22,0,"key"],["Throw",3319,1,0,"Call",3319,12,0,["Ident",3319,12,0,"TypeError"],0,["Const",3319,23,0,"Invalid value used as weak map key"]]],["IfStatement",3321,1,0,0,["Call",3321,7,0,["Ident",3321,7,0,"isExtensible"],0,["Ident",3321,22,0,"key"]],["Return",641,7,0,"Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3322,1,0,"key"],["Binary",3322,18,0,["This",3322,18,0],".","Const",3322,20,0,"_uid"]],"BlockStatement",3324,1,0,0,["Call",3324,1,0,["Binary",3324,1,0,["Ident",3324,1,0,"check"],".","Const",3324,1,0,"call"],0,["This",3324,14,0],["Ident",3324,19,0,"key"]],["Return",43,7,0,"Binary",43,7,0,["Call",3325,1,0,["Binary",3325,1,0,["Binary",3325,1,0,["This",3325,1,0],".","Const",3325,8,0,"_keys"],".","Const",3325,14,0,"indexOf"],0,["Ident",3325,23,0,"key"]],"!==","Const",3325,30,0,-1]]],["IfStatement",3327,17,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3327,33,0,["Ident",3327,33,0,"Object"],".","Const",3327,41,0,"defineProperty"],"===","Const",137,25,0,"function"],["Binary",3327,1,0,["Ident",3327,6,0,"defProp"],"=","Binary",3327,61,0,["Ident",3327,61,0,"Object"],".","Const",3327,69,0,"defineProperty"],"Binary",3327,1,0,["Ident",3327,6,0,"defProp"],"=","Func",3327,91,0,0,[["Ident",3327,92,0,"o"],["Ident",3327,94,0,"k"],["Ident",3327,97,0,"d"]],[],[],"Binary",3327,104,0,["Binary",3327,104,0,["Ident",3327,104,0,"o"],".","Ident",3327,107,0,"k"],"=","Binary",3327,112,0,["Ident",3327,112,0,"d"],".","Const",3327,115,0,"value"],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3280,80,0,"_WeakMap_prototype"],".","Const",3328,6,0,"set"],"=","Func",3328,10,0,0,[["Ident",3328,11,0,"key"],["Ident",3328,15,0,"value"]],["index","keys"],[],"BlockStatement",3329,1,0,0,["IfStatement",3329,1,0,0,["Binary",43,7,0,["Call",3329,7,0,["Ident",3329,7,0,"Object"],0,["Ident",3329,15,0,"key"]],"!==","Ident",3329,22,0,"key"],["Throw",3330,1,0,"Call",3330,12,0,["Ident",3330,12,0,"TypeError"],0,["Const",3330,23,0,"Invalid value used as weak map key"]]],["IfStatement",3332,1,0,0,["Call",3332,7,0,["Ident",3332,7,0,"isExtensible"],0,["Ident",3332,22,0,"key"]],["Call",3333,1,0,["Ident",3333,1,0,"defProp"],0,["Ident",3333,16,0,"key"],["Binary",3333,20,0,["This",3333,20,0],".","Const",3333,22,0,"_uid"],["Obj",3333,27,0,3334,10,null,"configurable",["Const",3334,9,0,!0],3335,10,null,"writable",["Const",3335,9,0,!0],3336,10,null,"enumerable",["Const",3336,9,0,!1],3337,9,null,"value",["Ident",3337,9,0,"value"]]],"BlockStatement",3340,1,0,0,["Call",3340,1,0,["Binary",3340,1,0,["Ident",3340,1,0,"check"],".","Const",3340,1,0,"call"],0,["This",3340,14,0],["Ident",3340,19,0,"key"]],["Binary",3341,1,0,["Ident",3341,10,0,"keys"],"=","Binary",3341,17,0,["This",3341,17,0],".","Const",3341,19,0,"_keys"],["Binary",3342,1,0,["Ident",3342,18,0,"index"],"=","Call",3342,26,0,["Binary",3342,26,0,["Ident",3342,26,0,"keys"],".","Const",3342,32,0,"indexOf"],0,["Ident",3342,41,0,"key"]],["IfStatement",3343,1,0,0,["Binary",3343,9,0,["Ident",3343,9,0,"index"],"===","Const",3343,18,0,-1],["BlockStatement",3344,1,0,0,["Binary",3344,1,0,["Ident",3344,1,0,"index"],"=","Binary",3344,17,0,["Ident",3344,17,0,"keys"],".","Const",3344,23,0,"length"],["Binary",3345,1,0,["Binary",3345,1,0,["Ident",3345,1,0,"keys"],".","Ident",3345,14,0,"index"],"=","Ident",3345,23,0,"key"]]],["Binary",3346,1,0,["Binary",3346,1,0,["Binary",3346,1,0,["This",3346,1,0],".","Const",3346,8,0,"_values"],".","Ident",3346,16,0,"index"],"=","Ident",3346,25,0,"value"]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3280,80,0,"_WeakMap_prototype"],".","Const",3348,6,0,"delete"],"=","Func",3348,13,0,0,[["Ident",3348,14,0,"key"]],["index","keys"],[],"BlockStatement",3349,1,0,0,["IfStatement",3349,1,0,0,["Binary",43,7,0,["Call",3349,7,0,["Ident",3349,7,0,"Object"],0,["Ident",3349,15,0,"key"]],"!==","Ident",3349,22,0,"key"],["Throw",3350,1,0,"Call",3350,12,0,["Ident",3350,12,0,"TypeError"],0,["Const",3350,23,0,"Invalid value used as weak map key"]]],["IfStatement",3352,1,0,0,["Call",3352,7,0,["Ident",3352,7,0,"isExtensible"],0,["Ident",3352,22,0,"key"]],["Unary",3353,1,0,"delete","Binary",3353,13,0,["Ident",3353,13,0,"key"],".","Binary",3353,18,0,["This",3353,18,0],".","Const",3353,19,0,"_uid"],"BlockStatement",3355,1,0,0,["Call",3355,1,0,["Binary",3355,1,0,["Ident",3355,1,0,"check"],".","Const",3355,1,0,"call"],0,["This",3355,14,0],["Ident",3355,19,0,"key"]],["Binary",3356,1,0,["Ident",3356,10,0,"keys"],"=","Binary",3356,17,0,["This",3356,17,0],".","Const",3356,19,0,"_keys"],["Binary",3357,1,0,["Ident",3357,18,0,"index"],"=","Call",3357,26,0,["Binary",3357,26,0,["Ident",3357,26,0,"keys"],".","Const",3357,32,0,"indexOf"],0,["Ident",3357,41,0,"key"]],["IfStatement",3358,1,0,0,["Binary",43,7,0,["Ident",3358,9,0,"index"],"!==","Const",3358,18,0,-1],["BlockStatement",3359,1,0,0,["Call",3359,1,0,["Binary",3359,1,0,["Ident",3359,1,0,"keys"],".","Const",3359,14,0,"splice"],0,["Ident",3359,21,0,"index"],["Const",3359,28,0,1]],["Call",3360,1,0,["Binary",3360,1,0,["Binary",3360,1,0,["This",3360,1,0],".","Const",3360,10,0,"_values"],".","Const",3360,18,0,"splice"],0,["Ident",3360,25,0,"index"],["Const",3360,32,0,1]]]]]],["Return",2988,1,0,"Ident",3280,86,0,"WeakMap"]],0],type:"any",dependencies:["__create","__owns","__strnum","GLOBAL","WeakMap"]},__indexOfIdentical:{helper:["Func",3362,39,0,0,[["Ident",3362,40,0,"array"],["Ident",3362,46,0,"item"]],["_arr","check","i","inf"],[],"BlockStatement",3363,1,0,0,["IfStatement",3363,1,0,0,["Binary",3363,5,0,["Unary",3363,5,0,"typeof","Ident",3363,12,0,"item"],"===","Const",3363,22,0,"number"],["IfStatement",3364,1,0,0,["Binary",43,7,0,["Ident",3364,7,0,"item"],"!==","Ident",3364,7,0,"item"],["BlockStatement",3365,1,0,0,["For",1497,1,0,0,["BlockExpression",0,0,0,["Binary",3365,1,0,["Ident",3365,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Ident",3365,22,0,"array"]],["Binary",1376,26,0,["Ident",3365,17,0,"i"],"=","Binary",1376,49,0,["Ident",3365,1,0,"_arr"],".","Const",1376,56,0,"length"]],["Unary",1377,16,0,"--post","Ident",3365,17,0,"i"],0,"BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3365,10,0,"check"],"=","Binary",1340,75,0,["Ident",3365,1,0,"_arr"],".","Ident",3365,17,0,"i"],["IfStatement",3366,1,0,0,["Binary",43,7,0,["Ident",3366,11,0,"check"],"!==","Ident",3366,11,0,"check"],["Return",3367,1,0,"Ident",3367,17,0,"i"]]],["Return",3368,1,0,"Const",3368,13,0,-1]],"IfStatement",3364,1,0,0,["Binary",3369,12,0,["Ident",3369,12,0,"item"],"===","Const",3369,21,0,0],["BlockStatement",3370,1,0,0,["Binary",3370,1,0,["Ident",3370,10,0,"inf"],"=","Binary",3370,16,0,["Const",3370,17,0,1],"/","Ident",3370,21,0,"item"],["For",1497,1,0,0,["BlockExpression",0,0,0,["Binary",3371,1,0,["Ident",3371,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Ident",3371,22,0,"array"]],["Binary",1376,26,0,["Ident",3371,17,0,"i"],"=","Binary",1376,49,0,["Ident",3371,1,0,"_arr"],".","Const",1376,56,0,"length"]],["Unary",1377,16,0,"--post","Ident",3371,17,0,"i"],0,"BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3371,10,0,"check"],"=","Binary",1340,75,0,["Ident",3371,1,0,"_arr"],".","Ident",3371,17,0,"i"],["IfStatement",3372,1,0,0,["Binary",3372,11,0,["Binary",3372,11,0,["Ident",3372,11,0,"check"],"===","Const",3372,21,0,0],"&&","Binary",3372,26,0,["Binary",3372,26,0,["Const",3372,27,0,1],"/","Ident",3372,31,0,"check"],"===","Ident",3372,40,0,"inf"],["Return",3373,1,0,"Ident",3373,17,0,"i"]]],["Return",3374,1,0,"Const",3374,13,0,-1]]]],["Return",3375,1,0,"Call",3375,1,0,["Binary",3375,1,0,["Ident",3375,1,0,"array"],".","Const",3375,9,0,"indexOf"],0,["Ident",3375,18,0,"item"]]],type:"function",dependencies:["__indexOfIdentical","__toArray"]},Map:{helper:["IfExpression",3377,20,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3377,36,0,["Ident",3377,36,0,"GLOBAL"],".","Const",3377,44,0,"Map"],"===","Const",137,25,0,"function"],["Binary",3377,52,0,["Ident",3377,52,0,"GLOBAL"],".","Const",3377,60,0,"Map"],"Binary",3024,10,0,["Ident",3377,74,0,"Map"],"=","Call",2986,1,0,["Func",2986,1,0,0,[],["_Map_prototype"],[],"BlockStatement",2986,1,0,0,["Func",2910,29,0,["Ident",3377,74,0,"Map"],[["Ident",3378,19,0,"iterable"]],["_item","_iter","_this","x"],[],"BlockStatement",3379,1,0,0,["Binary",3379,1,0,["Ident",3379,1,0,"_this"],"=","IfExpression",2909,18,0,["Binary",2909,21,0,["Eval",2909,21,0,["Const",2909,27,0,"this"]],"instanceof","Ident",3377,74,0,"Map"],["Eval",2909,56,0,["Const",2909,62,0,"this"]],"Call",2909,74,0,["Ident",2909,74,0,"__create"],0,["Ident",3377,68,0,"_Map_prototype"]],["Binary",3379,1,0,["Binary",3379,1,0,["Ident",3379,1,0,"_this"],".","Const",3379,6,0,"_keys"],"=","Arr",3379,14,0],["Binary",3380,1,0,["Binary",3380,1,0,["Ident",3380,1,0,"_this"],".","Const",3380,6,0,"_values"],"=","Arr",3380,16,0],["IfStatement",3381,1,0,0,["Binary",49,7,0,["Ident",3381,7,0,"iterable"],"!=","Const",0,0,0,null],["TryFinally",2208,8,0,0,["For",2204,1,0,0,["Binary",3382,1,0,["Ident",3382,1,0,"_iter"],"=","Call",2131,30,0,["Ident",2131,30,0,"__iter"],0,["Ident",3382,17,0,"iterable"]],["Const",0,0,0,!0],0,"BlockStatement",2171,1,0,0,["Binary",2141,1,0,["Ident",3382,1,0,"_item"],"=","Call",2141,18,0,["Binary",2141,18,0,["Ident",3382,1,0,"_iter"],".","Const",2141,29,0,"next"],0],["IfStatement",2142,1,0,0,["Binary",2142,9,0,["Ident",3382,1,0,"_item"],".","Const",2142,16,0,"done"],["Break",2143,1,0]],["Binary",2144,1,0,["Ident",3382,10,0,"x"],"=","Binary",2144,19,0,["Ident",3382,1,0,"_item"],".","Const",2144,26,0,"value"],["Call",3383,1,0,["Binary",3383,1,0,["Ident",3383,1,0,"_this"],".","Const",3383,10,0,"set"],0,["Binary",3383,14,0,["Ident",3383,14,0,"x"],".","Const",3383,16,0,0],["Binary",3383,19,0,["Ident",3383,19,0,"x"],".","Const",3383,22,0,1]]],"TryCatch",2211,1,0,0,["Call",2212,1,0,["Binary",2212,1,0,["Ident",3382,1,0,"_iter"],".","Const",2212,19,0,"close"],0],["Ident",3382,1,0,"_e"],"Const",0,0,0]],["Return",3379,1,0,"Ident",3379,1,0,"_this"]],["Binary",2840,20,0,["Ident",3377,68,0,"_Map_prototype"],"=","Binary",2840,37,0,["Ident",3377,74,0,"Map"],".","Const",2840,44,0,"prototype"],["Binary",2852,21,0,["Binary",2852,21,0,["Ident",3377,74,0,"Map"],".","Const",2852,28,0,"displayName"],"=","Const",3377,68,0,"Map"],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3385,6,0,"get"],"=","Func",3385,10,0,0,[["Ident",3385,11,0,"key"]],["index"],[],"BlockStatement",3386,1,0,0,["Binary",3386,1,0,["Ident",3386,8,0,"index"],"=","Call",3386,16,0,["Ident",3386,16,0,"__indexOfIdentical"],0,["Binary",3386,38,0,["This",3386,38,0],".","Const",3386,39,0,"_keys"],["Ident",3386,45,0,"key"]],["IfStatement",3387,1,0,0,["Binary",3387,7,0,["Ident",3387,7,0,"index"],"===","Const",3387,16,0,-1],["Return",3388,1,0,"Const",3388,1,0],"Return",3390,1,0,"Binary",3390,1,0,["Binary",3390,1,0,["This",3390,1,0],".","Const",3390,8,0,"_values"],".","Ident",3390,16,0,"index"]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3392,6,0,"has"],"=","Func",3392,10,0,0,[["Ident",3392,11,0,"key"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",3393,1,0,["Ident",3393,1,0,"__indexOfIdentical"],0,["Binary",3393,26,0,["This",3393,26,0],".","Const",3393,27,0,"_keys"],["Ident",3393,33,0,"key"]],"!==","Const",3393,41,0,-1],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3395,6,0,"set"],"=","Func",3395,10,0,0,[["Ident",3395,11,0,"key"],["Ident",3395,15,0,"value"]],["index","keys"],[],"BlockExpression",3396,1,0,["Binary",3396,1,0,["Ident",3396,8,0,"keys"],"=","Binary",3396,15,0,["This",3396,15,0],".","Const",3396,17,0,"_keys"],["Binary",3397,1,0,["Ident",3397,16,0,"index"],"=","Call",3397,24,0,["Ident",3397,24,0,"__indexOfIdentical"],0,["Ident",3397,46,0,"keys"],["Ident",3397,51,0,"key"]],["IfExpression",3398,1,0,["Binary",3398,7,0,["Ident",3398,7,0,"index"],"===","Const",3398,16,0,-1],["BlockExpression",3399,1,0,["Binary",3399,1,0,["Ident",3399,1,0,"index"],"=","Binary",3399,15,0,["Ident",3399,15,0,"keys"],".","Const",3399,21,0,"length"],["Binary",3400,1,0,["Binary",3400,1,0,["Ident",3400,1,0,"keys"],".","Ident",3400,12,0,"index"],"=","Ident",3400,21,0,"key"]]],["Binary",3401,1,0,["Binary",3401,1,0,["Binary",3401,1,0,["This",3401,1,0],".","Const",3401,6,0,"_values"],".","Ident",3401,14,0,"index"],"=","Ident",3401,23,0,"value"]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3403,6,0,"delete"],"=","Func",3403,13,0,0,[["Ident",3403,14,0,"key"]],["index","keys"],[],"BlockStatement",3404,1,0,0,["Binary",3404,1,0,["Ident",3404,8,0,"keys"],"=","Binary",3404,15,0,["This",3404,15,0],".","Const",3404,17,0,"_keys"],["Binary",3405,1,0,["Ident",3405,8,0,"index"],"=","Call",3405,16,0,["Ident",3405,16,0,"__indexOfIdentical"],0,["Ident",3405,38,0,"keys"],["Ident",3405,43,0,"key"]],["IfStatement",3406,1,0,0,["Binary",3406,7,0,["Ident",3406,7,0,"index"],"===","Const",3406,16,0,-1],["Return",3407,1,0,"Const",3407,1,0,!1],"BlockStatement",3409,1,0,0,["Call",3409,1,0,["Binary",3409,1,0,["Ident",3409,1,0,"keys"],".","Const",3409,12,0,"splice"],0,["Ident",3409,19,0,"index"],["Const",3409,26,0,1]],["Return",3410,1,0,"Call",3410,1,0,["Binary",3410,1,0,["Binary",3410,1,0,["This",3410,1,0],".","Const",3410,8,0,"_values"],".","Const",3410,16,0,"splice"],0,["Ident",3410,23,0,"index"],["Const",3410,30,0,1]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3412,6,0,"keys"],"=","Func",3412,11,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","key"],[],"BlockStatement",3413,1,0,0,["Binary",3413,1,0,["Ident",3413,1,0,"_this"],"=","This",3413,1,0],["Binary",3412,11,0,["Ident",3412,11,0,"_state"],"=","Const",3412,11,0,0],["Func",3412,11,0,["Ident",3412,11,0,"_close"],[],[],[],"Binary",3412,11,0,["Ident",3412,11,0,"_state"],"=","Const",3412,11,0,3],["Func",3412,11,0,["Ident",3412,11,0,"_step"],[["Ident",3412,11,0,"_received"]],[],[],"For",3412,11,0,0,0,["Const",3412,11,0,!0],0,"Switch",3412,11,0,0,["Ident",3412,11,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",3413,1,0,["Ident",3413,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Binary",3413,15,0,["Ident",3413,15,0,"_this"],".","Const",3413,17,0,"_keys"]],["Binary",1376,26,0,["Ident",3413,1,0,"_i"],"=","Binary",1376,49,0,["Ident",3413,1,0,"_arr"],".","Const",1376,56,0,"length"],["Unary",1497,1,0,"++","Ident",3412,11,0,"_state"]],1377,16,null,["Const",1377,16,0,1],["BlockStatement",1377,16,0,0,["Binary",1377,16,0,["Ident",3412,11,0,"_state"],"=","IfExpression",1377,16,0,["Unary",1377,16,0,"--post","Ident",3413,1,0,"_i"],["Const",1377,16,0,2],"Const",1377,16,0,3],["Break",1377,16,0]],1459,1,null,["Const",1459,1,0,2],["BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3413,8,0,"key"],"=","Binary",1340,75,0,["Ident",3413,1,0,"_arr"],".","Ident",3413,1,0,"_i"],["Binary",3414,1,0,["Ident",3412,11,0,"_state"],"=","Const",3414,1,0,1],["Return",3414,1,0,"Obj",3414,1,0,3414,1,null,"done",["Const",3414,1,0,!1],3414,1,null,"value",["Ident",3414,12,0,"key"]]],3412,11,null,["Const",3412,11,0,3],["Return",3412,11,0,"Obj",3412,11,0,3412,11,null,"done",["Const",3412,11,0,!0],3412,11,null,"value",["Const",3412,11,0]],["Throw",3412,11,0,"Call",3412,11,0,["Ident",3412,11,0,"Error"],0,["Binary",3412,11,0,["Const",3412,11,0,"Unknown state: "],"+","Ident",3412,11,0,"_state"]]],["Func",3412,11,0,["Ident",3412,11,0,"_throw"],[["Ident",3412,11,0,"_e"]],[],[],"BlockStatement",3412,11,0,0,["Call",3412,11,0,["Ident",3412,11,0,"_close"],0],["Throw",3412,11,0,"Ident",3412,11,0,"_e"]],["Func",3412,11,0,["Ident",3412,11,0,"_send"],[["Ident",3412,11,0,"_received"]],[],[],"TryCatch",3412,11,0,0,["Return",3412,11,0,"Call",3412,11,0,["Ident",3412,11,0,"_step"],0,["Ident",3412,11,0,"_received"]],["Ident",3412,11,0,"_e"],"Call",3412,11,0,["Ident",3412,11,0,"_throw"],0,["Ident",3412,11,0,"_e"]],["Return",3412,11,0,"Obj",3412,11,0,3412,11,null,"close",["Ident",3412,11,0,"_close"],3412,11,null,"iterator",["Func",3412,11,0,0,[],[],[],"Return",3412,11,0,"This",3412,11,0],3412,11,null,"next",["Func",3412,11,0,0,[],[],[],"Return",3412,11,0,"Call",3412,11,0,["Ident",3412,11,0,"_send"],0,["Const",3412,11,0]],3412,11,null,"send",["Ident",3412,11,0,"_send"],3412,11,null,"throw",["Func",3412,11,0,0,[["Ident",3412,11,0,"_e"]],[],[],"BlockStatement",3412,11,0,0,["Call",3412,11,0,["Ident",3412,11,0,"_throw"],0,["Ident",3412,11,0,"_e"]],["Return",3412,11,0,"Call",3412,11,0,["Ident",3412,11,0,"_send"],0,["Const",3412,11,0]]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3416,6,0,"values"],"=","Func",3416,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","value"],[],"BlockStatement",3417,1,0,0,["Binary",3417,1,0,["Ident",3417,1,0,"_this"],"=","This",3417,1,0],["Binary",3416,13,0,["Ident",3416,13,0,"_state"],"=","Const",3416,13,0,0],["Func",3416,13,0,["Ident",3416,13,0,"_close"],[],[],[],"Binary",3416,13,0,["Ident",3416,13,0,"_state"],"=","Const",3416,13,0,3],["Func",3416,13,0,["Ident",3416,13,0,"_step"],[["Ident",3416,13,0,"_received"]],[],[],"For",3416,13,0,0,0,["Const",3416,13,0,!0],0,"Switch",3416,13,0,0,["Ident",3416,13,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",3417,1,0,["Ident",3417,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Binary",3417,17,0,["Ident",3417,17,0,"_this"],".","Const",3417,19,0,"_values"]],["Binary",1376,26,0,["Ident",3417,1,0,"_i"],"=","Binary",1376,49,0,["Ident",3417,1,0,"_arr"],".","Const",1376,56,0,"length"],["Unary",1497,1,0,"++","Ident",3416,13,0,"_state"]],1377,16,null,["Const",1377,16,0,1],["BlockStatement",1377,16,0,0,["Binary",1377,16,0,["Ident",3416,13,0,"_state"],"=","IfExpression",1377,16,0,["Unary",1377,16,0,"--post","Ident",3417,1,0,"_i"],["Const",1377,16,0,2],"Const",1377,16,0,3],["Break",1377,16,0]],1459,1,null,["Const",1459,1,0,2],["BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3417,8,0,"value"],"=","Binary",1340,75,0,["Ident",3417,1,0,"_arr"],".","Ident",3417,1,0,"_i"],["Binary",3418,1,0,["Ident",3416,13,0,"_state"],"=","Const",3418,1,0,1],["Return",3418,1,0,"Obj",3418,1,0,3418,1,null,"done",["Const",3418,1,0,!1],3418,1,null,"value",["Ident",3418,12,0,"value"]]],3416,13,null,["Const",3416,13,0,3],["Return",3416,13,0,"Obj",3416,13,0,3416,13,null,"done",["Const",3416,13,0,!0],3416,13,null,"value",["Const",3416,13,0]],["Throw",3416,13,0,"Call",3416,13,0,["Ident",3416,13,0,"Error"],0,["Binary",3416,13,0,["Const",3416,13,0,"Unknown state: "],"+","Ident",3416,13,0,"_state"]]],["Func",3416,13,0,["Ident",3416,13,0,"_throw"],[["Ident",3416,13,0,"_e"]],[],[],"BlockStatement",3416,13,0,0,["Call",3416,13,0,["Ident",3416,13,0,"_close"],0],["Throw",3416,13,0,"Ident",3416,13,0,"_e"]],["Func",3416,13,0,["Ident",3416,13,0,"_send"],[["Ident",3416,13,0,"_received"]],[],[],"TryCatch",3416,13,0,0,["Return",3416,13,0,"Call",3416,13,0,["Ident",3416,13,0,"_step"],0,["Ident",3416,13,0,"_received"]],["Ident",3416,13,0,"_e"],"Call",3416,13,0,["Ident",3416,13,0,"_throw"],0,["Ident",3416,13,0,"_e"]],["Return",3416,13,0,"Obj",3416,13,0,3416,13,null,"close",["Ident",3416,13,0,"_close"],3416,13,null,"iterator",["Func",3416,13,0,0,[],[],[],"Return",3416,13,0,"This",3416,13,0],3416,13,null,"next",["Func",3416,13,0,0,[],[],[],"Return",3416,13,0,"Call",3416,13,0,["Ident",3416,13,0,"_send"],0,["Const",3416,13,0]],3416,13,null,"send",["Ident",3416,13,0,"_send"],3416,13,null,"throw",["Func",3416,13,0,0,[["Ident",3416,13,0,"_e"]],[],[],"BlockStatement",3416,13,0,0,["Call",3416,13,0,["Ident",3416,13,0,"_throw"],0,["Ident",3416,13,0,"_e"]],["Return",3416,13,0,"Call",3416,13,0,["Ident",3416,13,0,"_send"],0,["Const",3416,13,0]]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3420,6,0,"items"],"=","Func",3420,12,0,0,[],["_arr","_e","_send","_state","_step","_this","_throw","i","key","values"],[],"BlockStatement",3421,1,0,0,["Binary",3421,1,0,["Ident",3421,1,0,"_this"],"=","This",3421,1,0],["Binary",3420,12,0,["Ident",3420,12,0,"_state"],"=","Const",3420,12,0,0],["Func",3420,12,0,["Ident",3420,12,0,"_close"],[],[],[],"Binary",3420,12,0,["Ident",3420,12,0,"_state"],"=","Const",3420,12,0,3],["Func",3420,12,0,["Ident",3420,12,0,"_step"],[["Ident",3420,12,0,"_received"]],[],[],"For",3420,12,0,0,0,["Const",3420,12,0,!0],0,"Switch",3420,12,0,0,["Ident",3420,12,0,"_state"],3421,1,null,["Const",3421,1,0,0],["BlockStatement",3421,1,0,0,["Binary",3421,1,0,["Ident",3421,8,0,"values"],"=","Binary",3421,17,0,["Ident",3421,17,0,"_this"],".","Const",3421,19,0,"_values"],["Binary",3422,1,0,["Ident",3422,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Binary",3422,18,0,["Ident",3422,18,0,"_this"],".","Const",3422,20,0,"_keys"]],["Binary",1376,26,0,["Ident",3422,13,0,"i"],"=","Binary",1376,49,0,["Ident",3422,1,0,"_arr"],".","Const",1376,56,0,"length"],["Unary",1497,1,0,"++","Ident",3420,12,0,"_state"]],1377,16,null,["Const",1377,16,0,1],["BlockStatement",1377,16,0,0,["Binary",1377,16,0,["Ident",3420,12,0,"_state"],"=","IfExpression",1377,16,0,["Unary",1377,16,0,"--post","Ident",3422,13,0,"i"],["Const",1377,16,0,2],"Const",1377,16,0,3],["Break",1377,16,0]],1459,1,null,["Const",1459,1,0,2],["BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3422,8,0,"key"],"=","Binary",1340,75,0,["Ident",3422,1,0,"_arr"],".","Ident",3422,13,0,"i"],["Binary",3423,1,0,["Ident",3420,12,0,"_state"],"=","Const",3423,1,0,1],["Return",3423,1,0,"Obj",3423,1,0,3423,1,null,"done",["Const",3423,1,0,!1],3423,1,null,"value",["Arr",3423,12,0,["Ident",3423,14,0,"key"],["Binary",3423,18,0,["Ident",3423,18,0,"values"],".","Ident",3423,26,0,"i"]]]],3420,12,null,["Const",3420,12,0,3],["Return",3420,12,0,"Obj",3420,12,0,3420,12,null,"done",["Const",3420,12,0,!0],3420,12,null,"value",["Const",3420,12,0]],["Throw",3420,12,0,"Call",3420,12,0,["Ident",3420,12,0,"Error"],0,["Binary",3420,12,0,["Const",3420,12,0,"Unknown state: "],"+","Ident",3420,12,0,"_state"]]],["Func",3420,12,0,["Ident",3420,12,0,"_throw"],[["Ident",3420,12,0,"_e"]],[],[],"BlockStatement",3420,12,0,0,["Call",3420,12,0,["Ident",3420,12,0,"_close"],0],["Throw",3420,12,0,"Ident",3420,12,0,"_e"]],["Func",3420,12,0,["Ident",3420,12,0,"_send"],[["Ident",3420,12,0,"_received"]],[],[],"TryCatch",3420,12,0,0,["Return",3420,12,0,"Call",3420,12,0,["Ident",3420,12,0,"_step"],0,["Ident",3420,12,0,"_received"]],["Ident",3420,12,0,"_e"],"Call",3420,12,0,["Ident",3420,12,0,"_throw"],0,["Ident",3420,12,0,"_e"]],["Return",3420,12,0,"Obj",3420,12,0,3420,12,null,"close",["Ident",3420,12,0,"_close"],3420,12,null,"iterator",["Func",3420,12,0,0,[],[],[],"Return",3420,12,0,"This",3420,12,0],3420,12,null,"next",["Func",3420,12,0,0,[],[],[],"Return",3420,12,0,"Call",3420,12,0,["Ident",3420,12,0,"_send"],0,["Const",3420,12,0]],3420,12,null,"send",["Ident",3420,12,0,"_send"],3420,12,null,"throw",["Func",3420,12,0,0,[["Ident",3420,12,0,"_e"]],[],[],"BlockStatement",3420,12,0,0,["Call",3420,12,0,["Ident",3420,12,0,"_throw"],0,["Ident",3420,12,0,"_e"]],["Return",3420,12,0,"Call",3420,12,0,["Ident",3420,12,0,"_send"],0,["Const",3420,12,0]]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3377,68,0,"_Map_prototype"],".","Const",3424,6,0,"iterator"],"=","Binary",3424,17,0,["Binary",3424,17,0,["Ident",3424,17,0,"Map"],".","Const",3424,17,0,"prototype"],".","Const",3424,23,0,"items"],["Return",2988,1,0,"Ident",3377,74,0,"Map"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Map"]},Set:{helper:["IfExpression",3426,20,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3426,36,0,["Ident",3426,36,0,"GLOBAL"],".","Const",3426,44,0,"Set"],"===","Const",137,25,0,"function"],["Binary",3426,52,0,["Ident",3426,52,0,"GLOBAL"],".","Const",3426,60,0,"Set"],"Binary",3024,10,0,["Ident",3426,74,0,"Set"],"=","Call",2986,1,0,["Func",2986,1,0,0,[],["_Set_prototype"],[],"BlockStatement",2986,1,0,0,["Func",2910,29,0,["Ident",3426,74,0,"Set"],[["Ident",3427,19,0,"iterable"]],["_item","_iter","_this","item"],[],"BlockStatement",3428,1,0,0,["Binary",3428,1,0,["Ident",3428,1,0,"_this"],"=","IfExpression",2909,18,0,["Binary",2909,21,0,["Eval",2909,21,0,["Const",2909,27,0,"this"]],"instanceof","Ident",3426,74,0,"Set"],["Eval",2909,56,0,["Const",2909,62,0,"this"]],"Call",2909,74,0,["Ident",2909,74,0,"__create"],0,["Ident",3426,68,0,"_Set_prototype"]],["Binary",3428,1,0,["Binary",3428,1,0,["Ident",3428,1,0,"_this"],".","Const",3428,6,0,"_items"],"=","Arr",3428,15,0],["IfStatement",3429,1,0,0,["Binary",49,7,0,["Ident",3429,7,0,"iterable"],"!=","Const",0,0,0,null],["TryFinally",2208,8,0,0,["For",2204,1,0,0,["Binary",3430,1,0,["Ident",3430,1,0,"_iter"],"=","Call",2131,30,0,["Ident",2131,30,0,"__iter"],0,["Ident",3430,20,0,"iterable"]],["Const",0,0,0,!0],0,"BlockStatement",2171,1,0,0,["Binary",2141,1,0,["Ident",3430,1,0,"_item"],"=","Call",2141,18,0,["Binary",2141,18,0,["Ident",3430,1,0,"_iter"],".","Const",2141,29,0,"next"],0],["IfStatement",2142,1,0,0,["Binary",2142,9,0,["Ident",3430,1,0,"_item"],".","Const",2142,16,0,"done"],["Break",2143,1,0]],["Binary",2144,1,0,["Ident",3430,10,0,"item"],"=","Binary",2144,19,0,["Ident",3430,1,0,"_item"],".","Const",2144,26,0,"value"],["Call",3431,1,0,["Binary",3431,1,0,["Ident",3431,1,0,"_this"],".","Const",3431,10,0,"add"],0,["Ident",3431,14,0,"item"]]],"TryCatch",2211,1,0,0,["Call",2212,1,0,["Binary",2212,1,0,["Ident",3430,1,0,"_iter"],".","Const",2212,19,0,"close"],0],["Ident",3430,1,0,"_e"],"Const",0,0,0]],["Return",3428,1,0,"Ident",3428,1,0,"_this"]],["Binary",2840,20,0,["Ident",3426,68,0,"_Set_prototype"],"=","Binary",2840,37,0,["Ident",3426,74,0,"Set"],".","Const",2840,44,0,"prototype"],["Binary",2852,21,0,["Binary",2852,21,0,["Ident",3426,74,0,"Set"],".","Const",2852,28,0,"displayName"],"=","Const",3426,68,0,"Set"],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3426,68,0,"_Set_prototype"],".","Const",3433,6,0,"has"],"=","Func",3433,10,0,0,[["Ident",3433,11,0,"item"]],[],[],"Return",43,7,0,"Binary",43,7,0,["Call",3434,1,0,["Ident",3434,1,0,"__indexOfIdentical"],0,["Binary",3434,26,0,["This",3434,26,0],".","Const",3434,27,0,"_items"],["Ident",3434,34,0,"item"]],"!==","Const",3434,43,0,-1],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3426,68,0,"_Set_prototype"],".","Const",3435,6,0,"add"],"=","Func",3435,10,0,0,[["Ident",3435,11,0,"item"]],["items"],[],"BlockExpression",3436,1,0,["Binary",3436,1,0,["Ident",3436,8,0,"items"],"=","Binary",3436,16,0,["This",3436,16,0],".","Const",3436,18,0,"_items"],["IfExpression",3437,1,0,["Binary",3437,7,0,["Call",3437,7,0,["Ident",3437,7,0,"__indexOfIdentical"],0,["Ident",3437,29,0,"items"],["Ident",3437,35,0,"item"]],"===","Const",3437,44,0,-1],["Call",3438,1,0,["Binary",3438,1,0,["Ident",3438,1,0,"items"],".","Const",3438,13,0,"push"],0,["Ident",3438,18,0,"item"]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3426,68,0,"_Set_prototype"],".","Const",3439,6,0,"delete"],"=","Func",3439,13,0,0,[["Ident",3439,14,0,"item"]],["index","items"],[],"BlockExpression",3440,1,0,["Binary",3440,1,0,["Ident",3440,8,0,"items"],"=","Binary",3440,16,0,["This",3440,16,0],".","Const",3440,18,0,"_items"],["Binary",3441,1,0,["Ident",3441,8,0,"index"],"=","Call",3441,16,0,["Ident",3441,16,0,"__indexOfIdentical"],0,["Ident",3441,38,0,"items"],["Ident",3441,44,0,"item"]],["IfExpression",3442,1,0,["Binary",43,7,0,["Ident",3442,7,0,"index"],"!==","Const",3442,16,0,-1],["BlockExpression",3443,1,0,["Call",3443,1,0,["Binary",3443,1,0,["Ident",3443,1,0,"items"],".","Const",3443,13,0,"splice"],0,["Ident",3443,20,0,"index"],["Const",3443,27,0,1]],["Const",3444,1,0,!0]],"Const",3446,1,0,!1]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3426,68,0,"_Set_prototype"],".","Const",3447,6,0,"values"],"=","Func",3447,13,0,0,[],["_arr","_e","_i","_send","_state","_step","_this","_throw","item"],[],"BlockStatement",3448,1,0,0,["Binary",3448,1,0,["Ident",3448,1,0,"_this"],"=","This",3448,1,0],["Binary",3447,13,0,["Ident",3447,13,0,"_state"],"=","Const",3447,13,0,0],["Func",3447,13,0,["Ident",3447,13,0,"_close"],[],[],[],"Binary",3447,13,0,["Ident",3447,13,0,"_state"],"=","Const",3447,13,0,3],["Func",3447,13,0,["Ident",3447,13,0,"_step"],[["Ident",3447,13,0,"_received"]],[],[],"For",3447,13,0,0,0,["Const",3447,13,0,!0],0,"Switch",3447,13,0,0,["Ident",3447,13,0,"_state"],0,0,null,["Const",0,0,0,0],["BlockStatement",0,0,0,0,["Binary",3448,1,0,["Ident",3448,1,0,"_arr"],"=","Call",1337,22,0,["Ident",1337,22,0,"__toArray"],0,["Binary",3448,16,0,["Ident",3448,16,0,"_this"],".","Const",3448,18,0,"_items"]],["Binary",1376,26,0,["Ident",3448,1,0,"_i"],"=","Binary",1376,49,0,["Ident",3448,1,0,"_arr"],".","Const",1376,56,0,"length"],["Unary",1497,1,0,"++","Ident",3447,13,0,"_state"]],1377,16,null,["Const",1377,16,0,1],["BlockStatement",1377,16,0,0,["Binary",1377,16,0,["Ident",3447,13,0,"_state"],"=","IfExpression",1377,16,0,["Unary",1377,16,0,"--post","Ident",3448,1,0,"_i"],["Const",1377,16,0,2],"Const",1377,16,0,3],["Break",1377,16,0]],1459,1,null,["Const",1459,1,0,2],["BlockStatement",1459,1,0,0,["Binary",1459,1,0,["Ident",3448,8,0,"item"],"=","Binary",1340,75,0,["Ident",3448,1,0,"_arr"],".","Ident",3448,1,0,"_i"],["Binary",3449,1,0,["Ident",3447,13,0,"_state"],"=","Const",3449,1,0,1],["Return",3449,1,0,"Obj",3449,1,0,3449,1,null,"done",["Const",3449,1,0,!1],3449,1,null,"value",["Ident",3449,12,0,"item"]]],3447,13,null,["Const",3447,13,0,3],["Return",3447,13,0,"Obj",3447,13,0,3447,13,null,"done",["Const",3447,13,0,!0],3447,13,null,"value",["Const",3447,13,0]],["Throw",3447,13,0,"Call",3447,13,0,["Ident",3447,13,0,"Error"],0,["Binary",3447,13,0,["Const",3447,13,0,"Unknown state: "],"+","Ident",3447,13,0,"_state"]]],["Func",3447,13,0,["Ident",3447,13,0,"_throw"],[["Ident",3447,13,0,"_e"]],[],[],"BlockStatement",3447,13,0,0,["Call",3447,13,0,["Ident",3447,13,0,"_close"],0],["Throw",3447,13,0,"Ident",3447,13,0,"_e"]],["Func",3447,13,0,["Ident",3447,13,0,"_send"],[["Ident",3447,13,0,"_received"]],[],[],"TryCatch",3447,13,0,0,["Return",3447,13,0,"Call",3447,13,0,["Ident",3447,13,0,"_step"],0,["Ident",3447,13,0,"_received"]],["Ident",3447,13,0,"_e"],"Call",3447,13,0,["Ident",3447,13,0,"_throw"],0,["Ident",3447,13,0,"_e"]],["Return",3447,13,0,"Obj",3447,13,0,3447,13,null,"close",["Ident",3447,13,0,"_close"],3447,13,null,"iterator",["Func",3447,13,0,0,[],[],[],"Return",3447,13,0,"This",3447,13,0],3447,13,null,"next",["Func",3447,13,0,0,[],[],[],"Return",3447,13,0,"Call",3447,13,0,["Ident",3447,13,0,"_send"],0,["Const",3447,13,0]],3447,13,null,"send",["Ident",3447,13,0,"_send"],3447,13,null,"throw",["Func",3447,13,0,0,[["Ident",3447,13,0,"_e"]],[],[],"BlockStatement",3447,13,0,0,["Call",3447,13,0,["Ident",3447,13,0,"_throw"],0,["Ident",3447,13,0,"_e"]],["Return",3447,13,0,"Call",3447,13,0,["Ident",3447,13,0,"_send"],0,["Const",3447,13,0]]]]],["Binary",2975,25,0,["Binary",2975,25,0,["Ident",3426,68,0,"_Set_prototype"],".","Const",3450,6,0,"iterator"],"=","Binary",3450,17,0,["Binary",3450,17,0,["Ident",3450,17,0,"Set"],".","Const",3450,17,0,"prototype"],".","Const",3450,23,0,"values"],["Return",2988,1,0,"Ident",3426,74,0,"Set"]],0],type:"any",dependencies:["__create","__indexOfIdentical","__iter","__toArray","GLOBAL","Set"]},setImmediate:{helper:["IfExpression",3492,30,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3492,46,0,["Ident",3492,46,0,"GLOBAL"],".","Const",3492,54,0,"setImmediate"],"===","Const",137,25,0,"function"],["Binary",3493,1,0,["Ident",3493,1,0,"GLOBAL"],".","Const",3493,10,0,"setImmediate"],"IfExpression",3492,30,0,["Binary",3494,8,0,["Binary",3494,8,0,["Unary",117,9,0,"typeof","Ident",3494,21,0,"process"],"!==","Const",117,27,0,"undefined"],"&&","Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3494,46,0,["Ident",3494,46,0,"process"],".","Const",3494,55,0,"nextTick"],"===","Const",137,25,0,"function"],["Call",9,9,0,["Func",9,12,0,0,[],["nextTick"],[],"BlockStatement",3496,1,0,0,["Binary",3496,1,0,["Ident",3496,8,0,"nextTick"],"=","Binary",3496,20,0,["Ident",3496,20,0,"process"],".","Const",3496,29,0,"nextTick"],["Return",1897,1,0,"Func",1897,1,0,0,[["Ident",3497,7,0,"func"]],["args"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3497,7,0,"func"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected func to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3497,7,0,"func"]]]],["Binary",1876,1,0,["Ident",3497,22,0,"args"],"=","Call",1876,23,0,["Binary",1876,23,0,["Ident",1876,23,0,"__slice"],".","Const",1876,23,0,"call"],0,["Arguments",1876,33,0],["Const",0,0,0,1]],["IfStatement",3498,1,0,0,["Binary",3498,9,0,["Ident",3498,9,0,"args"],".","Const",3498,15,0,"length"],["Return",3499,1,0,"Call",3499,1,0,["Ident",3499,1,0,"nextTick"],0,["Func",3499,20,0,0,[],[],[],"Call",3499,23,0,["Binary",3499,23,0,["Ident",3499,23,0,"func"],".","Const",3499,23,0,"apply"],0,["Const",3499,23,0],["Call",3499,32,0,["Ident",3499,32,0,"__toArray"],0,["Ident",3499,32,0,"args"]]]],"Return",3501,1,0,"Call",3501,1,0,["Ident",3501,1,0,"nextTick"],0,["Ident",3501,19,0,"func"]]]],0],"Func",1897,1,0,0,[["Ident",3503,5,0,"func"]],["args"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3503,5,0,"func"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected func to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3503,5,0,"func"]]]],["Binary",1876,1,0,["Ident",3503,20,0,"args"],"=","Call",1876,23,0,["Binary",1876,23,0,["Ident",1876,23,0,"__slice"],".","Const",1876,23,0,"call"],0,["Arguments",1876,33,0],["Const",0,0,0,1]],["IfStatement",3504,1,0,0,["Binary",3504,7,0,["Ident",3504,7,0,"args"],".","Const",3504,13,0,"length"],["Return",3505,1,0,"Call",3505,1,0,["Ident",3505,1,0,"setTimeout"],0,["Func",3505,20,0,0,[],[],[],"Call",3505,23,0,["Binary",3505,23,0,["Ident",3505,23,0,"func"],".","Const",3505,23,0,"apply"],0,["Const",3505,23,0],["Call",3505,32,0,["Ident",3505,32,0,"__toArray"],0,["Ident",3505,32,0,"args"]]],["Const",3505,39,0,0]],"Return",3507,1,0,"Call",3507,1,0,["Ident",3507,1,0,"setTimeout"],0,["Ident",3507,19,0,"func"],["Const",3507,25,0,0]]],type:"any",dependencies:["__slice","__toArray","__typeof","GLOBAL","setImmediate"]},__defer:{helper:["Call",9,9,0,["Func",9,12,0,0,[],[],[],"BlockStatement",3510,1,0,0,["Func",3510,1,0,["Ident",3510,6,0,"__defer"],[],["deferred","isError","value"],[],"BlockStatement",3511,1,0,0,["Binary",3511,1,0,["Ident",3511,16,0,"isError"],"=","Const",3511,27,0,!1],["Binary",3512,1,0,["Ident",3512,16,0,"value"],"=","Const",3512,24,0,null],["Binary",3514,1,0,["Ident",3514,16,0,"deferred"],"=","Arr",3514,41,0],["Func",3515,1,0,["Ident",3515,8,0,"complete"],[["Ident",3515,18,0,"newIsError"],["Ident",3515,31,0,"newValue"]],["funcs"],[],"IfExpression",3516,1,0,["Ident",3516,9,0,"deferred"],["BlockExpression",3517,1,0,["Binary",3517,1,0,["Ident",3517,12,0,"funcs"],"=","Ident",3517,29,0,"deferred"],["Binary",3518,1,0,["Ident",3518,1,0,"deferred"],"=","Const",3518,20,0,null],["Binary",3519,1,0,["Ident",3519,1,0,"isError"],"=","Ident",3519,20,0,"newIsError"],["Binary",3520,1,0,["Ident",3520,1,0,"value"],"=","Ident",3520,17,0,"newValue"],["IfExpression",3521,1,0,["Binary",3521,11,0,["Ident",3521,11,0,"funcs"],".","Const",3521,18,0,"length"],["Call",3522,1,0,["Ident",3522,1,0,"setImmediate"],0,["Func",3522,26,0,0,[],["_end","i"],[],"For",1273,1,0,0,["BlockExpression",0,0,0,["Binary",1183,38,0,["Ident",3523,16,0,"i"],"=","Const",3523,22,0,0],["Binary",3523,1,0,["Ident",3523,1,0,"_end"],"=","Binary",3523,27,0,["Ident",3523,27,0,"funcs"],".","Const",3523,34,0,"length"]],["Binary",1209,57,0,["Ident",3523,16,0,"i"],"<","Ident",3523,1,0,"_end"],["Unary",1221,35,0,"++","Ident",3523,16,0,"i"],"Call",3524,1,0,["Binary",3524,1,0,["Ident",3524,1,0,"funcs"],".","Ident",3524,21,0,"i"],0]]]]],["Return",3526,1,0,"Obj",3526,1,0,3527,7,null,"promise",["Obj",3527,15,0,3528,9,null,"then",["Func",3528,16,0,0,[["Ident",3528,17,0,"onFulfilled"],["Ident",3528,30,0,"onRejected"],["Ident",3528,51,0,"allowSync"]],["_ref","fulfill","promise","reject"],[],"BlockStatement",3529,1,0,0,["IfStatement",3529,1,0,0,["Binary",43,7,0,["Ident",3529,13,0,"allowSync"],"!==","Const",3529,27,0,!0],["Binary",3530,1,0,["Ident",3530,1,0,"allowSync"],"=","Const",3530,26,0]],["Binary",250,43,0,["Ident",3531,16,0,"promise"],"=","Binary",250,55,0,["Binary",3531,1,0,["Ident",3531,1,0,"_ref"],"=","Call",3531,43,0,["Ident",3531,43,0,"__defer"],0],".","Const",0,0,0,"promise"],["Binary",250,43,0,["Ident",3531,24,0,"fulfill"],"=","Binary",250,55,0,["Ident",3531,1,0,"_ref"],".","Const",0,0,0,"fulfill"],["Binary",250,43,0,["Ident",3531,33,0,"reject"],"=","Binary",250,55,0,["Ident",3531,1,0,"_ref"],".","Const",0,0,0,"reject"],["Func",3532,1,0,["Ident",3532,14,0,"step"],[],["f","result"],[],"TryCatch",3532,27,0,0,["BlockStatement",3533,1,0,0,["IfStatement",3533,20,0,0,["Ident",3533,23,0,"isError"],["Binary",3533,1,0,["Ident",3533,16,0,"f"],"=","Ident",3533,37,0,"onRejected"],"Binary",3533,1,0,["Ident",3533,16,0,"f"],"=","Ident",3533,54,0,"onFulfilled"],["IfStatement",3534,1,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Ident",3534,28,0,"f"],"===","Const",137,25,0,"function"],["BlockStatement",3535,1,0,0,["Binary",3535,1,0,["Ident",3535,18,0,"result"],"=","Call",3535,27,0,["Ident",3535,27,0,"f"],0,["Ident",3535,30,0,"value"]],["IfStatement",3536,1,0,0,["Binary",3536,17,0,["Ident",3536,17,0,"result"],"&&","Binary",137,7,0,["Unary",137,7,0,"typeof","Binary",3536,41,0,["Ident",3536,41,0,"result"],".","Const",3536,49,0,"then"],"===","Const",137,25,0,"function"],["Call",3537,1,0,["Binary",3537,1,0,["Ident",3537,1,0,"result"],".","Const",3537,24,0,"then"],0,["Ident",3537,29,0,"fulfill"],["Ident",3537,37,0,"reject"],["Ident",3537,45,0,"allowSync"]],"Call",3539,1,0,["Ident",3539,1,0,"fulfill"],0,["Ident",3539,25,0,"result"]]],"Call",3541,1,0,["IfExpression",3541,16,0,["Ident",3541,18,0,"isError"],["Ident",3541,32,0,"reject"],"Ident",3541,44,0,"fulfill"],0,["Ident",3541,54,0,"value"]]],["Ident",3542,16,0,"e"],"Call",3543,1,0,["Ident",3543,1,0,"reject"],0,["Ident",3543,20,0,"e"]],["IfStatement",3545,1,0,0,["Ident",3545,13,0,"deferred"],["Call",3546,1,0,["Binary",3546,1,0,["Ident",3546,1,0,"deferred"],".","Const",3546,22,0,"push"],0,["Ident",3546,27,0,"step"]],"IfStatement",3545,1,0,0,["Ident",3547,18,0,"allowSync"],["Call",3548,1,0,["Ident",3548,1,0,"step"],0],"Call",3550,1,0,["Ident",3550,1,0,"setImmediate"],0,["Ident",3550,27,0,"step"]],["Return",3551,1,0,"Ident",3551,1,0,"promise"]],3552,9,null,"sync",["Func",3552,16,0,0,[],["result","state"],[],"BlockStatement",3553,1,0,0,["Binary",3553,1,0,["Ident",3553,22,0,"state"],"=","Const",3553,31,0,0],["Binary",3554,1,0,["Ident",3554,22,0,"result"],"=","Const",3554,32,0,0],["Call",3555,1,0,["Binary",3555,1,0,["This",3555,1,0],".","Const",3555,12,0,"then"],0,["Func",3556,14,0,0,[["Ident",3556,15,0,"ret"]],[],[],"BlockStatement",3557,1,0,0,["Binary",3557,1,0,["Ident",3557,1,0,"state"],"=","Const",3557,24,0,1],["Return",3558,1,0,"Binary",3558,1,0,["Ident",3558,1,0,"result"],"=","Ident",3558,24,0,"ret"]],["Func",3559,14,0,0,[["Ident",3559,15,0,"err"]],[],[],"BlockStatement",3560,1,0,0,["Binary",3560,1,0,["Ident",3560,1,0,"state"],"=","Const",3560,24,0,2],["Return",3561,1,0,"Binary",3561,1,0,["Ident",3561,1,0,"result"],"=","Ident",3561,24,0,"err"]],["Const",3562,13,0,!0]],["Switch",3563,1,0,0,["Ident",3563,17,0,"state"],3564,16,null,["Const",3564,16,0,0],["Throw",3565,1,0,"Call",3565,18,0,["Ident",3565,18,0,"Error"],0,["Const",3565,25,0,"Promise did not execute synchronously"]],3566,16,null,["Const",3566,16,0,1],["Return",3567,1,0,"Ident",3567,19,0,"result"],3568,16,null,["Const",3568,16,0,2],["Throw",3569,1,0,"Ident",3569,18,0,"result"],["Throw",3571,1,0,"Call",3571,18,0,["Ident",3571,18,0,"Error"],0,["Const",3571,25,0,"Unknown state"]]]]],3573,7,null,"fulfill",["Func",3573,14,0,0,[["Ident",3573,15,0,"value"]],[],[],"Call",3573,25,0,["Ident",3573,25,0,"complete"],0,["Const",3573,35,0,!1],["Ident",3573,41,0,"value"]],3574,7,null,"reject",["Func",3574,13,0,0,[["Ident",3574,14,0,"reason"]],[],[],"Call",3574,25,0,["Ident",3574,25,0,"complete"],0,["Const",3574,35,0,!0],["Ident",3574,40,0,"reason"]]]],["Binary",3576,1,0,["Binary",3576,1,0,["Ident",3576,1,0,"__defer"],".","Const",3576,11,0,"fulfilled"],"=","Func",3576,25,0,0,[["Ident",3576,26,0,"value"]],["d"],[],"BlockStatement",3577,1,0,0,["Binary",3577,1,0,["Ident",3577,8,0,"d"],"=","Call",3577,12,0,["Ident",3577,12,0,"__defer"],0],["Call",3578,1,0,["Binary",3578,1,0,["Ident",3578,1,0,"d"],".","Const",3578,7,0,"fulfill"],0,["Ident",3578,15,0,"value"]],["Return",3579,1,0,"Binary",3579,1,0,["Ident",3579,1,0,"d"],".","Const",3579,7,0,"promise"]],["Binary",3580,1,0,["Binary",3580,1,0,["Ident",3580,1,0,"__defer"],".","Const",3580,11,0,"rejected"],"=","Func",3580,24,0,0,[["Ident",3580,25,0,"reason"]],["d"],[],"BlockStatement",3581,1,0,0,["Binary",3581,1,0,["Ident",3581,8,0,"d"],"=","Call",3581,12,0,["Ident",3581,12,0,"__defer"],0],["Call",3582,1,0,["Binary",3582,1,0,["Ident",3582,1,0,"d"],".","Const",3582,7,0,"reject"],0,["Ident",3582,14,0,"reason"]],["Return",3583,1,0,"Binary",3583,1,0,["Ident",3583,1,0,"d"],".","Const",3583,7,0,"promise"]],["Return",3584,1,0,"Ident",3584,1,0,"__defer"]],0],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{fulfill:{type:"generic",base:"functionBase",args:["undefined"]},promise:{type:"object",pairs:{sync:"function",then:"function"}},reject:{type:"generic",base:"functionBase",args:["undefined"]}}}]},dependencies:["__defer","setImmediate"]},__generatorToPromise:{helper:["Func",1897,1,0,0,[["Ident",3586,42,0,"generator"],["Ident",3586,83,0,"allowSync"]],[],[],"BlockStatement",1897,1,0,0,["IfStatement",1770,10,0,0,["Binary",1770,13,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3586,42,0,"generator"],"!==","Const",143,62,0,"object"],"||","Binary",143,72,0,["Ident",3586,42,0,"generator"],"===","Const",0,0,0,null],["Throw",1771,1,0,"Call",1771,14,0,["Ident",1771,14,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected generator to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3586,42,0,"generator"]]],"BlockStatement",0,0,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Binary",1769,35,0,["Ident",3586,42,0,"generator"],".","Const",3586,56,0,"send"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected generator.send to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Binary",1769,35,0,["Ident",3586,42,0,"generator"],".","Const",3586,56,0,"send"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Binary",1769,35,0,["Ident",3586,42,0,"generator"],".","Const",3586,68,0,"throw"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected generator.throw to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Binary",1769,35,0,["Ident",3586,42,0,"generator"],".","Const",3586,68,0,"throw"]]]]],["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",3586,83,0,"allowSync"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",3586,83,0,"allowSync"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",3586,83,0,"allowSync"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected allowSync to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3586,83,0,"allowSync"]]]],["Func",3587,1,0,["Ident",3587,6,0,"continuer"],[["Ident",3587,17,0,"verb"],["Ident",3587,22,0,"arg"]],["item"],[],"BlockStatement",3588,1,0,0,["TryCatch",3589,1,0,0,["Binary",3590,1,0,["Ident",3590,1,0,"item"],"=","Call",3590,14,0,["Binary",3590,14,0,["Ident",3590,14,0,"generator"],".","Ident",3590,25,0,"verb"],0,["Ident",3590,31,0,"arg"]],["Ident",3591,10,0,"e"],"Return",3592,1,0,"Call",3592,13,0,["Binary",3592,13,0,["Ident",3592,13,0,"__defer"],".","Const",3592,22,0,"rejected"],0,["Ident",3592,31,0,"e"]],["IfStatement",3593,1,0,0,["Binary",3593,7,0,["Ident",3593,7,0,"item"],".","Const",3593,13,0,"done"],["Return",3594,1,0,"Call",3594,1,0,["Binary",3594,1,0,["Ident",3594,1,0,"__defer"],".","Const",3594,15,0,"fulfilled"],0,["Binary",3594,25,0,["Ident",3594,25,0,"item"],".","Const",3594,30,0,"value"]],"Return",3596,1,0,"Call",3596,1,0,["Binary",3596,1,0,["Binary",3596,1,0,["Ident",3596,1,0,"item"],".","Const",3596,12,0,"value"],".","Const",3596,18,0,"then"],0,["Ident",3596,23,0,"callback"],["Ident",3596,32,0,"errback"],["Ident",3596,41,0,"allowSync"]]],["Func",3597,1,0,["Ident",3597,6,0,"callback"],[["Ident",3597,16,0,"value"]],[],[],"Return",3597,25,0,"Call",3597,25,0,["Ident",3597,25,0,"continuer"],0,["Const",3597,37,0,"send"],["Ident",3597,42,0,"value"]],["Func",3598,1,0,["Ident",3598,6,0,"errback"],[["Ident",3598,15,0,"value"]],[],[],"Return",3598,24,0,"Call",3598,24,0,["Ident",3598,24,0,"continuer"],0,["Const",3598,36,0,"throw"],["Ident",3598,42,0,"value"]],["Return",3599,1,0,"Call",3599,1,0,["Ident",3599,1,0,"callback"],0,["Const",3599,12,0]]],type:"function",dependencies:["__defer","__generatorToPromise","__typeof"]},__promise:{helper:["Func",1897,1,0,0,[["Ident",3600,36,0,"value"],["Ident",3600,43,0,"allowSync"]],["factory"],[],"BlockStatement",1897,1,0,0,["IfStatement",1688,13,0,0,["Binary",1688,16,0,["Ident",3600,43,0,"allowSync"],"==","Const",0,0,0,null],["Binary",1689,1,0,["Ident",3600,43,0,"allowSync"],"=","Const",0,0,0,!1],"IfStatement",1681,1,0,0,["Binary",650,18,0,["Unary",134,7,0,"typeof","Ident",3600,43,0,"allowSync"],"!==","Const",134,25,0,"boolean"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected allowSync to be a Boolean, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3600,43,0,"allowSync"]]]],["IfStatement",3601,1,0,0,["Binary",137,7,0,["Unary",137,7,0,"typeof","Ident",3601,18,0,"value"],"===","Const",137,25,0,"function"],["BlockStatement",3602,1,0,0,["Binary",3602,1,0,["Ident",3602,8,0,"factory"],"=","Func",3602,16,0,0,[],[],[],"Return",3602,21,0,"Call",3602,21,0,["Ident",3602,21,0,"__generatorToPromise"],0,["Call",3602,45,0,["Binary",3602,45,0,["Ident",3602,45,0,"value"],".","Const",3602,45,0,"apply"],0,["This",3602,52,0],["Arguments",3602,61,0]]],["Binary",3603,1,0,["Binary",3603,1,0,["Ident",3603,1,0,"factory"],".","Const",3603,13,0,"sync"],"=","Func",3603,22,0,0,[],[],[],"Return",3603,24,0,"Call",3603,24,0,["Binary",3603,24,0,["Call",3603,24,0,["Ident",3603,24,0,"__generatorToPromise"],0,["Call",3603,48,0,["Binary",3603,48,0,["Ident",3603,48,0,"value"],".","Const",3603,48,0,"apply"],0,["This",3603,55,0],["Arguments",3603,64,0]],["Const",3603,75,0,!0]],".","Const",3603,82,0,"sync"],0],["Return",3604,1,0,"Ident",3604,1,0,"factory"]],"Return",3606,1,0,"Call",3606,1,0,["Ident",3606,1,0,"__generatorToPromise"],0,["Ident",3606,28,0,"value"],["Ident",3606,34,0,"allowSync"]]],type:"function",dependencies:["__generatorToPromise","__promise","__toArray","__typeof"]},__fromPromise:{helper:["Func",1897,1,0,0,[["Ident",3644,34,0,"promise"]],[],[],"BlockStatement",1897,1,0,0,["IfStatement",1770,10,0,0,["Binary",1770,13,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3644,34,0,"promise"],"!==","Const",143,62,0,"object"],"||","Binary",143,72,0,["Ident",3644,34,0,"promise"],"===","Const",0,0,0,null],["Throw",1771,1,0,"Call",1771,14,0,["Ident",1771,14,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected promise to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3644,34,0,"promise"]]],"IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Binary",1769,35,0,["Ident",3644,34,0,"promise"],".","Const",3644,46,0,"then"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected promise.then to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Binary",1769,35,0,["Ident",3644,34,0,"promise"],".","Const",3644,46,0,"then"]]]],["Return",3644,65,0,"Func",3644,65,0,0,[["Ident",3644,66,0,"callback"]],[],[],"Call",3645,1,0,["Binary",3645,1,0,["Ident",3645,1,0,"promise"],".","Const",3645,11,0,"then"],0,["Func",3646,6,0,0,[["Ident",3646,7,0,"value"]],[],[],"Return",3646,16,0,"Call",3646,16,0,["Ident",3646,16,0,"setImmediate"],0,["Ident",3646,31,0,"callback"],["Const",3646,40,0,null],["Ident",3646,46,0,"value"]],["Func",3647,6,0,0,[["Ident",3647,7,0,"reason"]],[],[],"Return",3647,17,0,"Call",3647,17,0,["Ident",3647,17,0,"setImmediate"],0,["Ident",3647,32,0,"callback"],["Ident",3647,41,0,"reason"]]]],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:["undefined"]}]},dependencies:["__fromPromise","__typeof","setImmediate"]},__toPromise:{helper:["Func",1897,1,0,0,[["Ident",3654,32,0,"func"],["Ident",3654,43,0,"context"],["Ident",3654,52,0,"args"]],["d"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3654,32,0,"func"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected func to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3654,32,0,"func"]]]],["Binary",3655,1,0,["Ident",3655,6,0,"d"],"=","Call",3655,10,0,["Ident",3655,10,0,"__defer"],0],["Call",3656,1,0,["Binary",3656,1,0,["Ident",3656,1,0,"func"],".","Const",3656,1,0,"apply"],0,["Ident",3656,9,0,"context"],["Call",3656,1,0,["Binary",3656,1,0,["Call",3656,21,0,["Ident",3656,21,0,"__toArray"],0,["Ident",3656,21,0,"args"]],".","Const",3656,1,0,"concat"],0,["Arr",3656,28,0,["Func",3656,28,0,0,[["Ident",3656,29,0,"err"],["Ident",3656,33,0,"value"]],[],[],"IfExpression",3657,1,0,["Binary",49,7,0,["Ident",3657,7,0,"err"],"!=","Const",0,0,0,null],["Call",3658,1,0,["Binary",3658,1,0,["Ident",3658,1,0,"d"],".","Const",3658,9,0,"reject"],0,["Ident",3658,16,0,"err"]],"Call",3660,1,0,["Binary",3660,1,0,["Ident",3660,1,0,"d"],".","Const",3660,9,0,"fulfill"],0,["Ident",3660,17,0,"value"]]]]],["Return",3661,1,0,"Binary",3661,1,0,["Ident",3661,1,0,"d"],".","Const",3661,5,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__toArray","__toPromise","__typeof"]},__generator:{helper:["Func",3691,30,0,0,[["Ident",3691,31,0,"func"]],[],[],"Return",3691,41,0,"Func",3691,41,0,0,[],["_this","data"],[],"BlockStatement",3692,1,0,0,["Binary",3692,1,0,["Ident",3692,1,0,"_this"],"=","This",3692,1,0],["Binary",3692,1,0,["Ident",3692,14,0,"data"],"=","Arr",3692,32,0,["This",3692,34,0],["Call",3692,39,0,["Binary",3692,39,0,["Ident",3692,39,0,"__slice"],".","Const",3692,48,0,"call"],0,["Arguments",3692,53,0]]],["Return",3693,1,0,"Obj",3693,1,0,3694,5,null,"iterator",["Func",3694,13,0,0,[],[],[],"Return",3694,18,0,"This",3694,18,0],3695,5,null,"send",["Func",3695,9,0,0,[],["tmp"],[],"Return",3696,1,0,"Obj",3696,1,0,3697,10,null,"done",["Const",3697,9,0,!0],3698,9,null,"value",["IfExpression",3698,15,0,["Ident",3698,18,0,"data"],["BlockExpression",3699,1,0,["Binary",3699,1,0,["Ident",3699,14,0,"tmp"],"=","Ident",3699,20,0,"data"],["Binary",3700,1,0,["Ident",3700,1,0,"data"],"=","Const",3700,18,0,null],["Call",3701,1,0,["Binary",3701,1,0,["Ident",3701,1,0,"func"],".","Const",3701,16,0,"apply"],0,["Binary",3701,22,0,["Ident",3701,22,0,"tmp"],".","Const",3701,26,0,0],["Binary",3701,29,0,["Ident",3701,29,0,"tmp"],".","Const",3701,34,0,1]]],"Const",3703,1,0]],3705,5,null,"next",["Func",3705,9,0,0,[],[],[],"Return",3705,14,0,"Call",3705,14,0,["Binary",3705,14,0,["This",3705,14,0],".","Const",3705,16,0,"send"],0],3706,5,null,"throw",["Func",3706,10,0,0,[["Ident",3706,11,0,"err"]],[],[],"BlockStatement",3707,1,0,0,["Binary",3707,1,0,["Ident",3707,1,0,"data"],"=","Const",3707,14,0,null],["Throw",3708,1,0,"Ident",3708,12,0,"err"]]]],type:{type:"generic",base:"functionBase",args:[{type:"generic",base:"functionBase",args:[{type:"object",pairs:{iterator:"function",next:"function",send:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{done:"boolean"}}]},"throw":{type:"generic",base:"functionBase",args:["none"]}}}]}]},dependencies:["__generator","__slice"]},__somePromise:{helper:["Func",1897,1,0,0,[["Ident",3711,34,0,"promises"]],["defer","i"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Unary",654,18,0,"!","Call",140,146,0,["Ident",140,146,0,"__isArray"],0,["Ident",3711,34,0,"promises"]],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected promises to be an Array, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3711,34,0,"promises"]]]],["Binary",3712,1,0,["Ident",3712,6,0,"defer"],"=","Call",3712,14,0,["Ident",3712,14,0,"__defer"],0],["Binary",3713,1,0,["Ident",3713,14,0,"i"],"=","Binary",3713,18,0,["Ident",3713,18,0,"promises"],".","Const",3713,28,0,"length"],["For",1113,1,0,0,0,["Unary",3714,8,0,"--post","Ident",3714,18,0,"i"],0,"Call",3715,1,0,["Binary",3715,1,0,["Binary",3715,1,0,["Ident",3715,1,0,"promises"],".","Ident",3715,14,0,"i"],".","Const",3715,17,0,"then"],0,["Binary",3715,22,0,["Ident",3715,22,0,"defer"],".","Const",3715,28,0,"fulfill"],["Binary",3715,36,0,["Ident",3715,36,0,"defer"],".","Const",3715,43,0,"reject"]],["Return",3716,1,0,"Binary",3716,1,0,["Ident",3716,1,0,"defer"],".","Const",3716,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__isArray","__somePromise","__typeof"]},__everyPromise:{helper:["Func",1897,1,0,0,[["Ident",3726,35,0,"promises"]],["defer","i","isArray","k","remaining","result","v"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",656,18,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3726,35,0,"promises"],"!==","Const",143,62,0,"object"],"||","Binary",43,7,0,["Ident",3726,35,0,"promises"],"===","Const",0,0,0,null],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected promises to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3726,35,0,"promises"]]]],["Binary",3727,1,0,["Ident",3727,6,0,"isArray"],"=","Call",140,146,0,["Ident",140,146,0,"__isArray"],0,["Ident",3727,27,0,"promises"]],["Binary",3728,1,0,["Ident",3728,6,0,"defer"],"=","Call",3728,14,0,["Ident",3728,14,0,"__defer"],0],["IfStatement",3729,15,0,0,["Ident",3729,18,0,"isArray"],["Binary",3729,1,0,["Ident",3729,6,0,"result"],"=","Arr",3729,32,0],"Binary",3729,1,0,["Ident",3729,6,0,"result"],"=","Obj",3729,40,0],["Binary",3730,1,0,["Ident",3730,14,0,"remaining"],"=","Const",3730,27,0,0],["Func",3731,1,0,["Ident",3731,6,0,"handle"],[["Ident",3731,14,0,"key"],["Ident",3731,18,0,"promise"]],[],[],"Return",3732,1,0,"Call",3732,1,0,["Binary",3732,1,0,["Ident",3732,1,0,"promise"],".","Const",3732,13,0,"then"],0,["Func",3733,8,0,0,[["Ident",3733,9,0,"value"]],[],[],"BlockExpression",3734,1,0,["Binary",3734,1,0,["Binary",3734,1,0,["Ident",3734,1,0,"result"],".","Ident",3734,16,0,"key"],"=","Ident",3734,23,0,"value"],["IfExpression",3735,1,0,["Binary",3735,11,0,["Unary",894,11,0,"--","Ident",3735,13,0,"remaining"],"===","Const",3735,32,0,0],["Call",3736,1,0,["Binary",3736,1,0,["Ident",3736,1,0,"defer"],".","Const",3736,17,0,"fulfill"],0,["Ident",3736,25,0,"result"]]]],["Binary",3737,7,0,["Ident",3737,7,0,"defer"],".","Const",3737,13,0,"reject"]],["IfStatement",3738,1,0,0,["Ident",3738,5,0,"isArray"],["BlockStatement",3739,1,0,0,["Binary",3739,1,0,["Ident",3739,16,0,"i"],"=","Binary",3739,20,0,["Ident",3739,20,0,"promises"],".","Const",3739,30,0,"length"],["Binary",3740,1,0,["Ident",3740,1,0,"remaining"],"=","Ident",3740,17,0,"i"],["For",1113,1,0,0,0,["Unary",3741,10,0,"--post","Ident",3741,20,0,"i"],0,"Call",3742,1,0,["Ident",3742,1,0,"handle"],0,["Ident",3742,14,0,"i"],["Binary",3742,16,0,["Ident",3742,16,0,"promises"],".","Ident",3742,26,0,"i"]]],"ForIn",3744,1,0,0,["Ident",3744,8,0,"k"],["Ident",3744,16,0,"promises"],"IfStatement",1567,1,0,0,["Call",641,7,0,["Binary",641,7,0,["Ident",641,7,0,"__owns"],".","Const",641,7,0,"call"],0,["Ident",3744,16,0,"promises"],["Ident",3744,8,0,"k"]],["BlockStatement",1545,1,0,0,["Binary",1525,52,0,["Ident",3744,11,0,"v"],"=","Binary",1525,65,0,["Ident",3744,16,0,"promises"],".","Ident",3744,8,0,"k"],["Unary",892,11,0,"++","Ident",3745,1,0,"remaining"],["Call",3746,1,0,["Ident",3746,1,0,"handle"],0,["Ident",3746,14,0,"k"],["Ident",3746,16,0,"v"]]]],["Return",3747,1,0,"Binary",3747,1,0,["Ident",3747,1,0,"defer"],".","Const",3747,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__everyPromise","__isArray","__owns","__typeof"]},__delay:{helper:["Func",1897,1,0,0,[["Ident",3757,27,0,"milliseconds"],["Ident",3757,50,0,"value"]],["defer"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",3757,27,0,"milliseconds"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected milliseconds to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3757,27,0,"milliseconds"]]]],["IfStatement",3758,1,0,0,["Binary",720,13,0,["Ident",3758,5,0,"milliseconds"],"<=","Const",3758,22,0,0],["Return",3759,1,0,"Call",3759,1,0,["Binary",3759,1,0,["Ident",3759,1,0,"__defer"],".","Const",3759,13,0,"fulfilled"],0,["Ident",3759,23,0,"value"]],"BlockStatement",3761,1,0,0,["Binary",3761,1,0,["Ident",3761,8,0,"defer"],"=","Call",3761,16,0,["Ident",3761,16,0,"__defer"],0],["Call",3762,1,0,["Ident",3762,1,0,"setTimeout"],0,["Func",3762,19,0,0,[],[],[],"Call",3762,22,0,["Binary",3762,22,0,["Ident",3762,22,0,"defer"],".","Const",3762,29,0,"fulfill"],0,["Ident",3762,37,0,"value"]],["Ident",3762,45,0,"milliseconds"]],["Return",3763,1,0,"Binary",3763,1,0,["Ident",3763,1,0,"defer"],".","Const",3763,11,0,"promise"]]],type:"function",dependencies:["__defer","__delay","__typeof"]},__promiseLoop:{helper:["Func",1897,1,0,0,[["Ident",3774,41,0,"limit"],["Ident",3774,58,0,"length"],["Ident",3774,76,0,"body"]],["defer","done","index","result","slotsUsed"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",3774,41,0,"limit"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected limit to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3774,41,0,"limit"]]]],["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",3774,58,0,"length"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected length to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3774,58,0,"length"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3774,76,0,"body"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected body to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3774,76,0,"body"]]]],["IfStatement",3775,1,0,0,["Binary",3775,5,0,["Binary",3775,5,0,["Ident",3775,5,0,"limit"],"<","Const",3775,15,0,1],"||","Binary",43,7,0,["Ident",3775,19,0,"limit"],"!==","Ident",3775,28,0,"limit"],["Binary",3776,1,0,["Ident",3776,1,0,"limit"],"=","Const",3776,13,0,1,1]],["Binary",3778,1,0,["Ident",3778,6,0,"result"],"=","Arr",3778,15,0],["Binary",3779,1,0,["Ident",3779,14,0,"done"],"=","Const",3779,21,0,!1],["Binary",3780,1,0,["Ident",3780,14,0,"slotsUsed"],"=","Const",3780,28,0,0],["Binary",3781,1,0,["Ident",3781,6,0,"defer"],"=","Call",3781,14,0,["Ident",3781,14,0,"__defer"],0],["Binary",3782,1,0,["Ident",3782,14,0,"index"],"=","Const",3782,23,0,0],["Func",3783,1,0,["Ident",3783,6,0,"handle"],[["Ident",3783,14,0,"index"]],[],[],"BlockStatement",3784,1,0,0,["Unary",892,11,0,"++","Ident",3784,1,0,"slotsUsed"],["Return",3785,1,0,"Call",3785,1,0,["Binary",3785,1,0,["Call",3785,1,0,["Ident",3785,1,0,"body"],0,["Ident",3785,10,0,"index"]],".","Const",3785,17,0,"then"],0,["Func",3786,8,0,0,[["Ident",3786,9,0,"value"]],[],[],"BlockStatement",3787,1,0,0,["Binary",3787,1,0,["Binary",3787,1,0,["Ident",3787,1,0,"result"],".","Ident",3787,16,0,"index"],"=","Ident",3787,25,0,"value"],["Unary",894,11,0,"--","Ident",3788,1,0,"slotsUsed"],["Return",3789,1,0,"Call",3789,1,0,["Ident",3789,1,0,"flush"],0]],["Func",3790,8,0,0,[["Ident",3790,9,0,"reason"]],[],[],"BlockStatement",3791,1,0,0,["Binary",3791,1,0,["Ident",3791,1,0,"done"],"=","Const",3791,16,0,!0],["Return",3792,1,0,"Call",3792,1,0,["Binary",3792,1,0,["Ident",3792,1,0,"defer"],".","Const",3792,15,0,"reject"],0,["Ident",3792,22,0,"reason"]]]]],["Func",3793,1,0,["Ident",3793,6,0,"flush"],[],[],[],"BlockStatement",3794,1,0,0,["For",1113,1,0,0,0,["Binary",3794,10,0,["Binary",3794,10,0,["Unary",3794,10,0,"!","Ident",3794,14,0,"done"],"&&","Binary",718,13,0,["Ident",3794,23,0,"slotsUsed"],"<","Ident",3794,36,0,"limit"],"&&","Binary",718,13,0,["Ident",3794,46,0,"index"],"<","Ident",3794,54,0,"length"],["Unary",892,11,0,"++","Ident",3794,62,0,"index"],"Call",3795,1,0,["Ident",3795,1,0,"handle"],0,["Ident",3795,14,0,"index"]],["IfStatement",3796,1,0,0,["Binary",3796,7,0,["Binary",3796,7,0,["Unary",3796,7,0,"!","Ident",3796,11,0,"done"],"&&","Binary",756,9,0,["Ident",3796,20,0,"index"],">=","Ident",3796,29,0,"length"],"&&","Binary",3796,40,0,["Ident",3796,40,0,"slotsUsed"],"===","Const",3796,55,0,0],["BlockStatement",3797,1,0,0,["Binary",3797,1,0,["Ident",3797,1,0,"done"],"=","Const",3797,14,0,!0],["Return",3798,1,0,"Call",3798,1,0,["Binary",3798,1,0,["Ident",3798,1,0,"defer"],".","Const",3798,13,0,"fulfill"],0,["Ident",3798,21,0,"result"]]]]],["Call",3799,1,0,["Ident",3799,1,0,"setImmediate"],0,["Ident",3799,17,0,"flush"]],["Return",3800,1,0,"Binary",3800,1,0,["Ident",3800,1,0,"defer"],".","Const",3800,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__promiseLoop","__typeof","setImmediate"]},__promiseIter:{helper:["Func",1897,1,0,0,[["Ident",3802,41,0,"limit"],["Ident",3802,58,0,"iterator"],["Ident",3802,88,0,"body"]],["defer","done","index","iterStopped","result","slotsUsed"],[],"BlockStatement",1897,1,0,0,["IfStatement",1681,1,0,0,["Binary",648,18,0,["Unary",131,7,0,"typeof","Ident",3802,41,0,"limit"],"!==","Const",131,25,0,"number"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected limit to be a Number, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3802,41,0,"limit"]]]],["IfStatement",1770,10,0,0,["Binary",1770,13,0,["Binary",143,47,0,["Unary",143,47,0,"typeof","Ident",3802,58,0,"iterator"],"!==","Const",143,62,0,"object"],"||","Binary",143,72,0,["Ident",3802,58,0,"iterator"],"===","Const",0,0,0,null],["Throw",1771,1,0,"Call",1771,14,0,["Ident",1771,14,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected iterator to be an Object, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3802,58,0,"iterator"]]],"IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Binary",1769,35,0,["Ident",3802,58,0,"iterator"],".","Const",3802,72,0,"next"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected iterator.next to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Binary",1769,35,0,["Ident",3802,58,0,"iterator"],".","Const",3802,72,0,"next"]]]],["IfStatement",1681,1,0,0,["Binary",652,18,0,["Unary",137,7,0,"typeof","Ident",3802,88,0,"body"],"!==","Const",137,25,0,"function"],["Throw",1682,1,0,"Call",1682,18,0,["Ident",1682,18,0,"TypeError"],0,["Binary",603,7,0,["Const",603,7,0,"Expected body to be a Function, got "],"+","Call",489,49,0,["Ident",489,49,0,"__typeof"],0,["Ident",3802,88,0,"body"]]]],["IfStatement",3803,1,0,0,["Binary",3803,5,0,["Binary",3803,5,0,["Ident",3803,5,0,"limit"],"<","Const",3803,15,0,1],"||","Binary",43,7,0,["Ident",3803,19,0,"limit"],"!==","Ident",3803,28,0,"limit"],["Binary",3804,1,0,["Ident",3804,1,0,"limit"],"=","Const",3804,13,0,1,1]],["Binary",3806,1,0,["Ident",3806,6,0,"result"],"=","Arr",3806,15,0],["Binary",3807,1,0,["Ident",3807,14,0,"done"],"=","Const",3807,21,0,!1],["Binary",3808,1,0,["Ident",3808,14,0,"slotsUsed"],"=","Const",3808,28,0,0],["Binary",3809,1,0,["Ident",3809,6,0,"defer"],"=","Call",3809,14,0,["Ident",3809,14,0,"__defer"],0],["Binary",3810,1,0,["Ident",3810,14,0,"index"],"=","Const",3810,23,0,0],["Binary",3811,1,0,["Ident",3811,14,0,"iterStopped"],"=","Const",3811,29,0,!1],["Func",3812,1,0,["Ident",3812,6,0,"handle"],[["Ident",3812,14,0,"item"],["Ident",3812,19,0,"index"]],[],[],"BlockStatement",3813,1,0,0,["Unary",892,11,0,"++","Ident",3813,1,0,"slotsUsed"],["Return",3814,1,0,"Call",3814,1,0,["Binary",3814,1,0,["Call",3814,1,0,["Ident",3814,1,0,"body"],0,["Ident",3814,10,0,"item"],["Ident",3814,15,0,"index"]],".","Const",3814,23,0,"then"],0,["Func",3815,8,0,0,[["Ident",3815,9,0,"value"]],[],[],"BlockStatement",3816,1,0,0,["Binary",3816,1,0,["Binary",3816,1,0,["Ident",3816,1,0,"result"],".","Ident",3816,16,0,"index"],"=","Ident",3816,25,0,"value"],["Unary",894,11,0,"--","Ident",3817,1,0,"slotsUsed"],["Return",3818,1,0,"Call",3818,1,0,["Ident",3818,1,0,"flush"],0]],["Func",3819,8,0,0,[["Ident",3819,9,0,"reason"]],[],[],"BlockStatement",3820,1,0,0,["Binary",3820,1,0,["Ident",3820,1,0,"done"],"=","Const",3820,16,0,!0],["Return",3821,1,0,"Call",3821,1,0,["Binary",3821,1,0,["Ident",3821,1,0,"defer"],".","Const",3821,15,0,"reject"],0,["Ident",3821,22,0,"reason"]]]]],["Func",3822,1,0,["Ident",3822,6,0,"flush"],[],["item"],[],"BlockStatement",3823,1,0,0,["For",1113,1,0,0,0,["Binary",3823,10,0,["Binary",3823,10,0,["Unary",3823,10,0,"!","Ident",3823,14,0,"done"],"&&","Unary",3823,23,0,"!","Ident",3823,27,0,"iterStopped"],"&&","Binary",718,13,0,["Ident",3823,44,0,"slotsUsed"],"<","Ident",3823,57,0,"limit"],0,"BlockStatement",3824,1,0,0,["Binary",3824,1,0,["Ident",3824,18,0,"item"],"=","Const",3824,25,0],["TryCatch",3825,1,0,0,["Binary",3826,1,0,["Ident",3826,1,0,"item"],"=","Call",3826,16,0,["Binary",3826,16,0,["Ident",3826,16,0,"iterator"],".","Const",3826,26,0,"next"],0],["Ident",3827,12,0,"e"],"BlockStatement",3828,1,0,0,["Binary",3828,1,0,["Ident",3828,1,0,"done"],"=","Const",3828,16,0,!0],["Call",3829,1,0,["Binary",3829,1,0,["Ident",3829,1,0,"defer"],".","Const",3829,15,0,"reject"],0,["Ident",3829,22,0,"e"]],["Return",3830,1,0,"Const",3830,1,0]],["IfStatement",3832,1,0,0,["Binary",3832,9,0,["Ident",3832,9,0,"item"],".","Const",3832,15,0,"done"],["BlockStatement",3833,1,0,0,["Binary",3833,1,0,["Ident",3833,1,0,"iterStopped"],"=","Const",3833,24,0,!0],["Break",3834,1,0]]],["Call",3836,1,0,["Ident",3836,1,0,"handle"],0,["Binary",3836,14,0,["Ident",3836,14,0,"item"],".","Const",3836,19,0,"value"],["Unary",3836,25,0,"++post","Ident",3836,35,0,"index"]]],["IfStatement",3838,1,0,0,["Binary",3838,7,0,["Binary",3838,7,0,["Unary",3838,7,0,"!","Ident",3838,11,0,"done"],"&&","Binary",3838,20,0,["Ident",3838,20,0,"slotsUsed"],"===","Const",3838,35,0,0],"&&","Ident",3838,40,0,"iterStopped"],["BlockStatement",3839,1,0,0,["Binary",3839,1,0,["Ident",3839,1,0,"done"],"=","Const",3839,14,0,!0],["Return",3840,1,0,"Call",3840,1,0,["Binary",3840,1,0,["Ident",3840,1,0,"defer"],".","Const",3840,13,0,"fulfill"],0,["Ident",3840,21,0,"result"]]]]],["Call",3841,1,0,["Ident",3841,1,0,"setImmediate"],0,["Ident",3841,17,0,"flush"]],["Return",3842,1,0,"Binary",3842,1,0,["Ident",3842,1,0,"defer"],".","Const",3842,9,0,"promise"]],type:{type:"generic",base:"functionBase",args:[{type:"object",pairs:{sync:"function",then:"function"}}]},dependencies:["__defer","__promiseIter","__typeof","setImmediate"]}},assignOperator:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(!this.isComplex(left)||this.isAccess(left)&&!this.isComplex(this.parent(left))&&!this.isComplex(this.child(left))){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"=",n);},true);}else{return this.assign(left,"=",right);}};}.call(this));',operators:":=",options:{type:"right"},id:30},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",306,9,1,306,{left:__wrap(setLeft),inverted:false,op:"and",right:__node("MacroAccess",306,25,30,306,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"and=",id:43},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",310,9,2,310,{left:__wrap(setLeft),inverted:false,op:"or",right:__node("MacroAccess",310,24,30,310,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"or=",id:44},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~*="){return _this.assign(left,"*=",n);}else if(op==="~/="){return _this.assign(left,"/=",n);}else{return _this.assign(left,"%=",n);}},true);}else if(op==="~*="){return this.assign(left,"*=",right);}else if(op==="~/="){return this.assign(left,"/=",right);}else{return this.assign(left,"%=",right);}};}.call(this));',operators:["~*=","~/=","~%="],options:{type:"number"},id:46},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",345,9,30,345,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",345,22,45,345,{left:__wrap(left),inverted:false,op:"~\\\\",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"~\\=",options:{type:"number"},id:47},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var left,op,right;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",399,9,30,399,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",399,22,50,399,{left:__wrap(left),inverted:false,op:"~^",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"~^=",options:{type:"number"},id:51},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("++",left);}else if(value===-1){return this.unary("--",left);}else if(typeof value==="number"&&!this.isType(left,"numeric")){return this.assign(left,"-=",this["const"](-value));}}if(this.isType(left,"numeric")){if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(!_this.isType(n,"numeric")){n=__node("MacroAccess",415,20,48,415,{op:"~+",node:__wrap(n)},"expression",false,false,false);}return _this.assign(left,"+=",n);},true);}else{if(!this.isType(right,"numeric")){right=__node("MacroAccess",419,22,48,419,{op:"~+",node:__wrap(right)},"expression",false,false,false);}return this.assign(left,"+=",right);}}else if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",__node("MacroAccess",423,72,48,423,{op:"~-",node:__wrap(n)},"expression",false,false,false));},true);}else{return this.assign(left,"-=",__node("MacroAccess",425,31,48,425,{op:"~-",node:__wrap(right)},"expression",false,false,false));}};}.call(this));',operators:"~+=",options:{type:"number"},id:52},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right,value;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isConst(right)){value=this.value(right);if(value===1){return this.unary("--",left);}else if(value===-1){return this.unary("++",left);}}if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){return _this.assign(left,"-=",n);},true);}else{return this.assign(left,"-=",right);}};}.call(this));',operators:"~-=",options:{type:"number"},id:53},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitlshift="){return _this.assign(left,"<<=",n);}else if(op==="~bitrshift="){return _this.assign(left,">>=",n);}else{return _this.assign(left,">>>=",n);}},true);}else if(op==="~bitlshift="){return this.assign(left,"<<=",right);}else if(op==="~bitrshift="){return this.assign(left,">>=",right);}else{return this.assign(left,">>>=",right);}};}.call(this));',operators:["~bitlshift=","~bitrshift=","~biturshift="],options:{type:"number"},id:55},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(_this.hasType(left,"numeric")&&_this.hasType(n,"numeric")){n=__node("MacroAccess",468,18,29,468,{left:__node("Const",468,19,""),inverted:false,op:"~&",right:__node("Ident",468,24,"n")},"expression",false,false,false);}return _this.assign(left,"+=",n);},true);}else{if(this.hasType(left,"numeric")&&this.hasType(right,"numeric")){right=__node("MacroAccess",472,20,29,472,{left:__node("Const",472,21,""),inverted:false,op:"~&",right:__node("Ident",472,26,"right")},"expression",false,false,false);}return this.assign(left,"+=",right);}};}.call(this));',operators:"~&=",options:{type:"string"},id:56},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",559,9,30,559,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",559,22,62,559,{left:__wrap(left),inverted:false,op:"^",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"^=",options:{type:"number"},id:63},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",590,9,30,590,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",590,22,64,590,{left:__wrap(left),inverted:false,op:"\\\\",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"\\=",options:{type:"number"},id:68},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"string")){return __node("MacroAccess",607,9,56,607,{left:__wrap(left),op:"~&=",right:__node("MacroAccess",607,19,69,607,{left:__node("Const",607,20,""),inverted:false,op:"&",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",610,11,30,610,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",610,24,69,610,{left:__wrap(left),inverted:false,op:"&",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});}};}.call(this));',operators:"&=",options:{type:"string"},id:70},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",789,13,16,789,{macroName:"if",macroData:{test:__node("MacroAccess",789,16,10,789,{left:__wrap(setLeft),inverted:false,op:"~>",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",789,47,30,789,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"~min=",id:86},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",795,13,16,795,{macroName:"if",macroData:{test:__node("MacroAccess",795,16,9,795,{left:__wrap(setLeft),inverted:false,op:"~<",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",795,47,30,795,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"~max=",id:87},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",801,13,16,801,{macroName:"if",macroData:{test:__node("MacroAccess",801,16,79,801,{left:__wrap(setLeft),inverted:false,op:">",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",801,46,30,801,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"min=",id:88},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){return _this.maybeCache(right,function(setRight,right){return __node("MacroAccess",807,13,16,807,{macroName:"if",macroData:{test:__node("MacroAccess",807,16,78,807,{left:__wrap(setLeft),inverted:false,op:"<",right:__wrap(setRight)},"expression",false,false,false),body:__node("MacroAccess",807,46,30,807,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"expression",false,false,false);});});});};}.call(this));',operators:"max=",id:89},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return __node("MacroAccess",811,9,30,811,{left:__wrap(setLeft),op:":=",right:__node("MacroAccess",811,22,84,811,{left:__wrap(left),inverted:false,op:"xor",right:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);});};}.call(this));',operators:"xor=",id:90},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;return this.maybeCacheAccess(left,function(setLeft,left){return _this.maybeCache(setLeft,function(setLeft,leftValue){if(_this.position==="expression"){return __node("MacroAccess",817,13,16,817,{macroName:"if",macroData:{test:__node("MacroAccess",817,16,20,817,{op:"?",node:__wrap(setLeft)},"expression",false,false,false),body:__wrap(leftValue),elseIfs:[],elseBody:__node("MacroAccess",817,51,30,817,{left:__wrap(left),op:":=",right:__wrap(right)},"expression",false,false,false)}},"expression",false,false,false);}else{return __node("MacroAccess",819,12,17,819,{macroName:"if",macroData:{test:__node("MacroAccess",819,15,3,819,{op:"not",node:__node("MacroAccess",819,19,20,819,{op:"?",node:__wrap(setLeft)},"statement",false,false,false)},"statement",false,false,false),body:__node("MacroAccess",820,1,30,820,{left:__wrap(left),op:":=",right:__wrap(right)},"statement",false,false,false),elseIfs:[],elseBody:__wrap(leftValue)}},"statement",false,false,false);}});});};}.call(this));',operators:"?=",id:91},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.canMutateLast(right)&&this.isIdentOrTmp(left)){return this.mutateLast(right||this.noop(),function(n){if(op==="~bitand="){return _this.assign(left,"&=",n);}else if(op==="~bitor="){return _this.assign(left,"|=",n);}else{return _this.assign(left,"^=",n);}},true);}else if(op==="~bitand="){return this.assign(left,"&=",right);}else if(op==="~bitor="){return this.assign(left,"|=",right);}else{return this.assign(left,"^=",right);}};}.call(this));',operators:["~bitand=","~bitor=","~bitxor="],options:{type:"number"},id:95},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var _this,left,op,right;_this=this;left=macroData.left;op=macroData.op;right=macroData.right;if(this.isType(left,"number")){if(op==="*="){return __node("MacroAccess",886,11,46,886,{left:__wrap(left),op:"~*=",right:__node("MacroAccess",886,21,60,886,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="/="){return __node("MacroAccess",888,11,46,888,{left:__wrap(left),op:"~/=",right:__node("MacroAccess",888,21,60,888,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="%="){return __node("MacroAccess",890,11,46,890,{left:__wrap(left),op:"~%=",right:__node("MacroAccess",890,21,60,890,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="+="){return __node("MacroAccess",892,11,52,892,{left:__wrap(left),op:"~+=",right:__node("MacroAccess",892,21,60,892,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="-="){return __node("MacroAccess",894,11,53,894,{left:__wrap(left),op:"~-=",right:__node("MacroAccess",894,21,60,894,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitlshift="){return __node("MacroAccess",896,11,55,896,{left:__wrap(left),op:"~bitlshift=",right:__node("MacroAccess",896,29,60,896,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitrshift="){return __node("MacroAccess",898,11,55,898,{left:__wrap(left),op:"~bitrshift=",right:__node("MacroAccess",898,29,60,898,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="biturshift="){return __node("MacroAccess",900,11,55,900,{left:__wrap(left),op:"~biturshift=",right:__node("MacroAccess",900,30,60,900,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitand="){return __node("MacroAccess",902,11,95,902,{left:__wrap(left),op:"~bitand=",right:__node("MacroAccess",902,26,60,902,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitor="){return __node("MacroAccess",904,11,95,904,{left:__wrap(left),op:"~bitor=",right:__node("MacroAccess",904,25,60,904,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else if(op==="bitxor="){return __node("MacroAccess",906,11,95,906,{left:__wrap(left),op:"~bitxor=",right:__node("MacroAccess",906,26,60,906,{op:"+",node:__wrap(right)},"expression",false,false,false)},"expression",false,false,false);}else{return this.error("Unknown operator "+op);}}else{return this.maybeCacheAccess(left,function(setLeft,left){var action;if(op==="*="){action=__node("MacroAccess",912,13,64,912,{left:__wrap(left),inverted:false,op:"*",right:__wrap(right)},"expression",false,false,false);}else if(op==="/="){action=__node("MacroAccess",914,13,64,914,{left:__wrap(left),inverted:false,op:"/",right:__wrap(right)},"expression",false,false,false);}else if(op==="%="){action=__node("MacroAccess",916,13,64,916,{left:__wrap(left),inverted:false,op:"%",right:__wrap(right)},"expression",false,false,false);}else if(op==="+="){action=__node("MacroAccess",918,13,66,918,{left:__wrap(left),inverted:false,op:"+",right:__wrap(right)},"expression",false,false,false);}else if(op==="-="){action=__node("MacroAccess",920,13,66,920,{left:__wrap(left),inverted:false,op:"-",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitlshift="){action=__node("MacroAccess",922,13,67,922,{left:__wrap(left),inverted:false,op:"bitlshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitrshift="){action=__node("MacroAccess",924,13,67,924,{left:__wrap(left),inverted:false,op:"bitrshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="biturshift="){action=__node("MacroAccess",926,13,67,926,{left:__wrap(left),inverted:false,op:"biturshift",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitand="){action=__node("MacroAccess",928,13,96,928,{left:__wrap(left),inverted:false,op:"bitand",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitor="){action=__node("MacroAccess",930,13,97,930,{left:__wrap(left),inverted:false,op:"bitor",right:__wrap(right)},"expression",false,false,false);}else if(op==="bitxor="){action=__node("MacroAccess",932,13,98,932,{left:__wrap(left),inverted:false,op:"bitxor",right:__wrap(right)},"expression",false,false,false);}else{action=_this.error("Unknown operator "+op);}return __node("MacroAccess",935,11,30,935,{left:__wrap(setLeft),op:":=",right:__wrap(action)},"expression",false,false,false);});}};}.call(this));',operators:["*=","/=","%=","+=","-=","bitlshift=","bitrshift=","biturshift=","bitand=","bitor=","bitxor="],options:{type:"number"},id:103}],defineSyntax:[{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var asType,ident,isMutable;isMutable=macroData.isMutable;ident=macroData.ident;asType=macroData.asType;if(this.isIdentOrTmp(ident)){return {type:"ident",isMutable:isMutable==="mutable",ident:ident,asType:asType};}else{return ident;}};}.call(this));',options:{name:"DeclarableIdent"},params:[["ident","isMutable","many","?","const","mutable"],["ident","ident","ident","Identifier"],["ident","asType","many","?","sequence",["const","as"],["this","ident","Type"]]],id:31},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"array",elements:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableArray"},params:[["const","["],["ident","head","choice",["ident","Declarable"],["const",""]],["ident","tail","many","*","sequence",["const",","],["this","choice",["ident","Declarable"],["const",""]]],["const","]"]],id:32},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var value;value=macroData.value;value=this.macroExpand1(value);return {key:this.name(value.ident),value:value};};}.call(this));',options:{name:"DeclarableObjectSingularPair"},params:[["ident","value","ident","DeclarableIdent"]],id:33},{options:{name:"DeclarableObjectDualPair"},params:[["this","sequence",["ident","key","ident","ObjectKey"],["const",":"],["ident","value","ident","Declarable"]]],id:34},{options:{name:"DeclarableObjectPair"},params:[["this","choice",["ident","DeclarableObjectDualPair"],["ident","DeclarableObjectSingularPair"]]],id:35},{code:'return (function(){"use strict";return function(macroData,__wrap,__node,__const){var head,tail;head=macroData.head;tail=macroData.tail;return {type:"object",pairs:[head].concat(tail)};};}.call(this));',options:{name:"DeclarableObject"},params:[["const","{"],["ident","head","ident","DeclarableObjectPair"],["ident","tail","many","*","sequence",["const",","],["this","ident","DeclarableObjectPair"]],["const","}"]],id:36},{options:{name:"Declarable"},params:[["this","choice",["ident","DeclarableArray"],["ident","DeclarableObject"],["ident","DeclarableIdent"]]],id:37}],call:[{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var head,macroData,macroName,tail,tmp;macroName=macroFullData.macroName;macroData=macroFullData.macroData;head=macroData[0];tail=arguments[0].macroData.slice(1);if(tail.length===0){return __wrap(head);}else if(this.position==="statement"){tmp=this.tmp("ref");return __node("Block",501,1,[__node("MacroAccess",501,1,38,501,{macroName:"let",macroData:{declarable:__node("MacroAccess",501,10,37,501,__node("MacroAccess",501,10,31,501,{ident:__wrap(tmp)},"statement",false,false,false),"statement",false,false,false),value:__wrap(head)}},"statement",false,false,false),__wrap(tail),__wrap(tmp)],null);}else{return __node("Call",505,8,__node("Ident",505,8,"__first"),[__wrap(head),__wrap(tail)],false,false);}};}.call(this));',names:"first!",id:58},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var _ref,finish,macroData,macroName,start;macroName=macroFullData.macroName;macroData=macroFullData.macroData;start=arguments[0].macroData.slice(0,-1);finish=(_ref=arguments[0].macroData)[_ref.length-1];if(start.length===0){return __wrap(finish);}else{return __node("Block",515,1,[__wrap(start),__wrap(finish)],null);}};}.call(this));',names:"last!",id:59},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var body,func,macroData,macroName,ran,silentFail;macroName=macroFullData.macroName;macroData=macroFullData.macroData;func=macroData[0];silentFail=macroData[1];if(this.isFunc(func)){body=this.funcBody(func);ran=this.tmp("once",true,"boolean");func=this.rewrap(this.func(this.funcParams(func),__node("Block",2374,1,[__node("MacroAccess",2374,1,17,2374,{macroName:"if",macroData:{test:__wrap(ran),body:__node("MacroAccess",2375,1,17,2375,{macroName:"if",macroData:{test:__wrap(silentFail),body:__node("MacroAccess",2376,1,39,2376,{macroName:"return",macroData:{}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",2378,1,11,2378,{op:"throw",node:__node("Call",2378,18,__node("Ident",2378,18,"Error"),[__node("Const",2378,25,"Attempted to call function more than once")],false,false)},"statement",false,false,false)}},"statement",false,false,false),elseIfs:[],elseBody:__node("MacroAccess",2380,1,30,2380,{left:__wrap(ran),op:":=",right:__const("true")},"statement",false,false,false)}},"statement",false,false,false),__wrap(body)],null),this.funcIsAutoReturn(func),this.funcIsBound(func),this.funcIsCurried(func),this.funcAsType(func),this.funcIsGenerator(func),this.funcGeneric(func)));return __node("Block",2389,1,[__node("MacroAccess",2389,1,38,2389,{macroName:"let",macroData:{declarable:__node("MacroAccess",2389,10,37,2389,__node("MacroAccess",2389,10,31,2389,{isMutable:"mutable",ident:__wrap(ran)},"statement",false,false,false),"statement",false,false,false),value:__const("false")}},"statement",false,false,false),__wrap(func)],null);}else if(this.isConst(silentFail)&&!this.value(silentFail)){return __node("Call",2393,11,__node("Ident",2393,11,"__once"),[__wrap(func)],false,false);}else{return __node("Call",2395,11,__node("Ident",2395,11,"__once"),[__wrap(func),__wrap(silentFail)],false,false);}};}.call(this));',names:"once!",id:126},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("fulfilled! only expects one argument");}return this.mutateLast(node||this.noop(),function(n){return __node("Call",3637,47,__node("Access",3637,47,__node("Ident",3637,47,"__defer"),__node("Const",3637,56,"fulfilled")),[__wrap(n)],false,false);},true);};}.call(this));',names:"fulfilled!",id:156},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,macroData,macroName,node;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("rejected! only expects one argument");}return this.mutateLast(node||this.noop(),function(n){return __node("Call",3642,47,__node("Access",3642,47,__node("Ident",3642,47,"__defer"),__node("Const",3642,56,"rejected")),[__wrap(n)],false,false);},true);};}.call(this));',names:"rejected!",id:157},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("from-promise! only expects one argument");}return __node("Call",3652,7,__node("Ident",3652,7,"__fromPromise"),[__wrap(node)],false,false);};}.call(this));',names:"fromPromise!",id:158},{code:'return (function(){"use strict";var __num,__slice,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__slice=Array.prototype.slice;__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var _this,args,func,head,macroData,macroName,node,tail;_this=this;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("to-promise! only expects one argument");}if(!this.isCall(node)){this.error("to-promise! call expression must be a call",node);}func=this.callFunc(node);args=this.callArgs(node);if(this.callIsNew(node)){args=this.array(args);return __node("Call",3673,9,__node("Ident",3673,9,"__toPromise"),[__node("Ident",3673,23,"__new"),__wrap(func),__wrap(args)],false,false);}else if(this.callIsApply(node)){if(args.length===0||!this.isSpread(args[0])){head=args[0];tail=this.array(__slice.call(args,1));return __node("Call",3678,11,__node("Ident",3678,11,"__toPromise"),[__wrap(func),__wrap(head),__wrap(tail)],false,false);}else{return this.maybeCache(this.array(args),function(setArgs,args){return __node("Call",3681,13,__node("Ident",3681,13,"__toPromise"),[__wrap(func),__node("Access",3681,33,__wrap(setArgs),__node("Const",3681,44,0)),__node("Call",3681,47,__node("Access",3681,47,__wrap(args),__node("Const",3681,54,"slice")),[__node("Const",3681,60,1)],false,false)],false,false);});}}else{args=this.array(args);if(this.isAccess(func)){return this.maybeCache(this.parent(func),function(setParent,parent){var child;child=_this.child(func);return __node("Call",3687,13,__node("Ident",3687,13,"__toPromise"),[__node("Access",3687,27,__wrap(setParent),__wrap(child)),__wrap(parent),__wrap(args)],false,false);});}else{return __node("Call",3689,11,__node("Ident",3689,11,"__toPromise"),[__wrap(func),__const("void"),__wrap(args)],false,false);}}};}.call(this));',options:{type:"promise"},names:"toPromise!",id:159},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("some-promise! only expects one argument");}if(!this.hasType(node,"array")){this.error("some-promise! should be used on an Array",node);}return __node("Call",3724,7,__node("Ident",3724,7,"__somePromise"),[__wrap(node)],false,false);};}.call(this));',names:"somePromise!",id:160},{code:'return (function(){"use strict";var __num,__typeof;__num=function(num){if(typeof num!=="number"){throw TypeError("Expected a number, got "+__typeof(num));}else{return num;}};__typeof=(function(){var _toString;_toString=Object.prototype.toString;return function(o){if(o===void 0){return "Undefined";}else if(o===null){return "Null";}else{return o.constructor&&o.constructor.name||_toString.call(o).slice(8,-1);}};}());return function(macroFullData,__wrap,__node,__const){var macroData,macroName,node;macroName=macroFullData.macroName;macroData=macroFullData.macroData;node=macroData[0];if(__num(macroData.length)>1){this.error("some-promise! only expects one argument");}if(!this.hasType(node,"array")&&!this.hasType(node,"object")){this.error("every-promise! should be used on an Array or Object",node);}return __node("Call",3755,7,__node("Ident",3755,7,"__everyPromise"),[__wrap(node)],false,false);};}.call(this));',names:"everyPromise!",id:161},{code:'return (function(){"use strict";return function(macroFullData,__wrap,__node,__const){var macroData,macroName,milliseconds,value;macroName=macroFullData.macroName;macroData=macroFullData.macroData;milliseconds=macroData[0];value=macroData[1];if(!this.hasType(milliseconds,"number")){this.error("delay! should take a number in milliseconds");}if(this.isConst(value)&&this.value(value)===void 0){return __node("Call",3770,9,__node("Ident",3770,9,"__delay"),[__wrap(milliseconds)],false,false);}else{return __node("Call",3772,9,__node("Ident",3772,9,"__delay"),[__wrap(milliseconds),__wrap(value)],false,false);}};}.call(this));',names:"delay!",id:162}]})
}("undefined"!=typeof module&&"function"==typeof require?require:void 0);"function"==typeof define&&define.amd?define(function(){return t}):e.GorillaScript=t}(this),function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=t.util.clone(e[o]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var o in n)r[o]=n[o];return r},insertBefore:function(e,n,r,o){o=o||t.languages;var a=o[e],s={};for(var i in a)if(a.hasOwnProperty(i)){if(i==n)for(var l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);s[i]=a[i]}return o[e]=s},DFS:function(e,n){for(var r in e)n.call(e,r,e[r]),"Object"===t.util.type(e)&&t.languages.DFS(e[r],n)}},highlightAll:function(e,n){for(var r,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),a=0;r=o[a++];)t.highlightElement(r,e===!0,n)},highlightElement:function(r,o,a){for(var s,i,l=r;l&&!e.test(l.className);)l=l.parentNode;if(l&&(s=(l.className.match(e)||[,""])[1],i=t.languages[s]),i){r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,l=r.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var c=r.textContent;if(c){c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var u={element:r,language:s,grammar:i,code:c};if(t.hooks.run("before-highlight",u),o&&self.Worker){var f=new Worker(t.filename);f.onmessage=function(e){u.highlightedCode=n.stringify(JSON.parse(e.data),s),u.element.innerHTML=u.highlightedCode,a&&a.call(u.element),t.hooks.run("after-highlight",u)},f.postMessage(JSON.stringify({language:u.language,code:u.code}))}else u.highlightedCode=t.highlight(u.code,u.grammar,u.language),u.element.innerHTML=u.highlightedCode,a&&a.call(r),t.hooks.run("after-highlight",u)}}},highlight:function(e,r,o){return n.stringify(t.tokenize(e,r),o)},tokenize:function(e,n){var r=t.Token,o=[e],a=n.rest;if(a){for(var s in a)n[s]=a[s];delete n.rest}e:for(var s in n)if(n.hasOwnProperty(s)&&n[s]){var i=n[s],l=i.inside,c=!!i.lookbehind||0;i=i.pattern||i;for(var u=0;u<o.length;u++){var f=o[u];if(o.length>e.length)break e;if(!(f instanceof r)){i.lastIndex=0;var p=i.exec(f);if(p){c&&(c=p[1].length);var d=p.index-1+c,p=p[0].slice(c),_=p.length,h=d+_,m=f.slice(0,d+1),y=f.slice(h+1),g=[u,1];m&&g.push(m);var b=new r(s,l?t.tokenize(p,l):p);g.push(b),y&&g.push(y),Array.prototype.splice.apply(o,g)}}}}return o},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var o,a=0;o=r[a++];)o(n)}}},n=t.Token=function(e,t){this.type=e,this.content=t};if(n.stringify=function(e,r,o){if("string"==typeof e)return e;if("[object Array]"==Object.prototype.toString.call(e))return e.map(function(t){return n.stringify(t,r,e)}).join("");var a={type:e.type,content:n.stringify(e.content,r,o),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:o};"comment"==a.type&&(a.attributes.spellcheck="true"),t.hooks.run("wrap",a);var s="";for(var i in a.attributes)s+=i+'="'+(a.attributes[i]||"")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'" '+s+">"+a.content+"</"+a.tag+">"},!self.document)return self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,o=n.code;self.postMessage(JSON.stringify(t.tokenize(o,t.languages[r]))),self.close()},!1),void 0;var r=document.getElementsByTagName("script");r=r[r.length-1],r&&(t.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll))}(),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),function(){"use strict";Prism.languages.gorillascript=Prism.languages.extend("javascript",{keyword:/\b(yield\*?|(throw|return)\??|((all)?keys|label|require|async|fulfilled|rejected|delay)!|(to-|from-|some-|every-)?promise!)|\b(as|break|continue|return|(for|while|until)(\s+(first|every|some|filter|reduce))?|if|else|unless|switch|then|case|default|catch|finally|try|return(if|ing|unless)?|new|class|extends|private|public|protected|def|super|require|promisefor|async(if|for|unless|until|while)?|import|export|returnif|returning|returnunless|mutable|macro|const|static|var|do|of|let|enum|namespace|package|true|false|null|undefined|void|GLOBAL|this|prototype|arguments|from|__(?:FILE|LINE|COLUMN|DATEMSEC|VERSION)__)(?!-)\b/g,operator:/\b((has|owns)key|bit(and|or|xor|not|lshift|u?rshift)|and|or|xor|min|max|instanceof(some)?|typeof\!?|is(nt)?(?!\-)|in|to|til|by|not|xor|delete)(?!\-)\b|\b((and|or|min|max)=|is-(array|boolean|function|null|number|object|string|undefined|void)!|post-(dec|inc)!)|!~?=|={1,2}|:=|::|&amp;|~=|\-(>|(?![\w]))|~?[\+\*\/%\^\\]=?|~?%%|\?=?|(&lt;){2,3}|(&gt;){2,3}|&lt;=&gt;|\|&gt;|&lt;\||@|\.{3}|\-&gt;|(&lt;|&gt;)=?/g,number:/\b-?(0x[\da-f_]+(\.[\da-f_]+)?|0b[01_]+(\.[\da-f_]+)?|0o[0-7_]+(\.[\da-f_]+)?|\d{1,2}r[\w\d_]+(\.[\w\d_]+)?|\d[_\d]*(\.[\d_]*)?(_[\w\d_]*)?|NaN|Infinity)\b/g,string:{pattern:/r"(\\?.)*?"[gimy]*|r'(\\?.)*?'[gimy]*|"(\\?.)*?"|'(\\?.)*?'|\\\w[\w\d_]*(-\w[\w\d_]*)*\b/g,inside:{interpolation:/\$(\w[\d\w]*(\-\w[\d\w]*)*|\(.*?\))/g}},punctuation:/[{}[\];(),.:]/g,ident:/\b\w[\d\w]*(\-\w[\d\w]*)*(?!['"])\b/g}),Prism.languages.insertBefore("gorillascript","operator",{property:/[\.@]\w[\d\w]*(\-\w[\d\w]*)*\b|\w[\d\w]*(\-\w[\d\w]*)*\s*:/g}),Prism.languages.insertBefore("gorillascript","ident",{primordial:/\b(Object|String|Number|Boolean|Function|Array|Math|JSON|Date|RegExp|Error|RangeError|ReferenceError|SyntaxError|TypeError|URIError|escape|unescape|parse(Int|\-int|Float|\-float)|is\-?NaN|is(F|\-f)inite|decode\-?URI((C|\-c)omponent)?|encode\-?URI((C|\-c)omponent)?|Set|Map|WeakMap)\b/g})}.call(this),function(e){"use strict";var t,n,r,o,a,s,i,l,c,u;t=function(e,t,n,r,o){function s(e,t){u||(--d,null!=e&&null==l&&(l=e),n&&null==l&&arguments.length>1&&p.push(t),_||i())}function i(){for(;!u&&null==l&&e>d&&++f<t;)++d,_=!0,r(f,a(s)),_=!1;u||null==l&&0!==d||(u=!0,null!=l?o(l):o(null,p))}var l,u,f,p,d,_;if("number"!=typeof e)throw TypeError("Expected limit to be a Number, got "+c(e));if("number"!=typeof t)throw TypeError("Expected length to be a Number, got "+c(t));if(null==n)n=!1;else if("boolean"!=typeof n)throw TypeError("Expected hasResult to be a Boolean, got "+c(n));if("function"!=typeof r)throw TypeError("Expected onValue to be a Function, got "+c(r));if("function"!=typeof o)throw TypeError("Expected onComplete to be a Function, got "+c(o));return p=n?[]:null,0>=t?o(null,p):((1>e||e!==e)&&(e=1/0),l=null,d=0,_=!1,u=!1,f=-1,i(),void 0)},n=function(e){if("object"!=typeof e||null===e)throw TypeError("Expected promise to be an Object, got "+c(e));if("function"!=typeof e.then)throw TypeError("Expected promise.then to be a Function, got "+c(e.then));return function(t){e.then(function(e){return u(t,null,e)},function(e){return u(t,e)})}},r="function"==typeof Array.isArray?Array.isArray:function(){var e;return e=Object.prototype.toString,function(t){return"[object Array]"===e.call(t)}}(),o=function(e){if("number"!=typeof e)throw TypeError("Expected a number, got "+c(e));return e},a=function(){function e(){throw Error("Attempted to call function more than once")}function t(){}return function(n,r){if("function"!=typeof n)throw TypeError("Expected func to be a Function, got "+c(n));if(null==r)r=!1;else if("boolean"!=typeof r)throw TypeError("Expected silentFail to be a Boolean, got "+c(r));return function(){var o;return o=n,n=r?t:e,o.apply(this,arguments)}}}(),s=Array.prototype.slice,i=function(e){var t;if(t=typeof e,"string"===t)return e;if("number"===t)return String(e);throw TypeError("Expected a string or number, got "+c(e))},l=function(e){if(null==e)throw TypeError("Expected an object, got "+c(e));return r(e)?e:"string"==typeof e?e.split(""):s.call(e)},c=function(){var e;return e=Object.prototype.toString,function(t){return void 0===t?"Undefined":null===t?"Null":t.constructor&&t.constructor.name||e.call(t).slice(8,-1)}}(),u="function"==typeof e.setImmediate?e.setImmediate:"undefined"!=typeof process&&"function"==typeof process.nextTick?function(){var e;return e=process.nextTick,function(t){var n;if("function"!=typeof t)throw TypeError("Expected func to be a Function, got "+c(t));return n=s.call(arguments,1),n.length?e(function(){t.apply(void 0,l(n))}):e(t)}}():function(e){var t;if("function"!=typeof e)throw TypeError("Expected func to be a Function, got "+c(e));return t=s.call(arguments,1),t.length?setTimeout(function(){e.apply(void 0,l(t))},0):setTimeout(e,0)},jQuery(function(e){function r(){if(_)try{return Function(_)()}catch(e){return alert(String(e)),void 0}}function a(e){return function(){try{return e.apply(this,arguments)}catch(t){u(function(){throw t})}return!1}}function s(){return p||d||f?void 0:e("#toc").removeClass("hover")}function l(){var n;return Prism.languages.gorillascript?(n=e('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),t(1,o(n.length),!1,function(e,t){var r;return r=n[e],Prism.highlightElement(r),u(t)},function(){})):setTimeout(l,17)}var c,f,p,d,_,h;return e("#try-link").removeClass("hide"),c=function(){function t(){var t,o;return r?(c(),void 0):(o=e("#try-input").val(),r=!0,n(GorillaScript.compile(o))((t=!1,function(n,o){if(t)throw Error("Attempted to call function more than once");return t=!0,r=!1,n?(e("#try-input-wrap").addClass("error"),_="// Error: "+String(n)):(e("#try-input-wrap").removeClass("error"),_=o.code),e("#try-output").val(_)})))}var r,o;return r=!1,function(){return null!=o&&clearTimeout(o),o=setTimeout(t,250)}}(),setInterval(function(){var t;return t="",function(){var n;return n=e("#try-input").val(),n!==t?(t=n,c()):void 0}}(),17),e("a[href=#try]").click(a(function(){var t;return c(),t=e("#try"),t.slideToggle(),e("#run-link").toggleClass("hide"),!1})),e("a[href=#run]").click(a(function(){return r(),!1})),e("#irc-button").click(a(function(){var t;return t=e(this).data("url"),e(this).replaceWith(e("<iframe id='irc-iframe' src='"+i(t)+"'></iframe>")),!1})),f="ontouchstart"in window,d=!1,p=!1,e("#toc").removeClass("hover"),f||(e("#toc-label").addClass("no-touch").bind("touchstart",a(function(){return f=!0,e(this).removeClass("no-touch"),!0})),e("#toc-label").hover(a(function(){return f?void 0:(d=!0,e("#toc").addClass("hover"))}),a(function(){return f?void 0:(d=!1,setTimeout(s,17))})),e("#toc").hover(a(function(){return f?void 0:(p=!0,e("#toc").addClass("hover"))}),a(function(){return f?void 0:(p=!1,setTimeout(s,17))}))),e("#toc-label a").click(a(function(){return u(function(){return e("#toc").toggleClass("hover"),setTimeout(s,17)}),!1})),h=function(){function e(){var o,a,s,i;if(0!==t.length&&!r)return r=!0,i=(s=t.shift()).gsCode,o=s.$jsCode,n(GorillaScript.compile(i,{"return":!0,bare:!0}))((a=!1,function(t,n){var s,i;if(a)throw Error("Attempted to call function more than once");return a=!0,s=o.find("code"),s.text(null!=t?"// Error: "+String(t):n.code),u((i=!1,function(){if(i)throw Error("Attempted to call function more than once");return i=!0,Prism.highlightElement(s[0]),r=!1,e()}))}))}var t,r;return t=[],r=!1,function(n,r){return r.find("code").text("// Compiling..."),t.push({gsCode:n,$jsCode:r}),e()}}(),e(".gs-code").each(function(){var t,n;return n=e(this),n.hasClass("no-convert")?void 0:(t=e("<div>"),n.replaceWith(t),t.append(e("<ul class='tabs'><li class='gs-tab active'><a href='#'>GorillaScript</a><li class='js-tab'><a href='#'>JavaScript</a></ul>")),t.append(n),t.find(".tabs a").on("click",a(function(){var r;return t.find(".tabs li").removeClass("active"),e(this).parent().addClass("active"),e(this).parent().hasClass("gs-tab")?(t.find(".js-code").hide(),t.find(".gs-code").show()):(t.find(".gs-code").hide(),r=t.find(".js-code"),0===r.length&&(r=e("<pre class='js-code'><code class='language-javascript'></code></pre>"),t.append(r),h(n.find("code").text(),r)),r.show()),!1})))}),l()})}.call(this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:this);